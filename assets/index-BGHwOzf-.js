var XAe=Object.defineProperty;var QAe=(i,e,t)=>e in i?XAe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var uE=(i,e,t)=>QAe(i,typeof e!="symbol"?e+"":e,t);function ZAe(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Ag(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var LB={exports:{}},fE={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fq;function JAe(){if(fq)return fE;fq=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var a in r)a!=="key"&&(s[a]=r[a])}else s=r;return r=s.ref,{$$typeof:i,type:n,key:o,ref:r!==void 0?r:null,props:s}}return fE.Fragment=e,fE.jsx=t,fE.jsxs=t,fE}var hq;function eme(){return hq||(hq=1,LB.exports=JAe()),LB.exports}var ce=eme(),PB={exports:{}},Xi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dq;function tme(){if(dq)return Xi;dq=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function h(ie){return ie===null||typeof ie!="object"?null:(ie=f&&ie[f]||ie["@@iterator"],typeof ie=="function"?ie:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(ie,ge,Ce){this.props=ie,this.context=ge,this.refs=g,this.updater=Ce||p}b.prototype.isReactComponent={},b.prototype.setState=function(ie,ge){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,ge,"setState")},b.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function T(){}T.prototype=b.prototype;function C(ie,ge,Ce){this.props=ie,this.context=ge,this.refs=g,this.updater=Ce||p}var R=C.prototype=new T;R.constructor=C,m(R,b.prototype),R.isPureReactComponent=!0;var P=Array.isArray,I={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function k(ie,ge,Ce,Ie,Ee,Be){return Ce=Be.ref,{$$typeof:i,type:ie,key:ge,ref:Ce!==void 0?Ce:null,props:Be}}function q(ie,ge){return k(ie.type,ge,void 0,void 0,void 0,ie.props)}function H(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===i}function O(ie){var ge={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Ce){return ge[Ce]})}var $=/\/+/g;function ee(ie,ge){return typeof ie=="object"&&ie!==null&&ie.key!=null?O(""+ie.key):ge.toString(36)}function Y(){}function oe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(Y,Y):(ie.status="pending",ie.then(function(ge){ie.status==="pending"&&(ie.status="fulfilled",ie.value=ge)},function(ge){ie.status==="pending"&&(ie.status="rejected",ie.reason=ge)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function re(ie,ge,Ce,Ie,Ee){var Be=typeof ie;(Be==="undefined"||Be==="boolean")&&(ie=null);var qe=!1;if(ie===null)qe=!0;else switch(Be){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(ie.$$typeof){case i:case e:qe=!0;break;case u:return qe=ie._init,re(qe(ie._payload),ge,Ce,Ie,Ee)}}if(qe)return Ee=Ee(ie),qe=Ie===""?"."+ee(ie,0):Ie,P(Ee)?(Ce="",qe!=null&&(Ce=qe.replace($,"$&/")+"/"),re(Ee,ge,Ce,"",function(Ht){return Ht})):Ee!=null&&(H(Ee)&&(Ee=q(Ee,Ce+(Ee.key==null||ie&&ie.key===Ee.key?"":(""+Ee.key).replace($,"$&/")+"/")+qe)),ge.push(Ee)),1;qe=0;var it=Ie===""?".":Ie+":";if(P(ie))for(var et=0;et<ie.length;et++)Ie=ie[et],Be=it+ee(Ie,et),qe+=re(Ie,ge,Ce,Be,Ee);else if(et=h(ie),typeof et=="function")for(ie=et.call(ie),et=0;!(Ie=ie.next()).done;)Ie=Ie.value,Be=it+ee(Ie,et++),qe+=re(Ie,ge,Ce,Be,Ee);else if(Be==="object"){if(typeof ie.then=="function")return re(oe(ie),ge,Ce,Ie,Ee);throw ge=String(ie),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return qe}function Q(ie,ge,Ce){if(ie==null)return ie;var Ie=[],Ee=0;return re(ie,Ie,"","",function(Be){return ge.call(Ce,Be,Ee++)}),Ie}function se(ie){if(ie._status===-1){var ge=ie._result;ge=ge(),ge.then(function(Ce){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Ce)},function(Ce){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Ce)}),ie._status===-1&&(ie._status=0,ie._result=ge)}if(ie._status===1)return ie._result.default;throw ie._result}var le=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)};function de(){}return Xi.Children={map:Q,forEach:function(ie,ge,Ce){Q(ie,function(){ge.apply(this,arguments)},Ce)},count:function(ie){var ge=0;return Q(ie,function(){ge++}),ge},toArray:function(ie){return Q(ie,function(ge){return ge})||[]},only:function(ie){if(!H(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},Xi.Component=b,Xi.Fragment=t,Xi.Profiler=r,Xi.PureComponent=C,Xi.StrictMode=n,Xi.Suspense=l,Xi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Xi.act=function(){throw Error("act(...) is not supported in production builds of React.")},Xi.cache=function(ie){return function(){return ie.apply(null,arguments)}},Xi.cloneElement=function(ie,ge,Ce){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ie=m({},ie.props),Ee=ie.key,Be=void 0;if(ge!=null)for(qe in ge.ref!==void 0&&(Be=void 0),ge.key!==void 0&&(Ee=""+ge.key),ge)!F.call(ge,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&ge.ref===void 0||(Ie[qe]=ge[qe]);var qe=arguments.length-2;if(qe===1)Ie.children=Ce;else if(1<qe){for(var it=Array(qe),et=0;et<qe;et++)it[et]=arguments[et+2];Ie.children=it}return k(ie.type,Ee,void 0,void 0,Be,Ie)},Xi.createContext=function(ie){return ie={$$typeof:o,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:s,_context:ie},ie},Xi.createElement=function(ie,ge,Ce){var Ie,Ee={},Be=null;if(ge!=null)for(Ie in ge.key!==void 0&&(Be=""+ge.key),ge)F.call(ge,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(Ee[Ie]=ge[Ie]);var qe=arguments.length-2;if(qe===1)Ee.children=Ce;else if(1<qe){for(var it=Array(qe),et=0;et<qe;et++)it[et]=arguments[et+2];Ee.children=it}if(ie&&ie.defaultProps)for(Ie in qe=ie.defaultProps,qe)Ee[Ie]===void 0&&(Ee[Ie]=qe[Ie]);return k(ie,Be,void 0,void 0,null,Ee)},Xi.createRef=function(){return{current:null}},Xi.forwardRef=function(ie){return{$$typeof:a,render:ie}},Xi.isValidElement=H,Xi.lazy=function(ie){return{$$typeof:u,_payload:{_status:-1,_result:ie},_init:se}},Xi.memo=function(ie,ge){return{$$typeof:c,type:ie,compare:ge===void 0?null:ge}},Xi.startTransition=function(ie){var ge=I.T,Ce={};I.T=Ce;try{var Ie=ie(),Ee=I.S;Ee!==null&&Ee(Ce,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(de,le)}catch(Be){le(Be)}finally{I.T=ge}},Xi.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Xi.use=function(ie){return I.H.use(ie)},Xi.useActionState=function(ie,ge,Ce){return I.H.useActionState(ie,ge,Ce)},Xi.useCallback=function(ie,ge){return I.H.useCallback(ie,ge)},Xi.useContext=function(ie){return I.H.useContext(ie)},Xi.useDebugValue=function(){},Xi.useDeferredValue=function(ie,ge){return I.H.useDeferredValue(ie,ge)},Xi.useEffect=function(ie,ge){return I.H.useEffect(ie,ge)},Xi.useId=function(){return I.H.useId()},Xi.useImperativeHandle=function(ie,ge,Ce){return I.H.useImperativeHandle(ie,ge,Ce)},Xi.useInsertionEffect=function(ie,ge){return I.H.useInsertionEffect(ie,ge)},Xi.useLayoutEffect=function(ie,ge){return I.H.useLayoutEffect(ie,ge)},Xi.useMemo=function(ie,ge){return I.H.useMemo(ie,ge)},Xi.useOptimistic=function(ie,ge){return I.H.useOptimistic(ie,ge)},Xi.useReducer=function(ie,ge,Ce){return I.H.useReducer(ie,ge,Ce)},Xi.useRef=function(ie){return I.H.useRef(ie)},Xi.useState=function(ie){return I.H.useState(ie)},Xi.useSyncExternalStore=function(ie,ge,Ce){return I.H.useSyncExternalStore(ie,ge,Ce)},Xi.useTransition=function(){return I.H.useTransition()},Xi.version="19.0.0",Xi}var pq;function YS(){return pq||(pq=1,PB.exports=tme()),PB.exports}var X=YS();const Ne=Ag(X),PD=ZAe({__proto__:null,default:Ne},[X]);var NB={exports:{}},hE={},BB={exports:{}},IB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aq;function nme(){return Aq||(Aq=1,function(i){function e(Q,se){var le=Q.length;Q.push(se);e:for(;0<le;){var de=le-1>>>1,ie=Q[de];if(0<r(ie,se))Q[de]=se,Q[le]=ie,le=de;else break e}}function t(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var se=Q[0],le=Q.pop();if(le!==se){Q[0]=le;e:for(var de=0,ie=Q.length,ge=ie>>>1;de<ge;){var Ce=2*(de+1)-1,Ie=Q[Ce],Ee=Ce+1,Be=Q[Ee];if(0>r(Ie,le))Ee<ie&&0>r(Be,Ie)?(Q[de]=Be,Q[Ee]=le,de=Ee):(Q[de]=Ie,Q[Ce]=le,de=Ce);else if(Ee<ie&&0>r(Be,le))Q[de]=Be,Q[Ee]=le,de=Ee;else break e}}return se}function r(Q,se){var le=Q.sortIndex-se.sortIndex;return le!==0?le:Q.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(Q){for(var se=t(c);se!==null;){if(se.callback===null)n(c);else if(se.startTime<=Q)n(c),se.sortIndex=se.expirationTime,e(l,se);else break;se=t(c)}}function P(Q){if(g=!1,R(Q),!m)if(t(l)!==null)m=!0,oe();else{var se=t(c);se!==null&&re(P,se.startTime-Q)}}var I=!1,F=-1,k=5,q=-1;function H(){return!(i.unstable_now()-q<k)}function O(){if(I){var Q=i.unstable_now();q=Q;var se=!0;try{e:{m=!1,g&&(g=!1,T(F),F=-1),p=!0;var le=h;try{t:{for(R(Q),f=t(l);f!==null&&!(f.expirationTime>Q&&H());){var de=f.callback;if(typeof de=="function"){f.callback=null,h=f.priorityLevel;var ie=de(f.expirationTime<=Q);if(Q=i.unstable_now(),typeof ie=="function"){f.callback=ie,R(Q),se=!0;break t}f===t(l)&&n(l),R(Q)}else n(l);f=t(l)}if(f!==null)se=!0;else{var ge=t(c);ge!==null&&re(P,ge.startTime-Q),se=!1}}break e}finally{f=null,h=le,p=!1}se=void 0}}finally{se?$():I=!1}}}var $;if(typeof C=="function")$=function(){C(O)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Y=ee.port2;ee.port1.onmessage=O,$=function(){Y.postMessage(null)}}else $=function(){b(O,0)};function oe(){I||(I=!0,$())}function re(Q,se){F=b(function(){Q(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_continueExecution=function(){m||p||(m=!0,oe())},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return h},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var se=3;break;default:se=h}var le=h;h=se;try{return Q()}finally{h=le}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=h;h=Q;try{return se()}finally{h=le}},i.unstable_scheduleCallback=function(Q,se,le){var de=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?de+le:de):le=de,Q){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=le+ie,Q={id:u++,callback:se,priorityLevel:Q,startTime:le,expirationTime:ie,sortIndex:-1},le>de?(Q.sortIndex=le,e(c,Q),t(l)===null&&Q===t(c)&&(g?(T(F),F=-1):g=!0,re(P,le-de))):(Q.sortIndex=ie,e(l,Q),m||p||(m=!0,oe())),Q},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(Q){var se=h;return function(){var le=h;h=se;try{return Q.apply(this,arguments)}finally{h=le}}}}(IB)),IB}var mq;function P7(){return mq||(mq=1,BB.exports=nme()),BB.exports}var OB={exports:{}},sc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gq;function ime(){if(gq)return sc;gq=1;var i=YS();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return sc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,sc.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},sc.flushSync=function(l){var c=o.T,u=n.p;try{if(o.T=null,n.p=2,l)return l()}finally{o.T=c,n.p=u,n.d.f()}},sc.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},sc.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},sc.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):u==="script"&&n.d.X(l,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},sc.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},sc.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=a(u,c.crossOrigin);n.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},sc.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},sc.requestFormReset=function(l){n.d.r(l)},sc.unstable_batchedUpdates=function(l,c){return l(c)},sc.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},sc.useFormStatus=function(){return o.H.useHostTransitionStatus()},sc.version="19.0.0",sc}var yq;function Vee(){if(yq)return OB.exports;yq=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),OB.exports=ime(),OB.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vq;function rme(){if(vq)return hE;vq=1;var i=P7(),e=YS(),t=Vee();function n(d){var A="https://react.dev/errors/"+d;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)A+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+d+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}var s=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),P=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function F(d){return d===null||typeof d!="object"?null:(d=I&&d[I]||d["@@iterator"],typeof d=="function"?d:null)}var k=Symbol.for("react.client.reference");function q(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===k?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case l:return"Fragment";case a:return"Portal";case u:return"Profiler";case c:return"StrictMode";case g:return"Suspense";case b:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case p:return(d.displayName||"Context")+".Provider";case h:return(d._context.displayName||"Context")+".Consumer";case m:var A=d.render;return d=d.displayName,d||(d=A.displayName||A.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case T:return A=d.displayName||null,A!==null?A:q(d.type)||"Memo";case C:A=d._payload,d=d._init;try{return q(d(A))}catch{}}return null}var H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=Object.assign,$,ee;function Y(d){if($===void 0)try{throw Error()}catch(w){var A=w.stack.trim().match(/\n( *(at )?)/);$=A&&A[1]||"",ee=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$+d+ee}var oe=!1;function re(d,A){if(!d||oe)return"";oe=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(A){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(Bt){var yt=Bt}Reflect.construct(d,[],Zt)}else{try{Zt.call()}catch(Bt){yt=Bt}d.call(Zt.prototype)}}else{try{throw Error()}catch(Bt){yt=Bt}(Zt=d())&&typeof Zt.catch=="function"&&Zt.catch(function(){})}}catch(Bt){if(Bt&&yt&&typeof Bt.stack=="string")return[Bt.stack,yt.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=D.DetermineComponentFrameRoot(),ae=j[0],xe=j[1];if(ae&&xe){var De=ae.split(`
`),We=xe.split(`
`);for(G=D=0;D<De.length&&!De[D].includes("DetermineComponentFrameRoot");)D++;for(;G<We.length&&!We[G].includes("DetermineComponentFrameRoot");)G++;if(D===De.length||G===We.length)for(D=De.length-1,G=We.length-1;1<=D&&0<=G&&De[D]!==We[G];)G--;for(;1<=D&&0<=G;D--,G--)if(De[D]!==We[G]){if(D!==1||G!==1)do if(D--,G--,0>G||De[D]!==We[G]){var Ft=`
`+De[D].replace(" at new "," at ");return d.displayName&&Ft.includes("<anonymous>")&&(Ft=Ft.replace("<anonymous>",d.displayName)),Ft}while(1<=D&&0<=G);break}}}finally{oe=!1,Error.prepareStackTrace=w}return(w=d?d.displayName||d.name:"")?Y(w):""}function Q(d){switch(d.tag){case 26:case 27:case 5:return Y(d.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 15:return d=re(d.type,!1),d;case 11:return d=re(d.type.render,!1),d;case 1:return d=re(d.type,!0),d;default:return""}}function se(d){try{var A="";do A+=Q(d),d=d.return;while(d);return A}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function le(d){var A=d,w=d;if(d.alternate)for(;A.return;)A=A.return;else{d=A;do A=d,A.flags&4098&&(w=A.return),d=A.return;while(d)}return A.tag===3?w:null}function de(d){if(d.tag===13){var A=d.memoizedState;if(A===null&&(d=d.alternate,d!==null&&(A=d.memoizedState)),A!==null)return A.dehydrated}return null}function ie(d){if(le(d)!==d)throw Error(n(188))}function ge(d){var A=d.alternate;if(!A){if(A=le(d),A===null)throw Error(n(188));return A!==d?null:d}for(var w=d,D=A;;){var G=w.return;if(G===null)break;var j=G.alternate;if(j===null){if(D=G.return,D!==null){w=D;continue}break}if(G.child===j.child){for(j=G.child;j;){if(j===w)return ie(G),d;if(j===D)return ie(G),A;j=j.sibling}throw Error(n(188))}if(w.return!==D.return)w=G,D=j;else{for(var ae=!1,xe=G.child;xe;){if(xe===w){ae=!0,w=G,D=j;break}if(xe===D){ae=!0,D=G,w=j;break}xe=xe.sibling}if(!ae){for(xe=j.child;xe;){if(xe===w){ae=!0,w=j,D=G;break}if(xe===D){ae=!0,D=j,w=G;break}xe=xe.sibling}if(!ae)throw Error(n(189))}}if(w.alternate!==D)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:A}function Ce(d){var A=d.tag;if(A===5||A===26||A===27||A===6)return d;for(d=d.child;d!==null;){if(A=Ce(d),A!==null)return A;d=d.sibling}return null}var Ie=Array.isArray,Ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},qe=[],it=-1;function et(d){return{current:d}}function Ht(d){0>it||(d.current=qe[it],qe[it]=null,it--)}function _t(d,A){it++,qe[it]=d.current,d.current=A}var $t=et(null),mt=et(null),ut=et(null),we=et(null);function Jt(d,A){switch(_t(ut,A),_t(mt,d),_t($t,null),d=A.nodeType,d){case 9:case 11:A=(A=A.documentElement)&&(A=A.namespaceURI)?GV(A):0;break;default:if(d=d===8?A.parentNode:A,A=d.tagName,d=d.namespaceURI)d=GV(d),A=zV(d,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}Ht($t),_t($t,A)}function ft(){Ht($t),Ht(mt),Ht(ut)}function Dt(d){d.memoizedState!==null&&_t(we,d);var A=$t.current,w=zV(A,d.type);A!==w&&(_t(mt,d),_t($t,w))}function Rt(d){mt.current===d&&(Ht($t),Ht(mt)),we.current===d&&(Ht(we),sE._currentValue=Be)}var yn=Object.prototype.hasOwnProperty,Gt=i.unstable_scheduleCallback,Se=i.unstable_cancelCallback,fe=i.unstable_shouldYield,Pe=i.unstable_requestPaint,Ve=i.unstable_now,Tt=i.unstable_getCurrentPriorityLevel,bt=i.unstable_ImmediatePriority,sn=i.unstable_UserBlockingPriority,on=i.unstable_NormalPriority,mn=i.unstable_LowPriority,ai=i.unstable_IdlePriority,Vt=i.log,_n=i.unstable_setDisableYieldValue,En=null,pn=null;function Sn(d){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(En,d,void 0,(d.current.flags&128)===128)}catch{}}function Fe(d){if(typeof Vt=="function"&&_n(d),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(En,d)}catch{}}var xt=Math.clz32?Math.clz32:tn,dn=Math.log,Te=Math.LN2;function tn(d){return d>>>=0,d===0?32:31-(dn(d)/Te|0)|0}var At=128,Lt=4194304;function vn(d){var A=d&42;if(A!==0)return A;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function xn(d,A){var w=d.pendingLanes;if(w===0)return 0;var D=0,G=d.suspendedLanes,j=d.pingedLanes,ae=d.warmLanes;d=d.finishedLanes!==0;var xe=w&134217727;return xe!==0?(w=xe&~G,w!==0?D=vn(w):(j&=xe,j!==0?D=vn(j):d||(ae=xe&~ae,ae!==0&&(D=vn(ae))))):(xe=w&~G,xe!==0?D=vn(xe):j!==0?D=vn(j):d||(ae=w&~ae,ae!==0&&(D=vn(ae)))),D===0?0:A!==0&&A!==D&&!(A&G)&&(G=D&-D,ae=A&-A,G>=ae||G===32&&(ae&4194176)!==0)?A:D}function Nn(d,A){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&A)===0}function Fi(d,A){switch(d){case 1:case 2:case 4:case 8:return A+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var d=At;return At<<=1,!(At&4194176)&&(At=128),d}function Gn(){var d=Lt;return Lt<<=1,!(Lt&62914560)&&(Lt=4194304),d}function Gr(d){for(var A=[],w=0;31>w;w++)A.push(d);return A}function Qr(d,A){d.pendingLanes|=A,A!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function dt(d,A,w,D,G,j){var ae=d.pendingLanes;d.pendingLanes=w,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=w,d.entangledLanes&=w,d.errorRecoveryDisabledLanes&=w,d.shellSuspendCounter=0;var xe=d.entanglements,De=d.expirationTimes,We=d.hiddenUpdates;for(w=ae&~w;0<w;){var Ft=31-xt(w),Zt=1<<Ft;xe[Ft]=0,De[Ft]=-1;var yt=We[Ft];if(yt!==null)for(We[Ft]=null,Ft=0;Ft<yt.length;Ft++){var Bt=yt[Ft];Bt!==null&&(Bt.lane&=-536870913)}w&=~Zt}D!==0&&Ut(d,D,0),j!==0&&G===0&&d.tag!==0&&(d.suspendedLanes|=j&~(ae&~A))}function Ut(d,A,w){d.pendingLanes|=A,d.suspendedLanes&=~A;var D=31-xt(A);d.entangledLanes|=A,d.entanglements[D]=d.entanglements[D]|1073741824|w&4194218}function hn(d,A){var w=d.entangledLanes|=A;for(d=d.entanglements;w;){var D=31-xt(w),G=1<<D;G&A|d[D]&A&&(d[D]|=A),w&=~G}}function In(d){return d&=-d,2<d?8<d?d&134217727?32:268435456:8:2}function S(){var d=Ee.p;return d!==0?d:(d=window.event,d===void 0?32:sq(d.type))}function ve(d,A){var w=Ee.p;try{return Ee.p=d,A()}finally{Ee.p=w}}var Kn=Math.random().toString(36).slice(2),ni="__reactFiber$"+Kn,zn="__reactProps$"+Kn,si="__reactContainer$"+Kn,Bi="__reactEvents$"+Kn,Pc="__reactListeners$"+Kn,pr="__reactHandles$"+Kn,xi="__reactResources$"+Kn,Xs="__reactMarker$"+Kn;function vu(d){delete d[ni],delete d[zn],delete d[Bi],delete d[Pc],delete d[pr]}function Nc(d){var A=d[ni];if(A)return A;for(var w=d.parentNode;w;){if(A=w[si]||w[ni]){if(w=A.alternate,A.child!==null||w!==null&&w.child!==null)for(d=qV(d);d!==null;){if(w=d[ni])return w;d=qV(d)}return A}d=w,w=d.parentNode}return null}function ye(d){if(d=d[ni]||d[si]){var A=d.tag;if(A===5||A===6||A===13||A===26||A===27||A===3)return d}return null}function Ge(d){var A=d.tag;if(A===5||A===26||A===27||A===6)return d.stateNode;throw Error(n(33))}function lt(d){var A=d[xi];return A||(A=d[xi]={hoistableStyles:new Map,hoistableScripts:new Map}),A}function Je(d){d[Xs]=!0}var Ye=new Set,Xt={};function fn(d,A){zt(d,A),zt(d+"Capture",A)}function zt(d,A){for(Xt[d]=A,d=0;d<A.length;d++)Ye.add(A[d])}var Ae=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),en=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),li={},Hn={};function Zi(d){return yn.call(Hn,d)?!0:yn.call(li,d)?!1:en.test(d)?Hn[d]=!0:(li[d]=!0,!1)}function Ji(d,A,w){if(Zi(A))if(w===null)d.removeAttribute(A);else{switch(typeof w){case"undefined":case"function":case"symbol":d.removeAttribute(A);return;case"boolean":var D=A.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){d.removeAttribute(A);return}}d.setAttribute(A,""+w)}}function Zr(d,A,w){if(w===null)d.removeAttribute(A);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(A);return}d.setAttribute(A,""+w)}}function me(d,A,w,D){if(D===null)d.removeAttribute(w);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(w);return}d.setAttributeNS(A,w,""+D)}}function gi(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Yn(d){var A=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(A==="checkbox"||A==="radio")}function Qs(d){var A=Yn(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,A),D=""+d[A];if(!d.hasOwnProperty(A)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var G=w.get,j=w.set;return Object.defineProperty(d,A,{configurable:!0,get:function(){return G.call(this)},set:function(ae){D=""+ae,j.call(this,ae)}}),Object.defineProperty(d,A,{enumerable:w.enumerable}),{getValue:function(){return D},setValue:function(ae){D=""+ae},stopTracking:function(){d._valueTracker=null,delete d[A]}}}}function er(d){d._valueTracker||(d._valueTracker=Qs(d))}function Va(d){if(!d)return!1;var A=d._valueTracker;if(!A)return!0;var w=A.getValue(),D="";return d&&(D=Yn(d)?d.checked?"true":"false":d.value),d=D,d!==w?(A.setValue(d),!0):!1}function Rl(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var ra=/[\n"\\]/g;function Zs(d){return d.replace(ra,function(A){return"\\"+A.charCodeAt(0).toString(16)+" "})}function Tr(d,A,w,D,G,j,ae,xe){d.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?d.type=ae:d.removeAttribute("type"),A!=null?ae==="number"?(A===0&&d.value===""||d.value!=A)&&(d.value=""+gi(A)):d.value!==""+gi(A)&&(d.value=""+gi(A)):ae!=="submit"&&ae!=="reset"||d.removeAttribute("value"),A!=null?lr(d,ae,gi(A)):w!=null?lr(d,ae,gi(w)):D!=null&&d.removeAttribute("value"),G==null&&j!=null&&(d.defaultChecked=!!j),G!=null&&(d.checked=G&&typeof G!="function"&&typeof G!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?d.name=""+gi(xe):d.removeAttribute("name")}function ps(d,A,w,D,G,j,ae,xe){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(d.type=j),A!=null||w!=null){if(!(j!=="submit"&&j!=="reset"||A!=null))return;w=w!=null?""+gi(w):"",A=A!=null?""+gi(A):w,xe||A===d.value||(d.value=A),d.defaultValue=A}D=D??G,D=typeof D!="function"&&typeof D!="symbol"&&!!D,d.checked=xe?d.checked:!!D,d.defaultChecked=!!D,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(d.name=ae)}function lr(d,A,w){A==="number"&&Rl(d.ownerDocument)===d||d.defaultValue===""+w||(d.defaultValue=""+w)}function As(d,A,w,D){if(d=d.options,A){A={};for(var G=0;G<w.length;G++)A["$"+w[G]]=!0;for(w=0;w<d.length;w++)G=A.hasOwnProperty("$"+d[w].value),d[w].selected!==G&&(d[w].selected=G),G&&D&&(d[w].defaultSelected=!0)}else{for(w=""+gi(w),A=null,G=0;G<d.length;G++){if(d[G].value===w){d[G].selected=!0,D&&(d[G].defaultSelected=!0);return}A!==null||d[G].disabled||(A=d[G])}A!==null&&(A.selected=!0)}}function Uo(d,A,w){if(A!=null&&(A=""+gi(A),A!==d.value&&(d.value=A),w==null)){d.defaultValue!==A&&(d.defaultValue=A);return}d.defaultValue=w!=null?""+gi(w):""}function Bc(d,A,w,D){if(A==null){if(D!=null){if(w!=null)throw Error(n(92));if(Ie(D)){if(1<D.length)throw Error(n(93));D=D[0]}w=D}w==null&&(w=""),A=w}w=gi(A),d.defaultValue=w,D=d.textContent,D===w&&D!==""&&D!==null&&(d.value=D)}function Sa(d,A){if(A){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=A;return}}d.textContent=A}var _g=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function PA(d,A,w){var D=A.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?D?d.setProperty(A,""):A==="float"?d.cssFloat="":d[A]="":D?d.setProperty(A,w):typeof w!="number"||w===0||_g.has(A)?A==="float"?d.cssFloat=w:d[A]=(""+w).trim():d[A]=w+"px"}function x1(d,A,w){if(A!=null&&typeof A!="object")throw Error(n(62));if(d=d.style,w!=null){for(var D in w)!w.hasOwnProperty(D)||A!=null&&A.hasOwnProperty(D)||(D.indexOf("--")===0?d.setProperty(D,""):D==="float"?d.cssFloat="":d[D]="");for(var G in A)D=A[G],A.hasOwnProperty(G)&&w[G]!==D&&PA(d,G,D)}else for(var j in A)A.hasOwnProperty(j)&&PA(d,j,A[j])}function Er(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),b1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function NA(d){return b1.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Tg=null;function BA(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var xh=null,xf=null;function zp(d){var A=ye(d);if(A&&(d=A.stateNode)){var w=d[zn]||null;e:switch(d=A.stateNode,A.type){case"input":if(Tr(d,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),A=w.name,w.type==="radio"&&A!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+Zs(""+A)+'"][type="radio"]'),A=0;A<w.length;A++){var D=w[A];if(D!==d&&D.form===d.form){var G=D[zn]||null;if(!G)throw Error(n(90));Tr(D,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(A=0;A<w.length;A++)D=w[A],D.form===d.form&&Va(D)}break e;case"textarea":Uo(d,w.value,w.defaultValue);break e;case"select":A=w.value,A!=null&&As(d,!!w.multiple,A,!1)}}}var Eg=!1;function _1(d,A,w){if(Eg)return d(A,w);Eg=!0;try{var D=d(A);return D}finally{if(Eg=!1,(xh!==null||xf!==null)&&(om(),xh&&(A=xh,d=xf,xf=xh=null,zp(A),d)))for(A=0;A<d.length;A++)zp(d[A])}}function Id(d,A){var w=d.stateNode;if(w===null)return null;var D=w[zn]||null;if(D===null)return null;w=D[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(d=d.type,D=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!D;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,A,typeof w));return w}var Hp=!1;if(Ae)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{Hp=!1}var bf=null,S1=null,wg=null;function ko(){if(wg)return wg;var d,A=S1,w=A.length,D,G="value"in bf?bf.value:bf.textContent,j=G.length;for(d=0;d<w&&A[d]===G[d];d++);var ae=w-d;for(D=1;D<=ae&&A[w-D]===G[j-D];D++);return wg=G.slice(d,1<D?1-D:void 0)}function sl(d){var A=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&A===13&&(d=13)):d=A,d===10&&(d=13),32<=d||d===13?d:0}function Js(){return!0}function Fd(){return!1}function Ta(d){function A(w,D,G,j,ae){this._reactName=w,this._targetInst=G,this.type=D,this.nativeEvent=j,this.target=ae,this.currentTarget=null;for(var xe in d)d.hasOwnProperty(xe)&&(w=d[xe],this[xe]=w?w(j):j[xe]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Js:Fd,this.isPropagationStopped=Fd,this}return O(A.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),A}var Ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vp=Ta(Ic),qp=O({},Ic,{view:0,detail:0}),bb=Ta(qp),xu,_f,Ql,Ud=O({},qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FA,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Ql&&(Ql&&d.type==="mousemove"?(xu=d.screenX-Ql.screenX,_f=d.screenY-Ql.screenY):_f=xu=0,Ql=d),xu)},movementY:function(d){return"movementY"in d?d.movementY:_f}}),Mg=Ta(Ud),IA=O({},Ud,{dataTransfer:0}),kd=Ta(IA),ms=O({},qp,{relatedTarget:0}),OA=Ta(ms),T1=O({},Ic,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=Ta(T1),_b=O({},Ic,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Sb=Ta(_b),$p=O({},Ic,{data:0}),Rg=Ta($p),Tb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E1(d){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(d):(d=wb[d])?!!A[d]:!1}function FA(){return E1}var Mb=O({},qp,{key:function(d){if(d.key){var A=Tb[d.key]||d.key;if(A!=="Unidentified")return A}return d.type==="keypress"?(d=sl(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Eb[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FA,charCode:function(d){return d.type==="keypress"?sl(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?sl(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),w1=Ta(Mb),jp=O({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=Ta(jp),Cb=O({},qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FA}),M1=Ta(Cb),Wp=O({},Ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sf=Ta(Wp),UA=O({},Ud,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=Ta(UA),Gd=O({},Ic,{newState:0,oldState:0}),bh=Ta(Gd),Oc=[9,13,27,32],Kp=Ae&&"CompositionEvent"in window,zd=null;Ae&&"documentMode"in document&&(zd=document.documentMode);var Yp=Ae&&"TextEvent"in window&&!zd,Hd=Ae&&(!Kp||zd&&8<zd&&11>=zd),bu=" ",eo=!1;function wr(d,A){switch(d){case"keyup":return Oc.indexOf(A.keyCode)!==-1;case"keydown":return A.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C1(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var _h=!1;function kA(d,A){switch(d){case"compositionend":return C1(A);case"keypress":return A.which!==32?null:(eo=!0,bu);case"textInput":return d=A.data,d===bu&&eo?null:d;default:return null}}function R1(d,A){if(_h)return d==="compositionend"||!Kp&&wr(d,A)?(d=ko(),wg=S1=bf=null,_h=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return Hd&&A.locale!=="ko"?null:A.data;default:return null}}var Lg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D1(d){var A=d&&d.nodeName&&d.nodeName.toLowerCase();return A==="input"?!!Lg[d.type]:A==="textarea"}function ol(d,A,w,D){xh?xf?xf.push(D):xf=[D]:xh=D,A=uR(A,"onChange"),0<A.length&&(w=new Vp("onChange","change",null,w,D),d.push({event:w,listeners:A}))}var mo=null,Tf=null;function Sh(d){IV(d,0)}function GA(d){var A=Ge(d);if(Va(A))return d}function Xp(d,A){if(d==="change")return A}var Pg=!1;if(Ae){var qa;if(Ae){var Vd="oninput"in document;if(!Vd){var Th=document.createElement("div");Th.setAttribute("oninput","return;"),Vd=typeof Th.oninput=="function"}qa=Vd}else qa=!1;Pg=qa&&(!document.documentMode||9<document.documentMode)}function Lr(){mo&&(mo.detachEvent("onpropertychange",Qp),Tf=mo=null)}function Qp(d){if(d.propertyName==="value"&&GA(Tf)){var A=[];ol(A,Tf,d,BA(d)),_1(Sh,A)}}function zA(d,A,w){d==="focusin"?(Lr(),mo=A,Tf=w,mo.attachEvent("onpropertychange",Qp)):d==="focusout"&&Lr()}function Db(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return GA(Tf)}function Zp(d,A){if(d==="click")return GA(A)}function Eh(d,A){if(d==="input"||d==="change")return GA(A)}function Ng(d,A){return d===A&&(d!==0||1/d===1/A)||d!==d&&A!==A}var al=typeof Object.is=="function"?Object.is:Ng;function Fc(d,A){if(al(d,A))return!0;if(typeof d!="object"||d===null||typeof A!="object"||A===null)return!1;var w=Object.keys(d),D=Object.keys(A);if(w.length!==D.length)return!1;for(D=0;D<w.length;D++){var G=w[D];if(!yn.call(A,G)||!al(d[G],A[G]))return!1}return!0}function $a(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Bg(d,A){var w=$a(d);d=0;for(var D;w;){if(w.nodeType===3){if(D=d+w.textContent.length,d<=A&&D>=A)return{node:w,offset:A-d};d=D}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=$a(w)}}function qd(d,A){return d&&A?d===A?!0:d&&d.nodeType===3?!1:A&&A.nodeType===3?qd(d,A.parentNode):"contains"in d?d.contains(A):d.compareDocumentPosition?!!(d.compareDocumentPosition(A)&16):!1:!1}function wh(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var A=Rl(d.document);A instanceof d.HTMLIFrameElement;){try{var w=typeof A.contentWindow.location.href=="string"}catch{w=!1}if(w)d=A.contentWindow;else break;A=Rl(d.document)}return A}function HA(d){var A=d&&d.nodeName&&d.nodeName.toLowerCase();return A&&(A==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||A==="textarea"||d.contentEditable==="true")}function $d(d,A){var w=wh(A);A=d.focusedElem;var D=d.selectionRange;if(w!==A&&A&&A.ownerDocument&&qd(A.ownerDocument.documentElement,A)){if(D!==null&&HA(A)){if(d=D.start,w=D.end,w===void 0&&(w=d),"selectionStart"in A)A.selectionStart=d,A.selectionEnd=Math.min(w,A.value.length);else if(w=(d=A.ownerDocument||document)&&d.defaultView||window,w.getSelection){w=w.getSelection();var G=A.textContent.length,j=Math.min(D.start,G);D=D.end===void 0?j:Math.min(D.end,G),!w.extend&&j>D&&(G=D,D=j,j=G),G=Bg(A,j);var ae=Bg(A,D);G&&ae&&(w.rangeCount!==1||w.anchorNode!==G.node||w.anchorOffset!==G.offset||w.focusNode!==ae.node||w.focusOffset!==ae.offset)&&(d=d.createRange(),d.setStart(G.node,G.offset),w.removeAllRanges(),j>D?(w.addRange(d),w.extend(ae.node,ae.offset)):(d.setEnd(ae.node,ae.offset),w.addRange(d)))}}for(d=[],w=A;w=w.parentNode;)w.nodeType===1&&d.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<d.length;A++)w=d[A],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}var Ig=Ae&&"documentMode"in document&&11>=document.documentMode,jd=null,L1=null,Jp=null,Og=!1;function Zl(d,A,w){var D=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;Og||jd==null||jd!==Rl(D)||(D=jd,"selectionStart"in D&&HA(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Jp&&Fc(Jp,D)||(Jp=D,D=uR(L1,"onSelect"),0<D.length&&(A=new Vp("onSelect","select",null,A,w),d.push({event:A,listeners:D}),A.target=jd)))}function Ef(d,A){var w={};return w[d.toLowerCase()]=A.toLowerCase(),w["Webkit"+d]="webkit"+A,w["Moz"+d]="moz"+A,w}var wf={animationend:Ef("Animation","AnimationEnd"),animationiteration:Ef("Animation","AnimationIteration"),animationstart:Ef("Animation","AnimationStart"),transitionrun:Ef("Transition","TransitionRun"),transitionstart:Ef("Transition","TransitionStart"),transitioncancel:Ef("Transition","TransitionCancel"),transitionend:Ef("Transition","TransitionEnd")},Fg={},e0={};Ae&&(e0=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function to(d){if(Fg[d])return Fg[d];if(!wf[d])return d;var A=wf[d],w;for(w in A)if(A.hasOwnProperty(w)&&w in e0)return Fg[d]=A[w];return d}var P1=to("animationend"),ll=to("animationiteration"),N1=to("animationstart"),Mf=to("transitionrun"),t0=to("transitionstart"),Mh=to("transitioncancel"),VA=to("transitionend"),Ug=new Map,_u="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function no(d,A){Ug.set(d,A),fn(A,[d])}var Go=[],Su=0,Cf=0;function qA(){for(var d=Su,A=Cf=Su=0;A<d;){var w=Go[A];Go[A++]=null;var D=Go[A];Go[A++]=null;var G=Go[A];Go[A++]=null;var j=Go[A];if(Go[A++]=null,D!==null&&G!==null){var ae=D.pending;ae===null?G.next=G:(G.next=ae.next,ae.next=G),D.pending=G}j!==0&&n0(w,G,j)}}function $A(d,A,w,D){Go[Su++]=d,Go[Su++]=A,Go[Su++]=w,Go[Su++]=D,Cf|=D,d.lanes|=D,d=d.alternate,d!==null&&(d.lanes|=D)}function Wd(d,A,w,D){return $A(d,A,w,D),i0(d)}function Ea(d,A){return $A(d,null,null,A),i0(d)}function n0(d,A,w){d.lanes|=w;var D=d.alternate;D!==null&&(D.lanes|=w);for(var G=!1,j=d.return;j!==null;)j.childLanes|=w,D=j.alternate,D!==null&&(D.childLanes|=w),j.tag===22&&(d=j.stateNode,d===null||d._visibility&1||(G=!0)),d=j,j=j.return;G&&A!==null&&d.tag===3&&(j=d.stateNode,G=31-xt(w),j=j.hiddenUpdates,d=j[G],d===null?j[G]=[A]:d.push(A),A.lane=w|536870912)}function i0(d){if(50<Ou)throw Ou=0,cp=null,Error(n(185));for(var A=d.return;A!==null;)d=A,A=d.return;return d.tag===3?d.stateNode:null}var Ch={},kg=new WeakMap;function cl(d,A){if(typeof d=="object"&&d!==null){var w=kg.get(d);return w!==void 0?w:(A={value:d,source:A,stack:se(A)},kg.set(d,A),A)}return{value:d,source:A,stack:se(A)}}var Kd=[],Rh=0,wa=null,jA=0,Jr=[],Dl=0,Rf=null,Tu=1,Eu="";function Ma(d,A){Kd[Rh++]=jA,Kd[Rh++]=wa,wa=d,jA=A}function Is(d,A,w){Jr[Dl++]=Tu,Jr[Dl++]=Eu,Jr[Dl++]=Rf,Rf=d;var D=Tu;d=Eu;var G=32-xt(D)-1;D&=~(1<<G),w+=1;var j=32-xt(A)+G;if(30<j){var ae=G-G%5;j=(D&(1<<ae)-1).toString(32),D>>=ae,G-=ae,Tu=1<<32-xt(A)+G|w<<G|D,Eu=j+d}else Tu=1<<j|w<<G|D,Eu=d}function WA(d){d.return!==null&&(Ma(d,1),Is(d,1,0))}function Dh(d){for(;d===wa;)wa=Kd[--Rh],Kd[Rh]=null,jA=Kd[--Rh],Kd[Rh]=null;for(;d===Rf;)Rf=Jr[--Dl],Jr[Dl]=null,Eu=Jr[--Dl],Jr[Dl]=null,Tu=Jr[--Dl],Jr[Dl]=null}var io=null,Pr=null,Ar=!1,Jl=null,ec=!1,r0=Error(n(519));function Lh(d){var A=Error(n(418,""));throw wu(cl(A,d)),r0}function B1(d){var A=d.stateNode,w=d.type,D=d.memoizedProps;switch(A[ni]=d,A[zn]=D,w){case"dialog":_r("cancel",A),_r("close",A);break;case"iframe":case"object":case"embed":_r("load",A);break;case"video":case"audio":for(w=0;w<eE.length;w++)_r(eE[w],A);break;case"source":_r("error",A);break;case"img":case"image":case"link":_r("error",A),_r("load",A);break;case"details":_r("toggle",A);break;case"input":_r("invalid",A),ps(A,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0),er(A);break;case"select":_r("invalid",A);break;case"textarea":_r("invalid",A),Bc(A,D.value,D.defaultValue,D.children),er(A)}w=D.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||A.textContent===""+w||D.suppressHydrationWarning===!0||kV(A.textContent,w)?(D.popover!=null&&(_r("beforetoggle",A),_r("toggle",A)),D.onScroll!=null&&_r("scroll",A),D.onScrollEnd!=null&&_r("scrollend",A),D.onClick!=null&&(A.onclick=fR),A=!0):A=!1,A||Lh(d)}function I1(d){for(io=d.return;io;)switch(io.tag){case 3:case 27:ec=!0;return;case 5:case 13:ec=!1;return;default:io=io.return}}function s0(d){if(d!==io)return!1;if(!Ar)return I1(d),Ar=!0,!1;var A=!1,w;if((w=d.tag!==3&&d.tag!==27)&&((w=d.tag===5)&&(w=d.type,w=!(w!=="form"&&w!=="button")||yB(d.type,d.memoizedProps)),w=!w),w&&(A=!0),A&&Pr&&Lh(d),I1(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,A=0;d;){if(d.nodeType===8)if(w=d.data,w==="/$"){if(A===0){Pr=fp(d.nextSibling);break e}A--}else w!=="$"&&w!=="$!"&&w!=="$?"||A++;d=d.nextSibling}Pr=null}}else Pr=io?fp(d.stateNode.nextSibling):null;return!0}function o0(){Pr=io=null,Ar=!1}function wu(d){Jl===null?Jl=[d]:Jl.push(d)}var Ph=Error(n(460)),O1=Error(n(474)),Uc={then:function(){}};function kc(d){return d=d.status,d==="fulfilled"||d==="rejected"}function ii(){}function sa(d,A,w){switch(w=d[w],w===void 0?d.push(A):w!==A&&(A.then(ii,ii),A=w),A.status){case"fulfilled":return A.value;case"rejected":throw d=A.reason,d===Ph?Error(n(483)):d;default:if(typeof A.status=="string")A.then(ii,ii);else{if(d=ts,d!==null&&100<d.shellSuspendCounter)throw Error(n(482));d=A,d.status="pending",d.then(function(D){if(A.status==="pending"){var G=A;G.status="fulfilled",G.value=D}},function(D){if(A.status==="pending"){var G=A;G.status="rejected",G.reason=D}})}switch(A.status){case"fulfilled":return A.value;case"rejected":throw d=A.reason,d===Ph?Error(n(483)):d}throw Ti=A,Ph}}var Ti=null;function bi(){if(Ti===null)throw Error(n(459));var d=Ti;return Ti=null,d}var Df=null,Yd=0;function Gc(d){var A=Yd;return Yd+=1,Df===null&&(Df=[]),sa(Df,d,A)}function KA(d,A){A=A.props.ref,d.ref=A!==void 0?A:null}function go(d,A){throw A.$$typeof===s?Error(n(525)):(d=Object.prototype.toString.call(A),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":d)))}function YA(d){var A=d._init;return A(d._payload)}function Xd(d){function A(tt,$e){if(d){var ct=tt.deletions;ct===null?(tt.deletions=[$e],tt.flags|=16):ct.push($e)}}function w(tt,$e){if(!d)return null;for(;$e!==null;)A(tt,$e),$e=$e.sibling;return null}function D(tt){for(var $e=new Map;tt!==null;)tt.key!==null?$e.set(tt.key,tt):$e.set(tt.index,tt),tt=tt.sibling;return $e}function G(tt,$e){return tt=Bl(tt,$e),tt.index=0,tt.sibling=null,tt}function j(tt,$e,ct){return tt.index=ct,d?(ct=tt.alternate,ct!==null?(ct=ct.index,ct<$e?(tt.flags|=33554434,$e):ct):(tt.flags|=33554434,$e)):(tt.flags|=1048576,$e)}function ae(tt){return d&&tt.alternate===null&&(tt.flags|=33554434),tt}function xe(tt,$e,ct,Wt){return $e===null||$e.tag!==6?($e=Ho(ct,tt.mode,Wt),$e.return=tt,$e):($e=G($e,ct),$e.return=tt,$e)}function De(tt,$e,ct,Wt){var On=ct.type;return On===l?Ft(tt,$e,ct.props.children,Wt,ct.key):$e!==null&&($e.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===C&&YA(On)===$e.type)?($e=G($e,ct.props),KA($e,ct),$e.return=tt,$e):($e=Xg(ct.type,ct.key,ct.props,null,tt.mode,Wt),KA($e,ct),$e.return=tt,$e)}function We(tt,$e,ct,Wt){return $e===null||$e.tag!==4||$e.stateNode.containerInfo!==ct.containerInfo||$e.stateNode.implementation!==ct.implementation?($e=j1(ct,tt.mode,Wt),$e.return=tt,$e):($e=G($e,ct.children||[]),$e.return=tt,$e)}function Ft(tt,$e,ct,Wt,On){return $e===null||$e.tag!==7?($e=g0(ct,tt.mode,Wt,On),$e.return=tt,$e):($e=G($e,ct),$e.return=tt,$e)}function Zt(tt,$e,ct){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return $e=Ho(""+$e,tt.mode,ct),$e.return=tt,$e;if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case o:return ct=Xg($e.type,$e.key,$e.props,null,tt.mode,ct),KA(ct,$e),ct.return=tt,ct;case a:return $e=j1($e,tt.mode,ct),$e.return=tt,$e;case C:var Wt=$e._init;return $e=Wt($e._payload),Zt(tt,$e,ct)}if(Ie($e)||F($e))return $e=g0($e,tt.mode,ct,null),$e.return=tt,$e;if(typeof $e.then=="function")return Zt(tt,Gc($e),ct);if($e.$$typeof===p)return Zt(tt,$b(tt,$e),ct);go(tt,$e)}return null}function yt(tt,$e,ct,Wt){var On=$e!==null?$e.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return On!==null?null:xe(tt,$e,""+ct,Wt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case o:return ct.key===On?De(tt,$e,ct,Wt):null;case a:return ct.key===On?We(tt,$e,ct,Wt):null;case C:return On=ct._init,ct=On(ct._payload),yt(tt,$e,ct,Wt)}if(Ie(ct)||F(ct))return On!==null?null:Ft(tt,$e,ct,Wt,null);if(typeof ct.then=="function")return yt(tt,$e,Gc(ct),Wt);if(ct.$$typeof===p)return yt(tt,$e,$b(tt,ct),Wt);go(tt,ct)}return null}function Bt(tt,$e,ct,Wt,On){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number"||typeof Wt=="bigint")return tt=tt.get(ct)||null,xe($e,tt,""+Wt,On);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case o:return tt=tt.get(Wt.key===null?ct:Wt.key)||null,De($e,tt,Wt,On);case a:return tt=tt.get(Wt.key===null?ct:Wt.key)||null,We($e,tt,Wt,On);case C:var ur=Wt._init;return Wt=ur(Wt._payload),Bt(tt,$e,ct,Wt,On)}if(Ie(Wt)||F(Wt))return tt=tt.get(ct)||null,Ft($e,tt,Wt,On,null);if(typeof Wt.then=="function")return Bt(tt,$e,ct,Gc(Wt),On);if(Wt.$$typeof===p)return Bt(tt,$e,ct,$b($e,Wt),On);go($e,Wt)}return null}function jn(tt,$e,ct,Wt){for(var On=null,ur=null,ei=$e,yi=$e=0,ml=null;ei!==null&&yi<ct.length;yi++){ei.index>yi?(ml=ei,ei=null):ml=ei.sibling;var Ir=yt(tt,ei,ct[yi],Wt);if(Ir===null){ei===null&&(ei=ml);break}d&&ei&&Ir.alternate===null&&A(tt,ei),$e=j(Ir,$e,yi),ur===null?On=Ir:ur.sibling=Ir,ur=Ir,ei=ml}if(yi===ct.length)return w(tt,ei),Ar&&Ma(tt,yi),On;if(ei===null){for(;yi<ct.length;yi++)ei=Zt(tt,ct[yi],Wt),ei!==null&&($e=j(ei,$e,yi),ur===null?On=ei:ur.sibling=ei,ur=ei);return Ar&&Ma(tt,yi),On}for(ei=D(ei);yi<ct.length;yi++)ml=Bt(ei,tt,yi,ct[yi],Wt),ml!==null&&(d&&ml.alternate!==null&&ei.delete(ml.key===null?yi:ml.key),$e=j(ml,$e,yi),ur===null?On=ml:ur.sibling=ml,ur=ml);return d&&ei.forEach(function(sy){return A(tt,sy)}),Ar&&Ma(tt,yi),On}function Ui(tt,$e,ct,Wt){if(ct==null)throw Error(n(151));for(var On=null,ur=null,ei=$e,yi=$e=0,ml=null,Ir=ct.next();ei!==null&&!Ir.done;yi++,Ir=ct.next()){ei.index>yi?(ml=ei,ei=null):ml=ei.sibling;var sy=yt(tt,ei,Ir.value,Wt);if(sy===null){ei===null&&(ei=ml);break}d&&ei&&sy.alternate===null&&A(tt,ei),$e=j(sy,$e,yi),ur===null?On=sy:ur.sibling=sy,ur=sy,ei=ml}if(Ir.done)return w(tt,ei),Ar&&Ma(tt,yi),On;if(ei===null){for(;!Ir.done;yi++,Ir=ct.next())Ir=Zt(tt,Ir.value,Wt),Ir!==null&&($e=j(Ir,$e,yi),ur===null?On=Ir:ur.sibling=Ir,ur=Ir);return Ar&&Ma(tt,yi),On}for(ei=D(ei);!Ir.done;yi++,Ir=ct.next())Ir=Bt(ei,tt,yi,Ir.value,Wt),Ir!==null&&(d&&Ir.alternate!==null&&ei.delete(Ir.key===null?yi:Ir.key),$e=j(Ir,$e,yi),ur===null?On=Ir:ur.sibling=Ir,ur=Ir);return d&&ei.forEach(function(YAe){return A(tt,YAe)}),Ar&&Ma(tt,yi),On}function $o(tt,$e,ct,Wt){if(typeof ct=="object"&&ct!==null&&ct.type===l&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case o:e:{for(var On=ct.key;$e!==null;){if($e.key===On){if(On=ct.type,On===l){if($e.tag===7){w(tt,$e.sibling),Wt=G($e,ct.props.children),Wt.return=tt,tt=Wt;break e}}else if($e.elementType===On||typeof On=="object"&&On!==null&&On.$$typeof===C&&YA(On)===$e.type){w(tt,$e.sibling),Wt=G($e,ct.props),KA(Wt,ct),Wt.return=tt,tt=Wt;break e}w(tt,$e);break}else A(tt,$e);$e=$e.sibling}ct.type===l?(Wt=g0(ct.props.children,tt.mode,Wt,ct.key),Wt.return=tt,tt=Wt):(Wt=Xg(ct.type,ct.key,ct.props,null,tt.mode,Wt),KA(Wt,ct),Wt.return=tt,tt=Wt)}return ae(tt);case a:e:{for(On=ct.key;$e!==null;){if($e.key===On)if($e.tag===4&&$e.stateNode.containerInfo===ct.containerInfo&&$e.stateNode.implementation===ct.implementation){w(tt,$e.sibling),Wt=G($e,ct.children||[]),Wt.return=tt,tt=Wt;break e}else{w(tt,$e);break}else A(tt,$e);$e=$e.sibling}Wt=j1(ct,tt.mode,Wt),Wt.return=tt,tt=Wt}return ae(tt);case C:return On=ct._init,ct=On(ct._payload),$o(tt,$e,ct,Wt)}if(Ie(ct))return jn(tt,$e,ct,Wt);if(F(ct)){if(On=F(ct),typeof On!="function")throw Error(n(150));return ct=On.call(ct),Ui(tt,$e,ct,Wt)}if(typeof ct.then=="function")return $o(tt,$e,Gc(ct),Wt);if(ct.$$typeof===p)return $o(tt,$e,$b(tt,ct),Wt);go(tt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,$e!==null&&$e.tag===6?(w(tt,$e.sibling),Wt=G($e,ct),Wt.return=tt,tt=Wt):(w(tt,$e),Wt=Ho(ct,tt.mode,Wt),Wt.return=tt,tt=Wt),ae(tt)):w(tt,$e)}return function(tt,$e,ct,Wt){try{Yd=0;var On=$o(tt,$e,ct,Wt);return Df=null,On}catch(ei){if(ei===Ph)throw ei;var ur=So(29,ei,null,tt.mode);return ur.lanes=Wt,ur.return=tt,ur}finally{}}}var Mu=Xd(!0),jt=Xd(!1),un=et(null),Nh=et(0);function Cu(d,A){d=lp,_t(Nh,d),_t(un,A),lp=d|A.baseLanes}function Qd(){_t(Nh,lp),_t(un,un.current)}function Bh(){lp=Nh.current,Ht(un),Ht(Nh)}var ro=et(null),zc=null;function Ca(d){var A=d.alternate;_t(M,M.current&1),_t(ro,d),zc===null&&(A===null||un.current!==null||A.memoizedState!==null)&&(zc=d)}function x(d){if(d.tag===22){if(_t(M,M.current),_t(ro,d),zc===null){var A=d.alternate;A!==null&&A.memoizedState!==null&&(zc=d)}}else v()}function v(){_t(M,M.current),_t(ro,ro.current)}function E(d){Ht(ro),zc===d&&(zc=null),Ht(M)}var M=et(0);function L(d){for(var A=d;A!==null;){if(A.tag===13){var w=A.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if(A.flags&128)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var B=typeof AbortController<"u"?AbortController:function(){var d=[],A=this.signal={aborted:!1,addEventListener:function(w,D){d.push(D)}};this.abort=function(){A.aborted=!0,d.forEach(function(w){return w()})}},U=i.unstable_scheduleCallback,V=i.unstable_NormalPriority,K={$$typeof:p,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function te(){return{controller:new B,data:new Map,refCount:0}}function ue(d){d.refCount--,d.refCount===0&&U(V,function(){d.controller.abort()})}var _e=null,Le=0,ke=0,Re=null;function Ke(d,A){if(_e===null){var w=_e=[];Le=0,ke=cB(),Re={status:"pending",value:void 0,then:function(D){w.push(D)}}}return Le++,A.then(Et,Et),A}function Et(){if(--Le===0&&_e!==null){Re!==null&&(Re.status="fulfilled");var d=_e;_e=null,ke=0,Re=null;for(var A=0;A<d.length;A++)(0,d[A])()}}function gt(d,A){var w=[],D={status:"pending",value:null,reason:null,then:function(G){w.push(G)}};return d.then(function(){D.status="fulfilled",D.value=A;for(var G=0;G<w.length;G++)(0,w[G])(A)},function(G){for(D.status="rejected",D.reason=G,G=0;G<w.length;G++)(0,w[G])(void 0)}),D}var ot=H.S;H.S=function(d,A){typeof A=="object"&&A!==null&&typeof A.then=="function"&&Ke(d,A),ot!==null&&ot(d,A)};var rt=et(null);function je(){var d=rt.current;return d!==null?d:ts.pooledCache}function gn(d,A){A===null?_t(rt,rt.current):_t(rt,A.pool)}function Tn(){var d=je();return d===null?null:{parent:K._currentValue,pool:d}}var an=0,kt=null,Un=null,Xn=null,bn=!1,oi=!1,Zn=!1,fi=0,tr=0,Jn=null,zr=0;function nr(){throw Error(n(321))}function Ih(d,A){if(A===null)return!1;for(var w=0;w<A.length&&w<d.length;w++)if(!al(d[w],A[w]))return!1;return!0}function ET(d,A,w,D,G,j){return an=j,kt=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,H.H=d===null||d.memoizedState===null?l0:Jd,Zn=!1,j=w(D,G),Zn=!1,oi&&(j=bC(A,w,D,G)),xC(d),j}function xC(d){H.H=Fh;var A=Un!==null&&Un.next!==null;if(an=0,Xn=Un=kt=null,bn=!1,tr=0,Jn=null,A)throw Error(n(300));d===null||oa||(d=d.dependencies,d!==null&&qg(d)&&(oa=!0))}function bC(d,A,w,D){kt=d;var G=0;do{if(oi&&(Jn=null),tr=0,oi=!1,25<=G)throw Error(n(301));if(G+=1,Xn=Un=null,d.updateQueue!=null){var j=d.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}H.H=ZA,j=A(w,D)}while(oi);return j}function nB(){var d=H.H,A=d.useState()[0];return A=typeof A.then=="function"?U1(A):A,d=d.useState()[0],(Un!==null?Un.memoizedState:null)!==d&&(kt.flags|=1024),A}function wT(){var d=fi!==0;return fi=0,d}function F1(d,A,w){A.updateQueue=d.updateQueue,A.flags&=-2053,d.lanes&=~w}function Lb(d){if(bn){for(d=d.memoizedState;d!==null;){var A=d.queue;A!==null&&(A.pending=null),d=d.next}bn=!1}an=0,Xn=Un=kt=null,oi=!1,tr=fi=0,Jn=null}function ja(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?kt.memoizedState=Xn=d:Xn=Xn.next=d,Xn}function yo(){if(Un===null){var d=kt.alternate;d=d!==null?d.memoizedState:null}else d=Un.next;var A=Xn===null?kt.memoizedState:Xn.next;if(A!==null)Xn=A,Un=d;else{if(d===null)throw kt.alternate===null?Error(n(467)):Error(n(310));Un=d,d={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},Xn===null?kt.memoizedState=Xn=d:Xn=Xn.next=d}return Xn}var Pb;Pb=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function U1(d){var A=tr;return tr+=1,Jn===null&&(Jn=[]),d=sa(Jn,d,A),A=kt,(Xn===null?A.memoizedState:Xn.next)===null&&(A=A.alternate,H.H=A===null||A.memoizedState===null?l0:Jd),d}function Gg(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return U1(d);if(d.$$typeof===p)return ul(d)}throw Error(n(438,String(d)))}function Lf(d){var A=null,w=kt.updateQueue;if(w!==null&&(A=w.memoCache),A==null){var D=kt.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(A={data:D.data.map(function(G){return G.slice()}),index:0})))}if(A==null&&(A={data:[],index:0}),w===null&&(w=Pb(),kt.updateQueue=w),w.memoCache=A,w=A.data[A.index],w===void 0)for(w=A.data[A.index]=Array(d),D=0;D<d;D++)w[D]=P;return A.index++,w}function Os(d,A){return typeof A=="function"?A(d):A}function Pf(d){var A=yo();return tc(A,Un,d)}function tc(d,A,w){var D=d.queue;if(D===null)throw Error(n(311));D.lastRenderedReducer=w;var G=d.baseQueue,j=D.pending;if(j!==null){if(G!==null){var ae=G.next;G.next=j.next,j.next=ae}A.baseQueue=G=j,D.pending=null}if(j=d.baseState,G===null)d.memoizedState=j;else{A=G.next;var xe=ae=null,De=null,We=A,Ft=!1;do{var Zt=We.lane&-536870913;if(Zt!==We.lane?(ci&Zt)===Zt:(an&Zt)===Zt){var yt=We.revertLane;if(yt===0)De!==null&&(De=De.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),Zt===ke&&(Ft=!0);else if((an&yt)===yt){We=We.next,yt===ke&&(Ft=!0);continue}else Zt={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},De===null?(xe=De=Zt,ae=j):De=De.next=Zt,kt.lanes|=yt,kf|=yt;Zt=We.action,Zn&&w(j,Zt),j=We.hasEagerState?We.eagerState:w(j,Zt)}else yt={lane:Zt,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},De===null?(xe=De=yt,ae=j):De=De.next=yt,kt.lanes|=Zt,kf|=Zt;We=We.next}while(We!==null&&We!==A);if(De===null?ae=j:De.next=xe,!al(j,d.memoizedState)&&(oa=!0,Ft&&(w=Re,w!==null)))throw w;d.memoizedState=j,d.baseState=ae,d.baseQueue=De,D.lastRenderedState=j}return G===null&&(D.lanes=0),[d.memoizedState,D.dispatch]}function Nb(d){var A=yo(),w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var D=w.dispatch,G=w.pending,j=A.memoizedState;if(G!==null){w.pending=null;var ae=G=G.next;do j=d(j,ae.action),ae=ae.next;while(ae!==G);al(j,A.memoizedState)||(oa=!0),A.memoizedState=j,A.baseQueue===null&&(A.baseState=j),w.lastRenderedState=j}return[j,D]}function _C(d,A,w){var D=kt,G=yo(),j=Ar;if(j){if(w===void 0)throw Error(n(407));w=w()}else w=A();var ae=!al((Un||G).memoizedState,w);if(ae&&(G.memoizedState=w,oa=!0),G=G.queue,DT(SC.bind(null,D,G,d),[d]),G.getSnapshot!==A||ae||Xn!==null&&Xn.memoizedState.tag&1){if(D.flags|=2048,Oh(9,a0.bind(null,D,G,w,A),{destroy:void 0},null),ts===null)throw Error(n(349));j||an&60||Ll(D,A,w)}return w}function Ll(d,A,w){d.flags|=16384,d={getSnapshot:A,value:w},A=kt.updateQueue,A===null?(A=Pb(),kt.updateQueue=A,A.stores=[d]):(w=A.stores,w===null?A.stores=[d]:w.push(d))}function a0(d,A,w,D){A.value=w,A.getSnapshot=D,TC(A)&&EC(d)}function SC(d,A,w){return w(function(){TC(A)&&EC(d)})}function TC(d){var A=d.getSnapshot;d=d.value;try{var w=A();return!al(d,w)}catch{return!0}}function EC(d){var A=Ea(d,2);A!==null&&qo(A,d,2)}function MT(d){var A=ja();if(typeof d=="function"){var w=d;if(d=w(),Zn){Fe(!0);try{w()}finally{Fe(!1)}}}return A.memoizedState=A.baseState=d,A.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:d},A}function CT(d,A,w,D){return d.baseState=w,tc(d,Un,typeof D=="function"?D:Os)}function iB(d,A,w,D,G){if(Ub(d))throw Error(n(485));if(d=A.action,d!==null){var j={payload:G,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){j.listeners.push(ae)}};H.T!==null?w(!0):j.isTransition=!1,D(j),w=A.pending,w===null?(j.next=A.pending=j,RT(A,j)):(j.next=w.next,A.pending=w.next=j)}}function RT(d,A){var w=A.action,D=A.payload,G=d.state;if(A.isTransition){var j=H.T,ae={};H.T=ae;try{var xe=w(G,D),De=H.S;De!==null&&De(ae,xe),wC(d,A,xe)}catch(We){Zd(d,A,We)}finally{H.T=j}}else try{j=w(G,D),wC(d,A,j)}catch(We){Zd(d,A,We)}}function wC(d,A,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(D){XA(d,A,D)},function(D){return Zd(d,A,D)}):XA(d,A,w)}function XA(d,A,w){A.status="fulfilled",A.value=w,MC(A),d.state=w,A=d.pending,A!==null&&(w=A.next,w===A?d.pending=null:(w=w.next,A.next=w,RT(d,w)))}function Zd(d,A,w){var D=d.pending;if(d.pending=null,D!==null){D=D.next;do A.status="rejected",A.reason=w,MC(A),A=A.next;while(A!==D)}d.action=null}function MC(d){d=d.listeners;for(var A=0;A<d.length;A++)(0,d[A])()}function CC(d,A){return A}function RC(d,A){if(Ar){var w=ts.formState;if(w!==null){e:{var D=kt;if(Ar){if(Pr){t:{for(var G=Pr,j=ec;G.nodeType!==8;){if(!j){G=null;break t}if(G=fp(G.nextSibling),G===null){G=null;break t}}j=G.data,G=j==="F!"||j==="F"?G:null}if(G){Pr=fp(G.nextSibling),D=G.data==="F!";break e}}Lh(D)}D=!1}D&&(A=w[0])}}return w=ja(),w.memoizedState=w.baseState=A,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:CC,lastRenderedState:A},w.queue=D,w=BT.bind(null,kt,D),D.dispatch=w,D=MT(!1),j=k1.bind(null,kt,!1,D.queue),D=ja(),G={state:A,dispatch:null,action:d,pending:null},D.queue=G,w=iB.bind(null,kt,G,j,w),G.dispatch=w,D.memoizedState=d,[A,w,!1]}function zg(d){var A=yo();return DC(A,Un,d)}function DC(d,A,w){A=tc(d,A,CC)[0],d=Pf(Os)[0],A=typeof A=="object"&&A!==null&&typeof A.then=="function"?U1(A):A;var D=yo(),G=D.queue,j=G.dispatch;return w!==D.memoizedState&&(kt.flags|=2048,Oh(9,rB.bind(null,G,w),{destroy:void 0},null)),[A,j,d]}function rB(d,A){d.action=A}function LC(d){var A=yo(),w=Un;if(w!==null)return DC(A,w,d);yo(),A=A.memoizedState,w=yo();var D=w.queue.dispatch;return w.memoizedState=d,[A,D,!1]}function Oh(d,A,w,D){return d={tag:d,create:A,inst:w,deps:D,next:null},A=kt.updateQueue,A===null&&(A=Pb(),kt.updateQueue=A),w=A.lastEffect,w===null?A.lastEffect=d.next=d:(D=w.next,w.next=d,d.next=D,A.lastEffect=d),d}function PC(){return yo().memoizedState}function Bb(d,A,w,D){var G=ja();kt.flags|=d,G.memoizedState=Oh(1|A,w,{destroy:void 0},D===void 0?null:D)}function Ib(d,A,w,D){var G=yo();D=D===void 0?null:D;var j=G.memoizedState.inst;Un!==null&&D!==null&&Ih(D,Un.memoizedState.deps)?G.memoizedState=Oh(A,w,j,D):(kt.flags|=d,G.memoizedState=Oh(1|A,w,j,D))}function NC(d,A){Bb(8390656,8,d,A)}function DT(d,A){Ib(2048,8,d,A)}function BC(d,A){return Ib(4,2,d,A)}function IC(d,A){return Ib(4,4,d,A)}function OC(d,A){if(typeof A=="function"){d=d();var w=A(d);return function(){typeof w=="function"?w():A(null)}}if(A!=null)return d=d(),A.current=d,function(){A.current=null}}function FC(d,A,w){w=w!=null?w.concat([d]):null,Ib(4,4,OC.bind(null,A,d),w)}function LT(){}function UC(d,A){var w=yo();A=A===void 0?null:A;var D=w.memoizedState;return A!==null&&Ih(A,D[1])?D[0]:(w.memoizedState=[d,A],d)}function kC(d,A){var w=yo();A=A===void 0?null:A;var D=w.memoizedState;if(A!==null&&Ih(A,D[1]))return D[0];if(D=d(),Zn){Fe(!0);try{d()}finally{Fe(!1)}}return w.memoizedState=[D,A],D}function Ob(d,A,w){return w===void 0||an&1073741824?d.memoizedState=A:(d.memoizedState=w,d=jc(),kt.lanes|=d,kf|=d,w)}function GC(d,A,w,D){return al(w,A)?w:un.current!==null?(d=Ob(d,w,D),al(d,A)||(oa=!0),d):an&42?(d=jc(),kt.lanes|=d,kf|=d,A):(oa=!0,d.memoizedState=w)}function zC(d,A,w,D,G){var j=Ee.p;Ee.p=j!==0&&8>j?j:8;var ae=H.T,xe={};H.T=xe,k1(d,!1,A,w);try{var De=G(),We=H.S;if(We!==null&&We(xe,De),De!==null&&typeof De=="object"&&typeof De.then=="function"){var Ft=gt(De,D);QA(d,A,Ft,Ol(d))}else QA(d,A,D,Ol(d))}catch(Zt){QA(d,A,{then:function(){},status:"rejected",reason:Zt},Ol())}finally{Ee.p=j,H.T=ae}}function sB(){}function PT(d,A,w,D){if(d.tag!==5)throw Error(n(476));var G=HC(d).queue;zC(d,G,A,Be,w===null?sB:function(){return VC(d),w(D)})}function HC(d){var A=d.memoizedState;if(A!==null)return A;A={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:Be},next:null};var w={};return A.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:w},next:null},d.memoizedState=A,d=d.alternate,d!==null&&(d.memoizedState=A),A}function VC(d){var A=HC(d).next.queue;QA(d,A,{},Ol())}function Fb(){return ul(sE)}function NT(){return yo().memoizedState}function qC(){return yo().memoizedState}function $C(d){for(var A=d.return;A!==null;){switch(A.tag){case 24:case 3:var w=Ol();d=qc(w);var D=$c(A,d,w);D!==null&&(qo(D,A,w),f0(D,A,w)),A={cache:te()},d.payload=A;return}A=A.return}}function jC(d,A,w){var D=Ol();w={lane:D,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},Ub(d)?WC(A,w):(w=Wd(d,A,w,D),w!==null&&(qo(w,d,D),KC(w,A,D)))}function BT(d,A,w){var D=Ol();QA(d,A,w,D)}function QA(d,A,w,D){var G={lane:D,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(Ub(d))WC(A,G);else{var j=d.alternate;if(d.lanes===0&&(j===null||j.lanes===0)&&(j=A.lastRenderedReducer,j!==null))try{var ae=A.lastRenderedState,xe=j(ae,w);if(G.hasEagerState=!0,G.eagerState=xe,al(xe,ae))return $A(d,A,G,0),ts===null&&qA(),!1}catch{}finally{}if(w=Wd(d,A,G,D),w!==null)return qo(w,d,D),KC(w,A,D),!0}return!1}function k1(d,A,w,D){if(D={lane:2,revertLane:cB(),action:D,hasEagerState:!1,eagerState:null,next:null},Ub(d)){if(A)throw Error(n(479))}else A=Wd(d,w,D,2),A!==null&&qo(A,d,2)}function Ub(d){var A=d.alternate;return d===kt||A!==null&&A===kt}function WC(d,A){oi=bn=!0;var w=d.pending;w===null?A.next=A:(A.next=w.next,w.next=A),d.pending=A}function KC(d,A,w){if(w&4194176){var D=A.lanes;D&=d.pendingLanes,w|=D,A.lanes=w,hn(d,w)}}var Fh={readContext:ul,use:Gg,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useLayoutEffect:nr,useInsertionEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useSyncExternalStore:nr,useId:nr};Fh.useCacheRefresh=nr,Fh.useMemoCache=nr,Fh.useHostTransitionStatus=nr,Fh.useFormState=nr,Fh.useActionState=nr,Fh.useOptimistic=nr;var l0={readContext:ul,use:Gg,useCallback:function(d,A){return ja().memoizedState=[d,A===void 0?null:A],d},useContext:ul,useEffect:NC,useImperativeHandle:function(d,A,w){w=w!=null?w.concat([d]):null,Bb(4194308,4,OC.bind(null,A,d),w)},useLayoutEffect:function(d,A){return Bb(4194308,4,d,A)},useInsertionEffect:function(d,A){Bb(4,2,d,A)},useMemo:function(d,A){var w=ja();A=A===void 0?null:A;var D=d();if(Zn){Fe(!0);try{d()}finally{Fe(!1)}}return w.memoizedState=[D,A],D},useReducer:function(d,A,w){var D=ja();if(w!==void 0){var G=w(A);if(Zn){Fe(!0);try{w(A)}finally{Fe(!1)}}}else G=A;return D.memoizedState=D.baseState=G,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:G},D.queue=d,d=d.dispatch=jC.bind(null,kt,d),[D.memoizedState,d]},useRef:function(d){var A=ja();return d={current:d},A.memoizedState=d},useState:function(d){d=MT(d);var A=d.queue,w=BT.bind(null,kt,A);return A.dispatch=w,[d.memoizedState,w]},useDebugValue:LT,useDeferredValue:function(d,A){var w=ja();return Ob(w,d,A)},useTransition:function(){var d=MT(!1);return d=zC.bind(null,kt,d.queue,!0,!1),ja().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,A,w){var D=kt,G=ja();if(Ar){if(w===void 0)throw Error(n(407));w=w()}else{if(w=A(),ts===null)throw Error(n(349));ci&60||Ll(D,A,w)}G.memoizedState=w;var j={value:w,getSnapshot:A};return G.queue=j,NC(SC.bind(null,D,j,d),[d]),D.flags|=2048,Oh(9,a0.bind(null,D,j,w,A),{destroy:void 0},null),w},useId:function(){var d=ja(),A=ts.identifierPrefix;if(Ar){var w=Eu,D=Tu;w=(D&~(1<<32-xt(D)-1)).toString(32)+w,A=":"+A+"R"+w,w=fi++,0<w&&(A+="H"+w.toString(32)),A+=":"}else w=zr++,A=":"+A+"r"+w.toString(32)+":";return d.memoizedState=A},useCacheRefresh:function(){return ja().memoizedState=$C.bind(null,kt)}};l0.useMemoCache=Lf,l0.useHostTransitionStatus=Fb,l0.useFormState=RC,l0.useActionState=RC,l0.useOptimistic=function(d){var A=ja();A.memoizedState=A.baseState=d;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return A.queue=w,A=k1.bind(null,kt,!0,w),w.dispatch=A,[d,A]};var Jd={readContext:ul,use:Gg,useCallback:UC,useContext:ul,useEffect:DT,useImperativeHandle:FC,useInsertionEffect:BC,useLayoutEffect:IC,useMemo:kC,useReducer:Pf,useRef:PC,useState:function(){return Pf(Os)},useDebugValue:LT,useDeferredValue:function(d,A){var w=yo();return GC(w,Un.memoizedState,d,A)},useTransition:function(){var d=Pf(Os)[0],A=yo().memoizedState;return[typeof d=="boolean"?d:U1(d),A]},useSyncExternalStore:_C,useId:NT};Jd.useCacheRefresh=qC,Jd.useMemoCache=Lf,Jd.useHostTransitionStatus=Fb,Jd.useFormState=zg,Jd.useActionState=zg,Jd.useOptimistic=function(d,A){var w=yo();return CT(w,Un,d,A)};var ZA={readContext:ul,use:Gg,useCallback:UC,useContext:ul,useEffect:DT,useImperativeHandle:FC,useInsertionEffect:BC,useLayoutEffect:IC,useMemo:kC,useReducer:Nb,useRef:PC,useState:function(){return Nb(Os)},useDebugValue:LT,useDeferredValue:function(d,A){var w=yo();return Un===null?Ob(w,d,A):GC(w,Un.memoizedState,d,A)},useTransition:function(){var d=Nb(Os)[0],A=yo().memoizedState;return[typeof d=="boolean"?d:U1(d),A]},useSyncExternalStore:_C,useId:NT};ZA.useCacheRefresh=qC,ZA.useMemoCache=Lf,ZA.useHostTransitionStatus=Fb,ZA.useFormState=LC,ZA.useActionState=LC,ZA.useOptimistic=function(d,A){var w=yo();return Un!==null?CT(w,Un,d,A):(w.baseState=d,[d,w.queue.dispatch])};function IT(d,A,w,D){A=d.memoizedState,w=w(D,A),w=w==null?A:O({},A,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var OT={isMounted:function(d){return(d=d._reactInternals)?le(d)===d:!1},enqueueSetState:function(d,A,w){d=d._reactInternals;var D=Ol(),G=qc(D);G.payload=A,w!=null&&(G.callback=w),A=$c(d,G,D),A!==null&&(qo(A,d,D),f0(A,d,D))},enqueueReplaceState:function(d,A,w){d=d._reactInternals;var D=Ol(),G=qc(D);G.tag=1,G.payload=A,w!=null&&(G.callback=w),A=$c(d,G,D),A!==null&&(qo(A,d,D),f0(A,d,D))},enqueueForceUpdate:function(d,A){d=d._reactInternals;var w=Ol(),D=qc(w);D.tag=2,A!=null&&(D.callback=A),A=$c(d,D,w),A!==null&&(qo(A,d,w),f0(A,d,w))}};function YC(d,A,w,D,G,j,ae){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(D,j,ae):A.prototype&&A.prototype.isPureReactComponent?!Fc(w,D)||!Fc(G,j):!0}function XC(d,A,w,D){d=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(w,D),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(w,D),A.state!==d&&OT.enqueueReplaceState(A,A.state,null)}function JA(d,A){var w=A;if("ref"in A){w={};for(var D in A)D!=="ref"&&(w[D]=A[D])}if(d=d.defaultProps){w===A&&(w=O({},w));for(var G in d)w[G]===void 0&&(w[G]=d[G])}return w}var kb=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function QC(d){kb(d)}function ZC(d){console.error(d)}function JC(d){kb(d)}function Gb(d,A){try{var w=d.onUncaughtError;w(A.value,{componentStack:A.stack})}catch(D){setTimeout(function(){throw D})}}function eR(d,A,w){try{var D=d.onCaughtError;D(w.value,{componentStack:w.stack,errorBoundary:A.tag===1?A.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function FT(d,A,w){return w=qc(w),w.tag=3,w.payload={element:null},w.callback=function(){Gb(d,A)},w}function UT(d){return d=qc(d),d.tag=3,d}function tR(d,A,w,D){var G=w.type.getDerivedStateFromError;if(typeof G=="function"){var j=D.value;d.payload=function(){return G(j)},d.callback=function(){eR(A,w,D)}}var ae=w.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(d.callback=function(){eR(A,w,D),typeof G!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var xe=D.stack;this.componentDidCatch(D.value,{componentStack:xe!==null?xe:""})})}function oB(d,A,w,D,G){if(w.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(A=w.alternate,A!==null&&z1(A,w,G,!0),w=ro.current,w!==null){switch(w.tag){case 13:return zc===null?Y1():w.alternate===null&&ws===0&&(ws=3),w.flags&=-257,w.flags|=65536,w.lanes=G,D===Uc?w.flags|=16384:(A=w.updateQueue,A===null?w.updateQueue=new Set([D]):A.add(D),Di(d,D,G)),!1;case 22:return w.flags|=65536,D===Uc?w.flags|=16384:(A=w.updateQueue,A===null?(A={transitions:null,markerInstances:null,retryQueue:new Set([D])},w.updateQueue=A):(w=A.retryQueue,w===null?A.retryQueue=new Set([D]):w.add(D)),Di(d,D,G)),!1}throw Error(n(435,w.tag))}return Di(d,D,G),Y1(),!1}if(Ar)return A=ro.current,A!==null?(!(A.flags&65536)&&(A.flags|=256),A.flags|=65536,A.lanes=G,D!==r0&&(d=Error(n(422),{cause:D}),wu(cl(d,w)))):(D!==r0&&(A=Error(n(423),{cause:D}),wu(cl(A,w))),d=d.current.alternate,d.flags|=65536,G&=-G,d.lanes|=G,D=cl(D,w),G=FT(d.stateNode,D,G),jg(d,G),ws!==4&&(ws=2)),!1;var j=Error(n(520),{cause:D});if(j=cl(j,w),K1===null?K1=[j]:K1.push(j),ws!==4&&(ws=2),A===null)return!0;D=cl(D,w),w=A;do{switch(w.tag){case 3:return w.flags|=65536,d=G&-G,w.lanes|=d,d=FT(w.stateNode,D,d),jg(w,d),!1;case 1:if(A=w.type,j=w.stateNode,(w.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Vo===null||!Vo.has(j))))return w.flags|=65536,G&=-G,w.lanes|=G,G=UT(G),tR(G,d,w,D),jg(w,G),!1}w=w.return}while(w!==null);return!1}var Hc=Error(n(461)),oa=!1;function aa(d,A,w,D){A.child=d===null?jt(A,null,w,D):Mu(A,d.child,w,D)}function kT(d,A,w,D,G){w=w.render;var j=A.ref;if("ref"in D){var ae={};for(var xe in D)xe!=="ref"&&(ae[xe]=D[xe])}else ae=D;return tm(A),D=ET(d,A,w,ae,j,G),xe=wT(),d!==null&&!oa?(F1(d,A,G),vo(d,A,G)):(Ar&&xe&&WA(A),A.flags|=1,aa(d,A,D,G),A.child)}function GT(d,A,w,D,G){if(d===null){var j=w.type;return typeof j=="function"&&!op(j)&&j.defaultProps===void 0&&w.compare===null?(A.tag=15,A.type=j,zT(d,A,j,D,G)):(d=Xg(w.type,null,D,A,A.mode,G),d.ref=A.ref,d.return=A,A.child=d)}if(j=d.child,!KT(d,G)){var ae=j.memoizedProps;if(w=w.compare,w=w!==null?w:Fc,w(ae,D)&&d.ref===A.ref)return vo(d,A,G)}return A.flags|=1,d=Bl(j,D),d.ref=A.ref,d.return=A,A.child=d}function zT(d,A,w,D,G){if(d!==null){var j=d.memoizedProps;if(Fc(j,D)&&d.ref===A.ref)if(oa=!1,A.pendingProps=D=j,KT(d,G))d.flags&131072&&(oa=!0);else return A.lanes=d.lanes,vo(d,A,G)}return VT(d,A,w,D,G)}function nR(d,A,w){var D=A.pendingProps,G=D.children,j=(A.stateNode._pendingVisibility&2)!==0,ae=d!==null?d.memoizedState:null;if(Hg(d,A),D.mode==="hidden"||j){if(A.flags&128){if(D=ae!==null?ae.baseLanes|w:w,d!==null){for(G=A.child=d.child,j=0;G!==null;)j=j|G.lanes|G.childLanes,G=G.sibling;A.childLanes=j&~D}else A.childLanes=0,A.child=null;return HT(d,A,D,w)}if(w&536870912)A.memoizedState={baseLanes:0,cachePool:null},d!==null&&gn(A,ae!==null?ae.cachePool:null),ae!==null?Cu(A,ae):Qd(),x(A);else return A.lanes=A.childLanes=536870912,HT(d,A,ae!==null?ae.baseLanes|w:w,w)}else ae!==null?(gn(A,ae.cachePool),Cu(A,ae),v(),A.memoizedState=null):(d!==null&&gn(A,null),Qd(),v());return aa(d,A,G,w),A.child}function HT(d,A,w,D){var G=je();return G=G===null?null:{parent:K._currentValue,pool:G},A.memoizedState={baseLanes:w,cachePool:G},d!==null&&gn(A,null),Qd(),x(A),d!==null&&z1(d,A,D,!0),null}function Hg(d,A){var w=A.ref;if(w===null)d!==null&&d.ref!==null&&(A.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(n(284));(d===null||d.ref!==w)&&(A.flags|=2097664)}}function VT(d,A,w,D,G){return tm(A),w=ET(d,A,w,D,void 0,G),D=wT(),d!==null&&!oa?(F1(d,A,G),vo(d,A,G)):(Ar&&D&&WA(A),A.flags|=1,aa(d,A,w,G),A.child)}function iR(d,A,w,D,G,j){return tm(A),A.updateQueue=null,w=bC(A,D,w,G),xC(d),D=wT(),d!==null&&!oa?(F1(d,A,j),vo(d,A,j)):(Ar&&D&&WA(A),A.flags|=1,aa(d,A,w,j),A.child)}function rR(d,A,w,D,G){if(tm(A),A.stateNode===null){var j=Ch,ae=w.contextType;typeof ae=="object"&&ae!==null&&(j=ul(ae)),j=new w(D,j),A.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=OT,A.stateNode=j,j._reactInternals=A,j=A.stateNode,j.props=D,j.state=A.memoizedState,j.refs={},Pl(A),ae=w.contextType,j.context=typeof ae=="object"&&ae!==null?ul(ae):Ch,j.state=A.memoizedState,ae=w.getDerivedStateFromProps,typeof ae=="function"&&(IT(A,w,ae,D),j.state=A.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(ae=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),ae!==j.state&&OT.enqueueReplaceState(j,j.state,null),Bf(A,D,j,G),fl(),j.state=A.memoizedState),typeof j.componentDidMount=="function"&&(A.flags|=4194308),D=!0}else if(d===null){j=A.stateNode;var xe=A.memoizedProps,De=JA(w,xe);j.props=De;var We=j.context,Ft=w.contextType;ae=Ch,typeof Ft=="object"&&Ft!==null&&(ae=ul(Ft));var Zt=w.getDerivedStateFromProps;Ft=typeof Zt=="function"||typeof j.getSnapshotBeforeUpdate=="function",xe=A.pendingProps!==xe,Ft||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(xe||We!==ae)&&XC(A,j,D,ae),zo=!1;var yt=A.memoizedState;j.state=yt,Bf(A,D,j,G),fl(),We=A.memoizedState,xe||yt!==We||zo?(typeof Zt=="function"&&(IT(A,w,Zt,D),We=A.memoizedState),(De=zo||YC(A,w,De,D,yt,We,ae))?(Ft||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(A.flags|=4194308)):(typeof j.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=D,A.memoizedState=We),j.props=D,j.state=We,j.context=ae,D=De):(typeof j.componentDidMount=="function"&&(A.flags|=4194308),D=!1)}else{j=A.stateNode,jb(d,A),ae=A.memoizedProps,Ft=JA(w,ae),j.props=Ft,Zt=A.pendingProps,yt=j.context,We=w.contextType,De=Ch,typeof We=="object"&&We!==null&&(De=ul(We)),xe=w.getDerivedStateFromProps,(We=typeof xe=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ae!==Zt||yt!==De)&&XC(A,j,D,De),zo=!1,yt=A.memoizedState,j.state=yt,Bf(A,D,j,G),fl();var Bt=A.memoizedState;ae!==Zt||yt!==Bt||zo||d!==null&&d.dependencies!==null&&qg(d.dependencies)?(typeof xe=="function"&&(IT(A,w,xe,D),Bt=A.memoizedState),(Ft=zo||YC(A,w,Ft,D,yt,Bt,De)||d!==null&&d.dependencies!==null&&qg(d.dependencies))?(We||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(D,Bt,De),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(D,Bt,De)),typeof j.componentDidUpdate=="function"&&(A.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof j.componentDidUpdate!="function"||ae===d.memoizedProps&&yt===d.memoizedState||(A.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ae===d.memoizedProps&&yt===d.memoizedState||(A.flags|=1024),A.memoizedProps=D,A.memoizedState=Bt),j.props=D,j.state=Bt,j.context=De,D=Ft):(typeof j.componentDidUpdate!="function"||ae===d.memoizedProps&&yt===d.memoizedState||(A.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ae===d.memoizedProps&&yt===d.memoizedState||(A.flags|=1024),D=!1)}return j=D,Hg(d,A),D=(A.flags&128)!==0,j||D?(j=A.stateNode,w=D&&typeof w.getDerivedStateFromError!="function"?null:j.render(),A.flags|=1,d!==null&&D?(A.child=Mu(A,d.child,null,G),A.child=Mu(A,null,w,G)):aa(d,A,w,G),A.memoizedState=j.state,d=A.child):d=vo(d,A,G),d}function qT(d,A,w,D){return o0(),A.flags|=256,aa(d,A,w,D),A.child}var $T={dehydrated:null,treeContext:null,retryLane:0};function Ra(d){return{baseLanes:d,cachePool:Tn()}}function zb(d,A,w){return d=d!==null?d.childLanes&~w:0,A&&(d|=Il),d}function sR(d,A,w){var D=A.pendingProps,G=!1,j=(A.flags&128)!==0,ae;if((ae=j)||(ae=d!==null&&d.memoizedState===null?!1:(M.current&2)!==0),ae&&(G=!0,A.flags&=-129),ae=(A.flags&32)!==0,A.flags&=-33,d===null){if(Ar){if(G?Ca(A):v(),Ar){var xe=Pr,De;if(De=xe){e:{for(De=xe,xe=ec;De.nodeType!==8;){if(!xe){xe=null;break e}if(De=fp(De.nextSibling),De===null){xe=null;break e}}xe=De}xe!==null?(A.memoizedState={dehydrated:xe,treeContext:Rf!==null?{id:Tu,overflow:Eu}:null,retryLane:536870912},De=So(18,null,null,0),De.stateNode=xe,De.return=A,A.child=De,io=A,Pr=null,De=!0):De=!1}De||Lh(A)}if(xe=A.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return xe.data==="$!"?A.lanes=16:A.lanes=536870912,null;E(A)}return xe=D.children,D=D.fallback,G?(v(),G=A.mode,xe=WT({mode:"hidden",children:xe},G),D=g0(D,G,w,null),xe.return=A,D.return=A,xe.sibling=D,A.child=xe,G=A.child,G.memoizedState=Ra(w),G.childLanes=zb(d,ae,w),A.memoizedState=$T,D):(Ca(A),jT(A,xe))}if(De=d.memoizedState,De!==null&&(xe=De.dehydrated,xe!==null)){if(j)A.flags&256?(Ca(A),A.flags&=-257,A=Hb(d,A,w)):A.memoizedState!==null?(v(),A.child=d.child,A.flags|=128,A=null):(v(),G=D.fallback,xe=A.mode,D=WT({mode:"visible",children:D.children},xe),G=g0(G,xe,w,null),G.flags|=2,D.return=A,G.return=A,D.sibling=G,A.child=D,Mu(A,d.child,null,w),D=A.child,D.memoizedState=Ra(w),D.childLanes=zb(d,ae,w),A.memoizedState=$T,A=G);else if(Ca(A),xe.data==="$!"){if(ae=xe.nextSibling&&xe.nextSibling.dataset,ae)var We=ae.dgst;ae=We,D=Error(n(419)),D.stack="",D.digest=ae,wu({value:D,source:null,stack:null}),A=Hb(d,A,w)}else if(oa||z1(d,A,w,!1),ae=(w&d.childLanes)!==0,oa||ae){if(ae=ts,ae!==null){if(D=w&-w,D&42)D=1;else switch(D){case 2:D=1;break;case 8:D=4;break;case 32:D=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:D=64;break;case 268435456:D=134217728;break;default:D=0}if(D=D&(ae.suspendedLanes|w)?0:D,D!==0&&D!==De.retryLane)throw De.retryLane=D,Ea(d,D),qo(ae,d,D),Hc}xe.data==="$?"||Y1(),A=Hb(d,A,w)}else xe.data==="$?"?(A.flags|=128,A.child=d.child,A=lm.bind(null,d),xe._reactRetry=A,A=null):(d=De.treeContext,Pr=fp(xe.nextSibling),io=A,Ar=!0,Jl=null,ec=!1,d!==null&&(Jr[Dl++]=Tu,Jr[Dl++]=Eu,Jr[Dl++]=Rf,Tu=d.id,Eu=d.overflow,Rf=A),A=jT(A,D.children),A.flags|=4096);return A}return G?(v(),G=D.fallback,xe=A.mode,De=d.child,We=De.sibling,D=Bl(De,{mode:"hidden",children:D.children}),D.subtreeFlags=De.subtreeFlags&31457280,We!==null?G=Bl(We,G):(G=g0(G,xe,w,null),G.flags|=2),G.return=A,D.return=A,D.sibling=G,A.child=D,D=G,G=A.child,xe=d.child.memoizedState,xe===null?xe=Ra(w):(De=xe.cachePool,De!==null?(We=K._currentValue,De=De.parent!==We?{parent:We,pool:We}:De):De=Tn(),xe={baseLanes:xe.baseLanes|w,cachePool:De}),G.memoizedState=xe,G.childLanes=zb(d,ae,w),A.memoizedState=$T,D):(Ca(A),w=d.child,d=w.sibling,w=Bl(w,{mode:"visible",children:D.children}),w.return=A,w.sibling=null,d!==null&&(ae=A.deletions,ae===null?(A.deletions=[d],A.flags|=16):ae.push(d)),A.child=w,A.memoizedState=null,w)}function jT(d,A){return A=WT({mode:"visible",children:A},d.mode),A.return=d,d.child=A}function WT(d,A){return XT(d,A,0,null)}function Hb(d,A,w){return Mu(A,d.child,null,w),d=jT(A,A.pendingProps.children),d.flags|=2,A.memoizedState=null,d}function Vb(d,A,w){d.lanes|=A;var D=d.alternate;D!==null&&(D.lanes|=A),Vc(d.return,A,w)}function c0(d,A,w,D,G){var j=d.memoizedState;j===null?d.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:D,tail:w,tailMode:G}:(j.isBackwards=A,j.rendering=null,j.renderingStartTime=0,j.last=D,j.tail=w,j.tailMode=G)}function em(d,A,w){var D=A.pendingProps,G=D.revealOrder,j=D.tail;if(aa(d,A,D.children,w),D=M.current,D&2)D=D&1|2,A.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=A.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Vb(d,w,A);else if(d.tag===19)Vb(d,w,A);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===A)break e;for(;d.sibling===null;){if(d.return===null||d.return===A)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}D&=1}switch(_t(M,D),G){case"forwards":for(w=A.child,G=null;w!==null;)d=w.alternate,d!==null&&L(d)===null&&(G=w),w=w.sibling;w=G,w===null?(G=A.child,A.child=null):(G=w.sibling,w.sibling=null),c0(A,!1,G,w,j);break;case"backwards":for(w=null,G=A.child,A.child=null;G!==null;){if(d=G.alternate,d!==null&&L(d)===null){A.child=G;break}d=G.sibling,G.sibling=w,w=G,G=d}c0(A,!0,w,null,j);break;case"together":c0(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function vo(d,A,w){if(d!==null&&(A.dependencies=d.dependencies),kf|=A.lanes,!(w&A.childLanes))if(d!==null){if(z1(d,A,w,!1),(w&A.childLanes)===0)return null}else return null;if(d!==null&&A.child!==d.child)throw Error(n(153));if(A.child!==null){for(d=A.child,w=Bl(d,d.pendingProps),A.child=w,w.return=A;d.sibling!==null;)d=d.sibling,w=w.sibling=Bl(d,d.pendingProps),w.return=A;w.sibling=null}return A.child}function KT(d,A){return d.lanes&A?!0:(d=d.dependencies,!!(d!==null&&qg(d)))}function aB(d,A,w){switch(A.tag){case 3:Jt(A,A.stateNode.containerInfo),u0(A,K,d.memoizedState.cache),o0();break;case 27:case 5:Dt(A);break;case 4:Jt(A,A.stateNode.containerInfo);break;case 10:u0(A,A.type,A.memoizedProps.value);break;case 13:var D=A.memoizedState;if(D!==null)return D.dehydrated!==null?(Ca(A),A.flags|=128,null):w&A.child.childLanes?sR(d,A,w):(Ca(A),d=vo(d,A,w),d!==null?d.sibling:null);Ca(A);break;case 19:var G=(d.flags&128)!==0;if(D=(w&A.childLanes)!==0,D||(z1(d,A,w,!1),D=(w&A.childLanes)!==0),G){if(D)return em(d,A,w);A.flags|=128}if(G=A.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),_t(M,M.current),D)break;return null;case 22:case 23:return A.lanes=0,nR(d,A,w);case 24:u0(A,K,d.memoizedState.cache)}return vo(d,A,w)}function G1(d,A,w){if(d!==null)if(d.memoizedProps!==A.pendingProps)oa=!0;else{if(!KT(d,w)&&!(A.flags&128))return oa=!1,aB(d,A,w);oa=!!(d.flags&131072)}else oa=!1,Ar&&A.flags&1048576&&Is(A,jA,A.index);switch(A.lanes=0,A.tag){case 16:e:{d=A.pendingProps;var D=A.elementType,G=D._init;if(D=G(D._payload),A.type=D,typeof D=="function")op(D)?(d=JA(D,d),A.tag=1,A=rR(null,A,D,d,w)):(A.tag=0,A=VT(null,A,D,d,w));else{if(D!=null){if(G=D.$$typeof,G===m){A.tag=11,A=kT(null,A,D,d,w);break e}else if(G===T){A.tag=14,A=GT(null,A,D,d,w);break e}}throw A=q(D)||D,Error(n(306,A,""))}}return A;case 0:return VT(d,A,A.type,A.pendingProps,w);case 1:return D=A.type,G=JA(D,A.pendingProps),rR(d,A,D,G,w);case 3:e:{if(Jt(A,A.stateNode.containerInfo),d===null)throw Error(n(387));var j=A.pendingProps;G=A.memoizedState,D=G.element,jb(d,A),Bf(A,j,null,w);var ae=A.memoizedState;if(j=ae.cache,u0(A,K,j),j!==G.cache&&qb(A,[K],w,!0),fl(),j=ae.element,G.isDehydrated)if(G={element:j,isDehydrated:!1,cache:ae.cache},A.updateQueue.baseState=G,A.memoizedState=G,A.flags&256){A=qT(d,A,j,w);break e}else if(j!==D){D=cl(Error(n(424)),A),wu(D),A=qT(d,A,j,w);break e}else for(Pr=fp(A.stateNode.containerInfo.firstChild),io=A,Ar=!0,Jl=null,ec=!0,w=jt(A,null,j,w),A.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(o0(),j===D){A=vo(d,A,w);break e}aa(d,A,j,w)}A=A.child}return A;case 26:return Hg(d,A),d===null?(w=KV(A.type,null,A.pendingProps,null))?A.memoizedState=w:Ar||(w=A.type,d=A.pendingProps,D=hR(ut.current).createElement(w),D[ni]=A,D[zn]=d,Fl(D,w,d),Je(D),A.stateNode=D):A.memoizedState=KV(A.type,d.memoizedProps,A.pendingProps,d.memoizedState),null;case 27:return Dt(A),d===null&&Ar&&(D=A.stateNode=$V(A.type,A.pendingProps,ut.current),io=A,ec=!0,Pr=fp(D.firstChild)),D=A.pendingProps.children,d!==null||Ar?aa(d,A,D,w):A.child=Mu(A,null,D,w),Hg(d,A),A.child;case 5:return d===null&&Ar&&((G=D=Pr)&&(D=EAe(D,A.type,A.pendingProps,ec),D!==null?(A.stateNode=D,io=A,Pr=fp(D.firstChild),ec=!1,G=!0):G=!1),G||Lh(A)),Dt(A),G=A.type,j=A.pendingProps,ae=d!==null?d.memoizedProps:null,D=j.children,yB(G,j)?D=null:ae!==null&&yB(G,ae)&&(A.flags|=32),A.memoizedState!==null&&(G=ET(d,A,nB,null,null,w),sE._currentValue=G),Hg(d,A),aa(d,A,D,w),A.child;case 6:return d===null&&Ar&&((d=w=Pr)&&(w=wAe(w,A.pendingProps,ec),w!==null?(A.stateNode=w,io=A,Pr=null,d=!0):d=!1),d||Lh(A)),null;case 13:return sR(d,A,w);case 4:return Jt(A,A.stateNode.containerInfo),D=A.pendingProps,d===null?A.child=Mu(A,null,D,w):aa(d,A,D,w),A.child;case 11:return kT(d,A,A.type,A.pendingProps,w);case 7:return aa(d,A,A.pendingProps,w),A.child;case 8:return aa(d,A,A.pendingProps.children,w),A.child;case 12:return aa(d,A,A.pendingProps.children,w),A.child;case 10:return D=A.pendingProps,u0(A,A.type,D.value),aa(d,A,D.children,w),A.child;case 9:return G=A.type._context,D=A.pendingProps.children,tm(A),G=ul(G),D=D(G),A.flags|=1,aa(d,A,D,w),A.child;case 14:return GT(d,A,A.type,A.pendingProps,w);case 15:return zT(d,A,A.type,A.pendingProps,w);case 19:return em(d,A,w);case 22:return nR(d,A,w);case 24:return tm(A),D=ul(K),d===null?(G=je(),G===null&&(G=ts,j=te(),G.pooledCache=j,j.refCount++,j!==null&&(G.pooledCacheLanes|=w),G=j),A.memoizedState={parent:D,cache:G},Pl(A),u0(A,K,G)):(d.lanes&w&&(jb(d,A),Bf(A,null,null,w),fl()),G=d.memoizedState,j=A.memoizedState,G.parent!==D?(G={parent:D,cache:D},A.memoizedState=G,A.lanes===0&&(A.memoizedState=A.updateQueue.baseState=G),u0(A,K,D)):(D=j.cache,u0(A,K,D),D!==G.cache&&qb(A,[K],w,!0))),aa(d,A,A.pendingProps.children,w),A.child;case 29:throw A.pendingProps}throw Error(n(156,A.tag))}var Vg=et(null),Uh=null,Nf=null;function u0(d,A,w){_t(Vg,A._currentValue),A._currentValue=w}function ep(d){d._currentValue=Vg.current,Ht(Vg)}function Vc(d,A,w){for(;d!==null;){var D=d.alternate;if((d.childLanes&A)!==A?(d.childLanes|=A,D!==null&&(D.childLanes|=A)):D!==null&&(D.childLanes&A)!==A&&(D.childLanes|=A),d===w)break;d=d.return}}function qb(d,A,w,D){var G=d.child;for(G!==null&&(G.return=d);G!==null;){var j=G.dependencies;if(j!==null){var ae=G.child;j=j.firstContext;e:for(;j!==null;){var xe=j;j=G;for(var De=0;De<A.length;De++)if(xe.context===A[De]){j.lanes|=w,xe=j.alternate,xe!==null&&(xe.lanes|=w),Vc(j.return,w,d),D||(ae=null);break e}j=xe.next}}else if(G.tag===18){if(ae=G.return,ae===null)throw Error(n(341));ae.lanes|=w,j=ae.alternate,j!==null&&(j.lanes|=w),Vc(ae,w,d),ae=null}else ae=G.child;if(ae!==null)ae.return=G;else for(ae=G;ae!==null;){if(ae===d){ae=null;break}if(G=ae.sibling,G!==null){G.return=ae.return,ae=G;break}ae=ae.return}G=ae}}function z1(d,A,w,D){d=null;for(var G=A,j=!1;G!==null;){if(!j){if(G.flags&524288)j=!0;else if(G.flags&262144)break}if(G.tag===10){var ae=G.alternate;if(ae===null)throw Error(n(387));if(ae=ae.memoizedProps,ae!==null){var xe=G.type;al(G.pendingProps.value,ae.value)||(d!==null?d.push(xe):d=[xe])}}else if(G===we.current){if(ae=G.alternate,ae===null)throw Error(n(387));ae.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(d!==null?d.push(sE):d=[sE])}G=G.return}d!==null&&qb(A,d,w,D),A.flags|=262144}function qg(d){for(d=d.firstContext;d!==null;){if(!al(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function tm(d){Uh=d,Nf=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function ul(d){return $g(Uh,d)}function $b(d,A){return Uh===null&&tm(d),$g(d,A)}function $g(d,A){var w=A._currentValue;if(A={context:A,memoizedValue:w,next:null},Nf===null){if(d===null)throw Error(n(308));Nf=A,d.dependencies={lanes:0,firstContext:A},d.flags|=524288}else Nf=Nf.next=A;return w}var zo=!1;function Pl(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jb(d,A){d=d.updateQueue,A.updateQueue===d&&(A.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function qc(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function $c(d,A,w){var D=d.updateQueue;if(D===null)return null;if(D=D.shared,Ri&2){var G=D.pending;return G===null?A.next=A:(A.next=G.next,G.next=A),D.pending=A,A=i0(d),n0(d,null,w),A}return $A(d,D,A,w),i0(d)}function f0(d,A,w){if(A=A.updateQueue,A!==null&&(A=A.shared,(w&4194176)!==0)){var D=A.lanes;D&=d.pendingLanes,w|=D,A.lanes=w,hn(d,w)}}function jg(d,A){var w=d.updateQueue,D=d.alternate;if(D!==null&&(D=D.updateQueue,w===D)){var G=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};j===null?G=j=ae:j=j.next=ae,w=w.next}while(w!==null);j===null?G=j=A:j=j.next=A}else G=j=A;w={baseState:D.baseState,firstBaseUpdate:G,lastBaseUpdate:j,shared:D.shared,callbacks:D.callbacks},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=A:d.next=A,w.lastBaseUpdate=A}var nc=!1;function fl(){if(nc){var d=Re;if(d!==null)throw d}}function Bf(d,A,w,D){nc=!1;var G=d.updateQueue;zo=!1;var j=G.firstBaseUpdate,ae=G.lastBaseUpdate,xe=G.shared.pending;if(xe!==null){G.shared.pending=null;var De=xe,We=De.next;De.next=null,ae===null?j=We:ae.next=We,ae=De;var Ft=d.alternate;Ft!==null&&(Ft=Ft.updateQueue,xe=Ft.lastBaseUpdate,xe!==ae&&(xe===null?Ft.firstBaseUpdate=We:xe.next=We,Ft.lastBaseUpdate=De))}if(j!==null){var Zt=G.baseState;ae=0,Ft=We=De=null,xe=j;do{var yt=xe.lane&-536870913,Bt=yt!==xe.lane;if(Bt?(ci&yt)===yt:(D&yt)===yt){yt!==0&&yt===ke&&(nc=!0),Ft!==null&&(Ft=Ft.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var jn=d,Ui=xe;yt=A;var $o=w;switch(Ui.tag){case 1:if(jn=Ui.payload,typeof jn=="function"){Zt=jn.call($o,Zt,yt);break e}Zt=jn;break e;case 3:jn.flags=jn.flags&-65537|128;case 0:if(jn=Ui.payload,yt=typeof jn=="function"?jn.call($o,Zt,yt):jn,yt==null)break e;Zt=O({},Zt,yt);break e;case 2:zo=!0}}yt=xe.callback,yt!==null&&(d.flags|=64,Bt&&(d.flags|=8192),Bt=G.callbacks,Bt===null?G.callbacks=[yt]:Bt.push(yt))}else Bt={lane:yt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Ft===null?(We=Ft=Bt,De=Zt):Ft=Ft.next=Bt,ae|=yt;if(xe=xe.next,xe===null){if(xe=G.shared.pending,xe===null)break;Bt=xe,xe=Bt.next,Bt.next=null,G.lastBaseUpdate=Bt,G.shared.pending=null}}while(!0);Ft===null&&(De=Zt),G.baseState=De,G.firstBaseUpdate=We,G.lastBaseUpdate=Ft,j===null&&(G.shared.lanes=0),kf|=ae,d.lanes=ae,d.memoizedState=Zt}}function kh(d,A){if(typeof d!="function")throw Error(n(191,d));d.call(A)}function Gh(d,A){var w=d.callbacks;if(w!==null)for(d.callbacks=null,d=0;d<w.length;d++)kh(w[d],A)}function xo(d,A){try{var w=A.updateQueue,D=w!==null?w.lastEffect:null;if(D!==null){var G=D.next;w=G;do{if((w.tag&d)===d){D=void 0;var j=w.create,ae=w.inst;D=j(),ae.destroy=D}w=w.next}while(w!==G)}}catch(xe){ln(A,A.return,xe)}}function Ru(d,A,w){try{var D=A.updateQueue,G=D!==null?D.lastEffect:null;if(G!==null){var j=G.next;D=j;do{if((D.tag&d)===d){var ae=D.inst,xe=ae.destroy;if(xe!==void 0){ae.destroy=void 0,G=A;var De=w;try{xe()}catch(We){ln(G,De,We)}}}D=D.next}while(D!==j)}}catch(We){ln(A,A.return,We)}}function tp(d){var A=d.updateQueue;if(A!==null){var w=d.stateNode;try{Gh(A,w)}catch(D){ln(d,d.return,D)}}}function H1(d,A,w){w.props=JA(d.type,d.memoizedProps),w.state=d.memoizedState;try{w.componentWillUnmount()}catch(D){ln(d,A,D)}}function bo(d,A){try{var w=d.ref;if(w!==null){var D=d.stateNode;switch(d.tag){case 26:case 27:case 5:var G=D;break;default:G=D}typeof w=="function"?d.refCleanup=w(G):w.current=G}}catch(j){ln(d,A,j)}}function es(d,A){var w=d.ref,D=d.refCleanup;if(w!==null)if(typeof D=="function")try{D()}catch(G){ln(d,A,G)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(G){ln(d,A,G)}else w.current=null}function br(d){var A=d.type,w=d.memoizedProps,D=d.stateNode;try{e:switch(A){case"button":case"input":case"select":case"textarea":w.autoFocus&&D.focus();break e;case"img":w.src?D.src=w.src:w.srcSet&&(D.srcset=w.srcSet)}}catch(G){ln(d,d.return,G)}}function Du(d,A,w){try{var D=d.stateNode;xAe(D,d.type,w,A),D[zn]=A}catch(G){ln(d,d.return,G)}}function If(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27||d.tag===4}function V1(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||If(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==27&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function ic(d,A,w){var D=d.tag;if(D===5||D===6)d=d.stateNode,A?w.nodeType===8?w.parentNode.insertBefore(d,A):w.insertBefore(d,A):(w.nodeType===8?(A=w.parentNode,A.insertBefore(d,w)):(A=w,A.appendChild(d)),w=w._reactRootContainer,w!=null||A.onclick!==null||(A.onclick=fR));else if(D!==4&&D!==27&&(d=d.child,d!==null))for(ic(d,A,w),d=d.sibling;d!==null;)ic(d,A,w),d=d.sibling}function np(d,A,w){var D=d.tag;if(D===5||D===6)d=d.stateNode,A?w.insertBefore(d,A):w.appendChild(d);else if(D!==4&&D!==27&&(d=d.child,d!==null))for(np(d,A,w),d=d.sibling;d!==null;)np(d,A,w),d=d.sibling}var Of=!1,Ts=!1,h0=!1,Wb=typeof WeakSet=="function"?WeakSet:Set,_o=null,Kb=!1;function Wg(d,A){if(d=d.containerInfo,mB=yR,d=wh(d),HA(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var D=w.getSelection&&w.getSelection();if(D&&D.rangeCount!==0){w=D.anchorNode;var G=D.anchorOffset,j=D.focusNode;D=D.focusOffset;try{w.nodeType,j.nodeType}catch{w=null;break e}var ae=0,xe=-1,De=-1,We=0,Ft=0,Zt=d,yt=null;t:for(;;){for(var Bt;Zt!==w||G!==0&&Zt.nodeType!==3||(xe=ae+G),Zt!==j||D!==0&&Zt.nodeType!==3||(De=ae+D),Zt.nodeType===3&&(ae+=Zt.nodeValue.length),(Bt=Zt.firstChild)!==null;)yt=Zt,Zt=Bt;for(;;){if(Zt===d)break t;if(yt===w&&++We===G&&(xe=ae),yt===j&&++Ft===D&&(De=ae),(Bt=Zt.nextSibling)!==null)break;Zt=yt,yt=Zt.parentNode}Zt=Bt}w=xe===-1||De===-1?null:{start:xe,end:De}}else w=null}w=w||{start:0,end:0}}else w=null;for(gB={focusedElem:d,selectionRange:w},yR=!1,_o=A;_o!==null;)if(A=_o,d=A.child,(A.subtreeFlags&1028)!==0&&d!==null)d.return=A,_o=d;else for(;_o!==null;){switch(A=_o,j=A.alternate,d=A.flags,A.tag){case 0:break;case 11:case 15:break;case 1:if(d&1024&&j!==null){d=void 0,w=A,G=j.memoizedProps,j=j.memoizedState,D=w.stateNode;try{var jn=JA(w.type,G,w.elementType===w.type);d=D.getSnapshotBeforeUpdate(jn,j),D.__reactInternalSnapshotBeforeUpdate=d}catch(Ui){ln(w,w.return,Ui)}}break;case 3:if(d&1024){if(d=A.stateNode.containerInfo,w=d.nodeType,w===9)bB(d);else if(w===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":bB(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(d&1024)throw Error(n(163))}if(d=A.sibling,d!==null){d.return=A.return,_o=d;break}_o=A.return}return jn=Kb,Kb=!1,jn}function Kg(d,A,w){var D=w.flags;switch(w.tag){case 0:case 11:case 15:zh(d,w),D&4&&xo(5,w);break;case 1:if(zh(d,w),D&4)if(d=w.stateNode,A===null)try{d.componentDidMount()}catch(xe){ln(w,w.return,xe)}else{var G=JA(w.type,A.memoizedProps);A=A.memoizedState;try{d.componentDidUpdate(G,A,d.__reactInternalSnapshotBeforeUpdate)}catch(xe){ln(w,w.return,xe)}}D&64&&tp(w),D&512&&bo(w,w.return);break;case 3:if(zh(d,w),D&64&&(D=w.updateQueue,D!==null)){if(d=null,w.child!==null)switch(w.child.tag){case 27:case 5:d=w.child.stateNode;break;case 1:d=w.child.stateNode}try{Gh(D,d)}catch(xe){ln(w,w.return,xe)}}break;case 26:zh(d,w),D&512&&bo(w,w.return);break;case 27:case 5:zh(d,w),A===null&&D&4&&br(w),D&512&&bo(w,w.return);break;case 12:zh(d,w);break;case 13:zh(d,w),D&4&&oR(d,w);break;case 22:if(G=w.memoizedState!==null||Of,!G){A=A!==null&&A.memoizedState!==null||Ts;var j=Of,ae=Ts;Of=G,(Ts=A)&&!ae?Uf(d,w,(w.subtreeFlags&8772)!==0):zh(d,w),Of=j,Ts=ae}D&512&&(w.memoizedProps.mode==="manual"?bo(w,w.return):es(w,w.return));break;default:zh(d,w)}}function Yb(d){var A=d.alternate;A!==null&&(d.alternate=null,Yb(A)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(A=d.stateNode,A!==null&&vu(A)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var Es=null,Da=!1;function hl(d,A,w){for(w=w.child;w!==null;)Xb(d,A,w),w=w.sibling}function Xb(d,A,w){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(En,w)}catch{}switch(w.tag){case 26:Ts||es(w,A),hl(d,A,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:Ts||es(w,A);var D=Es,G=Da;for(Es=w.stateNode,hl(d,A,w),w=w.stateNode,A=w.attributes;A.length;)w.removeAttributeNode(A[0]);vu(w),Es=D,Da=G;break;case 5:Ts||es(w,A);case 6:G=Es;var j=Da;if(Es=null,hl(d,A,w),Es=G,Da=j,Es!==null)if(Da)try{d=Es,D=w.stateNode,d.nodeType===8?d.parentNode.removeChild(D):d.removeChild(D)}catch(ae){ln(w,A,ae)}else try{Es.removeChild(w.stateNode)}catch(ae){ln(w,A,ae)}break;case 18:Es!==null&&(Da?(A=Es,w=w.stateNode,A.nodeType===8?xB(A.parentNode,w):A.nodeType===1&&xB(A,w),cE(A)):xB(Es,w.stateNode));break;case 4:D=Es,G=Da,Es=w.stateNode.containerInfo,Da=!0,hl(d,A,w),Es=D,Da=G;break;case 0:case 11:case 14:case 15:Ts||Ru(2,w,A),Ts||Ru(4,w,A),hl(d,A,w);break;case 1:Ts||(es(w,A),D=w.stateNode,typeof D.componentWillUnmount=="function"&&H1(w,A,D)),hl(d,A,w);break;case 21:hl(d,A,w);break;case 22:Ts||es(w,A),Ts=(D=Ts)||w.memoizedState!==null,hl(d,A,w),Ts=D;break;default:hl(d,A,w)}}function oR(d,A){if(A.memoizedState===null&&(d=A.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{cE(d)}catch(w){ln(A,A.return,w)}}function q1(d){switch(d.tag){case 13:case 19:var A=d.stateNode;return A===null&&(A=d.stateNode=new Wb),A;case 22:return d=d.stateNode,A=d._retryCache,A===null&&(A=d._retryCache=new Wb),A;default:throw Error(n(435,d.tag))}}function $1(d,A){var w=q1(d);A.forEach(function(D){var G=pt.bind(null,d,D);w.has(D)||(w.add(D),D.then(G,G))})}function Nl(d,A){var w=A.deletions;if(w!==null)for(var D=0;D<w.length;D++){var G=w[D],j=d,ae=A,xe=ae;e:for(;xe!==null;){switch(xe.tag){case 27:case 5:Es=xe.stateNode,Da=!1;break e;case 3:Es=xe.stateNode.containerInfo,Da=!0;break e;case 4:Es=xe.stateNode.containerInfo,Da=!0;break e}xe=xe.return}if(Es===null)throw Error(n(160));Xb(j,ae,G),Es=null,Da=!1,j=G.alternate,j!==null&&(j.return=null),G.return=null}if(A.subtreeFlags&13878)for(A=A.child;A!==null;)nm(A,d),A=A.sibling}var dl=null;function nm(d,A){var w=d.alternate,D=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Nl(A,d),pl(d),D&4&&(Ru(3,d,d.return),xo(3,d),Ru(5,d,d.return));break;case 1:Nl(A,d),pl(d),D&512&&(Ts||w===null||es(w,w.return)),D&64&&Of&&(d=d.updateQueue,d!==null&&(D=d.callbacks,D!==null&&(w=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=w===null?D:w.concat(D))));break;case 26:var G=dl;if(Nl(A,d),pl(d),D&512&&(Ts||w===null||es(w,w.return)),D&4){var j=w!==null?w.memoizedState:null;if(D=d.memoizedState,w===null)if(D===null)if(d.stateNode===null){e:{D=d.type,w=d.memoizedProps,G=G.ownerDocument||G;t:switch(D){case"title":j=G.getElementsByTagName("title")[0],(!j||j[Xs]||j[ni]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=G.createElement(D),G.head.insertBefore(j,G.querySelector("head > title"))),Fl(j,D,w),j[ni]=d,Je(j),D=j;break e;case"link":var ae=QV("link","href",G).get(D+(w.href||""));if(ae){for(var xe=0;xe<ae.length;xe++)if(j=ae[xe],j.getAttribute("href")===(w.href==null?null:w.href)&&j.getAttribute("rel")===(w.rel==null?null:w.rel)&&j.getAttribute("title")===(w.title==null?null:w.title)&&j.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ae.splice(xe,1);break t}}j=G.createElement(D),Fl(j,D,w),G.head.appendChild(j);break;case"meta":if(ae=QV("meta","content",G).get(D+(w.content||""))){for(xe=0;xe<ae.length;xe++)if(j=ae[xe],j.getAttribute("content")===(w.content==null?null:""+w.content)&&j.getAttribute("name")===(w.name==null?null:w.name)&&j.getAttribute("property")===(w.property==null?null:w.property)&&j.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&j.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ae.splice(xe,1);break t}}j=G.createElement(D),Fl(j,D,w),G.head.appendChild(j);break;default:throw Error(n(468,D))}j[ni]=d,Je(j),D=j}d.stateNode=D}else ZV(G,d.type,d.stateNode);else d.stateNode=XV(G,D,d.memoizedProps);else j!==D?(j===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):j.count--,D===null?ZV(G,d.type,d.stateNode):XV(G,D,d.memoizedProps)):D===null&&d.stateNode!==null&&Du(d,d.memoizedProps,w.memoizedProps)}break;case 27:if(D&4&&d.alternate===null){G=d.stateNode,j=d.memoizedProps;try{for(var De=G.firstChild;De;){var We=De.nextSibling,Ft=De.nodeName;De[Xs]||Ft==="HEAD"||Ft==="BODY"||Ft==="SCRIPT"||Ft==="STYLE"||Ft==="LINK"&&De.rel.toLowerCase()==="stylesheet"||G.removeChild(De),De=We}for(var Zt=d.type,yt=G.attributes;yt.length;)G.removeAttributeNode(yt[0]);Fl(G,Zt,j),G[ni]=d,G[zn]=j}catch(jn){ln(d,d.return,jn)}}case 5:if(Nl(A,d),pl(d),D&512&&(Ts||w===null||es(w,w.return)),d.flags&32){G=d.stateNode;try{Sa(G,"")}catch(jn){ln(d,d.return,jn)}}D&4&&d.stateNode!=null&&(G=d.memoizedProps,Du(d,G,w!==null?w.memoizedProps:G)),D&1024&&(h0=!0);break;case 6:if(Nl(A,d),pl(d),D&4){if(d.stateNode===null)throw Error(n(162));D=d.memoizedProps,w=d.stateNode;try{w.nodeValue=D}catch(jn){ln(d,d.return,jn)}}break;case 3:if(AR=null,G=dl,dl=dR(A.containerInfo),Nl(A,d),dl=G,pl(d),D&4&&w!==null&&w.memoizedState.isDehydrated)try{cE(A.containerInfo)}catch(jn){ln(d,d.return,jn)}h0&&(h0=!1,d0(d));break;case 4:D=dl,dl=dR(d.stateNode.containerInfo),Nl(A,d),pl(d),dl=D;break;case 12:Nl(A,d),pl(d);break;case 13:Nl(A,d),pl(d),d.child.flags&8192&&d.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(Yi=Ve()),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,$1(d,D)));break;case 22:if(D&512&&(Ts||w===null||es(w,w.return)),De=d.memoizedState!==null,We=w!==null&&w.memoizedState!==null,Ft=Of,Zt=Ts,Of=Ft||De,Ts=Zt||We,Nl(A,d),Ts=Zt,Of=Ft,pl(d),A=d.stateNode,A._current=d,A._visibility&=-3,A._visibility|=A._pendingVisibility&2,D&8192&&(A._visibility=De?A._visibility&-2:A._visibility|1,De&&(A=Of||Ts,w===null||We||A||Ff(d)),d.memoizedProps===null||d.memoizedProps.mode!=="manual"))e:for(w=null,A=d;;){if(A.tag===5||A.tag===26||A.tag===27){if(w===null){We=w=A;try{if(G=We.stateNode,De)j=G.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{ae=We.stateNode,xe=We.memoizedProps.style;var Bt=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;ae.style.display=Bt==null||typeof Bt=="boolean"?"":(""+Bt).trim()}}catch(jn){ln(We,We.return,jn)}}}else if(A.tag===6){if(w===null){We=A;try{We.stateNode.nodeValue=De?"":We.memoizedProps}catch(jn){ln(We,We.return,jn)}}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===d)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===d)break e;for(;A.sibling===null;){if(A.return===null||A.return===d)break e;w===A&&(w=null),A=A.return}w===A&&(w=null),A.sibling.return=A.return,A=A.sibling}D&4&&(D=d.updateQueue,D!==null&&(w=D.retryQueue,w!==null&&(D.retryQueue=null,$1(d,w))));break;case 19:Nl(A,d),pl(d),D&4&&(D=d.updateQueue,D!==null&&(d.updateQueue=null,$1(d,D)));break;case 21:break;default:Nl(A,d),pl(d)}}function pl(d){var A=d.flags;if(A&2){try{if(d.tag!==27){e:{for(var w=d.return;w!==null;){if(If(w)){var D=w;break e}w=w.return}throw Error(n(160))}switch(D.tag){case 27:var G=D.stateNode,j=V1(d);np(d,j,G);break;case 5:var ae=D.stateNode;D.flags&32&&(Sa(ae,""),D.flags&=-33);var xe=V1(d);np(d,xe,ae);break;case 3:case 4:var De=D.stateNode.containerInfo,We=V1(d);ic(d,We,De);break;default:throw Error(n(161))}}}catch(Ft){ln(d,d.return,Ft)}d.flags&=-3}A&4096&&(d.flags&=-4097)}function d0(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var A=d;d0(A),A.tag===5&&A.flags&1024&&A.stateNode.reset(),d=d.sibling}}function zh(d,A){if(A.subtreeFlags&8772)for(A=A.child;A!==null;)Kg(d,A.alternate,A),A=A.sibling}function Ff(d){for(d=d.child;d!==null;){var A=d;switch(A.tag){case 0:case 11:case 14:case 15:Ru(4,A,A.return),Ff(A);break;case 1:es(A,A.return);var w=A.stateNode;typeof w.componentWillUnmount=="function"&&H1(A,A.return,w),Ff(A);break;case 26:case 27:case 5:es(A,A.return),Ff(A);break;case 22:es(A,A.return),A.memoizedState===null&&Ff(A);break;default:Ff(A)}d=d.sibling}}function Uf(d,A,w){for(w=w&&(A.subtreeFlags&8772)!==0,A=A.child;A!==null;){var D=A.alternate,G=d,j=A,ae=j.flags;switch(j.tag){case 0:case 11:case 15:Uf(G,j,w),xo(4,j);break;case 1:if(Uf(G,j,w),D=j,G=D.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(We){ln(D,D.return,We)}if(D=j,G=D.updateQueue,G!==null){var xe=D.stateNode;try{var De=G.shared.hiddenCallbacks;if(De!==null)for(G.shared.hiddenCallbacks=null,G=0;G<De.length;G++)kh(De[G],xe)}catch(We){ln(D,D.return,We)}}w&&ae&64&&tp(j),bo(j,j.return);break;case 26:case 27:case 5:Uf(G,j,w),w&&D===null&&ae&4&&br(j),bo(j,j.return);break;case 12:Uf(G,j,w);break;case 13:Uf(G,j,w),w&&ae&4&&oR(G,j);break;case 22:j.memoizedState===null&&Uf(G,j,w),bo(j,j.return);break;default:Uf(G,j,w)}A=A.sibling}}function rc(d,A){var w=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),d=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(d=A.memoizedState.cachePool.pool),d!==w&&(d!=null&&d.refCount++,w!=null&&ue(w))}function Lu(d,A){d=null,A.alternate!==null&&(d=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==d&&(A.refCount++,d!=null&&ue(d))}function gs(d,A,w,D){if(A.subtreeFlags&10256)for(A=A.child;A!==null;)ip(d,A,w,D),A=A.sibling}function ip(d,A,w,D){var G=A.flags;switch(A.tag){case 0:case 11:case 15:gs(d,A,w,D),G&2048&&xo(9,A);break;case 3:gs(d,A,w,D),G&2048&&(d=null,A.alternate!==null&&(d=A.alternate.memoizedState.cache),A=A.memoizedState.cache,A!==d&&(A.refCount++,d!=null&&ue(d)));break;case 12:if(G&2048){gs(d,A,w,D),d=A.stateNode;try{var j=A.memoizedProps,ae=j.id,xe=j.onPostCommit;typeof xe=="function"&&xe(ae,A.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(De){ln(A,A.return,De)}}else gs(d,A,w,D);break;case 23:break;case 22:j=A.stateNode,A.memoizedState!==null?j._visibility&4?gs(d,A,w,D):Mr(d,A):j._visibility&4?gs(d,A,w,D):(j._visibility|=4,Ci(d,A,w,D,(A.subtreeFlags&10256)!==0)),G&2048&&rc(A.alternate,A);break;case 24:gs(d,A,w,D),G&2048&&Lu(A.alternate,A);break;default:gs(d,A,w,D)}}function Ci(d,A,w,D,G){for(G=G&&(A.subtreeFlags&10256)!==0,A=A.child;A!==null;){var j=d,ae=A,xe=w,De=D,We=ae.flags;switch(ae.tag){case 0:case 11:case 15:Ci(j,ae,xe,De,G),xo(8,ae);break;case 23:break;case 22:var Ft=ae.stateNode;ae.memoizedState!==null?Ft._visibility&4?Ci(j,ae,xe,De,G):Mr(j,ae):(Ft._visibility|=4,Ci(j,ae,xe,De,G)),G&&We&2048&&rc(ae.alternate,ae);break;case 24:Ci(j,ae,xe,De,G),G&&We&2048&&Lu(ae.alternate,ae);break;default:Ci(j,ae,xe,De,G)}A=A.sibling}}function Mr(d,A){if(A.subtreeFlags&10256)for(A=A.child;A!==null;){var w=d,D=A,G=D.flags;switch(D.tag){case 22:Mr(w,D),G&2048&&rc(D.alternate,D);break;case 24:Mr(w,D),G&2048&&Lu(D.alternate,D);break;default:Mr(w,D)}A=A.sibling}}var Fs=8192;function rp(d){if(d.subtreeFlags&Fs)for(d=d.child;d!==null;)im(d),d=d.sibling}function im(d){switch(d.tag){case 26:rp(d),d.flags&Fs&&d.memoizedState!==null&&kAe(dl,d.memoizedState,d.memoizedProps);break;case 5:rp(d);break;case 3:case 4:var A=dl;dl=dR(d.stateNode.containerInfo),rp(d),dl=A;break;case 22:d.memoizedState===null&&(A=d.alternate,A!==null&&A.memoizedState!==null?(A=Fs,Fs=16777216,rp(d),Fs=A):rp(d));break;default:rp(d)}}function p0(d){var A=d.alternate;if(A!==null&&(d=A.child,d!==null)){A.child=null;do A=d.sibling,d.sibling=null,d=A;while(d!==null)}}function A0(d){var A=d.deletions;if(d.flags&16){if(A!==null)for(var w=0;w<A.length;w++){var D=A[w];_o=D,aR(D,d)}p0(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Yg(d),d=d.sibling}function Yg(d){switch(d.tag){case 0:case 11:case 15:A0(d),d.flags&2048&&Ru(9,d,d.return);break;case 3:A0(d);break;case 12:A0(d);break;case 22:var A=d.stateNode;d.memoizedState!==null&&A._visibility&4&&(d.return===null||d.return.tag!==13)?(A._visibility&=-5,sp(d)):A0(d);break;default:A0(d)}}function sp(d){var A=d.deletions;if(d.flags&16){if(A!==null)for(var w=0;w<A.length;w++){var D=A[w];_o=D,aR(D,d)}p0(d)}for(d=d.child;d!==null;){switch(A=d,A.tag){case 0:case 11:case 15:Ru(8,A,A.return),sp(A);break;case 22:w=A.stateNode,w._visibility&4&&(w._visibility&=-5,sp(A));break;default:sp(A)}d=d.sibling}}function aR(d,A){for(;_o!==null;){var w=_o;switch(w.tag){case 0:case 11:case 15:Ru(8,w,A);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var D=w.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:ue(w.memoizedState.cache)}if(D=w.child,D!==null)D.return=w,_o=D;else e:for(w=d;_o!==null;){D=_o;var G=D.sibling,j=D.return;if(Yb(D),D===w){_o=null;break e}if(G!==null){G.return=j,_o=G;break e}_o=j}}}function YT(d,A,w,D){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(d,A,w,D){return new YT(d,A,w,D)}function op(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Bl(d,A){var w=d.alternate;return w===null?(w=So(d.tag,A,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=A,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&31457280,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,A=d.dependencies,w.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w.refCleanup=d.refCleanup,w}function m0(d,A){d.flags&=31457282;var w=d.alternate;return w===null?(d.childLanes=0,d.lanes=A,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=w.childLanes,d.lanes=w.lanes,d.child=w.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=w.memoizedProps,d.memoizedState=w.memoizedState,d.updateQueue=w.updateQueue,d.type=w.type,A=w.dependencies,d.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),d}function Xg(d,A,w,D,G,j){var ae=0;if(D=d,typeof d=="function")op(d)&&(ae=1);else if(typeof d=="string")ae=FAe(d,w,$t.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case l:return g0(w.children,G,j,A);case c:ae=8,G|=24;break;case u:return d=So(12,w,A,G|2),d.elementType=u,d.lanes=j,d;case g:return d=So(13,w,A,G),d.elementType=g,d.lanes=j,d;case b:return d=So(19,w,A,G),d.elementType=b,d.lanes=j,d;case R:return XT(w,G,j,A);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case f:case p:ae=10;break e;case h:ae=9;break e;case m:ae=11;break e;case T:ae=14;break e;case C:ae=16,D=null;break e}ae=29,w=Error(n(130,d===null?"null":typeof d,"")),D=null}return A=So(ae,w,A,G),A.elementType=d,A.type=D,A.lanes=j,A}function g0(d,A,w,D){return d=So(7,d,D,A),d.lanes=w,d}function XT(d,A,w,D){d=So(22,d,D,A),d.elementType=R,d.lanes=w;var G={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var j=G._current;if(j===null)throw Error(n(456));if(!(G._pendingVisibility&2)){var ae=Ea(j,2);ae!==null&&(G._pendingVisibility|=2,qo(ae,j,2))}},attach:function(){var j=G._current;if(j===null)throw Error(n(456));if(G._pendingVisibility&2){var ae=Ea(j,2);ae!==null&&(G._pendingVisibility&=-3,qo(ae,j,2))}}};return d.stateNode=G,d}function Ho(d,A,w){return d=So(6,d,null,A),d.lanes=w,d}function j1(d,A,w){return A=So(4,d.children!==null?d.children:[],d.key,A),A.lanes=w,A.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},A}function Pu(d){d.flags|=4}function y0(d,A){if(A.type!=="stylesheet"||A.state.loading&4)d.flags&=-16777217;else if(d.flags|=16777216,!JV(A)){if(A=ro.current,A!==null&&((ci&4194176)===ci?zc!==null:(ci&62914560)!==ci&&!(ci&536870912)||A!==zc))throw Ti=Uc,O1;d.flags|=8192}}function Nu(d,A){A!==null&&(d.flags|=4),d.flags&16384&&(A=d.tag!==22?Gn():536870912,d.lanes|=A,Vh|=A)}function W1(d,A){if(!Ar)switch(d.tailMode){case"hidden":A=d.tail;for(var w=null;A!==null;)A.alternate!==null&&(w=A),A=A.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var D=null;w!==null;)w.alternate!==null&&(D=w),w=w.sibling;D===null?A||d.tail===null?d.tail=null:d.tail.sibling=null:D.sibling=null}}function qs(d){var A=d.alternate!==null&&d.alternate.child===d.child,w=0,D=0;if(A)for(var G=d.child;G!==null;)w|=G.lanes|G.childLanes,D|=G.subtreeFlags&31457280,D|=G.flags&31457280,G.return=d,G=G.sibling;else for(G=d.child;G!==null;)w|=G.lanes|G.childLanes,D|=G.subtreeFlags,D|=G.flags,G.return=d,G=G.sibling;return d.subtreeFlags|=D,d.childLanes=w,A}function lB(d,A,w){var D=A.pendingProps;switch(Dh(A),A.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(A),null;case 1:return qs(A),null;case 3:return w=A.stateNode,D=null,d!==null&&(D=d.memoizedState.cache),A.memoizedState.cache!==D&&(A.flags|=2048),ep(K),ft(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(d===null||d.child===null)&&(s0(A)?Pu(A):d===null||d.memoizedState.isDehydrated&&!(A.flags&256)||(A.flags|=1024,Jl!==null&&(Fu(Jl),Jl=null))),qs(A),null;case 26:return w=A.memoizedState,d===null?(Pu(A),w!==null?(qs(A),y0(A,w)):(qs(A),A.flags&=-16777217)):w?w!==d.memoizedState?(Pu(A),qs(A),y0(A,w)):(qs(A),A.flags&=-16777217):(d.memoizedProps!==D&&Pu(A),qs(A),A.flags&=-16777217),null;case 27:Rt(A),w=ut.current;var G=A.type;if(d!==null&&A.stateNode!=null)d.memoizedProps!==D&&Pu(A);else{if(!D){if(A.stateNode===null)throw Error(n(166));return qs(A),null}d=$t.current,s0(A)?B1(A):(d=$V(G,D,w),A.stateNode=d,Pu(A))}return qs(A),null;case 5:if(Rt(A),w=A.type,d!==null&&A.stateNode!=null)d.memoizedProps!==D&&Pu(A);else{if(!D){if(A.stateNode===null)throw Error(n(166));return qs(A),null}if(d=$t.current,s0(A))B1(A);else{switch(G=hR(ut.current),d){case 1:d=G.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:d=G.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":d=G.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":d=G.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":d=G.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof D.is=="string"?G.createElement("select",{is:D.is}):G.createElement("select"),D.multiple?d.multiple=!0:D.size&&(d.size=D.size);break;default:d=typeof D.is=="string"?G.createElement(w,{is:D.is}):G.createElement(w)}}d[ni]=A,d[zn]=D;e:for(G=A.child;G!==null;){if(G.tag===5||G.tag===6)d.appendChild(G.stateNode);else if(G.tag!==4&&G.tag!==27&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===A)break e;for(;G.sibling===null;){if(G.return===null||G.return===A)break e;G=G.return}G.sibling.return=G.return,G=G.sibling}A.stateNode=d;e:switch(Fl(d,w,D),w){case"button":case"input":case"select":case"textarea":d=!!D.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pu(A)}}return qs(A),A.flags&=-16777217,null;case 6:if(d&&A.stateNode!=null)d.memoizedProps!==D&&Pu(A);else{if(typeof D!="string"&&A.stateNode===null)throw Error(n(166));if(d=ut.current,s0(A)){if(d=A.stateNode,w=A.memoizedProps,D=null,G=io,G!==null)switch(G.tag){case 27:case 5:D=G.memoizedProps}d[ni]=A,d=!!(d.nodeValue===w||D!==null&&D.suppressHydrationWarning===!0||kV(d.nodeValue,w)),d||Lh(A)}else d=hR(d).createTextNode(D),d[ni]=A,A.stateNode=d}return qs(A),null;case 13:if(D=A.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(G=s0(A),D!==null&&D.dehydrated!==null){if(d===null){if(!G)throw Error(n(318));if(G=A.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(n(317));G[ni]=A}else o0(),!(A.flags&128)&&(A.memoizedState=null),A.flags|=4;qs(A),G=!1}else Jl!==null&&(Fu(Jl),Jl=null),G=!0;if(!G)return A.flags&256?(E(A),A):(E(A),null)}if(E(A),A.flags&128)return A.lanes=w,A;if(w=D!==null,d=d!==null&&d.memoizedState!==null,w){D=A.child,G=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(G=D.alternate.memoizedState.cachePool.pool);var j=null;D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(j=D.memoizedState.cachePool.pool),j!==G&&(D.flags|=2048)}return w!==d&&w&&(A.child.flags|=8192),Nu(A,A.updateQueue),qs(A),null;case 4:return ft(),d===null&&dB(A.stateNode.containerInfo),qs(A),null;case 10:return ep(A.type),qs(A),null;case 19:if(Ht(M),G=A.memoizedState,G===null)return qs(A),null;if(D=(A.flags&128)!==0,j=G.rendering,j===null)if(D)W1(G,!1);else{if(ws!==0||d!==null&&d.flags&128)for(d=A.child;d!==null;){if(j=L(d),j!==null){for(A.flags|=128,W1(G,!1),d=j.updateQueue,A.updateQueue=d,Nu(A,d),A.subtreeFlags=0,d=w,w=A.child;w!==null;)m0(w,d),w=w.sibling;return _t(M,M.current&1|2),A.child}d=d.sibling}G.tail!==null&&Ve()>or&&(A.flags|=128,D=!0,W1(G,!1),A.lanes=4194304)}else{if(!D)if(d=L(j),d!==null){if(A.flags|=128,D=!0,d=d.updateQueue,A.updateQueue=d,Nu(A,d),W1(G,!0),G.tail===null&&G.tailMode==="hidden"&&!j.alternate&&!Ar)return qs(A),null}else 2*Ve()-G.renderingStartTime>or&&w!==536870912&&(A.flags|=128,D=!0,W1(G,!1),A.lanes=4194304);G.isBackwards?(j.sibling=A.child,A.child=j):(d=G.last,d!==null?d.sibling=j:A.child=j,G.last=j)}return G.tail!==null?(A=G.tail,G.rendering=A,G.tail=A.sibling,G.renderingStartTime=Ve(),A.sibling=null,d=M.current,_t(M,D?d&1|2:d&1),A):(qs(A),null);case 22:case 23:return E(A),Bh(),D=A.memoizedState!==null,d!==null?d.memoizedState!==null!==D&&(A.flags|=8192):D&&(A.flags|=8192),D?w&536870912&&!(A.flags&128)&&(qs(A),A.subtreeFlags&6&&(A.flags|=8192)):qs(A),w=A.updateQueue,w!==null&&Nu(A,w.retryQueue),w=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),D=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(D=A.memoizedState.cachePool.pool),D!==w&&(A.flags|=2048),d!==null&&Ht(rt),null;case 24:return w=null,d!==null&&(w=d.memoizedState.cache),A.memoizedState.cache!==w&&(A.flags|=2048),ep(K),qs(A),null;case 25:return null}throw Error(n(156,A.tag))}function so(d,A){switch(Dh(A),A.tag){case 1:return d=A.flags,d&65536?(A.flags=d&-65537|128,A):null;case 3:return ep(K),ft(),d=A.flags,d&65536&&!(d&128)?(A.flags=d&-65537|128,A):null;case 26:case 27:case 5:return Rt(A),null;case 13:if(E(A),d=A.memoizedState,d!==null&&d.dehydrated!==null){if(A.alternate===null)throw Error(n(340));o0()}return d=A.flags,d&65536?(A.flags=d&-65537|128,A):null;case 19:return Ht(M),null;case 4:return ft(),null;case 10:return ep(A.type),null;case 22:case 23:return E(A),Bh(),d!==null&&Ht(rt),d=A.flags,d&65536?(A.flags=d&-65537|128,A):null;case 24:return ep(K),null;case 25:return null;default:return null}}function QT(d,A){switch(Dh(A),A.tag){case 3:ep(K),ft();break;case 26:case 27:case 5:Rt(A);break;case 4:ft();break;case 13:E(A);break;case 19:Ht(M);break;case 10:ep(A.type);break;case 22:case 23:E(A),Bh(),d!==null&&Ht(rt);break;case 24:ep(K)}}var rm={getCacheForType:function(d){var A=ul(K),w=A.data.get(d);return w===void 0&&(w=d(),A.data.set(d,w)),w}},ap=typeof WeakMap=="function"?WeakMap:Map,Ri=0,ts=null,ir=null,ci=0,us=0,Cr=null,To=!1,Al=!1,v0=!1,lp=0,ws=0,kf=0,Hh=0,Qg=0,Il=0,Vh=0,K1=null,sr=null,ns=!1,Yi=0,or=1/0,Hr=null,Vo=null,Bu=!1,Iu=null,sm=0,Gf=0,Us=null,Ou=0,cp=null;function Ol(){if(Ri&2&&ci!==0)return ci&-ci;if(H.T!==null){var d=ke;return d!==0?d:cB()}return S()}function jc(){Il===0&&(Il=!(ci&536870912)||Ar?Dn():536870912);var d=ro.current;return d!==null&&(d.flags|=32),Il}function qo(d,A,w){(d===ts&&us===2||d.cancelPendingCommit!==null)&&(up(d,0),Wc(d,ci,Il,!1)),Qr(d,w),(!(Ri&2)||d!==ts)&&(d===ts&&(!(Ri&2)&&(Hh|=w),ws===4&&Wc(d,ci,Il,!1)),fs(d))}function Zg(d,A,w){if(Ri&6)throw Error(n(327));var D=!w&&(A&60)===0&&(A&d.expiredLanes)===0||Nn(d,A),G=D?y(d,A):am(d,A,!0),j=D;do{if(G===0){Al&&!D&&Wc(d,A,0,!1);break}else if(G===6)Wc(d,A,0,!To);else{if(w=d.current.alternate,j&&!ZT(w)){G=am(d,A,!1),j=!1;continue}if(G===2){if(j=A,d.errorRecoveryDisabledLanes&j)var ae=0;else ae=d.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){A=ae;e:{var xe=d;G=K1;var De=xe.current.memoizedState.isDehydrated;if(De&&(up(xe,ae).flags|=256),ae=am(xe,ae,!1),ae!==2){if(v0&&!De){xe.errorRecoveryDisabledLanes|=j,Hh|=j,G=4;break e}j=sr,sr=G,j!==null&&Fu(j)}G=ae}if(j=!1,G!==2)continue}}if(G===1){up(d,0),Wc(d,A,0,!0);break}e:{switch(D=d,G){case 0:case 1:throw Error(n(345));case 4:if((A&4194176)===A){Wc(D,A,Il,!To);break e}break;case 2:sr=null;break;case 3:case 5:break;default:throw Error(n(329))}if(D.finishedWork=w,D.finishedLanes=A,(A&62914560)===A&&(j=Yi+300-Ve(),10<j)){if(Wc(D,A,Il,!To),xn(D,0)!==0)break e;D.timeoutHandle=HV(Qb.bind(null,D,w,sr,Hr,ns,A,Il,Hh,Vh,To,2,-0,0),j);break e}Qb(D,w,sr,Hr,ns,A,Il,Hh,Vh,To,0,-0,0)}}break}while(!0);fs(d)}function Fu(d){sr===null?sr=d:sr.push.apply(sr,d)}function Qb(d,A,w,D,G,j,ae,xe,De,We,Ft,Zt,yt){var Bt=A.subtreeFlags;if((Bt&8192||(Bt&16785408)===16785408)&&(rE={stylesheets:null,count:0,unsuspend:UAe},im(A),A=GAe(),A!==null)){d.cancelPendingCommit=A(Ue.bind(null,d,w,D,G,ae,xe,De,1,Zt,yt)),Wc(d,j,ae,!We);return}Ue(d,w,D,G,ae,xe,De,Ft,Zt,yt)}function ZT(d){for(var A=d;;){var w=A.tag;if((w===0||w===11||w===15)&&A.flags&16384&&(w=A.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var D=0;D<w.length;D++){var G=w[D],j=G.getSnapshot;G=G.value;try{if(!al(j(),G))return!1}catch{return!1}}if(w=A.child,A.subtreeFlags&16384&&w!==null)w.return=A,A=w;else{if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function Wc(d,A,w,D){A&=~Qg,A&=~Hh,d.suspendedLanes|=A,d.pingedLanes&=~A,D&&(d.warmLanes|=A),D=d.expirationTimes;for(var G=A;0<G;){var j=31-xt(G),ae=1<<j;D[j]=-1,G&=~ae}w!==0&&Ut(d,w,A)}function om(){return Ri&6?!0:(cr(0),!1)}function qh(){if(ir!==null){if(us===0)var d=ir.return;else d=ir,Nf=Uh=null,Lb(d),Df=null,Yd=0,d=ir;for(;d!==null;)QT(d.alternate,d),d=d.return;ir=null}}function up(d,A){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;w!==-1&&(d.timeoutHandle=-1,_Ae(w)),w=d.cancelPendingCommit,w!==null&&(d.cancelPendingCommit=null,w()),qh(),ts=d,ir=w=Bl(d.current,null),ci=A,us=0,Cr=null,To=!1,Al=Nn(d,A),v0=!1,Vh=Il=Qg=Hh=kf=ws=0,sr=K1=null,ns=!1,A&8&&(A|=A&32);var D=d.entangledLanes;if(D!==0)for(d=d.entanglements,D&=A;0<D;){var G=31-xt(D),j=1<<G;A|=d[G],D&=~j}return lp=A,qA(),w}function x0(d,A){kt=null,H.H=Fh,A===Ph?(A=bi(),us=3):A===O1?(A=bi(),us=4):us=A===Hc?8:A!==null&&typeof A=="object"&&typeof A.then=="function"?6:1,Cr=A,ir===null&&(ws=1,Gb(d,cl(A,d.current)))}function Jg(){var d=H.H;return H.H=Fh,d===null?Fh:d}function Zb(){var d=H.A;return H.A=rm,d}function Y1(){ws=4,To||(ci&4194176)!==ci&&ro.current!==null||(Al=!0),!(kf&134217727)&&!(Hh&134217727)||ts===null||Wc(ts,ci,Il,!1)}function am(d,A,w){var D=Ri;Ri|=2;var G=Jg(),j=Zb();(ts!==d||ci!==A)&&(Hr=null,up(d,A)),A=!1;var ae=ws;e:do try{if(us!==0&&ir!==null){var xe=ir,De=Cr;switch(us){case 8:qh(),ae=6;break e;case 3:case 2:case 6:ro.current===null&&(A=!0);var We=us;if(us=0,Cr=null,W(d,xe,De,We),w&&Al){ae=0;break e}break;default:We=us,us=0,Cr=null,W(d,xe,De,We)}}JT(),ae=ws;break}catch(Ft){x0(d,Ft)}while(!0);return A&&d.shellSuspendCounter++,Nf=Uh=null,Ri=D,H.H=G,H.A=j,ir===null&&(ts=null,ci=0,qA()),ae}function JT(){for(;ir!==null;)N(ir)}function y(d,A){var w=Ri;Ri|=2;var D=Jg(),G=Zb();ts!==d||ci!==A?(Hr=null,or=Ve()+500,up(d,A)):Al=Nn(d,A);e:do try{if(us!==0&&ir!==null){A=ir;var j=Cr;t:switch(us){case 1:us=0,Cr=null,W(d,A,j,1);break;case 2:if(kc(j)){us=0,Cr=null,z(A);break}A=function(){us===2&&ts===d&&(us=7),fs(d)},j.then(A,A);break e;case 3:us=7;break e;case 4:us=5;break e;case 7:kc(j)?(us=0,Cr=null,z(A)):(us=0,Cr=null,W(d,A,j,7));break;case 5:var ae=null;switch(ir.tag){case 26:ae=ir.memoizedState;case 5:case 27:var xe=ir;if(!ae||JV(ae)){us=0,Cr=null;var De=xe.sibling;if(De!==null)ir=De;else{var We=xe.return;We!==null?(ir=We,J(We)):ir=null}break t}}us=0,Cr=null,W(d,A,j,5);break;case 6:us=0,Cr=null,W(d,A,j,6);break;case 8:qh(),ws=6;break e;default:throw Error(n(462))}}_();break}catch(Ft){x0(d,Ft)}while(!0);return Nf=Uh=null,H.H=D,H.A=G,Ri=w,ir!==null?0:(ts=null,ci=0,qA(),ws)}function _(){for(;ir!==null&&!fe();)N(ir)}function N(d){var A=G1(d.alternate,d,lp);d.memoizedProps=d.pendingProps,A===null?J(d):ir=A}function z(d){var A=d,w=A.alternate;switch(A.tag){case 15:case 0:A=iR(w,A,A.pendingProps,A.type,void 0,ci);break;case 11:A=iR(w,A,A.pendingProps,A.type.render,A.ref,ci);break;case 5:Lb(A);default:QT(w,A),A=ir=m0(A,lp),A=G1(w,A,lp)}d.memoizedProps=d.pendingProps,A===null?J(d):ir=A}function W(d,A,w,D){Nf=Uh=null,Lb(A),Df=null,Yd=0;var G=A.return;try{if(oB(d,G,A,w,ci)){ws=1,Gb(d,cl(w,d.current)),ir=null;return}}catch(j){if(G!==null)throw ir=G,j;ws=1,Gb(d,cl(w,d.current)),ir=null;return}A.flags&32768?(Ar||D===1?d=!0:Al||ci&536870912?d=!1:(To=d=!0,(D===2||D===3||D===6)&&(D=ro.current,D!==null&&D.tag===13&&(D.flags|=16384))),be(A,d)):J(A)}function J(d){var A=d;do{if(A.flags&32768){be(A,To);return}d=A.return;var w=lB(A.alternate,A,lp);if(w!==null){ir=w;return}if(A=A.sibling,A!==null){ir=A;return}ir=A=d}while(A!==null);ws===0&&(ws=5)}function be(d,A){do{var w=so(d.alternate,d);if(w!==null){w.flags&=32767,ir=w;return}if(w=d.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!A&&(d=d.sibling,d!==null)){ir=d;return}ir=d=w}while(d!==null);ws=6,ir=null}function Ue(d,A,w,D,G,j,ae,xe,De,We){var Ft=H.T,Zt=Ee.p;try{Ee.p=2,H.T=null,nt(d,A,w,D,Zt,G,j,ae,xe,De,We)}finally{H.T=Ft,Ee.p=Zt}}function nt(d,A,w,D,G,j,ae,xe){do cn();while(Iu!==null);if(Ri&6)throw Error(n(327));var De=d.finishedWork;if(D=d.finishedLanes,De===null)return null;if(d.finishedWork=null,d.finishedLanes=0,De===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0,d.cancelPendingCommit=null;var We=De.lanes|De.childLanes;if(We|=Cf,dt(d,D,We,j,ae,xe),d===ts&&(ir=ts=null,ci=0),!(De.subtreeFlags&10256)&&!(De.flags&10256)||Bu||(Bu=!0,Gf=We,Us=w,Ze(on,function(){return cn(),null})),w=(De.flags&15990)!==0,De.subtreeFlags&15990||w?(w=H.T,H.T=null,j=Ee.p,Ee.p=2,ae=Ri,Ri|=4,Wg(d,De),nm(De,d),$d(gB,d.containerInfo),yR=!!mB,gB=mB=null,d.current=De,Kg(d,De.alternate,De),Pe(),Ri=ae,Ee.p=j,H.T=w):d.current=De,Bu?(Bu=!1,Iu=d,sm=D):Ot(d,We),We=d.pendingLanes,We===0&&(Vo=null),Sn(De.stateNode),fs(d),A!==null)for(G=d.onRecoverableError,De=0;De<A.length;De++)We=A[De],G(We.value,{componentStack:We.stack});return sm&3&&cn(),We=d.pendingLanes,D&4194218&&We&42?d===cp?Ou++:(Ou=0,cp=d):Ou=0,cr(0),null}function Ot(d,A){(d.pooledCacheLanes&=A)===0&&(A=d.pooledCache,A!=null&&(d.pooledCache=null,ue(A)))}function cn(){if(Iu!==null){var d=Iu,A=Gf;Gf=0;var w=In(sm),D=H.T,G=Ee.p;try{if(Ee.p=32>w?32:w,H.T=null,Iu===null)var j=!1;else{w=Us,Us=null;var ae=Iu,xe=sm;if(Iu=null,sm=0,Ri&6)throw Error(n(331));var De=Ri;if(Ri|=4,Yg(ae.current),ip(ae,ae.current,xe,w),Ri=De,cr(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(En,ae)}catch{}j=!0}return j}finally{Ee.p=G,H.T=D,Ot(d,A)}}return!1}function Rn(d,A,w){A=cl(w,A),A=FT(d.stateNode,A,2),d=$c(d,A,2),d!==null&&(Qr(d,2),fs(d))}function ln(d,A,w){if(d.tag===3)Rn(d,d,w);else for(;A!==null;){if(A.tag===3){Rn(A,d,w);break}else if(A.tag===1){var D=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Vo===null||!Vo.has(D))){d=cl(w,d),w=UT(2),D=$c(A,w,2),D!==null&&(tR(w,D,A,d),Qr(D,2),fs(D));break}}A=A.return}}function Di(d,A,w){var D=d.pingCache;if(D===null){D=d.pingCache=new ap;var G=new Set;D.set(A,G)}else G=D.get(A),G===void 0&&(G=new Set,D.set(A,G));G.has(w)||(v0=!0,G.add(w),d=Uu.bind(null,d,A,w),A.then(d,d))}function Uu(d,A,w){var D=d.pingCache;D!==null&&D.delete(A),d.pingedLanes|=d.suspendedLanes&w,d.warmLanes&=~w,ts===d&&(ci&w)===w&&(ws===4||ws===3&&(ci&62914560)===ci&&300>Ve()-Yi?!(Ri&2)&&up(d,0):Qg|=w,Vh===ci&&(Vh=0)),fs(d)}function ey(d,A){A===0&&(A=Gn()),d=Ea(d,A),d!==null&&(Qr(d,A),fs(d))}function lm(d){var A=d.memoizedState,w=0;A!==null&&(w=A.retryLane),ey(d,w)}function pt(d,A){var w=0;switch(d.tag){case 13:var D=d.stateNode,G=d.memoizedState;G!==null&&(w=G.retryLane);break;case 19:D=d.stateNode;break;case 22:D=d.stateNode._retryCache;break;default:throw Error(n(314))}D!==null&&D.delete(A),ey(d,w)}function Ze(d,A){return Gt(d,A)}var vt=null,nn=null,$n=!1,is=!1,mi=!1,rr=0;function fs(d){d!==nn&&d.next===null&&(nn===null?vt=nn=d:nn=nn.next=d),is=!0,$n||($n=!0,dAe(b0))}function cr(d,A){if(!mi&&is){mi=!0;do for(var w=!1,D=vt;D!==null;){if(d!==0){var G=D.pendingLanes;if(G===0)var j=0;else{var ae=D.suspendedLanes,xe=D.pingedLanes;j=(1<<31-xt(42|d)+1)-1,j&=G&~(ae&~xe),j=j&201326677?j&201326677|1:j?j|2:0}j!==0&&(w=!0,PV(D,j))}else j=ci,j=xn(D,D===ts?j:0),!(j&3)||Nn(D,j)||(w=!0,PV(D,j));D=D.next}while(w);mi=!1}}function b0(){is=$n=!1;var d=0;rr!==0&&(bAe()&&(d=rr),rr=0);for(var A=Ve(),w=null,D=vt;D!==null;){var G=D.next,j=lR(D,A);j===0?(D.next=null,w===null?vt=G:w.next=G,G===null&&(nn=w)):(w=D,(d!==0||j&3)&&(is=!0)),D=G}cr(d)}function lR(d,A){for(var w=d.suspendedLanes,D=d.pingedLanes,G=d.expirationTimes,j=d.pendingLanes&-62914561;0<j;){var ae=31-xt(j),xe=1<<ae,De=G[ae];De===-1?(!(xe&w)||xe&D)&&(G[ae]=Fi(xe,A)):De<=A&&(d.expiredLanes|=xe),j&=~xe}if(A=ts,w=ci,w=xn(d,d===A?w:0),D=d.callbackNode,w===0||d===A&&us===2||d.cancelPendingCommit!==null)return D!==null&&D!==null&&Se(D),d.callbackNode=null,d.callbackPriority=0;if(!(w&3)||Nn(d,w)){if(A=w&-w,A===d.callbackPriority)return A;switch(D!==null&&Se(D),In(w)){case 2:case 8:w=sn;break;case 32:w=on;break;case 268435456:w=ai;break;default:w=on}return D=LV.bind(null,d),w=Gt(w,D),d.callbackPriority=A,d.callbackNode=w,A}return D!==null&&D!==null&&Se(D),d.callbackPriority=2,d.callbackNode=null,2}function LV(d,A){var w=d.callbackNode;if(cn()&&d.callbackNode!==w)return null;var D=ci;return D=xn(d,d===ts?D:0),D===0?null:(Zg(d,D,A),lR(d,Ve()),d.callbackNode!=null&&d.callbackNode===w?LV.bind(null,d):null)}function PV(d,A){if(cn())return null;Zg(d,A,!0)}function dAe(d){SAe(function(){Ri&6?Gt(bt,d):d()})}function cB(){return rr===0&&(rr=Dn()),rr}function NV(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:NA(""+d)}function BV(d,A){var w=A.ownerDocument.createElement("input");return w.name=A.name,w.value=A.value,d.id&&w.setAttribute("form",d.id),A.parentNode.insertBefore(w,A),d=new FormData(d),w.parentNode.removeChild(w),d}function pAe(d,A,w,D,G){if(A==="submit"&&w&&w.stateNode===G){var j=NV((G[zn]||null).action),ae=D.submitter;ae&&(A=(A=ae[zn]||null)?NV(A.formAction):ae.getAttribute("formAction"),A!==null&&(j=A,ae=null));var xe=new Vp("action","action",null,D,G);d.push({event:xe,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(rr!==0){var De=ae?BV(G,ae):new FormData(G);PT(w,{pending:!0,data:De,method:G.method,action:j},null,De)}}else typeof j=="function"&&(xe.preventDefault(),De=ae?BV(G,ae):new FormData(G),PT(w,{pending:!0,data:De,method:G.method,action:j},j,De))},currentTarget:G}]})}}for(var uB=0;uB<_u.length;uB++){var fB=_u[uB],AAe=fB.toLowerCase(),mAe=fB[0].toUpperCase()+fB.slice(1);no(AAe,"on"+mAe)}no(P1,"onAnimationEnd"),no(ll,"onAnimationIteration"),no(N1,"onAnimationStart"),no("dblclick","onDoubleClick"),no("focusin","onFocus"),no("focusout","onBlur"),no(Mf,"onTransitionRun"),no(t0,"onTransitionStart"),no(Mh,"onTransitionCancel"),no(VA,"onTransitionEnd"),zt("onMouseEnter",["mouseout","mouseover"]),zt("onMouseLeave",["mouseout","mouseover"]),zt("onPointerEnter",["pointerout","pointerover"]),zt("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eE));function IV(d,A){A=(A&4)!==0;for(var w=0;w<d.length;w++){var D=d[w],G=D.event;D=D.listeners;e:{var j=void 0;if(A)for(var ae=D.length-1;0<=ae;ae--){var xe=D[ae],De=xe.instance,We=xe.currentTarget;if(xe=xe.listener,De!==j&&G.isPropagationStopped())break e;j=xe,G.currentTarget=We;try{j(G)}catch(Ft){kb(Ft)}G.currentTarget=null,j=De}else for(ae=0;ae<D.length;ae++){if(xe=D[ae],De=xe.instance,We=xe.currentTarget,xe=xe.listener,De!==j&&G.isPropagationStopped())break e;j=xe,G.currentTarget=We;try{j(G)}catch(Ft){kb(Ft)}G.currentTarget=null,j=De}}}}function _r(d,A){var w=A[Bi];w===void 0&&(w=A[Bi]=new Set);var D=d+"__bubble";w.has(D)||(OV(A,d,2,!1),w.add(D))}function hB(d,A,w){var D=0;A&&(D|=4),OV(w,d,D,A)}var cR="_reactListening"+Math.random().toString(36).slice(2);function dB(d){if(!d[cR]){d[cR]=!0,Ye.forEach(function(w){w!=="selectionchange"&&(gAe.has(w)||hB(w,!1,d),hB(w,!0,d))});var A=d.nodeType===9?d:d.ownerDocument;A===null||A[cR]||(A[cR]=!0,hB("selectionchange",!1,A))}}function OV(d,A,w,D){switch(sq(A)){case 2:var G=VAe;break;case 8:G=qAe;break;default:G=wB}w=G.bind(null,A,w,d),G=void 0,!Hp||A!=="touchstart"&&A!=="touchmove"&&A!=="wheel"||(G=!0),D?G!==void 0?d.addEventListener(A,w,{capture:!0,passive:G}):d.addEventListener(A,w,!0):G!==void 0?d.addEventListener(A,w,{passive:G}):d.addEventListener(A,w,!1)}function pB(d,A,w,D,G){var j=D;if(!(A&1)&&!(A&2)&&D!==null)e:for(;;){if(D===null)return;var ae=D.tag;if(ae===3||ae===4){var xe=D.stateNode.containerInfo;if(xe===G||xe.nodeType===8&&xe.parentNode===G)break;if(ae===4)for(ae=D.return;ae!==null;){var De=ae.tag;if((De===3||De===4)&&(De=ae.stateNode.containerInfo,De===G||De.nodeType===8&&De.parentNode===G))return;ae=ae.return}for(;xe!==null;){if(ae=Nc(xe),ae===null)return;if(De=ae.tag,De===5||De===6||De===26||De===27){D=j=ae;continue e}xe=xe.parentNode}}D=D.return}_1(function(){var We=j,Ft=BA(w),Zt=[];e:{var yt=Ug.get(d);if(yt!==void 0){var Bt=Vp,jn=d;switch(d){case"keypress":if(sl(w)===0)break e;case"keydown":case"keyup":Bt=w1;break;case"focusin":jn="focus",Bt=OA;break;case"focusout":jn="blur",Bt=OA;break;case"beforeblur":case"afterblur":Bt=OA;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=Mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=M1;break;case P1:case ll:case N1:Bt=Cg;break;case VA:Bt=Sf;break;case"scroll":case"scrollend":Bt=bb;break;case"wheel":Bt=Rb;break;case"copy":case"cut":case"paste":Bt=Sb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=Dg;break;case"toggle":case"beforetoggle":Bt=bh}var Ui=(A&4)!==0,$o=!Ui&&(d==="scroll"||d==="scrollend"),tt=Ui?yt!==null?yt+"Capture":null:yt;Ui=[];for(var $e=We,ct;$e!==null;){var Wt=$e;if(ct=Wt.stateNode,Wt=Wt.tag,Wt!==5&&Wt!==26&&Wt!==27||ct===null||tt===null||(Wt=Id($e,tt),Wt!=null&&Ui.push(tE($e,Wt,ct))),$o)break;$e=$e.return}0<Ui.length&&(yt=new Bt(yt,jn,null,w,Ft),Zt.push({event:yt,listeners:Ui}))}}if(!(A&7)){e:{if(yt=d==="mouseover"||d==="pointerover",Bt=d==="mouseout"||d==="pointerout",yt&&w!==Tg&&(jn=w.relatedTarget||w.fromElement)&&(Nc(jn)||jn[si]))break e;if((Bt||yt)&&(yt=Ft.window===Ft?Ft:(yt=Ft.ownerDocument)?yt.defaultView||yt.parentWindow:window,Bt?(jn=w.relatedTarget||w.toElement,Bt=We,jn=jn?Nc(jn):null,jn!==null&&($o=le(jn),Ui=jn.tag,jn!==$o||Ui!==5&&Ui!==27&&Ui!==6)&&(jn=null)):(Bt=null,jn=We),Bt!==jn)){if(Ui=Mg,Wt="onMouseLeave",tt="onMouseEnter",$e="mouse",(d==="pointerout"||d==="pointerover")&&(Ui=Dg,Wt="onPointerLeave",tt="onPointerEnter",$e="pointer"),$o=Bt==null?yt:Ge(Bt),ct=jn==null?yt:Ge(jn),yt=new Ui(Wt,$e+"leave",Bt,w,Ft),yt.target=$o,yt.relatedTarget=ct,Wt=null,Nc(Ft)===We&&(Ui=new Ui(tt,$e+"enter",jn,w,Ft),Ui.target=ct,Ui.relatedTarget=$o,Wt=Ui),$o=Wt,Bt&&jn)t:{for(Ui=Bt,tt=jn,$e=0,ct=Ui;ct;ct=Jb(ct))$e++;for(ct=0,Wt=tt;Wt;Wt=Jb(Wt))ct++;for(;0<$e-ct;)Ui=Jb(Ui),$e--;for(;0<ct-$e;)tt=Jb(tt),ct--;for(;$e--;){if(Ui===tt||tt!==null&&Ui===tt.alternate)break t;Ui=Jb(Ui),tt=Jb(tt)}Ui=null}else Ui=null;Bt!==null&&FV(Zt,yt,Bt,Ui,!1),jn!==null&&$o!==null&&FV(Zt,$o,jn,Ui,!0)}}e:{if(yt=We?Ge(We):window,Bt=yt.nodeName&&yt.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&yt.type==="file")var On=Xp;else if(D1(yt))if(Pg)On=Eh;else{On=Db;var ur=zA}else Bt=yt.nodeName,!Bt||Bt.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?We&&Er(We.elementType)&&(On=Xp):On=Zp;if(On&&(On=On(d,We))){ol(Zt,On,w,Ft);break e}ur&&ur(d,yt,We),d==="focusout"&&We&&yt.type==="number"&&We.memoizedProps.value!=null&&lr(yt,"number",yt.value)}switch(ur=We?Ge(We):window,d){case"focusin":(D1(ur)||ur.contentEditable==="true")&&(jd=ur,L1=We,Jp=null);break;case"focusout":Jp=L1=jd=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,Zl(Zt,w,Ft);break;case"selectionchange":if(Ig)break;case"keydown":case"keyup":Zl(Zt,w,Ft)}var ei;if(Kp)e:{switch(d){case"compositionstart":var yi="onCompositionStart";break e;case"compositionend":yi="onCompositionEnd";break e;case"compositionupdate":yi="onCompositionUpdate";break e}yi=void 0}else _h?wr(d,w)&&(yi="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(yi="onCompositionStart");yi&&(Hd&&w.locale!=="ko"&&(_h||yi!=="onCompositionStart"?yi==="onCompositionEnd"&&_h&&(ei=ko()):(bf=Ft,S1="value"in bf?bf.value:bf.textContent,_h=!0)),ur=uR(We,yi),0<ur.length&&(yi=new Rg(yi,d,null,w,Ft),Zt.push({event:yi,listeners:ur}),ei?yi.data=ei:(ei=C1(w),ei!==null&&(yi.data=ei)))),(ei=Yp?kA(d,w):R1(d,w))&&(yi=uR(We,"onBeforeInput"),0<yi.length&&(ur=new Rg("onBeforeInput","beforeinput",null,w,Ft),Zt.push({event:ur,listeners:yi}),ur.data=ei)),pAe(Zt,d,We,w,Ft)}IV(Zt,A)})}function tE(d,A,w){return{instance:d,listener:A,currentTarget:w}}function uR(d,A){for(var w=A+"Capture",D=[];d!==null;){var G=d,j=G.stateNode;G=G.tag,G!==5&&G!==26&&G!==27||j===null||(G=Id(d,w),G!=null&&D.unshift(tE(d,G,j)),G=Id(d,A),G!=null&&D.push(tE(d,G,j))),d=d.return}return D}function Jb(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function FV(d,A,w,D,G){for(var j=A._reactName,ae=[];w!==null&&w!==D;){var xe=w,De=xe.alternate,We=xe.stateNode;if(xe=xe.tag,De!==null&&De===D)break;xe!==5&&xe!==26&&xe!==27||We===null||(De=We,G?(We=Id(w,j),We!=null&&ae.unshift(tE(w,We,De))):G||(We=Id(w,j),We!=null&&ae.push(tE(w,We,De)))),w=w.return}ae.length!==0&&d.push({event:A,listeners:ae})}var yAe=/\r\n?/g,vAe=/\u0000|\uFFFD/g;function UV(d){return(typeof d=="string"?d:""+d).replace(yAe,`
`).replace(vAe,"")}function kV(d,A){return A=UV(A),UV(d)===A}function fR(){}function ys(d,A,w,D,G,j){switch(w){case"children":typeof D=="string"?A==="body"||A==="textarea"&&D===""||Sa(d,D):(typeof D=="number"||typeof D=="bigint")&&A!=="body"&&Sa(d,""+D);break;case"className":Zr(d,"class",D);break;case"tabIndex":Zr(d,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(d,w,D);break;case"style":x1(d,D,j);break;case"data":if(A!=="object"){Zr(d,"data",D);break}case"src":case"href":if(D===""&&(A!=="a"||w!=="href")){d.removeAttribute(w);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){d.removeAttribute(w);break}D=NA(""+D),d.setAttribute(w,D);break;case"action":case"formAction":if(typeof D=="function"){d.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(w==="formAction"?(A!=="input"&&ys(d,A,"name",G.name,G,null),ys(d,A,"formEncType",G.formEncType,G,null),ys(d,A,"formMethod",G.formMethod,G,null),ys(d,A,"formTarget",G.formTarget,G,null)):(ys(d,A,"encType",G.encType,G,null),ys(d,A,"method",G.method,G,null),ys(d,A,"target",G.target,G,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){d.removeAttribute(w);break}D=NA(""+D),d.setAttribute(w,D);break;case"onClick":D!=null&&(d.onclick=fR);break;case"onScroll":D!=null&&_r("scroll",d);break;case"onScrollEnd":D!=null&&_r("scrollend",d);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(n(61));if(w=D.__html,w!=null){if(G.children!=null)throw Error(n(60));d.innerHTML=w}}break;case"multiple":d.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":d.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){d.removeAttribute("xlink:href");break}w=NA(""+D),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(w,""+D):d.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(w,""):d.removeAttribute(w);break;case"capture":case"download":D===!0?d.setAttribute(w,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?d.setAttribute(w,D):d.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?d.setAttribute(w,D):d.removeAttribute(w);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?d.removeAttribute(w):d.setAttribute(w,D);break;case"popover":_r("beforetoggle",d),_r("toggle",d),Ji(d,"popover",D);break;case"xlinkActuate":me(d,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":me(d,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":me(d,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":me(d,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":me(d,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":me(d,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":me(d,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":me(d,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":me(d,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":Ji(d,"is",D);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=Sg.get(w)||w,Ji(d,w,D))}}function AB(d,A,w,D,G,j){switch(w){case"style":x1(d,D,j);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(n(61));if(w=D.__html,w!=null){if(G.children!=null)throw Error(n(60));d.innerHTML=w}}break;case"children":typeof D=="string"?Sa(d,D):(typeof D=="number"||typeof D=="bigint")&&Sa(d,""+D);break;case"onScroll":D!=null&&_r("scroll",d);break;case"onScrollEnd":D!=null&&_r("scrollend",d);break;case"onClick":D!=null&&(d.onclick=fR);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xt.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(G=w.endsWith("Capture"),A=w.slice(2,G?w.length-7:void 0),j=d[zn]||null,j=j!=null?j[w]:null,typeof j=="function"&&d.removeEventListener(A,j,G),typeof D=="function")){typeof j!="function"&&j!==null&&(w in d?d[w]=null:d.hasAttribute(w)&&d.removeAttribute(w)),d.addEventListener(A,D,G);break e}w in d?d[w]=D:D===!0?d.setAttribute(w,""):Ji(d,w,D)}}}function Fl(d,A,w){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",d),_r("load",d);var D=!1,G=!1,j;for(j in w)if(w.hasOwnProperty(j)){var ae=w[j];if(ae!=null)switch(j){case"src":D=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:ys(d,A,j,ae,w,null)}}G&&ys(d,A,"srcSet",w.srcSet,w,null),D&&ys(d,A,"src",w.src,w,null);return;case"input":_r("invalid",d);var xe=j=ae=G=null,De=null,We=null;for(D in w)if(w.hasOwnProperty(D)){var Ft=w[D];if(Ft!=null)switch(D){case"name":G=Ft;break;case"type":ae=Ft;break;case"checked":De=Ft;break;case"defaultChecked":We=Ft;break;case"value":j=Ft;break;case"defaultValue":xe=Ft;break;case"children":case"dangerouslySetInnerHTML":if(Ft!=null)throw Error(n(137,A));break;default:ys(d,A,D,Ft,w,null)}}ps(d,j,xe,De,We,ae,G,!1),er(d);return;case"select":_r("invalid",d),D=ae=j=null;for(G in w)if(w.hasOwnProperty(G)&&(xe=w[G],xe!=null))switch(G){case"value":j=xe;break;case"defaultValue":ae=xe;break;case"multiple":D=xe;default:ys(d,A,G,xe,w,null)}A=j,w=ae,d.multiple=!!D,A!=null?As(d,!!D,A,!1):w!=null&&As(d,!!D,w,!0);return;case"textarea":_r("invalid",d),j=G=D=null;for(ae in w)if(w.hasOwnProperty(ae)&&(xe=w[ae],xe!=null))switch(ae){case"value":D=xe;break;case"defaultValue":G=xe;break;case"children":j=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(91));break;default:ys(d,A,ae,xe,w,null)}Bc(d,D,G,j),er(d);return;case"option":for(De in w)if(w.hasOwnProperty(De)&&(D=w[De],D!=null))switch(De){case"selected":d.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:ys(d,A,De,D,w,null)}return;case"dialog":_r("cancel",d),_r("close",d);break;case"iframe":case"object":_r("load",d);break;case"video":case"audio":for(D=0;D<eE.length;D++)_r(eE[D],d);break;case"image":_r("error",d),_r("load",d);break;case"details":_r("toggle",d);break;case"embed":case"source":case"link":_r("error",d),_r("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in w)if(w.hasOwnProperty(We)&&(D=w[We],D!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,A));default:ys(d,A,We,D,w,null)}return;default:if(Er(A)){for(Ft in w)w.hasOwnProperty(Ft)&&(D=w[Ft],D!==void 0&&AB(d,A,Ft,D,w,void 0));return}}for(xe in w)w.hasOwnProperty(xe)&&(D=w[xe],D!=null&&ys(d,A,xe,D,w,null))}function xAe(d,A,w,D){switch(A){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,j=null,ae=null,xe=null,De=null,We=null,Ft=null;for(Bt in w){var Zt=w[Bt];if(w.hasOwnProperty(Bt)&&Zt!=null)switch(Bt){case"checked":break;case"value":break;case"defaultValue":De=Zt;default:D.hasOwnProperty(Bt)||ys(d,A,Bt,null,D,Zt)}}for(var yt in D){var Bt=D[yt];if(Zt=w[yt],D.hasOwnProperty(yt)&&(Bt!=null||Zt!=null))switch(yt){case"type":j=Bt;break;case"name":G=Bt;break;case"checked":We=Bt;break;case"defaultChecked":Ft=Bt;break;case"value":ae=Bt;break;case"defaultValue":xe=Bt;break;case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(n(137,A));break;default:Bt!==Zt&&ys(d,A,yt,Bt,D,Zt)}}Tr(d,ae,xe,De,We,Ft,j,G);return;case"select":Bt=ae=xe=yt=null;for(j in w)if(De=w[j],w.hasOwnProperty(j)&&De!=null)switch(j){case"value":break;case"multiple":Bt=De;default:D.hasOwnProperty(j)||ys(d,A,j,null,D,De)}for(G in D)if(j=D[G],De=w[G],D.hasOwnProperty(G)&&(j!=null||De!=null))switch(G){case"value":yt=j;break;case"defaultValue":xe=j;break;case"multiple":ae=j;default:j!==De&&ys(d,A,G,j,D,De)}A=xe,w=ae,D=Bt,yt!=null?As(d,!!w,yt,!1):!!D!=!!w&&(A!=null?As(d,!!w,A,!0):As(d,!!w,w?[]:"",!1));return;case"textarea":Bt=yt=null;for(xe in w)if(G=w[xe],w.hasOwnProperty(xe)&&G!=null&&!D.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:ys(d,A,xe,null,D,G)}for(ae in D)if(G=D[ae],j=w[ae],D.hasOwnProperty(ae)&&(G!=null||j!=null))switch(ae){case"value":yt=G;break;case"defaultValue":Bt=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:G!==j&&ys(d,A,ae,G,D,j)}Uo(d,yt,Bt);return;case"option":for(var jn in w)if(yt=w[jn],w.hasOwnProperty(jn)&&yt!=null&&!D.hasOwnProperty(jn))switch(jn){case"selected":d.selected=!1;break;default:ys(d,A,jn,null,D,yt)}for(De in D)if(yt=D[De],Bt=w[De],D.hasOwnProperty(De)&&yt!==Bt&&(yt!=null||Bt!=null))switch(De){case"selected":d.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:ys(d,A,De,yt,D,Bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ui in w)yt=w[Ui],w.hasOwnProperty(Ui)&&yt!=null&&!D.hasOwnProperty(Ui)&&ys(d,A,Ui,null,D,yt);for(We in D)if(yt=D[We],Bt=w[We],D.hasOwnProperty(We)&&yt!==Bt&&(yt!=null||Bt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,A));break;default:ys(d,A,We,yt,D,Bt)}return;default:if(Er(A)){for(var $o in w)yt=w[$o],w.hasOwnProperty($o)&&yt!==void 0&&!D.hasOwnProperty($o)&&AB(d,A,$o,void 0,D,yt);for(Ft in D)yt=D[Ft],Bt=w[Ft],!D.hasOwnProperty(Ft)||yt===Bt||yt===void 0&&Bt===void 0||AB(d,A,Ft,yt,D,Bt);return}}for(var tt in w)yt=w[tt],w.hasOwnProperty(tt)&&yt!=null&&!D.hasOwnProperty(tt)&&ys(d,A,tt,null,D,yt);for(Zt in D)yt=D[Zt],Bt=w[Zt],!D.hasOwnProperty(Zt)||yt===Bt||yt==null&&Bt==null||ys(d,A,Zt,yt,D,Bt)}var mB=null,gB=null;function hR(d){return d.nodeType===9?d:d.ownerDocument}function GV(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zV(d,A){if(d===0)switch(A){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&A==="foreignObject"?0:d}function yB(d,A){return d==="textarea"||d==="noscript"||typeof A.children=="string"||typeof A.children=="number"||typeof A.children=="bigint"||typeof A.dangerouslySetInnerHTML=="object"&&A.dangerouslySetInnerHTML!==null&&A.dangerouslySetInnerHTML.__html!=null}var vB=null;function bAe(){var d=window.event;return d&&d.type==="popstate"?d===vB?!1:(vB=d,!0):(vB=null,!1)}var HV=typeof setTimeout=="function"?setTimeout:void 0,_Ae=typeof clearTimeout=="function"?clearTimeout:void 0,VV=typeof Promise=="function"?Promise:void 0,SAe=typeof queueMicrotask=="function"?queueMicrotask:typeof VV<"u"?function(d){return VV.resolve(null).then(d).catch(TAe)}:HV;function TAe(d){setTimeout(function(){throw d})}function xB(d,A){var w=A,D=0;do{var G=w.nextSibling;if(d.removeChild(w),G&&G.nodeType===8)if(w=G.data,w==="/$"){if(D===0){d.removeChild(G),cE(A);return}D--}else w!=="$"&&w!=="$?"&&w!=="$!"||D++;w=G}while(w);cE(A)}function bB(d){var A=d.firstChild;for(A&&A.nodeType===10&&(A=A.nextSibling);A;){var w=A;switch(A=A.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":bB(w),vu(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}d.removeChild(w)}}function EAe(d,A,w,D){for(;d.nodeType===1;){var G=w;if(d.nodeName.toLowerCase()!==A.toLowerCase()){if(!D&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(D){if(!d[Xs])switch(A){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(j=d.getAttribute("rel"),j==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(j!==G.rel||d.getAttribute("href")!==(G.href==null?null:G.href)||d.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||d.getAttribute("title")!==(G.title==null?null:G.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(j=d.getAttribute("src"),(j!==(G.src==null?null:G.src)||d.getAttribute("type")!==(G.type==null?null:G.type)||d.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&j&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(A==="input"&&d.type==="hidden"){var j=G.name==null?null:""+G.name;if(G.type==="hidden"&&d.getAttribute("name")===j)return d}else return d;if(d=fp(d.nextSibling),d===null)break}return null}function wAe(d,A,w){if(A==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!w||(d=fp(d.nextSibling),d===null))return null;return d}function fp(d){for(;d!=null;d=d.nextSibling){var A=d.nodeType;if(A===1||A===3)break;if(A===8){if(A=d.data,A==="$"||A==="$!"||A==="$?"||A==="F!"||A==="F")break;if(A==="/$")return null}}return d}function qV(d){d=d.previousSibling;for(var A=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(A===0)return d;A--}else w==="/$"&&A++}d=d.previousSibling}return null}function $V(d,A,w){switch(A=hR(w),d){case"html":if(d=A.documentElement,!d)throw Error(n(452));return d;case"head":if(d=A.head,!d)throw Error(n(453));return d;case"body":if(d=A.body,!d)throw Error(n(454));return d;default:throw Error(n(451))}}var $h=new Map,jV=new Set;function dR(d){return typeof d.getRootNode=="function"?d.getRootNode():d.ownerDocument}var cm=Ee.d;Ee.d={f:MAe,r:CAe,D:RAe,C:DAe,L:LAe,m:PAe,X:BAe,S:NAe,M:IAe};function MAe(){var d=cm.f(),A=om();return d||A}function CAe(d){var A=ye(d);A!==null&&A.tag===5&&A.type==="form"?VC(A):cm.r(d)}var e_=typeof document>"u"?null:document;function WV(d,A,w){var D=e_;if(D&&typeof A=="string"&&A){var G=Zs(A);G='link[rel="'+d+'"][href="'+G+'"]',typeof w=="string"&&(G+='[crossorigin="'+w+'"]'),jV.has(G)||(jV.add(G),d={rel:d,crossOrigin:w,href:A},D.querySelector(G)===null&&(A=D.createElement("link"),Fl(A,"link",d),Je(A),D.head.appendChild(A)))}}function RAe(d){cm.D(d),WV("dns-prefetch",d,null)}function DAe(d,A){cm.C(d,A),WV("preconnect",d,A)}function LAe(d,A,w){cm.L(d,A,w);var D=e_;if(D&&d&&A){var G='link[rel="preload"][as="'+Zs(A)+'"]';A==="image"&&w&&w.imageSrcSet?(G+='[imagesrcset="'+Zs(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(G+='[imagesizes="'+Zs(w.imageSizes)+'"]')):G+='[href="'+Zs(d)+'"]';var j=G;switch(A){case"style":j=t_(d);break;case"script":j=n_(d)}$h.has(j)||(d=O({rel:"preload",href:A==="image"&&w&&w.imageSrcSet?void 0:d,as:A},w),$h.set(j,d),D.querySelector(G)!==null||A==="style"&&D.querySelector(nE(j))||A==="script"&&D.querySelector(iE(j))||(A=D.createElement("link"),Fl(A,"link",d),Je(A),D.head.appendChild(A)))}}function PAe(d,A){cm.m(d,A);var w=e_;if(w&&d){var D=A&&typeof A.as=="string"?A.as:"script",G='link[rel="modulepreload"][as="'+Zs(D)+'"][href="'+Zs(d)+'"]',j=G;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=n_(d)}if(!$h.has(j)&&(d=O({rel:"modulepreload",href:d},A),$h.set(j,d),w.querySelector(G)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(iE(j)))return}D=w.createElement("link"),Fl(D,"link",d),Je(D),w.head.appendChild(D)}}}function NAe(d,A,w){cm.S(d,A,w);var D=e_;if(D&&d){var G=lt(D).hoistableStyles,j=t_(d);A=A||"default";var ae=G.get(j);if(!ae){var xe={loading:0,preload:null};if(ae=D.querySelector(nE(j)))xe.loading=5;else{d=O({rel:"stylesheet",href:d,"data-precedence":A},w),(w=$h.get(j))&&_B(d,w);var De=ae=D.createElement("link");Je(De),Fl(De,"link",d),De._p=new Promise(function(We,Ft){De.onload=We,De.onerror=Ft}),De.addEventListener("load",function(){xe.loading|=1}),De.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,pR(ae,A,D)}ae={type:"stylesheet",instance:ae,count:1,state:xe},G.set(j,ae)}}}function BAe(d,A){cm.X(d,A);var w=e_;if(w&&d){var D=lt(w).hoistableScripts,G=n_(d),j=D.get(G);j||(j=w.querySelector(iE(G)),j||(d=O({src:d,async:!0},A),(A=$h.get(G))&&SB(d,A),j=w.createElement("script"),Je(j),Fl(j,"link",d),w.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},D.set(G,j))}}function IAe(d,A){cm.M(d,A);var w=e_;if(w&&d){var D=lt(w).hoistableScripts,G=n_(d),j=D.get(G);j||(j=w.querySelector(iE(G)),j||(d=O({src:d,async:!0,type:"module"},A),(A=$h.get(G))&&SB(d,A),j=w.createElement("script"),Je(j),Fl(j,"link",d),w.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},D.set(G,j))}}function KV(d,A,w,D){var G=(G=ut.current)?dR(G):null;if(!G)throw Error(n(446));switch(d){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(A=t_(w.href),w=lt(G).hoistableStyles,D=w.get(A),D||(D={type:"style",instance:null,count:0,state:null},w.set(A,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){d=t_(w.href);var j=lt(G).hoistableStyles,ae=j.get(d);if(ae||(G=G.ownerDocument||G,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(d,ae),(j=G.querySelector(nE(d)))&&!j._p&&(ae.instance=j,ae.state.loading=5),$h.has(d)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},$h.set(d,w),j||OAe(G,d,w,ae.state))),A&&D===null)throw Error(n(528,""));return ae}if(A&&D!==null)throw Error(n(529,""));return null;case"script":return A=w.async,w=w.src,typeof w=="string"&&A&&typeof A!="function"&&typeof A!="symbol"?(A=n_(w),w=lt(G).hoistableScripts,D=w.get(A),D||(D={type:"script",instance:null,count:0,state:null},w.set(A,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,d))}}function t_(d){return'href="'+Zs(d)+'"'}function nE(d){return'link[rel="stylesheet"]['+d+"]"}function YV(d){return O({},d,{"data-precedence":d.precedence,precedence:null})}function OAe(d,A,w,D){d.querySelector('link[rel="preload"][as="style"]['+A+"]")?D.loading=1:(A=d.createElement("link"),D.preload=A,A.addEventListener("load",function(){return D.loading|=1}),A.addEventListener("error",function(){return D.loading|=2}),Fl(A,"link",w),Je(A),d.head.appendChild(A))}function n_(d){return'[src="'+Zs(d)+'"]'}function iE(d){return"script[async]"+d}function XV(d,A,w){if(A.count++,A.instance===null)switch(A.type){case"style":var D=d.querySelector('style[data-href~="'+Zs(w.href)+'"]');if(D)return A.instance=D,Je(D),D;var G=O({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return D=(d.ownerDocument||d).createElement("style"),Je(D),Fl(D,"style",G),pR(D,w.precedence,d),A.instance=D;case"stylesheet":G=t_(w.href);var j=d.querySelector(nE(G));if(j)return A.state.loading|=4,A.instance=j,Je(j),j;D=YV(w),(G=$h.get(G))&&_B(D,G),j=(d.ownerDocument||d).createElement("link"),Je(j);var ae=j;return ae._p=new Promise(function(xe,De){ae.onload=xe,ae.onerror=De}),Fl(j,"link",D),A.state.loading|=4,pR(j,w.precedence,d),A.instance=j;case"script":return j=n_(w.src),(G=d.querySelector(iE(j)))?(A.instance=G,Je(G),G):(D=w,(G=$h.get(j))&&(D=O({},w),SB(D,G)),d=d.ownerDocument||d,G=d.createElement("script"),Je(G),Fl(G,"link",D),d.head.appendChild(G),A.instance=G);case"void":return null;default:throw Error(n(443,A.type))}else A.type==="stylesheet"&&!(A.state.loading&4)&&(D=A.instance,A.state.loading|=4,pR(D,w.precedence,d));return A.instance}function pR(d,A,w){for(var D=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=D.length?D[D.length-1]:null,j=G,ae=0;ae<D.length;ae++){var xe=D[ae];if(xe.dataset.precedence===A)j=xe;else if(j!==G)break}j?j.parentNode.insertBefore(d,j.nextSibling):(A=w.nodeType===9?w.head:w,A.insertBefore(d,A.firstChild))}function _B(d,A){d.crossOrigin==null&&(d.crossOrigin=A.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=A.referrerPolicy),d.title==null&&(d.title=A.title)}function SB(d,A){d.crossOrigin==null&&(d.crossOrigin=A.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=A.referrerPolicy),d.integrity==null&&(d.integrity=A.integrity)}var AR=null;function QV(d,A,w){if(AR===null){var D=new Map,G=AR=new Map;G.set(w,D)}else G=AR,D=G.get(w),D||(D=new Map,G.set(w,D));if(D.has(d))return D;for(D.set(d,null),w=w.getElementsByTagName(d),G=0;G<w.length;G++){var j=w[G];if(!(j[Xs]||j[ni]||d==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=j.getAttribute(A)||"";ae=d+ae;var xe=D.get(ae);xe?xe.push(j):D.set(ae,[j])}}return D}function ZV(d,A,w){d=d.ownerDocument||d,d.head.insertBefore(w,A==="title"?d.querySelector("head > title"):null)}function FAe(d,A,w){if(w===1||A.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof A.precedence!="string"||typeof A.href!="string"||A.href==="")break;return!0;case"link":if(typeof A.rel!="string"||typeof A.href!="string"||A.href===""||A.onLoad||A.onError)break;switch(A.rel){case"stylesheet":return d=A.disabled,typeof A.precedence=="string"&&d==null;default:return!0}case"script":if(A.async&&typeof A.async!="function"&&typeof A.async!="symbol"&&!A.onLoad&&!A.onError&&A.src&&typeof A.src=="string")return!0}return!1}function JV(d){return!(d.type==="stylesheet"&&!(d.state.loading&3))}var rE=null;function UAe(){}function kAe(d,A,w){if(rE===null)throw Error(n(475));var D=rE;if(A.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&!(A.state.loading&4)){if(A.instance===null){var G=t_(w.href),j=d.querySelector(nE(G));if(j){d=j._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(D.count++,D=mR.bind(D),d.then(D,D)),A.state.loading|=4,A.instance=j,Je(j);return}j=d.ownerDocument||d,w=YV(w),(G=$h.get(G))&&_B(w,G),j=j.createElement("link"),Je(j);var ae=j;ae._p=new Promise(function(xe,De){ae.onload=xe,ae.onerror=De}),Fl(j,"link",w),A.instance=j}D.stylesheets===null&&(D.stylesheets=new Map),D.stylesheets.set(A,d),(d=A.state.preload)&&!(A.state.loading&3)&&(D.count++,A=mR.bind(D),d.addEventListener("load",A),d.addEventListener("error",A))}}function GAe(){if(rE===null)throw Error(n(475));var d=rE;return d.stylesheets&&d.count===0&&TB(d,d.stylesheets),0<d.count?function(A){var w=setTimeout(function(){if(d.stylesheets&&TB(d,d.stylesheets),d.unsuspend){var D=d.unsuspend;d.unsuspend=null,D()}},6e4);return d.unsuspend=A,function(){d.unsuspend=null,clearTimeout(w)}}:null}function mR(){if(this.count--,this.count===0){if(this.stylesheets)TB(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var gR=null;function TB(d,A){d.stylesheets=null,d.unsuspend!==null&&(d.count++,gR=new Map,A.forEach(zAe,d),gR=null,mR.call(d))}function zAe(d,A){if(!(A.state.loading&4)){var w=gR.get(d);if(w)var D=w.get(null);else{w=new Map,gR.set(d,w);for(var G=d.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<G.length;j++){var ae=G[j];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(w.set(ae.dataset.precedence,ae),D=ae)}D&&w.set(null,D)}G=A.instance,ae=G.getAttribute("data-precedence"),j=w.get(ae)||D,j===D&&w.set(null,G),w.set(ae,G),this.count++,D=mR.bind(this),G.addEventListener("load",D),G.addEventListener("error",D),j?j.parentNode.insertBefore(G,j.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(G,d.firstChild)),A.state.loading|=4}}var sE={$$typeof:p,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function HAe(d,A,w,D,G,j,ae,xe){this.tag=1,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.hiddenUpdates=Gr(null),this.identifierPrefix=D,this.onUncaughtError=G,this.onCaughtError=j,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function eq(d,A,w,D,G,j,ae,xe,De,We,Ft,Zt){return d=new HAe(d,A,w,ae,xe,De,We,Zt),A=1,j===!0&&(A|=24),j=So(3,null,null,A),d.current=j,j.stateNode=d,A=te(),A.refCount++,d.pooledCache=A,A.refCount++,j.memoizedState={element:D,isDehydrated:w,cache:A},Pl(j),d}function tq(d){return d?(d=Ch,d):Ch}function nq(d,A,w,D,G,j){G=tq(G),D.context===null?D.context=G:D.pendingContext=G,D=qc(A),D.payload={element:w},j=j===void 0?null:j,j!==null&&(D.callback=j),w=$c(d,D,A),w!==null&&(qo(w,d,A),f0(w,d,A))}function iq(d,A){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<A?w:A}}function EB(d,A){iq(d,A),(d=d.alternate)&&iq(d,A)}function rq(d){if(d.tag===13){var A=Ea(d,67108864);A!==null&&qo(A,d,67108864),EB(d,67108864)}}var yR=!0;function VAe(d,A,w,D){var G=H.T;H.T=null;var j=Ee.p;try{Ee.p=2,wB(d,A,w,D)}finally{Ee.p=j,H.T=G}}function qAe(d,A,w,D){var G=H.T;H.T=null;var j=Ee.p;try{Ee.p=8,wB(d,A,w,D)}finally{Ee.p=j,H.T=G}}function wB(d,A,w,D){if(yR){var G=MB(D);if(G===null)pB(d,A,D,vR,w),oq(d,D);else if(jAe(G,d,A,w,D))D.stopPropagation();else if(oq(d,D),A&4&&-1<$Ae.indexOf(d)){for(;G!==null;){var j=ye(G);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var ae=vn(j.pendingLanes);if(ae!==0){var xe=j;for(xe.pendingLanes|=2,xe.entangledLanes|=2;ae;){var De=1<<31-xt(ae);xe.entanglements[1]|=De,ae&=~De}fs(j),!(Ri&6)&&(or=Ve()+500,cr(0))}}break;case 13:xe=Ea(j,2),xe!==null&&qo(xe,j,2),om(),EB(j,2)}if(j=MB(D),j===null&&pB(d,A,D,vR,w),j===G)break;G=j}G!==null&&D.stopPropagation()}else pB(d,A,D,null,w)}}function MB(d){return d=BA(d),CB(d)}var vR=null;function CB(d){if(vR=null,d=Nc(d),d!==null){var A=le(d);if(A===null)d=null;else{var w=A.tag;if(w===13){if(d=de(A),d!==null)return d;d=null}else if(w===3){if(A.stateNode.current.memoizedState.isDehydrated)return A.tag===3?A.stateNode.containerInfo:null;d=null}else A!==d&&(d=null)}}return vR=d,null}function sq(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tt()){case bt:return 2;case sn:return 8;case on:case mn:return 32;case ai:return 268435456;default:return 32}default:return 32}}var RB=!1,ty=null,ny=null,iy=null,oE=new Map,aE=new Map,ry=[],$Ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oq(d,A){switch(d){case"focusin":case"focusout":ty=null;break;case"dragenter":case"dragleave":ny=null;break;case"mouseover":case"mouseout":iy=null;break;case"pointerover":case"pointerout":oE.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":aE.delete(A.pointerId)}}function lE(d,A,w,D,G,j){return d===null||d.nativeEvent!==j?(d={blockedOn:A,domEventName:w,eventSystemFlags:D,nativeEvent:j,targetContainers:[G]},A!==null&&(A=ye(A),A!==null&&rq(A)),d):(d.eventSystemFlags|=D,A=d.targetContainers,G!==null&&A.indexOf(G)===-1&&A.push(G),d)}function jAe(d,A,w,D,G){switch(A){case"focusin":return ty=lE(ty,d,A,w,D,G),!0;case"dragenter":return ny=lE(ny,d,A,w,D,G),!0;case"mouseover":return iy=lE(iy,d,A,w,D,G),!0;case"pointerover":var j=G.pointerId;return oE.set(j,lE(oE.get(j)||null,d,A,w,D,G)),!0;case"gotpointercapture":return j=G.pointerId,aE.set(j,lE(aE.get(j)||null,d,A,w,D,G)),!0}return!1}function aq(d){var A=Nc(d.target);if(A!==null){var w=le(A);if(w!==null){if(A=w.tag,A===13){if(A=de(w),A!==null){d.blockedOn=A,ve(d.priority,function(){if(w.tag===13){var D=Ol(),G=Ea(w,D);G!==null&&qo(G,w,D),EB(w,D)}});return}}else if(A===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function xR(d){if(d.blockedOn!==null)return!1;for(var A=d.targetContainers;0<A.length;){var w=MB(d.nativeEvent);if(w===null){w=d.nativeEvent;var D=new w.constructor(w.type,w);Tg=D,w.target.dispatchEvent(D),Tg=null}else return A=ye(w),A!==null&&rq(A),d.blockedOn=w,!1;A.shift()}return!0}function lq(d,A,w){xR(d)&&w.delete(A)}function WAe(){RB=!1,ty!==null&&xR(ty)&&(ty=null),ny!==null&&xR(ny)&&(ny=null),iy!==null&&xR(iy)&&(iy=null),oE.forEach(lq),aE.forEach(lq)}function bR(d,A){d.blockedOn===A&&(d.blockedOn=null,RB||(RB=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,WAe)))}var _R=null;function cq(d){_R!==d&&(_R=d,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_R===d&&(_R=null);for(var A=0;A<d.length;A+=3){var w=d[A],D=d[A+1],G=d[A+2];if(typeof D!="function"){if(CB(D||w)===null)continue;break}var j=ye(w);j!==null&&(d.splice(A,3),A-=3,PT(j,{pending:!0,data:G,method:w.method,action:D},D,G))}}))}function cE(d){function A(De){return bR(De,d)}ty!==null&&bR(ty,d),ny!==null&&bR(ny,d),iy!==null&&bR(iy,d),oE.forEach(A),aE.forEach(A);for(var w=0;w<ry.length;w++){var D=ry[w];D.blockedOn===d&&(D.blockedOn=null)}for(;0<ry.length&&(w=ry[0],w.blockedOn===null);)aq(w),w.blockedOn===null&&ry.shift();if(w=(d.ownerDocument||d).$$reactFormReplay,w!=null)for(D=0;D<w.length;D+=3){var G=w[D],j=w[D+1],ae=G[zn]||null;if(typeof j=="function")ae||cq(w);else if(ae){var xe=null;if(j&&j.hasAttribute("formAction")){if(G=j,ae=j[zn]||null)xe=ae.formAction;else if(CB(G)!==null)continue}else xe=ae.action;typeof xe=="function"?w[D+1]=xe:(w.splice(D,3),D-=3),cq(w)}}}function DB(d){this._internalRoot=d}SR.prototype.render=DB.prototype.render=function(d){var A=this._internalRoot;if(A===null)throw Error(n(409));var w=A.current,D=Ol();nq(w,D,d,A,null,null)},SR.prototype.unmount=DB.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var A=d.containerInfo;d.tag===0&&cn(),nq(d.current,2,null,d,null,null),om(),A[si]=null}};function SR(d){this._internalRoot=d}SR.prototype.unstable_scheduleHydration=function(d){if(d){var A=S();d={blockedOn:null,target:d,priority:A};for(var w=0;w<ry.length&&A!==0&&A<ry[w].priority;w++);ry.splice(w,0,d),w===0&&aq(d)}};var uq=e.version;if(uq!=="19.0.0")throw Error(n(527,uq,"19.0.0"));Ee.findDOMNode=function(d){var A=d._reactInternals;if(A===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=ge(A),d=d!==null?Ce(d):null,d=d===null?null:d.stateNode,d};var KAe={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:H,findFiberByHostInstance:Nc,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var TR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!TR.isDisabled&&TR.supportsFiber)try{En=TR.inject(KAe),pn=TR}catch{}}return hE.createRoot=function(d,A){if(!r(d))throw Error(n(299));var w=!1,D="",G=QC,j=ZC,ae=JC,xe=null;return A!=null&&(A.unstable_strictMode===!0&&(w=!0),A.identifierPrefix!==void 0&&(D=A.identifierPrefix),A.onUncaughtError!==void 0&&(G=A.onUncaughtError),A.onCaughtError!==void 0&&(j=A.onCaughtError),A.onRecoverableError!==void 0&&(ae=A.onRecoverableError),A.unstable_transitionCallbacks!==void 0&&(xe=A.unstable_transitionCallbacks)),A=eq(d,1,!1,null,null,w,D,G,j,ae,xe,null),d[si]=A.current,dB(d.nodeType===8?d.parentNode:d),new DB(A)},hE.hydrateRoot=function(d,A,w){if(!r(d))throw Error(n(299));var D=!1,G="",j=QC,ae=ZC,xe=JC,De=null,We=null;return w!=null&&(w.unstable_strictMode===!0&&(D=!0),w.identifierPrefix!==void 0&&(G=w.identifierPrefix),w.onUncaughtError!==void 0&&(j=w.onUncaughtError),w.onCaughtError!==void 0&&(ae=w.onCaughtError),w.onRecoverableError!==void 0&&(xe=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(De=w.unstable_transitionCallbacks),w.formState!==void 0&&(We=w.formState)),A=eq(d,1,!0,A,w??null,D,G,j,ae,xe,De,We),A.context=tq(null),w=A.current,D=Ol(),G=qc(D),G.callback=null,$c(w,G,D),A.current.lanes=D,Qr(A,D),fs(A),d[si]=A.current,dB(d),new SR(A)},hE.version="19.0.0",hE}var xq;function sme(){if(xq)return NB.exports;xq=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),NB.exports=rme(),NB.exports}var N7=sme();const ome="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='%23fff'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M3.75%205.25h16.5m-16.5%204.5h16.5m-16.5%204.5h16.5m-16.5%204.5h16.5'%20/%3e%3c/svg%3e",ame="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='%23fff'%20class='size-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='M6%2018%2018%206M6%206l12%2012'%20/%3e%3c/svg%3e",lme=[{id:1,name:"Home",href:"#home"},{id:2,name:"About",href:"#about"},{id:3,name:"Work",href:"#work"},{id:4,name:"Contact",href:"#contact"}],cme=[{id:1,name:"Emily Johnson",position:"Marketing Director at GreenLeaf",img:"src/public/assets/review1.png",review:"Working with Adrian was a fantastic experience. He transformed our outdated website into a modern, user-friendly platform. His attention to detail and commitment to quality are unmatched. Highly recommend him for any web dev projects."},{id:2,name:"Mark Rogers",position:"Founder of TechGear Shop",img:"src/public/assets/review2.png",review:"Adrians expertise in web development is truly impressive. He delivered a robust and scalable solution for our e-commerce site, and our online sales have significantly increased since the launch. Hes a true professional! Fantastic work."},{id:3,name:"John Dohsas",position:"Project Manager at UrbanTech ",img:"src/public/assets/review3.png",review:"I cant say enough good things about Adrian. He was able to take our complex project requirements and turn them into a seamless, functional website. His problem-solving abilities are outstanding."},{id:4,name:"Ether Smith",position:"CEO of BrightStar Enterprises",img:"src/public/assets/review4.png",review:"Adrian was a pleasure to work with. He understood our requirements perfectly and delivered a website that exceeded our expectations. His skills in both frontend backend dev are top-notch."}],qee=[{title:"Aswanna - AI Podcast Platform",desc:"Aswanna is an innovative AI-powered platform that assists farmers in identifying crop diseases by simply uploading images. It offers real-time disease analysis, along with tailored recommendations to help improve crop health and productivity.",subdesc:"Built with React, Tailwind CSS, Laravel, and integrated with the Google Gemini API, Aswanna ensures fast, accurate disease detection, offering farmers actionable insights to protect their crops.",href:"https://www.youtube.com/watch?v=zfAb95tJvZQ",texture:"src/public/textures/project/aswanna.mp4",logo:"src/public/assets/aswanna.png",logoStyle:{backgroundColor:"#60f5a1",border:"0.2px solid #36201D",boxShadow:"0px 0px 60px 0px rgba(35, 131, 96, 0.3)"},spotlight:"src/public/assets/spotlight1.png",tags:[{id:1,name:"React.js",path:"src/public/assets/react.svg"},{id:2,name:"TailwindCSS",path:"src/public/assets/tailwindcss.png"},{id:3,name:"Laravel",path:"src/public/assets/laravel.png"},{id:4,name:"Framer Motion",path:"src/public/assets/figma.svg"}]},{title:"Portfolios -Personalized 3D Websites",desc:"Personalized 3D Portfolios, built using React, Three.js, and Tailwind CSS, offers a highly customizable and responsive platform. It enables users to create visually engaging 3D model-based portfolios, complete with interactive features, allowing for a unique and immersive.",subdesc:"Personalized 3D Portfolios, built with React, Three.js, and Tailwind CSS, lets users create customizable, interactive 3D portfolios for a unique onlinepresence.",href:"https://www.youtube.com/watch?v=y5vE8y_f_OM",texture:"src/public/textures/project/project2.mp4",logo:"src/public/assets/project-logo2.png",logoStyle:{backgroundColor:"#13202F",border:"0.2px solid #17293E",boxShadow:"0px 0px 60px 0px #2F6DB54D"},spotlight:"src/public/assets/spotlight2.png",tags:[{id:1,name:"React.js",path:"src/public/assets/react.svg"},{id:2,name:"TailwindCSS",path:"src/public/assets/tailwindcss.png"},{id:4,name:"Framer Motion",path:"src/public/assets/figma.svg"}]},{title:"JobNexus - Job Seeking & Sharing Platform",desc:"JobNexus is a modern job platform that helps users search, apply, and share jobs effortlessly. It connects job seekers with relevant opportunities through a streamlined interface. With real-time updates, users can track applications and stay ahead in their job search.",subdesc:"Built with MERN (MongoDB, Express, React, Node.js), JobNexus ensures fast, secure, and scalable job matching, providing users with real-time job updates and easy application tracking.",href:"https://www.youtube.com/watch?v=lEflo_sc82g",texture:"src/public/textures/project/project3.mp4",logo:"src/public/assets/jobNexus.png",logoStyle:{innerHeight:"50px",backgroundColor:"#60f5a1",background:"linear-gradient(0deg, #60F5A150, #60F5A150), linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(208, 213, 221, 0.8) 100%)",border:"0.2px solid rgba(208, 213, 221, 1)",boxShadow:"0px 0px 60px 0px rgba(35, 131, 96, 0.3)"},spotlight:"src/public/assets/spotlight3.png",tags:[{id:2,name:"MongoDB",path:"src/public/assets/mongoDB.png"},{id:2,name:"Expressjs",path:"src/public/assets/expressjs.png"},{id:3,name:"Reactjs",path:"src/public/assets/react.svg"},{id:4,name:"Nodejs ",path:"src/public/assets/nodejs.png"}]}],ume=[{id:1,name:"Framer",pos:"Lead Web Developer",duration:"2022 - Present",title:"Framer serves as my go-to tool for creating interactive prototypes. I use it to bring designs to  life, allowing stakeholders to experience the user flow and interactions before development.",icon:"src/public/assets/framer.svg",animation:"victory"},{id:2,name:"Figma",pos:"Web Developer",duration:"2020 - 2022",title:"Figma is my collaborative design platform of choice. I utilize it to work seamlessly with team members and clients, facilitating real-time feedback and design iterations. Its cloud-based.",icon:"src/public/assets/figma.svg",animation:"clapping"},{id:3,name:"Notion",pos:"Junior Web Developer",duration:"2019 - 2020",title:"Notion helps me keep my projects organized. I use it for project management, task tracking, and as a central hub for documentation, ensuring that everything from design notes to.",icon:"src/public/assets/notion.svg",animation:"salute"}],bq=()=>ce.jsx("ul",{className:"nav-ul",children:lme.map(({id:i,name:e,href:t})=>ce.jsx("li",{className:"nav-li",children:ce.jsx("a",{href:t,className:"nav-li_a",onClick:()=>{},children:e})},i))});function fme(){const[i,e]=X.useState(!0),t=()=>{e(!i)};return ce.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90",children:[ce.jsx("div",{className:"max-w-7xl mx-auto px-5 sm:px-6 md:px-7 lg:px-8",children:ce.jsxs("div",{className:"flex items-center justify-between py-5",children:[ce.jsx("a",{href:"/",className:"text-white font-bold text-xl hover:text-gray-400 transition-colors",children:"Iresh"}),ce.jsx("button",{onClick:t,className:"text-neutral-400 hover:text-white-500 focus:outline-none sm:hidden flex",children:ce.jsx("img",{src:i?ome:ame,alt:"Menu",className:"w-6 h-6 text-white"})}),ce.jsx("nav",{className:"hidden sm:flex",children:ce.jsx(bq,{})})]})}),ce.jsx("div",{className:`nav-sidebar ${i?"max-h-0":"max-h-screen"}`,children:ce.jsx("nav",{className:"p-5",children:ce.jsx(bq,{})})})]})}function ar(){return ar=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ar.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const a1="173",Qa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},B7=0,ND=1,I7=2,hme=3,O7=0,c3=1,Dw=2,eu=3,sh=0,Bs=1,Do=2,uu=0,fu=1,xx=2,bx=3,_x=4,H8=5,Ku=100,V8=101,q8=102,F7=103,U7=104,$8=200,j8=201,W8=202,K8=203,V2=204,q2=205,Y8=206,X8=207,Q8=208,Z8=209,J8=210,$ee=211,jee=212,Wee=213,Kee=214,$2=0,j2=1,W2=2,Jm=3,K2=4,Y2=5,X2=6,Q2=7,XS=0,k7=1,G7=2,Sc=0,z7=1,H7=2,V7=3,eP=4,Yee=5,q7=6,$7=7,bF="attached",Xee="detached",u3=300,pu=301,uf=302,Lp=303,aA=304,eg=306,ff=1e3,Sl=1001,lA=1002,Ps=1003,QS=1004,dme=1004,cd=1005,pme=1005,Ur=1006,Um=1007,Ame=1007,Ja=1008,Qee=1008,Aa=1009,zy=1010,Hy=1011,ud=1012,Za=1013,Gs=1014,Ns=1015,Fa=1016,f3=1017,h3=1018,yd=1020,d3=35902,tP=1021,ZS=1022,ho=1023,nP=1024,iP=1025,pd=1026,vd=1027,eb=1028,l1=1029,Yy=1030,tb=1031,Zee=1032,nb=1033,Vy=33776,km=33777,Gm=33778,zm=33779,Z2=35840,J2=35841,eS=35842,tS=35843,nS=36196,Sx=37492,Tx=37496,Ex=37808,wx=37809,Mx=37810,Cx=37811,Rx=37812,Dx=37813,Lx=37814,Px=37815,Nx=37816,Bx=37817,Ix=37818,Ox=37819,Fx=37820,Ux=37821,qy=36492,BD=36494,ID=36495,rP=36283,iS=36284,rS=36285,sS=36286,Jee=2200,ete=2201,tte=2202,oS=2300,aS=2301,Y4=2302,Gv=2400,zv=2401,aM=2402,sP=2500,j7=2501,W7=0,oP=1,lS=2,nte=3200,ite=3201,mme=3202,gme=3203,cA=0,K7=1,Yu="",kn="srgb",hu="srgb-linear",lM="linear",$r="srgb",rte=0,Ty=7680,ste=7681,ote=7682,ate=7683,lte=34055,cte=34056,ute=5386,fte=512,hte=513,dte=514,pte=515,Ate=516,mte=517,gte=518,OD=519,aP=512,p3=513,lP=514,A3=515,cP=516,uP=517,fP=518,hP=519,cS=35044,Hv=35048,yme=35040,vme=35045,xme=35049,bme=35041,_me=35046,Sme=35050,Tme=35042,Eme="100",_F="300 es",yc=2e3,Pp=2001,wme={COMPUTE:"compute",RENDER:"render"};let hh=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const oc=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _q=1234567;const tx=Math.PI/180,kx=180/Math.PI;function th(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(oc[i&255]+oc[i>>8&255]+oc[i>>16&255]+oc[i>>24&255]+"-"+oc[e&255]+oc[e>>8&255]+"-"+oc[e>>16&15|64]+oc[e>>24&255]+"-"+oc[t&63|128]+oc[t>>8&255]+"-"+oc[t>>16&255]+oc[t>>24&255]+oc[n&255]+oc[n>>8&255]+oc[n>>16&255]+oc[n>>24&255]).toLowerCase()}function ki(i,e,t){return Math.max(e,Math.min(t,i))}function Y7(i,e){return(i%e+e)%e}function Mme(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function Cme(i,e,t){return i!==e?(t-i)/(e-i):0}function Lw(i,e,t){return(1-t)*i+t*e}function Rme(i,e,t,n){return Lw(i,e,1-Math.exp(-t*n))}function Dme(i,e=1){return e-Math.abs(Y7(i,e*2)-e)}function Lme(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function Pme(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function Nme(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Bme(i,e){return i+Math.random()*(e-i)}function Ime(i){return i*(.5-Math.random())}function Ome(i){i!==void 0&&(_q=i);let e=_q+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Fme(i){return i*tx}function Ume(i){return i*kx}function kme(i){return(i&i-1)===0&&i!==0}function Gme(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function zme(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Hme(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),u=o((e+n)/2),f=s((e-n)/2),h=o((e-n)/2),p=s((n-e)/2),m=o((n-e)/2);switch(r){case"XYX":i.set(a*u,l*f,l*h,a*c);break;case"YZY":i.set(l*h,a*u,l*f,a*c);break;case"ZXZ":i.set(l*f,l*h,a*u,a*c);break;case"XZX":i.set(a*u,l*m,l*p,a*c);break;case"YXY":i.set(l*p,a*u,l*m,a*c);break;case"ZYZ":i.set(l*m,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function au(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ki(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const _l={DEG2RAD:tx,RAD2DEG:kx,generateUUID:th,clamp:ki,euclideanModulo:Y7,mapLinear:Mme,inverseLerp:Cme,lerp:Lw,damp:Rme,pingpong:Dme,smoothstep:Lme,smootherstep:Pme,randInt:Nme,randFloat:Bme,randFloatSpread:Ime,seededRandom:Ome,degToRad:Fme,radToDeg:Ume,isPowerOfTwo:kme,ceilPowerOfTwo:Gme,floorPowerOfTwo:zme,setQuaternionFromProperEuler:Hme,normalize:Ki,denormalize:au};class at{constructor(e=0,t=0){at.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ki(this.x,e.x,t.x),this.y=ki(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ki(this.x,e,t),this.y=ki(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ki(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ki(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Si{constructor(e,t,n,r,s,o,a,l,c){Si.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c)}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],f=n[7],h=n[2],p=n[5],m=n[8],g=r[0],b=r[3],T=r[6],C=r[1],R=r[4],P=r[7],I=r[2],F=r[5],k=r[8];return s[0]=o*g+a*C+l*I,s[3]=o*b+a*R+l*F,s[6]=o*T+a*P+l*k,s[1]=c*g+u*C+f*I,s[4]=c*b+u*R+f*F,s[7]=c*T+u*P+f*k,s[2]=h*g+p*C+m*I,s[5]=h*b+p*R+m*F,s[8]=h*T+p*P+m*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,p=c*s-o*l,m=t*f+n*h+r*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=f*g,e[1]=(r*c-u*n)*g,e[2]=(a*n-r*o)*g,e[3]=h*g,e[4]=(u*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=p*g,e[7]=(n*l-c*t)*g,e[8]=(o*t-n*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(FB.makeScale(e,t)),this}rotate(e){return this.premultiply(FB.makeRotation(-e)),this}translate(e,t){return this.premultiply(FB.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const FB=new Si;function X7(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const Vme={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function c2(i,e){return new Vme[i](e)}function cM(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Q7(){const i=cM("canvas");return i.style.display="block",i}const Sq={};function Sp(i){i in Sq||(Sq[i]=!0,console.warn(i))}function qme(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function $me(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function jme(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Tq=new Si().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Eq=new Si().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Wme(){const i={enabled:!0,workingColorSpace:hu,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===$r&&(r.r=Hm(r.r),r.g=Hm(r.g),r.b=Hm(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===$r&&(r.r=w2(r.r),r.g=w2(r.g),r.b=w2(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Yu?lM:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[hu]:{primaries:e,whitePoint:n,transfer:lM,toXYZ:Tq,fromXYZ:Eq,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:kn},outputColorSpaceConfig:{drawingBufferColorSpace:kn}},[kn]:{primaries:e,whitePoint:n,transfer:$r,toXYZ:Tq,fromXYZ:Eq,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:kn}}}),i}const Oi=Wme();function Hm(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function w2(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let i_;class yte{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{i_===void 0&&(i_=cM("canvas")),i_.width=e.width,i_.height=e.height;const n=i_.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=i_}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=cM("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Hm(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Hm(t[n]/255)*255):t[n]=Hm(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Kme=0;class Vv{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Kme++}),this.uuid=th(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(UB(r[o].image)):s.push(UB(r[o]))}else s=UB(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function UB(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?yte.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Yme=0;class cs extends hh{constructor(e=cs.DEFAULT_IMAGE,t=cs.DEFAULT_MAPPING,n=Sl,r=Sl,s=Ur,o=Ja,a=ho,l=Aa,c=cs.DEFAULT_ANISOTROPY,u=Yu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Yme++}),this.uuid=th(),this.name="",this.source=new Vv(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new at(0,0),this.repeat=new at(1,1),this.center=new at(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Si,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==u3)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ff:e.x=e.x-Math.floor(e.x);break;case Sl:e.x=e.x<0?0:1;break;case lA:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ff:e.y=e.y-Math.floor(e.y);break;case Sl:e.y=e.y<0?0:1;break;case lA:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}cs.DEFAULT_IMAGE=null;cs.DEFAULT_MAPPING=u3;cs.DEFAULT_ANISOTROPY=1;class Ln{constructor(e=0,t=0,n=0,r=1){Ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],p=l[5],m=l[9],g=l[2],b=l[6],T=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-g)<.01&&Math.abs(m-b)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+g)<.1&&Math.abs(m+b)<.1&&Math.abs(c+p+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(c+1)/2,P=(p+1)/2,I=(T+1)/2,F=(u+h)/4,k=(f+g)/4,q=(m+b)/4;return R>P&&R>I?R<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(R),r=F/n,s=k/n):P>I?P<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(P),n=F/r,s=q/r):I<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),n=k/s,r=q/s),this.set(n,r,s,t),this}let C=Math.sqrt((b-m)*(b-m)+(f-g)*(f-g)+(h-u)*(h-u));return Math.abs(C)<.001&&(C=1),this.x=(b-m)/C,this.y=(f-g)/C,this.z=(h-u)/C,this.w=Math.acos((c+p+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ki(this.x,e.x,t.x),this.y=ki(this.y,e.y,t.y),this.z=ki(this.z,e.z,t.z),this.w=ki(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ki(this.x,e,t),this.y=ki(this.y,e,t),this.z=ki(this.z,e,t),this.w=ki(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ki(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dd extends hh{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ln(0,0,e,t),this.scissorTest=!1,this.viewport=new Ln(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ur,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new cs(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Vv(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xd extends Dd{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class JS extends cs{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=Sl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Xme extends xd{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new JS(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class dP extends cs{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=Sl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qme extends xd{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new dP(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Br{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],f=n[r+3];const h=s[o+0],p=s[o+1],m=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=m,e[t+3]=g;return}if(f!==g||l!==h||c!==p||u!==m){let b=1-a;const T=l*h+c*p+u*m+f*g,C=T>=0?1:-1,R=1-T*T;if(R>Number.EPSILON){const I=Math.sqrt(R),F=Math.atan2(I,T*C);b=Math.sin(b*F)/I,a=Math.sin(a*F)/I}const P=a*C;if(l=l*b+h*P,c=c*b+p*P,u=u*b+m*P,f=f*b+g*P,b===1-a){const I=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=I,c*=I,u*=I,f*=I}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],f=s[o],h=s[o+1],p=s[o+2],m=s[o+3];return e[t]=a*m+u*f+l*p-c*h,e[t+1]=l*m+u*h+c*f-a*p,e[t+2]=c*m+u*p+a*h-l*f,e[t+3]=u*m-a*f-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),f=a(s/2),h=l(n/2),p=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*p*m,this._y=c*p*f-h*u*m,this._z=c*u*m+h*p*f,this._w=c*u*f-h*p*m;break;case"YXZ":this._x=h*u*f+c*p*m,this._y=c*p*f-h*u*m,this._z=c*u*m-h*p*f,this._w=c*u*f+h*p*m;break;case"ZXY":this._x=h*u*f-c*p*m,this._y=c*p*f+h*u*m,this._z=c*u*m+h*p*f,this._w=c*u*f-h*p*m;break;case"ZYX":this._x=h*u*f-c*p*m,this._y=c*p*f+h*u*m,this._z=c*u*m-h*p*f,this._w=c*u*f+h*p*m;break;case"YZX":this._x=h*u*f+c*p*m,this._y=c*p*f+h*u*m,this._z=c*u*m-h*p*f,this._w=c*u*f-h*p*m;break;case"XZY":this._x=h*u*f-c*p*m,this._y=c*p*f-h*u*m,this._z=c*u*m+h*p*f,this._w=c*u*f+h*p*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],h=n+a+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(n>a&&n>f){const p=2*Math.sqrt(1+n-a-f);this._w=(u-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>f){const p=2*Math.sqrt(1+a-n-f);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+f-n-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ki(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*n+t*this._x,this._y=p*r+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,n=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(wq.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(wq.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*n),u=2*(a*t-s*r),f=2*(s*n-o*t);return this.x=t+l*c+o*f-a*u,this.y=n+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ki(this.x,e.x,t.x),this.y=ki(this.y,e.y,t.y),this.z=ki(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ki(this.x,e,t),this.y=ki(this.y,e,t),this.z=ki(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ki(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return kB.copy(this).projectOnVector(e),this.sub(kB)}reflect(e){return this.sub(kB.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ki(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kB=new he,wq=new Br;class ma{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(hp.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(hp.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,hp):hp.fromBufferAttribute(s,o),hp.applyMatrix4(e.matrixWorld),this.expandByPoint(hp);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ER.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ER.copy(n.boundingBox)),ER.applyMatrix4(e.matrixWorld),this.union(ER)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,hp),hp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dE),wR.subVectors(this.max,dE),r_.subVectors(e.a,dE),s_.subVectors(e.b,dE),o_.subVectors(e.c,dE),oy.subVectors(s_,r_),ay.subVectors(o_,s_),X1.subVectors(r_,o_);let t=[0,-oy.z,oy.y,0,-ay.z,ay.y,0,-X1.z,X1.y,oy.z,0,-oy.x,ay.z,0,-ay.x,X1.z,0,-X1.x,-oy.y,oy.x,0,-ay.y,ay.x,0,-X1.y,X1.x,0];return!GB(t,r_,s_,o_,wR)||(t=[1,0,0,0,1,0,0,0,1],!GB(t,r_,s_,o_,wR))?!1:(MR.crossVectors(oy,ay),t=[MR.x,MR.y,MR.z],GB(t,r_,s_,o_,wR))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hp).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hp).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(um[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),um[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),um[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),um[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),um[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),um[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),um[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),um[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(um),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const um=[new he,new he,new he,new he,new he,new he,new he,new he],hp=new he,ER=new ma,r_=new he,s_=new he,o_=new he,oy=new he,ay=new he,X1=new he,dE=new he,wR=new he,MR=new he,Q1=new he;function GB(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Q1.fromArray(i,s);const a=r.x*Math.abs(Q1.x)+r.y*Math.abs(Q1.y)+r.z*Math.abs(Q1.z),l=e.dot(Q1),c=t.dot(Q1),u=n.dot(Q1);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Zme=new ma,pE=new he,zB=new he;class Ua{constructor(e=new he,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Zme.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;pE.subVectors(e,this.center);const t=pE.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(pE,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zB.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(pE.copy(e.center).add(zB)),this.expandByPoint(pE.copy(e.center).sub(zB))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fm=new he,HB=new he,CR=new he,ly=new he,VB=new he,RR=new he,qB=new he;class c1{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fm.copy(this.origin).addScaledVector(this.direction,t),fm.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){HB.copy(e).add(t).multiplyScalar(.5),CR.copy(t).sub(e).normalize(),ly.copy(this.origin).sub(HB);const s=e.distanceTo(t)*.5,o=-this.direction.dot(CR),a=ly.dot(this.direction),l=-ly.dot(CR),c=ly.lengthSq(),u=Math.abs(1-o*o);let f,h,p,m;if(u>0)if(f=o*l-a,h=o*a-l,m=s*u,f>=0)if(h>=-m)if(h<=m){const g=1/u;f*=g,h*=g,p=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;else h<=-m?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+c):h<=m?(f=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(HB).addScaledVector(CR,h),p}intersectSphere(e,t){fm.subVectors(e.center,this.origin);const n=fm.dot(this.direction),r=fm.dot(fm)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,fm)!==null}intersectTriangle(e,t,n,r,s){VB.subVectors(t,e),RR.subVectors(n,e),qB.crossVectors(VB,RR);let o=this.direction.dot(qB),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ly.subVectors(this.origin,e);const l=a*this.direction.dot(RR.crossVectors(ly,RR));if(l<0)return null;const c=a*this.direction.dot(VB.cross(ly));if(c<0||l+c>o)return null;const u=-a*ly.dot(qB);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rn{constructor(e,t,n,r,s,o,a,l,c,u,f,h,p,m,g,b){rn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c,u,f,h,p,m,g,b)}set(e,t,n,r,s,o,a,l,c,u,f,h,p,m,g,b){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=s,T[5]=o,T[9]=a,T[13]=l,T[2]=c,T[6]=u,T[10]=f,T[14]=h,T[3]=p,T[7]=m,T[11]=g,T[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/a_.setFromMatrixColumn(e,0).length(),s=1/a_.setFromMatrixColumn(e,1).length(),o=1/a_.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,p=o*f,m=a*u,g=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=p+m*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=m+p*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*f,m=c*u,g=c*f;t[0]=h+g*a,t[4]=m*a-p,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=p*a-m,t[6]=g+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*f,m=c*u,g=c*f;t[0]=h-g*a,t[4]=-o*f,t[8]=m+p*a,t[1]=p+m*a,t[5]=o*u,t[9]=g-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*f,m=a*u,g=a*f;t[0]=l*u,t[4]=m*c-p,t[8]=h*c+g,t[1]=l*f,t[5]=g*c+h,t[9]=p*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-h*f,t[8]=m*f+p,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*f+m,t[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,p=o*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=h*f+g,t[5]=o*u,t[9]=p*f-m,t[2]=m*f-p,t[6]=a*u,t[10]=g*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Jme,e,ege)}lookAt(e,t,n){const r=this.elements;return zf.subVectors(e,t),zf.lengthSq()===0&&(zf.z=1),zf.normalize(),cy.crossVectors(n,zf),cy.lengthSq()===0&&(Math.abs(n.z)===1?zf.x+=1e-4:zf.z+=1e-4,zf.normalize(),cy.crossVectors(n,zf)),cy.normalize(),DR.crossVectors(zf,cy),r[0]=cy.x,r[4]=DR.x,r[8]=zf.x,r[1]=cy.y,r[5]=DR.y,r[9]=zf.y,r[2]=cy.z,r[6]=DR.z,r[10]=zf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],f=n[5],h=n[9],p=n[13],m=n[2],g=n[6],b=n[10],T=n[14],C=n[3],R=n[7],P=n[11],I=n[15],F=r[0],k=r[4],q=r[8],H=r[12],O=r[1],$=r[5],ee=r[9],Y=r[13],oe=r[2],re=r[6],Q=r[10],se=r[14],le=r[3],de=r[7],ie=r[11],ge=r[15];return s[0]=o*F+a*O+l*oe+c*le,s[4]=o*k+a*$+l*re+c*de,s[8]=o*q+a*ee+l*Q+c*ie,s[12]=o*H+a*Y+l*se+c*ge,s[1]=u*F+f*O+h*oe+p*le,s[5]=u*k+f*$+h*re+p*de,s[9]=u*q+f*ee+h*Q+p*ie,s[13]=u*H+f*Y+h*se+p*ge,s[2]=m*F+g*O+b*oe+T*le,s[6]=m*k+g*$+b*re+T*de,s[10]=m*q+g*ee+b*Q+T*ie,s[14]=m*H+g*Y+b*se+T*ge,s[3]=C*F+R*O+P*oe+I*le,s[7]=C*k+R*$+P*re+I*de,s[11]=C*q+R*ee+P*Q+I*ie,s[15]=C*H+R*Y+P*se+I*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],p=e[14],m=e[3],g=e[7],b=e[11],T=e[15];return m*(+s*l*f-r*c*f-s*a*h+n*c*h+r*a*p-n*l*p)+g*(+t*l*p-t*c*h+s*o*h-r*o*p+r*c*u-s*l*u)+b*(+t*c*f-t*a*p-s*o*f+n*o*p+s*a*u-n*c*u)+T*(-r*a*u-t*l*f+t*a*h+r*o*f-n*o*h+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],p=e[11],m=e[12],g=e[13],b=e[14],T=e[15],C=f*b*c-g*h*c+g*l*p-a*b*p-f*l*T+a*h*T,R=m*h*c-u*b*c-m*l*p+o*b*p+u*l*T-o*h*T,P=u*g*c-m*f*c+m*a*p-o*g*p-u*a*T+o*f*T,I=m*f*l-u*g*l-m*a*h+o*g*h+u*a*b-o*f*b,F=t*C+n*R+r*P+s*I;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/F;return e[0]=C*k,e[1]=(g*h*s-f*b*s-g*r*p+n*b*p+f*r*T-n*h*T)*k,e[2]=(a*b*s-g*l*s+g*r*c-n*b*c-a*r*T+n*l*T)*k,e[3]=(f*l*s-a*h*s-f*r*c+n*h*c+a*r*p-n*l*p)*k,e[4]=R*k,e[5]=(u*b*s-m*h*s+m*r*p-t*b*p-u*r*T+t*h*T)*k,e[6]=(m*l*s-o*b*s-m*r*c+t*b*c+o*r*T-t*l*T)*k,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*p+t*l*p)*k,e[8]=P*k,e[9]=(m*f*s-u*g*s-m*n*p+t*g*p+u*n*T-t*f*T)*k,e[10]=(o*g*s-m*a*s+m*n*c-t*g*c-o*n*T+t*a*T)*k,e[11]=(u*a*s-o*f*s-u*n*c+t*f*c+o*n*p-t*a*p)*k,e[12]=I*k,e[13]=(u*g*r-m*f*r+m*n*h-t*g*h-u*n*b+t*f*b)*k,e[14]=(m*a*r-o*g*r-m*n*l+t*g*l+o*n*b-t*a*b)*k,e[15]=(o*f*r-u*a*r+u*n*l-t*f*l-o*n*h+t*a*h)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,h=s*c,p=s*u,m=s*f,g=o*u,b=o*f,T=a*f,C=l*c,R=l*u,P=l*f,I=n.x,F=n.y,k=n.z;return r[0]=(1-(g+T))*I,r[1]=(p+P)*I,r[2]=(m-R)*I,r[3]=0,r[4]=(p-P)*F,r[5]=(1-(h+T))*F,r[6]=(b+C)*F,r[7]=0,r[8]=(m+R)*k,r[9]=(b-C)*k,r[10]=(1-(h+g))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=a_.set(r[0],r[1],r[2]).length();const o=a_.set(r[4],r[5],r[6]).length(),a=a_.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],dp.copy(this);const c=1/s,u=1/o,f=1/a;return dp.elements[0]*=c,dp.elements[1]*=c,dp.elements[2]*=c,dp.elements[4]*=u,dp.elements[5]*=u,dp.elements[6]*=u,dp.elements[8]*=f,dp.elements[9]*=f,dp.elements[10]*=f,t.setFromRotationMatrix(dp),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=yc){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),f=(t+e)/(t-e),h=(n+r)/(n-r);let p,m;if(a===yc)p=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(a===Pp)p=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=yc){const l=this.elements,c=1/(t-e),u=1/(n-r),f=1/(o-s),h=(t+e)*c,p=(n+r)*u;let m,g;if(a===yc)m=(o+s)*f,g=-2*f;else if(a===Pp)m=s*f,g=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const a_=new he,dp=new rn,Jme=new he(0,0,0),ege=new he(1,1,1),cy=new he,DR=new he,zf=new he,Mq=new rn,Cq=new Br;class Io{constructor(e=0,t=0,n=0,r=Io.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(ki(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ki(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(ki(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ki(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ki(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-ki(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Mq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mq,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Cq.setFromEuler(this),this.setFromQuaternion(Cq,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Io.DEFAULT_ORDER="XYZ";class uS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let tge=0;const Rq=new he,l_=new Br,hm=new rn,LR=new he,AE=new he,nge=new he,ige=new Br,Dq=new he(1,0,0),Lq=new he(0,1,0),Pq=new he(0,0,1),Nq={type:"added"},rge={type:"removed"},c_={type:"childadded",child:null},$B={type:"childremoved",child:null};class Vi extends hh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tge++}),this.uuid=th(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vi.DEFAULT_UP.clone();const e=new he,t=new Io,n=new Br,r=new he(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rn},normalMatrix:{value:new Si}}),this.matrix=new rn,this.matrixWorld=new rn,this.matrixAutoUpdate=Vi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new uS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return l_.setFromAxisAngle(e,t),this.quaternion.multiply(l_),this}rotateOnWorldAxis(e,t){return l_.setFromAxisAngle(e,t),this.quaternion.premultiply(l_),this}rotateX(e){return this.rotateOnAxis(Dq,e)}rotateY(e){return this.rotateOnAxis(Lq,e)}rotateZ(e){return this.rotateOnAxis(Pq,e)}translateOnAxis(e,t){return Rq.copy(e).applyQuaternion(this.quaternion),this.position.add(Rq.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Dq,e)}translateY(e){return this.translateOnAxis(Lq,e)}translateZ(e){return this.translateOnAxis(Pq,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(hm.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?LR.copy(e):LR.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),AE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hm.lookAt(AE,LR,this.up):hm.lookAt(LR,AE,this.up),this.quaternion.setFromRotationMatrix(hm),r&&(hm.extractRotation(r.matrixWorld),l_.setFromRotationMatrix(hm),this.quaternion.premultiply(l_.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Nq),c_.child=e,this.dispatchEvent(c_),c_.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(rge),$B.child=e,this.dispatchEvent($B),$B.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),hm.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),hm.multiply(e.parent.matrixWorld)),e.applyMatrix4(hm),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Nq),c_.child=e,this.dispatchEvent(c_),c_.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(AE,e,nge),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(AE,ige,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),p=o(e.animations),m=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),f.length>0&&(n.shapes=f),h.length>0&&(n.skeletons=h),p.length>0&&(n.animations=p),m.length>0&&(n.nodes=m)}return n.object=r,n;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Vi.DEFAULT_UP=new he(0,1,0);Vi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pp=new he,dm=new he,jB=new he,pm=new he,u_=new he,f_=new he,Bq=new he,WB=new he,KB=new he,YB=new he,XB=new Ln,QB=new Ln,ZB=new Ln;class Xu{constructor(e=new he,t=new he,n=new he){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),pp.subVectors(e,t),r.cross(pp);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){pp.subVectors(r,t),dm.subVectors(n,t),jB.subVectors(e,t);const o=pp.dot(pp),a=pp.dot(dm),l=pp.dot(jB),c=dm.dot(dm),u=dm.dot(jB),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const h=1/f,p=(c*l-a*u)*h,m=(o*u-a*l)*h;return s.set(1-p-m,m,p)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,pm)===null?!1:pm.x>=0&&pm.y>=0&&pm.x+pm.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,pm)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,pm.x),l.addScaledVector(o,pm.y),l.addScaledVector(a,pm.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return XB.setScalar(0),QB.setScalar(0),ZB.setScalar(0),XB.fromBufferAttribute(e,t),QB.fromBufferAttribute(e,n),ZB.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(XB,s.x),o.addScaledVector(QB,s.y),o.addScaledVector(ZB,s.z),o}static isFrontFacing(e,t,n,r){return pp.subVectors(n,t),dm.subVectors(e,t),pp.cross(dm).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pp.subVectors(this.c,this.b),dm.subVectors(this.a,this.b),pp.cross(dm).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xu.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Xu.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Xu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;u_.subVectors(r,n),f_.subVectors(s,n),WB.subVectors(e,n);const l=u_.dot(WB),c=f_.dot(WB);if(l<=0&&c<=0)return t.copy(n);KB.subVectors(e,r);const u=u_.dot(KB),f=f_.dot(KB);if(u>=0&&f<=u)return t.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(u_,o);YB.subVectors(e,s);const p=u_.dot(YB),m=f_.dot(YB);if(m>=0&&p<=m)return t.copy(s);const g=p*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(n).addScaledVector(f_,a);const b=u*m-p*f;if(b<=0&&f-u>=0&&p-m>=0)return Bq.subVectors(s,r),a=(f-u)/(f-u+(p-m)),t.copy(r).addScaledVector(Bq,a);const T=1/(b+g+h);return o=g*T,a=h*T,t.copy(n).addScaledVector(u_,o).addScaledVector(f_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const vte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},uy={h:0,s:0,l:0},PR={h:0,s:0,l:0};function JB(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Qt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Oi.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Oi.workingColorSpace){return this.r=e,this.g=t,this.b=n,Oi.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Oi.workingColorSpace){if(e=Y7(e,1),t=ki(t,0,1),n=ki(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=JB(o,s,e+1/3),this.g=JB(o,s,e),this.b=JB(o,s,e-1/3)}return Oi.toWorkingColorSpace(this,r),this}setStyle(e,t=kn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kn){const n=vte[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hm(e.r),this.g=Hm(e.g),this.b=Hm(e.b),this}copyLinearToSRGB(e){return this.r=w2(e.r),this.g=w2(e.g),this.b=w2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kn){return Oi.fromWorkingColorSpace(ac.copy(this),e),Math.round(ki(ac.r*255,0,255))*65536+Math.round(ki(ac.g*255,0,255))*256+Math.round(ki(ac.b*255,0,255))}getHexString(e=kn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Oi.workingColorSpace){Oi.fromWorkingColorSpace(ac.copy(this),t);const n=ac.r,r=ac.g,s=ac.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case n:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-n)/f+2;break;case s:l=(n-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Oi.workingColorSpace){return Oi.fromWorkingColorSpace(ac.copy(this),t),e.r=ac.r,e.g=ac.g,e.b=ac.b,e}getStyle(e=kn){Oi.fromWorkingColorSpace(ac.copy(this),e);const t=ac.r,n=ac.g,r=ac.b;return e!==kn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(uy),this.setHSL(uy.h+e,uy.s+t,uy.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(uy),e.getHSL(PR);const n=Lw(uy.h,PR.h,t),r=Lw(uy.s,PR.s,t),s=Lw(uy.l,PR.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ac=new Qt;Qt.NAMES=vte;let sge=0;class ga extends hh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:sge++}),this.uuid=th(),this.name="",this.type="Material",this.blending=fu,this.side=sh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=V2,this.blendDst=q2,this.blendEquation=Ku,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Qt(0,0,0),this.blendAlpha=0,this.depthFunc=Jm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=OD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ty,this.stencilZFail=Ty,this.stencilZPass=Ty,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==fu&&(n.blending=this.blending),this.side!==sh&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==V2&&(n.blendSrc=this.blendSrc),this.blendDst!==q2&&(n.blendDst=this.blendDst),this.blendEquation!==Ku&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Jm&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==OD&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ty&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ty&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ty&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Tl extends ga{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=XS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Nm=oge();function oge(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function zu(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=ki(i,-65504,65504),Nm.floatView[0]=i;const e=Nm.uint32View[0],t=e>>23&511;return Nm.baseTable[t]+((e&8388607)>>Nm.shiftTable[t])}function dw(i){const e=i>>10;return Nm.uint32View[0]=Nm.mantissaTable[Nm.offsetTable[e]+(i&1023)]+Nm.exponentTable[e],Nm.floatView[0]}const age={toHalfFloat:zu,fromHalfFloat:dw},La=new he,NR=new at;let lge=0;class qi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:lge++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=cS,this.updateRanges=[],this.gpuType=Ns,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)NR.fromBufferAttribute(this,t),NR.applyMatrix3(e),this.setXY(t,NR.x,NR.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)La.fromBufferAttribute(this,t),La.applyMatrix3(e),this.setXYZ(t,La.x,La.y,La.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)La.fromBufferAttribute(this,t),La.applyMatrix4(e),this.setXYZ(t,La.x,La.y,La.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)La.fromBufferAttribute(this,t),La.applyNormalMatrix(e),this.setXYZ(t,La.x,La.y,La.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)La.fromBufferAttribute(this,t),La.transformDirection(e),this.setXYZ(t,La.x,La.y,La.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=au(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ki(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=au(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=au(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=au(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=au(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array),s=Ki(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==cS&&(e.usage=this.usage),e}}class cge extends qi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class uge extends qi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class fge extends qi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class hge extends qi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class m3 extends qi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class dge extends qi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class pP extends qi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Z7 extends qi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=dw(this.array[e*this.itemSize]);return this.normalized&&(t=au(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize]=zu(t),this}getY(e){let t=dw(this.array[e*this.itemSize+1]);return this.normalized&&(t=au(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+1]=zu(t),this}getZ(e){let t=dw(this.array[e*this.itemSize+2]);return this.normalized&&(t=au(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+2]=zu(t),this}getW(e){let t=dw(this.array[e*this.itemSize+3]);return this.normalized&&(t=au(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ki(t,this.array)),this.array[e*this.itemSize+3]=zu(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array)),this.array[e+0]=zu(t),this.array[e+1]=zu(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array)),this.array[e+0]=zu(t),this.array[e+1]=zu(n),this.array[e+2]=zu(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array),s=Ki(s,this.array)),this.array[e+0]=zu(t),this.array[e+1]=zu(n),this.array[e+2]=zu(r),this.array[e+3]=zu(s),this}}class Cn extends qi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let pge=0;const jh=new rn,e6=new Vi,h_=new he,Hf=new ma,mE=new ma,gl=new he;class qn extends hh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pge++}),this.uuid=th(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(X7(e)?pP:m3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Si().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return jh.makeRotationFromQuaternion(e),this.applyMatrix4(jh),this}rotateX(e){return jh.makeRotationX(e),this.applyMatrix4(jh),this}rotateY(e){return jh.makeRotationY(e),this.applyMatrix4(jh),this}rotateZ(e){return jh.makeRotationZ(e),this.applyMatrix4(jh),this}translate(e,t,n){return jh.makeTranslation(e,t,n),this.applyMatrix4(jh),this}scale(e,t,n){return jh.makeScale(e,t,n),this.applyMatrix4(jh),this}lookAt(e){return e6.lookAt(e),e6.updateMatrix(),this.applyMatrix4(e6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(h_).negate(),this.translate(h_.x,h_.y,h_.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Cn(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ma);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Hf.setFromBufferAttribute(s),this.morphTargetsRelative?(gl.addVectors(this.boundingBox.min,Hf.min),this.boundingBox.expandByPoint(gl),gl.addVectors(this.boundingBox.max,Hf.max),this.boundingBox.expandByPoint(gl)):(this.boundingBox.expandByPoint(Hf.min),this.boundingBox.expandByPoint(Hf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){const n=this.boundingSphere.center;if(Hf.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];mE.setFromBufferAttribute(a),this.morphTargetsRelative?(gl.addVectors(Hf.min,mE.min),Hf.expandByPoint(gl),gl.addVectors(Hf.max,mE.max),Hf.expandByPoint(gl)):(Hf.expandByPoint(mE.min),Hf.expandByPoint(mE.max))}Hf.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)gl.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(gl));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)gl.fromBufferAttribute(a,c),l&&(h_.fromBufferAttribute(e,c),gl.add(h_)),r=Math.max(r,n.distanceToSquared(gl))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let q=0;q<n.count;q++)a[q]=new he,l[q]=new he;const c=new he,u=new he,f=new he,h=new at,p=new at,m=new at,g=new he,b=new he;function T(q,H,O){c.fromBufferAttribute(n,q),u.fromBufferAttribute(n,H),f.fromBufferAttribute(n,O),h.fromBufferAttribute(s,q),p.fromBufferAttribute(s,H),m.fromBufferAttribute(s,O),u.sub(c),f.sub(c),p.sub(h),m.sub(h);const $=1/(p.x*m.y-m.x*p.y);isFinite($)&&(g.copy(u).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar($),b.copy(f).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar($),a[q].add(g),a[H].add(g),a[O].add(g),l[q].add(b),l[H].add(b),l[O].add(b))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let q=0,H=C.length;q<H;++q){const O=C[q],$=O.start,ee=O.count;for(let Y=$,oe=$+ee;Y<oe;Y+=3)T(e.getX(Y+0),e.getX(Y+1),e.getX(Y+2))}const R=new he,P=new he,I=new he,F=new he;function k(q){I.fromBufferAttribute(r,q),F.copy(I);const H=a[q];R.copy(H),R.sub(I.multiplyScalar(I.dot(H))).normalize(),P.crossVectors(F,H);const $=P.dot(l[q])<0?-1:1;o.setXYZW(q,R.x,R.y,R.z,$)}for(let q=0,H=C.length;q<H;++q){const O=C[q],$=O.start,ee=O.count;for(let Y=$,oe=$+ee;Y<oe;Y+=3)k(e.getX(Y+0)),k(e.getX(Y+1)),k(e.getX(Y+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new qi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let h=0,p=n.count;h<p;h++)n.setXYZ(h,0,0,0);const r=new he,s=new he,o=new he,a=new he,l=new he,c=new he,u=new he,f=new he;if(e)for(let h=0,p=e.count;h<p;h+=3){const m=e.getX(h+0),g=e.getX(h+1),b=e.getX(h+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,b),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,b),a.add(u),l.add(u),c.add(u),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(b,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),n.setXYZ(h+0,u.x,u.y,u.z),n.setXYZ(h+1,u.x,u.y,u.z),n.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)gl.fromBufferAttribute(e,t),gl.normalize(),e.setXYZ(t,gl.x,gl.y,gl.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let p=0,m=0;for(let g=0,b=l.length;g<b;g++){a.isInterleavedBufferAttribute?p=l[g]*a.data.stride+a.offset:p=l[g]*u;for(let T=0;T<u;T++)h[m++]=c[p++]}return new qi(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qn,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],p=e(h,n);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const p=c[f];u.push(p.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,p=f.length;h<p;h++)u.push(f[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Iq=new rn,Z1=new c1,BR=new Ua,Oq=new he,IR=new he,OR=new he,FR=new he,t6=new he,UR=new he,Fq=new he,kR=new he;class zi extends Vi{constructor(e=new qn,t=new Tl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){UR.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(t6.fromBufferAttribute(f,e),o?UR.addScaledVector(t6,u):UR.addScaledVector(t6.sub(t),u))}t.add(UR)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),BR.copy(n.boundingSphere),BR.applyMatrix4(s),Z1.copy(e.ray).recast(e.near),!(BR.containsPoint(Z1.origin)===!1&&(Z1.intersectSphere(BR,Oq)===null||Z1.origin.distanceToSquared(Oq)>(e.far-e.near)**2))&&(Iq.copy(s).invert(),Z1.copy(e.ray).applyMatrix4(Iq),!(n.boundingBox!==null&&Z1.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Z1)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let m=0,g=h.length;m<g;m++){const b=h[m],T=o[b.materialIndex],C=Math.max(b.start,p.start),R=Math.min(a.count,Math.min(b.start+b.count,p.start+p.count));for(let P=C,I=R;P<I;P+=3){const F=a.getX(P),k=a.getX(P+1),q=a.getX(P+2);r=GR(this,T,e,n,c,u,f,F,k,q),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let b=m,T=g;b<T;b+=3){const C=a.getX(b),R=a.getX(b+1),P=a.getX(b+2);r=GR(this,o,e,n,c,u,f,C,R,P),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,g=h.length;m<g;m++){const b=h[m],T=o[b.materialIndex],C=Math.max(b.start,p.start),R=Math.min(l.count,Math.min(b.start+b.count,p.start+p.count));for(let P=C,I=R;P<I;P+=3){const F=P,k=P+1,q=P+2;r=GR(this,T,e,n,c,u,f,F,k,q),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let b=m,T=g;b<T;b+=3){const C=b,R=b+1,P=b+2;r=GR(this,o,e,n,c,u,f,C,R,P),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}}}function Age(i,e,t,n,r,s,o,a){let l;if(e.side===Bs?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===sh,a),l===null)return null;kR.copy(a),kR.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(kR);return c<t.near||c>t.far?null:{distance:c,point:kR.clone(),object:i}}function GR(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,IR),i.getVertexPosition(l,OR),i.getVertexPosition(c,FR);const u=Age(i,e,t,n,IR,OR,FR,Fq);if(u){const f=new he;Xu.getBarycoord(Fq,IR,OR,FR,f),r&&(u.uv=Xu.getInterpolatedAttribute(r,a,l,c,f,new at)),s&&(u.uv1=Xu.getInterpolatedAttribute(s,a,l,c,f,new at)),o&&(u.normal=Xu.getInterpolatedAttribute(o,a,l,c,f,new he),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new he,materialIndex:0};Xu.getNormal(IR,OR,FR,h.normal),u.face=h,u.barycoord=f}return u}class MA extends qn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,p=0;m("z","y","x",-1,-1,n,t,e,o,s,0),m("z","y","x",1,-1,n,t,-e,o,s,1),m("x","z","y",1,1,e,n,t,r,o,2),m("x","z","y",1,-1,e,n,-t,r,o,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Cn(c,3)),this.setAttribute("normal",new Cn(u,3)),this.setAttribute("uv",new Cn(f,2));function m(g,b,T,C,R,P,I,F,k,q,H){const O=P/k,$=I/q,ee=P/2,Y=I/2,oe=F/2,re=k+1,Q=q+1;let se=0,le=0;const de=new he;for(let ie=0;ie<Q;ie++){const ge=ie*$-Y;for(let Ce=0;Ce<re;Ce++){const Ie=Ce*O-ee;de[g]=Ie*C,de[b]=ge*R,de[T]=oe,c.push(de.x,de.y,de.z),de[g]=0,de[b]=0,de[T]=F>0?1:-1,u.push(de.x,de.y,de.z),f.push(Ce/k),f.push(1-ie/q),se+=1}}for(let ie=0;ie<q;ie++)for(let ge=0;ge<k;ge++){const Ce=h+ge+re*ie,Ie=h+ge+re*(ie+1),Ee=h+(ge+1)+re*(ie+1),Be=h+(ge+1)+re*ie;l.push(Ce,Ie,Be),l.push(Ie,Ee,Be),le+=6}a.addGroup(p,le,H),p+=le,h+=se}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MA(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fS(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Qc(i){const e={};for(let t=0;t<i.length;t++){const n=fS(i[t]);for(const r in n)e[r]=n[r]}return e}function mge(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function xte(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Oi.workingColorSpace}const g3={clone:fS,merge:Qc};var gge=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,yge=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jl extends ga{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gge,this.fragmentShader=yge,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fS(e.uniforms),this.uniformsGroups=mge(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ib extends Vi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rn,this.projectionMatrix=new rn,this.projectionMatrixInverse=new rn,this.coordinateSystem=yc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fy=new he,Uq=new at,kq=new at;let ls=class extends ib{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=kx*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(tx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return kx*2*Math.atan(Math.tan(tx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){fy.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(fy.x,fy.y).multiplyScalar(-e/fy.z),fy.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(fy.x,fy.y).multiplyScalar(-e/fy.z)}getViewSize(e,t){return this.getViewBounds(e,Uq,kq),t.subVectors(kq,Uq)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(tx*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const d_=-90,p_=1;class J7 extends Vi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ls(d_,p_,e,t);r.layers=this.layers,this.add(r);const s=new ls(d_,p_,e,t);s.layers=this.layers,this.add(s);const o=new ls(d_,p_,e,t);o.layers=this.layers,this.add(o);const a=new ls(d_,p_,e,t);a.layers=this.layers,this.add(a);const l=new ls(d_,p_,e,t);l.layers=this.layers,this.add(l);const c=new ls(d_,p_,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===yc)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Pp)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=g,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(f,h,p),e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class rb extends cs{constructor(e,t,n,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:pu,super(e,t,n,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class e9 extends xd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new rb(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ur}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new MA(5,5,5),s=new jl({name:"CubemapFromEquirect",uniforms:fS(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Bs,blending:uu});s.uniforms.tEquirect.value=t;const o=new zi(r,s),a=t.minFilter;return t.minFilter===Ja&&(t.minFilter=Ur),new J7(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}let da=class extends Vi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const vge={type:"move"};class Pw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new da,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new da,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new da,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const b=t.getJointPose(g,n),T=this._getHandJoint(c,g);b!==null&&(T.matrix.fromArray(b.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=b.radius),T.visible=b!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),p=.02,m=.005;c.inputState.pinching&&h>p+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vge)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new da;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class AP{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Qt(e),this.density=t}clone(){return new AP(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class mP{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Qt(e),this.near=t,this.far=n}clone(){return new mP(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sb extends Vi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Io,this.environmentIntensity=1,this.environmentRotation=new Io,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ob{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=cS,this.updateRanges=[],this.version=0,this.uuid=th()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=th()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=th()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Kc=new he;class vc{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Kc.fromBufferAttribute(this,t),Kc.applyMatrix4(e),this.setXYZ(t,Kc.x,Kc.y,Kc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Kc.fromBufferAttribute(this,t),Kc.applyNormalMatrix(e),this.setXYZ(t,Kc.x,Kc.y,Kc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Kc.fromBufferAttribute(this,t),Kc.transformDirection(e),this.setXYZ(t,Kc.x,Kc.y,Kc.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=au(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ki(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Ki(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ki(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ki(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ki(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=au(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=au(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=au(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=au(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ki(t,this.array),n=Ki(n,this.array),r=Ki(r,this.array),s=Ki(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new qi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class gP extends ga{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Qt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let A_;const gE=new he,m_=new he,g_=new he,y_=new at,yE=new at,bte=new rn,zR=new he,vE=new he,HR=new he,Gq=new at,n6=new at,zq=new at;class _te extends Vi{constructor(e=new gP){if(super(),this.isSprite=!0,this.type="Sprite",A_===void 0){A_=new qn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ob(t,5);A_.setIndex([0,1,2,0,2,3]),A_.setAttribute("position",new vc(n,3,0,!1)),A_.setAttribute("uv",new vc(n,2,3,!1))}this.geometry=A_,this.material=e,this.center=new at(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),m_.setFromMatrixScale(this.matrixWorld),bte.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),g_.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&m_.multiplyScalar(-g_.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;VR(zR.set(-.5,-.5,0),g_,o,m_,r,s),VR(vE.set(.5,-.5,0),g_,o,m_,r,s),VR(HR.set(.5,.5,0),g_,o,m_,r,s),Gq.set(0,0),n6.set(1,0),zq.set(1,1);let a=e.ray.intersectTriangle(zR,vE,HR,!1,gE);if(a===null&&(VR(vE.set(-.5,.5,0),g_,o,m_,r,s),n6.set(0,1),a=e.ray.intersectTriangle(zR,HR,vE,!1,gE),a===null))return;const l=e.ray.origin.distanceTo(gE);l<e.near||l>e.far||t.push({distance:l,point:gE.clone(),uv:Xu.getInterpolation(gE,zR,vE,HR,Gq,n6,zq,new at),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function VR(i,e,t,n,r,s){y_.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(yE.x=s*y_.x-r*y_.y,yE.y=r*y_.x+s*y_.y):yE.copy(y_),i.copy(e),i.x+=yE.x,i.y+=yE.y,i.applyMatrix4(bte)}const qR=new he,Hq=new he;class Ste extends Vi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){qR.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(qR);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){qR.setFromMatrixPosition(e.matrixWorld),Hq.setFromMatrixPosition(this.matrixWorld);const n=qR.distanceTo(Hq)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Vq=new he,qq=new Ln,$q=new Ln,xge=new he,jq=new rn,$R=new he,i6=new Ua,Wq=new rn,r6=new c1;class yP extends zi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=bF,this.bindMatrix=new rn,this.bindMatrixInverse=new rn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ma),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,$R),this.boundingBox.expandByPoint($R)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ua),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,$R),this.boundingSphere.expandByPoint($R)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),i6.copy(this.boundingSphere),i6.applyMatrix4(r),e.ray.intersectsSphere(i6)!==!1&&(Wq.copy(r).invert(),r6.copy(e.ray).applyMatrix4(Wq),!(this.boundingBox!==null&&r6.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,r6)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ln,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===bF?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Xee?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;qq.fromBufferAttribute(r.attributes.skinIndex,e),$q.fromBufferAttribute(r.attributes.skinWeight,e),Vq.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=$q.getComponent(s);if(o!==0){const a=qq.getComponent(s);jq.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(xge.copy(Vq).applyMatrix4(jq),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class hS extends Vi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Rp extends cs{constructor(e=null,t=1,n=1,r,s,o,a,l,c=Ps,u=Ps,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Kq=new rn,bge=new rn;class eT{constructor(e=[],t=[]){this.uuid=th(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new rn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new rn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bge;Kq.multiplyMatrices(a,t[s]),Kq.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new eT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Rp(t,e,e,ho,Ns);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new hS),this.bones.push(o),this.boneInverses.push(new rn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class bd extends qi{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const v_=new rn,Yq=new rn,jR=[],Xq=new ma,_ge=new rn,xE=new zi,bE=new Ua;class t9 extends zi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new bd(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,_ge)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ma),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,v_),Xq.copy(e.boundingBox).applyMatrix4(v_),this.boundingBox.union(Xq)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ua),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,v_),bE.copy(e.boundingSphere).applyMatrix4(v_),this.boundingSphere.union(bE)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(xE.geometry=this.geometry,xE.material=this.material,xE.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bE.copy(this.boundingSphere),bE.applyMatrix4(n),e.ray.intersectsSphere(bE)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,v_),Yq.multiplyMatrices(n,v_),xE.matrixWorld=Yq,xE.raycast(e,jR);for(let o=0,a=jR.length;o<a;o++){const l=jR[o];l.instanceId=s,l.object=this,t.push(l)}jR.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new bd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Rp(new Float32Array(r*this.count),r,this.count,eb,Ns));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const s6=new he,Sge=new he,Tge=new Si;class rd{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=s6.subVectors(n,t).cross(Sge.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(s6),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Tge.getNormalMatrix(e),r=this.coplanarPoint(s6).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const J1=new Ua,WR=new he;class ab{constructor(e=new rd,t=new rd,n=new rd,r=new rd,s=new rd,o=new rd){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=yc){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],h=r[7],p=r[8],m=r[9],g=r[10],b=r[11],T=r[12],C=r[13],R=r[14],P=r[15];if(n[0].setComponents(l-s,h-c,b-p,P-T).normalize(),n[1].setComponents(l+s,h+c,b+p,P+T).normalize(),n[2].setComponents(l+o,h+u,b+m,P+C).normalize(),n[3].setComponents(l-o,h-u,b-m,P-C).normalize(),n[4].setComponents(l-a,h-f,b-g,P-R).normalize(),t===yc)n[5].setComponents(l+a,h+f,b+g,P+R).normalize();else if(t===Pp)n[5].setComponents(a,f,g,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),J1.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),J1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(J1)}intersectsSprite(e){return J1.center.set(0,0,0),J1.radius=.7071067811865476,J1.applyMatrix4(e.matrixWorld),this.intersectsSphere(J1)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(WR.x=r.normal.x>0?e.max.x:e.min.x,WR.y=r.normal.y>0?e.max.y:e.min.y,WR.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(WR)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function o6(i,e){return i-e}function Ege(i,e){return i.z-e.z}function wge(i,e){return e.z-i.z}class Mge{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const ku=new rn,Cge=new Qt(1,1,1),a6=new ab,KR=new ma,ev=new Ua,_E=new he,Qq=new he,Rge=new he,l6=new Mge,lc=new zi,YR=[];function Dge(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function tv(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class Tte extends zi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,r){super(new qn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Rp(t,e,e,ho,Ns);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Rp(t,e,e,l1,Gs);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Rp(t,e,e,ho,Ns);n.colorSpace=Oi.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(n*l),f=new qi(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new qi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ma);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ku),this.getBoundingBoxAt(s,KR).applyMatrix4(ku),e.union(KR)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ua);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ku),this.getBoundingSphereAt(s,ev).applyMatrix4(ku),e.union(ev)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(o6),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;ku.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Cge.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(o6),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in n.attributes){const f=t.getAttribute(u),h=n.getAttribute(u);Dge(f,h,l);const p=f.itemSize;for(let m=f.count,g=c;m<g;m++){const b=l+m;for(let T=0;T<p;T++)h.setComponent(b,T,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,c*p)}if(r){const u=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let h=0;h<o.count;h++)s.setX(u+h,l+o.getX(h));for(let h=o.count,p=f;h<p;h++)s.setX(u+h,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,a)=>a).sort((o,a)=>n[o].vertexStart-n[a].vertexStart),s=this.geometry;for(let o=0,a=n.length;o<a;o++){const l=r[o],c=n[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:f,reservedIndexCount:h}=c,p=s.index,m=p.array,g=e-f;for(let b=u;b<u+h;b++)m[b]=m[b]+g;p.array.copyWithin(t,u,u+h),p.addUpdateRange(t,h),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,h=s.attributes;for(const p in h){const m=h[p],{array:g,itemSize:b}=m;g.copyWithin(e*b,u*b,(u+f)*b),m.addUpdateRange(e*b,f*b)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new ma,o=n.index,a=n.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(_E.fromBufferAttribute(a,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Ua;this.getBoundingBoxAt(e,KR),KR.getCenter(s.center);const o=n.index,a=n.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let f=c;o&&(f=o.getX(f)),_E.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(_E))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(o6);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);tv(this._multiDrawCounts,r),tv(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),tv(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),tv(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),tv(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...n.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new qn,this._initializeGeometry(s));const o=this.geometry;s.index&&tv(s.index.array,o.index.array);for(const a in s.attributes)tv(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;lc.material=this.material,lc.geometry.index=o.index,lc.geometry.attributes=o.attributes,lc.geometry.boundingBox===null&&(lc.geometry.boundingBox=new ma),lc.geometry.boundingSphere===null&&(lc.geometry.boundingSphere=new Ua);for(let a=0,l=n.length;a<l;a++){if(!n[a].visible||!n[a].active)continue;const c=n[a].geometryIndex,u=r[c];lc.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,lc.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,lc.geometry.boundingBox),this.getBoundingSphereAt(c,lc.geometry.boundingSphere),lc.raycast(e,YR);for(let f=0,h=YR.length;f<h;f++){const p=YR[f];p.object=this,p.batchId=a,t.push(p)}YR.length=0}lc.material=null,lc.geometry.index=null,lc.geometry.attributes={},lc.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,m=p.image.data;h&&(ku.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),a6.setFromProjectionMatrix(ku,e.coordinateSystem));let g=0;if(this.sortObjects){ku.copy(this.matrixWorld).invert(),_E.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ku),Qq.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ku);for(let C=0,R=l.length;C<R;C++)if(l[C].visible&&l[C].active){const P=l[C].geometryIndex;this.getMatrixAt(C,ku),this.getBoundingSphereAt(P,ev).applyMatrix4(ku);let I=!1;if(h&&(I=!a6.intersectsSphere(ev)),!I){const F=f[P],k=Rge.subVectors(ev.center,_E).dot(Qq);l6.push(F.start,F.count,k,C)}}const b=l6.list,T=this.customSort;T===null?b.sort(s.transparent?wge:Ege):T.call(this,b,n);for(let C=0,R=b.length;C<R;C++){const P=b[C];c[g]=P.start*a,u[g]=P.count,m[g]=P.index,g++}l6.reset()}else for(let b=0,T=l.length;b<T;b++)if(l[b].visible&&l[b].active){const C=l[b].geometryIndex;let R=!1;if(h&&(this.getMatrixAt(b,ku),this.getBoundingSphereAt(C,ev).applyMatrix4(ku),R=!a6.intersectsSphere(ev)),!R){const P=f[C];c[g]=P.start*a,u[g]=P.count,m[g]=b,g++}}p.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class xa extends ga{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Qt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const FD=new he,UD=new he,Zq=new rn,SE=new c1,XR=new Ua,c6=new he,Jq=new he;class oh extends Vi{constructor(e=new qn,t=new xa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)FD.fromBufferAttribute(t,r-1),UD.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=FD.distanceTo(UD);e.setAttribute("lineDistance",new Cn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),XR.copy(n.boundingSphere),XR.applyMatrix4(r),XR.radius+=s,e.ray.intersectsSphere(XR)===!1)return;Zq.copy(r).invert(),SE.copy(e.ray).applyMatrix4(Zq);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=n.index,h=n.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=p,b=m-1;g<b;g+=c){const T=u.getX(g),C=u.getX(g+1),R=QR(this,e,SE,l,T,C,g);R&&t.push(R)}if(this.isLineLoop){const g=u.getX(m-1),b=u.getX(p),T=QR(this,e,SE,l,g,b,m-1);T&&t.push(T)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=p,b=m-1;g<b;g+=c){const T=QR(this,e,SE,l,g,g+1,g);T&&t.push(T)}if(this.isLineLoop){const g=QR(this,e,SE,l,m-1,p,m-1);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function QR(i,e,t,n,r,s,o){const a=i.geometry.attributes.position;if(FD.fromBufferAttribute(a,r),UD.fromBufferAttribute(a,s),t.distanceSqToSegment(FD,UD,c6,Jq)>n)return;c6.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(c6);if(!(c<e.near||c>e.far))return{distance:c,point:Jq.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const e$=new he,t$=new he;class dh extends oh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)e$.fromBufferAttribute(t,r),t$.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+e$.distanceTo(t$);e.setAttribute("lineDistance",new Cn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class n9 extends oh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class tT extends ga{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Qt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const n$=new rn,SF=new c1,ZR=new Ua,JR=new he;class vP extends Vi{constructor(e=new qn,t=new tT){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ZR.copy(n.boundingSphere),ZR.applyMatrix4(r),ZR.radius+=s,e.ray.intersectsSphere(ZR)===!1)return;n$.copy(r).invert(),SF.copy(e.ray).applyMatrix4(n$);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,f=n.attributes.position;if(c!==null){const h=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let m=h,g=p;m<g;m++){const b=c.getX(m);JR.fromBufferAttribute(f,b),i$(JR,b,l,r,e,t,this)}}else{const h=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let m=h,g=p;m<g;m++)JR.fromBufferAttribute(f,m),i$(JR,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function i$(i,e,t,n,r,s,o){const a=SF.distanceSqToPoint(i);if(a<t){const l=new he;SF.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class i9 extends cs{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ur,this.magFilter=s!==void 0?s:Ur,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lge extends i9{constructor(e,t,n,r,s,o,a,l){super({},e,t,n,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class r9 extends cs{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ps,this.minFilter=Ps,this.generateMipmaps=!1,this.needsUpdate=!0}}class xP extends cs{constructor(e,t,n,r,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,r,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Pge extends xP{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Sl,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Nge extends xP{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,pu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bge extends cs{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ld extends cs{constructor(e,t,n,r,s,o,a,l,c,u=pd){if(u!==pd&&u!==vd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===pd&&(n=Gs),n===void 0&&u===vd&&(n=yd),super(null,r,s,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ps,this.minFilter=l!==void 0?l:Ps,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ph{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const u=n[r],h=n[r+1]-u,p=(o-u)/h;return(r+p)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new at:new he);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new he,r=[],s=[],o=[],a=new he,l=new rn;for(let p=0;p<=e;p++){const m=p/e;r[p]=this.getTangentAt(m,new he)}s[0]=new he,o[0]=new he;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(ki(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,m))}o[p].crossVectors(r[p],s[p])}if(t===!0){let p=Math.acos(ki(s[0].dot(s[e]),-1,1));p/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],p*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bP extends ph{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new at){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*f+this.aX,c=h*f+p*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Ete extends bP{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function s9(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,p*=u,r(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const e5=new he,u6=new s9,f6=new s9,h6=new s9;class wte extends ph{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new he){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(e5.subVectors(r[0],r[1]).add(r[0]),c=e5);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(e5.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=e5),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(f),p),g=Math.pow(f.distanceToSquared(h),p),b=Math.pow(h.distanceToSquared(u),p);g<1e-4&&(g=1),m<1e-4&&(m=g),b<1e-4&&(b=g),u6.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,m,g,b),f6.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,m,g,b),h6.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,m,g,b)}else this.curveType==="catmullrom"&&(u6.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),f6.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),h6.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return n.set(u6.calc(l),f6.calc(l),h6.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new he().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r$(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function Ige(i,e){const t=1-i;return t*t*e}function Oge(i,e){return 2*(1-i)*i*e}function Fge(i,e){return i*i*e}function Nw(i,e,t,n){return Ige(i,e)+Oge(i,t)+Fge(i,n)}function Uge(i,e){const t=1-i;return t*t*t*e}function kge(i,e){const t=1-i;return 3*t*t*i*e}function Gge(i,e){return 3*(1-i)*i*i*e}function zge(i,e){return i*i*i*e}function Bw(i,e,t,n,r){return Uge(i,e)+kge(i,t)+Gge(i,n)+zge(i,r)}class o9 extends ph{constructor(e=new at,t=new at,n=new at,r=new at){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new at){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Bw(e,r.x,s.x,o.x,a.x),Bw(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class a9 extends ph{constructor(e=new he,t=new he,n=new he,r=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new he){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Bw(e,r.x,s.x,o.x,a.x),Bw(e,r.y,s.y,o.y,a.y),Bw(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class l9 extends ph{constructor(e=new at,t=new at){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new at){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new at){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mte extends ph{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c9 extends ph{constructor(e=new at,t=new at,n=new at){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new at){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Nw(e,r.x,s.x,o.x),Nw(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class u9 extends ph{constructor(e=new he,t=new he,n=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new he){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Nw(e,r.x,s.x,o.x),Nw(e,r.y,s.y,o.y),Nw(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f9 extends ph{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new at){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return n.set(r$(a,l.x,c.x,u.x,f.x),r$(a,l.y,c.y,u.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new at().fromArray(r))}return this}}var kD=Object.freeze({__proto__:null,ArcCurve:Ete,CatmullRomCurve3:wte,CubicBezierCurve:o9,CubicBezierCurve3:a9,EllipseCurve:bP,LineCurve:l9,LineCurve3:Mte,QuadraticBezierCurve:c9,QuadraticBezierCurve3:u9,SplineCurve:f9});class Cte extends ph{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new kD[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new kD[r.type]().fromJSON(r))}return this}}let uM=class extends Cte{constructor(e){super(),this.type="Path",this.currentPoint=new at,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new l9(this.currentPoint.clone(),new at(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new c9(this.currentPoint.clone(),new at(e,t),new at(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new o9(this.currentPoint.clone(),new at(e,t),new at(n,r),new at(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new f9(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new bP(e,t,n,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class y3 extends qn{constructor(e=[new at(0,-.5),new at(.5,0),new at(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=ki(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new he,h=new at,p=new he,m=new he,g=new he;let b=0,T=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:b=e[C+1].x-e[C].x,T=e[C+1].y-e[C].y,p.x=T*1,p.y=-b,p.z=T*0,g.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:b=e[C+1].x-e[C].x,T=e[C+1].y-e[C].y,p.x=T*1,p.y=-b,p.z=T*0,m.copy(p),p.x+=g.x,p.y+=g.y,p.z+=g.z,p.normalize(),l.push(p.x,p.y,p.z),g.copy(m)}for(let C=0;C<=t;C++){const R=n+C*u*r,P=Math.sin(R),I=Math.cos(R);for(let F=0;F<=e.length-1;F++){f.x=e[F].x*P,f.y=e[F].y,f.z=e[F].x*I,o.push(f.x,f.y,f.z),h.x=C/t,h.y=F/(e.length-1),a.push(h.x,h.y);const k=l[3*F+0]*P,q=l[3*F+1],H=l[3*F+0]*I;c.push(k,q,H)}}for(let C=0;C<t;C++)for(let R=0;R<e.length-1;R++){const P=R+C*e.length,I=P,F=P+e.length,k=P+e.length+1,q=P+1;s.push(I,F,q),s.push(k,q,F)}this.setIndex(s),this.setAttribute("position",new Cn(o,3)),this.setAttribute("uv",new Cn(a,2)),this.setAttribute("normal",new Cn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y3(e.points,e.segments,e.phiStart,e.phiLength)}}class _P extends y3{constructor(e=1,t=1,n=4,r=8){const s=new uM;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new _P(e.radius,e.length,e.capSegments,e.radialSegments)}}class nT extends qn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new he,u=new at;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const p=n+f/t*r;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Cn(o,3)),this.setAttribute("normal",new Cn(a,3)),this.setAttribute("uv",new Cn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lb extends qn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],h=[],p=[];let m=0;const g=[],b=n/2;let T=0;C(),o===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(u),this.setAttribute("position",new Cn(f,3)),this.setAttribute("normal",new Cn(h,3)),this.setAttribute("uv",new Cn(p,2));function C(){const P=new he,I=new he;let F=0;const k=(t-e)/n;for(let q=0;q<=s;q++){const H=[],O=q/s,$=O*(t-e)+e;for(let ee=0;ee<=r;ee++){const Y=ee/r,oe=Y*l+a,re=Math.sin(oe),Q=Math.cos(oe);I.x=$*re,I.y=-O*n+b,I.z=$*Q,f.push(I.x,I.y,I.z),P.set(re,k,Q).normalize(),h.push(P.x,P.y,P.z),p.push(Y,1-O),H.push(m++)}g.push(H)}for(let q=0;q<r;q++)for(let H=0;H<s;H++){const O=g[H][q],$=g[H+1][q],ee=g[H+1][q+1],Y=g[H][q+1];(e>0||H!==0)&&(u.push(O,$,Y),F+=3),(t>0||H!==s-1)&&(u.push($,ee,Y),F+=3)}c.addGroup(T,F,0),T+=F}function R(P){const I=m,F=new at,k=new he;let q=0;const H=P===!0?e:t,O=P===!0?1:-1;for(let ee=1;ee<=r;ee++)f.push(0,b*O,0),h.push(0,O,0),p.push(.5,.5),m++;const $=m;for(let ee=0;ee<=r;ee++){const oe=ee/r*l+a,re=Math.cos(oe),Q=Math.sin(oe);k.x=H*Q,k.y=b*O,k.z=H*re,f.push(k.x,k.y,k.z),h.push(0,O,0),F.x=re*.5+.5,F.y=Q*.5*O+.5,p.push(F.x,F.y),m++}for(let ee=0;ee<r;ee++){const Y=I+ee,oe=$+ee;P===!0?u.push(oe,oe+1,Y):u.push(oe+1,oe,Y),q+=3}c.addGroup(T,q,P===!0?1:2),T+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class SP extends lb{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new SP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class u1 extends qn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),c(n),u(),this.setAttribute("position",new Cn(s,3)),this.setAttribute("normal",new Cn(s.slice(),3)),this.setAttribute("uv",new Cn(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(C){const R=new he,P=new he,I=new he;for(let F=0;F<t.length;F+=3)p(t[F+0],R),p(t[F+1],P),p(t[F+2],I),l(R,P,I,C)}function l(C,R,P,I){const F=I+1,k=[];for(let q=0;q<=F;q++){k[q]=[];const H=C.clone().lerp(P,q/F),O=R.clone().lerp(P,q/F),$=F-q;for(let ee=0;ee<=$;ee++)ee===0&&q===F?k[q][ee]=H:k[q][ee]=H.clone().lerp(O,ee/$)}for(let q=0;q<F;q++)for(let H=0;H<2*(F-q)-1;H++){const O=Math.floor(H/2);H%2===0?(h(k[q][O+1]),h(k[q+1][O]),h(k[q][O])):(h(k[q][O+1]),h(k[q+1][O+1]),h(k[q+1][O]))}}function c(C){const R=new he;for(let P=0;P<s.length;P+=3)R.x=s[P+0],R.y=s[P+1],R.z=s[P+2],R.normalize().multiplyScalar(C),s[P+0]=R.x,s[P+1]=R.y,s[P+2]=R.z}function u(){const C=new he;for(let R=0;R<s.length;R+=3){C.x=s[R+0],C.y=s[R+1],C.z=s[R+2];const P=b(C)/2/Math.PI+.5,I=T(C)/Math.PI+.5;o.push(P,1-I)}m(),f()}function f(){for(let C=0;C<o.length;C+=6){const R=o[C+0],P=o[C+2],I=o[C+4],F=Math.max(R,P,I),k=Math.min(R,P,I);F>.9&&k<.1&&(R<.2&&(o[C+0]+=1),P<.2&&(o[C+2]+=1),I<.2&&(o[C+4]+=1))}}function h(C){s.push(C.x,C.y,C.z)}function p(C,R){const P=C*3;R.x=e[P+0],R.y=e[P+1],R.z=e[P+2]}function m(){const C=new he,R=new he,P=new he,I=new he,F=new at,k=new at,q=new at;for(let H=0,O=0;H<s.length;H+=9,O+=6){C.set(s[H+0],s[H+1],s[H+2]),R.set(s[H+3],s[H+4],s[H+5]),P.set(s[H+6],s[H+7],s[H+8]),F.set(o[O+0],o[O+1]),k.set(o[O+2],o[O+3]),q.set(o[O+4],o[O+5]),I.copy(C).add(R).add(P).divideScalar(3);const $=b(I);g(F,O+0,C,$),g(k,O+2,R,$),g(q,O+4,P,$)}}function g(C,R,P,I){I<0&&C.x===1&&(o[R]=C.x-1),P.x===0&&P.z===0&&(o[R]=I/2/Math.PI+.5)}function b(C){return Math.atan2(C.z,-C.x)}function T(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u1(e.vertices,e.indices,e.radius,e.details)}}class TP extends u1{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TP(e.radius,e.detail)}}const t5=new he,n5=new he,d6=new he,i5=new Xu;class Rte extends qn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(tx*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},p=[];for(let m=0;m<l;m+=3){o?(c[0]=o.getX(m),c[1]=o.getX(m+1),c[2]=o.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:g,b,c:T}=i5;if(g.fromBufferAttribute(a,c[0]),b.fromBufferAttribute(a,c[1]),T.fromBufferAttribute(a,c[2]),i5.getNormal(d6),f[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,f[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let C=0;C<3;C++){const R=(C+1)%3,P=f[C],I=f[R],F=i5[u[C]],k=i5[u[R]],q=`${P}_${I}`,H=`${I}_${P}`;H in h&&h[H]?(d6.dot(h[H].normal)<=s&&(p.push(F.x,F.y,F.z),p.push(k.x,k.y,k.z)),h[H]=null):q in h||(h[q]={index0:c[C],index1:c[R],normal:d6.clone()})}}for(const m in h)if(h[m]){const{index0:g,index1:b}=h[m];t5.fromBufferAttribute(a,g),n5.fromBufferAttribute(a,b),p.push(t5.x,t5.y,t5.z),p.push(n5.x,n5.y,n5.z)}this.setAttribute("position",new Cn(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class nx extends uM{constructor(e){super(e),this.uuid=th(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new uM().fromJSON(r))}return this}}const Hge={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=Dte(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,p;if(n&&(s=Wge(i,e,s,t)),i.length>80*t){a=c=i[0],l=u=i[1];for(let m=t;m<r;m+=t)f=i[m],h=i[m+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return fM(s,o,t,a,l,p,0),o}};function Dte(i,e,t,n,r){let s,o;if(r===rye(i,e,t,n)>0)for(s=e;s<t;s+=n)o=s$(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=s$(s,i[s],i[s+1],o);return o&&EP(o,o.next)&&(dM(o),o=o.next),o}function Gx(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(EP(t,t.next)||Lo(t.prev,t,t.next)===0)){if(dM(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function fM(i,e,t,n,r,s,o){if(!i)return;!o&&s&&Zge(i,n,r,s);let a=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?qge(i,n,r,s):Vge(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),dM(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=$ge(Gx(i),e,t),fM(i,e,t,n,r,s,2)):o===2&&jge(i,e,t,n,r,s):fM(Gx(i),e,t,n,r,s,1);break}}}function Vge(i){const e=i.prev,t=i,n=i.next;if(Lo(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,h=r>s?r>o?r:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c;let m=n.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=f&&m.y<=p&&u2(r,a,s,l,o,c,m.x,m.y)&&Lo(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function qge(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Lo(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,h=o.y,p=a<l?a<c?a:c:l<c?l:c,m=u<f?u<h?u:h:f<h?f:h,g=a>l?a>c?a:c:l>c?l:c,b=u>f?u>h?u:h:f>h?f:h,T=TF(p,m,e,t,n),C=TF(g,b,e,t,n);let R=i.prevZ,P=i.nextZ;for(;R&&R.z>=T&&P&&P.z<=C;){if(R.x>=p&&R.x<=g&&R.y>=m&&R.y<=b&&R!==r&&R!==o&&u2(a,u,l,f,c,h,R.x,R.y)&&Lo(R.prev,R,R.next)>=0||(R=R.prevZ,P.x>=p&&P.x<=g&&P.y>=m&&P.y<=b&&P!==r&&P!==o&&u2(a,u,l,f,c,h,P.x,P.y)&&Lo(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;R&&R.z>=T;){if(R.x>=p&&R.x<=g&&R.y>=m&&R.y<=b&&R!==r&&R!==o&&u2(a,u,l,f,c,h,R.x,R.y)&&Lo(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;P&&P.z<=C;){if(P.x>=p&&P.x<=g&&P.y>=m&&P.y<=b&&P!==r&&P!==o&&u2(a,u,l,f,c,h,P.x,P.y)&&Lo(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function $ge(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!EP(r,s)&&Lte(r,n,n.next,s)&&hM(r,s)&&hM(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),dM(n),dM(n.next),n=i=s),n=n.next}while(n!==i);return Gx(n)}function jge(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&tye(o,a)){let l=Pte(o,a);o=Gx(o,o.next),l=Gx(l,l.next),fM(o,e,t,n,r,s,0),fM(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function Wge(i,e,t,n){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=Dte(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(eye(c));for(r.sort(Kge),s=0;s<r.length;s++)t=Yge(r[s],t);return t}function Kge(i,e){return i.x-e.x}function Yge(i,e){const t=Xge(i,e);if(!t)return e;const n=Pte(t,i);return Gx(n,n.next),Gx(t,t.next)}function Xge(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>n&&(n=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&u2(o<c?s:n,o,l,c,o<c?n:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),hM(t,i)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&Qge(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function Qge(i,e){return Lo(i.prev,i,e.prev)<0&&Lo(e.next,i,i.next)<0}function Zge(i,e,t,n){let r=i;do r.z===0&&(r.z=TF(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,Jge(r)}function Jge(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1);return i}function TF(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function eye(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function u2(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function tye(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!nye(i,e)&&(hM(i,e)&&hM(e,i)&&iye(i,e)&&(Lo(i.prev,i,e.prev)||Lo(i,e.prev,e))||EP(i,e)&&Lo(i.prev,i,i.next)>0&&Lo(e.prev,e,e.next)>0)}function Lo(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function EP(i,e){return i.x===e.x&&i.y===e.y}function Lte(i,e,t,n){const r=s5(Lo(i,e,t)),s=s5(Lo(i,e,n)),o=s5(Lo(t,n,i)),a=s5(Lo(t,n,e));return!!(r!==s&&o!==a||r===0&&r5(i,t,e)||s===0&&r5(i,n,e)||o===0&&r5(t,i,n)||a===0&&r5(t,e,n))}function r5(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function s5(i){return i>0?1:i<0?-1:0}function nye(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Lte(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function hM(i,e){return Lo(i.prev,i,i.next)<0?Lo(i,e,i.next)>=0&&Lo(i,i.prev,e)>=0:Lo(i,e,i.prev)<0||Lo(i,i.next,e)<0}function iye(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Pte(i,e){const t=new EF(i.i,i.x,i.y),n=new EF(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function s$(i,e,t,n){const r=new EF(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function dM(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function EF(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rye(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class Y0{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return Y0.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];o$(e),a$(n,e);let o=e.length;t.forEach(o$);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,a$(n,t[l]);const a=Hge.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function o$(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function a$(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class v3 extends qn{constructor(e=new nx([new at(.5,.5),new at(-.5,.5),new at(-.5,-.5),new at(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Cn(r,3)),this.setAttribute("uv",new Cn(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:p-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:sye;let R,P=!1,I,F,k,q;T&&(R=T.getSpacedPoints(u),P=!0,h=!1,I=T.computeFrenetFrames(u,!1),F=new he,k=new he,q=new he),h||(b=0,p=0,m=0,g=0);const H=a.extractPoints(c);let O=H.shape;const $=H.holes;if(!Y0.isClockWise(O)){O=O.reverse();for(let mt=0,ut=$.length;mt<ut;mt++){const we=$[mt];Y0.isClockWise(we)&&($[mt]=we.reverse())}}const Y=Y0.triangulateShape(O,$),oe=O;for(let mt=0,ut=$.length;mt<ut;mt++){const we=$[mt];O=O.concat(we)}function re(mt,ut,we){return ut||console.error("THREE.ExtrudeGeometry: vec does not exist"),mt.clone().addScaledVector(ut,we)}const Q=O.length,se=Y.length;function le(mt,ut,we){let Jt,ft,Dt;const Rt=mt.x-ut.x,yn=mt.y-ut.y,Gt=we.x-mt.x,Se=we.y-mt.y,fe=Rt*Rt+yn*yn,Pe=Rt*Se-yn*Gt;if(Math.abs(Pe)>Number.EPSILON){const Ve=Math.sqrt(fe),Tt=Math.sqrt(Gt*Gt+Se*Se),bt=ut.x-yn/Ve,sn=ut.y+Rt/Ve,on=we.x-Se/Tt,mn=we.y+Gt/Tt,ai=((on-bt)*Se-(mn-sn)*Gt)/(Rt*Se-yn*Gt);Jt=bt+Rt*ai-mt.x,ft=sn+yn*ai-mt.y;const Vt=Jt*Jt+ft*ft;if(Vt<=2)return new at(Jt,ft);Dt=Math.sqrt(Vt/2)}else{let Ve=!1;Rt>Number.EPSILON?Gt>Number.EPSILON&&(Ve=!0):Rt<-Number.EPSILON?Gt<-Number.EPSILON&&(Ve=!0):Math.sign(yn)===Math.sign(Se)&&(Ve=!0),Ve?(Jt=-yn,ft=Rt,Dt=Math.sqrt(fe)):(Jt=Rt,ft=yn,Dt=Math.sqrt(fe/2))}return new at(Jt/Dt,ft/Dt)}const de=[];for(let mt=0,ut=oe.length,we=ut-1,Jt=mt+1;mt<ut;mt++,we++,Jt++)we===ut&&(we=0),Jt===ut&&(Jt=0),de[mt]=le(oe[mt],oe[we],oe[Jt]);const ie=[];let ge,Ce=de.concat();for(let mt=0,ut=$.length;mt<ut;mt++){const we=$[mt];ge=[];for(let Jt=0,ft=we.length,Dt=ft-1,Rt=Jt+1;Jt<ft;Jt++,Dt++,Rt++)Dt===ft&&(Dt=0),Rt===ft&&(Rt=0),ge[Jt]=le(we[Jt],we[Dt],we[Rt]);ie.push(ge),Ce=Ce.concat(ge)}for(let mt=0;mt<b;mt++){const ut=mt/b,we=p*Math.cos(ut*Math.PI/2),Jt=m*Math.sin(ut*Math.PI/2)+g;for(let ft=0,Dt=oe.length;ft<Dt;ft++){const Rt=re(oe[ft],de[ft],Jt);it(Rt.x,Rt.y,-we)}for(let ft=0,Dt=$.length;ft<Dt;ft++){const Rt=$[ft];ge=ie[ft];for(let yn=0,Gt=Rt.length;yn<Gt;yn++){const Se=re(Rt[yn],ge[yn],Jt);it(Se.x,Se.y,-we)}}}const Ie=m+g;for(let mt=0;mt<Q;mt++){const ut=h?re(O[mt],Ce[mt],Ie):O[mt];P?(k.copy(I.normals[0]).multiplyScalar(ut.x),F.copy(I.binormals[0]).multiplyScalar(ut.y),q.copy(R[0]).add(k).add(F),it(q.x,q.y,q.z)):it(ut.x,ut.y,0)}for(let mt=1;mt<=u;mt++)for(let ut=0;ut<Q;ut++){const we=h?re(O[ut],Ce[ut],Ie):O[ut];P?(k.copy(I.normals[mt]).multiplyScalar(we.x),F.copy(I.binormals[mt]).multiplyScalar(we.y),q.copy(R[mt]).add(k).add(F),it(q.x,q.y,q.z)):it(we.x,we.y,f/u*mt)}for(let mt=b-1;mt>=0;mt--){const ut=mt/b,we=p*Math.cos(ut*Math.PI/2),Jt=m*Math.sin(ut*Math.PI/2)+g;for(let ft=0,Dt=oe.length;ft<Dt;ft++){const Rt=re(oe[ft],de[ft],Jt);it(Rt.x,Rt.y,f+we)}for(let ft=0,Dt=$.length;ft<Dt;ft++){const Rt=$[ft];ge=ie[ft];for(let yn=0,Gt=Rt.length;yn<Gt;yn++){const Se=re(Rt[yn],ge[yn],Jt);P?it(Se.x,Se.y+R[u-1].y,R[u-1].x+we):it(Se.x,Se.y,f+we)}}}Ee(),Be();function Ee(){const mt=r.length/3;if(h){let ut=0,we=Q*ut;for(let Jt=0;Jt<se;Jt++){const ft=Y[Jt];et(ft[2]+we,ft[1]+we,ft[0]+we)}ut=u+b*2,we=Q*ut;for(let Jt=0;Jt<se;Jt++){const ft=Y[Jt];et(ft[0]+we,ft[1]+we,ft[2]+we)}}else{for(let ut=0;ut<se;ut++){const we=Y[ut];et(we[2],we[1],we[0])}for(let ut=0;ut<se;ut++){const we=Y[ut];et(we[0]+Q*u,we[1]+Q*u,we[2]+Q*u)}}n.addGroup(mt,r.length/3-mt,0)}function Be(){const mt=r.length/3;let ut=0;qe(oe,ut),ut+=oe.length;for(let we=0,Jt=$.length;we<Jt;we++){const ft=$[we];qe(ft,ut),ut+=ft.length}n.addGroup(mt,r.length/3-mt,1)}function qe(mt,ut){let we=mt.length;for(;--we>=0;){const Jt=we;let ft=we-1;ft<0&&(ft=mt.length-1);for(let Dt=0,Rt=u+b*2;Dt<Rt;Dt++){const yn=Q*Dt,Gt=Q*(Dt+1),Se=ut+Jt+yn,fe=ut+ft+yn,Pe=ut+ft+Gt,Ve=ut+Jt+Gt;Ht(Se,fe,Pe,Ve)}}}function it(mt,ut,we){l.push(mt),l.push(ut),l.push(we)}function et(mt,ut,we){_t(mt),_t(ut),_t(we);const Jt=r.length/3,ft=C.generateTopUV(n,r,Jt-3,Jt-2,Jt-1);$t(ft[0]),$t(ft[1]),$t(ft[2])}function Ht(mt,ut,we,Jt){_t(mt),_t(ut),_t(Jt),_t(ut),_t(we),_t(Jt);const ft=r.length/3,Dt=C.generateSideWallUV(n,r,ft-6,ft-3,ft-2,ft-1);$t(Dt[0]),$t(Dt[1]),$t(Dt[3]),$t(Dt[1]),$t(Dt[2]),$t(Dt[3])}function _t(mt){r.push(l[mt*3+0]),r.push(l[mt*3+1]),r.push(l[mt*3+2])}function $t(mt){s.push(mt.x),s.push(mt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return oye(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new kD[r.type]().fromJSON(r)),new v3(n,e.options)}}const sye={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],c=e[r*3],u=e[r*3+1];return[new at(s,o),new at(a,l),new at(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],f=e[n*3+2],h=e[r*3],p=e[r*3+1],m=e[r*3+2],g=e[s*3],b=e[s*3+1],T=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new at(o,1-l),new at(c,1-f),new at(h,1-m),new at(g,1-T)]:[new at(a,1-l),new at(u,1-f),new at(p,1-m),new at(b,1-T)]}};function oye(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class wP extends u1{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wP(e.radius,e.detail)}}class x3 extends u1{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x3(e.radius,e.detail)}}class iT extends qn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,f=e/a,h=t/l,p=[],m=[],g=[],b=[];for(let T=0;T<u;T++){const C=T*h-o;for(let R=0;R<c;R++){const P=R*f-s;m.push(P,-C,0),g.push(0,0,1),b.push(R/a),b.push(1-T/l)}}for(let T=0;T<l;T++)for(let C=0;C<a;C++){const R=C+c*T,P=C+c*(T+1),I=C+1+c*(T+1),F=C+1+c*T;p.push(R,P,F),p.push(P,I,F)}this.setIndex(p),this.setAttribute("position",new Cn(m,3)),this.setAttribute("normal",new Cn(g,3)),this.setAttribute("uv",new Cn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iT(e.width,e.height,e.widthSegments,e.heightSegments)}}class MP extends qn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const h=(t-e)/r,p=new he,m=new at;for(let g=0;g<=r;g++){for(let b=0;b<=n;b++){const T=s+b/n*o;p.x=f*Math.cos(T),p.y=f*Math.sin(T),l.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(p.x/t+1)/2,m.y=(p.y/t+1)/2,u.push(m.x,m.y)}f+=h}for(let g=0;g<r;g++){const b=g*(n+1);for(let T=0;T<n;T++){const C=T+b,R=C,P=C+n+1,I=C+n+2,F=C+1;a.push(R,P,F),a.push(P,I,F)}}this.setIndex(a),this.setAttribute("position",new Cn(l,3)),this.setAttribute("normal",new Cn(c,3)),this.setAttribute("uv",new Cn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MP(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class CP extends qn{constructor(e=new nx([new at(0,.5),new at(-.5,-.5),new at(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Cn(r,3)),this.setAttribute("normal",new Cn(s,3)),this.setAttribute("uv",new Cn(o,2));function c(u){const f=r.length/3,h=u.extractPoints(t);let p=h.shape;const m=h.holes;Y0.isClockWise(p)===!1&&(p=p.reverse());for(let b=0,T=m.length;b<T;b++){const C=m[b];Y0.isClockWise(C)===!0&&(m[b]=C.reverse())}const g=Y0.triangulateShape(p,m);for(let b=0,T=m.length;b<T;b++){const C=m[b];p=p.concat(C)}for(let b=0,T=p.length;b<T;b++){const C=p[b];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let b=0,T=g.length;b<T;b++){const C=g[b],R=C[0]+f,P=C[1]+f,I=C[2]+f;n.push(R,P,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return aye(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new CP(n,e.curveSegments)}}function aye(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Ah extends qn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new he,h=new he,p=[],m=[],g=[],b=[];for(let T=0;T<=n;T++){const C=[],R=T/n;let P=0;T===0&&o===0?P=.5/t:T===n&&l===Math.PI&&(P=-.5/t);for(let I=0;I<=t;I++){const F=I/t;f.x=-e*Math.cos(r+F*s)*Math.sin(o+R*a),f.y=e*Math.cos(o+R*a),f.z=e*Math.sin(r+F*s)*Math.sin(o+R*a),m.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),b.push(F+P,1-R),C.push(c++)}u.push(C)}for(let T=0;T<n;T++)for(let C=0;C<t;C++){const R=u[T][C+1],P=u[T][C],I=u[T+1][C],F=u[T+1][C+1];(T!==0||o>0)&&p.push(R,P,F),(T!==n-1||l<Math.PI)&&p.push(P,I,F)}this.setIndex(p),this.setAttribute("position",new Cn(m,3)),this.setAttribute("normal",new Cn(g,3)),this.setAttribute("uv",new Cn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class RP extends u1{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new RP(e.radius,e.detail)}}class DP extends qn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new he,f=new he,h=new he;for(let p=0;p<=n;p++)for(let m=0;m<=r;m++){const g=m/r*s,b=p/n*Math.PI*2;f.x=(e+t*Math.cos(b))*Math.cos(g),f.y=(e+t*Math.cos(b))*Math.sin(g),f.z=t*Math.sin(b),a.push(f.x,f.y,f.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/r),c.push(p/n)}for(let p=1;p<=n;p++)for(let m=1;m<=r;m++){const g=(r+1)*p+m-1,b=(r+1)*(p-1)+m-1,T=(r+1)*(p-1)+m,C=(r+1)*p+m;o.push(g,b,C),o.push(b,T,C)}this.setIndex(o),this.setAttribute("position",new Cn(a,3)),this.setAttribute("normal",new Cn(l,3)),this.setAttribute("uv",new Cn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DP(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class LP extends qn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new he,h=new he,p=new he,m=new he,g=new he,b=new he,T=new he;for(let R=0;R<=n;++R){const P=R/n*s*Math.PI*2;C(P,s,o,e,p),C(P+.01,s,o,e,m),b.subVectors(m,p),T.addVectors(m,p),g.crossVectors(b,T),T.crossVectors(g,b),g.normalize(),T.normalize();for(let I=0;I<=r;++I){const F=I/r*Math.PI*2,k=-t*Math.cos(F),q=t*Math.sin(F);f.x=p.x+(k*T.x+q*g.x),f.y=p.y+(k*T.y+q*g.y),f.z=p.z+(k*T.z+q*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,p).normalize(),c.push(h.x,h.y,h.z),u.push(R/n),u.push(I/r)}}for(let R=1;R<=n;R++)for(let P=1;P<=r;P++){const I=(r+1)*(R-1)+(P-1),F=(r+1)*R+(P-1),k=(r+1)*R+P,q=(r+1)*(R-1)+P;a.push(I,F,q),a.push(F,k,q)}this.setIndex(a),this.setAttribute("position",new Cn(l,3)),this.setAttribute("normal",new Cn(c,3)),this.setAttribute("uv",new Cn(u,2));function C(R,P,I,F,k){const q=Math.cos(R),H=Math.sin(R),O=I/P*R,$=Math.cos(O);k.x=F*(2+$)*.5*q,k.y=F*(2+$)*H*.5,k.z=F*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LP(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class b3 extends qn{constructor(e=new u9(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new he,l=new he,c=new at;let u=new he;const f=[],h=[],p=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Cn(f,3)),this.setAttribute("normal",new Cn(h,3)),this.setAttribute("uv",new Cn(p,2));function g(){for(let R=0;R<t;R++)b(R);b(s===!1?t:0),C(),T()}function b(R){u=e.getPointAt(R/t,u);const P=o.normals[R],I=o.binormals[R];for(let F=0;F<=r;F++){const k=F/r*Math.PI*2,q=Math.sin(k),H=-Math.cos(k);l.x=H*P.x+q*I.x,l.y=H*P.y+q*I.y,l.z=H*P.z+q*I.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+n*l.x,a.y=u.y+n*l.y,a.z=u.z+n*l.z,f.push(a.x,a.y,a.z)}}function T(){for(let R=1;R<=t;R++)for(let P=1;P<=r;P++){const I=(r+1)*(R-1)+(P-1),F=(r+1)*R+(P-1),k=(r+1)*R+P,q=(r+1)*(R-1)+P;m.push(I,F,q),m.push(F,k,q)}}function C(){for(let R=0;R<=t;R++)for(let P=0;P<=r;P++)c.x=R/t,c.y=P/r,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new b3(new kD[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class h9 extends qn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new he,s=new he;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,p=f.count;for(let m=h,g=h+p;m<g;m+=3)for(let b=0;b<3;b++){const T=a.getX(m+b),C=a.getX(m+(b+1)%3);r.fromBufferAttribute(o,T),s.fromBufferAttribute(o,C),l$(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),l$(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Cn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function l$(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var c$=Object.freeze({__proto__:null,BoxGeometry:MA,CapsuleGeometry:_P,CircleGeometry:nT,ConeGeometry:SP,CylinderGeometry:lb,DodecahedronGeometry:TP,EdgesGeometry:Rte,ExtrudeGeometry:v3,IcosahedronGeometry:wP,LatheGeometry:y3,OctahedronGeometry:x3,PlaneGeometry:iT,PolyhedronGeometry:u1,RingGeometry:MP,ShapeGeometry:CP,SphereGeometry:Ah,TetrahedronGeometry:RP,TorusGeometry:DP,TorusKnotGeometry:LP,TubeGeometry:b3,WireframeGeometry:h9});class d9 extends ga{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Qt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Nte extends jl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rT extends ga{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Qt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mh extends rT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new at(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ki(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Qt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Qt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Qt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ix extends ga{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Qt(16777215),this.specular=new Qt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=XS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class p9 extends ga{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Qt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class A9 extends ga{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Pd extends ga{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Io,this.combine=XS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m9 extends ga{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class g9 extends ga{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class y9 extends ga{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Qt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cA,this.normalScale=new at(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class v9 extends xa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qv(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function Bte(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Ite(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function wF(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function x9(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function lye(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let p=0;p<c.times.length;++p){const m=c.times[p]*r;if(!(m<t||m>=n)){f.push(c.times[p]);for(let g=0;g<u;++g)h.push(c.values[p*u+g])}}f.length!==0&&(c.times=qv(f,c.times.constructor),c.values=qv(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function cye(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(T){return T.name===a.name&&T.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const m=a.times.length-1;let g;if(s<=a.times[0]){const T=u,C=f-u;g=a.values.slice(T,C)}else if(s>=a.times[m]){const T=m*f+u,C=T+f-u;g=a.values.slice(T,C)}else{const T=a.createInterpolant(),C=u,R=f-u;T.evaluate(s),g=T.resultBuffer.slice(C,R)}l==="quaternion"&&new Br().fromArray(g).normalize().conjugate().toArray(g);const b=c.times.length;for(let T=0;T<b;++T){const C=T*p+h;if(l==="quaternion")Br.multiplyQuaternionsFlat(c.values,C,g,0,c.values,C);else{const R=p-h*2;for(let P=0;P<R;++P)c.values[C+P]-=g[P]}}}return i.blendMode=j7,i}const uye={convertArray:qv,isTypedArray:Bte,getKeyframeOrder:Ite,sortedArray:wF,flattenJSON:x9,subclip:lye,makeClipAdditive:cye};class sT{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ote extends sT{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gv,endingEnd:Gv}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case zv:s=e,a=2*t-n;break;case aM:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case zv:o=e,l=2*n-t;break;case aM:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,p=this._weightNext,m=(n-t)/(r-t),g=m*m,b=g*m,T=-h*b+2*h*g-h*m,C=(1+h)*b+(-1.5-2*h)*g+(-.5+h)*m+1,R=(-1-p)*b+(1.5+p)*g+.5*m,P=p*b-p*g;for(let I=0;I!==a;++I)s[I]=T*o[u+I]+C*o[c+I]+R*o[l+I]+P*o[f+I];return s}}class b9 extends sT{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(r-t),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class Fte extends sT{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Op{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qv(t,this.TimeBufferType),this.values=qv(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:qv(e.times,Array),values:qv(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Fte(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new b9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ote(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case oS:t=this.InterpolantFactoryMethodDiscrete;break;case aS:t=this.InterpolantFactoryMethodLinear;break;case Y4:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return oS;case this.InterpolantFactoryMethodLinear:return aS;case this.InterpolantFactoryMethodSmooth:return Y4}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&Bte(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Y4,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*n,h=f-n,p=f+n;for(let m=0;m!==n;++m){const g=t[f+m];if(g!==t[h+m]||g!==t[p+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*n,h=o*n;for(let p=0;p!==n;++p)t[h+p]=t[f+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Op.prototype.TimeBufferType=Float32Array;Op.prototype.ValueBufferType=Float32Array;Op.prototype.DefaultInterpolation=aS;class cb extends Op{constructor(e,t,n){super(e,t,n)}}cb.prototype.ValueTypeName="bool";cb.prototype.ValueBufferType=Array;cb.prototype.DefaultInterpolation=oS;cb.prototype.InterpolantFactoryMethodLinear=void 0;cb.prototype.InterpolantFactoryMethodSmooth=void 0;class _9 extends Op{}_9.prototype.ValueTypeName="color";class Xy extends Op{}Xy.prototype.ValueTypeName="number";class Ute extends sT{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Br.slerpFlat(s,0,o,c-a,o,c,l);return s}}class tg extends Op{InterpolantFactoryMethodLinear(e){return new Ute(this.times,this.values,this.getValueSize(),e)}}tg.prototype.ValueTypeName="quaternion";tg.prototype.InterpolantFactoryMethodSmooth=void 0;class ub extends Op{constructor(e,t,n){super(e,t,n)}}ub.prototype.ValueTypeName="string";ub.prototype.ValueBufferType=Array;ub.prototype.DefaultInterpolation=oS;ub.prototype.InterpolantFactoryMethodLinear=void 0;ub.prototype.InterpolantFactoryMethodSmooth=void 0;class ng extends Op{}ng.prototype.ValueTypeName="vector";class Qy{constructor(e="",t=-1,n=[],r=sP){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=th(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(hye(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Op.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Ite(l);l=wF(l,1,u),c=wF(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Xy(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(f,h,p,m,g){if(p.length!==0){const b=[],T=[];x9(p,b,T,m),b.length!==0&&g.push(new f(h,b,T))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let g=0;g<h[m].morphTargets.length;g++)p[h[m].morphTargets[g]]=-1;for(const g in p){const b=[],T=[];for(let C=0;C!==h[m].morphTargets.length;++C){const R=h[m];b.push(R.time),T.push(R.morphTarget===g?1:0)}r.push(new Xy(".morphTargetInfluence["+g+"]",b,T))}l=p.length*o}else{const p=".bones["+t[f].name+"]";n(ng,p+".position",h,"pos",r),n(tg,p+".quaternion",h,"rot",r),n(ng,p+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fye(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xy;case"vector":case"vector2":case"vector3":case"vector4":return ng;case"color":return _9;case"quaternion":return tg;case"bool":case"boolean":return cb;case"string":return ub}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function hye(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fye(i.type);if(i.times===void 0){const t=[],n=[];x9(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Om={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class S9{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const p=c[f],m=c[f+1];if(p.global&&(p.lastIndex=0),p.test(u))return m}return null}}}const f2=new S9;class Wl{constructor(e){this.manager=e!==void 0?e:f2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Am={};class dye extends Error{constructor(e,t){super(e),this.response=t}}class hf extends Wl{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Om.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Am[e]!==void 0){Am[e].push({onLoad:t,onProgress:n,onError:r});return}Am[e]=[],Am[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Am[e],f=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=h?parseInt(h):0,m=p!==0;let g=0;const b=new ReadableStream({start(T){C();function C(){f.read().then(({done:R,value:P})=>{if(R)T.close();else{g+=P.byteLength;const I=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:p});for(let F=0,k=u.length;F<k;F++){const q=u[F];q.onProgress&&q.onProgress(I)}T.enqueue(P),C()}},R=>{T.error(R)})}}});return new Response(b)}else throw new dye(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(h);return c.arrayBuffer().then(m=>p.decode(m))}}}).then(c=>{Om.add(e,c);const u=Am[e];delete Am[e];for(let f=0,h=u.length;f<h;f++){const p=u[f];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Am[e];if(u===void 0)throw this.manager.itemError(e),c;delete Am[e];for(let f=0,h=u.length;f<h;f++){const p=u[f];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new hf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Qy.parse(e[n]);t.push(r)}return t}}class Aye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new xP,l=new hf(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const p=s.parse(h,!0);o[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=Ur),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let m=0;m<p;m++){o[m]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+g]),o[m].format=h.format,o[m].width=h.width,o[m].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Ur),a.format=h.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class pM extends Wl{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Om.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=cM("img");function l(){u(),Om.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class mye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=new rb;s.colorSpace=kn;const o=new pM(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class gye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Rp,a=new hf(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Sl,o.wrapT=c.wrapT!==void 0?c.wrapT:Sl,o.magFilter=c.magFilter!==void 0?c.magFilter:Ur,o.minFilter=c.minFilter!==void 0?c.minFilter:Ur,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ja),c.mipmapCount===1&&(o.minFilter=Ur),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},n,r),o}}class mg extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=new cs,o=new pM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class f1 extends Vi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Qt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class T9 extends f1{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Qt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const p6=new rn,u$=new he,f$=new he;class E9{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new at(512,512),this.map=null,this.mapPass=null,this.matrix=new rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ab,this._frameExtents=new at(1,1),this._viewportCount=1,this._viewports=[new Ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;u$.setFromMatrixPosition(e.matrixWorld),t.position.copy(u$),f$.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(f$),t.updateMatrixWorld(),p6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p6),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(p6)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yye extends E9{constructor(){super(new ls(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=kx*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class oT extends f1{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.target=new Vi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new yye}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const h$=new rn,TE=new he,A6=new he;class vye extends E9{constructor(){super(new ls(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new at(4,2),this._viewportCount=6,this._viewports=[new Ln(2,1,1,1),new Ln(0,1,1,1),new Ln(3,1,1,1),new Ln(1,1,1,1),new Ln(3,0,1,1),new Ln(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),TE.setFromMatrixPosition(e.matrixWorld),n.position.copy(TE),A6.copy(n.position),A6.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(A6),n.updateMatrixWorld(),r.makeTranslation(-TE.x,-TE.y,-TE.z),h$.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h$)}}class dS extends f1{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new vye}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class du extends ib{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class xye extends E9{constructor(){super(new du(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aT extends f1{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.target=new Vi,this.shadow=new xye}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _3 extends f1{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class w9 extends f1{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class kte{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class M9 extends f1{constructor(e=new kte,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class PP extends Wl{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new hf(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Qt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new Qt().setHex(o.value);break;case"v2":r.uniforms[s].value=new at().fromArray(o.value);break;case"v3":r.uniforms[s].value=new he().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Ln().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Si().fromArray(o.value);break;case"m4":r.uniforms[s].value=new rn().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new at().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new at().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return PP.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:d9,SpriteMaterial:gP,RawShaderMaterial:Nte,ShaderMaterial:jl,PointsMaterial:tT,MeshPhysicalMaterial:mh,MeshStandardMaterial:rT,MeshPhongMaterial:ix,MeshToonMaterial:p9,MeshNormalMaterial:A9,MeshLambertMaterial:Pd,MeshDepthMaterial:m9,MeshDistanceMaterial:g9,MeshBasicMaterial:Tl,MeshMatcapMaterial:y9,LineDashedMaterial:v9,LineBasicMaterial:xa,Material:ga};return new t[e]}}class Vm{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class C9 extends qn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Gte extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new hf(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(p,m){if(t[m]!==void 0)return t[m];const b=p.interleavedBuffers[m],T=s(p,b.buffer),C=c2(b.type,T),R=new ob(C,b.stride);return R.uuid=b.uuid,t[m]=R,R}function s(p,m){if(n[m]!==void 0)return n[m];const b=p.arrayBuffers[m],T=new Uint32Array(b).buffer;return n[m]=T,T}const o=e.isInstancedBufferGeometry?new C9:new qn,a=e.data.index;if(a!==void 0){const p=c2(a.type,a.array);o.setIndex(new qi(p,1))}const l=e.data.attributes;for(const p in l){const m=l[p];let g;if(m.isInterleavedBufferAttribute){const b=r(e.data,m.data);g=new vc(b,m.itemSize,m.offset,m.normalized)}else{const b=c2(m.type,m.array),T=m.isInstancedBufferAttribute?bd:qi;g=new T(b,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),o.setAttribute(p,g)}const c=e.data.morphAttributes;if(c)for(const p in c){const m=c[p],g=[];for(let b=0,T=m.length;b<T;b++){const C=m[b];let R;if(C.isInterleavedBufferAttribute){const P=r(e.data,C.data);R=new vc(P,C.itemSize,C.offset,C.normalized)}else{const P=c2(C.type,C.array);R=new qi(P,C.itemSize,C.normalized)}C.name!==void 0&&(R.name=C.name),g.push(R)}o.morphAttributes[p]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,m=f.length;p!==m;++p){const g=f[p];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new he;h.center!==void 0&&p.fromArray(h.center),o.boundingSphere=new Ua(p,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class bye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?Vm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new hf(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Vm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new hf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new nx().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new eT().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new Gte;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in c$?a=c$[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new PP;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Qy.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return o(u)}else return l.data?{data:c2(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new S9(t);s=new pM(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const p=[];for(let m=0,g=h.length;m<g;m++){const b=h[m],T=a(b);T!==null&&(T instanceof HTMLImageElement?p.push(T):p.push(new Rp(T.data,T.width,T.height)))}r[f.uuid]=new Vv(p)}else{const p=a(f.url);r[f.uuid]=new Vv(p)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:c2(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new pM(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const p=c[f],m=await s(p);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new Rp(m.data,m.width,m.height)))}n[l.uuid]=new Vv(u)}else{const u=await s(l.url);n[l.uuid]=new Vv(u)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new rb,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Rp:u=new cs,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=n(a.mapping,_ye)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=n(a.wrap[0],d$),u.wrapT=n(a.wrap[1],d$)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=n(a.minFilter,p$)),a.magFilter!==void 0&&(u.magFilter=n(a.magFilter,p$)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,n,r,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let m=0,g=h.length;m<g;m++){const b=h[m];n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),p.push(n[b])}return p}return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),n[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let u,f;switch(e.type){case"Scene":o=new sb,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Qt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new mP(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new AP(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ls(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new du(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new _3(e.color,e.intensity);break;case"DirectionalLight":o=new aT(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new dS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new w9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new oT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new T9(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new M9().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new yP(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new zi(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,p=e.instanceMatrix,m=e.instanceColor;o=new t9(u,f,h),o.instanceMatrix=new bd(new Float32Array(p.array),16),m!==void 0&&(o.instanceColor=new bd(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new Tte(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(g=>{const b=new ma;b.min.fromArray(g.boxMin),b.max.fromArray(g.boxMax);const T=new Ua;return T.radius=g.sphereRadius,T.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:b,sphereInitialized:g.sphereInitialized,sphere:T}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new Ste;break;case"Line":o=new oh(a(e.geometry),l(e.material));break;case"LineLoop":o=new n9(a(e.geometry),l(e.material));break;case"LineSegments":o=new dh(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new vP(a(e.geometry),l(e.material));break;case"Sprite":o=new _te(l(e.material));break;case"Group":o=new da;break;case"Bone":o=new hS;break;default:o=new Vi}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)o.add(this.parseObject(h[p],t,n,r,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const m=h[p];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const m=h[p],g=o.getObjectByProperty("uuid",m.object);g!==void 0&&o.addLevel(g,m.distance,m.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Vi}})}}const _ye={UVMapping:u3,CubeReflectionMapping:pu,CubeRefractionMapping:uf,EquirectangularReflectionMapping:Lp,EquirectangularRefractionMapping:aA,CubeUVReflectionMapping:eg},d$={RepeatWrapping:ff,ClampToEdgeWrapping:Sl,MirroredRepeatWrapping:lA},p$={NearestFilter:Ps,NearestMipmapNearestFilter:QS,NearestMipmapLinearFilter:cd,LinearFilter:Ur,LinearMipmapNearestFilter:Um,LinearMipmapLinearFilter:Ja};class zte extends Wl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Om.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Om.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Om.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Om.add(e,l),s.manager.itemStart(e)}}let o5;class R9{static getContext(){return o5===void 0&&(o5=new(window.AudioContext||window.webkitAudioContext)),o5}static setContext(e){o5=e}}class Sye extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new hf(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);R9.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},n,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const A$=new rn,m$=new rn,nv=new rn;class Tye{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ls,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ls,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,nv.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(tx*t.fov*.5)/t.zoom;let a,l;m$.elements[12]=-r,A$.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,nv.elements[0]=2*t.near/(l-a),nv.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(nv),a=-o*t.aspect-s,l=o*t.aspect-s,nv.elements[0]=2*t.near/(l-a),nv.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(nv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(m$),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(A$)}}class D9 extends ls{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class S3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=g$(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=g$();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function g$(){return performance.now()}const iv=new he,y$=new Br,Eye=new he,rv=new he;class wye extends Vi{constructor(){super(),this.type="AudioListener",this.context=R9.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new S3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(iv,y$,Eye),rv.set(0,0,-1).applyQuaternion(y$),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(iv.x,r),t.positionY.linearRampToValueAtTime(iv.y,r),t.positionZ.linearRampToValueAtTime(iv.z,r),t.forwardX.linearRampToValueAtTime(rv.x,r),t.forwardY.linearRampToValueAtTime(rv.y,r),t.forwardZ.linearRampToValueAtTime(rv.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(iv.x,iv.y,iv.z),t.setOrientation(rv.x,rv.y,rv.z,n.x,n.y,n.z)}}class Hte extends Vi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const sv=new he,v$=new Br,Mye=new he,ov=new he;class Cye extends Hte{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(sv,v$,Mye),ov.set(0,0,1).applyQuaternion(v$);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(sv.x,n),t.positionY.linearRampToValueAtTime(sv.y,n),t.positionZ.linearRampToValueAtTime(sv.z,n),t.orientationX.linearRampToValueAtTime(ov.x,n),t.orientationY.linearRampToValueAtTime(ov.y,n),t.orientationZ.linearRampToValueAtTime(ov.z,n)}else t.setPosition(sv.x,sv.y,sv.z),t.setOrientation(ov.x,ov.y,ov.z)}}class Rye{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Vte{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Br.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Br.multiplyQuaternionsFlat(e,o,e,t,e,n),Br.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const L9="\\[\\]\\.:\\/",Dye=new RegExp("["+L9+"]","g"),P9="[^"+L9+"]",Lye="[^"+L9.replace("\\.","")+"]",Pye=/((?:WC+[\/:])*)/.source.replace("WC",P9),Nye=/(WCOD+)?/.source.replace("WCOD",Lye),Bye=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",P9),Iye=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",P9),Oye=new RegExp("^"+Pye+Nye+Bye+Iye+"$"),Fye=["material","materials","bones","map"];class Uye{constructor(e,t,n){const r=n||hr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class hr{constructor(e,t,n){this.path=t,this.parsedPath=n||hr.parseTrackName(t),this.node=hr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new hr.Composite(e,t,n):new hr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dye,"")}static parseTrackName(e){const t=Oye.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);Fye.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=hr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hr.Composite=Uye;hr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};hr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};hr.prototype.GetterByBindingType=[hr.prototype._getValue_direct,hr.prototype._getValue_array,hr.prototype._getValue_arrayElement,hr.prototype._getValue_toArray];hr.prototype.SetterByBindingTypeAndVersioning=[[hr.prototype._setValue_direct,hr.prototype._setValue_direct_setNeedsUpdate,hr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_array,hr.prototype._setValue_array_setNeedsUpdate,hr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_arrayElement,hr.prototype._setValue_arrayElement_setNeedsUpdate,hr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_fromArray,hr.prototype._setValue_fromArray_setNeedsUpdate,hr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kye{constructor(){this.isAnimationObjectGroup=!0,this.uuid=th(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],p=h.uuid;let m=t[p];if(m===void 0){m=l++,t[p]=m,e.push(h);for(let g=0,b=o;g!==b;++g)s[g].push(new hr(h,n[g],r[g]))}else if(m<c){a=e[m];const g=--c,b=e[g];t[b.uuid]=m,e[m]=b,t[p]=g,e[g]=h;for(let T=0,C=o;T!==C;++T){const R=s[T],P=R[g];let I=R[m];R[m]=P,I===void 0&&(I=new hr(h,n[T],r[T])),R[g]=I}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];t[h.uuid]=u,e[u]=h,t[c]=f,e[f]=l;for(let p=0,m=r;p!==m;++p){const g=n[p],b=g[f],T=g[u];g[u]=b,g[f]=T}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const h=--s,p=e[h],m=--o,g=e[m];t[p.uuid]=f,e[f]=p,t[g.uuid]=h,e[h]=g,e.pop();for(let b=0,T=r;b!==T;++b){const C=n[b],R=C[h],P=C[m];C[f]=R,C[h]=P,C.pop()}}else{const h=--o,p=e[h];h>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let m=0,g=r;m!==g;++m){const b=n[m];b[f]=b[h],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(f);for(let h=u,p=l.length;h!==p;++h){const m=l[h];f[h]=new hr(m,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class qte{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Gv,endingEnd:Gv};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ete,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case j7:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case sP:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===tte;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===Jee){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=zv,r.endingEnd=zv):(e?r.endingStart=this.zeroSlopeAtStart?zv:Gv:r.endingStart=aM,t?r.endingEnd=this.zeroSlopeAtEnd?zv:Gv:r.endingEnd=aM)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const Gye=new Float32Array(1);class N9 extends hh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],p=h.name;let m=u[p];if(m!==void 0)++m.referenceCount,o[f]=m;else{if(m=o[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,p));continue}const g=t&&t._propertyBindings[f].binding.parsedPath;m=new Vte(hr.create(n,p,g),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,p),o[f]=m}a[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new b9(new Float32Array(2),new Float32Array(2),1,Gye),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Qy.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=sP),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===n)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new qte(this,o,t,n);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Qy.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class zye extends Dd{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new dP(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Hye extends Dd{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new JS(null,e,t,n),this.texture.isRenderTargetTexture=!0}}let Vye=class $te{constructor(e){this.value=e}clone(){return new $te(this.value.clone===void 0?this.value:this.value.clone())}},qye=0,$ye=class extends hh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:qye++}),this.name="",this.usage=cS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}};class AM extends ob{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class jye{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const x$=new rn;class B9{constructor(e,t,n=0,r=1/0){this.ray=new c1(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new uS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return x$.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(x$),this}intersectObject(e,t=!0,n=[]){return MF(e,this,n,t),n.sort(b$),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)MF(e[r],this,n,t);return n.sort(b$),n}}function b$(i,e){return i.distance-e.distance}function MF(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)MF(s[o],e,t,!0)}}class pS{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ki(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ki(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Wye{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class T3{constructor(e,t,n,r){T3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const _$=new at;class Kye{constructor(e=new at(1/0,1/0),t=new at(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_$.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_$).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S$=new he,a5=new he;class jte{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){S$.subVectors(e,this.start),a5.subVectors(this.end,this.start);const n=a5.dot(a5);let s=a5.dot(S$)/n;return t&&(s=ki(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const T$=new he;class Yye extends Vi{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new qn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new Cn(r,3));const s=new xa({fog:!1,toneMapped:!1});this.cone=new dh(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),T$.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(T$),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hy=new he,l5=new rn,m6=new rn;class Wte extends dh{constructor(e){const t=Kte(e),n=new qn,r=[],s=[],o=new Qt(0,0,1),a=new Qt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Cn(r,3)),n.setAttribute("color",new Cn(s,3));const l=new xa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");m6.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(l5.multiplyMatrices(m6,a.matrixWorld),hy.setFromMatrixPosition(l5),r.setXYZ(o,hy.x,hy.y,hy.z),l5.multiplyMatrices(m6,a.parent.matrixWorld),hy.setFromMatrixPosition(l5),r.setXYZ(o+1,hy.x,hy.y,hy.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kte(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,Kte(i.children[t]));return e}class Xye extends zi{constructor(e,t,n){const r=new Ah(t,4,2),s=new Tl({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qye=new he,E$=new Qt,w$=new Qt;class Zye extends Vi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new x3(t);r.rotateY(Math.PI*.5),this.material=new Tl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new qi(o,3)),this.add(new zi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");E$.copy(this.light.color),w$.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?E$:w$;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Qye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jye extends dh{constructor(e=10,t=10,n=4473924,r=8947848){n=new Qt(n),r=new Qt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,p=0,m=-a;h<=t;h++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=h===s?n:r;g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3}const u=new qn;u.setAttribute("position",new Cn(l,3)),u.setAttribute("color",new Cn(c,3));const f=new xa({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class e1e extends dh{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new Qt(s),o=new Qt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),p=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,m);const g=f&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<n;f++){const h=f&1?s:o,p=e-e/n*f;for(let m=0;m<r;m++){let g=m/r*(Math.PI*2),b=Math.sin(g)*p,T=Math.cos(g)*p;a.push(b,0,T),l.push(h.r,h.g,h.b),g=(m+1)/r*(Math.PI*2),b=Math.sin(g)*p,T=Math.cos(g)*p,a.push(b,0,T),l.push(h.r,h.g,h.b)}}const c=new qn;c.setAttribute("position",new Cn(a,3)),c.setAttribute("color",new Cn(l,3));const u=new xa({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const M$=new he,c5=new he,C$=new he;class t1e extends Vi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new qn;r.setAttribute("position",new Cn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new xa({fog:!1,toneMapped:!1});this.lightPlane=new oh(r,s),this.add(this.lightPlane),r=new qn,r.setAttribute("position",new Cn([0,0,0,0,0,1],3)),this.targetLine=new oh(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),M$.setFromMatrixPosition(this.light.matrixWorld),c5.setFromMatrixPosition(this.light.target.matrixWorld),C$.subVectors(c5,M$),this.lightPlane.lookAt(c5),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(c5),this.targetLine.scale.z=C$.length()}}const u5=new he,jo=new ib;class n1e extends dh{constructor(e){const t=new qn,n=new xa({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){l(m),l(g)}function l(m){r.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(r.length/3-1)}t.setAttribute("position",new Cn(r,3)),t.setAttribute("color",new Cn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Qt(16755200),u=new Qt(16711680),f=new Qt(43775),h=new Qt(16777215),p=new Qt(3355443);this.setColors(c,u,f,h,p)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;jo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===yc?-1:0;la("c",t,e,jo,0,0,s),la("t",t,e,jo,0,0,1),la("n1",t,e,jo,-1,-1,s),la("n2",t,e,jo,n,-1,s),la("n3",t,e,jo,-1,r,s),la("n4",t,e,jo,n,r,s),la("f1",t,e,jo,-1,-1,1),la("f2",t,e,jo,n,-1,1),la("f3",t,e,jo,-1,r,1),la("f4",t,e,jo,n,r,1),la("u1",t,e,jo,n*.7,r*1.1,s),la("u2",t,e,jo,-1*.7,r*1.1,s),la("u3",t,e,jo,0,r*2,s),la("cf1",t,e,jo,-1,0,1),la("cf2",t,e,jo,n,0,1),la("cf3",t,e,jo,0,-1,1),la("cf4",t,e,jo,0,r,1),la("cn1",t,e,jo,-1,0,s),la("cn2",t,e,jo,n,0,s),la("cn3",t,e,jo,0,-1,s),la("cn4",t,e,jo,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function la(i,e,t,n,r,s,o){u5.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],u5.x,u5.y,u5.z)}}const f5=new ma;class i1e extends dh{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new qn;s.setIndex(new qi(n,1)),s.setAttribute("position",new qi(r,3)),super(s,new xa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&f5.setFromObject(this.object),f5.isEmpty())return;const t=f5.min,n=f5.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class r1e extends dh{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new qn;s.setIndex(new qi(n,1)),s.setAttribute("position",new Cn(r,3)),super(s,new xa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class s1e extends oh{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new qn;o.setAttribute("position",new Cn(s,3)),o.computeBoundingSphere(),super(o,new xa({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new qn;l.setAttribute("position",new Cn(a,3)),l.computeBoundingSphere(),this.add(new zi(l,new Tl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const R$=new he;let h5,g6;class o1e extends Vi{constructor(e=new he(0,0,1),t=new he(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",h5===void 0&&(h5=new qn,h5.setAttribute("position",new Cn([0,0,0,0,1,0],3)),g6=new lb(0,.5,1,5,1),g6.translate(0,-.5,0)),this.position.copy(t),this.line=new oh(h5,new xa({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new zi(g6,new Tl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{R$.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(R$,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class a1e extends dh{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new qn;r.setAttribute("position",new Cn(t,3)),r.setAttribute("color",new Cn(n,3));const s=new xa({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Qt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yte{constructor(){this.type="ShapePath",this.color=new Qt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new uM,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const C=[];for(let R=0,P=T.length;R<P;R++){const I=T[R],F=new nx;F.curves=I.curves,C.push(F)}return C}function n(T,C){const R=C.length;let P=!1;for(let I=R-1,F=0;F<R;I=F++){let k=C[I],q=C[F],H=q.x-k.x,O=q.y-k.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(k=C[F],H=-H,q=C[I],O=-O),T.y<k.y||T.y>q.y)continue;if(T.y===k.y){if(T.x===k.x)return!0}else{const $=O*(T.x-k.x)-H*(T.y-k.y);if($===0)return!0;if($<0)continue;P=!P}}else{if(T.y!==k.y)continue;if(q.x<=T.x&&T.x<=k.x||k.x<=T.x&&T.x<=q.x)return!0}}return P}const r=Y0.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new nx,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],h=[];let p=[],m=0,g;h[m]=void 0,p[m]=[];for(let T=0,C=s.length;T<C;T++)a=s[T],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!u&&h[m]&&m++,h[m]={s:new nx,p:g},h[m].s.curves=a.curves,u&&m++,p[m]=[]):p[m].push({h:a,p:g[0]});if(!h[0])return t(s);if(h.length>1){let T=!1,C=0;for(let R=0,P=h.length;R<P;R++)f[R]=[];for(let R=0,P=h.length;R<P;R++){const I=p[R];for(let F=0;F<I.length;F++){const k=I[F];let q=!0;for(let H=0;H<h.length;H++)n(k.p,h[H].p)&&(R!==H&&C++,q?(q=!1,f[H].push(k)):T=!0);q&&f[R].push(k)}}C>0&&T===!1&&(p=f)}let b;for(let T=0,C=h.length;T<C;T++){l=h[T].s,c.push(l),b=p[T];for(let R=0,P=b.length;R<P;R++)l.holes.push(b[R].h)}return c}}class NP extends hh{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function l1e(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function c1e(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function u1e(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function CF(i,e,t,n){const r=f1e(n);switch(t){case tP:return i*e;case nP:return i*e;case iP:return i*e*2;case eb:return i*e/r.components*r.byteLength;case l1:return i*e/r.components*r.byteLength;case Yy:return i*e*2/r.components*r.byteLength;case tb:return i*e*2/r.components*r.byteLength;case ZS:return i*e*3/r.components*r.byteLength;case ho:return i*e*4/r.components*r.byteLength;case nb:return i*e*4/r.components*r.byteLength;case Vy:case km:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Gm:case zm:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case J2:case tS:return Math.max(i,16)*Math.max(e,8)/4;case Z2:case eS:return Math.max(i,8)*Math.max(e,8)/2;case nS:case Sx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Tx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Ex:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case wx:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Mx:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Cx:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Rx:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Dx:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Lx:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Px:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Nx:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Bx:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Ix:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case Ox:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Fx:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Ux:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case qy:case BD:case ID:return Math.ceil(i/4)*Math.ceil(e/4)*16;case rP:case iS:return Math.ceil(i/4)*Math.ceil(e/4)*8;case rS:case sS:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function f1e(i){switch(i){case Aa:case zy:return{byteLength:1,components:1};case ud:case Hy:case Fa:return{byteLength:2,components:1};case f3:case h3:return{byteLength:2,components:4};case Gs:case Za:case Ns:return{byteLength:4,components:1};case d3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const h1e={contain:l1e,cover:c1e,fill:u1e,getByteLength:CF};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:a1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=a1);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Xte(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function d1e(i){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,f=c.byteLength,h=i.createBuffer();i.bindBuffer(l,h),i.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=i.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=i.HALF_FLOAT:p=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=i.SHORT;else if(c instanceof Uint32Array)p=i.UNSIGNED_INT;else if(c instanceof Int32Array)p=i.INT;else if(c instanceof Int8Array)p=i.BYTE;else if(c instanceof Uint8Array)p=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function n(a,l,c){const u=l.array,f=l.updateRanges;if(i.bindBuffer(c,a),f.length===0)i.bufferSubData(c,0,u);else{f.sort((p,m)=>p.start-m.start);let h=0;for(let p=1;p<f.length;p++){const m=f[h],g=f[p];g.start<=m.start+m.count+1?m.count=Math.max(m.count,g.start+g.count-m.start):(++h,f[h]=g)}f.length=h+1;for(let p=0,m=f.length;p<m;p++){const g=f[p];i.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var p1e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,A1e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,m1e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,g1e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,y1e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,v1e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,x1e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,b1e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_1e=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,S1e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,T1e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,E1e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,w1e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,M1e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,C1e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,R1e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,D1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,L1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,P1e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,N1e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,B1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,I1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,O1e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,F1e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,U1e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,k1e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,G1e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,z1e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,H1e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,V1e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,q1e="gl_FragColor = linearToOutputTexel( gl_FragColor );",$1e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,j1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,W1e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,K1e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Y1e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,X1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Q1e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Z1e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,J1e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nve=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ive=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rve=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,sve=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ove=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ave=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lve=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cve=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,uve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fve=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,hve=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dve=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pve=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ave=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,mve=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gve=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yve=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vve=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,_ve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Sve=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tve=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Eve=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wve=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Mve=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Rve=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Dve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Lve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Pve=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Nve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ive=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ove=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Fve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Uve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Hve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Vve=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$ve=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jve=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Wve=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Kve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Yve=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Xve=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Qve=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Zve=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Jve=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,exe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,txe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nxe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ixe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rxe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sxe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,oxe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,axe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,lxe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,cxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fxe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,hxe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const dxe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,pxe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Axe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mxe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yxe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xxe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,bxe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_xe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Sxe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Txe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Exe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wxe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mxe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Cxe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rxe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dxe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lxe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pxe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nxe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Bxe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ixe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oxe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Uxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kxe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Hxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vxe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$xe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qi={alphahash_fragment:p1e,alphahash_pars_fragment:A1e,alphamap_fragment:m1e,alphamap_pars_fragment:g1e,alphatest_fragment:y1e,alphatest_pars_fragment:v1e,aomap_fragment:x1e,aomap_pars_fragment:b1e,batching_pars_vertex:_1e,batching_vertex:S1e,begin_vertex:T1e,beginnormal_vertex:E1e,bsdfs:w1e,iridescence_fragment:M1e,bumpmap_pars_fragment:C1e,clipping_planes_fragment:R1e,clipping_planes_pars_fragment:D1e,clipping_planes_pars_vertex:L1e,clipping_planes_vertex:P1e,color_fragment:N1e,color_pars_fragment:B1e,color_pars_vertex:I1e,color_vertex:O1e,common:F1e,cube_uv_reflection_fragment:U1e,defaultnormal_vertex:k1e,displacementmap_pars_vertex:G1e,displacementmap_vertex:z1e,emissivemap_fragment:H1e,emissivemap_pars_fragment:V1e,colorspace_fragment:q1e,colorspace_pars_fragment:$1e,envmap_fragment:j1e,envmap_common_pars_fragment:W1e,envmap_pars_fragment:K1e,envmap_pars_vertex:Y1e,envmap_physical_pars_fragment:ove,envmap_vertex:X1e,fog_vertex:Q1e,fog_pars_vertex:Z1e,fog_fragment:J1e,fog_pars_fragment:eve,gradientmap_pars_fragment:tve,lightmap_pars_fragment:nve,lights_lambert_fragment:ive,lights_lambert_pars_fragment:rve,lights_pars_begin:sve,lights_toon_fragment:ave,lights_toon_pars_fragment:lve,lights_phong_fragment:cve,lights_phong_pars_fragment:uve,lights_physical_fragment:fve,lights_physical_pars_fragment:hve,lights_fragment_begin:dve,lights_fragment_maps:pve,lights_fragment_end:Ave,logdepthbuf_fragment:mve,logdepthbuf_pars_fragment:gve,logdepthbuf_pars_vertex:yve,logdepthbuf_vertex:vve,map_fragment:xve,map_pars_fragment:bve,map_particle_fragment:_ve,map_particle_pars_fragment:Sve,metalnessmap_fragment:Tve,metalnessmap_pars_fragment:Eve,morphinstance_vertex:wve,morphcolor_vertex:Mve,morphnormal_vertex:Cve,morphtarget_pars_vertex:Rve,morphtarget_vertex:Dve,normal_fragment_begin:Lve,normal_fragment_maps:Pve,normal_pars_fragment:Nve,normal_pars_vertex:Bve,normal_vertex:Ive,normalmap_pars_fragment:Ove,clearcoat_normal_fragment_begin:Fve,clearcoat_normal_fragment_maps:Uve,clearcoat_pars_fragment:kve,iridescence_pars_fragment:Gve,opaque_fragment:zve,packing:Hve,premultiplied_alpha_fragment:Vve,project_vertex:qve,dithering_fragment:$ve,dithering_pars_fragment:jve,roughnessmap_fragment:Wve,roughnessmap_pars_fragment:Kve,shadowmap_pars_fragment:Yve,shadowmap_pars_vertex:Xve,shadowmap_vertex:Qve,shadowmask_pars_fragment:Zve,skinbase_vertex:Jve,skinning_pars_vertex:exe,skinning_vertex:txe,skinnormal_vertex:nxe,specularmap_fragment:ixe,specularmap_pars_fragment:rxe,tonemapping_fragment:sxe,tonemapping_pars_fragment:oxe,transmission_fragment:axe,transmission_pars_fragment:lxe,uv_pars_fragment:cxe,uv_pars_vertex:uxe,uv_vertex:fxe,worldpos_vertex:hxe,background_vert:dxe,background_frag:pxe,backgroundCube_vert:Axe,backgroundCube_frag:mxe,cube_vert:gxe,cube_frag:yxe,depth_vert:vxe,depth_frag:xxe,distanceRGBA_vert:bxe,distanceRGBA_frag:_xe,equirect_vert:Sxe,equirect_frag:Txe,linedashed_vert:Exe,linedashed_frag:wxe,meshbasic_vert:Mxe,meshbasic_frag:Cxe,meshlambert_vert:Rxe,meshlambert_frag:Dxe,meshmatcap_vert:Lxe,meshmatcap_frag:Pxe,meshnormal_vert:Nxe,meshnormal_frag:Bxe,meshphong_vert:Ixe,meshphong_frag:Oxe,meshphysical_vert:Fxe,meshphysical_frag:Uxe,meshtoon_vert:kxe,meshtoon_frag:Gxe,points_vert:zxe,points_frag:Hxe,shadow_vert:Vxe,shadow_frag:qxe,sprite_vert:$xe,sprite_frag:jxe},wn={common:{diffuse:{value:new Qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Si},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Si}},envmap:{envMap:{value:null},envMapRotation:{value:new Si},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Si}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Si}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Si},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Si},normalScale:{value:new at(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Si},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Si}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Si}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Si}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0},uvTransform:{value:new Si}},sprite:{diffuse:{value:new Qt(16777215)},opacity:{value:1},center:{value:new at(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Si},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0}}},nu={basic:{uniforms:Qc([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:Qi.meshbasic_vert,fragmentShader:Qi.meshbasic_frag},lambert:{uniforms:Qc([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new Qt(0)}}]),vertexShader:Qi.meshlambert_vert,fragmentShader:Qi.meshlambert_frag},phong:{uniforms:Qc([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new Qt(0)},specular:{value:new Qt(1118481)},shininess:{value:30}}]),vertexShader:Qi.meshphong_vert,fragmentShader:Qi.meshphong_frag},standard:{uniforms:Qc([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new Qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qi.meshphysical_vert,fragmentShader:Qi.meshphysical_frag},toon:{uniforms:Qc([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new Qt(0)}}]),vertexShader:Qi.meshtoon_vert,fragmentShader:Qi.meshtoon_frag},matcap:{uniforms:Qc([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:Qi.meshmatcap_vert,fragmentShader:Qi.meshmatcap_frag},points:{uniforms:Qc([wn.points,wn.fog]),vertexShader:Qi.points_vert,fragmentShader:Qi.points_frag},dashed:{uniforms:Qc([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qi.linedashed_vert,fragmentShader:Qi.linedashed_frag},depth:{uniforms:Qc([wn.common,wn.displacementmap]),vertexShader:Qi.depth_vert,fragmentShader:Qi.depth_frag},normal:{uniforms:Qc([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:Qi.meshnormal_vert,fragmentShader:Qi.meshnormal_frag},sprite:{uniforms:Qc([wn.sprite,wn.fog]),vertexShader:Qi.sprite_vert,fragmentShader:Qi.sprite_frag},background:{uniforms:{uvTransform:{value:new Si},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qi.background_vert,fragmentShader:Qi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Si}},vertexShader:Qi.backgroundCube_vert,fragmentShader:Qi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qi.cube_vert,fragmentShader:Qi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qi.equirect_vert,fragmentShader:Qi.equirect_frag},distanceRGBA:{uniforms:Qc([wn.common,wn.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qi.distanceRGBA_vert,fragmentShader:Qi.distanceRGBA_frag},shadow:{uniforms:Qc([wn.lights,wn.fog,{color:{value:new Qt(0)},opacity:{value:1}}]),vertexShader:Qi.shadow_vert,fragmentShader:Qi.shadow_frag}};nu.physical={uniforms:Qc([nu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Si},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Si},clearcoatNormalScale:{value:new at(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Si},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Si},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Si},sheen:{value:0},sheenColor:{value:new Qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Si},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Si},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Si},transmissionSamplerSize:{value:new at},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Si},attenuationDistance:{value:0},attenuationColor:{value:new Qt(0)},specularColor:{value:new Qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Si},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Si},anisotropyVector:{value:new at},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Si}}]),vertexShader:Qi.meshphysical_vert,fragmentShader:Qi.meshphysical_frag};const d5={r:0,b:0,g:0},av=new Io,Wxe=new rn;function Kxe(i,e,t,n,r,s,o){const a=new Qt(0);let l=s===!0?0:1,c,u,f=null,h=0,p=null;function m(R){let P=R.isScene===!0?R.background:null;return P&&P.isTexture&&(P=(R.backgroundBlurriness>0?t:e).get(P)),P}function g(R){let P=!1;const I=m(R);I===null?T(a,l):I&&I.isColor&&(T(I,1),P=!0);const F=i.xr.getEnvironmentBlendMode();F==="additive"?n.buffers.color.setClear(0,0,0,1,o):F==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||P)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function b(R,P){const I=m(P);I&&(I.isCubeTexture||I.mapping===eg)?(u===void 0&&(u=new zi(new MA(1,1,1),new jl({name:"BackgroundCubeMaterial",uniforms:fS(nu.backgroundCube.uniforms),vertexShader:nu.backgroundCube.vertexShader,fragmentShader:nu.backgroundCube.fragmentShader,side:Bs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(F,k,q){this.matrixWorld.copyPosition(q.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),av.copy(P.backgroundRotation),av.x*=-1,av.y*=-1,av.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(av.y*=-1,av.z*=-1),u.material.uniforms.envMap.value=I,u.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Wxe.makeRotationFromEuler(av)),u.material.toneMapped=Oi.getTransfer(I.colorSpace)!==$r,(f!==I||h!==I.version||p!==i.toneMapping)&&(u.material.needsUpdate=!0,f=I,h=I.version,p=i.toneMapping),u.layers.enableAll(),R.unshift(u,u.geometry,u.material,0,0,null)):I&&I.isTexture&&(c===void 0&&(c=new zi(new iT(2,2),new jl({name:"BackgroundMaterial",uniforms:fS(nu.background.uniforms),vertexShader:nu.background.vertexShader,fragmentShader:nu.background.fragmentShader,side:sh,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=I,c.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,c.material.toneMapped=Oi.getTransfer(I.colorSpace)!==$r,I.matrixAutoUpdate===!0&&I.updateMatrix(),c.material.uniforms.uvTransform.value.copy(I.matrix),(f!==I||h!==I.version||p!==i.toneMapping)&&(c.material.needsUpdate=!0,f=I,h=I.version,p=i.toneMapping),c.layers.enableAll(),R.unshift(c,c.geometry,c.material,0,0,null))}function T(R,P){R.getRGB(d5,xte(i)),n.buffers.color.setClear(d5.r,d5.g,d5.b,P,o)}function C(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(R,P=1){a.set(R),l=P,T(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(R){l=R,T(a,l)},render:g,addToRenderList:b,dispose:C}}function Yxe(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=h(null);let s=r,o=!1;function a(O,$,ee,Y,oe){let re=!1;const Q=f(Y,ee,$);s!==Q&&(s=Q,c(s.object)),re=p(O,Y,ee,oe),re&&m(O,Y,ee,oe),oe!==null&&e.update(oe,i.ELEMENT_ARRAY_BUFFER),(re||o)&&(o=!1,P(O,$,ee,Y),oe!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(oe).buffer))}function l(){return i.createVertexArray()}function c(O){return i.bindVertexArray(O)}function u(O){return i.deleteVertexArray(O)}function f(O,$,ee){const Y=ee.wireframe===!0;let oe=n[O.id];oe===void 0&&(oe={},n[O.id]=oe);let re=oe[$.id];re===void 0&&(re={},oe[$.id]=re);let Q=re[Y];return Q===void 0&&(Q=h(l()),re[Y]=Q),Q}function h(O){const $=[],ee=[],Y=[];for(let oe=0;oe<t;oe++)$[oe]=0,ee[oe]=0,Y[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:ee,attributeDivisors:Y,object:O,attributes:{},index:null}}function p(O,$,ee,Y){const oe=s.attributes,re=$.attributes;let Q=0;const se=ee.getAttributes();for(const le in se)if(se[le].location>=0){const ie=oe[le];let ge=re[le];if(ge===void 0&&(le==="instanceMatrix"&&O.instanceMatrix&&(ge=O.instanceMatrix),le==="instanceColor"&&O.instanceColor&&(ge=O.instanceColor)),ie===void 0||ie.attribute!==ge||ge&&ie.data!==ge.data)return!0;Q++}return s.attributesNum!==Q||s.index!==Y}function m(O,$,ee,Y){const oe={},re=$.attributes;let Q=0;const se=ee.getAttributes();for(const le in se)if(se[le].location>=0){let ie=re[le];ie===void 0&&(le==="instanceMatrix"&&O.instanceMatrix&&(ie=O.instanceMatrix),le==="instanceColor"&&O.instanceColor&&(ie=O.instanceColor));const ge={};ge.attribute=ie,ie&&ie.data&&(ge.data=ie.data),oe[le]=ge,Q++}s.attributes=oe,s.attributesNum=Q,s.index=Y}function g(){const O=s.newAttributes;for(let $=0,ee=O.length;$<ee;$++)O[$]=0}function b(O){T(O,0)}function T(O,$){const ee=s.newAttributes,Y=s.enabledAttributes,oe=s.attributeDivisors;ee[O]=1,Y[O]===0&&(i.enableVertexAttribArray(O),Y[O]=1),oe[O]!==$&&(i.vertexAttribDivisor(O,$),oe[O]=$)}function C(){const O=s.newAttributes,$=s.enabledAttributes;for(let ee=0,Y=$.length;ee<Y;ee++)$[ee]!==O[ee]&&(i.disableVertexAttribArray(ee),$[ee]=0)}function R(O,$,ee,Y,oe,re,Q){Q===!0?i.vertexAttribIPointer(O,$,ee,oe,re):i.vertexAttribPointer(O,$,ee,Y,oe,re)}function P(O,$,ee,Y){g();const oe=Y.attributes,re=ee.getAttributes(),Q=$.defaultAttributeValues;for(const se in re){const le=re[se];if(le.location>=0){let de=oe[se];if(de===void 0&&(se==="instanceMatrix"&&O.instanceMatrix&&(de=O.instanceMatrix),se==="instanceColor"&&O.instanceColor&&(de=O.instanceColor)),de!==void 0){const ie=de.normalized,ge=de.itemSize,Ce=e.get(de);if(Ce===void 0)continue;const Ie=Ce.buffer,Ee=Ce.type,Be=Ce.bytesPerElement,qe=Ee===i.INT||Ee===i.UNSIGNED_INT||de.gpuType===Za;if(de.isInterleavedBufferAttribute){const it=de.data,et=it.stride,Ht=de.offset;if(it.isInstancedInterleavedBuffer){for(let _t=0;_t<le.locationSize;_t++)T(le.location+_t,it.meshPerAttribute);O.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=it.meshPerAttribute*it.count)}else for(let _t=0;_t<le.locationSize;_t++)b(le.location+_t);i.bindBuffer(i.ARRAY_BUFFER,Ie);for(let _t=0;_t<le.locationSize;_t++)R(le.location+_t,ge/le.locationSize,Ee,ie,et*Be,(Ht+ge/le.locationSize*_t)*Be,qe)}else{if(de.isInstancedBufferAttribute){for(let it=0;it<le.locationSize;it++)T(le.location+it,de.meshPerAttribute);O.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let it=0;it<le.locationSize;it++)b(le.location+it);i.bindBuffer(i.ARRAY_BUFFER,Ie);for(let it=0;it<le.locationSize;it++)R(le.location+it,ge/le.locationSize,Ee,ie,ge*Be,ge/le.locationSize*it*Be,qe)}}else if(Q!==void 0){const ie=Q[se];if(ie!==void 0)switch(ie.length){case 2:i.vertexAttrib2fv(le.location,ie);break;case 3:i.vertexAttrib3fv(le.location,ie);break;case 4:i.vertexAttrib4fv(le.location,ie);break;default:i.vertexAttrib1fv(le.location,ie)}}}}C()}function I(){q();for(const O in n){const $=n[O];for(const ee in $){const Y=$[ee];for(const oe in Y)u(Y[oe].object),delete Y[oe];delete $[ee]}delete n[O]}}function F(O){if(n[O.id]===void 0)return;const $=n[O.id];for(const ee in $){const Y=$[ee];for(const oe in Y)u(Y[oe].object),delete Y[oe];delete $[ee]}delete n[O.id]}function k(O){for(const $ in n){const ee=n[$];if(ee[O.id]===void 0)continue;const Y=ee[O.id];for(const oe in Y)u(Y[oe].object),delete Y[oe];delete ee[O.id]}}function q(){H(),o=!0,s!==r&&(s=r,c(s.object))}function H(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:q,resetDefaultState:H,dispose:I,releaseStatesOfGeometry:F,releaseStatesOfProgram:k,initAttributes:g,enableAttribute:b,disableUnusedAttributes:C}}function Xxe(i,e,t){let n;function r(c){n=c}function s(c,u){i.drawArrays(n,c,u),t.update(u,n,1)}function o(c,u,f){f!==0&&(i.drawArraysInstanced(n,c,u,f),t.update(u,n,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,u,0,f);let p=0;for(let m=0;m<f;m++)p+=u[m];t.update(p,n,1)}function l(c,u,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<c.length;m++)o(c[m],u[m],h[m]);else{p.multiDrawArraysInstancedWEBGL(n,c,0,u,0,h,0,f);let m=0;for(let g=0;g<f;g++)m+=u[g]*h[g];t.update(m,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Qxe(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==ho&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){const q=k===Fa&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==Aa&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Ns&&!q)}function l(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),m=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=i.getParameter(i.MAX_TEXTURE_SIZE),b=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),T=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),R=i.getParameter(i.MAX_VARYING_VECTORS),P=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),I=m>0,F=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:b,maxAttributes:T,maxVertexUniforms:C,maxVaryings:R,maxFragmentUniforms:P,vertexTextures:I,maxSamples:F}}function Zxe(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new rd,a=new Si,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||n!==0||r;return r=h,n=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=u(f,h,0)},this.setState=function(f,h,p){const m=f.clippingPlanes,g=f.clipIntersection,b=f.clipShadows,T=i.get(f);if(!r||m===null||m.length===0||s&&!b)s?u(null):c();else{const C=s?0:n,R=C*4;let P=T.clippingState||null;l.value=P,P=u(m,h,R,p);for(let I=0;I!==R;++I)P[I]=t[I];T.clippingState=P,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(f,h,p,m){const g=f!==null?f.length:0;let b=null;if(g!==0){if(b=l.value,m!==!0||b===null){const T=p+g*4,C=h.matrixWorldInverse;a.getNormalMatrix(C),(b===null||b.length<T)&&(b=new Float32Array(T));for(let R=0,P=p;R!==g;++R,P+=4)o.copy(f[R]).applyMatrix4(C,a),o.normal.toArray(b,P),b[P+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,b}}function Jxe(i){let e=new WeakMap;function t(o,a){return a===Lp?o.mapping=pu:a===aA&&(o.mapping=uf),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===Lp||a===aA)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new e9(l.height);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const h2=4,D$=[.125,.215,.35,.446,.526,.582],Bv=20,y6=new du,L$=new Qt;let v6=null,x6=0,b6=0,_6=!1;const Tv=(1+Math.sqrt(5))/2,x_=1/Tv,P$=[new he(-Tv,x_,0),new he(Tv,x_,0),new he(-x_,0,Tv),new he(x_,0,Tv),new he(0,Tv,-x_),new he(0,Tv,x_),new he(-1,1,-1),new he(1,1,-1),new he(-1,1,1),new he(1,1,1)];let RF=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){v6=this._renderer.getRenderTarget(),x6=this._renderer.getActiveCubeFace(),b6=this._renderer.getActiveMipmapLevel(),_6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=I$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=B$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v6,x6,b6),this._renderer.xr.enabled=_6,e.scissorTest=!1,p5(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===pu||e.mapping===uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v6=this._renderer.getRenderTarget(),x6=this._renderer.getActiveCubeFace(),b6=this._renderer.getActiveMipmapLevel(),_6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Fa,format:ho,colorSpace:hu,depthBuffer:!1},r=N$(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=N$(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ebe(s)),this._blurMaterial=tbe(s,e,t)}return r}_compileMaterial(e){const t=new zi(this._lodPlanes[0],e);this._renderer.compile(t,y6)}_sceneToCubeUV(e,t,n,r){const a=new ls(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(L$),u.toneMapping=Sc,u.autoClear=!1;const p=new Tl({name:"PMREM.Background",side:Bs,depthWrite:!1,depthTest:!1}),m=new zi(new MA,p);let g=!1;const b=e.background;b?b.isColor&&(p.color.copy(b),e.background=null,g=!0):(p.color.copy(L$),g=!0);for(let T=0;T<6;T++){const C=T%3;C===0?(a.up.set(0,l[T],0),a.lookAt(c[T],0,0)):C===1?(a.up.set(0,0,l[T]),a.lookAt(0,c[T],0)):(a.up.set(0,l[T],0),a.lookAt(0,0,c[T]));const R=this._cubeSize;p5(r,C*R,T>2?R:0,R,R),u.setRenderTarget(r),g&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===pu||e.mapping===uf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=I$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=B$());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new zi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;p5(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,y6)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=P$[(r-s-1)%P$.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new zi(this._lodPlanes[r],c),h=c.uniforms,p=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Bv-1),g=s/m,b=isFinite(s)?1+Math.floor(u*g):Bv;b>Bv&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Bv}`);const T=[];let C=0;for(let k=0;k<Bv;++k){const q=k/g,H=Math.exp(-q*q/2);T.push(H),k===0?C+=H:k<b&&(C+=2*H)}for(let k=0;k<T.length;k++)T[k]=T[k]/C;h.envMap.value=e.texture,h.samples.value=b,h.weights.value=T,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:R}=this;h.dTheta.value=m,h.mipInt.value=R-n;const P=this._sizeLods[r],I=3*P*(r>R-h2?r-R+h2:0),F=4*(this._cubeSize-P);p5(t,I,F,3*P,2*P),l.setRenderTarget(t),l.render(f,y6)}};function ebe(i){const e=[],t=[],n=[];let r=i;const s=i-h2+1+D$.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-h2?l=D$[o-i+h2-1]:o===0&&(l=0),n.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],p=6,m=6,g=3,b=2,T=1,C=new Float32Array(g*m*p),R=new Float32Array(b*m*p),P=new Float32Array(T*m*p);for(let F=0;F<p;F++){const k=F%3*2/3-1,q=F>2?0:-1,H=[k,q,0,k+2/3,q,0,k+2/3,q+1,0,k,q,0,k+2/3,q+1,0,k,q+1,0];C.set(H,g*m*F),R.set(h,b*m*F);const O=[F,F,F,F,F,F];P.set(O,T*m*F)}const I=new qn;I.setAttribute("position",new qi(C,g)),I.setAttribute("uv",new qi(R,b)),I.setAttribute("faceIndex",new qi(P,T)),e.push(I),r>h2&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function N$(i,e,t){const n=new xd(i,e,t);return n.texture.mapping=eg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function p5(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function tbe(i,e,t){const n=new Float32Array(Bv),r=new he(0,1,0);return new jl({name:"SphericalGaussianBlur",defines:{n:Bv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:I9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function B$(){return new jl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:I9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function I$(){return new jl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:I9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:uu,depthTest:!1,depthWrite:!1})}function I9(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nbe(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===Lp||l===aA,u=l===pu||l===uf;if(c||u){let f=e.get(a);const h=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new RF(i)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&r(p)?(t===null&&(t=new RF(i)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function ibe(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&Sp("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function rbe(i,e,t,n){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",o),delete r[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],i.ARRAY_BUFFER)}function c(f){const h=[],p=f.index,m=f.attributes.position;let g=0;if(p!==null){const C=p.array;g=p.version;for(let R=0,P=C.length;R<P;R+=3){const I=C[R+0],F=C[R+1],k=C[R+2];h.push(I,F,F,k,k,I)}}else if(m!==void 0){const C=m.array;g=m.version;for(let R=0,P=C.length/3-1;R<P;R+=3){const I=R+0,F=R+1,k=R+2;h.push(I,F,F,k,k,I)}}else return;const b=new(X7(h)?pP:m3)(h,1);b.version=g;const T=s.get(f);T&&e.remove(T),s.set(f,b)}function u(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function sbe(i,e,t){let n;function r(h){n=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,p){i.drawElements(n,p,s,h*o),t.update(p,n,1)}function c(h,p,m){m!==0&&(i.drawElementsInstanced(n,p,s,h*o,m),t.update(p,n,m))}function u(h,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,p,0,s,h,0,m);let b=0;for(let T=0;T<m;T++)b+=p[T];t.update(b,n,1)}function f(h,p,m,g){if(m===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let T=0;T<h.length;T++)c(h[T]/o,p[T],g[T]);else{b.multiDrawElementsInstancedWEBGL(n,p,0,s,h,0,g,0,m);let T=0;for(let C=0;C<m;C++)T+=p[C]*g[C];t.update(T,n,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function obe(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function abe(i,e,t){const n=new WeakMap,r=new Ln;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let h=n.get(a);if(h===void 0||h.count!==f){let O=function(){q.dispose(),n.delete(a),a.removeEventListener("dispose",O)};var p=O;h!==void 0&&h.texture.dispose();const m=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,b=a.morphAttributes.color!==void 0,T=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],R=a.morphAttributes.color||[];let P=0;m===!0&&(P=1),g===!0&&(P=2),b===!0&&(P=3);let I=a.attributes.position.count*P,F=1;I>e.maxTextureSize&&(F=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const k=new Float32Array(I*F*4*f),q=new JS(k,I,F,f);q.type=Ns,q.needsUpdate=!0;const H=P*4;for(let $=0;$<f;$++){const ee=T[$],Y=C[$],oe=R[$],re=I*F*4*$;for(let Q=0;Q<ee.count;Q++){const se=Q*H;m===!0&&(r.fromBufferAttribute(ee,Q),k[re+se+0]=r.x,k[re+se+1]=r.y,k[re+se+2]=r.z,k[re+se+3]=0),g===!0&&(r.fromBufferAttribute(Y,Q),k[re+se+4]=r.x,k[re+se+5]=r.y,k[re+se+6]=r.z,k[re+se+7]=0),b===!0&&(r.fromBufferAttribute(oe,Q),k[re+se+8]=r.x,k[re+se+9]=r.y,k[re+se+10]=r.z,k[re+se+11]=oe.itemSize===4?r.w:1)}}h={count:f,texture:q,size:new at(I,F)},n.set(a,h),a.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let m=0;for(let b=0;b<c.length;b++)m+=c[b];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(i,"morphTargetBaseInfluence",g),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}return{update:s}}function lbe(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const Qte=new cs,O$=new Ld(1,1),Zte=new JS,Jte=new dP,ene=new rb,F$=[],U$=[],k$=new Float32Array(16),G$=new Float32Array(9),z$=new Float32Array(4);function lT(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=F$[r];if(s===void 0&&(s=new Float32Array(r),F$[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function tl(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function nl(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function BP(i,e){let t=U$[e];t===void 0&&(t=new Int32Array(e),U$[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function cbe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function ube(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tl(t,e))return;i.uniform2fv(this.addr,e),nl(t,e)}}function fbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(tl(t,e))return;i.uniform3fv(this.addr,e),nl(t,e)}}function hbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tl(t,e))return;i.uniform4fv(this.addr,e),nl(t,e)}}function dbe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(tl(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),nl(t,e)}else{if(tl(t,n))return;z$.set(n),i.uniformMatrix2fv(this.addr,!1,z$),nl(t,n)}}function pbe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(tl(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),nl(t,e)}else{if(tl(t,n))return;G$.set(n),i.uniformMatrix3fv(this.addr,!1,G$),nl(t,n)}}function Abe(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(tl(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),nl(t,e)}else{if(tl(t,n))return;k$.set(n),i.uniformMatrix4fv(this.addr,!1,k$),nl(t,n)}}function mbe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function gbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tl(t,e))return;i.uniform2iv(this.addr,e),nl(t,e)}}function ybe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(tl(t,e))return;i.uniform3iv(this.addr,e),nl(t,e)}}function vbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tl(t,e))return;i.uniform4iv(this.addr,e),nl(t,e)}}function xbe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function bbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tl(t,e))return;i.uniform2uiv(this.addr,e),nl(t,e)}}function _be(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(tl(t,e))return;i.uniform3uiv(this.addr,e),nl(t,e)}}function Sbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tl(t,e))return;i.uniform4uiv(this.addr,e),nl(t,e)}}function Tbe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(O$.compareFunction=A3,s=O$):s=Qte,t.setTexture2D(e||s,r)}function Ebe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||Jte,r)}function wbe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||ene,r)}function Mbe(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||Zte,r)}function Cbe(i){switch(i){case 5126:return cbe;case 35664:return ube;case 35665:return fbe;case 35666:return hbe;case 35674:return dbe;case 35675:return pbe;case 35676:return Abe;case 5124:case 35670:return mbe;case 35667:case 35671:return gbe;case 35668:case 35672:return ybe;case 35669:case 35673:return vbe;case 5125:return xbe;case 36294:return bbe;case 36295:return _be;case 36296:return Sbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Tbe;case 35679:case 36299:case 36307:return Ebe;case 35680:case 36300:case 36308:case 36293:return wbe;case 36289:case 36303:case 36311:case 36292:return Mbe}}function Rbe(i,e){i.uniform1fv(this.addr,e)}function Dbe(i,e){const t=lT(e,this.size,2);i.uniform2fv(this.addr,t)}function Lbe(i,e){const t=lT(e,this.size,3);i.uniform3fv(this.addr,t)}function Pbe(i,e){const t=lT(e,this.size,4);i.uniform4fv(this.addr,t)}function Nbe(i,e){const t=lT(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Bbe(i,e){const t=lT(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Ibe(i,e){const t=lT(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Obe(i,e){i.uniform1iv(this.addr,e)}function Fbe(i,e){i.uniform2iv(this.addr,e)}function Ube(i,e){i.uniform3iv(this.addr,e)}function kbe(i,e){i.uniform4iv(this.addr,e)}function Gbe(i,e){i.uniform1uiv(this.addr,e)}function zbe(i,e){i.uniform2uiv(this.addr,e)}function Hbe(i,e){i.uniform3uiv(this.addr,e)}function Vbe(i,e){i.uniform4uiv(this.addr,e)}function qbe(i,e,t){const n=this.cache,r=e.length,s=BP(t,r);tl(n,s)||(i.uniform1iv(this.addr,s),nl(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Qte,s[o])}function $be(i,e,t){const n=this.cache,r=e.length,s=BP(t,r);tl(n,s)||(i.uniform1iv(this.addr,s),nl(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Jte,s[o])}function jbe(i,e,t){const n=this.cache,r=e.length,s=BP(t,r);tl(n,s)||(i.uniform1iv(this.addr,s),nl(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||ene,s[o])}function Wbe(i,e,t){const n=this.cache,r=e.length,s=BP(t,r);tl(n,s)||(i.uniform1iv(this.addr,s),nl(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Zte,s[o])}function Kbe(i){switch(i){case 5126:return Rbe;case 35664:return Dbe;case 35665:return Lbe;case 35666:return Pbe;case 35674:return Nbe;case 35675:return Bbe;case 35676:return Ibe;case 5124:case 35670:return Obe;case 35667:case 35671:return Fbe;case 35668:case 35672:return Ube;case 35669:case 35673:return kbe;case 5125:return Gbe;case 36294:return zbe;case 36295:return Hbe;case 36296:return Vbe;case 35678:case 36198:case 36298:case 36306:case 35682:return qbe;case 35679:case 36299:case 36307:return $be;case 35680:case 36300:case 36308:case 36293:return jbe;case 36289:case 36303:case 36311:case 36292:return Wbe}}class Ybe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Cbe(t.type)}}class Xbe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Kbe(t.type)}}class Qbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const S6=/(\w+)(\])?(\[|\.)?/g;function H$(i,e){i.seq.push(e),i.map[e.id]=e}function Zbe(i,e,t){const n=i.name,r=n.length;for(S6.lastIndex=0;;){const s=S6.exec(n),o=S6.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){H$(t,c===void 0?new Ybe(a,i,e):new Xbe(a,i,e));break}else{let f=t.map[a];f===void 0&&(f=new Qbe(a),H$(t,f)),t=f}}}class X4{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Zbe(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function V$(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Jbe=37297;let e_e=0;function t_e(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}const q$=new Si;function n_e(i){Oi._getMatrix(q$,Oi.workingColorSpace,i);const e=`mat3( ${q$.elements.map(t=>t.toFixed(4))} )`;switch(Oi.getTransfer(i)){case lM:return[e,"LinearTransferOETF"];case $r:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function $$(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+t_e(i.getShaderSource(e),o)}else return r}function i_e(i,e){const t=n_e(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function r_e(i,e){let t;switch(e){case z7:t="Linear";break;case H7:t="Reinhard";break;case V7:t="Cineon";break;case eP:t="ACESFilmic";break;case q7:t="AgX";break;case $7:t="Neutral";break;case Yee:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const A5=new he;function s_e(){Oi.getLuminanceCoefficients(A5);const i=A5.x.toFixed(4),e=A5.y.toFixed(4),t=A5.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function o_e(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pw).join(`
`)}function a_e(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function l_e(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function pw(i){return i!==""}function j$(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function W$(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const c_e=/^[ \t]*#include +<([\w\d./]+)>/gm;function DF(i){return i.replace(c_e,f_e)}const u_e=new Map;function f_e(i,e){let t=Qi[e];if(t===void 0){const n=u_e.get(e);if(n!==void 0)t=Qi[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return DF(t)}const h_e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function K$(i){return i.replace(h_e,d_e)}function d_e(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Y$(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function p_e(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===c3?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Dw?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===eu&&(e="SHADOWMAP_TYPE_VSM"),e}function A_e(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case pu:case uf:e="ENVMAP_TYPE_CUBE";break;case eg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function m_e(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case uf:e="ENVMAP_MODE_REFRACTION";break}return e}function g_e(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case XS:e="ENVMAP_BLENDING_MULTIPLY";break;case k7:e="ENVMAP_BLENDING_MIX";break;case G7:e="ENVMAP_BLENDING_ADD";break}return e}function y_e(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function v_e(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=p_e(t),c=A_e(t),u=m_e(t),f=g_e(t),h=y_e(t),p=o_e(t),m=a_e(s),g=r.createProgram();let b,T,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(pw).join(`
`),b.length>0&&(b+=`
`),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(pw).join(`
`),T.length>0&&(T+=`
`)):(b=[Y$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pw).join(`
`),T=[Y$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Sc?"#define TONE_MAPPING":"",t.toneMapping!==Sc?Qi.tonemapping_pars_fragment:"",t.toneMapping!==Sc?r_e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Qi.colorspace_pars_fragment,i_e("linearToOutputTexel",t.outputColorSpace),s_e(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(pw).join(`
`)),o=DF(o),o=j$(o,t),o=W$(o,t),a=DF(a),a=j$(a,t),a=W$(a,t),o=K$(o),a=K$(a),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,b=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,T=["#define varying in",t.glslVersion===_F?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===_F?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const R=C+b+o,P=C+T+a,I=V$(r,r.VERTEX_SHADER,R),F=V$(r,r.FRAGMENT_SHADER,P);r.attachShader(g,I),r.attachShader(g,F),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g);function k($){if(i.debug.checkShaderErrors){const ee=r.getProgramInfoLog(g).trim(),Y=r.getShaderInfoLog(I).trim(),oe=r.getShaderInfoLog(F).trim();let re=!0,Q=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(re=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,g,I,F);else{const se=$$(r,I,"vertex"),le=$$(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Material Name: `+$.name+`
Material Type: `+$.type+`

Program Info Log: `+ee+`
`+se+`
`+le)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(Y===""||oe==="")&&(Q=!1);Q&&($.diagnostics={runnable:re,programLog:ee,vertexShader:{log:Y,prefix:b},fragmentShader:{log:oe,prefix:T}})}r.deleteShader(I),r.deleteShader(F),q=new X4(r,g),H=l_e(r,g)}let q;this.getUniforms=function(){return q===void 0&&k(this),q};let H;this.getAttributes=function(){return H===void 0&&k(this),H};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=r.getProgramParameter(g,Jbe)),O},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=e_e++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=I,this.fragmentShader=F,this}let x_e=0;class b_e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new __e(e),t.set(e,n)),n}}class __e{constructor(e){this.id=x_e++,this.code=e,this.usedTimes=0}}function S_e(i,e,t,n,r,s,o){const a=new uS,l=new b_e,c=new Set,u=[],f=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(H){return c.add(H),H===0?"uv":`uv${H}`}function b(H,O,$,ee,Y){const oe=ee.fog,re=Y.geometry,Q=H.isMeshStandardMaterial?ee.environment:null,se=(H.isMeshStandardMaterial?t:e).get(H.envMap||Q),le=se&&se.mapping===eg?se.image.height:null,de=m[H.type];H.precision!==null&&(p=r.getMaxPrecision(H.precision),p!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",p,"instead."));const ie=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,ge=ie!==void 0?ie.length:0;let Ce=0;re.morphAttributes.position!==void 0&&(Ce=1),re.morphAttributes.normal!==void 0&&(Ce=2),re.morphAttributes.color!==void 0&&(Ce=3);let Ie,Ee,Be,qe;if(de){const Gn=nu[de];Ie=Gn.vertexShader,Ee=Gn.fragmentShader}else Ie=H.vertexShader,Ee=H.fragmentShader,l.update(H),Be=l.getVertexShaderID(H),qe=l.getFragmentShaderID(H);const it=i.getRenderTarget(),et=i.state.buffers.depth.getReversed(),Ht=Y.isInstancedMesh===!0,_t=Y.isBatchedMesh===!0,$t=!!H.map,mt=!!H.matcap,ut=!!se,we=!!H.aoMap,Jt=!!H.lightMap,ft=!!H.bumpMap,Dt=!!H.normalMap,Rt=!!H.displacementMap,yn=!!H.emissiveMap,Gt=!!H.metalnessMap,Se=!!H.roughnessMap,fe=H.anisotropy>0,Pe=H.clearcoat>0,Ve=H.dispersion>0,Tt=H.iridescence>0,bt=H.sheen>0,sn=H.transmission>0,on=fe&&!!H.anisotropyMap,mn=Pe&&!!H.clearcoatMap,ai=Pe&&!!H.clearcoatNormalMap,Vt=Pe&&!!H.clearcoatRoughnessMap,_n=Tt&&!!H.iridescenceMap,En=Tt&&!!H.iridescenceThicknessMap,pn=bt&&!!H.sheenColorMap,Sn=bt&&!!H.sheenRoughnessMap,Fe=!!H.specularMap,xt=!!H.specularColorMap,dn=!!H.specularIntensityMap,Te=sn&&!!H.transmissionMap,tn=sn&&!!H.thicknessMap,At=!!H.gradientMap,Lt=!!H.alphaMap,vn=H.alphaTest>0,xn=!!H.alphaHash,Nn=!!H.extensions;let Fi=Sc;H.toneMapped&&(it===null||it.isXRRenderTarget===!0)&&(Fi=i.toneMapping);const Dn={shaderID:de,shaderType:H.type,shaderName:H.name,vertexShader:Ie,fragmentShader:Ee,defines:H.defines,customVertexShaderID:Be,customFragmentShaderID:qe,isRawShaderMaterial:H.isRawShaderMaterial===!0,glslVersion:H.glslVersion,precision:p,batching:_t,batchingColor:_t&&Y._colorsTexture!==null,instancing:Ht,instancingColor:Ht&&Y.instanceColor!==null,instancingMorph:Ht&&Y.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:it===null?i.outputColorSpace:it.isXRRenderTarget===!0?it.texture.colorSpace:hu,alphaToCoverage:!!H.alphaToCoverage,map:$t,matcap:mt,envMap:ut,envMapMode:ut&&se.mapping,envMapCubeUVHeight:le,aoMap:we,lightMap:Jt,bumpMap:ft,normalMap:Dt,displacementMap:h&&Rt,emissiveMap:yn,normalMapObjectSpace:Dt&&H.normalMapType===K7,normalMapTangentSpace:Dt&&H.normalMapType===cA,metalnessMap:Gt,roughnessMap:Se,anisotropy:fe,anisotropyMap:on,clearcoat:Pe,clearcoatMap:mn,clearcoatNormalMap:ai,clearcoatRoughnessMap:Vt,dispersion:Ve,iridescence:Tt,iridescenceMap:_n,iridescenceThicknessMap:En,sheen:bt,sheenColorMap:pn,sheenRoughnessMap:Sn,specularMap:Fe,specularColorMap:xt,specularIntensityMap:dn,transmission:sn,transmissionMap:Te,thicknessMap:tn,gradientMap:At,opaque:H.transparent===!1&&H.blending===fu&&H.alphaToCoverage===!1,alphaMap:Lt,alphaTest:vn,alphaHash:xn,combine:H.combine,mapUv:$t&&g(H.map.channel),aoMapUv:we&&g(H.aoMap.channel),lightMapUv:Jt&&g(H.lightMap.channel),bumpMapUv:ft&&g(H.bumpMap.channel),normalMapUv:Dt&&g(H.normalMap.channel),displacementMapUv:Rt&&g(H.displacementMap.channel),emissiveMapUv:yn&&g(H.emissiveMap.channel),metalnessMapUv:Gt&&g(H.metalnessMap.channel),roughnessMapUv:Se&&g(H.roughnessMap.channel),anisotropyMapUv:on&&g(H.anisotropyMap.channel),clearcoatMapUv:mn&&g(H.clearcoatMap.channel),clearcoatNormalMapUv:ai&&g(H.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Vt&&g(H.clearcoatRoughnessMap.channel),iridescenceMapUv:_n&&g(H.iridescenceMap.channel),iridescenceThicknessMapUv:En&&g(H.iridescenceThicknessMap.channel),sheenColorMapUv:pn&&g(H.sheenColorMap.channel),sheenRoughnessMapUv:Sn&&g(H.sheenRoughnessMap.channel),specularMapUv:Fe&&g(H.specularMap.channel),specularColorMapUv:xt&&g(H.specularColorMap.channel),specularIntensityMapUv:dn&&g(H.specularIntensityMap.channel),transmissionMapUv:Te&&g(H.transmissionMap.channel),thicknessMapUv:tn&&g(H.thicknessMap.channel),alphaMapUv:Lt&&g(H.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(Dt||fe),vertexColors:H.vertexColors,vertexAlphas:H.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:Y.isPoints===!0&&!!re.attributes.uv&&($t||Lt),fog:!!oe,useFog:H.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:H.flatShading===!0,sizeAttenuation:H.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:et,skinning:Y.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:Ce,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:H.dithering,shadowMapEnabled:i.shadowMap.enabled&&$.length>0,shadowMapType:i.shadowMap.type,toneMapping:Fi,decodeVideoTexture:$t&&H.map.isVideoTexture===!0&&Oi.getTransfer(H.map.colorSpace)===$r,decodeVideoTextureEmissive:yn&&H.emissiveMap.isVideoTexture===!0&&Oi.getTransfer(H.emissiveMap.colorSpace)===$r,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===Do,flipSided:H.side===Bs,useDepthPacking:H.depthPacking>=0,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionClipCullDistance:Nn&&H.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Nn&&H.extensions.multiDraw===!0||_t)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:H.customProgramCacheKey()};return Dn.vertexUv1s=c.has(1),Dn.vertexUv2s=c.has(2),Dn.vertexUv3s=c.has(3),c.clear(),Dn}function T(H){const O=[];if(H.shaderID?O.push(H.shaderID):(O.push(H.customVertexShaderID),O.push(H.customFragmentShaderID)),H.defines!==void 0)for(const $ in H.defines)O.push($),O.push(H.defines[$]);return H.isRawShaderMaterial===!1&&(C(O,H),R(O,H),O.push(i.outputColorSpace)),O.push(H.customProgramCacheKey),O.join()}function C(H,O){H.push(O.precision),H.push(O.outputColorSpace),H.push(O.envMapMode),H.push(O.envMapCubeUVHeight),H.push(O.mapUv),H.push(O.alphaMapUv),H.push(O.lightMapUv),H.push(O.aoMapUv),H.push(O.bumpMapUv),H.push(O.normalMapUv),H.push(O.displacementMapUv),H.push(O.emissiveMapUv),H.push(O.metalnessMapUv),H.push(O.roughnessMapUv),H.push(O.anisotropyMapUv),H.push(O.clearcoatMapUv),H.push(O.clearcoatNormalMapUv),H.push(O.clearcoatRoughnessMapUv),H.push(O.iridescenceMapUv),H.push(O.iridescenceThicknessMapUv),H.push(O.sheenColorMapUv),H.push(O.sheenRoughnessMapUv),H.push(O.specularMapUv),H.push(O.specularColorMapUv),H.push(O.specularIntensityMapUv),H.push(O.transmissionMapUv),H.push(O.thicknessMapUv),H.push(O.combine),H.push(O.fogExp2),H.push(O.sizeAttenuation),H.push(O.morphTargetsCount),H.push(O.morphAttributeCount),H.push(O.numDirLights),H.push(O.numPointLights),H.push(O.numSpotLights),H.push(O.numSpotLightMaps),H.push(O.numHemiLights),H.push(O.numRectAreaLights),H.push(O.numDirLightShadows),H.push(O.numPointLightShadows),H.push(O.numSpotLightShadows),H.push(O.numSpotLightShadowsWithMaps),H.push(O.numLightProbes),H.push(O.shadowMapType),H.push(O.toneMapping),H.push(O.numClippingPlanes),H.push(O.numClipIntersection),H.push(O.depthPacking)}function R(H,O){a.disableAll(),O.supportsVertexTextures&&a.enable(0),O.instancing&&a.enable(1),O.instancingColor&&a.enable(2),O.instancingMorph&&a.enable(3),O.matcap&&a.enable(4),O.envMap&&a.enable(5),O.normalMapObjectSpace&&a.enable(6),O.normalMapTangentSpace&&a.enable(7),O.clearcoat&&a.enable(8),O.iridescence&&a.enable(9),O.alphaTest&&a.enable(10),O.vertexColors&&a.enable(11),O.vertexAlphas&&a.enable(12),O.vertexUv1s&&a.enable(13),O.vertexUv2s&&a.enable(14),O.vertexUv3s&&a.enable(15),O.vertexTangents&&a.enable(16),O.anisotropy&&a.enable(17),O.alphaHash&&a.enable(18),O.batching&&a.enable(19),O.dispersion&&a.enable(20),O.batchingColor&&a.enable(21),H.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.reverseDepthBuffer&&a.enable(4),O.skinning&&a.enable(5),O.morphTargets&&a.enable(6),O.morphNormals&&a.enable(7),O.morphColors&&a.enable(8),O.premultipliedAlpha&&a.enable(9),O.shadowMapEnabled&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.transmission&&a.enable(15),O.sheen&&a.enable(16),O.opaque&&a.enable(17),O.pointsUvs&&a.enable(18),O.decodeVideoTexture&&a.enable(19),O.decodeVideoTextureEmissive&&a.enable(20),O.alphaToCoverage&&a.enable(21),H.push(a.mask)}function P(H){const O=m[H.type];let $;if(O){const ee=nu[O];$=g3.clone(ee.uniforms)}else $=H.uniforms;return $}function I(H,O){let $;for(let ee=0,Y=u.length;ee<Y;ee++){const oe=u[ee];if(oe.cacheKey===O){$=oe,++$.usedTimes;break}}return $===void 0&&($=new v_e(i,O,H,s),u.push($)),$}function F(H){if(--H.usedTimes===0){const O=u.indexOf(H);u[O]=u[u.length-1],u.pop(),H.destroy()}}function k(H){l.remove(H)}function q(){l.dispose()}return{getParameters:b,getProgramCacheKey:T,getUniforms:P,acquireProgram:I,releaseProgram:F,releaseShaderCache:k,programs:u,dispose:q}}function T_e(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function E_e(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function X$(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Q$(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(f,h,p,m,g,b){let T=i[e];return T===void 0?(T={id:f.id,object:f,geometry:h,material:p,groupOrder:m,renderOrder:f.renderOrder,z:g,group:b},i[e]=T):(T.id=f.id,T.object=f,T.geometry=h,T.material=p,T.groupOrder=m,T.renderOrder=f.renderOrder,T.z=g,T.group=b),e++,T}function a(f,h,p,m,g,b){const T=o(f,h,p,m,g,b);p.transmission>0?n.push(T):p.transparent===!0?r.push(T):t.push(T)}function l(f,h,p,m,g,b){const T=o(f,h,p,m,g,b);p.transmission>0?n.unshift(T):p.transparent===!0?r.unshift(T):t.unshift(T)}function c(f,h){t.length>1&&t.sort(f||E_e),n.length>1&&n.sort(h||X$),r.length>1&&r.sort(h||X$)}function u(){for(let f=e,h=i.length;f<h;f++){const p=i[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function w_e(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new Q$,i.set(n,[o])):r>=s.length?(o=new Q$,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function M_e(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new Qt};break;case"SpotLight":t={position:new he,direction:new he,color:new Qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new Qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new Qt,groundColor:new Qt};break;case"RectAreaLight":t={color:new Qt,position:new he,halfWidth:new he,halfHeight:new he};break}return i[e.id]=t,t}}}function C_e(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new at};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new at};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new at,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let R_e=0;function D_e(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function L_e(i){const e=new M_e,t=C_e(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new he);const r=new he,s=new rn,o=new rn;function a(c){let u=0,f=0,h=0;for(let H=0;H<9;H++)n.probe[H].set(0,0,0);let p=0,m=0,g=0,b=0,T=0,C=0,R=0,P=0,I=0,F=0,k=0;c.sort(D_e);for(let H=0,O=c.length;H<O;H++){const $=c[H],ee=$.color,Y=$.intensity,oe=$.distance,re=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)u+=ee.r*Y,f+=ee.g*Y,h+=ee.b*Y;else if($.isLightProbe){for(let Q=0;Q<9;Q++)n.probe[Q].addScaledVector($.sh.coefficients[Q],Y);k++}else if($.isDirectionalLight){const Q=e.get($);if(Q.color.copy($.color).multiplyScalar($.intensity),$.castShadow){const se=$.shadow,le=t.get($);le.shadowIntensity=se.intensity,le.shadowBias=se.bias,le.shadowNormalBias=se.normalBias,le.shadowRadius=se.radius,le.shadowMapSize=se.mapSize,n.directionalShadow[p]=le,n.directionalShadowMap[p]=re,n.directionalShadowMatrix[p]=$.shadow.matrix,C++}n.directional[p]=Q,p++}else if($.isSpotLight){const Q=e.get($);Q.position.setFromMatrixPosition($.matrixWorld),Q.color.copy(ee).multiplyScalar(Y),Q.distance=oe,Q.coneCos=Math.cos($.angle),Q.penumbraCos=Math.cos($.angle*(1-$.penumbra)),Q.decay=$.decay,n.spot[g]=Q;const se=$.shadow;if($.map&&(n.spotLightMap[I]=$.map,I++,se.updateMatrices($),$.castShadow&&F++),n.spotLightMatrix[g]=se.matrix,$.castShadow){const le=t.get($);le.shadowIntensity=se.intensity,le.shadowBias=se.bias,le.shadowNormalBias=se.normalBias,le.shadowRadius=se.radius,le.shadowMapSize=se.mapSize,n.spotShadow[g]=le,n.spotShadowMap[g]=re,P++}g++}else if($.isRectAreaLight){const Q=e.get($);Q.color.copy(ee).multiplyScalar(Y),Q.halfWidth.set($.width*.5,0,0),Q.halfHeight.set(0,$.height*.5,0),n.rectArea[b]=Q,b++}else if($.isPointLight){const Q=e.get($);if(Q.color.copy($.color).multiplyScalar($.intensity),Q.distance=$.distance,Q.decay=$.decay,$.castShadow){const se=$.shadow,le=t.get($);le.shadowIntensity=se.intensity,le.shadowBias=se.bias,le.shadowNormalBias=se.normalBias,le.shadowRadius=se.radius,le.shadowMapSize=se.mapSize,le.shadowCameraNear=se.camera.near,le.shadowCameraFar=se.camera.far,n.pointShadow[m]=le,n.pointShadowMap[m]=re,n.pointShadowMatrix[m]=$.shadow.matrix,R++}n.point[m]=Q,m++}else if($.isHemisphereLight){const Q=e.get($);Q.skyColor.copy($.color).multiplyScalar(Y),Q.groundColor.copy($.groundColor).multiplyScalar(Y),n.hemi[T]=Q,T++}}b>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=wn.LTC_FLOAT_1,n.rectAreaLTC2=wn.LTC_FLOAT_2):(n.rectAreaLTC1=wn.LTC_HALF_1,n.rectAreaLTC2=wn.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=h;const q=n.hash;(q.directionalLength!==p||q.pointLength!==m||q.spotLength!==g||q.rectAreaLength!==b||q.hemiLength!==T||q.numDirectionalShadows!==C||q.numPointShadows!==R||q.numSpotShadows!==P||q.numSpotMaps!==I||q.numLightProbes!==k)&&(n.directional.length=p,n.spot.length=g,n.rectArea.length=b,n.point.length=m,n.hemi.length=T,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=P,n.spotShadowMap.length=P,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=P+I-F,n.spotLightMap.length=I,n.numSpotLightShadowsWithMaps=F,n.numLightProbes=k,q.directionalLength=p,q.pointLength=m,q.spotLength=g,q.rectAreaLength=b,q.hemiLength=T,q.numDirectionalShadows=C,q.numPointShadows=R,q.numSpotShadows=P,q.numSpotMaps=I,q.numLightProbes=k,n.version=R_e++)}function l(c,u){let f=0,h=0,p=0,m=0,g=0;const b=u.matrixWorldInverse;for(let T=0,C=c.length;T<C;T++){const R=c[T];if(R.isDirectionalLight){const P=n.directional[f];P.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(b),f++}else if(R.isSpotLight){const P=n.spot[p];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(b),P.direction.setFromMatrixPosition(R.matrixWorld),r.setFromMatrixPosition(R.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(b),p++}else if(R.isRectAreaLight){const P=n.rectArea[m];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(b),o.identity(),s.copy(R.matrixWorld),s.premultiply(b),o.extractRotation(s),P.halfWidth.set(R.width*.5,0,0),P.halfHeight.set(0,R.height*.5,0),P.halfWidth.applyMatrix4(o),P.halfHeight.applyMatrix4(o),m++}else if(R.isPointLight){const P=n.point[h];P.position.setFromMatrixPosition(R.matrixWorld),P.position.applyMatrix4(b),h++}else if(R.isHemisphereLight){const P=n.hemi[g];P.direction.setFromMatrixPosition(R.matrixWorld),P.direction.transformDirection(b),g++}}}return{setup:a,setupView:l,state:n}}function Z$(i){const e=new L_e(i),t=[],n=[];function r(u){c.camera=u,t.length=0,n.length=0}function s(u){t.push(u)}function o(u){n.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function P_e(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new Z$(i),e.set(r,[a])):s>=o.length?(a=new Z$(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}const N_e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,B_e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function I_e(i,e,t){let n=new ab;const r=new at,s=new at,o=new Ln,a=new m9({depthPacking:ite}),l=new g9,c={},u=t.maxTextureSize,f={[sh]:Bs,[Bs]:sh,[Do]:Do},h=new jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new at},radius:{value:4}},vertexShader:N_e,fragmentShader:B_e}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new qn;m.setAttribute("position",new qi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new zi(m,h),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c3;let T=this.type;this.render=function(F,k,q){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||F.length===0)return;const H=i.getRenderTarget(),O=i.getActiveCubeFace(),$=i.getActiveMipmapLevel(),ee=i.state;ee.setBlending(uu),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const Y=T!==eu&&this.type===eu,oe=T===eu&&this.type!==eu;for(let re=0,Q=F.length;re<Q;re++){const se=F[re],le=se.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;r.copy(le.mapSize);const de=le.getFrameExtents();if(r.multiply(de),s.copy(le.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/de.x),r.x=s.x*de.x,le.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/de.y),r.y=s.y*de.y,le.mapSize.y=s.y)),le.map===null||Y===!0||oe===!0){const ge=this.type!==eu?{minFilter:Ps,magFilter:Ps}:{};le.map!==null&&le.map.dispose(),le.map=new xd(r.x,r.y,ge),le.map.texture.name=se.name+".shadowMap",le.camera.updateProjectionMatrix()}i.setRenderTarget(le.map),i.clear();const ie=le.getViewportCount();for(let ge=0;ge<ie;ge++){const Ce=le.getViewport(ge);o.set(s.x*Ce.x,s.y*Ce.y,s.x*Ce.z,s.y*Ce.w),ee.viewport(o),le.updateMatrices(se,ge),n=le.getFrustum(),P(k,q,le.camera,se,this.type)}le.isPointLightShadow!==!0&&this.type===eu&&C(le,q),le.needsUpdate=!1}T=this.type,b.needsUpdate=!1,i.setRenderTarget(H,O,$)};function C(F,k){const q=e.update(g);h.defines.VSM_SAMPLES!==F.blurSamples&&(h.defines.VSM_SAMPLES=F.blurSamples,p.defines.VSM_SAMPLES=F.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new xd(r.x,r.y)),h.uniforms.shadow_pass.value=F.map.texture,h.uniforms.resolution.value=F.mapSize,h.uniforms.radius.value=F.radius,i.setRenderTarget(F.mapPass),i.clear(),i.renderBufferDirect(k,null,q,h,g,null),p.uniforms.shadow_pass.value=F.mapPass.texture,p.uniforms.resolution.value=F.mapSize,p.uniforms.radius.value=F.radius,i.setRenderTarget(F.map),i.clear(),i.renderBufferDirect(k,null,q,p,g,null)}function R(F,k,q,H){let O=null;const $=q.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if($!==void 0)O=$;else if(O=q.isPointLight===!0?l:a,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const ee=O.uuid,Y=k.uuid;let oe=c[ee];oe===void 0&&(oe={},c[ee]=oe);let re=oe[Y];re===void 0&&(re=O.clone(),oe[Y]=re,k.addEventListener("dispose",I)),O=re}if(O.visible=k.visible,O.wireframe=k.wireframe,H===eu?O.side=k.shadowSide!==null?k.shadowSide:k.side:O.side=k.shadowSide!==null?k.shadowSide:f[k.side],O.alphaMap=k.alphaMap,O.alphaTest=k.alphaTest,O.map=k.map,O.clipShadows=k.clipShadows,O.clippingPlanes=k.clippingPlanes,O.clipIntersection=k.clipIntersection,O.displacementMap=k.displacementMap,O.displacementScale=k.displacementScale,O.displacementBias=k.displacementBias,O.wireframeLinewidth=k.wireframeLinewidth,O.linewidth=k.linewidth,q.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const ee=i.properties.get(O);ee.light=q}return O}function P(F,k,q,H,O){if(F.visible===!1)return;if(F.layers.test(k.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&O===eu)&&(!F.frustumCulled||n.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,F.matrixWorld);const Y=e.update(F),oe=F.material;if(Array.isArray(oe)){const re=Y.groups;for(let Q=0,se=re.length;Q<se;Q++){const le=re[Q],de=oe[le.materialIndex];if(de&&de.visible){const ie=R(F,de,H,O);F.onBeforeShadow(i,F,k,q,Y,ie,le),i.renderBufferDirect(q,null,Y,ie,F,le),F.onAfterShadow(i,F,k,q,Y,ie,le)}}}else if(oe.visible){const re=R(F,oe,H,O);F.onBeforeShadow(i,F,k,q,Y,re,null),i.renderBufferDirect(q,null,Y,re,F,null),F.onAfterShadow(i,F,k,q,Y,re,null)}}const ee=F.children;for(let Y=0,oe=ee.length;Y<oe;Y++)P(ee[Y],k,q,H,O)}function I(F){F.target.removeEventListener("dispose",I);for(const q in c){const H=c[q],O=F.target.uuid;O in H&&(H[O].dispose(),delete H[O])}}}const O_e={[$2]:j2,[W2]:X2,[K2]:Q2,[Jm]:Y2,[j2]:$2,[X2]:W2,[Q2]:K2,[Y2]:Jm};function F_e(i,e){function t(){let Te=!1;const tn=new Ln;let At=null;const Lt=new Ln(0,0,0,0);return{setMask:function(vn){At!==vn&&!Te&&(i.colorMask(vn,vn,vn,vn),At=vn)},setLocked:function(vn){Te=vn},setClear:function(vn,xn,Nn,Fi,Dn){Dn===!0&&(vn*=Fi,xn*=Fi,Nn*=Fi),tn.set(vn,xn,Nn,Fi),Lt.equals(tn)===!1&&(i.clearColor(vn,xn,Nn,Fi),Lt.copy(tn))},reset:function(){Te=!1,At=null,Lt.set(-1,0,0,0)}}}function n(){let Te=!1,tn=!1,At=null,Lt=null,vn=null;return{setReversed:function(xn){if(tn!==xn){const Nn=e.get("EXT_clip_control");tn?Nn.clipControlEXT(Nn.LOWER_LEFT_EXT,Nn.ZERO_TO_ONE_EXT):Nn.clipControlEXT(Nn.LOWER_LEFT_EXT,Nn.NEGATIVE_ONE_TO_ONE_EXT);const Fi=vn;vn=null,this.setClear(Fi)}tn=xn},getReversed:function(){return tn},setTest:function(xn){xn?it(i.DEPTH_TEST):et(i.DEPTH_TEST)},setMask:function(xn){At!==xn&&!Te&&(i.depthMask(xn),At=xn)},setFunc:function(xn){if(tn&&(xn=O_e[xn]),Lt!==xn){switch(xn){case $2:i.depthFunc(i.NEVER);break;case j2:i.depthFunc(i.ALWAYS);break;case W2:i.depthFunc(i.LESS);break;case Jm:i.depthFunc(i.LEQUAL);break;case K2:i.depthFunc(i.EQUAL);break;case Y2:i.depthFunc(i.GEQUAL);break;case X2:i.depthFunc(i.GREATER);break;case Q2:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Lt=xn}},setLocked:function(xn){Te=xn},setClear:function(xn){vn!==xn&&(tn&&(xn=1-xn),i.clearDepth(xn),vn=xn)},reset:function(){Te=!1,At=null,Lt=null,vn=null,tn=!1}}}function r(){let Te=!1,tn=null,At=null,Lt=null,vn=null,xn=null,Nn=null,Fi=null,Dn=null;return{setTest:function(Gn){Te||(Gn?it(i.STENCIL_TEST):et(i.STENCIL_TEST))},setMask:function(Gn){tn!==Gn&&!Te&&(i.stencilMask(Gn),tn=Gn)},setFunc:function(Gn,Gr,Qr){(At!==Gn||Lt!==Gr||vn!==Qr)&&(i.stencilFunc(Gn,Gr,Qr),At=Gn,Lt=Gr,vn=Qr)},setOp:function(Gn,Gr,Qr){(xn!==Gn||Nn!==Gr||Fi!==Qr)&&(i.stencilOp(Gn,Gr,Qr),xn=Gn,Nn=Gr,Fi=Qr)},setLocked:function(Gn){Te=Gn},setClear:function(Gn){Dn!==Gn&&(i.clearStencil(Gn),Dn=Gn)},reset:function(){Te=!1,tn=null,At=null,Lt=null,vn=null,xn=null,Nn=null,Fi=null,Dn=null}}}const s=new t,o=new n,a=new r,l=new WeakMap,c=new WeakMap;let u={},f={},h=new WeakMap,p=[],m=null,g=!1,b=null,T=null,C=null,R=null,P=null,I=null,F=null,k=new Qt(0,0,0),q=0,H=!1,O=null,$=null,ee=null,Y=null,oe=null;const re=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,se=0;const le=i.getParameter(i.VERSION);le.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(le)[1]),Q=se>=1):le.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),Q=se>=2);let de=null,ie={};const ge=i.getParameter(i.SCISSOR_BOX),Ce=i.getParameter(i.VIEWPORT),Ie=new Ln().fromArray(ge),Ee=new Ln().fromArray(Ce);function Be(Te,tn,At,Lt){const vn=new Uint8Array(4),xn=i.createTexture();i.bindTexture(Te,xn),i.texParameteri(Te,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Te,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Nn=0;Nn<At;Nn++)Te===i.TEXTURE_3D||Te===i.TEXTURE_2D_ARRAY?i.texImage3D(tn,0,i.RGBA,1,1,Lt,0,i.RGBA,i.UNSIGNED_BYTE,vn):i.texImage2D(tn+Nn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,vn);return xn}const qe={};qe[i.TEXTURE_2D]=Be(i.TEXTURE_2D,i.TEXTURE_2D,1),qe[i.TEXTURE_CUBE_MAP]=Be(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),qe[i.TEXTURE_2D_ARRAY]=Be(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),qe[i.TEXTURE_3D]=Be(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),it(i.DEPTH_TEST),o.setFunc(Jm),ft(!1),Dt(ND),it(i.CULL_FACE),we(uu);function it(Te){u[Te]!==!0&&(i.enable(Te),u[Te]=!0)}function et(Te){u[Te]!==!1&&(i.disable(Te),u[Te]=!1)}function Ht(Te,tn){return f[Te]!==tn?(i.bindFramebuffer(Te,tn),f[Te]=tn,Te===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=tn),Te===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=tn),!0):!1}function _t(Te,tn){let At=p,Lt=!1;if(Te){At=h.get(tn),At===void 0&&(At=[],h.set(tn,At));const vn=Te.textures;if(At.length!==vn.length||At[0]!==i.COLOR_ATTACHMENT0){for(let xn=0,Nn=vn.length;xn<Nn;xn++)At[xn]=i.COLOR_ATTACHMENT0+xn;At.length=vn.length,Lt=!0}}else At[0]!==i.BACK&&(At[0]=i.BACK,Lt=!0);Lt&&i.drawBuffers(At)}function $t(Te){return m!==Te?(i.useProgram(Te),m=Te,!0):!1}const mt={[Ku]:i.FUNC_ADD,[V8]:i.FUNC_SUBTRACT,[q8]:i.FUNC_REVERSE_SUBTRACT};mt[F7]=i.MIN,mt[U7]=i.MAX;const ut={[$8]:i.ZERO,[j8]:i.ONE,[W8]:i.SRC_COLOR,[V2]:i.SRC_ALPHA,[J8]:i.SRC_ALPHA_SATURATE,[Q8]:i.DST_COLOR,[Y8]:i.DST_ALPHA,[K8]:i.ONE_MINUS_SRC_COLOR,[q2]:i.ONE_MINUS_SRC_ALPHA,[Z8]:i.ONE_MINUS_DST_COLOR,[X8]:i.ONE_MINUS_DST_ALPHA,[$ee]:i.CONSTANT_COLOR,[jee]:i.ONE_MINUS_CONSTANT_COLOR,[Wee]:i.CONSTANT_ALPHA,[Kee]:i.ONE_MINUS_CONSTANT_ALPHA};function we(Te,tn,At,Lt,vn,xn,Nn,Fi,Dn,Gn){if(Te===uu){g===!0&&(et(i.BLEND),g=!1);return}if(g===!1&&(it(i.BLEND),g=!0),Te!==H8){if(Te!==b||Gn!==H){if((T!==Ku||P!==Ku)&&(i.blendEquation(i.FUNC_ADD),T=Ku,P=Ku),Gn)switch(Te){case fu:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case xx:i.blendFunc(i.ONE,i.ONE);break;case bx:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case _x:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case fu:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case xx:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case bx:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case _x:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}C=null,R=null,I=null,F=null,k.set(0,0,0),q=0,b=Te,H=Gn}return}vn=vn||tn,xn=xn||At,Nn=Nn||Lt,(tn!==T||vn!==P)&&(i.blendEquationSeparate(mt[tn],mt[vn]),T=tn,P=vn),(At!==C||Lt!==R||xn!==I||Nn!==F)&&(i.blendFuncSeparate(ut[At],ut[Lt],ut[xn],ut[Nn]),C=At,R=Lt,I=xn,F=Nn),(Fi.equals(k)===!1||Dn!==q)&&(i.blendColor(Fi.r,Fi.g,Fi.b,Dn),k.copy(Fi),q=Dn),b=Te,H=!1}function Jt(Te,tn){Te.side===Do?et(i.CULL_FACE):it(i.CULL_FACE);let At=Te.side===Bs;tn&&(At=!At),ft(At),Te.blending===fu&&Te.transparent===!1?we(uu):we(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),o.setFunc(Te.depthFunc),o.setTest(Te.depthTest),o.setMask(Te.depthWrite),s.setMask(Te.colorWrite);const Lt=Te.stencilWrite;a.setTest(Lt),Lt&&(a.setMask(Te.stencilWriteMask),a.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),a.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),yn(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?it(i.SAMPLE_ALPHA_TO_COVERAGE):et(i.SAMPLE_ALPHA_TO_COVERAGE)}function ft(Te){O!==Te&&(Te?i.frontFace(i.CW):i.frontFace(i.CCW),O=Te)}function Dt(Te){Te!==B7?(it(i.CULL_FACE),Te!==$&&(Te===ND?i.cullFace(i.BACK):Te===I7?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):et(i.CULL_FACE),$=Te}function Rt(Te){Te!==ee&&(Q&&i.lineWidth(Te),ee=Te)}function yn(Te,tn,At){Te?(it(i.POLYGON_OFFSET_FILL),(Y!==tn||oe!==At)&&(i.polygonOffset(tn,At),Y=tn,oe=At)):et(i.POLYGON_OFFSET_FILL)}function Gt(Te){Te?it(i.SCISSOR_TEST):et(i.SCISSOR_TEST)}function Se(Te){Te===void 0&&(Te=i.TEXTURE0+re-1),de!==Te&&(i.activeTexture(Te),de=Te)}function fe(Te,tn,At){At===void 0&&(de===null?At=i.TEXTURE0+re-1:At=de);let Lt=ie[At];Lt===void 0&&(Lt={type:void 0,texture:void 0},ie[At]=Lt),(Lt.type!==Te||Lt.texture!==tn)&&(de!==At&&(i.activeTexture(At),de=At),i.bindTexture(Te,tn||qe[Te]),Lt.type=Te,Lt.texture=tn)}function Pe(){const Te=ie[de];Te!==void 0&&Te.type!==void 0&&(i.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function Ve(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Tt(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function bt(){try{i.texSubImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function sn(){try{i.texSubImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function on(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function mn(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ai(){try{i.texStorage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Vt(){try{i.texStorage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function _n(){try{i.texImage2D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function En(){try{i.texImage3D.apply(i,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function pn(Te){Ie.equals(Te)===!1&&(i.scissor(Te.x,Te.y,Te.z,Te.w),Ie.copy(Te))}function Sn(Te){Ee.equals(Te)===!1&&(i.viewport(Te.x,Te.y,Te.z,Te.w),Ee.copy(Te))}function Fe(Te,tn){let At=c.get(tn);At===void 0&&(At=new WeakMap,c.set(tn,At));let Lt=At.get(Te);Lt===void 0&&(Lt=i.getUniformBlockIndex(tn,Te.name),At.set(Te,Lt))}function xt(Te,tn){const Lt=c.get(tn).get(Te);l.get(tn)!==Lt&&(i.uniformBlockBinding(tn,Lt,Te.__bindingPointIndex),l.set(tn,Lt))}function dn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),u={},de=null,ie={},f={},h=new WeakMap,p=[],m=null,g=!1,b=null,T=null,C=null,R=null,P=null,I=null,F=null,k=new Qt(0,0,0),q=0,H=!1,O=null,$=null,ee=null,Y=null,oe=null,Ie.set(0,0,i.canvas.width,i.canvas.height),Ee.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:it,disable:et,bindFramebuffer:Ht,drawBuffers:_t,useProgram:$t,setBlending:we,setMaterial:Jt,setFlipSided:ft,setCullFace:Dt,setLineWidth:Rt,setPolygonOffset:yn,setScissorTest:Gt,activeTexture:Se,bindTexture:fe,unbindTexture:Pe,compressedTexImage2D:Ve,compressedTexImage3D:Tt,texImage2D:_n,texImage3D:En,updateUBOMapping:Fe,uniformBlockBinding:xt,texStorage2D:ai,texStorage3D:Vt,texSubImage2D:bt,texSubImage3D:sn,compressedTexSubImage2D:on,compressedTexSubImage3D:mn,scissor:pn,viewport:Sn,reset:dn}}function U_e(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new at,u=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(Se,fe){return p?new OffscreenCanvas(Se,fe):cM("canvas")}function g(Se,fe,Pe){let Ve=1;const Tt=Gt(Se);if((Tt.width>Pe||Tt.height>Pe)&&(Ve=Pe/Math.max(Tt.width,Tt.height)),Ve<1)if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap||typeof VideoFrame<"u"&&Se instanceof VideoFrame){const bt=Math.floor(Ve*Tt.width),sn=Math.floor(Ve*Tt.height);f===void 0&&(f=m(bt,sn));const on=fe?m(bt,sn):f;return on.width=bt,on.height=sn,on.getContext("2d").drawImage(Se,0,0,bt,sn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Tt.width+"x"+Tt.height+") to ("+bt+"x"+sn+")."),on}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Tt.width+"x"+Tt.height+")."),Se;return Se}function b(Se){return Se.generateMipmaps}function T(Se){i.generateMipmap(Se)}function C(Se){return Se.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Se.isWebGL3DRenderTarget?i.TEXTURE_3D:Se.isWebGLArrayRenderTarget||Se.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function R(Se,fe,Pe,Ve,Tt=!1){if(Se!==null){if(i[Se]!==void 0)return i[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let bt=fe;if(fe===i.RED&&(Pe===i.FLOAT&&(bt=i.R32F),Pe===i.HALF_FLOAT&&(bt=i.R16F),Pe===i.UNSIGNED_BYTE&&(bt=i.R8)),fe===i.RED_INTEGER&&(Pe===i.UNSIGNED_BYTE&&(bt=i.R8UI),Pe===i.UNSIGNED_SHORT&&(bt=i.R16UI),Pe===i.UNSIGNED_INT&&(bt=i.R32UI),Pe===i.BYTE&&(bt=i.R8I),Pe===i.SHORT&&(bt=i.R16I),Pe===i.INT&&(bt=i.R32I)),fe===i.RG&&(Pe===i.FLOAT&&(bt=i.RG32F),Pe===i.HALF_FLOAT&&(bt=i.RG16F),Pe===i.UNSIGNED_BYTE&&(bt=i.RG8)),fe===i.RG_INTEGER&&(Pe===i.UNSIGNED_BYTE&&(bt=i.RG8UI),Pe===i.UNSIGNED_SHORT&&(bt=i.RG16UI),Pe===i.UNSIGNED_INT&&(bt=i.RG32UI),Pe===i.BYTE&&(bt=i.RG8I),Pe===i.SHORT&&(bt=i.RG16I),Pe===i.INT&&(bt=i.RG32I)),fe===i.RGB_INTEGER&&(Pe===i.UNSIGNED_BYTE&&(bt=i.RGB8UI),Pe===i.UNSIGNED_SHORT&&(bt=i.RGB16UI),Pe===i.UNSIGNED_INT&&(bt=i.RGB32UI),Pe===i.BYTE&&(bt=i.RGB8I),Pe===i.SHORT&&(bt=i.RGB16I),Pe===i.INT&&(bt=i.RGB32I)),fe===i.RGBA_INTEGER&&(Pe===i.UNSIGNED_BYTE&&(bt=i.RGBA8UI),Pe===i.UNSIGNED_SHORT&&(bt=i.RGBA16UI),Pe===i.UNSIGNED_INT&&(bt=i.RGBA32UI),Pe===i.BYTE&&(bt=i.RGBA8I),Pe===i.SHORT&&(bt=i.RGBA16I),Pe===i.INT&&(bt=i.RGBA32I)),fe===i.RGB&&Pe===i.UNSIGNED_INT_5_9_9_9_REV&&(bt=i.RGB9_E5),fe===i.RGBA){const sn=Tt?lM:Oi.getTransfer(Ve);Pe===i.FLOAT&&(bt=i.RGBA32F),Pe===i.HALF_FLOAT&&(bt=i.RGBA16F),Pe===i.UNSIGNED_BYTE&&(bt=sn===$r?i.SRGB8_ALPHA8:i.RGBA8),Pe===i.UNSIGNED_SHORT_4_4_4_4&&(bt=i.RGBA4),Pe===i.UNSIGNED_SHORT_5_5_5_1&&(bt=i.RGB5_A1)}return(bt===i.R16F||bt===i.R32F||bt===i.RG16F||bt===i.RG32F||bt===i.RGBA16F||bt===i.RGBA32F)&&e.get("EXT_color_buffer_float"),bt}function P(Se,fe){let Pe;return Se?fe===null||fe===Gs||fe===yd?Pe=i.DEPTH24_STENCIL8:fe===Ns?Pe=i.DEPTH32F_STENCIL8:fe===ud&&(Pe=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):fe===null||fe===Gs||fe===yd?Pe=i.DEPTH_COMPONENT24:fe===Ns?Pe=i.DEPTH_COMPONENT32F:fe===ud&&(Pe=i.DEPTH_COMPONENT16),Pe}function I(Se,fe){return b(Se)===!0||Se.isFramebufferTexture&&Se.minFilter!==Ps&&Se.minFilter!==Ur?Math.log2(Math.max(fe.width,fe.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?fe.mipmaps.length:1}function F(Se){const fe=Se.target;fe.removeEventListener("dispose",F),q(fe),fe.isVideoTexture&&u.delete(fe)}function k(Se){const fe=Se.target;fe.removeEventListener("dispose",k),O(fe)}function q(Se){const fe=n.get(Se);if(fe.__webglInit===void 0)return;const Pe=Se.source,Ve=h.get(Pe);if(Ve){const Tt=Ve[fe.__cacheKey];Tt.usedTimes--,Tt.usedTimes===0&&H(Se),Object.keys(Ve).length===0&&h.delete(Pe)}n.remove(Se)}function H(Se){const fe=n.get(Se);i.deleteTexture(fe.__webglTexture);const Pe=Se.source,Ve=h.get(Pe);delete Ve[fe.__cacheKey],o.memory.textures--}function O(Se){const fe=n.get(Se);if(Se.depthTexture&&(Se.depthTexture.dispose(),n.remove(Se.depthTexture)),Se.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++){if(Array.isArray(fe.__webglFramebuffer[Ve]))for(let Tt=0;Tt<fe.__webglFramebuffer[Ve].length;Tt++)i.deleteFramebuffer(fe.__webglFramebuffer[Ve][Tt]);else i.deleteFramebuffer(fe.__webglFramebuffer[Ve]);fe.__webglDepthbuffer&&i.deleteRenderbuffer(fe.__webglDepthbuffer[Ve])}else{if(Array.isArray(fe.__webglFramebuffer))for(let Ve=0;Ve<fe.__webglFramebuffer.length;Ve++)i.deleteFramebuffer(fe.__webglFramebuffer[Ve]);else i.deleteFramebuffer(fe.__webglFramebuffer);if(fe.__webglDepthbuffer&&i.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&i.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let Ve=0;Ve<fe.__webglColorRenderbuffer.length;Ve++)fe.__webglColorRenderbuffer[Ve]&&i.deleteRenderbuffer(fe.__webglColorRenderbuffer[Ve]);fe.__webglDepthRenderbuffer&&i.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}const Pe=Se.textures;for(let Ve=0,Tt=Pe.length;Ve<Tt;Ve++){const bt=n.get(Pe[Ve]);bt.__webglTexture&&(i.deleteTexture(bt.__webglTexture),o.memory.textures--),n.remove(Pe[Ve])}n.remove(Se)}let $=0;function ee(){$=0}function Y(){const Se=$;return Se>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+r.maxTextures),$+=1,Se}function oe(Se){const fe=[];return fe.push(Se.wrapS),fe.push(Se.wrapT),fe.push(Se.wrapR||0),fe.push(Se.magFilter),fe.push(Se.minFilter),fe.push(Se.anisotropy),fe.push(Se.internalFormat),fe.push(Se.format),fe.push(Se.type),fe.push(Se.generateMipmaps),fe.push(Se.premultiplyAlpha),fe.push(Se.flipY),fe.push(Se.unpackAlignment),fe.push(Se.colorSpace),fe.join()}function re(Se,fe){const Pe=n.get(Se);if(Se.isVideoTexture&&Rt(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&Pe.__version!==Se.version){const Ve=Se.image;if(Ve===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ee(Pe,Se,fe);return}}t.bindTexture(i.TEXTURE_2D,Pe.__webglTexture,i.TEXTURE0+fe)}function Q(Se,fe){const Pe=n.get(Se);if(Se.version>0&&Pe.__version!==Se.version){Ee(Pe,Se,fe);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Pe.__webglTexture,i.TEXTURE0+fe)}function se(Se,fe){const Pe=n.get(Se);if(Se.version>0&&Pe.__version!==Se.version){Ee(Pe,Se,fe);return}t.bindTexture(i.TEXTURE_3D,Pe.__webglTexture,i.TEXTURE0+fe)}function le(Se,fe){const Pe=n.get(Se);if(Se.version>0&&Pe.__version!==Se.version){Be(Pe,Se,fe);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Pe.__webglTexture,i.TEXTURE0+fe)}const de={[ff]:i.REPEAT,[Sl]:i.CLAMP_TO_EDGE,[lA]:i.MIRRORED_REPEAT},ie={[Ps]:i.NEAREST,[QS]:i.NEAREST_MIPMAP_NEAREST,[cd]:i.NEAREST_MIPMAP_LINEAR,[Ur]:i.LINEAR,[Um]:i.LINEAR_MIPMAP_NEAREST,[Ja]:i.LINEAR_MIPMAP_LINEAR},ge={[aP]:i.NEVER,[hP]:i.ALWAYS,[p3]:i.LESS,[A3]:i.LEQUAL,[lP]:i.EQUAL,[fP]:i.GEQUAL,[cP]:i.GREATER,[uP]:i.NOTEQUAL};function Ce(Se,fe){if(fe.type===Ns&&e.has("OES_texture_float_linear")===!1&&(fe.magFilter===Ur||fe.magFilter===Um||fe.magFilter===cd||fe.magFilter===Ja||fe.minFilter===Ur||fe.minFilter===Um||fe.minFilter===cd||fe.minFilter===Ja)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Se,i.TEXTURE_WRAP_S,de[fe.wrapS]),i.texParameteri(Se,i.TEXTURE_WRAP_T,de[fe.wrapT]),(Se===i.TEXTURE_3D||Se===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Se,i.TEXTURE_WRAP_R,de[fe.wrapR]),i.texParameteri(Se,i.TEXTURE_MAG_FILTER,ie[fe.magFilter]),i.texParameteri(Se,i.TEXTURE_MIN_FILTER,ie[fe.minFilter]),fe.compareFunction&&(i.texParameteri(Se,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Se,i.TEXTURE_COMPARE_FUNC,ge[fe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(fe.magFilter===Ps||fe.minFilter!==cd&&fe.minFilter!==Ja||fe.type===Ns&&e.has("OES_texture_float_linear")===!1)return;if(fe.anisotropy>1||n.get(fe).__currentAnisotropy){const Pe=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Se,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,r.getMaxAnisotropy())),n.get(fe).__currentAnisotropy=fe.anisotropy}}}function Ie(Se,fe){let Pe=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,fe.addEventListener("dispose",F));const Ve=fe.source;let Tt=h.get(Ve);Tt===void 0&&(Tt={},h.set(Ve,Tt));const bt=oe(fe);if(bt!==Se.__cacheKey){Tt[bt]===void 0&&(Tt[bt]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Pe=!0),Tt[bt].usedTimes++;const sn=Tt[Se.__cacheKey];sn!==void 0&&(Tt[Se.__cacheKey].usedTimes--,sn.usedTimes===0&&H(fe)),Se.__cacheKey=bt,Se.__webglTexture=Tt[bt].texture}return Pe}function Ee(Se,fe,Pe){let Ve=i.TEXTURE_2D;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Ve=i.TEXTURE_2D_ARRAY),fe.isData3DTexture&&(Ve=i.TEXTURE_3D);const Tt=Ie(Se,fe),bt=fe.source;t.bindTexture(Ve,Se.__webglTexture,i.TEXTURE0+Pe);const sn=n.get(bt);if(bt.version!==sn.__version||Tt===!0){t.activeTexture(i.TEXTURE0+Pe);const on=Oi.getPrimaries(Oi.workingColorSpace),mn=fe.colorSpace===Yu?null:Oi.getPrimaries(fe.colorSpace),ai=fe.colorSpace===Yu||on===mn?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,fe.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,fe.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ai);let Vt=g(fe.image,!1,r.maxTextureSize);Vt=yn(fe,Vt);const _n=s.convert(fe.format,fe.colorSpace),En=s.convert(fe.type);let pn=R(fe.internalFormat,_n,En,fe.colorSpace,fe.isVideoTexture);Ce(Ve,fe);let Sn;const Fe=fe.mipmaps,xt=fe.isVideoTexture!==!0,dn=sn.__version===void 0||Tt===!0,Te=bt.dataReady,tn=I(fe,Vt);if(fe.isDepthTexture)pn=P(fe.format===vd,fe.type),dn&&(xt?t.texStorage2D(i.TEXTURE_2D,1,pn,Vt.width,Vt.height):t.texImage2D(i.TEXTURE_2D,0,pn,Vt.width,Vt.height,0,_n,En,null));else if(fe.isDataTexture)if(Fe.length>0){xt&&dn&&t.texStorage2D(i.TEXTURE_2D,tn,pn,Fe[0].width,Fe[0].height);for(let At=0,Lt=Fe.length;At<Lt;At++)Sn=Fe[At],xt?Te&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,Sn.width,Sn.height,_n,En,Sn.data):t.texImage2D(i.TEXTURE_2D,At,pn,Sn.width,Sn.height,0,_n,En,Sn.data);fe.generateMipmaps=!1}else xt?(dn&&t.texStorage2D(i.TEXTURE_2D,tn,pn,Vt.width,Vt.height),Te&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Vt.width,Vt.height,_n,En,Vt.data)):t.texImage2D(i.TEXTURE_2D,0,pn,Vt.width,Vt.height,0,_n,En,Vt.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){xt&&dn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,tn,pn,Fe[0].width,Fe[0].height,Vt.depth);for(let At=0,Lt=Fe.length;At<Lt;At++)if(Sn=Fe[At],fe.format!==ho)if(_n!==null)if(xt){if(Te)if(fe.layerUpdates.size>0){const vn=CF(Sn.width,Sn.height,fe.format,fe.type);for(const xn of fe.layerUpdates){const Nn=Sn.data.subarray(xn*vn/Sn.data.BYTES_PER_ELEMENT,(xn+1)*vn/Sn.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,xn,Sn.width,Sn.height,1,_n,Nn)}fe.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,0,Sn.width,Sn.height,Vt.depth,_n,Sn.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,At,pn,Sn.width,Sn.height,Vt.depth,0,Sn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else xt?Te&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,At,0,0,0,Sn.width,Sn.height,Vt.depth,_n,En,Sn.data):t.texImage3D(i.TEXTURE_2D_ARRAY,At,pn,Sn.width,Sn.height,Vt.depth,0,_n,En,Sn.data)}else{xt&&dn&&t.texStorage2D(i.TEXTURE_2D,tn,pn,Fe[0].width,Fe[0].height);for(let At=0,Lt=Fe.length;At<Lt;At++)Sn=Fe[At],fe.format!==ho?_n!==null?xt?Te&&t.compressedTexSubImage2D(i.TEXTURE_2D,At,0,0,Sn.width,Sn.height,_n,Sn.data):t.compressedTexImage2D(i.TEXTURE_2D,At,pn,Sn.width,Sn.height,0,Sn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?Te&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,Sn.width,Sn.height,_n,En,Sn.data):t.texImage2D(i.TEXTURE_2D,At,pn,Sn.width,Sn.height,0,_n,En,Sn.data)}else if(fe.isDataArrayTexture)if(xt){if(dn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,tn,pn,Vt.width,Vt.height,Vt.depth),Te)if(fe.layerUpdates.size>0){const At=CF(Vt.width,Vt.height,fe.format,fe.type);for(const Lt of fe.layerUpdates){const vn=Vt.data.subarray(Lt*At/Vt.data.BYTES_PER_ELEMENT,(Lt+1)*At/Vt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Lt,Vt.width,Vt.height,1,_n,En,vn)}fe.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Vt.width,Vt.height,Vt.depth,_n,En,Vt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,pn,Vt.width,Vt.height,Vt.depth,0,_n,En,Vt.data);else if(fe.isData3DTexture)xt?(dn&&t.texStorage3D(i.TEXTURE_3D,tn,pn,Vt.width,Vt.height,Vt.depth),Te&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Vt.width,Vt.height,Vt.depth,_n,En,Vt.data)):t.texImage3D(i.TEXTURE_3D,0,pn,Vt.width,Vt.height,Vt.depth,0,_n,En,Vt.data);else if(fe.isFramebufferTexture){if(dn)if(xt)t.texStorage2D(i.TEXTURE_2D,tn,pn,Vt.width,Vt.height);else{let At=Vt.width,Lt=Vt.height;for(let vn=0;vn<tn;vn++)t.texImage2D(i.TEXTURE_2D,vn,pn,At,Lt,0,_n,En,null),At>>=1,Lt>>=1}}else if(Fe.length>0){if(xt&&dn){const At=Gt(Fe[0]);t.texStorage2D(i.TEXTURE_2D,tn,pn,At.width,At.height)}for(let At=0,Lt=Fe.length;At<Lt;At++)Sn=Fe[At],xt?Te&&t.texSubImage2D(i.TEXTURE_2D,At,0,0,_n,En,Sn):t.texImage2D(i.TEXTURE_2D,At,pn,_n,En,Sn);fe.generateMipmaps=!1}else if(xt){if(dn){const At=Gt(Vt);t.texStorage2D(i.TEXTURE_2D,tn,pn,At.width,At.height)}Te&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,_n,En,Vt)}else t.texImage2D(i.TEXTURE_2D,0,pn,_n,En,Vt);b(fe)&&T(Ve),sn.__version=bt.version,fe.onUpdate&&fe.onUpdate(fe)}Se.__version=fe.version}function Be(Se,fe,Pe){if(fe.image.length!==6)return;const Ve=Ie(Se,fe),Tt=fe.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Se.__webglTexture,i.TEXTURE0+Pe);const bt=n.get(Tt);if(Tt.version!==bt.__version||Ve===!0){t.activeTexture(i.TEXTURE0+Pe);const sn=Oi.getPrimaries(Oi.workingColorSpace),on=fe.colorSpace===Yu?null:Oi.getPrimaries(fe.colorSpace),mn=fe.colorSpace===Yu||sn===on?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,fe.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,fe.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,mn);const ai=fe.isCompressedTexture||fe.image[0].isCompressedTexture,Vt=fe.image[0]&&fe.image[0].isDataTexture,_n=[];for(let Lt=0;Lt<6;Lt++)!ai&&!Vt?_n[Lt]=g(fe.image[Lt],!0,r.maxCubemapSize):_n[Lt]=Vt?fe.image[Lt].image:fe.image[Lt],_n[Lt]=yn(fe,_n[Lt]);const En=_n[0],pn=s.convert(fe.format,fe.colorSpace),Sn=s.convert(fe.type),Fe=R(fe.internalFormat,pn,Sn,fe.colorSpace),xt=fe.isVideoTexture!==!0,dn=bt.__version===void 0||Ve===!0,Te=Tt.dataReady;let tn=I(fe,En);Ce(i.TEXTURE_CUBE_MAP,fe);let At;if(ai){xt&&dn&&t.texStorage2D(i.TEXTURE_CUBE_MAP,tn,Fe,En.width,En.height);for(let Lt=0;Lt<6;Lt++){At=_n[Lt].mipmaps;for(let vn=0;vn<At.length;vn++){const xn=At[vn];fe.format!==ho?pn!==null?xt?Te&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn,0,0,xn.width,xn.height,pn,xn.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn,Fe,xn.width,xn.height,0,xn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn,0,0,xn.width,xn.height,pn,Sn,xn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn,Fe,xn.width,xn.height,0,pn,Sn,xn.data)}}}else{if(At=fe.mipmaps,xt&&dn){At.length>0&&tn++;const Lt=Gt(_n[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,tn,Fe,Lt.width,Lt.height)}for(let Lt=0;Lt<6;Lt++)if(Vt){xt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,0,0,_n[Lt].width,_n[Lt].height,pn,Sn,_n[Lt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,Fe,_n[Lt].width,_n[Lt].height,0,pn,Sn,_n[Lt].data);for(let vn=0;vn<At.length;vn++){const Nn=At[vn].image[Lt].image;xt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn+1,0,0,Nn.width,Nn.height,pn,Sn,Nn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn+1,Fe,Nn.width,Nn.height,0,pn,Sn,Nn.data)}}else{xt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,0,0,pn,Sn,_n[Lt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,Fe,pn,Sn,_n[Lt]);for(let vn=0;vn<At.length;vn++){const xn=At[vn];xt?Te&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn+1,0,0,pn,Sn,xn.image[Lt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,vn+1,Fe,pn,Sn,xn.image[Lt])}}}b(fe)&&T(i.TEXTURE_CUBE_MAP),bt.__version=Tt.version,fe.onUpdate&&fe.onUpdate(fe)}Se.__version=fe.version}function qe(Se,fe,Pe,Ve,Tt,bt){const sn=s.convert(Pe.format,Pe.colorSpace),on=s.convert(Pe.type),mn=R(Pe.internalFormat,sn,on,Pe.colorSpace),ai=n.get(fe),Vt=n.get(Pe);if(Vt.__renderTarget=fe,!ai.__hasExternalTextures){const _n=Math.max(1,fe.width>>bt),En=Math.max(1,fe.height>>bt);Tt===i.TEXTURE_3D||Tt===i.TEXTURE_2D_ARRAY?t.texImage3D(Tt,bt,mn,_n,En,fe.depth,0,sn,on,null):t.texImage2D(Tt,bt,mn,_n,En,0,sn,on,null)}t.bindFramebuffer(i.FRAMEBUFFER,Se),Dt(fe)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ve,Tt,Vt.__webglTexture,0,ft(fe)):(Tt===i.TEXTURE_2D||Tt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Tt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ve,Tt,Vt.__webglTexture,bt),t.bindFramebuffer(i.FRAMEBUFFER,null)}function it(Se,fe,Pe){if(i.bindRenderbuffer(i.RENDERBUFFER,Se),fe.depthBuffer){const Ve=fe.depthTexture,Tt=Ve&&Ve.isDepthTexture?Ve.type:null,bt=P(fe.stencilBuffer,Tt),sn=fe.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,on=ft(fe);Dt(fe)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,on,bt,fe.width,fe.height):Pe?i.renderbufferStorageMultisample(i.RENDERBUFFER,on,bt,fe.width,fe.height):i.renderbufferStorage(i.RENDERBUFFER,bt,fe.width,fe.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,sn,i.RENDERBUFFER,Se)}else{const Ve=fe.textures;for(let Tt=0;Tt<Ve.length;Tt++){const bt=Ve[Tt],sn=s.convert(bt.format,bt.colorSpace),on=s.convert(bt.type),mn=R(bt.internalFormat,sn,on,bt.colorSpace),ai=ft(fe);Pe&&Dt(fe)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,ai,mn,fe.width,fe.height):Dt(fe)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ai,mn,fe.width,fe.height):i.renderbufferStorage(i.RENDERBUFFER,mn,fe.width,fe.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function et(Se,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Se),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ve=n.get(fe.depthTexture);Ve.__renderTarget=fe,(!Ve.__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),re(fe.depthTexture,0);const Tt=Ve.__webglTexture,bt=ft(fe);if(fe.depthTexture.format===pd)Dt(fe)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Tt,0,bt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Tt,0);else if(fe.depthTexture.format===vd)Dt(fe)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Tt,0,bt):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Tt,0);else throw new Error("Unknown depthTexture format")}function Ht(Se){const fe=n.get(Se),Pe=Se.isWebGLCubeRenderTarget===!0;if(fe.__boundDepthTexture!==Se.depthTexture){const Ve=Se.depthTexture;if(fe.__depthDisposeCallback&&fe.__depthDisposeCallback(),Ve){const Tt=()=>{delete fe.__boundDepthTexture,delete fe.__depthDisposeCallback,Ve.removeEventListener("dispose",Tt)};Ve.addEventListener("dispose",Tt),fe.__depthDisposeCallback=Tt}fe.__boundDepthTexture=Ve}if(Se.depthTexture&&!fe.__autoAllocateDepthBuffer){if(Pe)throw new Error("target.depthTexture not supported in Cube render targets");et(fe.__webglFramebuffer,Se)}else if(Pe){fe.__webglDepthbuffer=[];for(let Ve=0;Ve<6;Ve++)if(t.bindFramebuffer(i.FRAMEBUFFER,fe.__webglFramebuffer[Ve]),fe.__webglDepthbuffer[Ve]===void 0)fe.__webglDepthbuffer[Ve]=i.createRenderbuffer(),it(fe.__webglDepthbuffer[Ve],Se,!1);else{const Tt=Se.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,bt=fe.__webglDepthbuffer[Ve];i.bindRenderbuffer(i.RENDERBUFFER,bt),i.framebufferRenderbuffer(i.FRAMEBUFFER,Tt,i.RENDERBUFFER,bt)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,fe.__webglFramebuffer),fe.__webglDepthbuffer===void 0)fe.__webglDepthbuffer=i.createRenderbuffer(),it(fe.__webglDepthbuffer,Se,!1);else{const Ve=Se.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Tt=fe.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Tt),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ve,i.RENDERBUFFER,Tt)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function _t(Se,fe,Pe){const Ve=n.get(Se);fe!==void 0&&qe(Ve.__webglFramebuffer,Se,Se.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Pe!==void 0&&Ht(Se)}function $t(Se){const fe=Se.texture,Pe=n.get(Se),Ve=n.get(fe);Se.addEventListener("dispose",k);const Tt=Se.textures,bt=Se.isWebGLCubeRenderTarget===!0,sn=Tt.length>1;if(sn||(Ve.__webglTexture===void 0&&(Ve.__webglTexture=i.createTexture()),Ve.__version=fe.version,o.memory.textures++),bt){Pe.__webglFramebuffer=[];for(let on=0;on<6;on++)if(fe.mipmaps&&fe.mipmaps.length>0){Pe.__webglFramebuffer[on]=[];for(let mn=0;mn<fe.mipmaps.length;mn++)Pe.__webglFramebuffer[on][mn]=i.createFramebuffer()}else Pe.__webglFramebuffer[on]=i.createFramebuffer()}else{if(fe.mipmaps&&fe.mipmaps.length>0){Pe.__webglFramebuffer=[];for(let on=0;on<fe.mipmaps.length;on++)Pe.__webglFramebuffer[on]=i.createFramebuffer()}else Pe.__webglFramebuffer=i.createFramebuffer();if(sn)for(let on=0,mn=Tt.length;on<mn;on++){const ai=n.get(Tt[on]);ai.__webglTexture===void 0&&(ai.__webglTexture=i.createTexture(),o.memory.textures++)}if(Se.samples>0&&Dt(Se)===!1){Pe.__webglMultisampledFramebuffer=i.createFramebuffer(),Pe.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer);for(let on=0;on<Tt.length;on++){const mn=Tt[on];Pe.__webglColorRenderbuffer[on]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Pe.__webglColorRenderbuffer[on]);const ai=s.convert(mn.format,mn.colorSpace),Vt=s.convert(mn.type),_n=R(mn.internalFormat,ai,Vt,mn.colorSpace,Se.isXRRenderTarget===!0),En=ft(Se);i.renderbufferStorageMultisample(i.RENDERBUFFER,En,_n,Se.width,Se.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+on,i.RENDERBUFFER,Pe.__webglColorRenderbuffer[on])}i.bindRenderbuffer(i.RENDERBUFFER,null),Se.depthBuffer&&(Pe.__webglDepthRenderbuffer=i.createRenderbuffer(),it(Pe.__webglDepthRenderbuffer,Se,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(bt){t.bindTexture(i.TEXTURE_CUBE_MAP,Ve.__webglTexture),Ce(i.TEXTURE_CUBE_MAP,fe);for(let on=0;on<6;on++)if(fe.mipmaps&&fe.mipmaps.length>0)for(let mn=0;mn<fe.mipmaps.length;mn++)qe(Pe.__webglFramebuffer[on][mn],Se,fe,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+on,mn);else qe(Pe.__webglFramebuffer[on],Se,fe,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+on,0);b(fe)&&T(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(sn){for(let on=0,mn=Tt.length;on<mn;on++){const ai=Tt[on],Vt=n.get(ai);t.bindTexture(i.TEXTURE_2D,Vt.__webglTexture),Ce(i.TEXTURE_2D,ai),qe(Pe.__webglFramebuffer,Se,ai,i.COLOR_ATTACHMENT0+on,i.TEXTURE_2D,0),b(ai)&&T(i.TEXTURE_2D)}t.unbindTexture()}else{let on=i.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(on=Se.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(on,Ve.__webglTexture),Ce(on,fe),fe.mipmaps&&fe.mipmaps.length>0)for(let mn=0;mn<fe.mipmaps.length;mn++)qe(Pe.__webglFramebuffer[mn],Se,fe,i.COLOR_ATTACHMENT0,on,mn);else qe(Pe.__webglFramebuffer,Se,fe,i.COLOR_ATTACHMENT0,on,0);b(fe)&&T(on),t.unbindTexture()}Se.depthBuffer&&Ht(Se)}function mt(Se){const fe=Se.textures;for(let Pe=0,Ve=fe.length;Pe<Ve;Pe++){const Tt=fe[Pe];if(b(Tt)){const bt=C(Se),sn=n.get(Tt).__webglTexture;t.bindTexture(bt,sn),T(bt),t.unbindTexture()}}}const ut=[],we=[];function Jt(Se){if(Se.samples>0){if(Dt(Se)===!1){const fe=Se.textures,Pe=Se.width,Ve=Se.height;let Tt=i.COLOR_BUFFER_BIT;const bt=Se.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,sn=n.get(Se),on=fe.length>1;if(on)for(let mn=0;mn<fe.length;mn++)t.bindFramebuffer(i.FRAMEBUFFER,sn.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+mn,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,sn.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+mn,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,sn.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,sn.__webglFramebuffer);for(let mn=0;mn<fe.length;mn++){if(Se.resolveDepthBuffer&&(Se.depthBuffer&&(Tt|=i.DEPTH_BUFFER_BIT),Se.stencilBuffer&&Se.resolveStencilBuffer&&(Tt|=i.STENCIL_BUFFER_BIT)),on){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,sn.__webglColorRenderbuffer[mn]);const ai=n.get(fe[mn]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ai,0)}i.blitFramebuffer(0,0,Pe,Ve,0,0,Pe,Ve,Tt,i.NEAREST),l===!0&&(ut.length=0,we.length=0,ut.push(i.COLOR_ATTACHMENT0+mn),Se.depthBuffer&&Se.resolveDepthBuffer===!1&&(ut.push(bt),we.push(bt),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,we)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ut))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),on)for(let mn=0;mn<fe.length;mn++){t.bindFramebuffer(i.FRAMEBUFFER,sn.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+mn,i.RENDERBUFFER,sn.__webglColorRenderbuffer[mn]);const ai=n.get(fe[mn]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,sn.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+mn,i.TEXTURE_2D,ai,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,sn.__webglMultisampledFramebuffer)}else if(Se.depthBuffer&&Se.resolveDepthBuffer===!1&&l){const fe=Se.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[fe])}}}function ft(Se){return Math.min(r.maxSamples,Se.samples)}function Dt(Se){const fe=n.get(Se);return Se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Rt(Se){const fe=o.render.frame;u.get(Se)!==fe&&(u.set(Se,fe),Se.update())}function yn(Se,fe){const Pe=Se.colorSpace,Ve=Se.format,Tt=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||Pe!==hu&&Pe!==Yu&&(Oi.getTransfer(Pe)===$r?(Ve!==ho||Tt!==Aa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Pe)),fe}function Gt(Se){return typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement?(c.width=Se.naturalWidth||Se.width,c.height=Se.naturalHeight||Se.height):typeof VideoFrame<"u"&&Se instanceof VideoFrame?(c.width=Se.displayWidth,c.height=Se.displayHeight):(c.width=Se.width,c.height=Se.height),c}this.allocateTextureUnit=Y,this.resetTextureUnits=ee,this.setTexture2D=re,this.setTexture2DArray=Q,this.setTexture3D=se,this.setTextureCube=le,this.rebindTextures=_t,this.setupRenderTarget=$t,this.updateRenderTargetMipmap=mt,this.updateMultisampleRenderTarget=Jt,this.setupDepthRenderbuffer=Ht,this.setupFrameBufferTexture=qe,this.useMultisampledRTT=Dt}function tne(i,e){function t(n,r=Yu){let s;const o=Oi.getTransfer(r);if(n===Aa)return i.UNSIGNED_BYTE;if(n===f3)return i.UNSIGNED_SHORT_4_4_4_4;if(n===h3)return i.UNSIGNED_SHORT_5_5_5_1;if(n===d3)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===zy)return i.BYTE;if(n===Hy)return i.SHORT;if(n===ud)return i.UNSIGNED_SHORT;if(n===Za)return i.INT;if(n===Gs)return i.UNSIGNED_INT;if(n===Ns)return i.FLOAT;if(n===Fa)return i.HALF_FLOAT;if(n===tP)return i.ALPHA;if(n===ZS)return i.RGB;if(n===ho)return i.RGBA;if(n===nP)return i.LUMINANCE;if(n===iP)return i.LUMINANCE_ALPHA;if(n===pd)return i.DEPTH_COMPONENT;if(n===vd)return i.DEPTH_STENCIL;if(n===eb)return i.RED;if(n===l1)return i.RED_INTEGER;if(n===Yy)return i.RG;if(n===tb)return i.RG_INTEGER;if(n===nb)return i.RGBA_INTEGER;if(n===Vy||n===km||n===Gm||n===zm)if(o===$r)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Vy)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===km)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Gm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===zm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Vy)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===km)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Gm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Z2||n===J2||n===eS||n===tS)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Z2)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===J2)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===eS)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===tS)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===nS||n===Sx||n===Tx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===nS||n===Sx)return o===$r?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Tx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Ex||n===wx||n===Mx||n===Cx||n===Rx||n===Dx||n===Lx||n===Px||n===Nx||n===Bx||n===Ix||n===Ox||n===Fx||n===Ux)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Ex)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===wx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Mx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Cx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Rx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Dx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Lx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Px)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Bx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ix)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ox)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Fx)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ux)return o===$r?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===qy||n===BD||n===ID)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===qy)return o===$r?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===BD)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===ID)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===rP||n===iS||n===rS||n===sS)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===qy)return s.COMPRESSED_RED_RGTC1_EXT;if(n===iS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===rS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===sS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===yd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const k_e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,G_e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class z_e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new cs,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new jl({vertexShader:k_e,fragmentShader:G_e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new zi(new iT(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class H_e extends hh{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,h=null,p=null,m=null;const g=new z_e,b=t.getContextAttributes();let T=null,C=null;const R=[],P=[],I=new at;let F=null;const k=new ls;k.viewport=new Ln;const q=new ls;q.viewport=new Ln;const H=[k,q],O=new D9;let $=null,ee=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ee){let Be=R[Ee];return Be===void 0&&(Be=new Pw,R[Ee]=Be),Be.getTargetRaySpace()},this.getControllerGrip=function(Ee){let Be=R[Ee];return Be===void 0&&(Be=new Pw,R[Ee]=Be),Be.getGripSpace()},this.getHand=function(Ee){let Be=R[Ee];return Be===void 0&&(Be=new Pw,R[Ee]=Be),Be.getHandSpace()};function Y(Ee){const Be=P.indexOf(Ee.inputSource);if(Be===-1)return;const qe=R[Be];qe!==void 0&&(qe.update(Ee.inputSource,Ee.frame,c||o),qe.dispatchEvent({type:Ee.type,data:Ee.inputSource}))}function oe(){r.removeEventListener("select",Y),r.removeEventListener("selectstart",Y),r.removeEventListener("selectend",Y),r.removeEventListener("squeeze",Y),r.removeEventListener("squeezestart",Y),r.removeEventListener("squeezeend",Y),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",re);for(let Ee=0;Ee<R.length;Ee++){const Be=P[Ee];Be!==null&&(P[Ee]=null,R[Ee].disconnect(Be))}$=null,ee=null,g.reset(),e.setRenderTarget(T),p=null,h=null,f=null,r=null,C=null,Ie.stop(),n.isPresenting=!1,e.setPixelRatio(F),e.setSize(I.width,I.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ee){s=Ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ee){a=Ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Ee){c=Ee},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(Ee){if(r=Ee,r!==null){if(T=e.getRenderTarget(),r.addEventListener("select",Y),r.addEventListener("selectstart",Y),r.addEventListener("selectend",Y),r.addEventListener("squeeze",Y),r.addEventListener("squeezestart",Y),r.addEventListener("squeezeend",Y),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",re),b.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let qe=null,it=null,et=null;b.depth&&(et=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,qe=b.stencil?vd:pd,it=b.stencil?yd:Gs);const Ht={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:s};f=new XRWebGLBinding(r,t),h=f.createProjectionLayer(Ht),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),C=new xd(h.textureWidth,h.textureHeight,{format:ho,type:Aa,depthTexture:new Ld(h.textureWidth,h.textureHeight,it,void 0,void 0,void 0,void 0,void 0,void 0,qe),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}else{const qe={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,qe),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),C=new xd(p.framebufferWidth,p.framebufferHeight,{format:ho,type:Aa,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}C.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Ie.setContext(r),Ie.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function re(Ee){for(let Be=0;Be<Ee.removed.length;Be++){const qe=Ee.removed[Be],it=P.indexOf(qe);it>=0&&(P[it]=null,R[it].disconnect(qe))}for(let Be=0;Be<Ee.added.length;Be++){const qe=Ee.added[Be];let it=P.indexOf(qe);if(it===-1){for(let Ht=0;Ht<R.length;Ht++)if(Ht>=P.length){P.push(qe),it=Ht;break}else if(P[Ht]===null){P[Ht]=qe,it=Ht;break}if(it===-1)break}const et=R[it];et&&et.connect(qe)}}const Q=new he,se=new he;function le(Ee,Be,qe){Q.setFromMatrixPosition(Be.matrixWorld),se.setFromMatrixPosition(qe.matrixWorld);const it=Q.distanceTo(se),et=Be.projectionMatrix.elements,Ht=qe.projectionMatrix.elements,_t=et[14]/(et[10]-1),$t=et[14]/(et[10]+1),mt=(et[9]+1)/et[5],ut=(et[9]-1)/et[5],we=(et[8]-1)/et[0],Jt=(Ht[8]+1)/Ht[0],ft=_t*we,Dt=_t*Jt,Rt=it/(-we+Jt),yn=Rt*-we;if(Be.matrixWorld.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.translateX(yn),Ee.translateZ(Rt),Ee.matrixWorld.compose(Ee.position,Ee.quaternion,Ee.scale),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert(),et[10]===-1)Ee.projectionMatrix.copy(Be.projectionMatrix),Ee.projectionMatrixInverse.copy(Be.projectionMatrixInverse);else{const Gt=_t+Rt,Se=$t+Rt,fe=ft-yn,Pe=Dt+(it-yn),Ve=mt*$t/Se*Gt,Tt=ut*$t/Se*Gt;Ee.projectionMatrix.makePerspective(fe,Pe,Ve,Tt,Gt,Se),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert()}}function de(Ee,Be){Be===null?Ee.matrixWorld.copy(Ee.matrix):Ee.matrixWorld.multiplyMatrices(Be.matrixWorld,Ee.matrix),Ee.matrixWorldInverse.copy(Ee.matrixWorld).invert()}this.updateCamera=function(Ee){if(r===null)return;let Be=Ee.near,qe=Ee.far;g.texture!==null&&(g.depthNear>0&&(Be=g.depthNear),g.depthFar>0&&(qe=g.depthFar)),O.near=q.near=k.near=Be,O.far=q.far=k.far=qe,($!==O.near||ee!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),$=O.near,ee=O.far),k.layers.mask=Ee.layers.mask|2,q.layers.mask=Ee.layers.mask|4,O.layers.mask=k.layers.mask|q.layers.mask;const it=Ee.parent,et=O.cameras;de(O,it);for(let Ht=0;Ht<et.length;Ht++)de(et[Ht],it);et.length===2?le(O,k,q):O.projectionMatrix.copy(k.projectionMatrix),ie(Ee,O,it)};function ie(Ee,Be,qe){qe===null?Ee.matrix.copy(Be.matrixWorld):(Ee.matrix.copy(qe.matrixWorld),Ee.matrix.invert(),Ee.matrix.multiply(Be.matrixWorld)),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.updateMatrixWorld(!0),Ee.projectionMatrix.copy(Be.projectionMatrix),Ee.projectionMatrixInverse.copy(Be.projectionMatrixInverse),Ee.isPerspectiveCamera&&(Ee.fov=kx*2*Math.atan(1/Ee.projectionMatrix.elements[5]),Ee.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(Ee){l=Ee,h!==null&&(h.fixedFoveation=Ee),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Ee)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(O)};let ge=null;function Ce(Ee,Be){if(u=Be.getViewerPose(c||o),m=Be,u!==null){const qe=u.views;p!==null&&(e.setRenderTargetFramebuffer(C,p.framebuffer),e.setRenderTarget(C));let it=!1;qe.length!==O.cameras.length&&(O.cameras.length=0,it=!0);for(let _t=0;_t<qe.length;_t++){const $t=qe[_t];let mt=null;if(p!==null)mt=p.getViewport($t);else{const we=f.getViewSubImage(h,$t);mt=we.viewport,_t===0&&(e.setRenderTargetTextures(C,we.colorTexture,h.ignoreDepthValues?void 0:we.depthStencilTexture),e.setRenderTarget(C))}let ut=H[_t];ut===void 0&&(ut=new ls,ut.layers.enable(_t),ut.viewport=new Ln,H[_t]=ut),ut.matrix.fromArray($t.transform.matrix),ut.matrix.decompose(ut.position,ut.quaternion,ut.scale),ut.projectionMatrix.fromArray($t.projectionMatrix),ut.projectionMatrixInverse.copy(ut.projectionMatrix).invert(),ut.viewport.set(mt.x,mt.y,mt.width,mt.height),_t===0&&(O.matrix.copy(ut.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),it===!0&&O.cameras.push(ut)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&f){const _t=f.getDepthInformation(qe[0]);_t&&_t.isValid&&_t.texture&&g.init(e,_t,r.renderState)}}for(let qe=0;qe<R.length;qe++){const it=P[qe],et=R[qe];it!==null&&et!==void 0&&et.update(it,Be,c||o)}ge&&ge(Ee,Be),Be.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Be}),m=null}const Ie=new Xte;Ie.setAnimationLoop(Ce),this.setAnimationLoop=function(Ee){ge=Ee},this.dispose=function(){}}}const lv=new Io,V_e=new rn;function q_e(i,e){function t(b,T){b.matrixAutoUpdate===!0&&b.updateMatrix(),T.value.copy(b.matrix)}function n(b,T){T.color.getRGB(b.fogColor.value,xte(i)),T.isFog?(b.fogNear.value=T.near,b.fogFar.value=T.far):T.isFogExp2&&(b.fogDensity.value=T.density)}function r(b,T,C,R,P){T.isMeshBasicMaterial||T.isMeshLambertMaterial?s(b,T):T.isMeshToonMaterial?(s(b,T),f(b,T)):T.isMeshPhongMaterial?(s(b,T),u(b,T)):T.isMeshStandardMaterial?(s(b,T),h(b,T),T.isMeshPhysicalMaterial&&p(b,T,P)):T.isMeshMatcapMaterial?(s(b,T),m(b,T)):T.isMeshDepthMaterial?s(b,T):T.isMeshDistanceMaterial?(s(b,T),g(b,T)):T.isMeshNormalMaterial?s(b,T):T.isLineBasicMaterial?(o(b,T),T.isLineDashedMaterial&&a(b,T)):T.isPointsMaterial?l(b,T,C,R):T.isSpriteMaterial?c(b,T):T.isShadowMaterial?(b.color.value.copy(T.color),b.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(b,T){b.opacity.value=T.opacity,T.color&&b.diffuse.value.copy(T.color),T.emissive&&b.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(b.map.value=T.map,t(T.map,b.mapTransform)),T.alphaMap&&(b.alphaMap.value=T.alphaMap,t(T.alphaMap,b.alphaMapTransform)),T.bumpMap&&(b.bumpMap.value=T.bumpMap,t(T.bumpMap,b.bumpMapTransform),b.bumpScale.value=T.bumpScale,T.side===Bs&&(b.bumpScale.value*=-1)),T.normalMap&&(b.normalMap.value=T.normalMap,t(T.normalMap,b.normalMapTransform),b.normalScale.value.copy(T.normalScale),T.side===Bs&&b.normalScale.value.negate()),T.displacementMap&&(b.displacementMap.value=T.displacementMap,t(T.displacementMap,b.displacementMapTransform),b.displacementScale.value=T.displacementScale,b.displacementBias.value=T.displacementBias),T.emissiveMap&&(b.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,b.emissiveMapTransform)),T.specularMap&&(b.specularMap.value=T.specularMap,t(T.specularMap,b.specularMapTransform)),T.alphaTest>0&&(b.alphaTest.value=T.alphaTest);const C=e.get(T),R=C.envMap,P=C.envMapRotation;R&&(b.envMap.value=R,lv.copy(P),lv.x*=-1,lv.y*=-1,lv.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(lv.y*=-1,lv.z*=-1),b.envMapRotation.value.setFromMatrix4(V_e.makeRotationFromEuler(lv)),b.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=T.reflectivity,b.ior.value=T.ior,b.refractionRatio.value=T.refractionRatio),T.lightMap&&(b.lightMap.value=T.lightMap,b.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,b.lightMapTransform)),T.aoMap&&(b.aoMap.value=T.aoMap,b.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,b.aoMapTransform))}function o(b,T){b.diffuse.value.copy(T.color),b.opacity.value=T.opacity,T.map&&(b.map.value=T.map,t(T.map,b.mapTransform))}function a(b,T){b.dashSize.value=T.dashSize,b.totalSize.value=T.dashSize+T.gapSize,b.scale.value=T.scale}function l(b,T,C,R){b.diffuse.value.copy(T.color),b.opacity.value=T.opacity,b.size.value=T.size*C,b.scale.value=R*.5,T.map&&(b.map.value=T.map,t(T.map,b.uvTransform)),T.alphaMap&&(b.alphaMap.value=T.alphaMap,t(T.alphaMap,b.alphaMapTransform)),T.alphaTest>0&&(b.alphaTest.value=T.alphaTest)}function c(b,T){b.diffuse.value.copy(T.color),b.opacity.value=T.opacity,b.rotation.value=T.rotation,T.map&&(b.map.value=T.map,t(T.map,b.mapTransform)),T.alphaMap&&(b.alphaMap.value=T.alphaMap,t(T.alphaMap,b.alphaMapTransform)),T.alphaTest>0&&(b.alphaTest.value=T.alphaTest)}function u(b,T){b.specular.value.copy(T.specular),b.shininess.value=Math.max(T.shininess,1e-4)}function f(b,T){T.gradientMap&&(b.gradientMap.value=T.gradientMap)}function h(b,T){b.metalness.value=T.metalness,T.metalnessMap&&(b.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,b.metalnessMapTransform)),b.roughness.value=T.roughness,T.roughnessMap&&(b.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,b.roughnessMapTransform)),T.envMap&&(b.envMapIntensity.value=T.envMapIntensity)}function p(b,T,C){b.ior.value=T.ior,T.sheen>0&&(b.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),b.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(b.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,b.sheenColorMapTransform)),T.sheenRoughnessMap&&(b.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,b.sheenRoughnessMapTransform))),T.clearcoat>0&&(b.clearcoat.value=T.clearcoat,b.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(b.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,b.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(b.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===Bs&&b.clearcoatNormalScale.value.negate())),T.dispersion>0&&(b.dispersion.value=T.dispersion),T.iridescence>0&&(b.iridescence.value=T.iridescence,b.iridescenceIOR.value=T.iridescenceIOR,b.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(b.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,b.iridescenceMapTransform)),T.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),T.transmission>0&&(b.transmission.value=T.transmission,b.transmissionSamplerMap.value=C.texture,b.transmissionSamplerSize.value.set(C.width,C.height),T.transmissionMap&&(b.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,b.transmissionMapTransform)),b.thickness.value=T.thickness,T.thicknessMap&&(b.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=T.attenuationDistance,b.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(b.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(b.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=T.specularIntensity,b.specularColor.value.copy(T.specularColor),T.specularColorMap&&(b.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,b.specularColorMapTransform)),T.specularIntensityMap&&(b.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,b.specularIntensityMapTransform))}function m(b,T){T.matcap&&(b.matcap.value=T.matcap)}function g(b,T){const C=e.get(T).light;b.referencePosition.value.setFromMatrixPosition(C.matrixWorld),b.nearDistance.value=C.shadow.camera.near,b.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function $_e(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,R){const P=R.program;n.uniformBlockBinding(C,P)}function c(C,R){let P=r[C.id];P===void 0&&(m(C),P=u(C),r[C.id]=P,C.addEventListener("dispose",b));const I=R.program;n.updateUBOMapping(C,I);const F=e.render.frame;s[C.id]!==F&&(h(C),s[C.id]=F)}function u(C){const R=f();C.__bindingPointIndex=R;const P=i.createBuffer(),I=C.__size,F=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,P),i.bufferData(i.UNIFORM_BUFFER,I,F),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,R,P),P}function f(){for(let C=0;C<a;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(C){const R=r[C.id],P=C.uniforms,I=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,R);for(let F=0,k=P.length;F<k;F++){const q=Array.isArray(P[F])?P[F]:[P[F]];for(let H=0,O=q.length;H<O;H++){const $=q[H];if(p($,F,H,I)===!0){const ee=$.__offset,Y=Array.isArray($.value)?$.value:[$.value];let oe=0;for(let re=0;re<Y.length;re++){const Q=Y[re],se=g(Q);typeof Q=="number"||typeof Q=="boolean"?($.__data[0]=Q,i.bufferSubData(i.UNIFORM_BUFFER,ee+oe,$.__data)):Q.isMatrix3?($.__data[0]=Q.elements[0],$.__data[1]=Q.elements[1],$.__data[2]=Q.elements[2],$.__data[3]=0,$.__data[4]=Q.elements[3],$.__data[5]=Q.elements[4],$.__data[6]=Q.elements[5],$.__data[7]=0,$.__data[8]=Q.elements[6],$.__data[9]=Q.elements[7],$.__data[10]=Q.elements[8],$.__data[11]=0):(Q.toArray($.__data,oe),oe+=se.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ee,$.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function p(C,R,P,I){const F=C.value,k=R+"_"+P;if(I[k]===void 0)return typeof F=="number"||typeof F=="boolean"?I[k]=F:I[k]=F.clone(),!0;{const q=I[k];if(typeof F=="number"||typeof F=="boolean"){if(q!==F)return I[k]=F,!0}else if(q.equals(F)===!1)return q.copy(F),!0}return!1}function m(C){const R=C.uniforms;let P=0;const I=16;for(let k=0,q=R.length;k<q;k++){const H=Array.isArray(R[k])?R[k]:[R[k]];for(let O=0,$=H.length;O<$;O++){const ee=H[O],Y=Array.isArray(ee.value)?ee.value:[ee.value];for(let oe=0,re=Y.length;oe<re;oe++){const Q=Y[oe],se=g(Q),le=P%I,de=le%se.boundary,ie=le+de;P+=de,ie!==0&&I-ie<se.storage&&(P+=I-ie),ee.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=P,P+=se.storage}}}const F=P%I;return F>0&&(P+=I-F),C.__size=P,C.__cache={},this}function g(C){const R={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(R.boundary=4,R.storage=4):C.isVector2?(R.boundary=8,R.storage=8):C.isVector3||C.isColor?(R.boundary=16,R.storage=12):C.isVector4?(R.boundary=16,R.storage=16):C.isMatrix3?(R.boundary=48,R.storage=48):C.isMatrix4?(R.boundary=64,R.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),R}function b(C){const R=C.target;R.removeEventListener("dispose",b);const P=o.indexOf(R.__bindingPointIndex);o.splice(P,1),i.deleteBuffer(r[R.id]),delete r[R.id],delete s[R.id]}function T(){for(const C in r)i.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:l,update:c,dispose:T}}class O9{constructor(e={}){const{canvas:t=Q7(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let b=null,T=null;const C=[],R=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kn,this.toneMapping=Sc,this.toneMappingExposure=1;const P=this;let I=!1,F=0,k=0,q=null,H=-1,O=null;const $=new Ln,ee=new Ln;let Y=null;const oe=new Qt(0);let re=0,Q=t.width,se=t.height,le=1,de=null,ie=null;const ge=new Ln(0,0,Q,se),Ce=new Ln(0,0,Q,se);let Ie=!1;const Ee=new ab;let Be=!1,qe=!1;this.transmissionResolutionScale=1;const it=new rn,et=new rn,Ht=new he,_t=new Ln,$t={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let mt=!1;function ut(){return q===null?le:1}let we=n;function Jt(ye,Ge){return t.getContext(ye,Ge)}try{const ye={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${a1}`),t.addEventListener("webglcontextlost",Lt,!1),t.addEventListener("webglcontextrestored",vn,!1),t.addEventListener("webglcontextcreationerror",xn,!1),we===null){const Ge="webgl2";if(we=Jt(Ge,ye),we===null)throw Jt(Ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ye){throw console.error("THREE.WebGLRenderer: "+ye.message),ye}let ft,Dt,Rt,yn,Gt,Se,fe,Pe,Ve,Tt,bt,sn,on,mn,ai,Vt,_n,En,pn,Sn,Fe,xt,dn,Te;function tn(){ft=new ibe(we),ft.init(),xt=new tne(we,ft),Dt=new Qxe(we,ft,e,xt),Rt=new F_e(we,ft),Dt.reverseDepthBuffer&&h&&Rt.buffers.depth.setReversed(!0),yn=new obe(we),Gt=new T_e,Se=new U_e(we,ft,Rt,Gt,Dt,xt,yn),fe=new Jxe(P),Pe=new nbe(P),Ve=new d1e(we),dn=new Yxe(we,Ve),Tt=new rbe(we,Ve,yn,dn),bt=new lbe(we,Tt,Ve,yn),pn=new abe(we,Dt,Se),Vt=new Zxe(Gt),sn=new S_e(P,fe,Pe,ft,Dt,dn,Vt),on=new q_e(P,Gt),mn=new w_e,ai=new P_e(ft),En=new Kxe(P,fe,Pe,Rt,bt,p,l),_n=new I_e(P,bt,Dt),Te=new $_e(we,yn,Dt,Rt),Sn=new Xxe(we,ft,yn),Fe=new sbe(we,ft,yn),yn.programs=sn.programs,P.capabilities=Dt,P.extensions=ft,P.properties=Gt,P.renderLists=mn,P.shadowMap=_n,P.state=Rt,P.info=yn}tn();const At=new H_e(P,we);this.xr=At,this.getContext=function(){return we},this.getContextAttributes=function(){return we.getContextAttributes()},this.forceContextLoss=function(){const ye=ft.get("WEBGL_lose_context");ye&&ye.loseContext()},this.forceContextRestore=function(){const ye=ft.get("WEBGL_lose_context");ye&&ye.restoreContext()},this.getPixelRatio=function(){return le},this.setPixelRatio=function(ye){ye!==void 0&&(le=ye,this.setSize(Q,se,!1))},this.getSize=function(ye){return ye.set(Q,se)},this.setSize=function(ye,Ge,lt=!0){if(At.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=ye,se=Ge,t.width=Math.floor(ye*le),t.height=Math.floor(Ge*le),lt===!0&&(t.style.width=ye+"px",t.style.height=Ge+"px"),this.setViewport(0,0,ye,Ge)},this.getDrawingBufferSize=function(ye){return ye.set(Q*le,se*le).floor()},this.setDrawingBufferSize=function(ye,Ge,lt){Q=ye,se=Ge,le=lt,t.width=Math.floor(ye*lt),t.height=Math.floor(Ge*lt),this.setViewport(0,0,ye,Ge)},this.getCurrentViewport=function(ye){return ye.copy($)},this.getViewport=function(ye){return ye.copy(ge)},this.setViewport=function(ye,Ge,lt,Je){ye.isVector4?ge.set(ye.x,ye.y,ye.z,ye.w):ge.set(ye,Ge,lt,Je),Rt.viewport($.copy(ge).multiplyScalar(le).round())},this.getScissor=function(ye){return ye.copy(Ce)},this.setScissor=function(ye,Ge,lt,Je){ye.isVector4?Ce.set(ye.x,ye.y,ye.z,ye.w):Ce.set(ye,Ge,lt,Je),Rt.scissor(ee.copy(Ce).multiplyScalar(le).round())},this.getScissorTest=function(){return Ie},this.setScissorTest=function(ye){Rt.setScissorTest(Ie=ye)},this.setOpaqueSort=function(ye){de=ye},this.setTransparentSort=function(ye){ie=ye},this.getClearColor=function(ye){return ye.copy(En.getClearColor())},this.setClearColor=function(){En.setClearColor.apply(En,arguments)},this.getClearAlpha=function(){return En.getClearAlpha()},this.setClearAlpha=function(){En.setClearAlpha.apply(En,arguments)},this.clear=function(ye=!0,Ge=!0,lt=!0){let Je=0;if(ye){let Ye=!1;if(q!==null){const Xt=q.texture.format;Ye=Xt===nb||Xt===tb||Xt===l1}if(Ye){const Xt=q.texture.type,fn=Xt===Aa||Xt===Gs||Xt===ud||Xt===yd||Xt===f3||Xt===h3,zt=En.getClearColor(),Ae=En.getClearAlpha(),en=zt.r,li=zt.g,Hn=zt.b;fn?(m[0]=en,m[1]=li,m[2]=Hn,m[3]=Ae,we.clearBufferuiv(we.COLOR,0,m)):(g[0]=en,g[1]=li,g[2]=Hn,g[3]=Ae,we.clearBufferiv(we.COLOR,0,g))}else Je|=we.COLOR_BUFFER_BIT}Ge&&(Je|=we.DEPTH_BUFFER_BIT),lt&&(Je|=we.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),we.clear(Je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Lt,!1),t.removeEventListener("webglcontextrestored",vn,!1),t.removeEventListener("webglcontextcreationerror",xn,!1),En.dispose(),mn.dispose(),ai.dispose(),Gt.dispose(),fe.dispose(),Pe.dispose(),bt.dispose(),dn.dispose(),Te.dispose(),sn.dispose(),At.dispose(),At.removeEventListener("sessionstart",dt),At.removeEventListener("sessionend",Ut),hn.stop()};function Lt(ye){ye.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function vn(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const ye=yn.autoReset,Ge=_n.enabled,lt=_n.autoUpdate,Je=_n.needsUpdate,Ye=_n.type;tn(),yn.autoReset=ye,_n.enabled=Ge,_n.autoUpdate=lt,_n.needsUpdate=Je,_n.type=Ye}function xn(ye){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ye.statusMessage)}function Nn(ye){const Ge=ye.target;Ge.removeEventListener("dispose",Nn),Fi(Ge)}function Fi(ye){Dn(ye),Gt.remove(ye)}function Dn(ye){const Ge=Gt.get(ye).programs;Ge!==void 0&&(Ge.forEach(function(lt){sn.releaseProgram(lt)}),ye.isShaderMaterial&&sn.releaseShaderCache(ye))}this.renderBufferDirect=function(ye,Ge,lt,Je,Ye,Xt){Ge===null&&(Ge=$t);const fn=Ye.isMesh&&Ye.matrixWorld.determinant()<0,zt=Pc(ye,Ge,lt,Je,Ye);Rt.setMaterial(Je,fn);let Ae=lt.index,en=1;if(Je.wireframe===!0){if(Ae=Tt.getWireframeAttribute(lt),Ae===void 0)return;en=2}const li=lt.drawRange,Hn=lt.attributes.position;let Zi=li.start*en,Ji=(li.start+li.count)*en;Xt!==null&&(Zi=Math.max(Zi,Xt.start*en),Ji=Math.min(Ji,(Xt.start+Xt.count)*en)),Ae!==null?(Zi=Math.max(Zi,0),Ji=Math.min(Ji,Ae.count)):Hn!=null&&(Zi=Math.max(Zi,0),Ji=Math.min(Ji,Hn.count));const Zr=Ji-Zi;if(Zr<0||Zr===1/0)return;dn.setup(Ye,Je,zt,lt,Ae);let me,gi=Sn;if(Ae!==null&&(me=Ve.get(Ae),gi=Fe,gi.setIndex(me)),Ye.isMesh)Je.wireframe===!0?(Rt.setLineWidth(Je.wireframeLinewidth*ut()),gi.setMode(we.LINES)):gi.setMode(we.TRIANGLES);else if(Ye.isLine){let Yn=Je.linewidth;Yn===void 0&&(Yn=1),Rt.setLineWidth(Yn*ut()),Ye.isLineSegments?gi.setMode(we.LINES):Ye.isLineLoop?gi.setMode(we.LINE_LOOP):gi.setMode(we.LINE_STRIP)}else Ye.isPoints?gi.setMode(we.POINTS):Ye.isSprite&&gi.setMode(we.TRIANGLES);if(Ye.isBatchedMesh)if(Ye._multiDrawInstances!==null)gi.renderMultiDrawInstances(Ye._multiDrawStarts,Ye._multiDrawCounts,Ye._multiDrawCount,Ye._multiDrawInstances);else if(ft.get("WEBGL_multi_draw"))gi.renderMultiDraw(Ye._multiDrawStarts,Ye._multiDrawCounts,Ye._multiDrawCount);else{const Yn=Ye._multiDrawStarts,Qs=Ye._multiDrawCounts,er=Ye._multiDrawCount,Va=Ae?Ve.get(Ae).bytesPerElement:1,Rl=Gt.get(Je).currentProgram.getUniforms();for(let ra=0;ra<er;ra++)Rl.setValue(we,"_gl_DrawID",ra),gi.render(Yn[ra]/Va,Qs[ra])}else if(Ye.isInstancedMesh)gi.renderInstances(Zi,Zr,Ye.count);else if(lt.isInstancedBufferGeometry){const Yn=lt._maxInstanceCount!==void 0?lt._maxInstanceCount:1/0,Qs=Math.min(lt.instanceCount,Yn);gi.renderInstances(Zi,Zr,Qs)}else gi.render(Zi,Zr)};function Gn(ye,Ge,lt){ye.transparent===!0&&ye.side===Do&&ye.forceSinglePass===!1?(ye.side=Bs,ye.needsUpdate=!0,zn(ye,Ge,lt),ye.side=sh,ye.needsUpdate=!0,zn(ye,Ge,lt),ye.side=Do):zn(ye,Ge,lt)}this.compile=function(ye,Ge,lt=null){lt===null&&(lt=ye),T=ai.get(lt),T.init(Ge),R.push(T),lt.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(Ge.layers)&&(T.pushLight(Ye),Ye.castShadow&&T.pushShadow(Ye))}),ye!==lt&&ye.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(Ge.layers)&&(T.pushLight(Ye),Ye.castShadow&&T.pushShadow(Ye))}),T.setupLights();const Je=new Set;return ye.traverse(function(Ye){if(!(Ye.isMesh||Ye.isPoints||Ye.isLine||Ye.isSprite))return;const Xt=Ye.material;if(Xt)if(Array.isArray(Xt))for(let fn=0;fn<Xt.length;fn++){const zt=Xt[fn];Gn(zt,lt,Ye),Je.add(zt)}else Gn(Xt,lt,Ye),Je.add(Xt)}),R.pop(),T=null,Je},this.compileAsync=function(ye,Ge,lt=null){const Je=this.compile(ye,Ge,lt);return new Promise(Ye=>{function Xt(){if(Je.forEach(function(fn){Gt.get(fn).currentProgram.isReady()&&Je.delete(fn)}),Je.size===0){Ye(ye);return}setTimeout(Xt,10)}ft.get("KHR_parallel_shader_compile")!==null?Xt():setTimeout(Xt,10)})};let Gr=null;function Qr(ye){Gr&&Gr(ye)}function dt(){hn.stop()}function Ut(){hn.start()}const hn=new Xte;hn.setAnimationLoop(Qr),typeof self<"u"&&hn.setContext(self),this.setAnimationLoop=function(ye){Gr=ye,At.setAnimationLoop(ye),ye===null?hn.stop():hn.start()},At.addEventListener("sessionstart",dt),At.addEventListener("sessionend",Ut),this.render=function(ye,Ge){if(Ge!==void 0&&Ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),Ge.parent===null&&Ge.matrixWorldAutoUpdate===!0&&Ge.updateMatrixWorld(),At.enabled===!0&&At.isPresenting===!0&&(At.cameraAutoUpdate===!0&&At.updateCamera(Ge),Ge=At.getCamera()),ye.isScene===!0&&ye.onBeforeRender(P,ye,Ge,q),T=ai.get(ye,R.length),T.init(Ge),R.push(T),et.multiplyMatrices(Ge.projectionMatrix,Ge.matrixWorldInverse),Ee.setFromProjectionMatrix(et),qe=this.localClippingEnabled,Be=Vt.init(this.clippingPlanes,qe),b=mn.get(ye,C.length),b.init(),C.push(b),At.enabled===!0&&At.isPresenting===!0){const Xt=P.xr.getDepthSensingMesh();Xt!==null&&In(Xt,Ge,-1/0,P.sortObjects)}In(ye,Ge,0,P.sortObjects),b.finish(),P.sortObjects===!0&&b.sort(de,ie),mt=At.enabled===!1||At.isPresenting===!1||At.hasDepthSensing()===!1,mt&&En.addToRenderList(b,ye),this.info.render.frame++,Be===!0&&Vt.beginShadows();const lt=T.state.shadowsArray;_n.render(lt,ye,Ge),Be===!0&&Vt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Je=b.opaque,Ye=b.transmissive;if(T.setupLights(),Ge.isArrayCamera){const Xt=Ge.cameras;if(Ye.length>0)for(let fn=0,zt=Xt.length;fn<zt;fn++){const Ae=Xt[fn];ve(Je,Ye,ye,Ae)}mt&&En.render(ye);for(let fn=0,zt=Xt.length;fn<zt;fn++){const Ae=Xt[fn];S(b,ye,Ae,Ae.viewport)}}else Ye.length>0&&ve(Je,Ye,ye,Ge),mt&&En.render(ye),S(b,ye,Ge);q!==null&&k===0&&(Se.updateMultisampleRenderTarget(q),Se.updateRenderTargetMipmap(q)),ye.isScene===!0&&ye.onAfterRender(P,ye,Ge),dn.resetDefaultState(),H=-1,O=null,R.pop(),R.length>0?(T=R[R.length-1],Be===!0&&Vt.setGlobalState(P.clippingPlanes,T.state.camera)):T=null,C.pop(),C.length>0?b=C[C.length-1]:b=null};function In(ye,Ge,lt,Je){if(ye.visible===!1)return;if(ye.layers.test(Ge.layers)){if(ye.isGroup)lt=ye.renderOrder;else if(ye.isLOD)ye.autoUpdate===!0&&ye.update(Ge);else if(ye.isLight)T.pushLight(ye),ye.castShadow&&T.pushShadow(ye);else if(ye.isSprite){if(!ye.frustumCulled||Ee.intersectsSprite(ye)){Je&&_t.setFromMatrixPosition(ye.matrixWorld).applyMatrix4(et);const fn=bt.update(ye),zt=ye.material;zt.visible&&b.push(ye,fn,zt,lt,_t.z,null)}}else if((ye.isMesh||ye.isLine||ye.isPoints)&&(!ye.frustumCulled||Ee.intersectsObject(ye))){const fn=bt.update(ye),zt=ye.material;if(Je&&(ye.boundingSphere!==void 0?(ye.boundingSphere===null&&ye.computeBoundingSphere(),_t.copy(ye.boundingSphere.center)):(fn.boundingSphere===null&&fn.computeBoundingSphere(),_t.copy(fn.boundingSphere.center)),_t.applyMatrix4(ye.matrixWorld).applyMatrix4(et)),Array.isArray(zt)){const Ae=fn.groups;for(let en=0,li=Ae.length;en<li;en++){const Hn=Ae[en],Zi=zt[Hn.materialIndex];Zi&&Zi.visible&&b.push(ye,fn,Zi,lt,_t.z,Hn)}}else zt.visible&&b.push(ye,fn,zt,lt,_t.z,null)}}const Xt=ye.children;for(let fn=0,zt=Xt.length;fn<zt;fn++)In(Xt[fn],Ge,lt,Je)}function S(ye,Ge,lt,Je){const Ye=ye.opaque,Xt=ye.transmissive,fn=ye.transparent;T.setupLightsView(lt),Be===!0&&Vt.setGlobalState(P.clippingPlanes,lt),Je&&Rt.viewport($.copy(Je)),Ye.length>0&&Kn(Ye,Ge,lt),Xt.length>0&&Kn(Xt,Ge,lt),fn.length>0&&Kn(fn,Ge,lt),Rt.buffers.depth.setTest(!0),Rt.buffers.depth.setMask(!0),Rt.buffers.color.setMask(!0),Rt.setPolygonOffset(!1)}function ve(ye,Ge,lt,Je){if((lt.isScene===!0?lt.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[Je.id]===void 0&&(T.state.transmissionRenderTarget[Je.id]=new xd(1,1,{generateMipmaps:!0,type:ft.has("EXT_color_buffer_half_float")||ft.has("EXT_color_buffer_float")?Fa:Aa,minFilter:Ja,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Oi.workingColorSpace}));const Xt=T.state.transmissionRenderTarget[Je.id],fn=Je.viewport||$;Xt.setSize(fn.z*P.transmissionResolutionScale,fn.w*P.transmissionResolutionScale);const zt=P.getRenderTarget();P.setRenderTarget(Xt),P.getClearColor(oe),re=P.getClearAlpha(),re<1&&P.setClearColor(16777215,.5),P.clear(),mt&&En.render(lt);const Ae=P.toneMapping;P.toneMapping=Sc;const en=Je.viewport;if(Je.viewport!==void 0&&(Je.viewport=void 0),T.setupLightsView(Je),Be===!0&&Vt.setGlobalState(P.clippingPlanes,Je),Kn(ye,lt,Je),Se.updateMultisampleRenderTarget(Xt),Se.updateRenderTargetMipmap(Xt),ft.has("WEBGL_multisampled_render_to_texture")===!1){let li=!1;for(let Hn=0,Zi=Ge.length;Hn<Zi;Hn++){const Ji=Ge[Hn],Zr=Ji.object,me=Ji.geometry,gi=Ji.material,Yn=Ji.group;if(gi.side===Do&&Zr.layers.test(Je.layers)){const Qs=gi.side;gi.side=Bs,gi.needsUpdate=!0,ni(Zr,lt,Je,me,gi,Yn),gi.side=Qs,gi.needsUpdate=!0,li=!0}}li===!0&&(Se.updateMultisampleRenderTarget(Xt),Se.updateRenderTargetMipmap(Xt))}P.setRenderTarget(zt),P.setClearColor(oe,re),en!==void 0&&(Je.viewport=en),P.toneMapping=Ae}function Kn(ye,Ge,lt){const Je=Ge.isScene===!0?Ge.overrideMaterial:null;for(let Ye=0,Xt=ye.length;Ye<Xt;Ye++){const fn=ye[Ye],zt=fn.object,Ae=fn.geometry,en=Je===null?fn.material:Je,li=fn.group;zt.layers.test(lt.layers)&&ni(zt,Ge,lt,Ae,en,li)}}function ni(ye,Ge,lt,Je,Ye,Xt){ye.onBeforeRender(P,Ge,lt,Je,Ye,Xt),ye.modelViewMatrix.multiplyMatrices(lt.matrixWorldInverse,ye.matrixWorld),ye.normalMatrix.getNormalMatrix(ye.modelViewMatrix),Ye.onBeforeRender(P,Ge,lt,Je,ye,Xt),Ye.transparent===!0&&Ye.side===Do&&Ye.forceSinglePass===!1?(Ye.side=Bs,Ye.needsUpdate=!0,P.renderBufferDirect(lt,Ge,Je,Ye,ye,Xt),Ye.side=sh,Ye.needsUpdate=!0,P.renderBufferDirect(lt,Ge,Je,Ye,ye,Xt),Ye.side=Do):P.renderBufferDirect(lt,Ge,Je,Ye,ye,Xt),ye.onAfterRender(P,Ge,lt,Je,Ye,Xt)}function zn(ye,Ge,lt){Ge.isScene!==!0&&(Ge=$t);const Je=Gt.get(ye),Ye=T.state.lights,Xt=T.state.shadowsArray,fn=Ye.state.version,zt=sn.getParameters(ye,Ye.state,Xt,Ge,lt),Ae=sn.getProgramCacheKey(zt);let en=Je.programs;Je.environment=ye.isMeshStandardMaterial?Ge.environment:null,Je.fog=Ge.fog,Je.envMap=(ye.isMeshStandardMaterial?Pe:fe).get(ye.envMap||Je.environment),Je.envMapRotation=Je.environment!==null&&ye.envMap===null?Ge.environmentRotation:ye.envMapRotation,en===void 0&&(ye.addEventListener("dispose",Nn),en=new Map,Je.programs=en);let li=en.get(Ae);if(li!==void 0){if(Je.currentProgram===li&&Je.lightsStateVersion===fn)return Bi(ye,zt),li}else zt.uniforms=sn.getUniforms(ye),ye.onBeforeCompile(zt,P),li=sn.acquireProgram(zt,Ae),en.set(Ae,li),Je.uniforms=zt.uniforms;const Hn=Je.uniforms;return(!ye.isShaderMaterial&&!ye.isRawShaderMaterial||ye.clipping===!0)&&(Hn.clippingPlanes=Vt.uniform),Bi(ye,zt),Je.needsLights=xi(ye),Je.lightsStateVersion=fn,Je.needsLights&&(Hn.ambientLightColor.value=Ye.state.ambient,Hn.lightProbe.value=Ye.state.probe,Hn.directionalLights.value=Ye.state.directional,Hn.directionalLightShadows.value=Ye.state.directionalShadow,Hn.spotLights.value=Ye.state.spot,Hn.spotLightShadows.value=Ye.state.spotShadow,Hn.rectAreaLights.value=Ye.state.rectArea,Hn.ltc_1.value=Ye.state.rectAreaLTC1,Hn.ltc_2.value=Ye.state.rectAreaLTC2,Hn.pointLights.value=Ye.state.point,Hn.pointLightShadows.value=Ye.state.pointShadow,Hn.hemisphereLights.value=Ye.state.hemi,Hn.directionalShadowMap.value=Ye.state.directionalShadowMap,Hn.directionalShadowMatrix.value=Ye.state.directionalShadowMatrix,Hn.spotShadowMap.value=Ye.state.spotShadowMap,Hn.spotLightMatrix.value=Ye.state.spotLightMatrix,Hn.spotLightMap.value=Ye.state.spotLightMap,Hn.pointShadowMap.value=Ye.state.pointShadowMap,Hn.pointShadowMatrix.value=Ye.state.pointShadowMatrix),Je.currentProgram=li,Je.uniformsList=null,li}function si(ye){if(ye.uniformsList===null){const Ge=ye.currentProgram.getUniforms();ye.uniformsList=X4.seqWithValue(Ge.seq,ye.uniforms)}return ye.uniformsList}function Bi(ye,Ge){const lt=Gt.get(ye);lt.outputColorSpace=Ge.outputColorSpace,lt.batching=Ge.batching,lt.batchingColor=Ge.batchingColor,lt.instancing=Ge.instancing,lt.instancingColor=Ge.instancingColor,lt.instancingMorph=Ge.instancingMorph,lt.skinning=Ge.skinning,lt.morphTargets=Ge.morphTargets,lt.morphNormals=Ge.morphNormals,lt.morphColors=Ge.morphColors,lt.morphTargetsCount=Ge.morphTargetsCount,lt.numClippingPlanes=Ge.numClippingPlanes,lt.numIntersection=Ge.numClipIntersection,lt.vertexAlphas=Ge.vertexAlphas,lt.vertexTangents=Ge.vertexTangents,lt.toneMapping=Ge.toneMapping}function Pc(ye,Ge,lt,Je,Ye){Ge.isScene!==!0&&(Ge=$t),Se.resetTextureUnits();const Xt=Ge.fog,fn=Je.isMeshStandardMaterial?Ge.environment:null,zt=q===null?P.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:hu,Ae=(Je.isMeshStandardMaterial?Pe:fe).get(Je.envMap||fn),en=Je.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,li=!!lt.attributes.tangent&&(!!Je.normalMap||Je.anisotropy>0),Hn=!!lt.morphAttributes.position,Zi=!!lt.morphAttributes.normal,Ji=!!lt.morphAttributes.color;let Zr=Sc;Je.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(Zr=P.toneMapping);const me=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,gi=me!==void 0?me.length:0,Yn=Gt.get(Je),Qs=T.state.lights;if(Be===!0&&(qe===!0||ye!==O)){const As=ye===O&&Je.id===H;Vt.setState(Je,ye,As)}let er=!1;Je.version===Yn.__version?(Yn.needsLights&&Yn.lightsStateVersion!==Qs.state.version||Yn.outputColorSpace!==zt||Ye.isBatchedMesh&&Yn.batching===!1||!Ye.isBatchedMesh&&Yn.batching===!0||Ye.isBatchedMesh&&Yn.batchingColor===!0&&Ye.colorTexture===null||Ye.isBatchedMesh&&Yn.batchingColor===!1&&Ye.colorTexture!==null||Ye.isInstancedMesh&&Yn.instancing===!1||!Ye.isInstancedMesh&&Yn.instancing===!0||Ye.isSkinnedMesh&&Yn.skinning===!1||!Ye.isSkinnedMesh&&Yn.skinning===!0||Ye.isInstancedMesh&&Yn.instancingColor===!0&&Ye.instanceColor===null||Ye.isInstancedMesh&&Yn.instancingColor===!1&&Ye.instanceColor!==null||Ye.isInstancedMesh&&Yn.instancingMorph===!0&&Ye.morphTexture===null||Ye.isInstancedMesh&&Yn.instancingMorph===!1&&Ye.morphTexture!==null||Yn.envMap!==Ae||Je.fog===!0&&Yn.fog!==Xt||Yn.numClippingPlanes!==void 0&&(Yn.numClippingPlanes!==Vt.numPlanes||Yn.numIntersection!==Vt.numIntersection)||Yn.vertexAlphas!==en||Yn.vertexTangents!==li||Yn.morphTargets!==Hn||Yn.morphNormals!==Zi||Yn.morphColors!==Ji||Yn.toneMapping!==Zr||Yn.morphTargetsCount!==gi)&&(er=!0):(er=!0,Yn.__version=Je.version);let Va=Yn.currentProgram;er===!0&&(Va=zn(Je,Ge,Ye));let Rl=!1,ra=!1,Zs=!1;const Tr=Va.getUniforms(),ps=Yn.uniforms;if(Rt.useProgram(Va.program)&&(Rl=!0,ra=!0,Zs=!0),Je.id!==H&&(H=Je.id,ra=!0),Rl||O!==ye){Rt.buffers.depth.getReversed()?(it.copy(ye.projectionMatrix),$me(it),jme(it),Tr.setValue(we,"projectionMatrix",it)):Tr.setValue(we,"projectionMatrix",ye.projectionMatrix),Tr.setValue(we,"viewMatrix",ye.matrixWorldInverse);const Uo=Tr.map.cameraPosition;Uo!==void 0&&Uo.setValue(we,Ht.setFromMatrixPosition(ye.matrixWorld)),Dt.logarithmicDepthBuffer&&Tr.setValue(we,"logDepthBufFC",2/(Math.log(ye.far+1)/Math.LN2)),(Je.isMeshPhongMaterial||Je.isMeshToonMaterial||Je.isMeshLambertMaterial||Je.isMeshBasicMaterial||Je.isMeshStandardMaterial||Je.isShaderMaterial)&&Tr.setValue(we,"isOrthographic",ye.isOrthographicCamera===!0),O!==ye&&(O=ye,ra=!0,Zs=!0)}if(Ye.isSkinnedMesh){Tr.setOptional(we,Ye,"bindMatrix"),Tr.setOptional(we,Ye,"bindMatrixInverse");const As=Ye.skeleton;As&&(As.boneTexture===null&&As.computeBoneTexture(),Tr.setValue(we,"boneTexture",As.boneTexture,Se))}Ye.isBatchedMesh&&(Tr.setOptional(we,Ye,"batchingTexture"),Tr.setValue(we,"batchingTexture",Ye._matricesTexture,Se),Tr.setOptional(we,Ye,"batchingIdTexture"),Tr.setValue(we,"batchingIdTexture",Ye._indirectTexture,Se),Tr.setOptional(we,Ye,"batchingColorTexture"),Ye._colorsTexture!==null&&Tr.setValue(we,"batchingColorTexture",Ye._colorsTexture,Se));const lr=lt.morphAttributes;if((lr.position!==void 0||lr.normal!==void 0||lr.color!==void 0)&&pn.update(Ye,lt,Va),(ra||Yn.receiveShadow!==Ye.receiveShadow)&&(Yn.receiveShadow=Ye.receiveShadow,Tr.setValue(we,"receiveShadow",Ye.receiveShadow)),Je.isMeshGouraudMaterial&&Je.envMap!==null&&(ps.envMap.value=Ae,ps.flipEnvMap.value=Ae.isCubeTexture&&Ae.isRenderTargetTexture===!1?-1:1),Je.isMeshStandardMaterial&&Je.envMap===null&&Ge.environment!==null&&(ps.envMapIntensity.value=Ge.environmentIntensity),ra&&(Tr.setValue(we,"toneMappingExposure",P.toneMappingExposure),Yn.needsLights&&pr(ps,Zs),Xt&&Je.fog===!0&&on.refreshFogUniforms(ps,Xt),on.refreshMaterialUniforms(ps,Je,le,se,T.state.transmissionRenderTarget[ye.id]),X4.upload(we,si(Yn),ps,Se)),Je.isShaderMaterial&&Je.uniformsNeedUpdate===!0&&(X4.upload(we,si(Yn),ps,Se),Je.uniformsNeedUpdate=!1),Je.isSpriteMaterial&&Tr.setValue(we,"center",Ye.center),Tr.setValue(we,"modelViewMatrix",Ye.modelViewMatrix),Tr.setValue(we,"normalMatrix",Ye.normalMatrix),Tr.setValue(we,"modelMatrix",Ye.matrixWorld),Je.isShaderMaterial||Je.isRawShaderMaterial){const As=Je.uniformsGroups;for(let Uo=0,Bc=As.length;Uo<Bc;Uo++){const Sa=As[Uo];Te.update(Sa,Va),Te.bind(Sa,Va)}}return Va}function pr(ye,Ge){ye.ambientLightColor.needsUpdate=Ge,ye.lightProbe.needsUpdate=Ge,ye.directionalLights.needsUpdate=Ge,ye.directionalLightShadows.needsUpdate=Ge,ye.pointLights.needsUpdate=Ge,ye.pointLightShadows.needsUpdate=Ge,ye.spotLights.needsUpdate=Ge,ye.spotLightShadows.needsUpdate=Ge,ye.rectAreaLights.needsUpdate=Ge,ye.hemisphereLights.needsUpdate=Ge}function xi(ye){return ye.isMeshLambertMaterial||ye.isMeshToonMaterial||ye.isMeshPhongMaterial||ye.isMeshStandardMaterial||ye.isShadowMaterial||ye.isShaderMaterial&&ye.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return q},this.setRenderTargetTextures=function(ye,Ge,lt){Gt.get(ye.texture).__webglTexture=Ge,Gt.get(ye.depthTexture).__webglTexture=lt;const Je=Gt.get(ye);Je.__hasExternalTextures=!0,Je.__autoAllocateDepthBuffer=lt===void 0,Je.__autoAllocateDepthBuffer||ft.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Je.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ye,Ge){const lt=Gt.get(ye);lt.__webglFramebuffer=Ge,lt.__useDefaultFramebuffer=Ge===void 0};const Xs=we.createFramebuffer();this.setRenderTarget=function(ye,Ge=0,lt=0){q=ye,F=Ge,k=lt;let Je=!0,Ye=null,Xt=!1,fn=!1;if(ye){const Ae=Gt.get(ye);if(Ae.__useDefaultFramebuffer!==void 0)Rt.bindFramebuffer(we.FRAMEBUFFER,null),Je=!1;else if(Ae.__webglFramebuffer===void 0)Se.setupRenderTarget(ye);else if(Ae.__hasExternalTextures)Se.rebindTextures(ye,Gt.get(ye.texture).__webglTexture,Gt.get(ye.depthTexture).__webglTexture);else if(ye.depthBuffer){const Hn=ye.depthTexture;if(Ae.__boundDepthTexture!==Hn){if(Hn!==null&&Gt.has(Hn)&&(ye.width!==Hn.image.width||ye.height!==Hn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Se.setupDepthRenderbuffer(ye)}}const en=ye.texture;(en.isData3DTexture||en.isDataArrayTexture||en.isCompressedArrayTexture)&&(fn=!0);const li=Gt.get(ye).__webglFramebuffer;ye.isWebGLCubeRenderTarget?(Array.isArray(li[Ge])?Ye=li[Ge][lt]:Ye=li[Ge],Xt=!0):ye.samples>0&&Se.useMultisampledRTT(ye)===!1?Ye=Gt.get(ye).__webglMultisampledFramebuffer:Array.isArray(li)?Ye=li[lt]:Ye=li,$.copy(ye.viewport),ee.copy(ye.scissor),Y=ye.scissorTest}else $.copy(ge).multiplyScalar(le).floor(),ee.copy(Ce).multiplyScalar(le).floor(),Y=Ie;if(lt!==0&&(Ye=Xs),Rt.bindFramebuffer(we.FRAMEBUFFER,Ye)&&Je&&Rt.drawBuffers(ye,Ye),Rt.viewport($),Rt.scissor(ee),Rt.setScissorTest(Y),Xt){const Ae=Gt.get(ye.texture);we.framebufferTexture2D(we.FRAMEBUFFER,we.COLOR_ATTACHMENT0,we.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Ae.__webglTexture,lt)}else if(fn){const Ae=Gt.get(ye.texture),en=Ge;we.framebufferTextureLayer(we.FRAMEBUFFER,we.COLOR_ATTACHMENT0,Ae.__webglTexture,lt,en)}else if(ye!==null&&lt!==0){const Ae=Gt.get(ye.texture);we.framebufferTexture2D(we.FRAMEBUFFER,we.COLOR_ATTACHMENT0,we.TEXTURE_2D,Ae.__webglTexture,lt)}H=-1},this.readRenderTargetPixels=function(ye,Ge,lt,Je,Ye,Xt,fn){if(!(ye&&ye.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=Gt.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&fn!==void 0&&(zt=zt[fn]),zt){Rt.bindFramebuffer(we.FRAMEBUFFER,zt);try{const Ae=ye.texture,en=Ae.format,li=Ae.type;if(!Dt.textureFormatReadable(en)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Dt.textureTypeReadable(li)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ge>=0&&Ge<=ye.width-Je&&lt>=0&&lt<=ye.height-Ye&&we.readPixels(Ge,lt,Je,Ye,xt.convert(en),xt.convert(li),Xt)}finally{const Ae=q!==null?Gt.get(q).__webglFramebuffer:null;Rt.bindFramebuffer(we.FRAMEBUFFER,Ae)}}},this.readRenderTargetPixelsAsync=async function(ye,Ge,lt,Je,Ye,Xt,fn){if(!(ye&&ye.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zt=Gt.get(ye).__webglFramebuffer;if(ye.isWebGLCubeRenderTarget&&fn!==void 0&&(zt=zt[fn]),zt){const Ae=ye.texture,en=Ae.format,li=Ae.type;if(!Dt.textureFormatReadable(en))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Dt.textureTypeReadable(li))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ge>=0&&Ge<=ye.width-Je&&lt>=0&&lt<=ye.height-Ye){Rt.bindFramebuffer(we.FRAMEBUFFER,zt);const Hn=we.createBuffer();we.bindBuffer(we.PIXEL_PACK_BUFFER,Hn),we.bufferData(we.PIXEL_PACK_BUFFER,Xt.byteLength,we.STREAM_READ),we.readPixels(Ge,lt,Je,Ye,xt.convert(en),xt.convert(li),0);const Zi=q!==null?Gt.get(q).__webglFramebuffer:null;Rt.bindFramebuffer(we.FRAMEBUFFER,Zi);const Ji=we.fenceSync(we.SYNC_GPU_COMMANDS_COMPLETE,0);return we.flush(),await qme(we,Ji,4),we.bindBuffer(we.PIXEL_PACK_BUFFER,Hn),we.getBufferSubData(we.PIXEL_PACK_BUFFER,0,Xt),we.deleteBuffer(Hn),we.deleteSync(Ji),Xt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ye,Ge=null,lt=0){ye.isTexture!==!0&&(Sp("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ge=arguments[0]||null,ye=arguments[1]);const Je=Math.pow(2,-lt),Ye=Math.floor(ye.image.width*Je),Xt=Math.floor(ye.image.height*Je),fn=Ge!==null?Ge.x:0,zt=Ge!==null?Ge.y:0;Se.setTexture2D(ye,0),we.copyTexSubImage2D(we.TEXTURE_2D,lt,0,0,fn,zt,Ye,Xt),Rt.unbindTexture()};const vu=we.createFramebuffer(),Nc=we.createFramebuffer();this.copyTextureToTexture=function(ye,Ge,lt=null,Je=null,Ye=0,Xt=null){ye.isTexture!==!0&&(Sp("WebGLRenderer: copyTextureToTexture function signature has changed."),Je=arguments[0]||null,ye=arguments[1],Ge=arguments[2],Xt=arguments[3]||0,lt=null),Xt===null&&(Ye!==0?(Sp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Xt=Ye,Ye=0):Xt=0);let fn,zt,Ae,en,li,Hn,Zi,Ji,Zr;const me=ye.isCompressedTexture?ye.mipmaps[Xt]:ye.image;if(lt!==null)fn=lt.max.x-lt.min.x,zt=lt.max.y-lt.min.y,Ae=lt.isBox3?lt.max.z-lt.min.z:1,en=lt.min.x,li=lt.min.y,Hn=lt.isBox3?lt.min.z:0;else{const lr=Math.pow(2,-Ye);fn=Math.floor(me.width*lr),zt=Math.floor(me.height*lr),ye.isDataArrayTexture?Ae=me.depth:ye.isData3DTexture?Ae=Math.floor(me.depth*lr):Ae=1,en=0,li=0,Hn=0}Je!==null?(Zi=Je.x,Ji=Je.y,Zr=Je.z):(Zi=0,Ji=0,Zr=0);const gi=xt.convert(Ge.format),Yn=xt.convert(Ge.type);let Qs;Ge.isData3DTexture?(Se.setTexture3D(Ge,0),Qs=we.TEXTURE_3D):Ge.isDataArrayTexture||Ge.isCompressedArrayTexture?(Se.setTexture2DArray(Ge,0),Qs=we.TEXTURE_2D_ARRAY):(Se.setTexture2D(Ge,0),Qs=we.TEXTURE_2D),we.pixelStorei(we.UNPACK_FLIP_Y_WEBGL,Ge.flipY),we.pixelStorei(we.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ge.premultiplyAlpha),we.pixelStorei(we.UNPACK_ALIGNMENT,Ge.unpackAlignment);const er=we.getParameter(we.UNPACK_ROW_LENGTH),Va=we.getParameter(we.UNPACK_IMAGE_HEIGHT),Rl=we.getParameter(we.UNPACK_SKIP_PIXELS),ra=we.getParameter(we.UNPACK_SKIP_ROWS),Zs=we.getParameter(we.UNPACK_SKIP_IMAGES);we.pixelStorei(we.UNPACK_ROW_LENGTH,me.width),we.pixelStorei(we.UNPACK_IMAGE_HEIGHT,me.height),we.pixelStorei(we.UNPACK_SKIP_PIXELS,en),we.pixelStorei(we.UNPACK_SKIP_ROWS,li),we.pixelStorei(we.UNPACK_SKIP_IMAGES,Hn);const Tr=ye.isDataArrayTexture||ye.isData3DTexture,ps=Ge.isDataArrayTexture||Ge.isData3DTexture;if(ye.isDepthTexture){const lr=Gt.get(ye),As=Gt.get(Ge),Uo=Gt.get(lr.__renderTarget),Bc=Gt.get(As.__renderTarget);Rt.bindFramebuffer(we.READ_FRAMEBUFFER,Uo.__webglFramebuffer),Rt.bindFramebuffer(we.DRAW_FRAMEBUFFER,Bc.__webglFramebuffer);for(let Sa=0;Sa<Ae;Sa++)Tr&&(we.framebufferTextureLayer(we.READ_FRAMEBUFFER,we.COLOR_ATTACHMENT0,Gt.get(ye).__webglTexture,Ye,Hn+Sa),we.framebufferTextureLayer(we.DRAW_FRAMEBUFFER,we.COLOR_ATTACHMENT0,Gt.get(Ge).__webglTexture,Xt,Zr+Sa)),we.blitFramebuffer(en,li,fn,zt,Zi,Ji,fn,zt,we.DEPTH_BUFFER_BIT,we.NEAREST);Rt.bindFramebuffer(we.READ_FRAMEBUFFER,null),Rt.bindFramebuffer(we.DRAW_FRAMEBUFFER,null)}else if(Ye!==0||ye.isRenderTargetTexture||Gt.has(ye)){const lr=Gt.get(ye),As=Gt.get(Ge);Rt.bindFramebuffer(we.READ_FRAMEBUFFER,vu),Rt.bindFramebuffer(we.DRAW_FRAMEBUFFER,Nc);for(let Uo=0;Uo<Ae;Uo++)Tr?we.framebufferTextureLayer(we.READ_FRAMEBUFFER,we.COLOR_ATTACHMENT0,lr.__webglTexture,Ye,Hn+Uo):we.framebufferTexture2D(we.READ_FRAMEBUFFER,we.COLOR_ATTACHMENT0,we.TEXTURE_2D,lr.__webglTexture,Ye),ps?we.framebufferTextureLayer(we.DRAW_FRAMEBUFFER,we.COLOR_ATTACHMENT0,As.__webglTexture,Xt,Zr+Uo):we.framebufferTexture2D(we.DRAW_FRAMEBUFFER,we.COLOR_ATTACHMENT0,we.TEXTURE_2D,As.__webglTexture,Xt),Ye!==0?we.blitFramebuffer(en,li,fn,zt,Zi,Ji,fn,zt,we.COLOR_BUFFER_BIT,we.NEAREST):ps?we.copyTexSubImage3D(Qs,Xt,Zi,Ji,Zr+Uo,en,li,fn,zt):we.copyTexSubImage2D(Qs,Xt,Zi,Ji,en,li,fn,zt);Rt.bindFramebuffer(we.READ_FRAMEBUFFER,null),Rt.bindFramebuffer(we.DRAW_FRAMEBUFFER,null)}else ps?ye.isDataTexture||ye.isData3DTexture?we.texSubImage3D(Qs,Xt,Zi,Ji,Zr,fn,zt,Ae,gi,Yn,me.data):Ge.isCompressedArrayTexture?we.compressedTexSubImage3D(Qs,Xt,Zi,Ji,Zr,fn,zt,Ae,gi,me.data):we.texSubImage3D(Qs,Xt,Zi,Ji,Zr,fn,zt,Ae,gi,Yn,me):ye.isDataTexture?we.texSubImage2D(we.TEXTURE_2D,Xt,Zi,Ji,fn,zt,gi,Yn,me.data):ye.isCompressedTexture?we.compressedTexSubImage2D(we.TEXTURE_2D,Xt,Zi,Ji,me.width,me.height,gi,me.data):we.texSubImage2D(we.TEXTURE_2D,Xt,Zi,Ji,fn,zt,gi,Yn,me);we.pixelStorei(we.UNPACK_ROW_LENGTH,er),we.pixelStorei(we.UNPACK_IMAGE_HEIGHT,Va),we.pixelStorei(we.UNPACK_SKIP_PIXELS,Rl),we.pixelStorei(we.UNPACK_SKIP_ROWS,ra),we.pixelStorei(we.UNPACK_SKIP_IMAGES,Zs),Xt===0&&Ge.generateMipmaps&&we.generateMipmap(Qs),Rt.unbindTexture()},this.copyTextureToTexture3D=function(ye,Ge,lt=null,Je=null,Ye=0){return ye.isTexture!==!0&&(Sp("WebGLRenderer: copyTextureToTexture3D function signature has changed."),lt=arguments[0]||null,Je=arguments[1]||null,ye=arguments[2],Ge=arguments[3],Ye=arguments[4]||0),Sp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ye,Ge,lt,Je,Ye)},this.initRenderTarget=function(ye){Gt.get(ye).__webglFramebuffer===void 0&&Se.setupRenderTarget(ye)},this.initTexture=function(ye){ye.isCubeTexture?Se.setTextureCube(ye,0):ye.isData3DTexture?Se.setTexture3D(ye,0):ye.isDataArrayTexture||ye.isCompressedArrayTexture?Se.setTexture2DArray(ye,0):Se.setTexture2D(ye,0),Rt.unbindTexture()},this.resetState=function(){F=0,k=0,q=null,Rt.reset(),dn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Oi._getDrawingBufferColorSpace(e),t.unpackColorSpace=Oi._getUnpackColorSpace()}}const j_e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:eP,AddEquation:Ku,AddOperation:G7,AdditiveAnimationBlendMode:j7,AdditiveBlending:xx,AgXToneMapping:q7,AlphaFormat:tP,AlwaysCompare:hP,AlwaysDepth:j2,AlwaysStencilFunc:OD,AmbientLight:_3,AnimationAction:qte,AnimationClip:Qy,AnimationLoader:pye,AnimationMixer:N9,AnimationObjectGroup:kye,AnimationUtils:uye,ArcCurve:Ete,ArrayCamera:D9,ArrowHelper:o1e,AttachedBindMode:bF,Audio:Hte,AudioAnalyser:Rye,AudioContext:R9,AudioListener:wye,AudioLoader:Sye,AxesHelper:a1e,BackSide:Bs,BasicDepthPacking:nte,BasicShadowMap:O7,BatchedMesh:Tte,Bone:hS,BooleanKeyframeTrack:cb,Box2:Kye,Box3:ma,Box3Helper:r1e,BoxGeometry:MA,BoxHelper:i1e,BufferAttribute:qi,BufferGeometry:qn,BufferGeometryLoader:Gte,ByteType:zy,Cache:Om,Camera:ib,CameraHelper:n1e,CanvasTexture:Bge,CapsuleGeometry:_P,CatmullRomCurve3:wte,CineonToneMapping:V7,CircleGeometry:nT,ClampToEdgeWrapping:Sl,Clock:S3,Color:Qt,ColorKeyframeTrack:_9,ColorManagement:Oi,CompressedArrayTexture:Pge,CompressedCubeTexture:Nge,CompressedTexture:xP,CompressedTextureLoader:Aye,ConeGeometry:SP,ConstantAlphaFactor:Wee,ConstantColorFactor:$ee,Controls:NP,CubeCamera:J7,CubeReflectionMapping:pu,CubeRefractionMapping:uf,CubeTexture:rb,CubeTextureLoader:mye,CubeUVReflectionMapping:eg,CubicBezierCurve:o9,CubicBezierCurve3:a9,CubicInterpolant:Ote,CullFaceBack:ND,CullFaceFront:I7,CullFaceFrontBack:hme,CullFaceNone:B7,Curve:ph,CurvePath:Cte,CustomBlending:H8,CustomToneMapping:Yee,CylinderGeometry:lb,Cylindrical:Wye,Data3DTexture:dP,DataArrayTexture:JS,DataTexture:Rp,DataTextureLoader:gye,DataUtils:age,DecrementStencilOp:ate,DecrementWrapStencilOp:cte,DefaultLoadingManager:f2,DepthFormat:pd,DepthStencilFormat:vd,DepthTexture:Ld,DetachedBindMode:Xee,DirectionalLight:aT,DirectionalLightHelper:t1e,DiscreteInterpolant:Fte,DodecahedronGeometry:TP,DoubleSide:Do,DstAlphaFactor:Y8,DstColorFactor:Q8,DynamicCopyUsage:Sme,DynamicDrawUsage:Hv,DynamicReadUsage:xme,EdgesGeometry:Rte,EllipseCurve:bP,EqualCompare:lP,EqualDepth:K2,EqualStencilFunc:dte,EquirectangularReflectionMapping:Lp,EquirectangularRefractionMapping:aA,Euler:Io,EventDispatcher:hh,ExtrudeGeometry:v3,FileLoader:hf,Float16BufferAttribute:Z7,Float32BufferAttribute:Cn,FloatType:Ns,Fog:mP,FogExp2:AP,FramebufferTexture:r9,FrontSide:sh,Frustum:ab,GLBufferAttribute:jye,GLSL1:Eme,GLSL3:_F,GreaterCompare:cP,GreaterDepth:X2,GreaterEqualCompare:fP,GreaterEqualDepth:Y2,GreaterEqualStencilFunc:gte,GreaterStencilFunc:Ate,GridHelper:Jye,Group:da,HalfFloatType:Fa,HemisphereLight:T9,HemisphereLightHelper:Zye,IcosahedronGeometry:wP,ImageBitmapLoader:zte,ImageLoader:pM,ImageUtils:yte,IncrementStencilOp:ote,IncrementWrapStencilOp:lte,InstancedBufferAttribute:bd,InstancedBufferGeometry:C9,InstancedInterleavedBuffer:AM,InstancedMesh:t9,Int16BufferAttribute:hge,Int32BufferAttribute:dge,Int8BufferAttribute:cge,IntType:Za,InterleavedBuffer:ob,InterleavedBufferAttribute:vc,Interpolant:sT,InterpolateDiscrete:oS,InterpolateLinear:aS,InterpolateSmooth:Y4,InvertStencilOp:ute,KeepStencilOp:Ty,KeyframeTrack:Op,LOD:Ste,LatheGeometry:y3,Layers:uS,LessCompare:p3,LessDepth:W2,LessEqualCompare:A3,LessEqualDepth:Jm,LessEqualStencilFunc:pte,LessStencilFunc:hte,Light:f1,LightProbe:M9,Line:oh,Line3:jte,LineBasicMaterial:xa,LineCurve:l9,LineCurve3:Mte,LineDashedMaterial:v9,LineLoop:n9,LineSegments:dh,LinearFilter:Ur,LinearInterpolant:b9,LinearMipMapLinearFilter:Qee,LinearMipMapNearestFilter:Ame,LinearMipmapLinearFilter:Ja,LinearMipmapNearestFilter:Um,LinearSRGBColorSpace:hu,LinearToneMapping:z7,LinearTransfer:lM,Loader:Wl,LoaderUtils:Vm,LoadingManager:S9,LoopOnce:Jee,LoopPingPong:tte,LoopRepeat:ete,LuminanceAlphaFormat:iP,LuminanceFormat:nP,MOUSE:Qa,Material:ga,MaterialLoader:PP,MathUtils:_l,Matrix2:T3,Matrix3:Si,Matrix4:rn,MaxEquation:U7,Mesh:zi,MeshBasicMaterial:Tl,MeshDepthMaterial:m9,MeshDistanceMaterial:g9,MeshLambertMaterial:Pd,MeshMatcapMaterial:y9,MeshNormalMaterial:A9,MeshPhongMaterial:ix,MeshPhysicalMaterial:mh,MeshStandardMaterial:rT,MeshToonMaterial:p9,MinEquation:F7,MirroredRepeatWrapping:lA,MixOperation:k7,MultiplyBlending:_x,MultiplyOperation:XS,NearestFilter:Ps,NearestMipMapLinearFilter:pme,NearestMipMapNearestFilter:dme,NearestMipmapLinearFilter:cd,NearestMipmapNearestFilter:QS,NeutralToneMapping:$7,NeverCompare:aP,NeverDepth:$2,NeverStencilFunc:fte,NoBlending:uu,NoColorSpace:Yu,NoToneMapping:Sc,NormalAnimationBlendMode:sP,NormalBlending:fu,NotEqualCompare:uP,NotEqualDepth:Q2,NotEqualStencilFunc:mte,NumberKeyframeTrack:Xy,Object3D:Vi,ObjectLoader:bye,ObjectSpaceNormalMap:K7,OctahedronGeometry:x3,OneFactor:j8,OneMinusConstantAlphaFactor:Kee,OneMinusConstantColorFactor:jee,OneMinusDstAlphaFactor:X8,OneMinusDstColorFactor:Z8,OneMinusSrcAlphaFactor:q2,OneMinusSrcColorFactor:K8,OrthographicCamera:du,PCFShadowMap:c3,PCFSoftShadowMap:Dw,PMREMGenerator:RF,Path:uM,PerspectiveCamera:ls,Plane:rd,PlaneGeometry:iT,PlaneHelper:s1e,PointLight:dS,PointLightHelper:Xye,Points:vP,PointsMaterial:tT,PolarGridHelper:e1e,PolyhedronGeometry:u1,PositionalAudio:Cye,PropertyBinding:hr,PropertyMixer:Vte,QuadraticBezierCurve:c9,QuadraticBezierCurve3:u9,Quaternion:Br,QuaternionKeyframeTrack:tg,QuaternionLinearInterpolant:Ute,RED_GREEN_RGTC2_Format:rS,RED_RGTC1_Format:rP,REVISION:a1,RGBADepthPacking:ite,RGBAFormat:ho,RGBAIntegerFormat:nb,RGBA_ASTC_10x10_Format:Ox,RGBA_ASTC_10x5_Format:Nx,RGBA_ASTC_10x6_Format:Bx,RGBA_ASTC_10x8_Format:Ix,RGBA_ASTC_12x10_Format:Fx,RGBA_ASTC_12x12_Format:Ux,RGBA_ASTC_4x4_Format:Ex,RGBA_ASTC_5x4_Format:wx,RGBA_ASTC_5x5_Format:Mx,RGBA_ASTC_6x5_Format:Cx,RGBA_ASTC_6x6_Format:Rx,RGBA_ASTC_8x5_Format:Dx,RGBA_ASTC_8x6_Format:Lx,RGBA_ASTC_8x8_Format:Px,RGBA_BPTC_Format:qy,RGBA_ETC2_EAC_Format:Tx,RGBA_PVRTC_2BPPV1_Format:tS,RGBA_PVRTC_4BPPV1_Format:eS,RGBA_S3TC_DXT1_Format:km,RGBA_S3TC_DXT3_Format:Gm,RGBA_S3TC_DXT5_Format:zm,RGBDepthPacking:mme,RGBFormat:ZS,RGBIntegerFormat:Zee,RGB_BPTC_SIGNED_Format:BD,RGB_BPTC_UNSIGNED_Format:ID,RGB_ETC1_Format:nS,RGB_ETC2_Format:Sx,RGB_PVRTC_2BPPV1_Format:J2,RGB_PVRTC_4BPPV1_Format:Z2,RGB_S3TC_DXT1_Format:Vy,RGDepthPacking:gme,RGFormat:Yy,RGIntegerFormat:tb,RawShaderMaterial:Nte,Ray:c1,Raycaster:B9,RectAreaLight:w9,RedFormat:eb,RedIntegerFormat:l1,ReinhardToneMapping:H7,RenderTarget:Dd,RenderTarget3D:zye,RenderTargetArray:Hye,RepeatWrapping:ff,ReplaceStencilOp:ste,ReverseSubtractEquation:q8,RingGeometry:MP,SIGNED_RED_GREEN_RGTC2_Format:sS,SIGNED_RED_RGTC1_Format:iS,SRGBColorSpace:kn,SRGBTransfer:$r,Scene:sb,ShaderChunk:Qi,ShaderLib:nu,ShaderMaterial:jl,ShadowMaterial:d9,Shape:nx,ShapeGeometry:CP,ShapePath:Yte,ShapeUtils:Y0,ShortType:Hy,Skeleton:eT,SkeletonHelper:Wte,SkinnedMesh:yP,Source:Vv,Sphere:Ua,SphereGeometry:Ah,Spherical:pS,SphericalHarmonics3:kte,SplineCurve:f9,SpotLight:oT,SpotLightHelper:Yye,Sprite:_te,SpriteMaterial:gP,SrcAlphaFactor:V2,SrcAlphaSaturateFactor:J8,SrcColorFactor:W8,StaticCopyUsage:_me,StaticDrawUsage:cS,StaticReadUsage:vme,StereoCamera:Tye,StreamCopyUsage:Tme,StreamDrawUsage:yme,StreamReadUsage:bme,StringKeyframeTrack:ub,SubtractEquation:V8,SubtractiveBlending:bx,TOUCH:Yf,TangentSpaceNormalMap:cA,TetrahedronGeometry:RP,Texture:cs,TextureLoader:mg,TextureUtils:h1e,TimestampQuery:wme,TorusGeometry:DP,TorusKnotGeometry:LP,Triangle:Xu,TriangleFanDrawMode:lS,TriangleStripDrawMode:oP,TrianglesDrawMode:W7,TubeGeometry:b3,UVMapping:u3,Uint16BufferAttribute:m3,Uint32BufferAttribute:pP,Uint8BufferAttribute:uge,Uint8ClampedBufferAttribute:fge,Uniform:Vye,UniformsGroup:$ye,UniformsLib:wn,UniformsUtils:g3,UnsignedByteType:Aa,UnsignedInt248Type:yd,UnsignedInt5999Type:d3,UnsignedIntType:Gs,UnsignedShort4444Type:f3,UnsignedShort5551Type:h3,UnsignedShortType:ud,VSMShadowMap:eu,Vector2:at,Vector3:he,Vector4:Ln,VectorKeyframeTrack:ng,VideoFrameTexture:Lge,VideoTexture:i9,WebGL3DRenderTarget:Qme,WebGLArrayRenderTarget:Xme,WebGLCoordinateSystem:yc,WebGLCubeRenderTarget:e9,WebGLRenderTarget:xd,WebGLRenderer:O9,WebGLUtils:tne,WebGPUCoordinateSystem:Pp,WebXRController:Pw,WireframeGeometry:h9,WrapAroundEnding:aM,ZeroCurvatureEnding:Gv,ZeroFactor:$8,ZeroSlopeEnding:zv,ZeroStencilOp:rte,createCanvasElement:Q7},Symbol.toStringTag,{value:"Module"}));var T6={exports:{}},mm={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J$;function W_e(){return J$||(J$=1,mm.ConcurrentRoot=1,mm.ContinuousEventPriority=8,mm.DefaultEventPriority=32,mm.DiscreteEventPriority=2,mm.IdleEventPriority=268435456,mm.LegacyRoot=0,mm.NoEventPriority=0),mm}var ej;function K_e(){return ej||(ej=1,T6.exports=W_e()),T6.exports}var Q4=K_e(),E6={exports:{}},w6={},M6={exports:{}},C6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tj;function Y_e(){if(tj)return C6;tj=1;var i=YS();function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,r=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function a(f,h){var p=h(),m=n({inst:{value:p,getSnapshot:h}}),g=m[0].inst,b=m[1];return s(function(){g.value=p,g.getSnapshot=h,l(g)&&b({inst:g})},[f,p,h]),r(function(){return l(g)&&b({inst:g}),f(function(){l(g)&&b({inst:g})})},[f]),o(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!t(f,p)}catch{return!0}}function c(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return C6.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:u,C6}var nj;function X_e(){return nj||(nj=1,M6.exports=Y_e()),M6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ij;function Q_e(){if(ij)return w6;ij=1;var i=YS(),e=X_e();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=i.useRef,o=i.useEffect,a=i.useMemo,l=i.useDebugValue;return w6.useSyncExternalStoreWithSelector=function(c,u,f,h,p){var m=s(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function T(F){if(!C){if(C=!0,R=F,F=h(F),p!==void 0&&g.hasValue){var k=g.value;if(p(k,F))return P=k}return P=F}if(k=P,n(R,F))return k;var q=h(F);return p!==void 0&&p(k,q)?(R=F,k):(R=F,P=q)}var C=!1,R,P,I=f===void 0?null:f;return[function(){return T(u())},I===null?void 0:function(){return T(I())}]},[u,f,h,p]);var b=r(c,m[0],m[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),l(b),b},w6}var rj;function Z_e(){return rj||(rj=1,E6.exports=Q_e()),E6.exports}var J_e=Z_e();const e2e=Ag(J_e),sj=i=>{let e;const t=new Set,n=(c,u)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const h=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},r=()=>e,a={setState:n,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=i(n,r,a);return a},nne=i=>i?sj(i):sj,{useSyncExternalStoreWithSelector:t2e}=e2e,n2e=i=>i;function i2e(i,e=n2e,t){const n=t2e(i.subscribe,i.getState,i.getInitialState,e,t);return Ne.useDebugValue(n),n}const oj=(i,e)=>{const t=nne(i),n=(r,s=e)=>i2e(t,r,s);return Object.assign(n,t),n},r2e=(i,e)=>i?oj(i,e):oj;var R6={exports:{}},D6={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aj;function s2e(){return aj||(aj=1,function(i){i.exports=function(e){function t(y,_,N,z){return new Xd(y,_,N,z)}function n(){}function r(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)_+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(y){return y===null||typeof y!="object"?null:(y=Un&&y[Un]||y["@@iterator"],typeof y=="function"?y:null)}function o(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===Xn?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case Le:return"Fragment";case _e:return"Portal";case Re:return"Profiler";case ke:return"StrictMode";case rt:return"Suspense";case je:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case gt:return(y.displayName||"Context")+".Provider";case Et:return(y._context.displayName||"Context")+".Consumer";case ot:var _=y.render;return y=y.displayName,y||(y=_.displayName||_.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case gn:return _=y.displayName||null,_!==null?_:o(y.type)||"Memo";case Tn:_=y._payload,y=y._init;try{return o(y(_))}catch{}}return null}function a(y){if(oi===void 0)try{throw Error()}catch(N){var _=N.stack.trim().match(/\n( *(at )?)/);oi=_&&_[1]||"",Zn=-1<N.stack.indexOf(`
    at`)?" (<anonymous>)":-1<N.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oi+y+Zn}function l(y,_){if(!y||fi)return"";fi=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(_){var Rn=function(){throw Error()};if(Object.defineProperty(Rn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rn,[])}catch(Di){var ln=Di}Reflect.construct(y,[],Rn)}else{try{Rn.call()}catch(Di){ln=Di}y.call(Rn.prototype)}}else{try{throw Error()}catch(Di){ln=Di}(Rn=y())&&typeof Rn.catch=="function"&&Rn.catch(function(){})}}catch(Di){if(Di&&ln&&typeof Di.stack=="string")return[Di.stack,ln.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=z.DetermineComponentFrameRoot(),be=J[0],Ue=J[1];if(be&&Ue){var nt=be.split(`
`),Ot=Ue.split(`
`);for(W=z=0;z<nt.length&&!nt[z].includes("DetermineComponentFrameRoot");)z++;for(;W<Ot.length&&!Ot[W].includes("DetermineComponentFrameRoot");)W++;if(z===nt.length||W===Ot.length)for(z=nt.length-1,W=Ot.length-1;1<=z&&0<=W&&nt[z]!==Ot[W];)W--;for(;1<=z&&0<=W;z--,W--)if(nt[z]!==Ot[W]){if(z!==1||W!==1)do if(z--,W--,0>W||nt[z]!==Ot[W]){var cn=`
`+nt[z].replace(" at new "," at ");return y.displayName&&cn.includes("<anonymous>")&&(cn=cn.replace("<anonymous>",y.displayName)),cn}while(1<=z&&0<=W);break}}}finally{fi=!1,Error.prepareStackTrace=N}return(N=y?y.displayName||y.name:"")?a(N):""}function c(y){switch(y.tag){case 26:case 27:case 5:return a(y.type);case 16:return a("Lazy");case 13:return a("Suspense");case 19:return a("SuspenseList");case 0:case 15:return y=l(y.type,!1),y;case 11:return y=l(y.type.render,!1),y;case 1:return y=l(y.type,!0),y;default:return""}}function u(y){try{var _="";do _+=c(y),y=y.return;while(y);return _}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}function f(y){var _=y,N=y;if(y.alternate)for(;_.return;)_=_.return;else{y=_;do _=y,_.flags&4098&&(N=_.return),y=_.return;while(y)}return _.tag===3?N:null}function h(y){if(f(y)!==y)throw Error(r(188))}function p(y){var _=y.alternate;if(!_){if(_=f(y),_===null)throw Error(r(188));return _!==y?null:y}for(var N=y,z=_;;){var W=N.return;if(W===null)break;var J=W.alternate;if(J===null){if(z=W.return,z!==null){N=z;continue}break}if(W.child===J.child){for(J=W.child;J;){if(J===N)return h(W),y;if(J===z)return h(W),_;J=J.sibling}throw Error(r(188))}if(N.return!==z.return)N=W,z=J;else{for(var be=!1,Ue=W.child;Ue;){if(Ue===N){be=!0,N=W,z=J;break}if(Ue===z){be=!0,z=W,N=J;break}Ue=Ue.sibling}if(!be){for(Ue=J.child;Ue;){if(Ue===N){be=!0,N=J,z=W;break}if(Ue===z){be=!0,z=J,N=W;break}Ue=Ue.sibling}if(!be)throw Error(r(189))}}if(N.alternate!==z)throw Error(r(190))}if(N.tag!==3)throw Error(r(188));return N.stateNode.current===N?y:_}function m(y){var _=y.tag;if(_===5||_===26||_===27||_===6)return y;for(y=y.child;y!==null;){if(_=m(y),_!==null)return _;y=y.sibling}return null}function g(y){var _=y.tag;if(_===5||_===26||_===27||_===6)return y;for(y=y.child;y!==null;){if(y.tag!==4&&(_=g(y),_!==null))return _;y=y.sibling}return null}function b(y){return{current:y}}function T(y){0>c0||(y.current=Vb[c0],Vb[c0]=null,c0--)}function C(y,_){c0++,Vb[c0]=y.current,y.current=_}function R(y){return y>>>=0,y===0?32:31-(KT(y)/aB|0)|0}function P(y){var _=y&42;if(_!==0)return _;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function I(y,_){var N=y.pendingLanes;if(N===0)return 0;var z=0,W=y.suspendedLanes,J=y.pingedLanes,be=y.warmLanes;y=y.finishedLanes!==0;var Ue=N&134217727;return Ue!==0?(N=Ue&~W,N!==0?z=P(N):(J&=Ue,J!==0?z=P(J):y||(be=Ue&~be,be!==0&&(z=P(be))))):(Ue=N&~W,Ue!==0?z=P(Ue):J!==0?z=P(J):y||(be=N&~be,be!==0&&(z=P(be)))),z===0?0:_!==0&&_!==z&&!(_&W)&&(W=z&-z,be=_&-_,W>=be||W===32&&(be&4194176)!==0)?_:z}function F(y,_){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&_)===0}function k(y,_){switch(y){case 1:case 2:case 4:case 8:return _+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q(){var y=G1;return G1<<=1,!(G1&4194176)&&(G1=128),y}function H(){var y=Vg;return Vg<<=1,!(Vg&62914560)&&(Vg=4194304),y}function O(y){for(var _=[],N=0;31>N;N++)_.push(y);return _}function $(y,_){y.pendingLanes|=_,_!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function ee(y,_,N,z,W,J){var be=y.pendingLanes;y.pendingLanes=N,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=N,y.entangledLanes&=N,y.errorRecoveryDisabledLanes&=N,y.shellSuspendCounter=0;var Ue=y.entanglements,nt=y.expirationTimes,Ot=y.hiddenUpdates;for(N=be&~N;0<N;){var cn=31-vo(N),Rn=1<<cn;Ue[cn]=0,nt[cn]=-1;var ln=Ot[cn];if(ln!==null)for(Ot[cn]=null,cn=0;cn<ln.length;cn++){var Di=ln[cn];Di!==null&&(Di.lane&=-536870913)}N&=~Rn}z!==0&&Y(y,z,0),J!==0&&W===0&&y.tag!==0&&(y.suspendedLanes|=J&~(be&~_))}function Y(y,_,N){y.pendingLanes|=_,y.suspendedLanes&=~_;var z=31-vo(_);y.entangledLanes|=_,y.entanglements[z]=y.entanglements[z]|1073741824|N&4194218}function oe(y,_){var N=y.entangledLanes|=_;for(y=y.entanglements;N;){var z=31-vo(N),W=1<<z;W&_|y[z]&_&&(y[z]|=_),N&=~W}}function re(y){return y&=-y,2<y?8<y?y&134217727?32:268435456:8:2}function Q(y){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot($g,y,void 0,(y.current.flags&128)===128)}catch{}}function se(y){if(typeof ul=="function"&&$b(y),zo&&typeof zo.setStrictMode=="function")try{zo.setStrictMode($g,y)}catch{}}function le(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}function de(y,_){if(typeof y=="object"&&y!==null){var N=jb.get(y);return N!==void 0?N:(_={value:y,source:_,stack:u(_)},jb.set(y,_),_)}return{value:y,source:_,stack:u(_)}}function ie(y,_){qc[$c++]=jg,qc[$c++]=f0,f0=y,jg=_}function ge(y,_,N){nc[fl++]=kh,nc[fl++]=Gh,nc[fl++]=Bf,Bf=y;var z=kh;y=Gh;var W=32-vo(z)-1;z&=~(1<<W),N+=1;var J=32-vo(_)+W;if(30<J){var be=W-W%5;J=(z&(1<<be)-1).toString(32),z>>=be,W-=be,kh=1<<32-vo(_)+W|N<<W|z,Gh=J+y}else kh=1<<J|N<<W|z,Gh=y}function Ce(y){y.return!==null&&(ie(y,1),ge(y,1,0))}function Ie(y){for(;y===f0;)f0=qc[--$c],qc[$c]=null,jg=qc[--$c],qc[$c]=null;for(;y===Bf;)Bf=nc[--fl],nc[fl]=null,Gh=nc[--fl],nc[fl]=null,kh=nc[--fl],nc[fl]=null}function Ee(y,_){C(tp,_),C(Ru,y),C(xo,null),y=ET(_),T(xo),C(xo,y)}function Be(){T(xo),T(Ru),T(tp)}function qe(y){y.memoizedState!==null&&C(H1,y);var _=xo.current,N=xC(_,y.type);_!==N&&(C(Ru,y),C(xo,N))}function it(y){Ru.current===y&&(T(xo),T(Ru)),H1.current===y&&(T(H1),Lf?Zd._currentValue=XA:Zd._currentValue2=XA)}function et(y){var _=Error(r(418,""));throw ut(de(_,y)),V1}function Ht(y,_){if(!tc)throw Error(r(175));JA(y.stateNode,y.type,y.memoizedProps,_,y)||et(y)}function _t(y){for(bo=y.return;bo;)switch(bo.tag){case 3:case 27:If=!0;return;case 5:case 13:If=!1;return;default:bo=bo.return}}function $t(y){if(!tc||y!==bo)return!1;if(!br)return _t(y),br=!0,!1;var _=!1;if(Ra?y.tag!==3&&y.tag!==27&&(y.tag!==5||UT(y.type)&&!ja(y.type,y.memoizedProps))&&(_=!0):y.tag!==3&&(y.tag!==5||UT(y.type)&&!ja(y.type,y.memoizedProps))&&(_=!0),_&&es&&et(y),_t(y),y.tag===13){if(!tc)throw Error(r(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));es=ZC(y)}else es=bo?l0(y.stateNode):null;return!0}function mt(){tc&&(es=bo=null,br=!1)}function ut(y){Du===null?Du=[y]:Du.push(y)}function we(){for(var y=np,_=Of=np=0;_<y;){var N=ic[_];ic[_++]=null;var z=ic[_];ic[_++]=null;var W=ic[_];ic[_++]=null;var J=ic[_];if(ic[_++]=null,z!==null&&W!==null){var be=z.pending;be===null?W.next=W:(W.next=be.next,be.next=W),z.pending=W}J!==0&&Rt(N,W,J)}}function Jt(y,_,N,z){ic[np++]=y,ic[np++]=_,ic[np++]=N,ic[np++]=z,Of|=z,y.lanes|=z,y=y.alternate,y!==null&&(y.lanes|=z)}function ft(y,_,N,z){return Jt(y,_,N,z),yn(y)}function Dt(y,_){return Jt(y,null,null,_),yn(y)}function Rt(y,_,N){y.lanes|=N;var z=y.alternate;z!==null&&(z.lanes|=N);for(var W=!1,J=y.return;J!==null;)J.childLanes|=N,z=J.alternate,z!==null&&(z.childLanes|=N),J.tag===22&&(y=J.stateNode,y===null||y._visibility&1||(W=!0)),y=J,J=J.return;W&&_!==null&&y.tag===3&&(J=y.stateNode,W=31-vo(N),J=J.hiddenUpdates,y=J[W],y===null?J[W]=[_]:y.push(_),_.lane=N|536870912)}function yn(y){if(50<am)throw am=0,JT=null,Error(r(185));for(var _=y.return;_!==null;)y=_,_=y.return;return y.tag===3?y.stateNode:null}function Gt(y){y!==h0&&y.next===null&&(h0===null?Ts=h0=y:h0=h0.next=y),_o=!0,Wb||(Wb=!0,bt(fe))}function Se(y,_){if(!Kb&&_o){Kb=!0;do for(var N=!1,z=Ts;z!==null;){if(y!==0){var W=z.pendingLanes;if(W===0)var J=0;else{var be=z.suspendedLanes,Ue=z.pingedLanes;J=(1<<31-vo(42|y)+1)-1,J&=W&~(be&~Ue),J=J&201326677?J&201326677|1:J?J|2:0}J!==0&&(N=!0,Tt(z,J))}else J=or,J=I(z,z===ns?J:0),!(J&3)||F(z,J)||(N=!0,Tt(z,J));z=z.next}while(N);Kb=!1}}function fe(){_o=Wb=!1;var y=0;Wg!==0&&(TC()&&(y=Wg),Wg=0);for(var _=Vc(),N=null,z=Ts;z!==null;){var W=z.next,J=Pe(z,_);J===0?(z.next=null,N===null?Ts=W:N.next=W,W===null&&(h0=N)):(N=z,(y!==0||J&3)&&(_o=!0)),z=W}Se(y)}function Pe(y,_){for(var N=y.suspendedLanes,z=y.pingedLanes,W=y.expirationTimes,J=y.pendingLanes&-62914561;0<J;){var be=31-vo(J),Ue=1<<be,nt=W[be];nt===-1?(!(Ue&N)||Ue&z)&&(W[be]=k(Ue,_)):nt<=_&&(y.expiredLanes|=Ue),J&=~Ue}if(_=ns,N=or,N=I(y,y===_?N:0),z=y.callbackNode,N===0||y===_&&Hr===2||y.cancelPendingCommit!==null)return z!==null&&z!==null&&Nf(z),y.callbackNode=null,y.callbackPriority=0;if(!(N&3)||F(y,N)){if(_=N&-N,_===y.callbackPriority)return _;switch(z!==null&&Nf(z),re(N)){case 2:case 8:N=z1;break;case 32:N=qg;break;case 268435456:N=tm;break;default:N=qg}return z=Ve.bind(null,y),N=Uh(N,z),y.callbackPriority=_,y.callbackNode=N,_}return z!==null&&z!==null&&Nf(z),y.callbackPriority=2,y.callbackNode=null,2}function Ve(y,_){var N=y.callbackNode;if(sa()&&y.callbackNode!==N)return null;var z=or;return z=I(y,y===ns?z:0),z===0?null:(Dl(y,z,_),Pe(y,Vc()),y.callbackNode!=null&&y.callbackNode===N?Ve.bind(null,y):null)}function Tt(y,_){if(sa())return null;Dl(y,_,!0)}function bt(y){CC?RC(function(){sr&6?Uh(qb,y):y()}):Uh(qb,y)}function sn(){return Wg===0&&(Wg=q()),Wg}function on(y,_){if(Kg===null){var N=Kg=[];Yb=0,Es=sn(),Da={status:"pending",value:void 0,then:function(z){N.push(z)}}}return Yb++,_.then(mn,mn),_}function mn(){if(--Yb===0&&Kg!==null){Da!==null&&(Da.status="fulfilled");var y=Kg;Kg=null,Es=0,Da=null;for(var _=0;_<y.length;_++)(0,y[_])()}}function ai(y,_){var N=[],z={status:"pending",value:null,reason:null,then:function(W){N.push(W)}};return y.then(function(){z.status="fulfilled",z.value=_;for(var W=0;W<N.length;W++)(0,N[W])(_)},function(W){for(z.status="rejected",z.reason=W,W=0;W<N.length;W++)(0,N[W])(void 0)}),z}function Vt(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _n(y,_){y=y.updateQueue,_.updateQueue===y&&(_.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function En(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function pn(y,_,N){var z=y.updateQueue;if(z===null)return null;if(z=z.shared,sr&2){var W=z.pending;return W===null?_.next=_:(_.next=W.next,W.next=_),z.pending=_,_=yn(y),Rt(y,null,N),_}return Jt(y,z,_,N),yn(y)}function Sn(y,_,N){if(_=_.updateQueue,_!==null&&(_=_.shared,(N&4194176)!==0)){var z=_.lanes;z&=y.pendingLanes,N|=z,_.lanes=N,oe(y,N)}}function Fe(y,_){var N=y.updateQueue,z=y.alternate;if(z!==null&&(z=z.updateQueue,N===z)){var W=null,J=null;if(N=N.firstBaseUpdate,N!==null){do{var be={lane:N.lane,tag:N.tag,payload:N.payload,callback:null,next:null};J===null?W=J=be:J=J.next=be,N=N.next}while(N!==null);J===null?W=J=_:J=J.next=_}else W=J=_;N={baseState:z.baseState,firstBaseUpdate:W,lastBaseUpdate:J,shared:z.shared,callbacks:z.callbacks},y.updateQueue=N;return}y=N.lastBaseUpdate,y===null?N.firstBaseUpdate=_:y.next=_,N.lastBaseUpdate=_}function xt(){if(Xb){var y=Da;if(y!==null)throw y}}function dn(y,_,N,z){Xb=!1;var W=y.updateQueue;hl=!1;var J=W.firstBaseUpdate,be=W.lastBaseUpdate,Ue=W.shared.pending;if(Ue!==null){W.shared.pending=null;var nt=Ue,Ot=nt.next;nt.next=null,be===null?J=Ot:be.next=Ot,be=nt;var cn=y.alternate;cn!==null&&(cn=cn.updateQueue,Ue=cn.lastBaseUpdate,Ue!==be&&(Ue===null?cn.firstBaseUpdate=Ot:Ue.next=Ot,cn.lastBaseUpdate=nt))}if(J!==null){var Rn=W.baseState;be=0,cn=Ot=nt=null,Ue=J;do{var ln=Ue.lane&-536870913,Di=ln!==Ue.lane;if(Di?(or&ln)===ln:(z&ln)===ln){ln!==0&&ln===Es&&(Xb=!0),cn!==null&&(cn=cn.next={lane:0,tag:Ue.tag,payload:Ue.payload,callback:null,next:null});e:{var Uu=y,ey=Ue;ln=_;var lm=N;switch(ey.tag){case 1:if(Uu=ey.payload,typeof Uu=="function"){Rn=Uu.call(lm,Rn,ln);break e}Rn=Uu;break e;case 3:Uu.flags=Uu.flags&-65537|128;case 0:if(Uu=ey.payload,ln=typeof Uu=="function"?Uu.call(lm,Rn,ln):Uu,ln==null)break e;Rn=K({},Rn,ln);break e;case 2:hl=!0}}ln=Ue.callback,ln!==null&&(y.flags|=64,Di&&(y.flags|=8192),Di=W.callbacks,Di===null?W.callbacks=[ln]:Di.push(ln))}else Di={lane:ln,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},cn===null?(Ot=cn=Di,nt=Rn):cn=cn.next=Di,be|=ln;if(Ue=Ue.next,Ue===null){if(Ue=W.shared.pending,Ue===null)break;Di=Ue,Ue=Di.next,Di.next=null,W.lastBaseUpdate=Di,W.shared.pending=null}}while(!0);cn===null&&(nt=Rn),W.baseState=nt,W.firstBaseUpdate=Ot,W.lastBaseUpdate=cn,J===null&&(W.shared.lanes=0),Ou|=be,y.lanes=be,y.memoizedState=Rn}}function Te(y,_){if(typeof y!="function")throw Error(r(191,y));y.call(_)}function tn(y,_){var N=y.callbacks;if(N!==null)for(y.callbacks=null,y=0;y<N.length;y++)Te(N[y],_)}function At(y,_){if(Pl(y,_))return!0;if(typeof y!="object"||y===null||typeof _!="object"||_===null)return!1;var N=Object.keys(y),z=Object.keys(_);if(N.length!==z.length)return!1;for(z=0;z<N.length;z++){var W=N[z];if(!oR.call(_,W)||!Pl(y[W],_[W]))return!1}return!0}function Lt(y){return y=y.status,y==="fulfilled"||y==="rejected"}function vn(){}function xn(y,_,N){switch(N=y[N],N===void 0?y.push(_):N!==_&&(_.then(vn,vn),_=N),_.status){case"fulfilled":return _.value;case"rejected":throw y=_.reason,y===q1?Error(r(483)):y;default:if(typeof _.status=="string")_.then(vn,vn);else{if(y=ns,y!==null&&100<y.shellSuspendCounter)throw Error(r(482));y=_,y.status="pending",y.then(function(z){if(_.status==="pending"){var W=_;W.status="fulfilled",W.value=z}},function(z){if(_.status==="pending"){var W=_;W.status="rejected",W.reason=z}})}switch(_.status){case"fulfilled":return _.value;case"rejected":throw y=_.reason,y===q1?Error(r(483)):y}throw dl=_,q1}}function Nn(){if(dl===null)throw Error(r(459));var y=dl;return dl=null,y}function Fi(y){var _=pl;return pl+=1,nm===null&&(nm=[]),xn(nm,y,_)}function Dn(y,_){_=_.props.ref,y.ref=_!==void 0?_:null}function Gn(y,_){throw _.$$typeof===te?Error(r(525)):(y=Object.prototype.toString.call(_),Error(r(31,y==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":y)))}function Gr(y){var _=y._init;return _(y._payload)}function Qr(y){function _(pt,Ze){if(y){var vt=pt.deletions;vt===null?(pt.deletions=[Ze],pt.flags|=16):vt.push(Ze)}}function N(pt,Ze){if(!y)return null;for(;Ze!==null;)_(pt,Ze),Ze=Ze.sibling;return null}function z(pt){for(var Ze=new Map;pt!==null;)pt.key!==null?Ze.set(pt.key,pt):Ze.set(pt.index,pt),pt=pt.sibling;return Ze}function W(pt,Ze){return pt=jt(pt,Ze),pt.index=0,pt.sibling=null,pt}function J(pt,Ze,vt){return pt.index=vt,y?(vt=pt.alternate,vt!==null?(vt=vt.index,vt<Ze?(pt.flags|=33554434,Ze):vt):(pt.flags|=33554434,Ze)):(pt.flags|=1048576,Ze)}function be(pt){return y&&pt.alternate===null&&(pt.flags|=33554434),pt}function Ue(pt,Ze,vt,nn){return Ze===null||Ze.tag!==6?(Ze=Bh(vt,pt.mode,nn),Ze.return=pt,Ze):(Ze=W(Ze,vt),Ze.return=pt,Ze)}function nt(pt,Ze,vt,nn){var $n=vt.type;return $n===Le?cn(pt,Ze,vt.props.children,nn,vt.key):Ze!==null&&(Ze.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Tn&&Gr($n)===Ze.type)?(Ze=W(Ze,vt.props),Dn(Ze,vt),Ze.return=pt,Ze):(Ze=Nh(vt.type,vt.key,vt.props,null,pt.mode,nn),Dn(Ze,vt),Ze.return=pt,Ze)}function Ot(pt,Ze,vt,nn){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==vt.containerInfo||Ze.stateNode.implementation!==vt.implementation?(Ze=ro(vt,pt.mode,nn),Ze.return=pt,Ze):(Ze=W(Ze,vt.children||[]),Ze.return=pt,Ze)}function cn(pt,Ze,vt,nn,$n){return Ze===null||Ze.tag!==7?(Ze=Cu(vt,pt.mode,nn,$n),Ze.return=pt,Ze):(Ze=W(Ze,vt),Ze.return=pt,Ze)}function Rn(pt,Ze,vt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=Bh(""+Ze,pt.mode,vt),Ze.return=pt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case ue:return vt=Nh(Ze.type,Ze.key,Ze.props,null,pt.mode,vt),Dn(vt,Ze),vt.return=pt,vt;case _e:return Ze=ro(Ze,pt.mode,vt),Ze.return=pt,Ze;case Tn:var nn=Ze._init;return Ze=nn(Ze._payload),Rn(pt,Ze,vt)}if(tr(Ze)||s(Ze))return Ze=Cu(Ze,pt.mode,vt,null),Ze.return=pt,Ze;if(typeof Ze.then=="function")return Rn(pt,Fi(Ze),vt);if(Ze.$$typeof===gt)return Rn(pt,wr(pt,Ze),vt);Gn(pt,Ze)}return null}function ln(pt,Ze,vt,nn){var $n=Ze!==null?Ze.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return $n!==null?null:Ue(pt,Ze,""+vt,nn);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case ue:return vt.key===$n?nt(pt,Ze,vt,nn):null;case _e:return vt.key===$n?Ot(pt,Ze,vt,nn):null;case Tn:return $n=vt._init,vt=$n(vt._payload),ln(pt,Ze,vt,nn)}if(tr(vt)||s(vt))return $n!==null?null:cn(pt,Ze,vt,nn,null);if(typeof vt.then=="function")return ln(pt,Ze,Fi(vt),nn);if(vt.$$typeof===gt)return ln(pt,Ze,wr(pt,vt),nn);Gn(pt,vt)}return null}function Di(pt,Ze,vt,nn,$n){if(typeof nn=="string"&&nn!==""||typeof nn=="number"||typeof nn=="bigint")return pt=pt.get(vt)||null,Ue(Ze,pt,""+nn,$n);if(typeof nn=="object"&&nn!==null){switch(nn.$$typeof){case ue:return pt=pt.get(nn.key===null?vt:nn.key)||null,nt(Ze,pt,nn,$n);case _e:return pt=pt.get(nn.key===null?vt:nn.key)||null,Ot(Ze,pt,nn,$n);case Tn:var is=nn._init;return nn=is(nn._payload),Di(pt,Ze,vt,nn,$n)}if(tr(nn)||s(nn))return pt=pt.get(vt)||null,cn(Ze,pt,nn,$n,null);if(typeof nn.then=="function")return Di(pt,Ze,vt,Fi(nn),$n);if(nn.$$typeof===gt)return Di(pt,Ze,vt,wr(Ze,nn),$n);Gn(Ze,nn)}return null}function Uu(pt,Ze,vt,nn){for(var $n=null,is=null,mi=Ze,rr=Ze=0,fs=null;mi!==null&&rr<vt.length;rr++){mi.index>rr?(fs=mi,mi=null):fs=mi.sibling;var cr=ln(pt,mi,vt[rr],nn);if(cr===null){mi===null&&(mi=fs);break}y&&mi&&cr.alternate===null&&_(pt,mi),Ze=J(cr,Ze,rr),is===null?$n=cr:is.sibling=cr,is=cr,mi=fs}if(rr===vt.length)return N(pt,mi),br&&ie(pt,rr),$n;if(mi===null){for(;rr<vt.length;rr++)mi=Rn(pt,vt[rr],nn),mi!==null&&(Ze=J(mi,Ze,rr),is===null?$n=mi:is.sibling=mi,is=mi);return br&&ie(pt,rr),$n}for(mi=z(mi);rr<vt.length;rr++)fs=Di(mi,pt,rr,vt[rr],nn),fs!==null&&(y&&fs.alternate!==null&&mi.delete(fs.key===null?rr:fs.key),Ze=J(fs,Ze,rr),is===null?$n=fs:is.sibling=fs,is=fs);return y&&mi.forEach(function(b0){return _(pt,b0)}),br&&ie(pt,rr),$n}function ey(pt,Ze,vt,nn){if(vt==null)throw Error(r(151));for(var $n=null,is=null,mi=Ze,rr=Ze=0,fs=null,cr=vt.next();mi!==null&&!cr.done;rr++,cr=vt.next()){mi.index>rr?(fs=mi,mi=null):fs=mi.sibling;var b0=ln(pt,mi,cr.value,nn);if(b0===null){mi===null&&(mi=fs);break}y&&mi&&b0.alternate===null&&_(pt,mi),Ze=J(b0,Ze,rr),is===null?$n=b0:is.sibling=b0,is=b0,mi=fs}if(cr.done)return N(pt,mi),br&&ie(pt,rr),$n;if(mi===null){for(;!cr.done;rr++,cr=vt.next())cr=Rn(pt,cr.value,nn),cr!==null&&(Ze=J(cr,Ze,rr),is===null?$n=cr:is.sibling=cr,is=cr);return br&&ie(pt,rr),$n}for(mi=z(mi);!cr.done;rr++,cr=vt.next())cr=Di(mi,pt,rr,cr.value,nn),cr!==null&&(y&&cr.alternate!==null&&mi.delete(cr.key===null?rr:cr.key),Ze=J(cr,Ze,rr),is===null?$n=cr:is.sibling=cr,is=cr);return y&&mi.forEach(function(lR){return _(pt,lR)}),br&&ie(pt,rr),$n}function lm(pt,Ze,vt,nn){if(typeof vt=="object"&&vt!==null&&vt.type===Le&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case ue:e:{for(var $n=vt.key;Ze!==null;){if(Ze.key===$n){if($n=vt.type,$n===Le){if(Ze.tag===7){N(pt,Ze.sibling),nn=W(Ze,vt.props.children),nn.return=pt,pt=nn;break e}}else if(Ze.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Tn&&Gr($n)===Ze.type){N(pt,Ze.sibling),nn=W(Ze,vt.props),Dn(nn,vt),nn.return=pt,pt=nn;break e}N(pt,Ze);break}else _(pt,Ze);Ze=Ze.sibling}vt.type===Le?(nn=Cu(vt.props.children,pt.mode,nn,vt.key),nn.return=pt,pt=nn):(nn=Nh(vt.type,vt.key,vt.props,null,pt.mode,nn),Dn(nn,vt),nn.return=pt,pt=nn)}return be(pt);case _e:e:{for($n=vt.key;Ze!==null;){if(Ze.key===$n)if(Ze.tag===4&&Ze.stateNode.containerInfo===vt.containerInfo&&Ze.stateNode.implementation===vt.implementation){N(pt,Ze.sibling),nn=W(Ze,vt.children||[]),nn.return=pt,pt=nn;break e}else{N(pt,Ze);break}else _(pt,Ze);Ze=Ze.sibling}nn=ro(vt,pt.mode,nn),nn.return=pt,pt=nn}return be(pt);case Tn:return $n=vt._init,vt=$n(vt._payload),lm(pt,Ze,vt,nn)}if(tr(vt))return Uu(pt,Ze,vt,nn);if(s(vt)){if($n=s(vt),typeof $n!="function")throw Error(r(150));return vt=$n.call(vt),ey(pt,Ze,vt,nn)}if(typeof vt.then=="function")return lm(pt,Ze,Fi(vt),nn);if(vt.$$typeof===gt)return lm(pt,Ze,wr(pt,vt),nn);Gn(pt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,Ze!==null&&Ze.tag===6?(N(pt,Ze.sibling),nn=W(Ze,vt),nn.return=pt,pt=nn):(N(pt,Ze),nn=Bh(vt,pt.mode,nn),nn.return=pt,pt=nn),be(pt)):N(pt,Ze)}return function(pt,Ze,vt,nn){try{pl=0;var $n=lm(pt,Ze,vt,nn);return nm=null,$n}catch(mi){if(mi===q1)throw mi;var is=t(29,mi,null,pt.mode);return is.lanes=nn,is.return=pt,is}finally{}}}function dt(y,_){y=Gf,C(Uf,y),C(Ff,_),Gf=y|_.baseLanes}function Ut(){C(Uf,Gf),C(Ff,Ff.current)}function hn(){Gf=Uf.current,T(Ff),T(Uf)}function In(y){var _=y.alternate;C(gs,gs.current&1),C(rc,y),Lu===null&&(_===null||Ff.current!==null||_.memoizedState!==null)&&(Lu=y)}function S(y){if(y.tag===22){if(C(gs,gs.current),C(rc,y),Lu===null){var _=y.alternate;_!==null&&_.memoizedState!==null&&(Lu=y)}}else ve()}function ve(){C(gs,gs.current),C(rc,rc.current)}function Kn(y){T(rc),Lu===y&&(Lu=null),T(gs)}function ni(y){for(var _=y;_!==null;){if(_.tag===13){var N=_.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||QA(N)||k1(N)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}function zn(){throw Error(r(321))}function si(y,_){if(_===null)return!1;for(var N=0;N<_.length&&N<y.length;N++)if(!Pl(y[N],_[N]))return!1;return!0}function Bi(y,_,N,z,W,J){return ip=J,Ci=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,bn.H=y===null||y.memoizedState===null?op:Bl,p0=!1,J=N(z,W),p0=!1,im&&(J=pr(_,N,z,W)),Pc(y),J}function Pc(y){bn.H=So;var _=Mr!==null&&Mr.next!==null;if(ip=0,Fs=Mr=Ci=null,rp=!1,Yg=0,sp=null,_)throw Error(r(300));y===null||Ho||(y=y.dependencies,y!==null&&Hd(y)&&(Ho=!0))}function pr(y,_,N,z){Ci=y;var W=0;do{if(im&&(sp=null),Yg=0,im=!1,25<=W)throw Error(r(301));if(W+=1,Fs=Mr=null,y.updateQueue!=null){var J=y.updateQueue;J.lastEffect=null,J.events=null,J.stores=null,J.memoCache!=null&&(J.memoCache.index=0)}bn.H=m0,J=_(N,z)}while(im);return J}function xi(){var y=bn.H,_=y.useState()[0];return _=typeof _.then=="function"?lt(_):_,y=y.useState()[0],(Mr!==null?Mr.memoizedState:null)!==y&&(Ci.flags|=1024),_}function Xs(){var y=A0!==0;return A0=0,y}function vu(y,_,N){_.updateQueue=y.updateQueue,_.flags&=-2053,y.lanes&=~N}function Nc(y){if(rp){for(y=y.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}rp=!1}ip=0,Fs=Mr=Ci=null,im=!1,Yg=A0=0,sp=null}function ye(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fs===null?Ci.memoizedState=Fs=y:Fs=Fs.next=y,Fs}function Ge(){if(Mr===null){var y=Ci.alternate;y=y!==null?y.memoizedState:null}else y=Mr.next;var _=Fs===null?Ci.memoizedState:Fs.next;if(_!==null)Fs=_,Mr=y;else{if(y===null)throw Ci.alternate===null?Error(r(467)):Error(r(310));Mr=y,y={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Fs===null?Ci.memoizedState=Fs=y:Fs=Fs.next=y}return Fs}function lt(y){var _=Yg;return Yg+=1,sp===null&&(sp=[]),y=xn(sp,y,_),_=Ci,(Fs===null?_.memoizedState:Fs.next)===null&&(_=_.alternate,bn.H=_===null||_.memoizedState===null?op:Bl),y}function Je(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return lt(y);if(y.$$typeof===gt)return eo(y)}throw Error(r(438,String(y)))}function Ye(y){var _=null,N=Ci.updateQueue;if(N!==null&&(_=N.memoCache),_==null){var z=Ci.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(_={data:z.data.map(function(W){return W.slice()}),index:0})))}if(_==null&&(_={data:[],index:0}),N===null&&(N=YT(),Ci.updateQueue=N),N.memoCache=_,N=_.data[_.index],N===void 0)for(N=_.data[_.index]=Array(y),z=0;z<y;z++)N[z]=kt;return _.index++,N}function Xt(y,_){return typeof _=="function"?_(y):_}function fn(y){var _=Ge();return zt(_,Mr,y)}function zt(y,_,N){var z=y.queue;if(z===null)throw Error(r(311));z.lastRenderedReducer=N;var W=y.baseQueue,J=z.pending;if(J!==null){if(W!==null){var be=W.next;W.next=J.next,J.next=be}_.baseQueue=W=J,z.pending=null}if(J=y.baseState,W===null)y.memoizedState=J;else{_=W.next;var Ue=be=null,nt=null,Ot=_,cn=!1;do{var Rn=Ot.lane&-536870913;if(Rn!==Ot.lane?(or&Rn)===Rn:(ip&Rn)===Rn){var ln=Ot.revertLane;if(ln===0)nt!==null&&(nt=nt.next={lane:0,revertLane:0,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null}),Rn===Es&&(cn=!0);else if((ip&ln)===ln){Ot=Ot.next,ln===Es&&(cn=!0);continue}else Rn={lane:0,revertLane:Ot.revertLane,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},nt===null?(Ue=nt=Rn,be=J):nt=nt.next=Rn,Ci.lanes|=ln,Ou|=ln;Rn=Ot.action,p0&&N(J,Rn),J=Ot.hasEagerState?Ot.eagerState:N(J,Rn)}else ln={lane:Rn,revertLane:Ot.revertLane,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},nt===null?(Ue=nt=ln,be=J):nt=nt.next=ln,Ci.lanes|=Rn,Ou|=Rn;Ot=Ot.next}while(Ot!==null&&Ot!==_);if(nt===null?be=J:nt.next=Ue,!Pl(J,y.memoizedState)&&(Ho=!0,cn&&(N=Da,N!==null)))throw N;y.memoizedState=J,y.baseState=be,y.baseQueue=nt,z.lastRenderedState=J}return W===null&&(z.lanes=0),[y.memoizedState,z.dispatch]}function Ae(y){var _=Ge(),N=_.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=y;var z=N.dispatch,W=N.pending,J=_.memoizedState;if(W!==null){N.pending=null;var be=W=W.next;do J=y(J,be.action),be=be.next;while(be!==W);Pl(J,_.memoizedState)||(Ho=!0),_.memoizedState=J,_.baseQueue===null&&(_.baseState=J),N.lastRenderedState=J}return[J,z]}function en(y,_,N){var z=Ci,W=Ge(),J=br;if(J){if(N===void 0)throw Error(r(407));N=N()}else N=_();var be=!Pl((Mr||W).memoizedState,N);if(be&&(W.memoizedState=N,Ho=!0),W=W.queue,Er(Zi.bind(null,z,W,y),[y]),W.getSnapshot!==_||be||Fs!==null&&Fs.memoizedState.tag&1){if(z.flags|=2048,Bc(9,Hn.bind(null,z,W,N,_),{destroy:void 0},null),ns===null)throw Error(r(349));J||ip&60||li(z,_,N)}return N}function li(y,_,N){y.flags|=16384,y={getSnapshot:_,value:N},_=Ci.updateQueue,_===null?(_=YT(),Ci.updateQueue=_,_.stores=[y]):(N=_.stores,N===null?_.stores=[y]:N.push(y))}function Hn(y,_,N,z){_.value=N,_.getSnapshot=z,Ji(_)&&Zr(y)}function Zi(y,_,N){return N(function(){Ji(_)&&Zr(y)})}function Ji(y){var _=y.getSnapshot;y=y.value;try{var N=_();return!Pl(y,N)}catch{return!0}}function Zr(y){var _=Dt(y,2);_!==null&&Jr(_,y,2)}function me(y){var _=ye();if(typeof y=="function"){var N=y;if(y=N(),p0){se(!0);try{N()}finally{se(!1)}}}return _.memoizedState=_.baseState=y,_.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xt,lastRenderedState:y},_}function gi(y,_,N,z){return y.baseState=N,zt(y,Mr,typeof z=="function"?z:Xt)}function Yn(y,_,N,z,W){if(Fd(y))throw Error(r(485));if(y=_.action,y!==null){var J={payload:W,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(be){J.listeners.push(be)}};bn.T!==null?N(!0):J.isTransition=!1,z(J),N=_.pending,N===null?(J.next=_.pending=J,Qs(_,J)):(J.next=N.next,_.pending=N.next=J)}}function Qs(y,_){var N=_.action,z=_.payload,W=y.state;if(_.isTransition){var J=bn.T,be={};bn.T=be;try{var Ue=N(W,z),nt=bn.S;nt!==null&&nt(be,Ue),er(y,_,Ue)}catch(Ot){Rl(y,_,Ot)}finally{bn.T=J}}else try{J=N(W,z),er(y,_,J)}catch(Ot){Rl(y,_,Ot)}}function er(y,_,N){N!==null&&typeof N=="object"&&typeof N.then=="function"?N.then(function(z){Va(y,_,z)},function(z){return Rl(y,_,z)}):Va(y,_,N)}function Va(y,_,N){_.status="fulfilled",_.value=N,ra(_),y.state=N,_=y.pending,_!==null&&(N=_.next,N===_?y.pending=null:(N=N.next,_.next=N,Qs(y,N)))}function Rl(y,_,N){var z=y.pending;if(y.pending=null,z!==null){z=z.next;do _.status="rejected",_.reason=N,ra(_),_=_.next;while(_!==z)}y.action=null}function ra(y){y=y.listeners;for(var _=0;_<y.length;_++)(0,y[_])()}function Zs(y,_){return _}function Tr(y,_){if(br){var N=ns.formState;if(N!==null){e:{var z=Ci;if(br){if(es){var W=KC(es,If);if(W){es=l0(W),z=Fh(W);break e}}et(z)}z=!1}z&&(_=N[0])}}N=ye(),N.memoizedState=N.baseState=_,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:_},N.queue=z,N=ko.bind(null,Ci,z),z.dispatch=N,z=me(!1);var J=Js.bind(null,Ci,!1,z.queue);return z=ye(),W={state:_,dispatch:null,action:y,pending:null},z.queue=W,N=Yn.bind(null,Ci,W,J,N),W.dispatch=N,z.memoizedState=y,[_,N,!1]}function ps(y){var _=Ge();return lr(_,Mr,y)}function lr(y,_,N){_=zt(y,_,Zs)[0],y=fn(Xt)[0],_=typeof _=="object"&&_!==null&&typeof _.then=="function"?lt(_):_;var z=Ge(),W=z.queue,J=W.dispatch;return N!==z.memoizedState&&(Ci.flags|=2048,Bc(9,As.bind(null,W,N),{destroy:void 0},null)),[_,J,y]}function As(y,_){y.action=_}function Uo(y){var _=Ge(),N=Mr;if(N!==null)return lr(_,N,y);Ge(),_=_.memoizedState,N=Ge();var z=N.queue.dispatch;return N.memoizedState=y,[_,z,!1]}function Bc(y,_,N,z){return y={tag:y,create:_,inst:N,deps:z,next:null},_=Ci.updateQueue,_===null&&(_=YT(),Ci.updateQueue=_),N=_.lastEffect,N===null?_.lastEffect=y.next=y:(z=N.next,N.next=y,y.next=z,_.lastEffect=y),y}function Sa(){return Ge().memoizedState}function _g(y,_,N,z){var W=ye();Ci.flags|=y,W.memoizedState=Bc(1|_,N,{destroy:void 0},z===void 0?null:z)}function PA(y,_,N,z){var W=Ge();z=z===void 0?null:z;var J=W.memoizedState.inst;Mr!==null&&z!==null&&si(z,Mr.memoizedState.deps)?W.memoizedState=Bc(_,N,J,z):(Ci.flags|=y,W.memoizedState=Bc(1|_,N,J,z))}function x1(y,_){_g(8390656,8,y,_)}function Er(y,_){PA(2048,8,y,_)}function Sg(y,_){return PA(4,2,y,_)}function b1(y,_){return PA(4,4,y,_)}function NA(y,_){if(typeof _=="function"){y=y();var N=_(y);return function(){typeof N=="function"?N():_(null)}}if(_!=null)return y=y(),_.current=y,function(){_.current=null}}function Tg(y,_,N){N=N!=null?N.concat([y]):null,PA(4,4,NA.bind(null,_,y),N)}function BA(){}function xh(y,_){var N=Ge();_=_===void 0?null:_;var z=N.memoizedState;return _!==null&&si(_,z[1])?z[0]:(N.memoizedState=[y,_],y)}function xf(y,_){var N=Ge();_=_===void 0?null:_;var z=N.memoizedState;if(_!==null&&si(_,z[1]))return z[0];if(z=y(),p0){se(!0);try{y()}finally{se(!1)}}return N.memoizedState=[z,_],z}function zp(y,_,N){return N===void 0||ip&1073741824?y.memoizedState=_:(y.memoizedState=N,y=jA(),Ci.lanes|=y,Ou|=y,N)}function Eg(y,_,N,z){return Pl(N,_)?N:Ff.current!==null?(y=zp(y,N,z),Pl(y,_)||(Ho=!0),y):ip&42?(y=jA(),Ci.lanes|=y,Ou|=y,_):(Ho=!0,y.memoizedState=N)}function _1(y,_,N,z,W){var J=a0();Ll(J!==0&&8>J?J:8);var be=bn.T,Ue={};bn.T=Ue,Js(y,!1,_,N);try{var nt=W(),Ot=bn.S;if(Ot!==null&&Ot(Ue,nt),nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var cn=ai(nt,z);sl(y,_,cn,wa(y))}else sl(y,_,z,wa(y))}catch(Rn){sl(y,_,{then:function(){},status:"rejected",reason:Rn},wa())}finally{Ll(J),bn.T=be}}function Id(y){var _=y.memoizedState;if(_!==null)return _;_={memoizedState:XA,baseState:XA,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xt,lastRenderedState:XA},next:null};var N={};return _.next={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xt,lastRenderedState:N},next:null},y.memoizedState=_,y=y.alternate,y!==null&&(y.memoizedState=_),_}function Hp(){return eo(Zd)}function Od(){return Ge().memoizedState}function bf(){return Ge().memoizedState}function S1(y){for(var _=y.return;_!==null;){switch(_.tag){case 24:case 3:var N=wa();y=En(N);var z=pn(_,y,N);z!==null&&(Jr(z,_,N),Sn(z,_,N)),_={cache:_h()},y.payload=_;return}_=_.return}}function wg(y,_,N){var z=wa();N={lane:z,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null},Fd(y)?Ta(_,N):(N=ft(y,_,N,z),N!==null&&(Jr(N,y,z),Ic(N,_,z)))}function ko(y,_,N){var z=wa();sl(y,_,N,z)}function sl(y,_,N,z){var W={lane:z,revertLane:0,action:N,hasEagerState:!1,eagerState:null,next:null};if(Fd(y))Ta(_,W);else{var J=y.alternate;if(y.lanes===0&&(J===null||J.lanes===0)&&(J=_.lastRenderedReducer,J!==null))try{var be=_.lastRenderedState,Ue=J(be,N);if(W.hasEagerState=!0,W.eagerState=Ue,Pl(Ue,be))return Jt(y,_,W,0),ns===null&&we(),!1}catch{}finally{}if(N=ft(y,_,W,z),N!==null)return Jr(N,y,z),Ic(N,_,z),!0}return!1}function Js(y,_,N,z){if(z={lane:2,revertLane:sn(),action:z,hasEagerState:!1,eagerState:null,next:null},Fd(y)){if(_)throw Error(r(479))}else _=ft(y,N,z,2),_!==null&&Jr(_,y,2)}function Fd(y){var _=y.alternate;return y===Ci||_!==null&&_===Ci}function Ta(y,_){im=rp=!0;var N=y.pending;N===null?_.next=_:(_.next=N.next,N.next=_),y.pending=_}function Ic(y,_,N){if(N&4194176){var z=_.lanes;z&=y.pendingLanes,N|=z,_.lanes=N,oe(y,N)}}function Vp(y,_,N,z){_=y.memoizedState,N=N(z,_),N=N==null?_:K({},_,N),y.memoizedState=N,y.lanes===0&&(y.updateQueue.baseState=N)}function qp(y,_,N,z,W,J,be){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(z,J,be):_.prototype&&_.prototype.isPureReactComponent?!At(N,z)||!At(W,J):!0}function bb(y,_,N,z){y=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(N,z),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(N,z),_.state!==y&&Xg.enqueueReplaceState(_,_.state,null)}function xu(y,_){var N=_;if("ref"in _){N={};for(var z in _)z!=="ref"&&(N[z]=_[z])}if(y=y.defaultProps){N===_&&(N=K({},N));for(var W in y)N[W]===void 0&&(N[W]=y[W])}return N}function _f(y,_){try{var N=y.onUncaughtError;N(_.value,{componentStack:_.stack})}catch(z){setTimeout(function(){throw z})}}function Ql(y,_,N){try{var z=y.onCaughtError;z(N.value,{componentStack:N.stack,errorBoundary:_.tag===1?_.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function Ud(y,_,N){return N=En(N),N.tag=3,N.payload={element:null},N.callback=function(){_f(y,_)},N}function Mg(y){return y=En(y),y.tag=3,y}function IA(y,_,N,z){var W=N.type.getDerivedStateFromError;if(typeof W=="function"){var J=z.value;y.payload=function(){return W(J)},y.callback=function(){Ql(_,N,z)}}var be=N.stateNode;be!==null&&typeof be.componentDidCatch=="function"&&(y.callback=function(){Ql(_,N,z),typeof W!="function"&&(qh===null?qh=new Set([this]):qh.add(this));var Ue=z.stack;this.componentDidCatch(z.value,{componentStack:Ue!==null?Ue:""})})}function kd(y,_,N,z,W){if(N.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(_=N.alternate,_!==null&&Yp(_,N,W,!0),N=rc.current,N!==null){switch(N.tag){case 13:return Lu===null?ec():N.alternate===null&&Us===0&&(Us=3),N.flags&=-257,N.flags|=65536,N.lanes=W,z===Nl?N.flags|=16384:(_=N.updateQueue,_===null?N.updateQueue=new Set([z]):_.add(z),Df(y,z,W)),!1;case 22:return N.flags|=65536,z===Nl?N.flags|=16384:(_=N.updateQueue,_===null?(_={transitions:null,markerInstances:null,retryQueue:new Set([z])},N.updateQueue=_):(N=_.retryQueue,N===null?_.retryQueue=new Set([z]):N.add(z)),Df(y,z,W)),!1}throw Error(r(435,N.tag))}return Df(y,z,W),ec(),!1}if(br)return _=rc.current,_!==null?(!(_.flags&65536)&&(_.flags|=256),_.flags|=65536,_.lanes=W,z!==V1&&(y=Error(r(422),{cause:z}),ut(de(y,N)))):(z!==V1&&(_=Error(r(423),{cause:z}),ut(de(_,N))),y=y.current.alternate,y.flags|=65536,W&=-W,y.lanes|=W,z=de(z,N),W=Ud(y.stateNode,z,W),Fe(y,W),Us!==4&&(Us=2)),!1;var J=Error(r(520),{cause:z});if(J=de(J,N),Zg===null?Zg=[J]:Zg.push(J),Us!==4&&(Us=2),_===null)return!0;z=de(z,N),N=_;do{switch(N.tag){case 3:return N.flags|=65536,y=W&-W,N.lanes|=y,y=Ud(N.stateNode,z,y),Fe(N,y),!1;case 1:if(_=N.type,J=N.stateNode,(N.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(qh===null||!qh.has(J))))return N.flags|=65536,W&=-W,N.lanes|=W,W=Mg(W),IA(W,y,N,z),Fe(N,W),!1}N=N.return}while(N!==null);return!1}function ms(y,_,N,z){_.child=y===null?zh(_,null,N,z):d0(_,y.child,N,z)}function OA(y,_,N,z,W){N=N.render;var J=_.ref;if("ref"in z){var be={};for(var Ue in z)Ue!=="ref"&&(be[Ue]=z[Ue])}else be=z;return bu(_),z=Bi(y,_,N,be,J,W),Ue=Xs(),y!==null&&!Ho?(vu(y,_,W),Sf(y,_,W)):(br&&Ue&&Ce(_),_.flags|=1,ms(y,_,z,W),_.child)}function T1(y,_,N,z,W){if(y===null){var J=N.type;return typeof J=="function"&&!Mu(J)&&J.defaultProps===void 0&&N.compare===null?(_.tag=15,_.type=J,Cg(y,_,J,z,W)):(y=Nh(N.type,null,z,_,_.mode,W),y.ref=_.ref,y.return=_,_.child=y)}if(J=y.child,!UA(y,W)){var be=J.memoizedProps;if(N=N.compare,N=N!==null?N:At,N(be,z)&&y.ref===_.ref)return Sf(y,_,W)}return _.flags|=1,y=jt(J,z),y.ref=_.ref,y.return=_,_.child=y}function Cg(y,_,N,z,W){if(y!==null){var J=y.memoizedProps;if(At(J,z)&&y.ref===_.ref)if(Ho=!1,_.pendingProps=z=J,UA(y,W))y.flags&131072&&(Ho=!0);else return _.lanes=y.lanes,Sf(y,_,W)}return Rg(y,_,N,z,W)}function _b(y,_,N){var z=_.pendingProps,W=z.children,J=(_.stateNode._pendingVisibility&2)!==0,be=y!==null?y.memoizedState:null;if($p(y,_),z.mode==="hidden"||J){if(_.flags&128){if(z=be!==null?be.baseLanes|N:N,y!==null){for(W=_.child=y.child,J=0;W!==null;)J=J|W.lanes|W.childLanes,W=W.sibling;_.childLanes=J&~z}else _.childLanes=0,_.child=null;return Sb(y,_,z,N)}if(N&536870912)_.memoizedState={baseLanes:0,cachePool:null},y!==null&&Lg(_,be!==null?be.cachePool:null),be!==null?dt(_,be):Ut(),S(_);else return _.lanes=_.childLanes=536870912,Sb(y,_,be!==null?be.baseLanes|N:N,N)}else be!==null?(Lg(_,be.cachePool),dt(_,be),ve(),_.memoizedState=null):(y!==null&&Lg(_,null),Ut(),ve());return ms(y,_,W,N),_.child}function Sb(y,_,N,z){var W=R1();return W=W===null?null:{parent:Lf?so._currentValue:so._currentValue2,pool:W},_.memoizedState={baseLanes:N,cachePool:W},y!==null&&Lg(_,null),Ut(),S(_),y!==null&&Yp(y,_,z,!0),null}function $p(y,_){var N=_.ref;if(N===null)y!==null&&y.ref!==null&&(_.flags|=2097664);else{if(typeof N!="function"&&typeof N!="object")throw Error(r(284));(y===null||y.ref!==N)&&(_.flags|=2097664)}}function Rg(y,_,N,z,W){return bu(_),N=Bi(y,_,N,z,void 0,W),z=Xs(),y!==null&&!Ho?(vu(y,_,W),Sf(y,_,W)):(br&&z&&Ce(_),_.flags|=1,ms(y,_,N,W),_.child)}function Tb(y,_,N,z,W,J){return bu(_),_.updateQueue=null,N=pr(_,z,N,W),Pc(y),z=Xs(),y!==null&&!Ho?(vu(y,_,J),Sf(y,_,J)):(br&&z&&Ce(_),_.flags|=1,ms(y,_,N,J),_.child)}function Eb(y,_,N,z,W){if(bu(_),_.stateNode===null){var J=em,be=N.contextType;typeof be=="object"&&be!==null&&(J=eo(be)),J=new N(z,J),_.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,J.updater=Xg,_.stateNode=J,J._reactInternals=_,J=_.stateNode,J.props=z,J.state=_.memoizedState,J.refs={},Vt(_),be=N.contextType,J.context=typeof be=="object"&&be!==null?eo(be):em,J.state=_.memoizedState,be=N.getDerivedStateFromProps,typeof be=="function"&&(Vp(_,N,be,z),J.state=_.memoizedState),typeof N.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(be=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),be!==J.state&&Xg.enqueueReplaceState(J,J.state,null),dn(_,z,J,W),xt(),J.state=_.memoizedState),typeof J.componentDidMount=="function"&&(_.flags|=4194308),z=!0}else if(y===null){J=_.stateNode;var Ue=_.memoizedProps,nt=xu(N,Ue);J.props=nt;var Ot=J.context,cn=N.contextType;be=em,typeof cn=="object"&&cn!==null&&(be=eo(cn));var Rn=N.getDerivedStateFromProps;cn=typeof Rn=="function"||typeof J.getSnapshotBeforeUpdate=="function",Ue=_.pendingProps!==Ue,cn||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(Ue||Ot!==be)&&bb(_,J,z,be),hl=!1;var ln=_.memoizedState;J.state=ln,dn(_,z,J,W),xt(),Ot=_.memoizedState,Ue||ln!==Ot||hl?(typeof Rn=="function"&&(Vp(_,N,Rn,z),Ot=_.memoizedState),(nt=hl||qp(_,N,nt,z,ln,Ot,be))?(cn||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(_.flags|=4194308)):(typeof J.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=z,_.memoizedState=Ot),J.props=z,J.state=Ot,J.context=be,z=nt):(typeof J.componentDidMount=="function"&&(_.flags|=4194308),z=!1)}else{J=_.stateNode,_n(y,_),be=_.memoizedProps,cn=xu(N,be),J.props=cn,Rn=_.pendingProps,ln=J.context,Ot=N.contextType,nt=em,typeof Ot=="object"&&Ot!==null&&(nt=eo(Ot)),Ue=N.getDerivedStateFromProps,(Ot=typeof Ue=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(be!==Rn||ln!==nt)&&bb(_,J,z,nt),hl=!1,ln=_.memoizedState,J.state=ln,dn(_,z,J,W),xt();var Di=_.memoizedState;be!==Rn||ln!==Di||hl||y!==null&&y.dependencies!==null&&Hd(y.dependencies)?(typeof Ue=="function"&&(Vp(_,N,Ue,z),Di=_.memoizedState),(cn=hl||qp(_,N,cn,z,ln,Di,nt)||y!==null&&y.dependencies!==null&&Hd(y.dependencies))?(Ot||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(z,Di,nt),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(z,Di,nt)),typeof J.componentDidUpdate=="function"&&(_.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof J.componentDidUpdate!="function"||be===y.memoizedProps&&ln===y.memoizedState||(_.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&ln===y.memoizedState||(_.flags|=1024),_.memoizedProps=z,_.memoizedState=Di),J.props=z,J.state=Di,J.context=nt,z=cn):(typeof J.componentDidUpdate!="function"||be===y.memoizedProps&&ln===y.memoizedState||(_.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&ln===y.memoizedState||(_.flags|=1024),z=!1)}return J=z,$p(y,_),z=(_.flags&128)!==0,J||z?(J=_.stateNode,N=z&&typeof N.getDerivedStateFromError!="function"?null:J.render(),_.flags|=1,y!==null&&z?(_.child=d0(_,y.child,null,W),_.child=d0(_,null,N,W)):ms(y,_,N,W),_.memoizedState=J.state,y=_.child):y=Sf(y,_,W),y}function wb(y,_,N,z){return mt(),_.flags|=256,ms(y,_,N,z),_.child}function E1(y){return{baseLanes:y,cachePool:D1()}}function FA(y,_,N){return y=y!==null?y.childLanes&~N:0,_&&(y|=jc),y}function Mb(y,_,N){var z=_.pendingProps,W=!1,J=(_.flags&128)!==0,be;if((be=J)||(be=y!==null&&y.memoizedState===null?!1:(gs.current&2)!==0),be&&(W=!0,_.flags&=-129),be=(_.flags&32)!==0,_.flags&=-33,y===null){if(br){if(W?In(_):ve(),br){var Ue=es,nt;(nt=Ue)&&(Ue=XC(Ue,If),Ue!==null?(_.memoizedState={dehydrated:Ue,treeContext:Bf!==null?{id:kh,overflow:Gh}:null,retryLane:536870912},nt=t(18,null,null,0),nt.stateNode=Ue,nt.return=_,_.child=nt,bo=_,es=null,nt=!0):nt=!1),nt||et(_)}if(Ue=_.memoizedState,Ue!==null&&(Ue=Ue.dehydrated,Ue!==null))return k1(Ue)?_.lanes=16:_.lanes=536870912,null;Kn(_)}return Ue=z.children,z=z.fallback,W?(ve(),W=_.mode,Ue=jp({mode:"hidden",children:Ue},W),z=Cu(z,W,N,null),Ue.return=_,z.return=_,Ue.sibling=z,_.child=Ue,W=_.child,W.memoizedState=E1(N),W.childLanes=FA(y,be,N),_.memoizedState=j1,z):(In(_),w1(_,Ue))}if(nt=y.memoizedState,nt!==null&&(Ue=nt.dehydrated,Ue!==null)){if(J)_.flags&256?(In(_),_.flags&=-257,_=Dg(y,_,N)):_.memoizedState!==null?(ve(),_.child=y.child,_.flags|=128,_=null):(ve(),W=z.fallback,Ue=_.mode,z=jp({mode:"visible",children:z.children},Ue),W=Cu(W,Ue,N,null),W.flags|=2,z.return=_,W.return=_,z.sibling=W,_.child=z,d0(_,y.child,null,N),z=_.child,z.memoizedState=E1(N),z.childLanes=FA(y,be,N),_.memoizedState=j1,_=W);else if(In(_),k1(Ue))be=Ub(Ue).digest,z=Error(r(419)),z.stack="",z.digest=be,ut({value:z,source:null,stack:null}),_=Dg(y,_,N);else if(Ho||Yp(y,_,N,!1),be=(N&y.childLanes)!==0,Ho||be){if(be=ns,be!==null){if(z=N&-N,z&42)z=1;else switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=64;break;case 268435456:z=134217728;break;default:z=0}if(z=z&(be.suspendedLanes|N)?0:z,z!==0&&z!==nt.retryLane)throw nt.retryLane=z,Dt(y,z),Jr(be,y,z),XT}QA(Ue)||ec(),_=Dg(y,_,N)}else QA(Ue)?(_.flags|=128,_.child=y.child,_=KA.bind(null,y),WC(Ue,_),_=null):(y=nt.treeContext,tc&&(es=IT(Ue),bo=_,br=!0,Du=null,If=!1,y!==null&&(nc[fl++]=kh,nc[fl++]=Gh,nc[fl++]=Bf,kh=y.id,Gh=y.overflow,Bf=_)),_=w1(_,z.children),_.flags|=4096);return _}return W?(ve(),W=z.fallback,Ue=_.mode,nt=y.child,J=nt.sibling,z=jt(nt,{mode:"hidden",children:z.children}),z.subtreeFlags=nt.subtreeFlags&31457280,J!==null?W=jt(J,W):(W=Cu(W,Ue,N,null),W.flags|=2),W.return=_,z.return=_,z.sibling=W,_.child=z,z=W,W=_.child,Ue=y.child.memoizedState,Ue===null?Ue=E1(N):(nt=Ue.cachePool,nt!==null?(J=Lf?so._currentValue:so._currentValue2,nt=nt.parent!==J?{parent:J,pool:J}:nt):nt=D1(),Ue={baseLanes:Ue.baseLanes|N,cachePool:nt}),W.memoizedState=Ue,W.childLanes=FA(y,be,N),_.memoizedState=j1,z):(In(_),N=y.child,y=N.sibling,N=jt(N,{mode:"visible",children:z.children}),N.return=_,N.sibling=null,y!==null&&(be=_.deletions,be===null?(_.deletions=[y],_.flags|=16):be.push(y)),_.child=N,_.memoizedState=null,N)}function w1(y,_){return _=jp({mode:"visible",children:_},y.mode),_.return=y,y.child=_}function jp(y,_){return Qd(y,_,0,null)}function Dg(y,_,N){return d0(_,y.child,null,N),y=w1(_,_.pendingProps.children),y.flags|=2,_.memoizedState=null,y}function Cb(y,_,N){y.lanes|=_;var z=y.alternate;z!==null&&(z.lanes|=_),Kp(y.return,_,N)}function M1(y,_,N,z,W){var J=y.memoizedState;J===null?y.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:z,tail:N,tailMode:W}:(J.isBackwards=_,J.rendering=null,J.renderingStartTime=0,J.last=z,J.tail=N,J.tailMode=W)}function Wp(y,_,N){var z=_.pendingProps,W=z.revealOrder,J=z.tail;if(ms(y,_,z.children,N),z=gs.current,z&2)z=z&1|2,_.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=_.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Cb(y,N,_);else if(y.tag===19)Cb(y,N,_);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===_)break e;for(;y.sibling===null;){if(y.return===null||y.return===_)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}z&=1}switch(C(gs,z),W){case"forwards":for(N=_.child,W=null;N!==null;)y=N.alternate,y!==null&&ni(y)===null&&(W=N),N=N.sibling;N=W,N===null?(W=_.child,_.child=null):(W=N.sibling,N.sibling=null),M1(_,!1,W,N,J);break;case"backwards":for(N=null,W=_.child,_.child=null;W!==null;){if(y=W.alternate,y!==null&&ni(y)===null){_.child=W;break}y=W.sibling,W.sibling=N,N=W,W=y}M1(_,!0,N,null,J);break;case"together":M1(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Sf(y,_,N){if(y!==null&&(_.dependencies=y.dependencies),Ou|=_.lanes,!(N&_.childLanes))if(y!==null){if(Yp(y,_,N,!1),(N&_.childLanes)===0)return null}else return null;if(y!==null&&_.child!==y.child)throw Error(r(153));if(_.child!==null){for(y=_.child,N=jt(y,y.pendingProps),_.child=N,N.return=_;y.sibling!==null;)y=y.sibling,N=N.sibling=jt(y,y.pendingProps),N.return=_;N.sibling=null}return _.child}function UA(y,_){return y.lanes&_?!0:(y=y.dependencies,!!(y!==null&&Hd(y)))}function Rb(y,_,N){switch(_.tag){case 3:Ee(_,_.stateNode.containerInfo),bh(_,so,y.memoizedState.cache),mt();break;case 27:case 5:qe(_);break;case 4:Ee(_,_.stateNode.containerInfo);break;case 10:bh(_,_.type,_.memoizedProps.value);break;case 13:var z=_.memoizedState;if(z!==null)return z.dehydrated!==null?(In(_),_.flags|=128,null):N&_.child.childLanes?Mb(y,_,N):(In(_),y=Sf(y,_,N),y!==null?y.sibling:null);In(_);break;case 19:var W=(y.flags&128)!==0;if(z=(N&_.childLanes)!==0,z||(Yp(y,_,N,!1),z=(N&_.childLanes)!==0),W){if(z)return Wp(y,_,N);_.flags|=128}if(W=_.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),C(gs,gs.current),z)break;return null;case 22:case 23:return _.lanes=0,_b(y,_,N);case 24:bh(_,so,y.memoizedState.cache)}return Sf(y,_,N)}function Gd(y,_,N){if(y!==null)if(y.memoizedProps!==_.pendingProps)Ho=!0;else{if(!UA(y,N)&&!(_.flags&128))return Ho=!1,Rb(y,_,N);Ho=!!(y.flags&131072)}else Ho=!1,br&&_.flags&1048576&&ge(_,jg,_.index);switch(_.lanes=0,_.tag){case 16:e:{y=_.pendingProps;var z=_.elementType,W=z._init;if(z=W(z._payload),_.type=z,typeof z=="function")Mu(z)?(y=xu(z,y),_.tag=1,_=Eb(null,_,z,y,N)):(_.tag=0,_=Rg(null,_,z,y,N));else{if(z!=null){if(W=z.$$typeof,W===ot){_.tag=11,_=OA(null,_,z,y,N);break e}else if(W===gn){_.tag=14,_=T1(null,_,z,y,N);break e}}throw _=o(z)||z,Error(r(306,_,""))}}return _;case 0:return Rg(y,_,_.type,_.pendingProps,N);case 1:return z=_.type,W=xu(z,_.pendingProps),Eb(y,_,z,W,N);case 3:e:{if(Ee(_,_.stateNode.containerInfo),y===null)throw Error(r(387));var J=_.pendingProps;W=_.memoizedState,z=W.element,_n(y,_),dn(_,J,null,N);var be=_.memoizedState;if(J=be.cache,bh(_,so,J),J!==W.cache&&zd(_,[so],N,!0),xt(),J=be.element,tc&&W.isDehydrated)if(W={element:J,isDehydrated:!1,cache:be.cache},_.updateQueue.baseState=W,_.memoizedState=W,_.flags&256){_=wb(y,_,J,N);break e}else if(J!==z){z=de(Error(r(424)),_),ut(z),_=wb(y,_,J,N);break e}else for(tc&&(es=ZA(_.stateNode.containerInfo),bo=_,br=!0,Du=null,If=!0),N=zh(_,null,J,N),_.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(mt(),J===z){_=Sf(y,_,N);break e}ms(y,_,J,N)}_=_.child}return _;case 26:if(Hc)return $p(y,_),y===null?(N=kT(_.type,null,_.pendingProps,null))?_.memoizedState=N:br||(_.stateNode=VT(_.type,_.pendingProps,tp.current,_)):_.memoizedState=kT(_.type,y.memoizedProps,_.pendingProps,y.memoizedState),null;case 27:if(Ra)return qe(_),y===null&&Ra&&br&&(z=_.stateNode=zb(_.type,_.pendingProps,tp.current,xo.current,!1),bo=_,If=!0,es=Jd(z)),z=_.pendingProps.children,y!==null||br?ms(y,_,z,N):_.child=d0(_,null,z,N),$p(y,_),_.child;case 5:return y===null&&br&&(tR(_.type,_.pendingProps,xo.current),(W=z=es)&&(z=OT(z,_.type,_.pendingProps,If),z!==null?(_.stateNode=z,bo=_,es=Jd(z),If=!1,W=!0):W=!1),W||et(_)),qe(_),W=_.type,J=_.pendingProps,be=y!==null?y.memoizedProps:null,z=J.children,ja(W,J)?z=null:be!==null&&ja(W,be)&&(_.flags|=32),_.memoizedState!==null&&(W=Bi(y,_,xi,null,null,N),Lf?Zd._currentValue=W:Zd._currentValue2=W),$p(y,_),ms(y,_,z,N),_.child;case 6:return y===null&&br&&(oB(_.pendingProps,xo.current),(y=N=es)&&(N=YC(N,_.pendingProps,If),N!==null?(_.stateNode=N,bo=_,es=null,y=!0):y=!1),y||et(_)),null;case 13:return Mb(y,_,N);case 4:return Ee(_,_.stateNode.containerInfo),z=_.pendingProps,y===null?_.child=d0(_,null,z,N):ms(y,_,z,N),_.child;case 11:return OA(y,_,_.type,_.pendingProps,N);case 7:return ms(y,_,_.pendingProps,N),_.child;case 8:return ms(y,_,_.pendingProps.children,N),_.child;case 12:return ms(y,_,_.pendingProps.children,N),_.child;case 10:return z=_.pendingProps,bh(_,_.type,z.value),ms(y,_,z.children,N),_.child;case 9:return W=_.type._context,z=_.pendingProps.children,bu(_),W=eo(W),z=z(W),_.flags|=1,ms(y,_,z,N),_.child;case 14:return T1(y,_,_.type,_.pendingProps,N);case 15:return Cg(y,_,_.type,_.pendingProps,N);case 19:return Wp(y,_,N);case 22:return _b(y,_,N);case 24:return bu(_),z=eo(so),y===null?(W=R1(),W===null&&(W=ns,J=_h(),W.pooledCache=J,J.refCount++,J!==null&&(W.pooledCacheLanes|=N),W=J),_.memoizedState={parent:z,cache:W},Vt(_),bh(_,so,W)):(y.lanes&N&&(_n(y,_),dn(_,null,null,N),xt()),W=y.memoizedState,J=_.memoizedState,W.parent!==z?(W={parent:z,cache:z},_.memoizedState=W,_.lanes===0&&(_.memoizedState=_.updateQueue.baseState=W),bh(_,so,z)):(z=J.cache,bh(_,so,z),z!==W.cache&&zd(_,[so],N,!0))),ms(y,_,_.pendingProps.children,N),_.child;case 29:throw _.pendingProps}throw Error(r(156,_.tag))}function bh(y,_,N){Lf?(C(Pu,_._currentValue),_._currentValue=N):(C(Pu,_._currentValue2),_._currentValue2=N)}function Oc(y){var _=Pu.current;Lf?y._currentValue=_:y._currentValue2=_,T(Pu)}function Kp(y,_,N){for(;y!==null;){var z=y.alternate;if((y.childLanes&_)!==_?(y.childLanes|=_,z!==null&&(z.childLanes|=_)):z!==null&&(z.childLanes&_)!==_&&(z.childLanes|=_),y===N)break;y=y.return}}function zd(y,_,N,z){var W=y.child;for(W!==null&&(W.return=y);W!==null;){var J=W.dependencies;if(J!==null){var be=W.child;J=J.firstContext;e:for(;J!==null;){var Ue=J;J=W;for(var nt=0;nt<_.length;nt++)if(Ue.context===_[nt]){J.lanes|=N,Ue=J.alternate,Ue!==null&&(Ue.lanes|=N),Kp(J.return,N,y),z||(be=null);break e}J=Ue.next}}else if(W.tag===18){if(be=W.return,be===null)throw Error(r(341));be.lanes|=N,J=be.alternate,J!==null&&(J.lanes|=N),Kp(be,N,y),be=null}else be=W.child;if(be!==null)be.return=W;else for(be=W;be!==null;){if(be===y){be=null;break}if(W=be.sibling,W!==null){W.return=be.return,be=W;break}be=be.return}W=be}}function Yp(y,_,N,z){y=null;for(var W=_,J=!1;W!==null;){if(!J){if(W.flags&524288)J=!0;else if(W.flags&262144)break}if(W.tag===10){var be=W.alternate;if(be===null)throw Error(r(387));if(be=be.memoizedProps,be!==null){var Ue=W.type;Pl(W.pendingProps.value,be.value)||(y!==null?y.push(Ue):y=[Ue])}}else if(W===H1.current){if(be=W.alternate,be===null)throw Error(r(387));be.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(y!==null?y.push(Zd):y=[Zd])}W=W.return}y!==null&&zd(_,y,N,z),_.flags|=262144}function Hd(y){for(y=y.firstContext;y!==null;){var _=y.context;if(!Pl(Lf?_._currentValue:_._currentValue2,y.memoizedValue))return!0;y=y.next}return!1}function bu(y){y0=y,Nu=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function eo(y){return C1(y0,y)}function wr(y,_){return y0===null&&bu(y),C1(y,_)}function C1(y,_){var N=Lf?_._currentValue:_._currentValue2;if(_={context:_,memoizedValue:N,next:null},Nu===null){if(y===null)throw Error(r(308));Nu=_,y.dependencies={lanes:0,firstContext:_},y.flags|=524288}else Nu=Nu.next=_;return N}function _h(){return{controller:new W1,data:new Map,refCount:0}}function kA(y){y.refCount--,y.refCount===0&&qs(lB,function(){y.controller.abort()})}function R1(){var y=rm.current;return y!==null?y:ns.pooledCache}function Lg(y,_){_===null?C(rm,rm.current):C(rm,_.pool)}function D1(){var y=R1();return y===null?null:{parent:Lf?so._currentValue:so._currentValue2,pool:y}}function ol(y){y.flags|=4}function mo(y,_){if(y!==null&&y.child===_.child)return!1;if(_.flags&16)return!0;for(y=_.child;y!==null;){if(y.flags&13878||y.subtreeFlags&13878)return!0;y=y.sibling}return!1}function Tf(y,_,N,z){if(Os)for(N=_.child;N!==null;){if(N.tag===5||N.tag===6)F1(y,N.stateNode);else if(!(N.tag===4||Ra&&N.tag===27)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===_)break;for(;N.sibling===null;){if(N.return===null||N.return===_)return;N=N.return}N.sibling.return=N.return,N=N.sibling}else if(Pf)for(var W=_.child;W!==null;){if(W.tag===5){var J=W.stateNode;N&&z&&(J=jC(J,W.type,W.memoizedProps)),F1(y,J)}else if(W.tag===6)J=W.stateNode,N&&z&&(J=BT(J,W.memoizedProps)),F1(y,J);else if(W.tag!==4){if(W.tag===22&&W.memoizedState!==null)J=W.child,J!==null&&(J.return=W),Tf(y,W,!0,!0);else if(W.child!==null){W.child.return=W,W=W.child;continue}}if(W===_)break;for(;W.sibling===null;){if(W.return===null||W.return===_)return;W=W.return}W.sibling.return=W.return,W=W.sibling}}function Sh(y,_,N,z){if(Pf)for(var W=_.child;W!==null;){if(W.tag===5){var J=W.stateNode;N&&z&&(J=jC(J,W.type,W.memoizedProps)),NT(y,J)}else if(W.tag===6)J=W.stateNode,N&&z&&(J=BT(J,W.memoizedProps)),NT(y,J);else if(W.tag!==4){if(W.tag===22&&W.memoizedState!==null)J=W.child,J!==null&&(J.return=W),Sh(y,W,!(W.memoizedProps!==null&&W.memoizedProps.mode==="manual"),!0);else if(W.child!==null){W.child.return=W,W=W.child;continue}}if(W===_)break;for(;W.sibling===null;){if(W.return===null||W.return===_)return;W=W.return}W.sibling.return=W.return,W=W.sibling}}function GA(y,_){if(Pf&&mo(y,_)){y=_.stateNode;var N=y.containerInfo,z=Fb();Sh(z,_,!1,!1),y.pendingChildren=z,ol(_),qC(N,z)}}function Xp(y,_,N,z){if(Os)y.memoizedProps!==z&&ol(_);else if(Pf){var W=y.stateNode,J=y.memoizedProps;if((y=mo(y,_))||J!==z){var be=xo.current;J=VC(W,N,J,z,!y,null),J===W?_.stateNode=W:(Lb(J,N,z,be)&&ol(_),_.stateNode=J,y?Tf(J,_,!1,!1):ol(_))}else _.stateNode=W}}function Pg(y,_,N){if(MT(_,N)){if(y.flags|=16777216,!CT(_,N))if(Pr())y.flags|=8192;else throw dl=Nl,$1}else y.flags&=-16777217}function qa(y,_){if(rR(_)){if(y.flags|=16777216,!qT(_))if(Pr())y.flags|=8192;else throw dl=Nl,$1}else y.flags&=-16777217}function Vd(y,_){_!==null&&(y.flags|=4),y.flags&16384&&(_=y.tag!==22?H():536870912,y.lanes|=_,qo|=_)}function Th(y,_){if(!br)switch(y.tailMode){case"hidden":_=y.tail;for(var N=null;_!==null;)_.alternate!==null&&(N=_),_=_.sibling;N===null?y.tail=null:N.sibling=null;break;case"collapsed":N=y.tail;for(var z=null;N!==null;)N.alternate!==null&&(z=N),N=N.sibling;z===null?_||y.tail===null?y.tail=null:y.tail.sibling=null:z.sibling=null}}function Lr(y){var _=y.alternate!==null&&y.alternate.child===y.child,N=0,z=0;if(_)for(var W=y.child;W!==null;)N|=W.lanes|W.childLanes,z|=W.subtreeFlags&31457280,z|=W.flags&31457280,W.return=y,W=W.sibling;else for(W=y.child;W!==null;)N|=W.lanes|W.childLanes,z|=W.subtreeFlags,z|=W.flags,W.return=y,W=W.sibling;return y.subtreeFlags|=z,y.childLanes=N,_}function Qp(y,_,N){var z=_.pendingProps;switch(Ie(_),_.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(_),null;case 1:return Lr(_),null;case 3:return N=_.stateNode,z=null,y!==null&&(z=y.memoizedState.cache),_.memoizedState.cache!==z&&(_.flags|=2048),Oc(so),Be(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(y===null||y.child===null)&&($t(_)?ol(_):y===null||y.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Du!==null&&(Rf(Du),Du=null))),GA(y,_),Lr(_),null;case 26:if(Hc){N=_.type;var W=_.memoizedState;return y===null?(ol(_),W!==null?(Lr(_),qa(_,W)):(Lr(_),Pg(_,N,z))):W?W!==y.memoizedState?(ol(_),Lr(_),qa(_,W)):(Lr(_),_.flags&=-16777217):(Os?y.memoizedProps!==z&&ol(_):Xp(y,_,N,z),Lr(_),Pg(_,N,z)),null}case 27:if(Ra){if(it(_),N=tp.current,W=_.type,y!==null&&_.stateNode!=null)Os?y.memoizedProps!==z&&ol(_):Xp(y,_,W,z);else{if(!z){if(_.stateNode===null)throw Error(r(166));return Lr(_),null}y=xo.current,$t(_)?Ht(_,y):(y=zb(W,z,N,y,!0),_.stateNode=y,ol(_))}return Lr(_),null}case 5:if(it(_),N=_.type,y!==null&&_.stateNode!=null)Xp(y,_,N,z);else{if(!z){if(_.stateNode===null)throw Error(r(166));return Lr(_),null}y=xo.current,$t(_)?Ht(_,y):(W=wT(N,z,tp.current,y,_),Tf(W,_,!1,!1),_.stateNode=W,Lb(W,N,z,y)&&ol(_))}return Lr(_),Pg(_,_.type,_.pendingProps),null;case 6:if(y&&_.stateNode!=null)N=y.memoizedProps,Os?N!==z&&ol(_):Pf&&(N!==z?(_.stateNode=yo(z,tp.current,xo.current,_),ol(_)):_.stateNode=y.stateNode);else{if(typeof z!="string"&&_.stateNode===null)throw Error(r(166));if(y=tp.current,N=xo.current,$t(_)){if(!tc)throw Error(r(176));if(y=_.stateNode,N=_.memoizedProps,z=null,W=bo,W!==null)switch(W.tag){case 27:case 5:z=W.memoizedProps}kb(y,N,_,z)||et(_)}else _.stateNode=yo(z,y,N,_)}return Lr(_),null;case 13:if(z=_.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(W=$t(_),z!==null&&z.dehydrated!==null){if(y===null){if(!W)throw Error(r(318));if(!tc)throw Error(r(344));if(W=_.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(r(317));QC(W,_)}else mt(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;Lr(_),W=!1}else Du!==null&&(Rf(Du),Du=null),W=!0;if(!W)return _.flags&256?(Kn(_),_):(Kn(_),null)}if(Kn(_),_.flags&128)return _.lanes=N,_;if(N=z!==null,y=y!==null&&y.memoizedState!==null,N){z=_.child,W=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(W=z.alternate.memoizedState.cachePool.pool);var J=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(J=z.memoizedState.cachePool.pool),J!==W&&(z.flags|=2048)}return N!==y&&N&&(_.child.flags|=8192),Vd(_,_.updateQueue),Lr(_),null;case 4:return Be(),GA(y,_),y===null&&_C(_.stateNode.containerInfo),Lr(_),null;case 10:return Oc(_.type),Lr(_),null;case 19:if(T(gs),W=_.memoizedState,W===null)return Lr(_),null;if(z=(_.flags&128)!==0,J=W.rendering,J===null)if(z)Th(W,!1);else{if(Us!==0||y!==null&&y.flags&128)for(y=_.child;y!==null;){if(J=ni(y),J!==null){for(_.flags|=128,Th(W,!1),y=J.updateQueue,_.updateQueue=y,Vd(_,y),_.subtreeFlags=0,y=N,N=_.child;N!==null;)un(N,y),N=N.sibling;return C(gs,gs.current&1|2),_.child}y=y.sibling}W.tail!==null&&Vc()>Wc&&(_.flags|=128,z=!0,Th(W,!1),_.lanes=4194304)}else{if(!z)if(y=ni(J),y!==null){if(_.flags|=128,z=!0,y=y.updateQueue,_.updateQueue=y,Vd(_,y),Th(W,!0),W.tail===null&&W.tailMode==="hidden"&&!J.alternate&&!br)return Lr(_),null}else 2*Vc()-W.renderingStartTime>Wc&&N!==536870912&&(_.flags|=128,z=!0,Th(W,!1),_.lanes=4194304);W.isBackwards?(J.sibling=_.child,_.child=J):(y=W.last,y!==null?y.sibling=J:_.child=J,W.last=J)}return W.tail!==null?(_=W.tail,W.rendering=_,W.tail=_.sibling,W.renderingStartTime=Vc(),_.sibling=null,y=gs.current,C(gs,z?y&1|2:y&1),_):(Lr(_),null);case 22:case 23:return Kn(_),hn(),z=_.memoizedState!==null,y!==null?y.memoizedState!==null!==z&&(_.flags|=8192):z&&(_.flags|=8192),z?N&536870912&&!(_.flags&128)&&(Lr(_),_.subtreeFlags&6&&(_.flags|=8192)):Lr(_),N=_.updateQueue,N!==null&&Vd(_,N.retryQueue),N=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),z=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(z=_.memoizedState.cachePool.pool),z!==N&&(_.flags|=2048),y!==null&&T(rm),null;case 24:return N=null,y!==null&&(N=y.memoizedState.cache),_.memoizedState.cache!==N&&(_.flags|=2048),Oc(so),Lr(_),null;case 25:return null}throw Error(r(156,_.tag))}function zA(y,_){switch(Ie(_),_.tag){case 1:return y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 3:return Oc(so),Be(),y=_.flags,y&65536&&!(y&128)?(_.flags=y&-65537|128,_):null;case 26:case 27:case 5:return it(_),null;case 13:if(Kn(_),y=_.memoizedState,y!==null&&y.dehydrated!==null){if(_.alternate===null)throw Error(r(340));mt()}return y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 19:return T(gs),null;case 4:return Be(),null;case 10:return Oc(_.type),null;case 22:case 23:return Kn(_),hn(),y!==null&&T(rm),y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 24:return Oc(so),null;case 25:return null;default:return null}}function Db(y,_){switch(Ie(_),_.tag){case 3:Oc(so),Be();break;case 26:case 27:case 5:it(_);break;case 4:Be();break;case 13:Kn(_);break;case 19:T(gs);break;case 10:Oc(_.type);break;case 22:case 23:Kn(_),hn(),y!==null&&T(rm);break;case 24:Oc(so)}}function Zp(y,_){try{var N=_.updateQueue,z=N!==null?N.lastEffect:null;if(z!==null){var W=z.next;N=W;do{if((N.tag&y)===y){z=void 0;var J=N.create,be=N.inst;z=J(),be.destroy=z}N=N.next}while(N!==W)}}catch(Ue){bi(_,_.return,Ue)}}function Eh(y,_,N){try{var z=_.updateQueue,W=z!==null?z.lastEffect:null;if(W!==null){var J=W.next;z=J;do{if((z.tag&y)===y){var be=z.inst,Ue=be.destroy;if(Ue!==void 0){be.destroy=void 0,W=_;var nt=N;try{Ue()}catch(Ot){bi(W,nt,Ot)}}}z=z.next}while(z!==J)}}catch(Ot){bi(_,_.return,Ot)}}function Ng(y){var _=y.updateQueue;if(_!==null){var N=y.stateNode;try{tn(_,N)}catch(z){bi(y,y.return,z)}}}function al(y,_,N){N.props=xu(y.type,y.memoizedProps),N.state=y.memoizedState;try{N.componentWillUnmount()}catch(z){bi(y,_,z)}}function Fc(y,_){try{var N=y.ref;if(N!==null){var z=y.stateNode;switch(y.tag){case 26:case 27:case 5:var W=Ih(z);break;default:W=z}typeof N=="function"?y.refCleanup=N(W):N.current=W}}catch(J){bi(y,_,J)}}function $a(y,_){var N=y.ref,z=y.refCleanup;if(N!==null)if(typeof z=="function")try{z()}catch(W){bi(y,_,W)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof N=="function")try{N(null)}catch(W){bi(y,_,W)}else N.current=null}function Bg(y){var _=y.type,N=y.memoizedProps,z=y.stateNode;try{IC(z,_,N,y)}catch(W){bi(y,y.return,W)}}function qd(y,_,N){try{OC(y.stateNode,y.type,N,_,y)}catch(z){bi(y,y.return,z)}}function wh(y){return y.tag===5||y.tag===3||(Hc?y.tag===26:!1)||(Ra?y.tag===27:!1)||y.tag===4}function HA(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||wh(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&(!Ra||y.tag!==27)&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function $d(y,_,N){var z=y.tag;if(z===5||z===6)y=y.stateNode,_?LT(N,y,_):DT(N,y);else if(!(z===4||Ra&&z===27)&&(y=y.child,y!==null))for($d(y,_,N),y=y.sibling;y!==null;)$d(y,_,N),y=y.sibling}function Ig(y,_,N){var z=y.tag;if(z===5||z===6)y=y.stateNode,_?FC(N,y,_):NC(N,y);else if(!(z===4||Ra&&z===27)&&(y=y.child,y!==null))for(Ig(y,_,N),y=y.sibling;y!==null;)Ig(y,_,N),y=y.sibling}function jd(y,_,N){y=y.containerInfo;try{$C(y,N)}catch(z){bi(_,_.return,z)}}function L1(y,_){for(bC(y.containerInfo),ci=_;ci!==null;)if(y=ci,_=y.child,(y.subtreeFlags&1028)!==0&&_!==null)_.return=y,ci=_;else for(;ci!==null;){y=ci;var N=y.alternate;switch(_=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if(_&1024&&N!==null){_=void 0;var z=y,W=N.memoizedProps;N=N.memoizedState;var J=z.stateNode;try{var be=xu(z.type,W,z.elementType===z.type);_=J.getSnapshotBeforeUpdate(be,N),J.__reactInternalSnapshotBeforeUpdate=_}catch(Ue){bi(z,z.return,Ue)}}break;case 3:_&1024&&Os&&HC(y.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(_&1024)throw Error(r(163))}if(_=y.sibling,_!==null){_.return=y.return,ci=_;break}ci=y.return}return be=us,us=!1,be}function Jp(y,_,N){var z=N.flags;switch(N.tag){case 0:case 11:case 15:Mf(y,N),z&4&&Zp(5,N);break;case 1:if(Mf(y,N),z&4)if(y=N.stateNode,_===null)try{y.componentDidMount()}catch(Ue){bi(N,N.return,Ue)}else{var W=xu(N.type,_.memoizedProps);_=_.memoizedState;try{y.componentDidUpdate(W,_,y.__reactInternalSnapshotBeforeUpdate)}catch(Ue){bi(N,N.return,Ue)}}z&64&&Ng(N),z&512&&Fc(N,N.return);break;case 3:if(Mf(y,N),z&64&&(z=N.updateQueue,z!==null)){if(y=null,N.child!==null)switch(N.child.tag){case 27:case 5:y=Ih(N.child.stateNode);break;case 1:y=N.child.stateNode}try{tn(z,y)}catch(Ue){bi(N,N.return,Ue)}}break;case 26:if(Hc){Mf(y,N),z&512&&Fc(N,N.return);break}case 27:case 5:Mf(y,N),_===null&&z&4&&Bg(N),z&512&&Fc(N,N.return);break;case 12:Mf(y,N);break;case 13:Mf(y,N),z&4&&wf(y,N);break;case 22:if(W=N.memoizedState!==null||ap,!W){_=_!==null&&_.memoizedState!==null||Ri;var J=ap,be=Ri;ap=W,(Ri=_)&&!be?Mh(y,N,(N.subtreeFlags&8772)!==0):Mf(y,N),ap=J,Ri=be}z&512&&(N.memoizedProps.mode==="manual"?Fc(N,N.return):$a(N,N.return));break;default:Mf(y,N)}}function Og(y){var _=y.alternate;_!==null&&(y.alternate=null,Og(_)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(_=y.stateNode,_!==null&&EC(_)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Zl(y,_,N){for(N=N.child;N!==null;)Ef(y,_,N),N=N.sibling}function Ef(y,_,N){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount($g,N)}catch{}switch(N.tag){case 26:if(Hc){Ri||$a(N,_),Zl(y,_,N),N.memoizedState?zT(N.memoizedState):N.stateNode&&Hg(N.stateNode);break}case 27:if(Ra){Ri||$a(N,_);var z=Cr,W=To;Cr=N.stateNode,Zl(y,_,N),WT(N.stateNode),Cr=z,To=W;break}case 5:Ri||$a(N,_);case 6:if(Os){if(z=Cr,W=To,Cr=null,Zl(y,_,N),Cr=z,To=W,Cr!==null)if(To)try{kC(Cr,N.stateNode)}catch(J){bi(N,_,J)}else try{UC(Cr,N.stateNode)}catch(J){bi(N,_,J)}}else Zl(y,_,N);break;case 18:Os&&Cr!==null&&(To?FT(Cr,N.stateNode):eR(Cr,N.stateNode));break;case 4:Os?(z=Cr,W=To,Cr=N.stateNode.containerInfo,To=!0,Zl(y,_,N),Cr=z,To=W):(Pf&&jd(N.stateNode,N,Fb()),Zl(y,_,N));break;case 0:case 11:case 14:case 15:Ri||Eh(2,N,_),Ri||Eh(4,N,_),Zl(y,_,N);break;case 1:Ri||($a(N,_),z=N.stateNode,typeof z.componentWillUnmount=="function"&&al(N,_,z)),Zl(y,_,N);break;case 21:Zl(y,_,N);break;case 22:Ri||$a(N,_),Ri=(z=Ri)||N.memoizedState!==null,Zl(y,_,N),Ri=z;break;default:Zl(y,_,N)}}function wf(y,_){if(tc&&_.memoizedState===null&&(y=_.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{Gb(y)}catch(N){bi(_,_.return,N)}}function Fg(y){switch(y.tag){case 13:case 19:var _=y.stateNode;return _===null&&(_=y.stateNode=new ir),_;case 22:return y=y.stateNode,_=y._retryCache,_===null&&(_=y._retryCache=new ir),_;default:throw Error(r(435,y.tag))}}function e0(y,_){var N=Fg(y);_.forEach(function(z){var W=go.bind(null,y,z);N.has(z)||(N.add(z),z.then(W,W))})}function to(y,_){var N=_.deletions;if(N!==null)for(var z=0;z<N.length;z++){var W=N[z],J=y,be=_;if(Os){var Ue=be;e:for(;Ue!==null;){switch(Ue.tag){case 27:case 5:Cr=Ue.stateNode,To=!1;break e;case 3:Cr=Ue.stateNode.containerInfo,To=!0;break e;case 4:Cr=Ue.stateNode.containerInfo,To=!0;break e}Ue=Ue.return}if(Cr===null)throw Error(r(160));Ef(J,be,W),Cr=null,To=!1}else Ef(J,be,W);J=W.alternate,J!==null&&(J.return=null),W.return=null}if(_.subtreeFlags&13878)for(_=_.child;_!==null;)P1(_,y),_=_.sibling}function P1(y,_){var N=y.alternate,z=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:to(_,y),ll(y),z&4&&(Eh(3,y,y.return),Zp(3,y),Eh(5,y,y.return));break;case 1:to(_,y),ll(y),z&512&&(Ri||N===null||$a(N,N.return)),z&64&&ap&&(y=y.updateQueue,y!==null&&(z=y.callbacks,z!==null&&(N=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=N===null?z:N.concat(z))));break;case 26:if(Hc){var W=Al;to(_,y),ll(y),z&512&&(Ri||N===null||$a(N,N.return)),z&4&&(z=N!==null?N.memoizedState:null,_=y.memoizedState,N===null?_===null?y.stateNode===null?y.stateNode=nR(W,y.type,y.memoizedProps,y):HT(W,y.type,y.stateNode):y.stateNode=GT(W,_,y.memoizedProps):z!==_?(z===null?N.stateNode!==null&&Hg(N.stateNode):zT(z),_===null?HT(W,y.type,y.stateNode):GT(W,_,y.memoizedProps)):_===null&&y.stateNode!==null&&qd(y,y.memoizedProps,N.memoizedProps));break}case 27:if(Ra&&z&4&&y.alternate===null){W=y.stateNode;var J=y.memoizedProps;try{sR(W),jT(y.type,J,W,y)}catch(cn){bi(y,y.return,cn)}}case 5:if(to(_,y),ll(y),z&512&&(Ri||N===null||$a(N,N.return)),Os){if(y.flags&32){_=y.stateNode;try{Ob(_)}catch(cn){bi(y,y.return,cn)}}z&4&&y.stateNode!=null&&(_=y.memoizedProps,qd(y,_,N!==null?N.memoizedProps:_)),z&1024&&(ts=!0)}break;case 6:if(to(_,y),ll(y),z&4&&Os){if(y.stateNode===null)throw Error(r(162));z=y.memoizedProps,N=N!==null?N.memoizedProps:z,_=y.stateNode;try{BC(_,N,z)}catch(cn){bi(y,y.return,cn)}}break;case 3:if(Hc?(iR(),W=Al,Al=aa(_.containerInfo),to(_,y),Al=W):to(_,y),ll(y),z&4){if(Os&&tc&&N!==null&&N.memoizedState.isDehydrated)try{JC(_.containerInfo)}catch(cn){bi(y,y.return,cn)}if(Pf){z=_.containerInfo,N=_.pendingChildren;try{$C(z,N)}catch(cn){bi(y,y.return,cn)}}}ts&&(ts=!1,N1(y));break;case 4:Hc?(N=Al,Al=aa(y.stateNode.containerInfo),to(_,y),ll(y),Al=N):(to(_,y),ll(y)),z&4&&Pf&&jd(y.stateNode,y,y.stateNode.pendingChildren);break;case 12:to(_,y),ll(y);break;case 13:to(_,y),ll(y),y.child.flags&8192&&y.memoizedState!==null!=(N!==null&&N.memoizedState!==null)&&(ZT=Vc()),z&4&&(z=y.updateQueue,z!==null&&(y.updateQueue=null,e0(y,z)));break;case 22:z&512&&(Ri||N===null||$a(N,N.return)),W=y.memoizedState!==null;var be=N!==null&&N.memoizedState!==null,Ue=ap,nt=Ri;if(ap=Ue||W,Ri=nt||be,to(_,y),Ri=nt,ap=Ue,ll(y),_=y.stateNode,_._current=y,_._visibility&=-3,_._visibility|=_._pendingVisibility&2,z&8192&&(_._visibility=W?_._visibility&-2:_._visibility|1,W&&(_=ap||Ri,N===null||be||_||t0(y)),Os&&(y.memoizedProps===null||y.memoizedProps.mode!=="manual"))){e:if(N=null,Os)for(_=y;;){if(_.tag===5||Hc&&_.tag===26||Ra&&_.tag===27){if(N===null){be=N=_;try{J=be.stateNode,W?GC(J):sB(be.stateNode,be.memoizedProps)}catch(cn){bi(be,be.return,cn)}}}else if(_.tag===6){if(N===null){be=_;try{var Ot=be.stateNode;W?zC(Ot):PT(Ot,be.memoizedProps)}catch(cn){bi(be,be.return,cn)}}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===y)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break e;for(;_.sibling===null;){if(_.return===null||_.return===y)break e;N===_&&(N=null),_=_.return}N===_&&(N=null),_.sibling.return=_.return,_=_.sibling}}z&4&&(z=y.updateQueue,z!==null&&(N=z.retryQueue,N!==null&&(z.retryQueue=null,e0(y,N))));break;case 19:to(_,y),ll(y),z&4&&(z=y.updateQueue,z!==null&&(y.updateQueue=null,e0(y,z)));break;case 21:break;default:to(_,y),ll(y)}}function ll(y){var _=y.flags;if(_&2){try{if(Os&&(!Ra||y.tag!==27)){e:{for(var N=y.return;N!==null;){if(wh(N)){var z=N;break e}N=N.return}throw Error(r(160))}switch(z.tag){case 27:if(Ra){var W=z.stateNode,J=HA(y);Ig(y,J,W);break}case 5:var be=z.stateNode;z.flags&32&&(Ob(be),z.flags&=-33);var Ue=HA(y);Ig(y,Ue,be);break;case 3:case 4:var nt=z.stateNode.containerInfo,Ot=HA(y);$d(y,Ot,nt);break;default:throw Error(r(161))}}}catch(cn){bi(y,y.return,cn)}y.flags&=-3}_&4096&&(y.flags&=-4097)}function N1(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var _=y;N1(_),_.tag===5&&_.flags&1024&&MC(_.stateNode),y=y.sibling}}function Mf(y,_){if(_.subtreeFlags&8772)for(_=_.child;_!==null;)Jp(y,_.alternate,_),_=_.sibling}function t0(y){for(y=y.child;y!==null;){var _=y;switch(_.tag){case 0:case 11:case 14:case 15:Eh(4,_,_.return),t0(_);break;case 1:$a(_,_.return);var N=_.stateNode;typeof N.componentWillUnmount=="function"&&al(_,_.return,N),t0(_);break;case 26:case 27:case 5:$a(_,_.return),t0(_);break;case 22:$a(_,_.return),_.memoizedState===null&&t0(_);break;default:t0(_)}y=y.sibling}}function Mh(y,_,N){for(N=N&&(_.subtreeFlags&8772)!==0,_=_.child;_!==null;){var z=_.alternate,W=y,J=_,be=J.flags;switch(J.tag){case 0:case 11:case 15:Mh(W,J,N),Zp(4,J);break;case 1:if(Mh(W,J,N),z=J,W=z.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch(Ot){bi(z,z.return,Ot)}if(z=J,W=z.updateQueue,W!==null){var Ue=z.stateNode;try{var nt=W.shared.hiddenCallbacks;if(nt!==null)for(W.shared.hiddenCallbacks=null,W=0;W<nt.length;W++)Te(nt[W],Ue)}catch(Ot){bi(z,z.return,Ot)}}N&&be&64&&Ng(J),Fc(J,J.return);break;case 26:case 27:case 5:Mh(W,J,N),N&&z===null&&be&4&&Bg(J),Fc(J,J.return);break;case 12:Mh(W,J,N);break;case 13:Mh(W,J,N),N&&be&4&&wf(W,J);break;case 22:J.memoizedState===null&&Mh(W,J,N),Fc(J,J.return);break;default:Mh(W,J,N)}_=_.sibling}}function VA(y,_){var N=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(N=y.memoizedState.cachePool.pool),y=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(y=_.memoizedState.cachePool.pool),y!==N&&(y!=null&&y.refCount++,N!=null&&kA(N))}function Ug(y,_){y=null,_.alternate!==null&&(y=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==y&&(_.refCount++,y!=null&&kA(y))}function _u(y,_,N,z){if(_.subtreeFlags&10256)for(_=_.child;_!==null;)no(y,_,N,z),_=_.sibling}function no(y,_,N,z){var W=_.flags;switch(_.tag){case 0:case 11:case 15:_u(y,_,N,z),W&2048&&Zp(9,_);break;case 3:_u(y,_,N,z),W&2048&&(y=null,_.alternate!==null&&(y=_.alternate.memoizedState.cache),_=_.memoizedState.cache,_!==y&&(_.refCount++,y!=null&&kA(y)));break;case 12:if(W&2048){_u(y,_,N,z),y=_.stateNode;try{var J=_.memoizedProps,be=J.id,Ue=J.onPostCommit;typeof Ue=="function"&&Ue(be,_.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(nt){bi(_,_.return,nt)}}else _u(y,_,N,z);break;case 23:break;case 22:J=_.stateNode,_.memoizedState!==null?J._visibility&4?_u(y,_,N,z):Su(y,_):J._visibility&4?_u(y,_,N,z):(J._visibility|=4,Go(y,_,N,z,(_.subtreeFlags&10256)!==0)),W&2048&&VA(_.alternate,_);break;case 24:_u(y,_,N,z),W&2048&&Ug(_.alternate,_);break;default:_u(y,_,N,z)}}function Go(y,_,N,z,W){for(W=W&&(_.subtreeFlags&10256)!==0,_=_.child;_!==null;){var J=y,be=_,Ue=N,nt=z,Ot=be.flags;switch(be.tag){case 0:case 11:case 15:Go(J,be,Ue,nt,W),Zp(8,be);break;case 23:break;case 22:var cn=be.stateNode;be.memoizedState!==null?cn._visibility&4?Go(J,be,Ue,nt,W):Su(J,be):(cn._visibility|=4,Go(J,be,Ue,nt,W)),W&&Ot&2048&&VA(be.alternate,be);break;case 24:Go(J,be,Ue,nt,W),W&&Ot&2048&&Ug(be.alternate,be);break;default:Go(J,be,Ue,nt,W)}_=_.sibling}}function Su(y,_){if(_.subtreeFlags&10256)for(_=_.child;_!==null;){var N=y,z=_,W=z.flags;switch(z.tag){case 22:Su(N,z),W&2048&&VA(z.alternate,z);break;case 24:Su(N,z),W&2048&&Ug(z.alternate,z);break;default:Su(N,z)}_=_.sibling}}function Cf(y){if(y.subtreeFlags&v0)for(y=y.child;y!==null;)qA(y),y=y.sibling}function qA(y){switch(y.tag){case 26:Cf(y),y.flags&v0&&(y.memoizedState!==null?$T(Al,y.memoizedState,y.memoizedProps):RT(y.type,y.memoizedProps));break;case 5:Cf(y),y.flags&v0&&RT(y.type,y.memoizedProps);break;case 3:case 4:if(Hc){var _=Al;Al=aa(y.stateNode.containerInfo),Cf(y),Al=_}else Cf(y);break;case 22:y.memoizedState===null&&(_=y.alternate,_!==null&&_.memoizedState!==null?(_=v0,v0=16777216,Cf(y),v0=_):Cf(y));break;default:Cf(y)}}function $A(y){var _=y.alternate;if(_!==null&&(y=_.child,y!==null)){_.child=null;do _=y.sibling,y.sibling=null,y=_;while(y!==null)}}function Wd(y){var _=y.deletions;if(y.flags&16){if(_!==null)for(var N=0;N<_.length;N++){var z=_[N];ci=z,i0(z,y)}$A(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Ea(y),y=y.sibling}function Ea(y){switch(y.tag){case 0:case 11:case 15:Wd(y),y.flags&2048&&Eh(9,y,y.return);break;case 3:Wd(y);break;case 12:Wd(y);break;case 22:var _=y.stateNode;y.memoizedState!==null&&_._visibility&4&&(y.return===null||y.return.tag!==13)?(_._visibility&=-5,n0(y)):Wd(y);break;default:Wd(y)}}function n0(y){var _=y.deletions;if(y.flags&16){if(_!==null)for(var N=0;N<_.length;N++){var z=_[N];ci=z,i0(z,y)}$A(y)}for(y=y.child;y!==null;){switch(_=y,_.tag){case 0:case 11:case 15:Eh(8,_,_.return),n0(_);break;case 22:N=_.stateNode,N._visibility&4&&(N._visibility&=-5,n0(_));break;default:n0(_)}y=y.sibling}}function i0(y,_){for(;ci!==null;){var N=ci;switch(N.tag){case 0:case 11:case 15:Eh(8,N,_);break;case 23:case 22:if(N.memoizedState!==null&&N.memoizedState.cachePool!==null){var z=N.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:kA(N.memoizedState.cache)}if(z=N.child,z!==null)z.return=N,ci=z;else e:for(N=y;ci!==null;){z=ci;var W=z.sibling,J=z.return;if(Og(z),z===N){ci=null;break e}if(W!==null){W.return=J,ci=W;break e}ci=J}}}function Ch(y){var _=Nb(y);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(r(364));return _}if(y=DC(y),y===null)throw Error(r(362));return y.stateNode.current}function kg(y,_){var N=y.tag;switch(_.$$typeof){case ws:if(y.type===_.value)return!0;break;case kf:e:{for(_=_.value,y=[y,0],N=0;N<y.length;){var z=y[N++],W=z.tag,J=y[N++],be=_[J];if(W!==5&&W!==26&&W!==27||!Oh(z)){for(;be!=null&&kg(z,be);)J++,be=_[J];if(J===_.length){_=!0;break e}else for(z=z.child;z!==null;)y.push(z,J),z=z.sibling}}_=!1}return _;case Hh:if((N===5||N===26||N===27)&&PC(y.stateNode,_.value))return!0;break;case Il:if((N===5||N===6||N===26||N===27)&&(y=LC(y),y!==null&&0<=y.indexOf(_.value)))return!0;break;case Qg:if((N===5||N===26||N===27)&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function cl(y){switch(y.$$typeof){case ws:return"<"+(o(y.value)||"Unknown")+">";case kf:return":has("+(cl(y)||"")+")";case Hh:return'[role="'+y.value+'"]';case Il:return'"'+y.value+'"';case Qg:return'[data-testname="'+y.value+'"]';default:throw Error(r(365))}}function Kd(y,_){var N=[];y=[y,0];for(var z=0;z<y.length;){var W=y[z++],J=W.tag,be=y[z++],Ue=_[be];if(J!==5&&J!==26&&J!==27||!Oh(W)){for(;Ue!=null&&kg(W,Ue);)be++,Ue=_[be];if(be===_.length)N.push(W);else for(W=W.child;W!==null;)y.push(W,be),W=W.sibling}}return N}function Rh(y,_){if(!zg)throw Error(r(363));y=Ch(y),y=Kd(y,_),_=[],y=Array.from(y);for(var N=0;N<y.length;){var z=y[N++],W=z.tag;if(W===5||W===26||W===27)Oh(z)||_.push(z.stateNode);else for(z=z.child;z!==null;)y.push(z),z=z.sibling}return _}function wa(){if(sr&2&&or!==0)return or&-or;if(bn.T!==null){var y=Es;return y!==0?y:sn()}return SC()}function jA(){jc===0&&(jc=!(or&536870912)||br?q():536870912);var y=rc.current;return y!==null&&(y.flags|=32),jc}function Jr(y,_,N){(y===ns&&Hr===2||y.cancelPendingCommit!==null)&&(Dh(y,0),Ma(y,or,jc,!1)),$(y,N),(!(sr&2)||y!==ns)&&(y===ns&&(!(sr&2)&&(cp|=N),Us===4&&Ma(y,or,jc,!1)),Gt(y))}function Dl(y,_,N){if(sr&6)throw Error(r(327));var z=!N&&(_&60)===0&&(_&y.expiredLanes)===0||F(y,_),W=z?B1(y,_):r0(y,_,!0),J=z;do{if(W===0){Iu&&!z&&Ma(y,_,0,!1);break}else if(W===6)Ma(y,_,0,!Bu);else{if(N=y.current.alternate,J&&!Eu(N)){W=r0(y,_,!1),J=!1;continue}if(W===2){if(J=_,y.errorRecoveryDisabledLanes&J)var be=0;else be=y.pendingLanes&-536870913,be=be!==0?be:be&536870912?536870912:0;if(be!==0){_=be;e:{var Ue=y;W=Zg;var nt=tc&&Ue.current.memoizedState.isDehydrated;if(nt&&(Dh(Ue,be).flags|=256),be=r0(Ue,be,!1),be!==2){if(sm&&!nt){Ue.errorRecoveryDisabledLanes|=J,cp|=J,W=4;break e}J=Fu,Fu=W,J!==null&&Rf(J)}W=be}if(J=!1,W!==2)continue}}if(W===1){Dh(y,0),Ma(y,_,0,!0);break}e:{switch(z=y,W){case 0:case 1:throw Error(r(345));case 4:if((_&4194176)===_){Ma(z,_,jc,!Bu);break e}break;case 2:Fu=null;break;case 3:case 5:break;default:throw Error(r(329))}if(z.finishedWork=N,z.finishedLanes=_,(_&62914560)===_&&(J=ZT+300-Vc(),10<J)){if(Ma(z,_,jc,!Bu),I(z,0)!==0)break e;z.timeoutHandle=Pb(Tu.bind(null,z,N,Fu,om,Qb,_,jc,cp,qo,Bu,2,-0,0),J);break e}Tu(z,N,Fu,om,Qb,_,jc,cp,qo,Bu,0,-0,0)}}break}while(!0);Gt(y)}function Rf(y){Fu===null?Fu=y:Fu.push.apply(Fu,y)}function Tu(y,_,N,z,W,J,be,Ue,nt,Ot,cn,Rn,ln){var Di=_.subtreeFlags;if((Di&8192||(Di&16785408)===16785408)&&(iB(),qA(_),_=wC(),_!==null)){y.cancelPendingCommit=_(Uc.bind(null,y,N,z,W,be,Ue,nt,1,Rn,ln)),Ma(y,J,be,!Ot);return}Uc(y,N,z,W,be,Ue,nt,cn,Rn,ln)}function Eu(y){for(var _=y;;){var N=_.tag;if((N===0||N===11||N===15)&&_.flags&16384&&(N=_.updateQueue,N!==null&&(N=N.stores,N!==null)))for(var z=0;z<N.length;z++){var W=N[z],J=W.getSnapshot;W=W.value;try{if(!Pl(J(),W))return!1}catch{return!1}}if(N=_.child,_.subtreeFlags&16384&&N!==null)N.return=_,_=N;else{if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ma(y,_,N,z){_&=~Ol,_&=~cp,y.suspendedLanes|=_,y.pingedLanes&=~_,z&&(y.warmLanes|=_),z=y.expirationTimes;for(var W=_;0<W;){var J=31-vo(W),be=1<<J;z[J]=-1,W&=~be}N!==0&&Y(y,N,_)}function Is(){return sr&6?!0:(Se(0),!1)}function WA(){if(Yi!==null){if(Hr===0)var y=Yi.return;else y=Yi,Nu=y0=null,Nc(y),nm=null,pl=0,y=Yi;for(;y!==null;)Db(y.alternate,y),y=y.return;Yi=null}}function Dh(y,_){y.finishedWork=null,y.finishedLanes=0;var N=y.timeoutHandle;N!==Gg&&(y.timeoutHandle=Gg,U1(N)),N=y.cancelPendingCommit,N!==null&&(y.cancelPendingCommit=null,N()),WA(),ns=y,Yi=N=jt(y.current,null),or=_,Hr=0,Vo=null,Bu=!1,Iu=F(y,_),sm=!1,qo=jc=Ol=cp=Ou=Us=0,Fu=Zg=null,Qb=!1,_&8&&(_|=_&32);var z=y.entangledLanes;if(z!==0)for(y=y.entanglements,z&=_;0<z;){var W=31-vo(z),J=1<<W;_|=y[W],z&=~J}return Gf=_,we(),N}function io(y,_){Ci=null,bn.H=So,_===q1?(_=Nn(),Hr=3):_===$1?(_=Nn(),Hr=4):Hr=_===XT?8:_!==null&&typeof _=="object"&&typeof _.then=="function"?6:1,Vo=_,Yi===null&&(Us=1,_f(y,de(_,y.current)))}function Pr(){var y=rc.current;return y===null?!0:(or&4194176)===or?Lu===null:(or&62914560)===or||or&536870912?y===Lu:!1}function Ar(){var y=bn.H;return bn.H=So,y===null?So:y}function Jl(){var y=bn.A;return bn.A=lp,y}function ec(){Us=4,Bu||(or&4194176)!==or&&rc.current!==null||(Iu=!0),!(Ou&134217727)&&!(cp&134217727)||ns===null||Ma(ns,or,jc,!1)}function r0(y,_,N){var z=sr;sr|=2;var W=Ar(),J=Jl();(ns!==y||or!==_)&&(om=null,Dh(y,_)),_=!1;var be=Us;e:do try{if(Hr!==0&&Yi!==null){var Ue=Yi,nt=Vo;switch(Hr){case 8:WA(),be=6;break e;case 3:case 2:case 6:rc.current===null&&(_=!0);var Ot=Hr;if(Hr=0,Vo=null,wu(y,Ue,nt,Ot),N&&Iu){be=0;break e}break;default:Ot=Hr,Hr=0,Vo=null,wu(y,Ue,nt,Ot)}}Lh(),be=Us;break}catch(cn){io(y,cn)}while(!0);return _&&y.shellSuspendCounter++,Nu=y0=null,sr=z,bn.H=W,bn.A=J,Yi===null&&(ns=null,or=0,we()),be}function Lh(){for(;Yi!==null;)s0(Yi)}function B1(y,_){var N=sr;sr|=2;var z=Ar(),W=Jl();ns!==y||or!==_?(om=null,Wc=Vc()+500,Dh(y,_)):Iu=F(y,_);e:do try{if(Hr!==0&&Yi!==null){_=Yi;var J=Vo;t:switch(Hr){case 1:Hr=0,Vo=null,wu(y,_,J,1);break;case 2:if(Lt(J)){Hr=0,Vo=null,o0(_);break}_=function(){Hr===2&&ns===y&&(Hr=7),Gt(y)},J.then(_,_);break e;case 3:Hr=7;break e;case 4:Hr=5;break e;case 7:Lt(J)?(Hr=0,Vo=null,o0(_)):(Hr=0,Vo=null,wu(y,_,J,7));break;case 5:var be=null;switch(Yi.tag){case 26:be=Yi.memoizedState;case 5:case 27:var Ue=Yi,nt=Ue.type,Ot=Ue.pendingProps;if(be?qT(be):CT(nt,Ot)){Hr=0,Vo=null;var cn=Ue.sibling;if(cn!==null)Yi=cn;else{var Rn=Ue.return;Rn!==null?(Yi=Rn,Ph(Rn)):Yi=null}break t}}Hr=0,Vo=null,wu(y,_,J,5);break;case 6:Hr=0,Vo=null,wu(y,_,J,6);break;case 8:WA(),Us=6;break e;default:throw Error(r(462))}}I1();break}catch(ln){io(y,ln)}while(!0);return Nu=y0=null,bn.H=z,bn.A=W,sr=N,Yi!==null?0:(ns=null,or=0,we(),Us)}function I1(){for(;Yi!==null&&!u0();)s0(Yi)}function s0(y){var _=Gd(y.alternate,y,Gf);y.memoizedProps=y.pendingProps,_===null?Ph(y):Yi=_}function o0(y){var _=y,N=_.alternate;switch(_.tag){case 15:case 0:_=Tb(N,_,_.pendingProps,_.type,void 0,or);break;case 11:_=Tb(N,_,_.pendingProps,_.type.render,_.ref,or);break;case 5:Nc(_);default:Db(N,_),_=Yi=un(_,Gf),_=Gd(N,_,Gf)}y.memoizedProps=y.pendingProps,_===null?Ph(y):Yi=_}function wu(y,_,N,z){Nu=y0=null,Nc(_),nm=null,pl=0;var W=_.return;try{if(kd(y,W,_,N,or)){Us=1,_f(y,de(N,y.current)),Yi=null;return}}catch(J){if(W!==null)throw Yi=W,J;Us=1,_f(y,de(N,y.current)),Yi=null;return}_.flags&32768?(br||z===1?y=!0:Iu||or&536870912?y=!1:(Bu=y=!0,(z===2||z===3||z===6)&&(z=rc.current,z!==null&&z.tag===13&&(z.flags|=16384))),O1(_,y)):Ph(_)}function Ph(y){var _=y;do{if(_.flags&32768){O1(_,Bu);return}y=_.return;var N=Qp(_.alternate,_,Gf);if(N!==null){Yi=N;return}if(_=_.sibling,_!==null){Yi=_;return}Yi=_=y}while(_!==null);Us===0&&(Us=5)}function O1(y,_){do{var N=zA(y.alternate,y);if(N!==null){N.flags&=32767,Yi=N;return}if(N=y.return,N!==null&&(N.flags|=32768,N.subtreeFlags=0,N.deletions=null),!_&&(y=y.sibling,y!==null)){Yi=y;return}Yi=y=N}while(y!==null);Us=6,Yi=null}function Uc(y,_,N,z,W,J,be,Ue,nt,Ot){var cn=bn.T,Rn=a0();try{Ll(2),bn.T=null,kc(y,_,N,z,Rn,W,J,be,Ue,nt,Ot)}finally{bn.T=cn,Ll(Rn)}}function kc(y,_,N,z,W,J,be,Ue){do sa();while(x0!==null);if(sr&6)throw Error(r(327));var nt=y.finishedWork;if(z=y.finishedLanes,nt===null)return null;if(y.finishedWork=null,y.finishedLanes=0,nt===y.current)throw Error(r(177));y.callbackNode=null,y.callbackPriority=0,y.cancelPendingCommit=null;var Ot=nt.lanes|nt.childLanes;if(Ot|=Of,ee(y,z,Ot,J,be,Ue),y===ns&&(Yi=ns=null,or=0),!(nt.subtreeFlags&10256)&&!(nt.flags&10256)||up||(up=!0,Zb=Ot,Y1=N,YA(qg,function(){return sa(),null})),N=(nt.flags&15990)!==0,nt.subtreeFlags&15990||N?(N=bn.T,bn.T=null,J=a0(),Ll(2),be=sr,sr|=4,L1(y,nt),P1(nt,y),nB(y.containerInfo),y.current=nt,Jp(y,nt.alternate,nt),ep(),sr=be,Ll(J),bn.T=N):y.current=nt,up?(up=!1,x0=y,Jg=z):ii(y,Ot),Ot=y.pendingLanes,Ot===0&&(qh=null),Q(nt.stateNode),Gt(y),_!==null)for(W=y.onRecoverableError,nt=0;nt<_.length;nt++)Ot=_[nt],W(Ot.value,{componentStack:Ot.stack});return Jg&3&&sa(),Ot=y.pendingLanes,z&4194218&&Ot&42?y===JT?am++:(am=0,JT=y):am=0,Se(0),null}function ii(y,_){(y.pooledCacheLanes&=_)===0&&(_=y.pooledCache,_!=null&&(y.pooledCache=null,kA(_)))}function sa(){if(x0!==null){var y=x0,_=Zb;Zb=0;var N=re(Jg),z=32>N?32:N;N=bn.T;var W=a0();try{if(Ll(z),bn.T=null,x0===null)var J=!1;else{z=Y1,Y1=null;var be=x0,Ue=Jg;if(x0=null,Jg=0,sr&6)throw Error(r(331));var nt=sr;if(sr|=4,Ea(be.current),no(be,be.current,Ue,z),sr=nt,Se(0,!1),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot($g,be)}catch{}J=!0}return J}finally{Ll(W),bn.T=N,ii(y,_)}}return!1}function Ti(y,_,N){_=de(N,_),_=Ud(y.stateNode,_,2),y=pn(y,_,2),y!==null&&($(y,2),Gt(y))}function bi(y,_,N){if(y.tag===3)Ti(y,y,N);else for(;_!==null;){if(_.tag===3){Ti(_,y,N);break}else if(_.tag===1){var z=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(qh===null||!qh.has(z))){y=de(N,y),N=Mg(2),z=pn(_,N,2),z!==null&&(IA(N,z,_,y),$(z,2),Gt(z));break}}_=_.return}}function Df(y,_,N){var z=y.pingCache;if(z===null){z=y.pingCache=new K1;var W=new Set;z.set(_,W)}else W=z.get(_),W===void 0&&(W=new Set,z.set(_,W));W.has(N)||(sm=!0,W.add(N),y=Yd.bind(null,y,_,N),_.then(y,y))}function Yd(y,_,N){var z=y.pingCache;z!==null&&z.delete(_),y.pingedLanes|=y.suspendedLanes&N,y.warmLanes&=~N,ns===y&&(or&N)===N&&(Us===4||Us===3&&(or&62914560)===or&&300>Vc()-ZT?!(sr&2)&&Dh(y,0):Ol|=N,qo===or&&(qo=0)),Gt(y)}function Gc(y,_){_===0&&(_=H()),y=Dt(y,_),y!==null&&($(y,_),Gt(y))}function KA(y){var _=y.memoizedState,N=0;_!==null&&(N=_.retryLane),Gc(y,N)}function go(y,_){var N=0;switch(y.tag){case 13:var z=y.stateNode,W=y.memoizedState;W!==null&&(N=W.retryLane);break;case 19:z=y.stateNode;break;case 22:z=y.stateNode._retryCache;break;default:throw Error(r(314))}z!==null&&z.delete(_),Gc(y,N)}function YA(y,_){return Uh(y,_)}function Xd(y,_,N,z){this.tag=y,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(y){return y=y.prototype,!(!y||!y.isReactComponent)}function jt(y,_){var N=y.alternate;return N===null?(N=t(y.tag,_,y.key,y.mode),N.elementType=y.elementType,N.type=y.type,N.stateNode=y.stateNode,N.alternate=y,y.alternate=N):(N.pendingProps=_,N.type=y.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=y.flags&31457280,N.childLanes=y.childLanes,N.lanes=y.lanes,N.child=y.child,N.memoizedProps=y.memoizedProps,N.memoizedState=y.memoizedState,N.updateQueue=y.updateQueue,_=y.dependencies,N.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},N.sibling=y.sibling,N.index=y.index,N.ref=y.ref,N.refCleanup=y.refCleanup,N}function un(y,_){y.flags&=31457282;var N=y.alternate;return N===null?(y.childLanes=0,y.lanes=_,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=N.childLanes,y.lanes=N.lanes,y.child=N.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=N.memoizedProps,y.memoizedState=N.memoizedState,y.updateQueue=N.updateQueue,y.type=N.type,_=N.dependencies,y.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),y}function Nh(y,_,N,z,W,J){var be=0;if(z=y,typeof y=="function")Mu(y)&&(be=1);else if(typeof y=="string")be=Hc&&Ra?oa(y,N,xo.current)?26:Hb(y)?27:5:Hc?oa(y,N,xo.current)?26:5:Ra&&Hb(y)?27:5;else e:switch(y){case Le:return Cu(N.children,W,J,_);case ke:be=8,W|=24;break;case Re:return y=t(12,N,_,W|2),y.elementType=Re,y.lanes=J,y;case rt:return y=t(13,N,_,W),y.elementType=rt,y.lanes=J,y;case je:return y=t(19,N,_,W),y.elementType=je,y.lanes=J,y;case an:return Qd(N,W,J,_);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case Ke:case gt:be=10;break e;case Et:be=9;break e;case ot:be=11;break e;case gn:be=14;break e;case Tn:be=16,z=null;break e}be=29,N=Error(r(130,y===null?"null":typeof y,"")),z=null}return _=t(be,N,_,W),_.elementType=y,_.type=z,_.lanes=J,_}function Cu(y,_,N,z){return y=t(7,y,z,_),y.lanes=N,y}function Qd(y,_,N,z){y=t(22,y,z,_),y.elementType=an,y.lanes=N;var W={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var J=W._current;if(J===null)throw Error(r(456));if(!(W._pendingVisibility&2)){var be=Dt(J,2);be!==null&&(W._pendingVisibility|=2,Jr(be,J,2))}},attach:function(){var J=W._current;if(J===null)throw Error(r(456));if(W._pendingVisibility&2){var be=Dt(J,2);be!==null&&(W._pendingVisibility&=-3,Jr(be,J,2))}}};return y.stateNode=W,y}function Bh(y,_,N){return y=t(6,y,null,_),y.lanes=N,y}function ro(y,_,N){return _=t(4,y.children!==null?y.children:[],y.key,_),_.lanes=N,_.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},_}function zc(y,_,N,z,W,J,be,Ue){this.tag=1,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Gg,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=z,this.onUncaughtError=W,this.onCaughtError=J,this.onRecoverableError=be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ue,this.incompleteTransitions=new Map}function Ca(y,_,N,z,W,J,be,Ue,nt,Ot,cn,Rn){return y=new zc(y,_,N,be,Ue,nt,Ot,Rn),_=1,J===!0&&(_|=24),J=t(3,null,null,_),y.current=J,J.stateNode=y,_=_h(),_.refCount++,y.pooledCache=_,_.refCount++,J.memoizedState={element:z,isDehydrated:N,cache:_},Vt(J),y}function x(y){return y?(y=em,y):em}function v(y){var _=y._reactInternals;if(_===void 0)throw typeof y.render=="function"?Error(r(188)):(y=Object.keys(y).join(","),Error(r(268,y)));return y=p(_),y=y!==null?m(y):null,y===null?null:Ih(y.stateNode)}function E(y,_,N,z,W,J){W=x(W),z.context===null?z.context=W:z.pendingContext=W,z=En(_),z.payload={element:N},J=J===void 0?null:J,J!==null&&(z.callback=J),N=pn(y,z,_),N!==null&&(Jr(N,y,_),Sn(N,y,_))}function M(y,_){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var N=y.retryLane;y.retryLane=N!==0&&N<_?N:_}}function L(y,_){M(y,_),(y=y.alternate)&&M(y,_)}var B={},U=YS(),V=P7(),K=Object.assign,te=Symbol.for("react.element"),ue=Symbol.for("react.transitional.element"),_e=Symbol.for("react.portal"),Le=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),Re=Symbol.for("react.profiler"),Ke=Symbol.for("react.provider"),Et=Symbol.for("react.consumer"),gt=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),rt=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),gn=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),an=Symbol.for("react.offscreen"),kt=Symbol.for("react.memo_cache_sentinel"),Un=Symbol.iterator,Xn=Symbol.for("react.client.reference"),bn=U.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oi,Zn,fi=!1,tr=Array.isArray,Jn=e.rendererVersion,zr=e.rendererPackageName,nr=e.extraDevToolsConfig,Ih=e.getPublicInstance,ET=e.getRootHostContext,xC=e.getChildHostContext,bC=e.prepareForCommit,nB=e.resetAfterCommit,wT=e.createInstance,F1=e.appendInitialChild,Lb=e.finalizeInitialChildren,ja=e.shouldSetTextContent,yo=e.createTextInstance,Pb=e.scheduleTimeout,U1=e.cancelTimeout,Gg=e.noTimeout,Lf=e.isPrimaryRenderer;e.warnsIfNotActing;var Os=e.supportsMutation,Pf=e.supportsPersistence,tc=e.supportsHydration,Nb=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var _C=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ll=e.setCurrentUpdatePriority,a0=e.getCurrentUpdatePriority,SC=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var TC=e.shouldAttemptEagerTransition,EC=e.detachDeletedInstance;e.requestPostPaintCallback;var MT=e.maySuspendCommit,CT=e.preloadInstance,iB=e.startSuspendingCommit,RT=e.suspendInstance,wC=e.waitForCommitToBeReady,XA=e.NotPendingTransition,Zd=e.HostTransitionContext,MC=e.resetFormInstance;e.bindToConsole;var CC=e.supportsMicrotasks,RC=e.scheduleMicrotask,zg=e.supportsTestSelectors,DC=e.findFiberRoot,rB=e.getBoundingRect,LC=e.getTextContent,Oh=e.isHiddenSubtree,PC=e.matchAccessibilityRole,Bb=e.setFocusIfFocusable,Ib=e.setupIntersectionObserver,NC=e.appendChild,DT=e.appendChildToContainer,BC=e.commitTextUpdate,IC=e.commitMount,OC=e.commitUpdate,FC=e.insertBefore,LT=e.insertInContainerBefore,UC=e.removeChild,kC=e.removeChildFromContainer,Ob=e.resetTextContent,GC=e.hideInstance,zC=e.hideTextInstance,sB=e.unhideInstance,PT=e.unhideTextInstance,HC=e.clearContainer,VC=e.cloneInstance,Fb=e.createContainerChildSet,NT=e.appendChildToContainerChildSet,qC=e.finalizeContainerChildren,$C=e.replaceContainerChildren,jC=e.cloneHiddenInstance,BT=e.cloneHiddenTextInstance,QA=e.isSuspenseInstancePending,k1=e.isSuspenseInstanceFallback,Ub=e.getSuspenseInstanceFallbackErrorDetails,WC=e.registerSuspenseInstanceRetry,KC=e.canHydrateFormStateMarker,Fh=e.isFormStateMarkerMatching,l0=e.getNextHydratableSibling,Jd=e.getFirstHydratableChild,ZA=e.getFirstHydratableChildWithinContainer,IT=e.getFirstHydratableChildWithinSuspenseInstance,OT=e.canHydrateInstance,YC=e.canHydrateTextInstance,XC=e.canHydrateSuspenseInstance,JA=e.hydrateInstance,kb=e.hydrateTextInstance,QC=e.hydrateSuspenseInstance,ZC=e.getNextHydratableInstanceAfterSuspenseInstance,JC=e.commitHydratedContainer,Gb=e.commitHydratedSuspenseInstance,eR=e.clearSuspenseBoundary,FT=e.clearSuspenseBoundaryFromContainer,UT=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var tR=e.validateHydratableInstance,oB=e.validateHydratableTextInstance,Hc=e.supportsResources,oa=e.isHostHoistableType,aa=e.getHoistableRoot,kT=e.getResource,GT=e.acquireResource,zT=e.releaseResource,nR=e.hydrateHoistable,HT=e.mountHoistable,Hg=e.unmountHoistable,VT=e.createHoistableInstance,iR=e.prepareToCommitHoistables,rR=e.mayResourceSuspendCommit,qT=e.preloadResource,$T=e.suspendResource,Ra=e.supportsSingletons,zb=e.resolveSingletonInstance,sR=e.clearSingleton,jT=e.acquireSingletonInstance,WT=e.releaseSingletonInstance,Hb=e.isHostSingletonType,Vb=[],c0=-1,em={},vo=Math.clz32?Math.clz32:R,KT=Math.log,aB=Math.LN2,G1=128,Vg=4194304,Uh=V.unstable_scheduleCallback,Nf=V.unstable_cancelCallback,u0=V.unstable_shouldYield,ep=V.unstable_requestPaint,Vc=V.unstable_now,qb=V.unstable_ImmediatePriority,z1=V.unstable_UserBlockingPriority,qg=V.unstable_NormalPriority,tm=V.unstable_IdlePriority,ul=V.log,$b=V.unstable_setDisableYieldValue,$g=null,zo=null,Pl=typeof Object.is=="function"?Object.is:le,jb=new WeakMap,qc=[],$c=0,f0=null,jg=0,nc=[],fl=0,Bf=null,kh=1,Gh="",xo=b(null),Ru=b(null),tp=b(null),H1=b(null),bo=null,es=null,br=!1,Du=null,If=!1,V1=Error(r(519)),ic=[],np=0,Of=0,Ts=null,h0=null,Wb=!1,_o=!1,Kb=!1,Wg=0,Kg=null,Yb=0,Es=0,Da=null,hl=!1,Xb=!1,oR=Object.prototype.hasOwnProperty,q1=Error(r(460)),$1=Error(r(474)),Nl={then:function(){}},dl=null,nm=null,pl=0,d0=Qr(!0),zh=Qr(!1),Ff=b(null),Uf=b(0),rc=b(null),Lu=null,gs=b(0),ip=0,Ci=null,Mr=null,Fs=null,rp=!1,im=!1,p0=!1,A0=0,Yg=0,sp=null,aR=0,YT=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},So={readContext:eo,use:Je,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn};So.useCacheRefresh=zn,So.useMemoCache=zn,So.useHostTransitionStatus=zn,So.useFormState=zn,So.useActionState=zn,So.useOptimistic=zn;var op={readContext:eo,use:Je,useCallback:function(y,_){return ye().memoizedState=[y,_===void 0?null:_],y},useContext:eo,useEffect:x1,useImperativeHandle:function(y,_,N){N=N!=null?N.concat([y]):null,_g(4194308,4,NA.bind(null,_,y),N)},useLayoutEffect:function(y,_){return _g(4194308,4,y,_)},useInsertionEffect:function(y,_){_g(4,2,y,_)},useMemo:function(y,_){var N=ye();_=_===void 0?null:_;var z=y();if(p0){se(!0);try{y()}finally{se(!1)}}return N.memoizedState=[z,_],z},useReducer:function(y,_,N){var z=ye();if(N!==void 0){var W=N(_);if(p0){se(!0);try{N(_)}finally{se(!1)}}}else W=_;return z.memoizedState=z.baseState=W,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:W},z.queue=y,y=y.dispatch=wg.bind(null,Ci,y),[z.memoizedState,y]},useRef:function(y){var _=ye();return y={current:y},_.memoizedState=y},useState:function(y){y=me(y);var _=y.queue,N=ko.bind(null,Ci,_);return _.dispatch=N,[y.memoizedState,N]},useDebugValue:BA,useDeferredValue:function(y,_){var N=ye();return zp(N,y,_)},useTransition:function(){var y=me(!1);return y=_1.bind(null,Ci,y.queue,!0,!1),ye().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,_,N){var z=Ci,W=ye();if(br){if(N===void 0)throw Error(r(407));N=N()}else{if(N=_(),ns===null)throw Error(r(349));or&60||li(z,_,N)}W.memoizedState=N;var J={value:N,getSnapshot:_};return W.queue=J,x1(Zi.bind(null,z,J,y),[y]),z.flags|=2048,Bc(9,Hn.bind(null,z,J,N,_),{destroy:void 0},null),N},useId:function(){var y=ye(),_=ns.identifierPrefix;if(br){var N=Gh,z=kh;N=(z&~(1<<32-vo(z)-1)).toString(32)+N,_=":"+_+"R"+N,N=A0++,0<N&&(_+="H"+N.toString(32)),_+=":"}else N=aR++,_=":"+_+"r"+N.toString(32)+":";return y.memoizedState=_},useCacheRefresh:function(){return ye().memoizedState=S1.bind(null,Ci)}};op.useMemoCache=Ye,op.useHostTransitionStatus=Hp,op.useFormState=Tr,op.useActionState=Tr,op.useOptimistic=function(y){var _=ye();_.memoizedState=_.baseState=y;var N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return _.queue=N,_=Js.bind(null,Ci,!0,N),N.dispatch=_,[y,_]};var Bl={readContext:eo,use:Je,useCallback:xh,useContext:eo,useEffect:Er,useImperativeHandle:Tg,useInsertionEffect:Sg,useLayoutEffect:b1,useMemo:xf,useReducer:fn,useRef:Sa,useState:function(){return fn(Xt)},useDebugValue:BA,useDeferredValue:function(y,_){var N=Ge();return Eg(N,Mr.memoizedState,y,_)},useTransition:function(){var y=fn(Xt)[0],_=Ge().memoizedState;return[typeof y=="boolean"?y:lt(y),_]},useSyncExternalStore:en,useId:Od};Bl.useCacheRefresh=bf,Bl.useMemoCache=Ye,Bl.useHostTransitionStatus=Hp,Bl.useFormState=ps,Bl.useActionState=ps,Bl.useOptimistic=function(y,_){var N=Ge();return gi(N,Mr,y,_)};var m0={readContext:eo,use:Je,useCallback:xh,useContext:eo,useEffect:Er,useImperativeHandle:Tg,useInsertionEffect:Sg,useLayoutEffect:b1,useMemo:xf,useReducer:Ae,useRef:Sa,useState:function(){return Ae(Xt)},useDebugValue:BA,useDeferredValue:function(y,_){var N=Ge();return Mr===null?zp(N,y,_):Eg(N,Mr.memoizedState,y,_)},useTransition:function(){var y=Ae(Xt)[0],_=Ge().memoizedState;return[typeof y=="boolean"?y:lt(y),_]},useSyncExternalStore:en,useId:Od};m0.useCacheRefresh=bf,m0.useMemoCache=Ye,m0.useHostTransitionStatus=Hp,m0.useFormState=Uo,m0.useActionState=Uo,m0.useOptimistic=function(y,_){var N=Ge();return Mr!==null?gi(N,Mr,y,_):(N.baseState=y,[y,N.queue.dispatch])};var Xg={isMounted:function(y){return(y=y._reactInternals)?f(y)===y:!1},enqueueSetState:function(y,_,N){y=y._reactInternals;var z=wa(),W=En(z);W.payload=_,N!=null&&(W.callback=N),_=pn(y,W,z),_!==null&&(Jr(_,y,z),Sn(_,y,z))},enqueueReplaceState:function(y,_,N){y=y._reactInternals;var z=wa(),W=En(z);W.tag=1,W.payload=_,N!=null&&(W.callback=N),_=pn(y,W,z),_!==null&&(Jr(_,y,z),Sn(_,y,z))},enqueueForceUpdate:function(y,_){y=y._reactInternals;var N=wa(),z=En(N);z.tag=2,_!=null&&(z.callback=_),_=pn(y,z,N),_!==null&&(Jr(_,y,N),Sn(_,y,N))}},g0=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},XT=Error(r(461)),Ho=!1,j1={dehydrated:null,treeContext:null,retryLane:0},Pu=b(null),y0=null,Nu=null,W1=typeof AbortController<"u"?AbortController:function(){var y=[],_=this.signal={aborted:!1,addEventListener:function(N,z){y.push(z)}};this.abort=function(){_.aborted=!0,y.forEach(function(N){return N()})}},qs=V.unstable_scheduleCallback,lB=V.unstable_NormalPriority,so={$$typeof:gt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},QT=bn.S;bn.S=function(y,_){typeof _=="object"&&_!==null&&typeof _.then=="function"&&on(y,_),QT!==null&&QT(y,_)};var rm=b(null),ap=!1,Ri=!1,ts=!1,ir=typeof WeakSet=="function"?WeakSet:Set,ci=null,us=!1,Cr=null,To=!1,Al=null,v0=8192,lp={getCacheForType:function(y){var _=eo(so),N=_.data.get(y);return N===void 0&&(N=y(),_.data.set(y,N)),N}},ws=0,kf=1,Hh=2,Qg=3,Il=4;if(typeof Symbol=="function"&&Symbol.for){var Vh=Symbol.for;ws=Vh("selector.component"),kf=Vh("selector.has_pseudo_class"),Hh=Vh("selector.role"),Qg=Vh("selector.test_id"),Il=Vh("selector.text")}var K1=typeof WeakMap=="function"?WeakMap:Map,sr=0,ns=null,Yi=null,or=0,Hr=0,Vo=null,Bu=!1,Iu=!1,sm=!1,Gf=0,Us=0,Ou=0,cp=0,Ol=0,jc=0,qo=0,Zg=null,Fu=null,Qb=!1,ZT=0,Wc=1/0,om=null,qh=null,up=!1,x0=null,Jg=0,Zb=0,Y1=null,am=0,JT=null;return B.attemptContinuousHydration=function(y){if(y.tag===13){var _=Dt(y,67108864);_!==null&&Jr(_,y,67108864),L(y,67108864)}},B.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var _=wa(),N=Dt(y,_);N!==null&&Jr(N,y,_),L(y,_)}},B.attemptSynchronousHydration=function(y){switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=P(y.pendingLanes);if(_!==0){for(y.pendingLanes|=2,y.entangledLanes|=2;_;){var N=1<<31-vo(_);y.entanglements[1]|=N,_&=~N}Gt(y),!(sr&6)&&(Wc=Vc()+500,Se(0))}}break;case 13:_=Dt(y,2),_!==null&&Jr(_,y,2),Is(),L(y,2)}},B.batchedUpdates=function(y,_){return y(_)},B.createComponentSelector=function(y){return{$$typeof:ws,value:y}},B.createContainer=function(y,_,N,z,W,J,be,Ue,nt,Ot){return Ca(y,_,!1,null,N,z,J,be,Ue,nt,Ot,null)},B.createHasPseudoClassSelector=function(y){return{$$typeof:kf,value:y}},B.createHydrationContainer=function(y,_,N,z,W,J,be,Ue,nt,Ot,cn,Rn,ln){return y=Ca(N,z,!0,y,W,J,Ue,nt,Ot,cn,Rn,ln),y.context=x(null),N=y.current,z=wa(),W=En(z),W.callback=_??null,pn(N,W,z),y.current.lanes=z,$(y,z),Gt(y),y},B.createPortal=function(y,_,N){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_e,key:z==null?null:""+z,children:y,containerInfo:_,implementation:N}},B.createRoleSelector=function(y){return{$$typeof:Hh,value:y}},B.createTestNameSelector=function(y){return{$$typeof:Qg,value:y}},B.createTextSelector=function(y){return{$$typeof:Il,value:y}},B.defaultOnCaughtError=function(y){console.error(y)},B.defaultOnRecoverableError=function(y){g0(y)},B.defaultOnUncaughtError=function(y){g0(y)},B.deferredUpdates=function(y){var _=bn.T,N=a0();try{return Ll(32),bn.T=null,y()}finally{Ll(N),bn.T=_}},B.discreteUpdates=function(y,_,N,z,W){var J=bn.T,be=a0();try{return Ll(2),bn.T=null,y(_,N,z,W)}finally{Ll(be),bn.T=J,sr===0&&(Wc=Vc()+500)}},B.findAllNodes=Rh,B.findBoundingRects=function(y,_){if(!zg)throw Error(r(363));_=Rh(y,_),y=[];for(var N=0;N<_.length;N++)y.push(rB(_[N]));for(_=y.length-1;0<_;_--){N=y[_];for(var z=N.x,W=z+N.width,J=N.y,be=J+N.height,Ue=_-1;0<=Ue;Ue--)if(_!==Ue){var nt=y[Ue],Ot=nt.x,cn=Ot+nt.width,Rn=nt.y,ln=Rn+nt.height;if(z>=Ot&&J>=Rn&&W<=cn&&be<=ln){y.splice(_,1);break}else if(z!==Ot||N.width!==nt.width||ln<J||Rn>be){if(!(J!==Rn||N.height!==nt.height||cn<z||Ot>W)){Ot>z&&(nt.width+=Ot-z,nt.x=z),cn<W&&(nt.width=W-Ot),y.splice(_,1);break}}else{Rn>J&&(nt.height+=Rn-J,nt.y=J),ln<be&&(nt.height=be-Rn),y.splice(_,1);break}}}return y},B.findHostInstance=v,B.findHostInstanceWithNoPortals=function(y){return y=p(y),y=y!==null?g(y):null,y===null?null:Ih(y.stateNode)},B.findHostInstanceWithWarning=function(y){return v(y)},B.flushPassiveEffects=sa,B.flushSyncFromReconciler=function(y){var _=sr;sr|=1;var N=bn.T,z=a0();try{if(Ll(2),bn.T=null,y)return y()}finally{Ll(z),bn.T=N,sr=_,!(sr&6)&&Se(0)}},B.flushSyncWork=Is,B.focusWithin=function(y,_){if(!zg)throw Error(r(363));for(y=Ch(y),_=Kd(y,_),_=Array.from(_),y=0;y<_.length;){var N=_[y++],z=N.tag;if(!Oh(N)){if((z===5||z===26||z===27)&&Bb(N.stateNode))return!0;for(N=N.child;N!==null;)_.push(N),N=N.sibling}}return!1},B.getFindAllNodesFailureDescription=function(y,_){if(!zg)throw Error(r(363));var N=0,z=[];y=[Ch(y),0];for(var W=0;W<y.length;){var J=y[W++],be=J.tag,Ue=y[W++],nt=_[Ue];if((be!==5&&be!==26&&be!==27||!Oh(J))&&(kg(J,nt)&&(z.push(cl(nt)),Ue++,Ue>N&&(N=Ue)),Ue<_.length))for(J=J.child;J!==null;)y.push(J,Ue),J=J.sibling}if(N<_.length){for(y=[];N<_.length;N++)y.push(cl(_[N]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},B.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 27:case 5:return Ih(y.child.stateNode);default:return y.child.stateNode}},B.injectIntoDevTools=function(){var y={bundleType:0,version:Jn,rendererPackageName:zr,currentDispatcherRef:bn,findFiberByHostInstance:Nb,reconcilerVersion:"19.0.0"};if(nr!==null&&(y.rendererConfig=nr),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)y=!0;else{try{$g=_.inject(y),zo=_}catch{}y=!!_.checkDCE}}return y},B.isAlreadyRendering=function(){return!1},B.observeVisibleRects=function(y,_,N,z){if(!zg)throw Error(r(363));y=Rh(y,_);var W=Ib(y,N,z).disconnect;return{disconnect:function(){W()}}},B.shouldError=function(){return null},B.shouldSuspend=function(){return!1},B.startHostTransition=function(y,_,N,z){if(y.tag!==5)throw Error(r(476));var W=Id(y).queue;_1(y,W,_,XA,N===null?n:function(){var J=Id(y).next.queue;return sl(y,J,{},wa()),N(z)})},B.updateContainer=function(y,_,N,z){var W=_.current,J=wa();return E(W,J,y,_,N,z),J},B.updateContainerSync=function(y,_,N,z){return _.tag===0&&sa(),E(_.current,2,y,_,N,z),2},B},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(D6)),D6.exports}var lj;function o2e(){return lj||(lj=1,R6.exports=s2e()),R6.exports}var a2e=o2e();const l2e=Ag(a2e);var cj=P7();const c2e=i=>typeof i=="object"&&typeof i.then=="function",$v=[];function ine(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function rne(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of $v)if(ine(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=$v.indexOf(r);s!==-1&&$v.splice(s,1)},promise:(c2e(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if($v.push(r),!t)throw r.promise}const sne=(i,e,t)=>rne(i,e,!1,t),u2e=(i,e,t)=>void rne(i,e,!0,t),f2e=i=>{if(i===void 0||i.length===0)$v.splice(0,$v.length);else{const e=$v.find(t=>ine(i,t.keys,t.equal));e&&e.remove()}};function F9(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const r=F9(n,e,t);if(r)return r;n=e?null:n.sibling}}function one(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const U9=one(X.createContext(null));let ane=class extends X.Component{render(){return X.createElement(U9.Provider,{value:this._reactInternals},this.props.children)}};function lne(){const i=X.useContext(U9);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=F9(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[i,e])}const h2e=Symbol.for("react.context"),d2e=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===h2e;function p2e(){const i=lne(),[e]=X.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;d2e(n)&&n!==U9&&!e.has(n)&&e.set(n,X.use(one(n))),t=t.return}return e}function A2e(){const i=p2e();return X.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>X.createElement(e,null,X.createElement(t.Provider,{...n,value:i.get(t)})),e=>X.createElement(ane,{...e})),[i])}function cne(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const une=i=>i&&i.isOrthographicCamera,m2e=i=>i&&i.hasOwnProperty("current"),g2e=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),E3=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?X.useLayoutEffect:X.useEffect;function fne(i){const e=X.useRef(i);return E3(()=>void(e.current=i),[i]),e}function y2e(){const i=lne(),e=A2e();return X.useMemo(()=>({children:t})=>{const r=!!F9(i,!0,s=>s.type===X.StrictMode)?X.StrictMode:X.Fragment;return ce.jsx(r,{children:ce.jsx(e,{children:t})})},[i,e])}function v2e({set:i}){return E3(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const x2e=(i=>(i=class extends X.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function hne(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function b_(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const co={obj:i=>i===Object(i)&&!co.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(co.str(i)||co.num(i)||co.boo(i))return i===e;const s=co.obj(i);if(s&&n==="reference")return i===e;const o=co.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in r?e:i)if(!co.equ(i[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:i)if(i[a]!==e[a])return!1;if(co.und(a)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function dne(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function b2e(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const pne=["children","key","ref"];function _2e(i){const e={};for(const t in i)pne.includes(t)||(e[t]=i[t]);return e}function GD(i,e,t,n){const r=i;let s=r==null?void 0:r.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:_2e(n),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function mM(i,e){var t;let n=i[e];if(!e.includes("-"))return{root:i,key:e,target:n};const r=e.split("-");return n=r.reduce((s,o)=>s[o],i),e=r.pop(),(t=n)!=null&&t.set||(i=r.reduce((s,o)=>s[o],i)),{root:i,key:e,target:n}}const uj=/-\d+$/;function zD(i,e){if(co.str(e.props.attach)){if(uj.test(e.props.attach)){const r=e.props.attach.replace(uj,""),{root:s,key:o}=mM(i.object,r);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:n}=mM(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else co.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function HD(i,e){if(co.str(e.props.attach)){const{root:t,key:n}=mM(i.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[n]:t[n]=r}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const LF=[...pne,"args","dispose","attach","object","onUpdate","dispose"],fj=new Map;function S2e(i){let e=fj.get(i.constructor);try{e||(e=new i.constructor,fj.set(i.constructor,e))}catch{}return e}function T2e(i,e){const t={};for(const n in e)if(!LF.includes(n)&&!co.equ(e[n],i.props[n])){t[n]=e[n];for(const r in e)r.startsWith(`${n}-`)&&(t[r]=e[r])}for(const n in i.props){if(LF.includes(n)||e.hasOwnProperty(n))continue;const{root:r,key:s}=mM(i.object,n);if(r.constructor&&r.constructor.length===0){const o=S2e(r);co.und(o)||(t[s]=o[s])}else t[s]=0}return t}const E2e=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],w2e=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Cy(i,e){var t;const n=i.__r3f,r=n&&cne(n).getState(),s=n==null?void 0:n.eventCount;for(const a in e){let l=e[a];if(LF.includes(a))continue;if(n&&w2e.test(a)){typeof l=="function"?n.handlers[a]=l:delete n.handlers[a],n.eventCount=Object.keys(n.handlers).length;continue}if(l===void 0)continue;let{root:c,key:u,target:f}=mM(i,a);if(f instanceof uS&&l instanceof uS)f.mask=l.mask;else if(f instanceof Qt&&g2e(l))f.set(l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof f.copy=="function"&&l!=null&&l.constructor&&f.constructor===l.constructor)f.copy(l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&Array.isArray(l))typeof f.fromArray=="function"?f.fromArray(l):f.set(...l);else if(f!==null&&typeof f=="object"&&typeof f.set=="function"&&typeof l=="number")typeof f.setScalar=="function"?f.setScalar(l):f.set(l);else{var o;c[u]=l,r&&!r.linear&&E2e.includes(u)&&(o=c[u])!=null&&o.isTexture&&c[u].format===ho&&c[u].type===Aa&&(c[u].colorSpace=kn)}}if(n!=null&&n.parent&&r!=null&&r.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const a=n.object,l=r.internal.interaction.indexOf(a);l>-1&&r.internal.interaction.splice(l,1),n.eventCount&&a.raycast!==null&&r.internal.interaction.push(a)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&cT(n),i}function cT(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function M2e(i,e){i.manual||(une(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const tu=i=>i==null?void 0:i.isObject3D;function m5(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function Ane(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function C2e(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{Ane(t.capturedMap,e,n,r)})}function R2e(i){function e(l){const{internal:c}=i.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function n(l,c){const u=i.getState(),f=new Set,h=[],p=c?c(u.internal.interaction):u.internal.interaction;for(let T=0;T<p.length;T++){const C=b_(p[T]);C&&(C.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function m(T){const C=b_(T);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var R;C.events.compute==null||C.events.compute(l,C,(R=C.previousRoot)==null?void 0:R.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(T,!0):[]}let g=p.flatMap(m).sort((T,C)=>{const R=b_(T.object),P=b_(C.object);return!R||!P?T.distance-C.distance:P.events.priority-R.events.priority||T.distance-C.distance}).filter(T=>{const C=m5(T);return f.has(C)?!1:(f.add(C),!0)});u.events.filter&&(g=u.events.filter(g,u));for(const T of g){let C=T.object;for(;C;){var b;(b=C.__r3f)!=null&&b.eventCount&&h.push({...T,eventObject:C}),C=C.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let T of u.internal.capturedMap.get(l.pointerId).values())f.has(m5(T.intersection))||h.push(T.intersection);return h}function r(l,c,u,f){if(l.length){const h={stopped:!1};for(const p of l){let m=b_(p.object);if(m||p.object.traverseAncestors(g=>{const b=b_(g);if(b)return m=b,!1}),m){const{raycaster:g,pointer:b,camera:T,internal:C}=m,R=new he(b.x,b.y,0).unproject(T),P=H=>{var O,$;return(O=($=C.capturedMap.get(H))==null?void 0:$.has(p.eventObject))!=null?O:!1},I=H=>{const O={intersection:p,target:c.target};C.capturedMap.has(H)?C.capturedMap.get(H).set(p.eventObject,O):C.capturedMap.set(H,new Map([[p.eventObject,O]])),c.target.setPointerCapture(H)},F=H=>{const O=C.capturedMap.get(H);O&&Ane(C.capturedMap,p.eventObject,O,H)};let k={};for(let H in c){let O=c[H];typeof O!="function"&&(k[H]=O)}let q={...p,...k,pointer:b,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:R,ray:g.ray,camera:T,stopPropagation(){const H="pointerId"in c&&C.capturedMap.get(c.pointerId);if((!H||H.has(p.eventObject))&&(q.stopped=h.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(O=>O.eventObject===p.eventObject))){const O=l.slice(0,l.indexOf(p));s([...O,p])}},target:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:F},currentTarget:{hasPointerCapture:P,setPointerCapture:I,releasePointerCapture:F},nativeEvent:c};if(f(q),h.stopped===!0)break}}}return l}function s(l){const{internal:c}=i.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f;if(c.hovered.delete(m5(u)),h!=null&&h.eventCount){const p=h.handlers,m={...u,intersections:l};p.onPointerOut==null||p.onPointerOut(m),p.onPointerLeave==null||p.onPointerLeave(m)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=i.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:h}=i.getState();h.lastEvent.current=u;const p=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=n(u,p?t:void 0),T=m?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=b.map(R=>R.eventObject)),m&&!b.length&&T<=2&&(o(u,h.interaction),f&&f(u)),p&&s(b);function C(R){const P=R.eventObject,I=P.__r3f;if(!(I!=null&&I.eventCount))return;const F=I.handlers;if(p){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const k=m5(R),q=h.hovered.get(k);q?q.stopped&&R.stopPropagation():(h.hovered.set(k,R),F.onPointerOver==null||F.onPointerOver(R),F.onPointerEnter==null||F.onPointerEnter(R))}F.onPointerMove==null||F.onPointerMove(R)}else{const k=F[l];k?(!m||h.initialHits.includes(P))&&(o(u,h.interaction.filter(q=>!h.initialHits.includes(q))),k(R)):m&&h.initialHits.includes(P)&&o(u,h.interaction.filter(q=>!h.initialHits.includes(q)))}}r(b,u,T,C)}}return{handlePointer:a}}const hj=i=>!!(i!=null&&i.render),mne=X.createContext(null),D2e=(i,e)=>{const t=r2e((a,l)=>{const c=new he,u=new he,f=new he;function h(T=l().camera,C=u,R=l().size){const{width:P,height:I,top:F,left:k}=R,q=P/I;C.isVector3?f.copy(C):f.set(...C);const H=T.getWorldPosition(c).distanceTo(f);if(une(T))return{width:P/T.zoom,height:I/T.zoom,top:F,left:k,factor:1,distance:H,aspect:q};{const O=T.fov*Math.PI/180,$=2*Math.tan(O/2)*H,ee=$*(P/I);return{width:ee,height:$,top:F,left:k,factor:P/ee,distance:H,aspect:q}}}let p;const m=T=>a(C=>({performance:{...C.performance,current:T}})),g=new at;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(T=1)=>i(l(),T),advance:(T,C)=>e(T,C,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new S3,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=l();p&&clearTimeout(p),T.performance.current!==T.performance.min&&m(T.performance.min),p=setTimeout(()=>m(l().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:T=>a(C=>({...C,events:{...C.events,...T}})),setSize:(T,C,R=0,P=0)=>{const I=l().camera,F={width:T,height:C,top:R,left:P};a(k=>({size:F,viewport:{...k.viewport,...h(I,u,F)}}))},setDpr:T=>a(C=>{const R=hne(T);return{viewport:{...C.viewport,dpr:R,initialDpr:C.viewport.initialDpr||R}}}),setFrameloop:(T="always")=>{const C=l().clock;C.stop(),C.elapsedTime=0,T!=="never"&&(C.start(),C.elapsedTime=0),a(()=>({frameloop:T}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:X.createRef(),active:!1,frames:0,priority:0,subscribe:(T,C,R)=>{const P=l().internal;return P.priority=P.priority+(C>0?1:0),P.subscribers.push({ref:T,priority:C,store:R}),P.subscribers=P.subscribers.sort((I,F)=>I.priority-F.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(C>0?1:0),I.subscribers=I.subscribers.filter(F=>F.ref!==T))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){r=l,s=c.dpr,M2e(a,l),c.dpr>0&&u.setPixelRatio(c.dpr);const h=typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}a!==o&&(o=a,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};function gne(){const i=X.useContext(mne);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Ac(i=t=>t,e){return gne()(i,e)}function w3(i,e=0){const t=gne(),n=t.getState().internal.subscribe,r=fne(i);return E3(()=>n(r,e,t),[e,n,t]),null}function L2e(i){return X.useMemo(()=>dne(i),[i])}const dj=new WeakMap,P2e=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function yne(i,e){return function(t,...n){let r;return P2e(t)?(r=dj.get(t),r||(r=new t,dj.set(t,r))):r=t,i&&i(r),Promise.all(n.map(s=>new Promise((o,a)=>r.load(s,l=>{tu(l==null?void 0:l.scene)&&Object.assign(l,dne(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Fp(i,e,t,n){const r=Array.isArray(e)?e:[e],s=sne(yne(t,n),[i,...r],{equal:co.equ});return Array.isArray(e)?s:s[0]}Fp.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return u2e(yne(t),[i,...n])};Fp.clear=function(i,e){const t=Array.isArray(e)?e:[e];return f2e([i,...t])};function N2e(i){const e=l2e(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version}),e}const vne=0,AS={},B2e=/^three(?=[A-Z])/,IP=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let I2e=0;const O2e=i=>typeof i=="function";function F2e(i){if(O2e(i)){const e=`${I2e++}`;return AS[e]=i,e}else Object.assign(AS,i)}function xne(i,e){const t=IP(i),n=AS[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function U2e(i,e,t){var n;return i=IP(i)in AS?i:i.replace(B2e,""),xne(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,GD(e.object,t,i,e)}function k2e(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?HD(i.parent,i):tu(i.object)&&(i.object.visible=!1),i.isHidden=!0,cT(i)}}function bne(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?zD(i.parent,i):tu(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,cT(i)}}function k9(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var r,s;const o=AS[IP(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Cy(e.object,e.props),e.props.attach)zD(i,e);else if(tu(e.object)&&tu(i.object)){const o=i.object.children.indexOf(t==null?void 0:t.object);t&&o!==-1?(e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})):i.object.add(e.object)}for(const o of e.children)k9(e,o);cT(e)}}function L6(i,e){e&&(e.parent=i,i.children.push(e),k9(i,e))}function pj(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),k9(i,e,t)}function _ne(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():cj.unstable_scheduleCallback(cj.unstable_IdlePriority,e)}}function PF(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?HD(i,e):tu(e.object)&&tu(i.object)&&(i.object.remove(e.object),C2e(cne(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];PF(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&_ne(e.object),t===void 0&&cT(e)}function G2e(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Z4=[];function z2e(){for(const[t]of Z4){const n=t.parent;if(n){t.props.attach?HD(n,t):tu(t.object)&&tu(n.object)&&n.object.remove(t.object);for(const r of t.children)r.props.attach?HD(t,r):tu(r.object)&&tu(t.object)&&t.object.remove(r.object)}t.isHidden&&bne(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&_ne(t.object)}for(const[t,n,r]of Z4){t.props=n;const s=t.parent;if(s){var i,e;const o=AS[IP(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,G2e(r,t.object),Cy(t.object,t.props),t.props.attach?zD(s,t):tu(t.object)&&tu(s.object)&&s.object.add(t.object);for(const a of t.children)a.props.attach?zD(t,a):tu(a.object)&&tu(t.object)&&t.object.add(a.object);cT(t)}}Z4.length=0}const P6=()=>{},Aj={};let g5=vne;const H2e=0,V2e=4,NF=N2e({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:U2e,removeChild:PF,appendChild:L6,appendInitialChild:L6,insertBefore:pj,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||L6(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||PF(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||pj(n,e,t)},getRootHostContext:()=>Aj,getChildHostContext:()=>Aj,commitUpdate(i,e,t,n,r){var s,o,a;xne(e,n);let l=!1;if((i.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(a=n.args)!=null&&a.some((u,f)=>{var h;return u!==((h=t.args)==null?void 0:h[f])}))&&(l=!0),l)Z4.push([i,{...n},r]);else{const u=T2e(i,n);Object.keys(u).length&&(Object.assign(i.props,u),Cy(i.object,u))}(r.sibling===null||(r.flags&V2e)===H2e)&&z2e()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>GD(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:k2e,unhideInstance:bne,createTextInstance:P6,hideTextInstance:P6,unhideTextInstance:P6,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:X.createContext(null),setCurrentUpdatePriority(i){g5=i},getCurrentUpdatePriority(){return g5},resolveUpdatePriority(){var i;if(g5!==vne)return g5;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Q4.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Q4.ContinuousEventPriority;default:return Q4.DefaultEventPriority}},resetFormInstance(){}}),zx=new Map,__={objects:"shallow",strict:!1};function q2e(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:r,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function $2e(i){const e=zx.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||D2e(OF,gj),o=t||NF.createContainer(s,Q4.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||zx.set(i,{fiber:o,store:s});let a,l,c=!1,u=null;return{async configure(f={}){let h;u=new Promise(ge=>h=ge);let{gl:p,size:m,scene:g,events:b,onCreated:T,shadows:C=!1,linear:R=!1,flat:P=!1,legacy:I=!1,orthographic:F=!1,frameloop:k="always",dpr:q=[1,2],performance:H,raycaster:O,camera:$,onPointerMissed:ee}=f,Y=s.getState(),oe=Y.gl;if(!Y.gl){const ge={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Ce=typeof p=="function"?await p(ge):p;hj(Ce)?oe=Ce:oe=new O9({...ge,...p}),Y.set({gl:oe})}let re=Y.raycaster;re||Y.set({raycaster:re=new B9});const{params:Q,...se}=O||{};if(co.equ(se,re,__)||Cy(re,{...se}),co.equ(Q,re.params,__)||Cy(re,{params:{...re.params,...Q}}),!Y.camera||Y.camera===l&&!co.equ(l,$,__)){l=$;const ge=$==null?void 0:$.isCamera,Ce=ge?$:F?new du(0,0,0,0,.1,1e3):new ls(75,0,.1,1e3);ge||(Ce.position.z=5,$&&(Cy(Ce,$),Ce.manual||("aspect"in $||"left"in $||"right"in $||"bottom"in $||"top"in $)&&(Ce.manual=!0,Ce.updateProjectionMatrix())),!Y.camera&&!($!=null&&$.rotation)&&Ce.lookAt(0,0,0)),Y.set({camera:Ce}),re.camera=Ce}if(!Y.scene){let ge;g!=null&&g.isScene?(ge=g,GD(ge,s,"",{})):(ge=new sb,GD(ge,s,"",{}),g&&Cy(ge,g)),Y.set({scene:ge})}b&&!Y.events.handlers&&Y.set({events:b(s)});const le=q2e(i,m);if(co.equ(le,Y.size,__)||Y.setSize(le.width,le.height,le.top,le.left),q&&Y.viewport.dpr!==hne(q)&&Y.setDpr(q),Y.frameloop!==k&&Y.setFrameloop(k),Y.onPointerMissed||Y.set({onPointerMissed:ee}),H&&!co.equ(H,Y.performance,__)&&Y.set(ge=>({performance:{...ge.performance,...H}})),!Y.xr){var de;const ge=(Ee,Be)=>{const qe=s.getState();qe.frameloop!=="never"&&gj(Ee,!0,qe,Be)},Ce=()=>{const Ee=s.getState();Ee.gl.xr.enabled=Ee.gl.xr.isPresenting,Ee.gl.xr.setAnimationLoop(Ee.gl.xr.isPresenting?ge:null),Ee.gl.xr.isPresenting||OF(Ee)},Ie={connect(){const Ee=s.getState().gl;Ee.xr.addEventListener("sessionstart",Ce),Ee.xr.addEventListener("sessionend",Ce)},disconnect(){const Ee=s.getState().gl;Ee.xr.removeEventListener("sessionstart",Ce),Ee.xr.removeEventListener("sessionend",Ce)}};typeof((de=oe.xr)==null?void 0:de.addEventListener)=="function"&&Ie.connect(),Y.set({xr:Ie})}if(oe.shadowMap){const ge=oe.shadowMap.enabled,Ce=oe.shadowMap.type;if(oe.shadowMap.enabled=!!C,co.boo(C))oe.shadowMap.type=Dw;else if(co.str(C)){var ie;const Ie={basic:O7,percentage:c3,soft:Dw,variance:eu};oe.shadowMap.type=(ie=Ie[C])!=null?ie:Dw}else co.obj(C)&&Object.assign(oe.shadowMap,C);(ge!==oe.shadowMap.enabled||Ce!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}return Oi.enabled=!I,c||(oe.outputColorSpace=R?hu:kn,oe.toneMapping=P?Sc:eP),Y.legacy!==I&&Y.set(()=>({legacy:I})),Y.linear!==R&&Y.set(()=>({linear:R})),Y.flat!==P&&Y.set(()=>({flat:P})),p&&!co.fun(p)&&!hj(p)&&!co.equ(p,oe,__)&&Cy(oe,p),a=T,c=!0,h(),this},render(f){return!c&&!u&&this.configure(),u.then(()=>{NF.updateContainer(ce.jsx(j2e,{store:s,children:f,onCreated:a,rootElement:i}),o,null,()=>{})}),s},unmount(){Sne(i)}}}function j2e({store:i,children:e,onCreated:t,rootElement:n}){return E3(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),ce.jsx(mne.Provider,{value:i,children:e})}function Sne(i,e){const t=zx.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),NF.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),b2e(r.scene),zx.delete(i)}catch{}},500)})}}const W2e=new Set,K2e=new Set,Y2e=new Set;function N6(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Iw(i,e){switch(i){case"before":return N6(W2e,e);case"after":return N6(K2e,e);case"tail":return N6(Y2e,e)}}let B6,I6;function BF(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),B6=e.internal.subscribers;for(let r=0;r<B6.length;r++)I6=B6[r],I6.ref.current(I6.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let VD=!1,IF=!1,O6,mj,S_;function Tne(i){mj=requestAnimationFrame(Tne),VD=!0,O6=0,Iw("before",i),IF=!0;for(const t of zx.values()){var e;S_=t.store.getState(),S_.internal.active&&(S_.frameloop==="always"||S_.internal.frames>0)&&!((e=S_.gl.xr)!=null&&e.isPresenting)&&(O6+=BF(i,S_))}if(IF=!1,Iw("after",i),O6===0)return Iw("tail",i),VD=!1,cancelAnimationFrame(mj)}function OF(i,e=1){var t;if(!i)return zx.forEach(n=>OF(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):IF?i.internal.frames=2:i.internal.frames=1,VD||(VD=!0,requestAnimationFrame(Tne)))}function gj(i,e=!0,t,n){if(e&&Iw("before",i),t)BF(i,t,n);else for(const r of zx.values())BF(i,r.store.getState());e&&Iw("after",i)}const F6={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function X2e(i){const{handlePointer:e}=R2e(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(F6).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=i.getState();if(r.disconnect==null||r.disconnect(),n(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const o=r.handlers[s],[a,l]=F6[s];t.addEventListener(a,o,{passive:l})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const r in n.handlers){const s=n.handlers[r],[o]=F6[r];n.connected.removeEventListener(o,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function yj(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function Q2e({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,c=i?typeof i=="number"?i:i.resize:null,u=X.useRef(!1);X.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,h,p]=X.useMemo(()=>{const T=()=>{if(!a.current.element)return;const{left:C,top:R,width:P,height:I,bottom:F,right:k,x:q,y:H}=a.current.element.getBoundingClientRect(),O={left:C,top:R,width:P,height:I,bottom:F,right:k,x:q,y:H};a.current.element instanceof HTMLElement&&n&&(O.height=a.current.element.offsetHeight,O.width=a.current.element.offsetWidth),Object.freeze(O),u.current&&!tSe(a.current.lastBounds,O)&&o(a.current.lastBounds=O)};return[T,c?yj(T,c):T,l?yj(T,l):T]},[o,n,l,c]);function m(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function g(){a.current.element&&(a.current.resizeObserver=new r(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(T=>T.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const b=T=>{!T||T===a.current.element||(m(),a.current.element=T,a.current.scrollContainers=Ene(T),g())};return J2e(p,!!e),Z2e(h),X.useEffect(()=>{m(),g()},[e,p,h]),X.useEffect(()=>m,[]),[b,s,f]}function Z2e(i){X.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function J2e(i,e){X.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function Ene(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...Ene(i.parentElement)]}const eSe=["x","y","top","bottom","left","right","width","height"],tSe=(i,e)=>eSe.every(t=>i[t]===e[t]);function nSe({ref:i,children:e,fallback:t,resize:n,style:r,gl:s,events:o=X2e,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:p,frameloop:m,dpr:g,performance:b,raycaster:T,camera:C,scene:R,onPointerMissed:P,onCreated:I,...F}){X.useMemo(()=>F2e(j_e),[]);const k=y2e(),[q,H]=Q2e({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=X.useRef(null),$=X.useRef(null);X.useImperativeHandle(i,()=>O.current);const ee=fne(P),[Y,oe]=X.useState(!1),[re,Q]=X.useState(!1);if(Y)throw Y;if(re)throw re;const se=X.useRef(null);E3(()=>{const de=O.current;if(H.width>0&&H.height>0&&de){se.current||(se.current=$2e(de));async function ie(){await se.current.configure({gl:s,scene:R,events:o,shadows:c,linear:u,flat:f,legacy:h,orthographic:p,frameloop:m,dpr:g,performance:b,raycaster:T,camera:C,size:H,onPointerMissed:(...ge)=>ee.current==null?void 0:ee.current(...ge),onCreated:ge=>{ge.events.connect==null||ge.events.connect(a?m2e(a)?a.current:a:$.current),l&&ge.setEvents({compute:(Ce,Ie)=>{const Ee=Ce[l+"X"],Be=Ce[l+"Y"];Ie.pointer.set(Ee/Ie.size.width*2-1,-(Be/Ie.size.height)*2+1),Ie.raycaster.setFromCamera(Ie.pointer,Ie.camera)}}),I==null||I(ge)}}),se.current.render(ce.jsx(k,{children:ce.jsx(x2e,{set:Q,children:ce.jsx(X.Suspense,{fallback:ce.jsx(v2e,{set:oe}),children:e??null})})}))}ie()}}),X.useEffect(()=>{const de=O.current;if(de)return()=>Sne(de)},[]);const le=a?"none":"auto";return ce.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:le,...r},...F,children:ce.jsx("div",{ref:q,style:{width:"100%",height:"100%"},children:ce.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function G9(i){return ce.jsx(ane,{children:ce.jsx(nSe,{...i})})}const M3=new he,z9=new he,iSe=new he,vj=new at;function rSe(i,e,t){const n=M3.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function sSe(i,e){const t=M3.setFromMatrixPosition(i.matrixWorld),n=z9.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(iSe);return r.angleTo(s)>Math.PI/2}function oSe(i,e,t,n){const r=M3.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),vj.set(s.x,s.y),t.setFromCamera(vj,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function aSe(i,e){if(e instanceof du)return e.zoom;if(e instanceof ls){const t=M3.setFromMatrixPosition(i.matrixWorld),n=z9.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function lSe(i,e,t){if(e instanceof ls||e instanceof du){const n=M3.setFromMatrixPosition(i.matrixWorld),r=z9.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const FF=i=>Math.abs(i)<1e-10?0:i;function wne(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=FF(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const cSe=(i=>e=>wne(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),uSe=(i=>(e,t)=>wne(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function fSe(i){return i&&typeof i=="object"&&"current"in i}const hSe=X.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:p,receiveShadow:m,material:g,geometry:b,zIndexRange:T=[16777271,0],calculatePosition:C=rSe,as:R="div",wrapperClass:P,pointerEvents:I="auto",...F},k)=>{const{gl:q,camera:H,scene:O,size:$,raycaster:ee,events:Y,viewport:oe}=Ac(),[re]=X.useState(()=>document.createElement(R)),Q=X.useRef(null),se=X.useRef(null),le=X.useRef(0),de=X.useRef([0,0]),ie=X.useRef(null),ge=X.useRef(null),Ce=(a==null?void 0:a.current)||Y.connected||q.domElement.parentNode,Ie=X.useRef(null),Ee=X.useRef(!1),Be=X.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&fSe(f[0]),[f]);X.useLayoutEffect(()=>{const _t=q.domElement;f&&f==="blending"?(_t.style.zIndex=`${Math.floor(T[0]/2)}`,_t.style.position="absolute",_t.style.pointerEvents="none"):(_t.style.zIndex=null,_t.style.position=null,_t.style.pointerEvents=null)},[f]),X.useLayoutEffect(()=>{if(se.current){const _t=Q.current=N7.createRoot(re);if(O.updateMatrixWorld(),u)re.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const $t=C(se.current,H,$);re.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${$t[0]}px,${$t[1]}px,0);transform-origin:0 0;`}return Ce&&(r?Ce.prepend(re):Ce.appendChild(re)),()=>{Ce&&Ce.removeChild(re),_t.unmount()}}},[Ce,u]),X.useLayoutEffect(()=>{P&&(re.className=P)},[P]);const qe=X.useMemo(()=>u?{position:"absolute",top:0,left:0,width:$.width,height:$.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-$.height/2,left:-$.width/2,width:$.width,height:$.height},...t},[t,s,o,$,u]),it=X.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);X.useLayoutEffect(()=>{if(Ee.current=!1,u){var _t;(_t=Q.current)==null||_t.render(X.createElement("div",{ref:ie,style:qe},X.createElement("div",{ref:ge,style:it},X.createElement("div",{ref:k,className:n,style:t,children:i}))))}else{var $t;($t=Q.current)==null||$t.render(X.createElement("div",{ref:k,style:qe,className:n,children:i}))}});const et=X.useRef(!0);w3(_t=>{if(se.current){H.updateMatrixWorld(),se.current.updateWorldMatrix(!0,!1);const $t=u?de.current:C(se.current,H,$);if(u||Math.abs(le.current-H.zoom)>e||Math.abs(de.current[0]-$t[0])>e||Math.abs(de.current[1]-$t[1])>e){const mt=sSe(se.current,H);let ut=!1;Be&&(Array.isArray(f)?ut=f.map(Dt=>Dt.current):f!=="blending"&&(ut=[O]));const we=et.current;if(ut){const Dt=oSe(se.current,H,ee,ut);et.current=Dt&&!mt}else et.current=!mt;we!==et.current&&(h?h(!et.current):re.style.display=et.current?"block":"none");const Jt=Math.floor(T[0]/2),ft=f?Be?[T[0],Jt]:[Jt-1,0]:T;if(re.style.zIndex=`${lSe(se.current,H,ft)}`,u){const[Dt,Rt]=[$.width/2,$.height/2],yn=H.projectionMatrix.elements[5]*Rt,{isOrthographicCamera:Gt,top:Se,left:fe,bottom:Pe,right:Ve}=H,Tt=cSe(H.matrixWorldInverse),bt=Gt?`scale(${yn})translate(${FF(-(Ve+fe)/2)}px,${FF((Se+Pe)/2)}px)`:`translateZ(${yn}px)`;let sn=se.current.matrixWorld;c&&(sn=H.matrixWorldInverse.clone().transpose().copyPosition(sn).scale(se.current.scale),sn.elements[3]=sn.elements[7]=sn.elements[11]=0,sn.elements[15]=1),re.style.width=$.width+"px",re.style.height=$.height+"px",re.style.perspective=Gt?"":`${yn}px`,ie.current&&ge.current&&(ie.current.style.transform=`${bt}${Tt}translate(${Dt}px,${Rt}px)`,ge.current.style.transform=uSe(sn,1/((l||10)/400)))}else{const Dt=l===void 0?1:aSe(se.current,H)*l;re.style.transform=`translate3d(${$t[0]}px,${$t[1]}px,0) scale(${Dt})`}de.current=$t,le.current=H.zoom}}if(!Be&&Ie.current&&!Ee.current)if(u){if(ie.current){const $t=ie.current.children[0];if($t!=null&&$t.clientWidth&&$t!=null&&$t.clientHeight){const{isOrthographicCamera:mt}=H;if(mt||b)F.scale&&(Array.isArray(F.scale)?F.scale instanceof he?Ie.current.scale.copy(F.scale.clone().divideScalar(1)):Ie.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):Ie.current.scale.setScalar(1/F.scale));else{const ut=(l||10)/400,we=$t.clientWidth*ut,Jt=$t.clientHeight*ut;Ie.current.scale.set(we,Jt,1)}Ee.current=!0}}}else{const $t=re.children[0];if($t!=null&&$t.clientWidth&&$t!=null&&$t.clientHeight){const mt=1/oe.factor,ut=$t.clientWidth*mt,we=$t.clientHeight*mt;Ie.current.scale.set(ut,we,1),Ee.current=!0}Ie.current.lookAt(_t.camera.position)}});const Ht=X.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return X.createElement("group",ar({},F,{ref:se}),f&&!Be&&X.createElement("mesh",{castShadow:p,receiveShadow:m,ref:Ie},b||X.createElement("planeGeometry",null),g||X.createElement("shaderMaterial",{side:Do,vertexShader:Ht.vertexShader,fragmentShader:Ht.fragmentShader})))}),dSe=i=>i;function pSe(i,e=dSe){const t=Ne.useSyncExternalStore(i.subscribe,()=>e(i.getState()),()=>e(i.getInitialState()));return Ne.useDebugValue(t),t}const xj=i=>{const e=nne(i),t=n=>pSe(e,n);return Object.assign(t,e),t},ASe=i=>i?xj(i):xj;let EE=0;const mSe=ASe(i=>(f2.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-EE)/(n-EE)*100})},f2.onLoad=()=>{i({active:!1})},f2.onError=e=>i(t=>({errors:[...t.errors,e]})),f2.onProgress=(e,t,n)=>{t===n&&(EE=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-EE)/(n-EE)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function gSe(i,e,t){return Math.max(e,Math.min(i,t))}const xc={toVector(i,e){return i===void 0&&(i=e),Array.isArray(i)?i:[i,i]},add(i,e){return[i[0]+e[0],i[1]+e[1]]},sub(i,e){return[i[0]-e[0],i[1]-e[1]]},addTo(i,e){i[0]+=e[0],i[1]+=e[1]},subTo(i,e){i[0]-=e[0],i[1]-=e[1]}};function bj(i,e,t){return e===0||Math.abs(e)===1/0?Math.pow(i,t*5):i*e*t/(e+t*i)}function _j(i,e,t,n=.15){return n===0?gSe(i,e,t):i<e?-bj(e-i,t-e,n)+e:i>t?+bj(i-t,t-e,n)+t:i}function ySe(i,[e,t],[n,r]){const[[s,o],[a,l]]=i;return[_j(e,s,o,n),_j(t,a,l,r)]}function vSe(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function xSe(i){var e=vSe(i,"string");return typeof e=="symbol"?e:String(e)}function qu(i,e,t){return e=xSe(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Sj(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Oo(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sj(Object(t),!0).forEach(function(n){qu(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Sj(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const Mne={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Tj(i){return i?i[0].toUpperCase()+i.slice(1):""}const bSe=["enter","leave"];function _Se(i=!1,e){return i&&!bSe.includes(e)}function SSe(i,e="",t=!1){const n=Mne[i],r=n&&n[e]||e;return"on"+Tj(i)+Tj(r)+(_Se(t,r)?"Capture":"")}const TSe=["gotpointercapture","lostpointercapture"];function ESe(i){let e=i.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const n=TSe.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(n);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function wSe(i,e=""){const t=Mne[i],n=t&&t[e]||e;return i+n}function OP(i){return"touches"in i}function Cne(i){return OP(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function MSe(i){return Array.from(i.touches).filter(e=>{var t,n;return e.target===i.currentTarget||((t=i.currentTarget)===null||t===void 0||(n=t.contains)===null||n===void 0?void 0:n.call(t,e.target))})}function CSe(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function Rne(i){return OP(i)?CSe(i)[0]:i}function RSe(i){return MSe(i).map(e=>e.identifier)}function U6(i){const e=Rne(i);return OP(i)?e.identifier:e.pointerId}function Ej(i){const e=Rne(i);return[e.clientX,e.clientY]}function DSe(i){const e={};if("buttons"in i&&(e.buttons=i.buttons),"shiftKey"in i){const{shiftKey:t,altKey:n,metaKey:r,ctrlKey:s}=i;Object.assign(e,{shiftKey:t,altKey:n,metaKey:r,ctrlKey:s})}return e}function qD(i,...e){return typeof i=="function"?i(...e):i}function LSe(){}function PSe(...i){return i.length===0?LSe:i.length===1?i[0]:function(){let e;for(const t of i)e=t.apply(this,arguments)||e;return e}}function wj(i,e){return Object.assign({},e,i||{})}const NSe=32;class BSe{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?qD(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,DSe(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const F=t._delta.map(Math.abs);xc.addTo(t._distance,F)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=n.threshold,{_step:u,values:f}=t;if(n.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[F,k]=f;h[0]=u[0]!==!1?F-u[0]:0,h[1]=u[1]!==!1?k-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const p=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=qD(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[g,b]=t.offset,[[T,C],[R,P]]=t._bounds;t.overflow=[g<T?-1:g>C?1:0,b<R?-1:b>P?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const I=t._active?n.rubberband||[0,0]:[0,0];if(t.offset=ySe(t._bounds,t.offset,I),t.delta=xc.sub(t.offset,p),this.computeMovement(),m&&(!t.last||s>NSe)){t.delta=xc.sub(t.offset,p);const F=t.delta.map(Math.abs);xc.addTo(t.distance,F),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[F[0]/s,F[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(Oo(Oo(Oo({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function ISe([i,e],t){const n=Math.abs(i),r=Math.abs(e);if(n>r&&n>t)return"x";if(r>n&&r>t)return"y"}class OSe extends BSe{constructor(...e){super(...e),qu(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=xc.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=xc.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r=typeof n.axisThreshold=="object"?n.axisThreshold[Cne(e)]:n.axisThreshold;t.axis=ISe(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const FSe=i=>i,Mj=.15,Dne={enabled(i=!0){return i},eventOptions(i,e,t){return Oo(Oo({},t.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[Mj,Mj];case!1:return[0,0];default:return xc.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return xc.toVector(i)},transform(i,e,t){const n=i||t.shared.transform;return this.hasCustomTransform=!!n,n||FSe},threshold(i){return xc.toVector(i,0)}},USe=0,C3=Oo(Oo({},Dne),{},{axis(i,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(i=USe){return i},bounds(i={}){if(typeof i=="function")return s=>C3.bounds(i(s));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:e=-1/0,right:t=1/0,top:n=-1/0,bottom:r=1/0}=i;return[[e,t],[n,r]]}}),Cj={ArrowRight:(i,e=1)=>[i*e,0],ArrowLeft:(i,e=1)=>[-1*i*e,0],ArrowUp:(i,e=1)=>[0,-1*i*e],ArrowDown:(i,e=1)=>[0,i*e]};class kSe extends OSe{constructor(...e){super(...e),qu(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=C3.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=U6(e),n._pointerActive=!0,this.computeValues(Ej(e)),this.computeInitial(),t.preventScrollAxis&&Cne(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=U6(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=Ej(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=xc.sub(s,t._values),this.computeValues(s)),xc.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=U6(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,u]=t._movement,[f,h]=n.swipe.velocity,[p,m]=n.swipe.distance,g=n.swipe.duration;if(t.elapsedTime<g){const b=Math.abs(a/t.timeDelta),T=Math.abs(l/t.timeDelta);b>f&&Math.abs(c)>p&&(t.swipe[0]=Math.sign(a)),T>h&&Math.abs(u)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,GSe(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=Cj[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,xc.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Cj&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function GSe(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const R3=typeof window<"u"&&window.document&&window.document.createElement;function Lne(){return R3&&"ontouchstart"in window}function zSe(){return Lne()||R3&&window.navigator.maxTouchPoints>1}function HSe(){return R3&&"onpointerdown"in window}function VSe(){return R3&&"exitPointerLock"in window.document}function qSe(){try{return"constructor"in GestureEvent}catch{return!1}}const sd={isBrowser:R3,gesture:qSe(),touch:Lne(),touchscreen:zSe(),pointer:HSe(),pointerLock:VSe()},$Se=250,jSe=180,WSe=.5,KSe=50,YSe=250,XSe=10,Rj={mouse:0,touch:0,pen:8},QSe=Oo(Oo({},C3),{},{device(i,e,{pointer:{touch:t=!1,lock:n=!1,mouse:r=!1}={}}){return this.pointerLock=n&&sd.pointerLock,sd.touch&&t?"touch":this.pointerLock?"mouse":sd.pointer&&!r?"pointer":sd.touch?"touch":"mouse"},preventScrollAxis(i,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&i?$Se:void 0,!(!sd.touchscreen||t===!1))return i||(t!==void 0?"y":void 0)},pointerCapture(i,e,{pointer:{capture:t=!0,buttons:n=1,keys:r=!0}={}}){return this.pointerButtons=n,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(i,e,{filterTaps:t=!1,tapsThreshold:n=3,axis:r=void 0}){const s=xc.toVector(i,t?n:r?1:0);return this.filterTaps=t,this.tapsThreshold=n,s},swipe({velocity:i=WSe,distance:e=KSe,duration:t=YSe}={}){return{velocity:this.transform(xc.toVector(i)),distance:this.transform(xc.toVector(e)),duration:t}},delay(i=0){switch(i){case!0:return jSe;case!1:return 0;default:return i}},axisThreshold(i){return i?Oo(Oo({},Rj),i):Rj},keyboardDisplacement(i=XSe){return i}});Oo(Oo({},Dne),{},{device(i,e,{shared:t,pointer:{touch:n=!1}={}}){if(t.target&&!sd.touch&&sd.gesture)return"gesture";if(sd.touch&&n)return"touch";if(sd.touchscreen){if(sd.pointer)return"pointer";if(sd.touch)return"touch"}},bounds(i,e,{scaleBounds:t={},angleBounds:n={}}){const r=o=>{const a=wj(qD(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=wj(qD(n,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof n!="function"?[r(),s()]:o=>[r(o),s(o)]},threshold(i,e,t){return this.lockDirection=t.axis==="lock",xc.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});Oo(Oo({},C3),{},{mouseOnly:(i=!0)=>i});Oo(Oo({},C3),{},{mouseOnly:(i=!0)=>i});const Pne=new Map,UF=new Map;function ZSe(i){Pne.set(i.key,i.engine),UF.set(i.key,i.resolver)}const JSe={key:"drag",engine:kSe,resolver:QSe};function eTe(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function tTe(i,e){if(i==null)return{};var t=eTe(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}const nTe={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=sd.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:e=!1}={}){return{passive:i,capture:e}},transform(i){return i}},iTe=["target","eventOptions","window","enabled","transform"];function J4(i={},e){const t={};for(const[n,r]of Object.entries(e))switch(typeof r){case"function":t[n]=r.call(t,i[n],n,i);break;case"object":t[n]=J4(i[n],r);break;case"boolean":r&&(t[n]=i[n]);break}return t}function rTe(i,e,t={}){const n=i,{target:r,eventOptions:s,window:o,enabled:a,transform:l}=n,c=tTe(n,iTe);if(t.shared=J4({target:r,eventOptions:s,window:o,enabled:a,transform:l},nTe),e){const u=UF.get(e);t[e]=J4(Oo({shared:t.shared},c),u)}else for(const u in c){const f=UF.get(u);f&&(t[u]=J4(Oo({shared:t.shared},c[u]),f))}return t}class Nne{constructor(e,t){qu(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,s){const o=this._listeners,a=wSe(t,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Oo(Oo({},l),s);e.addEventListener(a,r,c);const u=()=>{e.removeEventListener(a,r,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class sTe{constructor(){qu(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class oTe{constructor(e){qu(this,"gestures",new Set),qu(this,"_targetEventStore",new Nne(this)),qu(this,"gestureEventStores",{}),qu(this,"gestureTimeoutStores",{}),qu(this,"handlers",{}),qu(this,"config",{}),qu(this,"pointerIds",new Set),qu(this,"touchIds",new Set),qu(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),aTe(this,e)}setEventIds(e){if(OP(e))return this.touchIds=new Set(RSe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=rTe(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=Dj(n,a.eventOptions,!!r);if(a.enabled){const c=Pne.get(o);new c(this,e,o).bind(l)}}const s=Dj(n,t.eventOptions,!!r);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](Oo(Oo({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in n)n[s]=PSe(...n[s]);if(!r)return n;for(const s in n){const{device:o,capture:a,passive:l}=ESe(s);this._targetEventStore.add(r,o,"",n[s],{capture:a,passive:l})}}}}function T_(i,e){i.gestures.add(e),i.gestureEventStores[e]=new Nne(i,e),i.gestureTimeoutStores[e]=new sTe}function aTe(i,e){e.drag&&T_(i,"drag"),e.wheel&&T_(i,"wheel"),e.scroll&&T_(i,"scroll"),e.move&&T_(i,"move"),e.pinch&&T_(i,"pinch"),e.hover&&T_(i,"hover")}const Dj=(i,e,t)=>(n,r,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?n:SSe(n,r,u);t&&f&&(h+="Passive"),i[h]=i[h]||[],i[h].push(s)};function lTe(i,e={},t,n){const r=Ne.useMemo(()=>new oTe(i),[]);if(r.applyHandlers(i,n),r.applyConfig(e,t),Ne.useEffect(r.effect.bind(r)),Ne.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function cTe(i,e){return ZSe(JSe),lTe({drag:i},e||{},"drag")}function Ow(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function kF(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function uTe(i,e){if(i){if(typeof i=="string")return kF(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kF(i,e)}}function fTe(i){if(Array.isArray(i))return kF(i)}function hTe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function dTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pTe(i){return fTe(i)||hTe(i)||uTe(i)||dTe()}new at;new at;function ATe(i,e,t){return Math.max(e,Math.min(t,i))}function mTe(i,e){return ATe(i-Math.floor(i/e)*e,0,e)}function gTe(i,e){var t=mTe(e-i,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Bne(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var Wh=function i(e,t,n){var r=this;Bne(this,i),Ow(this,"dot2",function(s,o){return r.x*s+r.y*o}),Ow(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=n},yTe=[new Wh(1,1,0),new Wh(-1,1,0),new Wh(1,-1,0),new Wh(-1,-1,0),new Wh(1,0,1),new Wh(-1,0,1),new Wh(1,0,-1),new Wh(-1,0,-1),new Wh(0,1,1),new Wh(0,-1,1),new Wh(0,1,-1),new Wh(0,-1,-1)],Lj=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Pj=new Array(512),Nj=new Array(512),vTe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=Lj[t]^e&255:n=Lj[t]^e>>8&255,Pj[t]=Pj[t+256]=n,Nj[t]=Nj[t+256]=yTe[n%12]}};vTe(0);function xTe(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function Bj(i){var e=xTe(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var bTe=function i(e){var t=this;Bne(this,i),Ow(this,"seed",0),Ow(this,"init",function(n){t.seed=n,t.value=Bj(n)}),Ow(this,"value",Bj(this.seed)),this.init(e)};new bTe(Math.random());var _Te=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},Ine=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},STe=function(e){return e},TTe={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},ETe={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},wTe={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},MTe={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},CTe={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},RTe={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function el(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Ine,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(i.__damp===void 0&&(i.__damp={}),i.__damp[l]===void 0&&(i.__damp[l]=0),Math.abs(i[e]-t)<=a)return i[e]=t,!1;n=Math.max(1e-4,n);var c=2/n,u=o(c*r),f=i[e]-t,h=t,p=s*n;f=Math.min(Math.max(f,-p),p),t=i[e]-f;var m=(i.__damp[l]+c*f)*r;i.__damp[l]=(i.__damp[l]-c*m)*u;var g=t+(f+m)*u;return h-i[e]>0==g>h&&(g=h,i.__damp[l]=(g-h)/r),i[e]=g,!0}var DTe=function(e){return e&&e.isCamera},LTe=function(e){return e&&e.isLight},wE=new he,Ij=new Br,Oj=new Br,ME=new rn,k6=new he;function PTe(i,e,t,n,r,s,o){typeof e=="number"?wE.setScalar(e):Array.isArray(e)?wE.set(e[0],e[1],e[2]):wE.copy(e);var a=i.parent;i.updateWorldMatrix(!0,!1),k6.setFromMatrixPosition(i.matrixWorld),DTe(i)||LTe(i)?ME.lookAt(k6,wE,i.up):ME.lookAt(wE,k6,i.up),$D(i.quaternion,Oj.setFromRotationMatrix(ME),t,n,r,s,o),a&&(ME.extractRotation(a.matrixWorld),Ij.setFromRotationMatrix(ME),$D(i.quaternion,Oj.copy(i.quaternion).premultiply(Ij.invert()),t,n,r,s,o))}function M2(i,e,t,n,r,s,o,a){return el(i,e,i[e]+gTe(i[e],t),n,r,s,o,a)}var CE=new at,Fj,Uj;function NTe(i,e,t,n,r,s,o){return typeof e=="number"?CE.setScalar(e):Array.isArray(e)?CE.set(e[0],e[1]):CE.copy(e),Fj=el(i,"x",CE.x,t,n,r,s,o),Uj=el(i,"y",CE.y,t,n,r,s,o),Fj||Uj}var E_=new he,kj,Gj,zj;function GF(i,e,t,n,r,s,o){return typeof e=="number"?E_.setScalar(e):Array.isArray(e)?E_.set(e[0],e[1],e[2]):E_.copy(e),kj=el(i,"x",E_.x,t,n,r,s,o),Gj=el(i,"y",E_.y,t,n,r,s,o),zj=el(i,"z",E_.z,t,n,r,s,o),kj||Gj||zj}var cv=new Ln,Hj,Vj,qj,$j;function BTe(i,e,t,n,r,s,o){return typeof e=="number"?cv.setScalar(e):Array.isArray(e)?cv.set(e[0],e[1],e[2],e[3]):cv.copy(e),Hj=el(i,"x",cv.x,t,n,r,s,o),Vj=el(i,"y",cv.y,t,n,r,s,o),qj=el(i,"z",cv.z,t,n,r,s,o),$j=el(i,"w",cv.w,t,n,r,s,o),Hj||Vj||qj||$j}var RE=new Io,jj,Wj,Kj;function ITe(i,e,t,n,r,s,o){return Array.isArray(e)?RE.set(e[0],e[1],e[2],e[3]):RE.copy(e),jj=M2(i,"x",RE.x,t,n,r,s,o),Wj=M2(i,"y",RE.y,t,n,r,s,o),Kj=M2(i,"z",RE.z,t,n,r,s,o),jj||Wj||Kj}var w_=new Qt,Yj,Xj,Qj;function OTe(i,e,t,n,r,s,o){return e instanceof Qt?w_.copy(e):Array.isArray(e)?w_.setRGB(e[0],e[1],e[2]):w_.set(e),Yj=el(i,"r",w_.r,t,n,r,s,o),Xj=el(i,"g",w_.g,t,n,r,s,o),Qj=el(i,"b",w_.b,t,n,r,s,o),Yj||Xj||Qj}var Ap=new Br,gm=new Ln,Zj=new Ln,DE=new Ln,Jj,eW,tW,nW;function $D(i,e,t,n,r,s,o){var a=i;Array.isArray(e)?Ap.set(e[0],e[1],e[2],e[3]):Ap.copy(e);var l=i.dot(Ap)>0?1:-1;return Ap.x*=l,Ap.y*=l,Ap.z*=l,Ap.w*=l,Jj=el(i,"x",Ap.x,t,n,r,s,o),eW=el(i,"y",Ap.y,t,n,r,s,o),tW=el(i,"z",Ap.z,t,n,r,s,o),nW=el(i,"w",Ap.w,t,n,r,s,o),gm.set(i.x,i.y,i.z,i.w).normalize(),Zj.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),DE.copy(gm).multiplyScalar(Zj.dot(gm)/gm.dot(gm)),a.__damp.velocity_x-=DE.x,a.__damp.velocity_y-=DE.y,a.__damp.velocity_z-=DE.z,a.__damp.velocity_w-=DE.w,i.set(gm.x,gm.y,gm.z,gm.w),Jj||eW||tW||nW}var LE=new pS,iW,rW,sW;function FTe(i,e,t,n,r,s,o){return Array.isArray(e)?LE.set(e[0],e[1],e[2]):LE.copy(e),iW=el(i,"radius",LE.radius,t,n,r,s,o),rW=M2(i,"phi",LE.phi,t,n,r,s,o),sW=M2(i,"theta",LE.theta,t,n,r,s,o),iW||rW||sW}var y5=new rn,oW=new he,aW=new Br,lW=new he,cW,uW,fW;function UTe(i,e,t,n,r,s,o){var a=i;return a.__damp===void 0&&(a.__damp={position:new he,rotation:new Br,scale:new he},i.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?y5.set.apply(y5,pTe(e)):y5.copy(e),y5.decompose(oW,aW,lW),cW=GF(a.__damp.position,oW,t,n,r,s,o),uW=$D(a.__damp.rotation,aW,t,n,r,s,o),fW=GF(a.__damp.scale,lW,t,n,r,s,o),i.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),cW||uW||fW}var hW=Object.freeze({__proto__:null,rsqw:_Te,exp:Ine,linear:STe,sine:TTe,cubic:ETe,quint:wTe,circ:MTe,quart:CTe,expo:RTe,damp:el,dampLookAt:PTe,dampAngle:M2,damp2:NTe,damp3:GF,damp4:BTe,dampE:ITe,dampC:OTe,dampQ:$D,dampS:FTe,dampM:UTe});const One=parseInt(a1.replace(/\D+/g,"")),kTe=One>=125?"uv1":"uv2";function dW(i,e){if(e===W7)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===lS||e===oP){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===lS)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var ld=Uint8Array,Ny=Uint16Array,zF=Uint32Array,Fne=new ld([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Une=new ld([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GTe=new ld([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kne=function(i,e){for(var t=new Ny(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new zF(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},Gne=kne(Fne,2),zne=Gne[0],zTe=Gne[1];zne[28]=258,zTe[258]=28;var HTe=kne(Une,0),VTe=HTe[0],HF=new Ny(32768);for(var Ws=0;Ws<32768;++Ws){var dy=(Ws&43690)>>>1|(Ws&21845)<<1;dy=(dy&52428)>>>2|(dy&13107)<<2,dy=(dy&61680)>>>4|(dy&3855)<<4,HF[Ws]=((dy&65280)>>>8|(dy&255)<<8)>>>1}var Fw=function(i,e,t){for(var n=i.length,r=0,s=new Ny(e);r<n;++r)++s[i[r]-1];var o=new Ny(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new Ny(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var c=r<<4|i[r],u=e-i[r],f=o[i[r]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[HF[f]>>>l]=c}else for(a=new Ny(n),r=0;r<n;++r)i[r]&&(a[r]=HF[o[i[r]-1]++]>>>15-i[r]);return a},D3=new ld(288);for(var Ws=0;Ws<144;++Ws)D3[Ws]=8;for(var Ws=144;Ws<256;++Ws)D3[Ws]=9;for(var Ws=256;Ws<280;++Ws)D3[Ws]=7;for(var Ws=280;Ws<288;++Ws)D3[Ws]=8;var Hne=new ld(32);for(var Ws=0;Ws<32;++Ws)Hne[Ws]=5;var qTe=Fw(D3,9,1),$Te=Fw(Hne,5,1),G6=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},mp=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},z6=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},jTe=function(i){return(i/8|0)+(i&7&&1)},WTe=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof Ny?Ny:i instanceof zF?zF:ld)(t-e);return n.set(i.subarray(e,t)),n},KTe=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new ld(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ld(n*3));var o=function(qe){var it=e.length;if(qe>it){var et=new ld(Math.max(it*2,qe));et.set(e),e=et}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,f=t.d,h=t.m,p=t.n,m=n*8;do{if(!u){t.f=a=mp(i,l,1);var g=mp(i,l+1,3);if(l+=3,g)if(g==1)u=qTe,f=$Te,h=9,p=5;else if(g==2){var R=mp(i,l,31)+257,P=mp(i,l+10,15)+4,I=R+mp(i,l+5,31)+1;l+=14;for(var F=new ld(I),k=new ld(19),q=0;q<P;++q)k[GTe[q]]=mp(i,l+q*3,7);l+=P*3;for(var H=G6(k),O=(1<<H)-1,$=Fw(k,H,1),q=0;q<I;){var ee=$[mp(i,l,O)];l+=ee&15;var b=ee>>>4;if(b<16)F[q++]=b;else{var Y=0,oe=0;for(b==16?(oe=3+mp(i,l,3),l+=2,Y=F[q-1]):b==17?(oe=3+mp(i,l,7),l+=3):b==18&&(oe=11+mp(i,l,127),l+=7);oe--;)F[q++]=Y}}var re=F.subarray(0,R),Q=F.subarray(R);h=G6(re),p=G6(Q),u=Fw(re,h,1),f=Fw(Q,p,1)}else throw"invalid block type";else{var b=jTe(l)+4,T=i[b-4]|i[b-3]<<8,C=b+T;if(C>n){if(s)throw"unexpected EOF";break}r&&o(c+T),e.set(i.subarray(b,C),c),t.b=c+=T,t.p=l=C*8;continue}if(l>m){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var se=(1<<h)-1,le=(1<<p)-1,de=l;;de=l){var Y=u[z6(i,l)&se],ie=Y>>>4;if(l+=Y&15,l>m){if(s)throw"unexpected EOF";break}if(!Y)throw"invalid length/literal";if(ie<256)e[c++]=ie;else if(ie==256){de=l,u=null;break}else{var ge=ie-254;if(ie>264){var q=ie-257,Ce=Fne[q];ge=mp(i,l,(1<<Ce)-1)+zne[q],l+=Ce}var Ie=f[z6(i,l)&le],Ee=Ie>>>4;if(!Ie)throw"invalid distance";l+=Ie&15;var Q=VTe[Ee];if(Ee>3){var Ce=Une[Ee];Q+=z6(i,l)&(1<<Ce)-1,l+=Ce}if(l>m){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Be=c+ge;c<Be;c+=4)e[c]=e[c-Q],e[c+1]=e[c+1-Q],e[c+2]=e[c+2-Q],e[c+3]=e[c+3-Q];c=Be}}t.l=u,t.p=de,t.b=c,u&&(a=1,t.m=h,t.d=f,t.n=p)}while(!a);return c==e.length?e:WTe(e,0,c)},YTe=new ld(0),XTe=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function QTe(i,e){return KTe((XTe(i),i.subarray(2,-4)),e)}var ZTe=typeof TextDecoder<"u"&&new TextDecoder,JTe=0;try{ZTe.decode(YTe,{stream:!0}),JTe=1}catch{}function Vne(i,e,t={}){const n=new he,r=new Br,s=new he,o=new rn,a=new rn,l=new rn;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const c=e.isObject3D?e.skeleton.bones:jD(e),u=i.isObject3D?i.skeleton.bones:jD(i);let f,h,p,m,g;if(i.isObject3D?i.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){g=[];for(let b=0;b<u.length;b++)g.push(u[b].position.clone())}if(t.preserveMatrix){i.updateMatrixWorld(),i.matrixWorld.identity();for(let b=0;b<i.children.length;++b)i.children[b].updateMatrixWorld(!0)}if(t.offsets){f=[];for(let b=0;b<u.length;++b)h=u[b],p=t.names[h.name]||h.name,t.offsets[p]&&(h.matrix.multiply(t.offsets[p]),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()),f.push(h.matrixWorld.clone())}for(let b=0;b<u.length;++b){if(h=u[b],p=t.names[h.name]||h.name,m=qne(p,c),l.copy(h.matrixWorld),m){if(m.updateMatrixWorld(),t.useTargetMatrix?a.copy(m.matrixWorld):(a.copy(i.matrixWorld).invert(),a.multiply(m.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(r.setFromRotationMatrix(a)),i.isObject3D){const T=u.indexOf(h),C=f?f[T]:o.copy(i.skeleton.boneInverses[T]).invert();l.multiply(C)}l.copyPosition(a)}h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(l)):h.matrix.copy(l),t.preserveHipPosition&&p===t.hip&&h.matrix.setPosition(n.set(0,h.position.y,0)),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()}if(t.preservePosition)for(let b=0;b<u.length;++b)h=u[b],p=t.names[h.name]||h.name,p!==t.hip&&h.position.copy(g[b]);t.preserveMatrix&&i.updateMatrixWorld(!0)}function eEe(i,e,t,n={}){n.useFirstFramePosition=n.useFirstFramePosition!==void 0?n.useFirstFramePosition:!1,n.fps=n.fps!==void 0?n.fps:30,n.names=n.names||[],e.isObject3D||(e=nEe(e));const r=Math.round(t.duration*(n.fps/1e3)*1e3),s=1/n.fps,o=[],a=new N9(e),l=jD(i.skeleton),c=[];let u,f,h,p,m;a.clipAction(t).play(),a.update(0),e.updateMatrixWorld();for(let g=0;g<r;++g){const b=g*s;Vne(i,e,n);for(let T=0;T<l.length;++T)m=n.names[l[T].name]||l[T].name,h=qne(m,e.skeleton),h&&(f=l[T],p=c[T]=c[T]||{bone:f},n.hip===m&&(p.pos||(p.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),n.useFirstFramePosition&&(g===0&&(u=f.position.clone()),f.position.sub(u)),p.pos.times[g]=b,f.position.toArray(p.pos.values,g*3)),p.quat||(p.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),p.quat.times[g]=b,f.quaternion.toArray(p.quat.values,g*4));a.update(s),e.updateMatrixWorld()}for(let g=0;g<c.length;++g)p=c[g],p&&(p.pos&&o.push(new ng(".bones["+p.bone.name+"].position",p.pos.times,p.pos.values)),o.push(new tg(".bones["+p.bone.name+"].quaternion",p.quat.times,p.quat.values)));return a.uncacheAction(t),new Qy(t.name,-1,o)}function tEe(i){const e=new Map,t=new Map,n=i.clone();return $ne(i,n,function(r,s){e.set(s,r),t.set(r,s)}),n.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return t.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),n}function qne(i,e){for(let t=0,n=jD(e);t<n.length;t++)if(i===n[t].name)return n[t]}function jD(i){return Array.isArray(i)?i:i.bones}function nEe(i){const e=new Wte(i.bones[0]);return e.skeleton=i,e}function $ne(i,e,t){t(i,e);for(let n=0;n<i.children.length;n++)$ne(i.children[n],e.children[n],t)}const iEe={retarget:Vne,retargetClip:eEe,clone:tEe};var rEe=Object.defineProperty,sEe=(i,e,t)=>e in i?rEe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,oEe=(i,e,t)=>(sEe(i,e+"",t),t);class aEe{constructor(){oEe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var lEe=Object.defineProperty,cEe=(i,e,t)=>e in i?lEe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,hi=(i,e,t)=>(cEe(i,typeof e!="symbol"?e+"":e,t),t);const v5=new c1,pW=new rd,uEe=Math.cos(70*(Math.PI/180)),AW=(i,e)=>(i%e+e)%e;let fEe=class extends aEe{constructor(e,t){super(),hi(this,"object"),hi(this,"domElement"),hi(this,"enabled",!0),hi(this,"target",new he),hi(this,"minDistance",0),hi(this,"maxDistance",1/0),hi(this,"minZoom",0),hi(this,"maxZoom",1/0),hi(this,"minPolarAngle",0),hi(this,"maxPolarAngle",Math.PI),hi(this,"minAzimuthAngle",-1/0),hi(this,"maxAzimuthAngle",1/0),hi(this,"enableDamping",!1),hi(this,"dampingFactor",.05),hi(this,"enableZoom",!0),hi(this,"zoomSpeed",1),hi(this,"enableRotate",!0),hi(this,"rotateSpeed",1),hi(this,"enablePan",!0),hi(this,"panSpeed",1),hi(this,"screenSpacePanning",!0),hi(this,"keyPanSpeed",7),hi(this,"zoomToCursor",!1),hi(this,"autoRotate",!1),hi(this,"autoRotateSpeed",2),hi(this,"reverseOrbit",!1),hi(this,"reverseHorizontalOrbit",!1),hi(this,"reverseVerticalOrbit",!1),hi(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),hi(this,"mouseButtons",{LEFT:Qa.ROTATE,MIDDLE:Qa.DOLLY,RIGHT:Qa.PAN}),hi(this,"touches",{ONE:Yf.ROTATE,TWO:Yf.DOLLY_PAN}),hi(this,"target0"),hi(this,"position0"),hi(this,"zoom0"),hi(this,"_domElementKeyEvents",null),hi(this,"getPolarAngle"),hi(this,"getAzimuthalAngle"),hi(this,"setPolarAngle"),hi(this,"setAzimuthalAngle"),hi(this,"getDistance"),hi(this,"getZoomScale"),hi(this,"listenToKeyEvents"),hi(this,"stopListenToKeyEvents"),hi(this,"saveState"),hi(this,"reset"),hi(this,"update"),hi(this,"connect"),hi(this,"dispose"),hi(this,"dollyIn"),hi(this,"dollyOut"),hi(this,"getScale"),hi(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Fe=>{let xt=AW(Fe,2*Math.PI),dn=u.phi;dn<0&&(dn+=2*Math.PI),xt<0&&(xt+=2*Math.PI);let Te=Math.abs(xt-dn);2*Math.PI-Te<Te&&(xt<dn?xt+=2*Math.PI:dn+=2*Math.PI),f.phi=xt-dn,n.update()},this.setAzimuthalAngle=Fe=>{let xt=AW(Fe,2*Math.PI),dn=u.theta;dn<0&&(dn+=2*Math.PI),xt<0&&(xt+=2*Math.PI);let Te=Math.abs(xt-dn);2*Math.PI-Te<Te&&(xt<dn?xt+=2*Math.PI:dn+=2*Math.PI),f.theta=xt-dn,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=Fe=>{Fe.addEventListener("keydown",on),this._domElementKeyEvents=Fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",on),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=a.NONE},this.update=(()=>{const Fe=new he,xt=new he(0,1,0),dn=new Br().setFromUnitVectors(e.up,xt),Te=dn.clone().invert(),tn=new he,At=new Br,Lt=2*Math.PI;return function(){const xn=n.object.position;dn.setFromUnitVectors(e.up,xt),Te.copy(dn).invert(),Fe.copy(xn).sub(n.target),Fe.applyQuaternion(dn),u.setFromVector3(Fe),n.autoRotate&&l===a.NONE&&oe(ee()),n.enableDamping?(u.theta+=f.theta*n.dampingFactor,u.phi+=f.phi*n.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let Nn=n.minAzimuthAngle,Fi=n.maxAzimuthAngle;isFinite(Nn)&&isFinite(Fi)&&(Nn<-Math.PI?Nn+=Lt:Nn>Math.PI&&(Nn-=Lt),Fi<-Math.PI?Fi+=Lt:Fi>Math.PI&&(Fi-=Lt),Nn<=Fi?u.theta=Math.max(Nn,Math.min(Fi,u.theta)):u.theta=u.theta>(Nn+Fi)/2?Math.max(Nn,u.theta):Math.min(Fi,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.zoomToCursor&&H||n.object.isOrthographicCamera?u.radius=Ie(u.radius):u.radius=Ie(u.radius*h),Fe.setFromSpherical(u),Fe.applyQuaternion(Te),xn.copy(n.target).add(Fe),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),p.set(0,0,0));let Dn=!1;if(n.zoomToCursor&&H){let Gn=null;if(n.object instanceof ls&&n.object.isPerspectiveCamera){const Gr=Fe.length();Gn=Ie(Gr*h);const Qr=Gr-Gn;n.object.position.addScaledVector(k,Qr),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Gr=new he(q.x,q.y,0);Gr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),Dn=!0;const Qr=new he(q.x,q.y,0);Qr.unproject(n.object),n.object.position.sub(Qr).add(Gr),n.object.updateMatrixWorld(),Gn=Fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Gn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Gn).add(n.object.position):(v5.origin.copy(n.object.position),v5.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(v5.direction))<uEe?e.lookAt(n.target):(pW.setFromNormalAndCoplanarPoint(n.object.up,n.target),v5.intersectPlane(pW,n.target))))}else n.object instanceof du&&n.object.isOrthographicCamera&&(Dn=h!==1,Dn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,H=!1,Dn||tn.distanceToSquared(n.object.position)>c||8*(1-At.dot(n.object.quaternion))>c?(n.dispatchEvent(r),tn.copy(n.object.position),At.copy(n.object.quaternion),Dn=!1,!0):!1}})(),this.connect=Fe=>{n.domElement=Fe,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Vt),n.domElement.addEventListener("pointerdown",fe),n.domElement.addEventListener("pointercancel",Ve),n.domElement.addEventListener("wheel",sn)},this.dispose=()=>{var Fe,xt,dn,Te,tn,At;n.domElement&&(n.domElement.style.touchAction="auto"),(Fe=n.domElement)==null||Fe.removeEventListener("contextmenu",Vt),(xt=n.domElement)==null||xt.removeEventListener("pointerdown",fe),(dn=n.domElement)==null||dn.removeEventListener("pointercancel",Ve),(Te=n.domElement)==null||Te.removeEventListener("wheel",sn),(tn=n.domElement)==null||tn.ownerDocument.removeEventListener("pointermove",Pe),(At=n.domElement)==null||At.ownerDocument.removeEventListener("pointerup",Ve),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",on)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new pS,f=new pS;let h=1;const p=new he,m=new at,g=new at,b=new at,T=new at,C=new at,R=new at,P=new at,I=new at,F=new at,k=new he,q=new at;let H=!1;const O=[],$={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Y(){return Math.pow(.95,n.zoomSpeed)}function oe(Fe){n.reverseOrbit||n.reverseHorizontalOrbit?f.theta+=Fe:f.theta-=Fe}function re(Fe){n.reverseOrbit||n.reverseVerticalOrbit?f.phi+=Fe:f.phi-=Fe}const Q=(()=>{const Fe=new he;return function(dn,Te){Fe.setFromMatrixColumn(Te,0),Fe.multiplyScalar(-dn),p.add(Fe)}})(),se=(()=>{const Fe=new he;return function(dn,Te){n.screenSpacePanning===!0?Fe.setFromMatrixColumn(Te,1):(Fe.setFromMatrixColumn(Te,0),Fe.crossVectors(n.object.up,Fe)),Fe.multiplyScalar(dn),p.add(Fe)}})(),le=(()=>{const Fe=new he;return function(dn,Te){const tn=n.domElement;if(tn&&n.object instanceof ls&&n.object.isPerspectiveCamera){const At=n.object.position;Fe.copy(At).sub(n.target);let Lt=Fe.length();Lt*=Math.tan(n.object.fov/2*Math.PI/180),Q(2*dn*Lt/tn.clientHeight,n.object.matrix),se(2*Te*Lt/tn.clientHeight,n.object.matrix)}else tn&&n.object instanceof du&&n.object.isOrthographicCamera?(Q(dn*(n.object.right-n.object.left)/n.object.zoom/tn.clientWidth,n.object.matrix),se(Te*(n.object.top-n.object.bottom)/n.object.zoom/tn.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function de(Fe){n.object instanceof ls&&n.object.isPerspectiveCamera||n.object instanceof du&&n.object.isOrthographicCamera?h=Fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ie(Fe){de(h/Fe)}function ge(Fe){de(h*Fe)}function Ce(Fe){if(!n.zoomToCursor||!n.domElement)return;H=!0;const xt=n.domElement.getBoundingClientRect(),dn=Fe.clientX-xt.left,Te=Fe.clientY-xt.top,tn=xt.width,At=xt.height;q.x=dn/tn*2-1,q.y=-(Te/At)*2+1,k.set(q.x,q.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ie(Fe){return Math.max(n.minDistance,Math.min(n.maxDistance,Fe))}function Ee(Fe){m.set(Fe.clientX,Fe.clientY)}function Be(Fe){Ce(Fe),P.set(Fe.clientX,Fe.clientY)}function qe(Fe){T.set(Fe.clientX,Fe.clientY)}function it(Fe){g.set(Fe.clientX,Fe.clientY),b.subVectors(g,m).multiplyScalar(n.rotateSpeed);const xt=n.domElement;xt&&(oe(2*Math.PI*b.x/xt.clientHeight),re(2*Math.PI*b.y/xt.clientHeight)),m.copy(g),n.update()}function et(Fe){I.set(Fe.clientX,Fe.clientY),F.subVectors(I,P),F.y>0?ie(Y()):F.y<0&&ge(Y()),P.copy(I),n.update()}function Ht(Fe){C.set(Fe.clientX,Fe.clientY),R.subVectors(C,T).multiplyScalar(n.panSpeed),le(R.x,R.y),T.copy(C),n.update()}function _t(Fe){Ce(Fe),Fe.deltaY<0?ge(Y()):Fe.deltaY>0&&ie(Y()),n.update()}function $t(Fe){let xt=!1;switch(Fe.code){case n.keys.UP:le(0,n.keyPanSpeed),xt=!0;break;case n.keys.BOTTOM:le(0,-n.keyPanSpeed),xt=!0;break;case n.keys.LEFT:le(n.keyPanSpeed,0),xt=!0;break;case n.keys.RIGHT:le(-n.keyPanSpeed,0),xt=!0;break}xt&&(Fe.preventDefault(),n.update())}function mt(){if(O.length==1)m.set(O[0].pageX,O[0].pageY);else{const Fe=.5*(O[0].pageX+O[1].pageX),xt=.5*(O[0].pageY+O[1].pageY);m.set(Fe,xt)}}function ut(){if(O.length==1)T.set(O[0].pageX,O[0].pageY);else{const Fe=.5*(O[0].pageX+O[1].pageX),xt=.5*(O[0].pageY+O[1].pageY);T.set(Fe,xt)}}function we(){const Fe=O[0].pageX-O[1].pageX,xt=O[0].pageY-O[1].pageY,dn=Math.sqrt(Fe*Fe+xt*xt);P.set(0,dn)}function Jt(){n.enableZoom&&we(),n.enablePan&&ut()}function ft(){n.enableZoom&&we(),n.enableRotate&&mt()}function Dt(Fe){if(O.length==1)g.set(Fe.pageX,Fe.pageY);else{const dn=Sn(Fe),Te=.5*(Fe.pageX+dn.x),tn=.5*(Fe.pageY+dn.y);g.set(Te,tn)}b.subVectors(g,m).multiplyScalar(n.rotateSpeed);const xt=n.domElement;xt&&(oe(2*Math.PI*b.x/xt.clientHeight),re(2*Math.PI*b.y/xt.clientHeight)),m.copy(g)}function Rt(Fe){if(O.length==1)C.set(Fe.pageX,Fe.pageY);else{const xt=Sn(Fe),dn=.5*(Fe.pageX+xt.x),Te=.5*(Fe.pageY+xt.y);C.set(dn,Te)}R.subVectors(C,T).multiplyScalar(n.panSpeed),le(R.x,R.y),T.copy(C)}function yn(Fe){const xt=Sn(Fe),dn=Fe.pageX-xt.x,Te=Fe.pageY-xt.y,tn=Math.sqrt(dn*dn+Te*Te);I.set(0,tn),F.set(0,Math.pow(I.y/P.y,n.zoomSpeed)),ie(F.y),P.copy(I)}function Gt(Fe){n.enableZoom&&yn(Fe),n.enablePan&&Rt(Fe)}function Se(Fe){n.enableZoom&&yn(Fe),n.enableRotate&&Dt(Fe)}function fe(Fe){var xt,dn;n.enabled!==!1&&(O.length===0&&((xt=n.domElement)==null||xt.ownerDocument.addEventListener("pointermove",Pe),(dn=n.domElement)==null||dn.ownerDocument.addEventListener("pointerup",Ve)),_n(Fe),Fe.pointerType==="touch"?mn(Fe):Tt(Fe))}function Pe(Fe){n.enabled!==!1&&(Fe.pointerType==="touch"?ai(Fe):bt(Fe))}function Ve(Fe){var xt,dn,Te;En(Fe),O.length===0&&((xt=n.domElement)==null||xt.releasePointerCapture(Fe.pointerId),(dn=n.domElement)==null||dn.ownerDocument.removeEventListener("pointermove",Pe),(Te=n.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",Ve)),n.dispatchEvent(o),l=a.NONE}function Tt(Fe){let xt;switch(Fe.button){case 0:xt=n.mouseButtons.LEFT;break;case 1:xt=n.mouseButtons.MIDDLE;break;case 2:xt=n.mouseButtons.RIGHT;break;default:xt=-1}switch(xt){case Qa.DOLLY:if(n.enableZoom===!1)return;Be(Fe),l=a.DOLLY;break;case Qa.ROTATE:if(Fe.ctrlKey||Fe.metaKey||Fe.shiftKey){if(n.enablePan===!1)return;qe(Fe),l=a.PAN}else{if(n.enableRotate===!1)return;Ee(Fe),l=a.ROTATE}break;case Qa.PAN:if(Fe.ctrlKey||Fe.metaKey||Fe.shiftKey){if(n.enableRotate===!1)return;Ee(Fe),l=a.ROTATE}else{if(n.enablePan===!1)return;qe(Fe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function bt(Fe){if(n.enabled!==!1)switch(l){case a.ROTATE:if(n.enableRotate===!1)return;it(Fe);break;case a.DOLLY:if(n.enableZoom===!1)return;et(Fe);break;case a.PAN:if(n.enablePan===!1)return;Ht(Fe);break}}function sn(Fe){n.enabled===!1||n.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Fe.preventDefault(),n.dispatchEvent(s),_t(Fe),n.dispatchEvent(o))}function on(Fe){n.enabled===!1||n.enablePan===!1||$t(Fe)}function mn(Fe){switch(pn(Fe),O.length){case 1:switch(n.touches.ONE){case Yf.ROTATE:if(n.enableRotate===!1)return;mt(),l=a.TOUCH_ROTATE;break;case Yf.PAN:if(n.enablePan===!1)return;ut(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case Yf.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Jt(),l=a.TOUCH_DOLLY_PAN;break;case Yf.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ft(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function ai(Fe){switch(pn(Fe),l){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;Dt(Fe),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;Rt(Fe),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Gt(Fe),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Se(Fe),n.update();break;default:l=a.NONE}}function Vt(Fe){n.enabled!==!1&&Fe.preventDefault()}function _n(Fe){O.push(Fe)}function En(Fe){delete $[Fe.pointerId];for(let xt=0;xt<O.length;xt++)if(O[xt].pointerId==Fe.pointerId){O.splice(xt,1);return}}function pn(Fe){let xt=$[Fe.pointerId];xt===void 0&&(xt=new at,$[Fe.pointerId]=xt),xt.set(Fe.pageX,Fe.pageY)}function Sn(Fe){const xt=Fe.pointerId===O[0].pointerId?O[1]:O[0];return $[xt.pointerId]}this.dollyIn=(Fe=Y())=>{ge(Fe),n.update()},this.dollyOut=(Fe=Y())=>{ie(Fe),n.update()},this.getScale=()=>h,this.setScale=Fe=>{de(Fe),n.update()},this.getZoomScale=()=>Y(),t!==void 0&&this.connect(t),this.update()}};function mS(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const jv="srgb",qm="srgb-linear",mW=3001,hEe=3e3;class H9 extends Wl{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new gEe(t)}),this.register(function(t){return new yEe(t)}),this.register(function(t){return new MEe(t)}),this.register(function(t){return new CEe(t)}),this.register(function(t){return new REe(t)}),this.register(function(t){return new xEe(t)}),this.register(function(t){return new bEe(t)}),this.register(function(t){return new _Ee(t)}),this.register(function(t){return new SEe(t)}),this.register(function(t){return new mEe(t)}),this.register(function(t){return new TEe(t)}),this.register(function(t){return new vEe(t)}),this.register(function(t){return new wEe(t)}),this.register(function(t){return new EEe(t)}),this.register(function(t){return new pEe(t)}),this.register(function(t){return new DEe(t)}),this.register(function(t){return new LEe(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Vm.extractUrlBase(e);o=Vm.resolveURL(c,this.path)}else o=Vm.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new hf(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(mS(new Uint8Array(e.slice(0,4)))===jne){try{o[gr.KHR_BINARY_GLTF]=new PEe(e)}catch(u){r&&r(u);return}s=JSON.parse(o[gr.KHR_BINARY_GLTF].content)}else s=JSON.parse(mS(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new $Ee(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case gr.KHR_MATERIALS_UNLIT:o[u]=new AEe;break;case gr.KHR_DRACO_MESH_COMPRESSION:o[u]=new NEe(s,this.dracoLoader);break;case gr.KHR_TEXTURE_TRANSFORM:o[u]=new BEe;break;case gr.KHR_MESH_QUANTIZATION:o[u]=new IEe;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function dEe(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const gr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class pEe{constructor(e){this.parser=e,this.name=gr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Qt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],qm);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new aT(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new dS(u),c.distance=f;break;case"spot":c=new oT(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Tm(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class AEe{constructor(){this.name=gr.KHR_MATERIALS_UNLIT}getMaterialType(){return Tl}extendParams(e,t,n){const r=[];e.color=new Qt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qm),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,jv))}return Promise.all(r)}}class mEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class gEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new at(a,a)}return Promise.all(s)}}class yEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class vEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class xEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Qt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],qm)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,jv)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class bEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class _Ee{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Qt().setRGB(a[0],a[1],a[2],qm),Promise.all(s)}}class SEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class TEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Qt().setRGB(a[0],a[1],a[2],qm),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,jv)),Promise.all(s)}}class EEe{constructor(e){this.parser=e,this.name=gr.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class wEe{constructor(e){this.parser=e,this.name=gr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:mh}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class MEe{constructor(e){this.parser=e,this.name=gr.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class CEe{constructor(e){this.parser=e,this.name=gr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class REe{constructor(e){this.parser=e,this.name=gr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class DEe{constructor(e){this.name=gr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(p),u,f,h,r.mode,r.filter),p})})}else return null}}class LEe{constructor(e){this.name=gr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Qh.TRIANGLES&&c.mode!==Qh.TRIANGLE_STRIP&&c.mode!==Qh.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,p=[];for(const m of f){const g=new rn,b=new he,T=new Br,C=new he(1,1,1),R=new t9(m.geometry,m.material,h);for(let P=0;P<h;P++)l.TRANSLATION&&b.fromBufferAttribute(l.TRANSLATION,P),l.ROTATION&&T.fromBufferAttribute(l.ROTATION,P),l.SCALE&&C.fromBufferAttribute(l.SCALE,P),R.setMatrixAt(P,g.compose(b,T,C));for(const P in l)if(P==="_COLOR_0"){const I=l[P];R.instanceColor=new bd(I.array,I.itemSize,I.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&m.geometry.setAttribute(P,l[P]);Vi.prototype.copy.call(R,m),this.parser.assignFinalMaterial(R),p.push(R)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const jne="glTF",PE=12,gW={JSON:1313821514,BIN:5130562};class PEe{constructor(e){this.name=gr.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,PE);if(this.header={magic:mS(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jne)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-PE,r=new DataView(e,PE);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===gW.JSON){const l=new Uint8Array(e,PE+s,o);this.content=mS(l)}else if(a===gW.BIN){const l=PE+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class NEe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=gr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=VF[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=VF[u]||u.toLowerCase();if(o[u]!==void 0){const h=n.accessors[e.attributes[u]],p=C2[h.componentType];c[f]=p.name,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,h){r.decodeDracoFile(u,function(p){for(const m in p.attributes){const g=p.attributes[m],b=l[m];b!==void 0&&(g.normalized=b)}f(p)},a,c,qm,h)})})}}class BEe{constructor(){this.name=gr.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class IEe{constructor(){this.name=gr.KHR_MESH_QUANTIZATION}}class Wne extends sT{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,f=(n-t)/u,h=f*f,p=h*f,m=e*c,g=m-c,b=-2*p+3*h,T=p-h,C=1-b,R=T-h+f;for(let P=0;P!==a;P++){const I=o[g+P+a],F=o[g+P+l]*u,k=o[m+P+a],q=o[m+P]*u;s[P]=C*I+R*F+b*k+T*q}return s}}const OEe=new Br;class FEe extends Wne{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return OEe.fromArray(s).normalize().toArray(s),s}}const Qh={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},C2={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yW={9728:Ps,9729:Ur,9984:QS,9985:Um,9986:cd,9987:Ja},vW={33071:Sl,33648:lA,10497:ff},H6={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VF={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...One>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},py={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},UEe={CUBICSPLINE:void 0,LINEAR:aS,STEP:oS},V6={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function kEe(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new rT({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:sh})),i.DefaultMaterial}function uv(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Tm(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function GEe(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(n=!0),f.NORMAL!==void 0&&(r=!0),f.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(n){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):i.attributes.position;o.push(h)}if(r){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return n&&(i.morphAttributes.position=u),r&&(i.morphAttributes.normal=f),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}function zEe(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function HEe(i){let e;const t=i.extensions&&i.extensions[gr.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+q6(t.attributes):e=i.indices+":"+q6(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+q6(i.targets[n]);return e}function q6(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function qF(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function VEe(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const qEe=new rn;class $Ee{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dEe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new mg(this.options.manager):this.textureLoader=new zte(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hf(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return uv(s,a,r),Tm(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[gr.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Vm.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=H6[r.type],a=C2[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new qi(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=H6[r.type],c=C2[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,p=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let g,b;if(p&&p!==f){const T=Math.floor(h/p),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count;let R=t.cache.get(C);R||(g=new c(a,T*p,r.count*p/u),R=new ob(g,p/u),t.cache.add(C,R)),b=new vc(R,l,h%p/u,m)}else a===null?g=new c(r.count*l):g=new c(a,h,r.count*l),b=new qi(g,l,m);if(r.sparse!==void 0){const T=H6.SCALAR,C=C2[r.sparse.indices.componentType],R=r.sparse.indices.byteOffset||0,P=r.sparse.values.byteOffset||0,I=new C(o[1],R,r.sparse.count*T),F=new c(o[2],P,r.sparse.count*l);a!==null&&(b=new qi(b.array.slice(),b.itemSize,b.normalized));for(let k=0,q=I.length;k<q;k++){const H=I[k];if(b.setX(H,F[k*l]),l>=2&&b.setY(H,F[k*l+1]),l>=3&&b.setZ(H,F[k*l+2]),l>=4&&b.setW(H,F[k*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return b})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=yW[h.magFilter]||Ur,u.minFilter=yW[h.minFilter]||Ja,u.wrapS=vW[h.wrapS]||ff,u.wrapT=vW[h.wrapT]||ff,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,p){let m=h;t.isImageBitmapLoader===!0&&(m=function(g){const b=new cs(g);b.needsUpdate=!0,h(b)}),t.load(Vm.resolveURL(f,s.path),m,void 0,p)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),Tm(f,o),f.userData.mimeType=o.mimeType||VEe(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[gr.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[gr.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[gr.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===mW?jv:qm),"colorSpace"in o?o.colorSpace=r:o.encoding=r===jv?mW:hEe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new tT,ga.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new xa,ga.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return rT}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[gr.KHR_MATERIALS_UNLIT]){const f=r[gr.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new Qt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],qm),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",f.baseColorTexture,jv)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Do);const u=s.alphaMode||V6.OPAQUE;if(u===V6.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===V6.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Tl&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new at(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Tl&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Tl){const f=s.emissiveFactor;a.emissive=new Qt().setRGB(f[0],f[1],f[2],qm)}return s.emissiveTexture!==void 0&&o!==Tl&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,jv)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),Tm(f,s),t.associations.set(f,{materials:e}),s.extensions&&uv(r,f,s),f})}createUniqueName(e){const t=hr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[gr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return xW(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=HEe(c),f=r[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[gr.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=xW(new qn,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?kEe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let p=0,m=u.length;p<m;p++){const g=u[p],b=o[p];let T;const C=c[p];if(b.mode===Qh.TRIANGLES||b.mode===Qh.TRIANGLE_STRIP||b.mode===Qh.TRIANGLE_FAN||b.mode===void 0)T=s.isSkinnedMesh===!0?new yP(g,C):new zi(g,C),T.isSkinnedMesh===!0&&T.normalizeSkinWeights(),b.mode===Qh.TRIANGLE_STRIP?T.geometry=dW(T.geometry,oP):b.mode===Qh.TRIANGLE_FAN&&(T.geometry=dW(T.geometry,lS));else if(b.mode===Qh.LINES)T=new dh(g,C);else if(b.mode===Qh.LINE_STRIP)T=new oh(g,C);else if(b.mode===Qh.LINE_LOOP)T=new n9(g,C);else if(b.mode===Qh.POINTS)T=new vP(g,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(T.geometry.morphAttributes).length>0&&zEe(T,s),T.name=t.createUniqueName(s.name||"mesh_"+e),Tm(T,s),b.extensions&&uv(r,T,b),t.assignFinalMaterial(T),f.push(T)}for(let p=0,m=f.length;p<m;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return s.extensions&&uv(r,f[0],s),f[0];const h=new da;s.extensions&&uv(r,h,s),t.associations.set(h,{meshes:e});for(let p=0,m=f.length;p<m;p++)h.add(f[p]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new ls(_l.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new du(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Tm(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new rn;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new eT(a,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const p=r.channels[f],m=r.samplers[p.sampler],g=p.target,b=g.node,T=r.parameters!==void 0?r.parameters[m.input]:m.input,C=r.parameters!==void 0?r.parameters[m.output]:m.output;g.node!==void 0&&(o.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",T)),l.push(this.getDependency("accessor",C)),c.push(m),u.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],p=f[1],m=f[2],g=f[3],b=f[4],T=[];for(let C=0,R=h.length;C<R;C++){const P=h[C],I=p[C],F=m[C],k=g[C],q=b[C];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();const H=n._createAnimationTracks(P,I,F,k,q);if(H)for(let O=0;O<H.length;O++)T.push(H[O])}return new Qy(s,void 0,T)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(n.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,qEe)});for(let p=0,m=f.length;p<m;p++)u.add(f[p]);return u})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new hS:c.length>1?u=new da:c.length===1?u=c[0]:u=new Vi,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Tm(u,s),s.extensions&&uv(n,u,s),s.matrix!==void 0){const f=new rn;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new da;n.name&&(s.name=r.createUniqueName(n.name)),Tm(s,n),n.extensions&&uv(t,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,p]of r.associations)(h instanceof ga||h instanceof cs)&&f.set(h,p);return u.traverse(h=>{const p=r.associations.get(h);p!=null&&f.set(h,p)}),f};return r.associations=c(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];py[s.path]===py.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(py[s.path]){case py.weights:c=Xy;break;case py.rotation:c=tg;break;case py.position:case py.scale:c=ng;break;default:switch(n.itemSize){case 1:c=Xy;break;case 2:case 3:default:c=ng;break}break}const u=r.interpolation!==void 0?UEe[r.interpolation]:aS,f=this._getArrayFromAccessor(n);for(let h=0,p=l.length;h<p;h++){const m=new c(l[h]+"."+py[s.path],t.array,f,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),o.push(m)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=qF(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof tg?FEe:Wne;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function jEe(i,e,t){const n=e.attributes,r=new ma;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new he(l[0],l[1],l[2]),new he(c[0],c[1],c[2])),a.normalized){const u=qF(C2[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new he,l=new he;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],p=h.min,m=h.max;if(p!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(m[2]))),h.normalized){const g=qF(C2[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new Ua;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function xW(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=VF[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Tm(i,e),jEe(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?GEe(i,e.targets,t):i})}function Kne(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let r=i,s=n,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function WEe(i,e,t,n){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],f=s[a-c],h=r[c]/(u+f);r[c]=l+u*h,l=f*h}r[a]=l}return r}function KEe(i,e,t,n){const r=Kne(i,n,e),s=WEe(r,n,i,e),o=new Ln(0,0,0,0);for(let a=0;a<=i;++a){const l=t[r-i+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function YEe(i,e,t,n,r){const s=[];for(let f=0;f<=t;++f)s[f]=0;const o=[];for(let f=0;f<=n;++f)o[f]=s.slice(0);const a=[];for(let f=0;f<=t;++f)a[f]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=t;++f){l[f]=e-r[i+1-f],c[f]=r[i+f]-e;let h=0;for(let p=0;p<f;++p){const m=c[p+1],g=l[f-p];a[f][p]=m+g;const b=a[p][f-1]/a[f][p];a[p][f]=h+m*b,h=g*b}a[f][f]=h}for(let f=0;f<=t;++f)o[0][f]=a[f][t];for(let f=0;f<=t;++f){let h=0,p=1;const m=[];for(let g=0;g<=t;++g)m[g]=s.slice(0);m[0][0]=1;for(let g=1;g<=n;++g){let b=0;const T=f-g,C=t-g;f>=g&&(m[p][0]=m[h][0]/a[C+1][T],b=m[p][0]*a[T][C]);const R=T>=-1?1:-T,P=f-1<=C?g-1:t-f;for(let F=R;F<=P;++F)m[p][F]=(m[h][F]-m[h][F-1])/a[C+1][T+F],b+=m[p][F]*a[T+F][C];f<=C&&(m[p][g]=-m[h][g-1]/a[C+1][f],b+=m[p][g]*a[f][C]),o[g][f]=b;const I=h;h=p,p=I}}let u=t;for(let f=1;f<=n;++f){for(let h=0;h<=t;++h)o[f][h]*=u;u*=t-f}return o}function XEe(i,e,t,n,r){const s=r<i?r:i,o=[],a=Kne(i,n,e),l=YEe(a,n,i,s,e),c=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),h=f.w;f.x*=h,f.y*=h,f.z*=h,c[u]=f}for(let u=0;u<=s;++u){const f=c[a-i].clone().multiplyScalar(l[u][0]);for(let h=1;h<=i;++h)f.add(c[a-i+h].clone().multiplyScalar(l[u][h]));o[u]=f}for(let u=s+1;u<=r+1;++u)o[u]=new Ln(0,0,0);return o}function QEe(i,e){let t=1;for(let r=2;r<=i;++r)t*=r;let n=1;for(let r=2;r<=e;++r)n*=r;for(let r=2;r<=i-e;++r)n*=r;return t/n}function ZEe(i){const e=i.length,t=[],n=[];for(let s=0;s<e;++s){const o=i[s];t[s]=new he(o.x,o.y,o.z),n[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(QEe(s,a)*n[a]));r[s]=o.divideScalar(n[0])}return r}function JEe(i,e,t,n,r){const s=XEe(i,e,t,n,r);return ZEe(s)}class bW extends ph{constructor(e,t,n,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new Ln(a.x,a.y,a.z,a.w)}}getPoint(e,t){const n=t||new he,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=KEe(this.degree,this.knots,this.controlPoints,r);return s.w!=1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t){const n=t||new he,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=JEe(this.degree,this.knots,this.controlPoints,r,1);return n.copy(s[1]).normalize(),n}}let mr,ua,Vu;class V9 extends Wl{constructor(e){super(e)}load(e,t,n,r){const s=this,o=s.path===""?Vm.extractUrlBase(e):s.path,a=new hf(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e,t){if(swe(e))mr=new rwe().parse(e);else{const r=Zne(e);if(!owe(r))throw new Error("THREE.FBXLoader: Unknown format.");if(SW(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+SW(r));mr=new iwe().parse(r)}const n=new mg(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new ewe(n,this.manager).parse(mr)}}class ewe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){ua=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),s=new twe().parse(r);return this.parseScene(r,s,n),Vu}parseConnections(){const e=new Map;return"Connections"in mr&&mr.Connections.connections.forEach(function(n){const r=n[0],s=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in mr.Objects){const n=mr.Objects.Video;for(const r in n){const s=n[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(n[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const n in e){const r=e[n];t[r]!==void 0?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in mr.Objects){const n=mr.Objects.Texture;for(const r in n){const s=this.parseTexture(n[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(n.wrapS=o===0?ff:Sl,n.wrapT=a===0?ff:Sl,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,s=ua.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new cs):(l.setPath(this.textureLoader.path),o=l.load(n))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new cs):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in mr.Objects){const n=mr.Objects.Material;for(const r in n){const s=this.parseMaterial(n[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!ua.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new ix;break;case"lambert":a=new Pd;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new ix;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new Qt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new Qt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new Qt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new Qt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new Qt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new Qt().fromArray(e.SpecularColor.value));const s=this;return ua.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=Lp,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in mr.Objects&&t in mr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ua.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in mr.Objects){const n=mr.Objects.Deformer;for(const r in n){const s=n[r],o=ua.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,n),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new rn().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=ua.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){Vu=new da;const r=this.parseModels(e.skeletons,t,n),s=mr.Objects.Model,o=this;r.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),ua.get(l.ID).parents.forEach(function(f){const h=r.get(f.ID);h!==void 0&&h.add(l)}),l.parent===null&&Vu.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Vu.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=Xne(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new nwe().parse();Vu.children.length===1&&Vu.children[0].isGroup&&(Vu.children[0].animations=a,Vu=Vu.children[0]),Vu.animations=a}parseModels(e,t,n){const r=new Map,s=mr.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=ua.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new hS;break;case"Null":default:u=new da;break}u.name=l.attrName?hr.sanitizeNodeName(l.attrName):"",u.ID=a}this.getTransformData(u,l),r.set(a,u)}return r}buildSkeleton(e,t,n,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const f=s;s=new hS,s.matrixWorld.copy(c.transformLink),s.name=r?hr.sanitizeNodeName(r):"",s.ID=n,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(r){const s=mr.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Vi;else{let r=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(r=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const c=a/l;let u=45;n.FieldOfView!==void 0&&(u=n.FieldOfView.value);const f=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new ls(u,c,s,o),f!==null&&t.setFocalLength(f);break;case 1:t=new du(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Vi;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(r){const s=mr.Objects.NodeAttribute[r.ID];s!==void 0&&(n=s)}),n===void 0)t=new Vi;else{let r;n.LightType===void 0?r=0:r=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new Qt().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new dS(s,o,a,l);break;case 1:t=new aT(s,o);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=_l.degToRad(n.InnerAngle.value));let u=0;n.OuterAngle!==void 0&&(u=_l.degToRad(n.OuterAngle.value),u=Math.max(u,1)),t=new oT(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new dS(s,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new ix({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new yP(s,o),r.normalizeSkinWeights()):r=new zi(s,o),r}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new xa({color:3342591,linewidth:1});return new oh(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=Qne(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&ua.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=mr.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Vu.add(e.target)):e.lookAt(new he().fromArray(o))}}})}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const s in e){const o=e[s];ua.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;ua.get(c).parents.forEach(function(f){n.has(f.ID)&&n.get(f.ID).bind(new eT(o.bones),r[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in mr.Objects){const t=mr.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new rn().fromArray(s.Matrix.a)}):e[r.Node]=new rn().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in mr&&"AmbientColor"in mr.GlobalSettings){const e=mr.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(t!==0||n!==0||r!==0){const s=new Qt(t,n,r);Vu.add(new _3(s,1))}}}}class twe{parse(e){const t=new Map;if("Geometry"in mr.Objects){const n=mr.Objects.Geometry;for(const r in n){const s=ua.get(parseInt(r)),o=this.parseGeometry(s,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,s=[],o=e.parents.map(function(f){return mr.Objects.Model[f.ID]});if(o.length===0)return;const a=e.children.reduce(function(f,h){return r[h.ID]!==void 0&&(f=r[h.ID]),f},null);e.children.forEach(function(f){n.morphTargets[f.ID]!==void 0&&s.push(n.morphTargets[f.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=Qne(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=Xne(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,n,r){const s=new qn;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Cn(a.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Cn(a.colors,3)),t&&(s.setAttribute("skinIndex",new m3(a.weightsIndices,4)),s.setAttribute("skinWeight",new Cn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new Si().getNormalMatrix(r),u=new Cn(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){kTe==="uv2"&&u++;const f=u===0?"uv":`uv${u}`;s.setAttribute(f,new Cn(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(f,h){f!==c&&(s.addGroup(u,h-u,c),c=f,u=h)}),s.groups.length>0){const f=s.groups[s.groups.length-1],h=f.start+f.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,r),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:r.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,s=!1,o=[],a=[],l=[],c=[],u=[],f=[];const h=this;return e.vertexIndices.forEach(function(p,m){let g,b=!1;p<0&&(p=p^-1,b=!0);let T=[],C=[];if(o.push(p*3,p*3+1,p*3+2),e.color){const R=x5(m,n,p,e.color);l.push(R[0],R[1],R[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(R){C.push(R.weight),T.push(R.id)}),C.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const R=[0,0,0,0],P=[0,0,0,0];C.forEach(function(I,F){let k=I,q=T[F];P.forEach(function(H,O,$){if(k>H){$[O]=k,k=H;const ee=R[O];R[O]=q,q=ee}})}),T=R,C=P}for(;C.length<4;)C.push(0),T.push(0);for(let R=0;R<4;++R)u.push(C[R]),f.push(T[R])}if(e.normal){const R=x5(m,n,p,e.normal);a.push(R[0],R[1],R[2])}e.material&&e.material.mappingType!=="AllSame"&&(g=x5(m,n,p,e.material)[0]),e.uv&&e.uv.forEach(function(R,P){const I=x5(m,n,p,R);c[P]===void 0&&(c[P]=[]),c[P].push(I[0]),c[P].push(I[1])}),r++,b&&(h.genFace(t,e,o,g,a,l,c,u,f,r),n++,r=0,o=[],a=[],l=[],c=[],u=[],f=[])}),t}genFace(e,t,n,r,s,o,a,l,c,u){for(let f=2;f<u;f++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(f-1)*3]]),e.vertex.push(t.vertexPositions[n[(f-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(f-1)*3+2]]),e.vertex.push(t.vertexPositions[n[f*3]]),e.vertex.push(t.vertexPositions[n[f*3+1]]),e.vertex.push(t.vertexPositions[n[f*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(f-1)*4]),e.vertexWeights.push(l[(f-1)*4+1]),e.vertexWeights.push(l[(f-1)*4+2]),e.vertexWeights.push(l[(f-1)*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(f-1)*4]),e.weightsIndices.push(c[(f-1)*4+1]),e.weightsIndices.push(c[(f-1)*4+2]),e.weightsIndices.push(c[(f-1)*4+3]),e.weightsIndices.push(c[f*4]),e.weightsIndices.push(c[f*4+1]),e.weightsIndices.push(c[f*4+2]),e.weightsIndices.push(c[f*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(f-1)*3]),e.colors.push(o[(f-1)*3+1]),e.colors.push(o[(f-1)*3+2]),e.colors.push(o[f*3]),e.colors.push(o[f*3+1]),e.colors.push(o[f*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(f-1)*3]),e.normal.push(s[(f-1)*3+1]),e.normal.push(s[(f-1)*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),t.uv&&t.uv.forEach(function(h,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(a[p][0]),e.uvs[p].push(a[p][1]),e.uvs[p].push(a[p][(f-1)*2]),e.uvs[p].push(a[p][(f-1)*2+1]),e.uvs[p].push(a[p][f*2]),e.uvs[p].push(a[p][f*2+1])})}addMorphTargets(e,t,n,r){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const l=mr.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,a.name)})})}genMorphGeometry(e,t,n,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=n.Vertices!==void 0?n.Vertices.a:[],l=n.Indexes!==void 0?n.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let m=0;m<l.length;m++){const g=l[m]*3;u[g]=a[m*3],u[g+1]=a[m*3+1],u[g+2]=a[m*3+2]}const f={vertexIndices:o,vertexPositions:u},h=this.genBuffers(f),p=new Cn(h.vertex,3);p.name=s||n.attrName,p.applyMatrix4(r),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let s=[];return n==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(bW===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new qn;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new qn;const n=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let f=0,h=o.length;f<h;f+=4)s.push(new Ln().fromArray(o,f));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=n,l=r.length-1-a;for(let f=0;f<n;++f)s.push(s[f])}const u=new bW(n,r,s,a,l).getPoints(s.length*12);return new qn().setFromPoints(u)}}class nwe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const r=t[n],s=this.addClip(r);e.push(s)}return e}parseClips(){if(mr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=mr.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=mr.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(awe),values:t[n].KeyValueFloat.a},s=ua.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=mr.Objects.AnimationLayer,n=new Map;for(const r in t){const s=[],o=ua.get(parseInt(r));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=ua.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID;if(f!==void 0){const h=mr.Objects.Model[f.toString()];if(h===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const p={modelName:h.attrName?hr.sanitizeNodeName(h.attrName):"",ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Vu.traverse(function(m){m.ID===h.id&&(p.transform=m.matrix,m.userData.transformData&&(p.eulerOrder=m.userData.transformData.eulerOrder))}),p.transform||(p.transform=new rn),"PreRotation"in h&&(p.preRotation=h.PreRotation.value),"PostRotation"in h&&(p.postRotation=h.PostRotation.value),s[c]=p}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=ua.get(l.ID).parents.filter(function(T){return T.relationship!==void 0})[0].ID,h=ua.get(f).parents[0].ID,p=ua.get(h).parents[0].ID,m=ua.get(p).parents[0].ID,g=mr.Objects.Model[m],b={modelName:g.attrName?hr.sanitizeNodeName(g.attrName):"",morphName:mr.Objects.Deformer[f].attrName};s[c]=b}s[c][u.attr]=u}}}),n.set(parseInt(r),s))}return n}parseAnimStacks(e){const t=mr.Objects.AnimationStack,n={};for(const r in t){const s=ua.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(r){t=t.concat(n.generateTracks(r))}),new Qy(e.name,-1,t)}generateTracks(e){const t=[];let n=new he,r=new Br,s=new he;if(e.transform&&e.transform.decompose(n,r,s),n=n.toArray(),r=new Io().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new ng(e+"."+r,s,o)}generateRotationTrack(e,t,n,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(_l.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(_l.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(_l.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);r!==void 0&&(r=r.map(_l.degToRad),r.push(o),r=new Io().fromArray(r),r=new Br().setFromEuler(r)),s!==void 0&&(s=s.map(_l.degToRad),s.push(o),s=new Io().fromArray(s),s=new Br().setFromEuler(s).invert());const c=new Br,u=new Io,f=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(f,h/3*4);return new tg(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),r=Vu.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Xy(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,r){return n-r}),t.length>1){let n=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[n]=o,r=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const r=n,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),r[0]=u}else s.push(r[0]);if(a!==-1){const u=t.y.values[a];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let l=n+a;const c=e.times[t-1],f=(e.times[t]-c)/o;let h=c+f;const p=[],m=[];for(;h<e.times[t];)p.push(h),h+=f,m.push(l),l+=a;e.times=TW(e.times,t,p),e.values=TW(e.values,t,m)}}}}class iwe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Yne,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,n[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in a?(n==="PoseNode"?a.PoseNode.push(s):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=s)):typeof o.id=="number"?(a[n]={},a[n][o.id]=s):n!=="Properties70"&&(n==="PoseNode"?a[n]=[s]:a[n]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(h){return h.trim().replace(/^"/,"")}),r="connections",s=[c,u],cwe(s,f),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=j6(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=j6(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],l=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=j6(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class rwe{parse(e){const t=new _W(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new Yne;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(n.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,n,h)}return n.propertyList=l,typeof c=="number"&&(n.id=c),u!==""&&(n.attrName=u),f!==""&&(n.attrType=f),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if(e==="Connections"&&n.name==="C"){const r=[];n.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let r=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[r]={type:s,type2:o,flag:a,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=QTe(new Uint8Array(e.getArrayBuffer(o))),l=new _W(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class _W{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),mS(new Uint8Array(t))}}class Yne{add(e,t){this[e]=t}}function swe(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===Zne(i,0,e.length)}function owe(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(r){const s=i[r-1];return i=i.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(n(1)===e[r])return!1;return!0}function SW(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function awe(i){return i/46186158e3}const lwe=[];function x5(i,e,t,n){let r;switch(n.mappingType){case"ByPolygonVertex":r=i;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(r=n.indices[r]);const s=r*n.dataSize,o=s+n.dataSize;return uwe(lwe,n.buffer,s,o)}const $6=new Io,M_=new he;function Xne(i){const e=new rn,t=new rn,n=new rn,r=new rn,s=new rn,o=new rn,a=new rn,l=new rn,c=new rn,u=new rn,f=new rn,h=new rn,p=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(M_.fromArray(i.translation)),i.preRotation){const O=i.preRotation.map(_l.degToRad);O.push(i.eulerOrder),t.makeRotationFromEuler($6.fromArray(O))}if(i.rotation){const O=i.rotation.map(_l.degToRad);O.push(i.eulerOrder),n.makeRotationFromEuler($6.fromArray(O))}if(i.postRotation){const O=i.postRotation.map(_l.degToRad);O.push(i.eulerOrder),r.makeRotationFromEuler($6.fromArray(O)),r.invert()}i.scale&&s.scale(M_.fromArray(i.scale)),i.scalingOffset&&a.setPosition(M_.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(M_.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(M_.fromArray(i.rotationOffset)),i.rotationPivot&&c.setPosition(M_.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(f.copy(i.parentMatrix),u.copy(i.parentMatrixWorld));const m=t.clone().multiply(n).multiply(r),g=new rn;g.extractRotation(u);const b=new rn;b.copyPosition(u);const T=b.clone().invert().multiply(u),C=g.clone().invert().multiply(T),R=s,P=new rn;if(p===0)P.copy(g).multiply(m).multiply(C).multiply(R);else if(p===1)P.copy(g).multiply(C).multiply(m).multiply(R);else{const $=new rn().scale(new he().setFromMatrixScale(f)).clone().invert(),ee=C.clone().multiply($);P.copy(g).multiply(m).multiply(ee).multiply(R)}const I=c.clone().invert(),F=o.clone().invert();let k=e.clone().multiply(l).multiply(c).multiply(t).multiply(n).multiply(r).multiply(I).multiply(a).multiply(o).multiply(s).multiply(F);const q=new rn().copyPosition(k),H=u.clone().multiply(q);return h.copyPosition(H),k=h.clone().multiply(P),k.premultiply(u.invert()),k}function Qne(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function j6(i){return i.split(",").map(function(t){return parseFloat(t)})}function Zne(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),mS(new Uint8Array(i,e,t))}function cwe(i,e){for(let t=0,n=i.length,r=e.length;t<r;t++,n++)i[n]=e[t]}function uwe(i,e,t,n){for(let r=t,s=0;r<n;r++,s++)i[s]=e[r];return i}function TW(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}const W6=new WeakMap;class fwe extends Wl{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new hf(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const n=JSON.stringify(t);if(W6.has(e)){const l=W6.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),W6.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new qn;e.index&&t.setIndex(new qi(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new qi(o,a))}return t}_loadLibrary(e,t){const n=new hf(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=hwe.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function hwe(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(u){i.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,p=new f.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const m=t(f,h,p,c),g=m.attributes.map(b=>b.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{f.destroy(p),f.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,p;const m=a.GetEncodedGeometryType(l);if(m===o.TRIANGULAR_MESH)h=new o.Mesh,p=a.DecodeBufferToMesh(l,h);else if(m===o.POINT_CLOUD)h=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const g={index:null,attributes:[]};for(const b in u){const T=self[f[b]];let C,R;if(c.useUniqueIDs)R=u[b],C=a.GetAttributeByUniqueId(h,R);else{if(R=a.GetAttributeId(h,o[u[b]]),R===-1)continue;C=a.GetAttribute(h,R)}g.attributes.push(r(o,a,h,b,T,C))}return m===o.TRIANGULAR_MESH&&(g.index=n(o,a,h)),o.destroy(h),g}function n(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const p=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:p,itemSize:1}}function r(o,a,l,c,u,f){const h=f.num_components(),m=l.num_points()*h,g=m*u.BYTES_PER_ELEMENT,b=s(o,u),T=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,f,b,g,T);const C=new u(o.HEAPF32.buffer,T,m).slice();return o._free(T),{name:c,array:C,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let b5;const K6=()=>{if(b5)return b5;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let m=0;m<f.length;++m){const g=f.charCodeAt(m);h[m]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let p=0;for(let m=0;m<f.length;++m)h[p++]=h[m]<60?n[h[m]]:(h[m]-60)*64+h[++m];return h.buffer.slice(0,p)}function l(f,h,p,m,g,b){const T=s.exports.sbrk,C=p+3&-4,R=T(C*m),P=T(g.length),I=new Uint8Array(s.exports.memory.buffer);I.set(g,P);const F=f(R,p,m,P,g.length);if(F===0&&b&&b(R,C,m),h.set(I.subarray(R,R+p*m)),T(R-T(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return b5={ready:o,supported:!0,decodeVertexBuffer(f,h,p,m,g){l(s.exports.meshopt_decodeVertexBuffer,f,h,p,m,s.exports[c[g]])},decodeIndexBuffer(f,h,p,m){l(s.exports.meshopt_decodeIndexBuffer,f,h,p,m)},decodeIndexSequence(f,h,p,m){l(s.exports.meshopt_decodeIndexSequence,f,h,p,m)},decodeGltfBuffer(f,h,p,m,g,b){l(s.exports[u[g]],f,h,p,m,s.exports[c[b]])}},b5},Y6=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function WD(i,e){const t=Ac(s=>s.gl),n=Fp(mg,Y6(i)?Object.values(i):i);return X.useLayoutEffect(()=>{e==null||e(n)},[e]),X.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(n)?s=n:n instanceof cs?s=[n]:Y6(n)&&(s=Object.values(n)),s.forEach(o=>{o instanceof cs&&t.initTexture(o)})}},[t,n]),X.useMemo(()=>{if(Y6(i)){const s={};let o=0;for(const a in i)s[a]=n[o++];return s}else return n},[i,n])}WD.preload=i=>Fp.preload(mg,i);WD.clear=i=>Fp.clear(mg,i);let _5=null,Jne="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function eie(i=!0,e=!0,t){return n=>{t&&t(n),i&&(_5||(_5=new fwe),_5.setDecoderPath(typeof i=="string"?i:Jne),n.setDRACOLoader(_5)),e&&n.setMeshoptDecoder(typeof K6=="function"?K6():K6)}}const Up=(i,e,t,n)=>Fp(H9,i,eie(e,t,n));Up.preload=(i,e,t,n)=>Fp.preload(H9,i,eie(e,t,n));Up.clear=i=>Fp.clear(H9,i);Up.setDecoderPath=i=>{Jne=i};function dwe(i,e,t){const n=Ac(h=>h.size),r=Ac(h=>h.viewport),s=typeof i=="number"?i:n.width*r.dpr,o=n.height*r.dpr,a=(typeof i=="number"?t:i)||{},{samples:l=0,depth:c,...u}=a,f=X.useMemo(()=>{const h=new xd(s,o,{minFilter:Ur,magFilter:Ur,type:Fa,...u});return c&&(h.depthTexture=new Ld(s,o,Ns)),h.samples=l,h},[]);return X.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),X.useEffect(()=>()=>f.dispose(),[]),f}const pwe=i=>typeof i=="function",Awe=X.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:r,...s},o)=>{const a=Ac(({set:b})=>b),l=Ac(({camera:b})=>b),c=Ac(({size:b})=>b),u=X.useRef(null);X.useImperativeHandle(o,()=>u.current,[]);const f=X.useRef(null),h=dwe(e);X.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),X.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let p=0,m=null;const g=pwe(r);return w3(b=>{g&&(t===1/0||p<t)&&(f.current.visible=!1,b.gl.setRenderTarget(h),m=b.scene.background,i&&(b.scene.background=i),b.gl.render(b.scene,u.current),b.scene.background=m,b.gl.setRenderTarget(null),f.current.visible=!0,p++)}),X.useLayoutEffect(()=>{if(n){const b=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:b}))}},[u,n,a]),X.createElement(X.Fragment,null,X.createElement("perspectiveCamera",ar({ref:u},s),!g&&r),X.createElement("group",{ref:f},g&&r(h.texture)))}),tie=X.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=Ac(F=>F.invalidate),h=Ac(F=>F.camera),p=Ac(F=>F.gl),m=Ac(F=>F.events),g=Ac(F=>F.setEvents),b=Ac(F=>F.set),T=Ac(F=>F.get),C=Ac(F=>F.performance),R=e||h,P=n||m.connected||p.domElement,I=X.useMemo(()=>new fEe(R),[R]);return w3(()=>{I.enabled&&I.update()},-1),X.useEffect(()=>(s&&I.connect(s===!0?P:s),I.connect(P),()=>void I.dispose()),[s,P,t,I,f]),X.useEffect(()=>{const F=H=>{f(),t&&C.regress(),o&&o(H)},k=H=>{a&&a(H)},q=H=>{l&&l(H)};return I.addEventListener("change",F),I.addEventListener("start",k),I.addEventListener("end",q),()=>{I.removeEventListener("start",k),I.removeEventListener("end",q),I.removeEventListener("change",F)}},[o,a,l,I,f,g]),X.useEffect(()=>{if(i){const F=T().controls;return b({controls:I}),()=>b({controls:F})}},[i,I]),X.createElement("primitive",ar({ref:u,object:I,enableDamping:r},c))});function d2(i){return Fp(V9,i)}d2.preload=i=>Fp.preload(V9,i);d2.clear=i=>Fp.clear(V9,i);const mwe="modulepreload",gwe=function(i){return"/iresh-nimantha-portfolio/"+i},EW={},ywe=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=gwe(l),l in EW)return;EW[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":mwe,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function vwe(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var nie={exports:{}};(function(i,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var f=a.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");return f.path=a.normalizePath(f.path),a.buildURLFromParts(f)}var h=a.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=a.normalizePath(h.path),a.buildURLFromParts(h)):c;var p=a.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var m=r.exec(p.path);p.netLoc=m[1],p.path=m[2]}p.netLoc&&!p.path&&(p.path="/");var g={scheme:p.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(g.netLoc=p.netLoc,h.path[0]!=="/"))if(!h.path)g.path=p.path,h.params||(g.params=p.params,h.query||(g.query=p.query));else{var b=p.path,T=b.substring(0,b.lastIndexOf("/")+1)+h.path;g.path=a.normalizePath(T)}return g.path===null&&(g.path=u.alwaysNormalize?a.normalizePath(h.path):h.path),a.buildURLFromParts(g)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};i.exports=a})()})(nie);var q9=nie.exports;function wW(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function El(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wW(Object(t),!0).forEach(function(n){_we(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):wW(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function xwe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function bwe(i){var e=xwe(i,"string");return typeof e=="symbol"?e:String(e)}function _we(i,e,t){return e=bwe(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ga(){return Ga=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ga.apply(this,arguments)}const Pn=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},Swe=Number.isSafeInteger||function(i){return typeof i=="number"&&Math.abs(i)<=Twe},Twe=Number.MAX_SAFE_INTEGER||9007199254740991;let pe=function(i){return i.MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached",i.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",i}({}),vi=function(i){return i.NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",i}({}),St=function(i){return i.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",i.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",i.KEY_SYSTEM_NO_SESSION="keySystemNoSession",i.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",i.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",i.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",i.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",i.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",i.MANIFEST_LOAD_ERROR="manifestLoadError",i.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",i.MANIFEST_PARSING_ERROR="manifestParsingError",i.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",i.LEVEL_EMPTY_ERROR="levelEmptyError",i.LEVEL_LOAD_ERROR="levelLoadError",i.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",i.LEVEL_PARSING_ERROR="levelParsingError",i.LEVEL_SWITCH_ERROR="levelSwitchError",i.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",i.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",i.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",i.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",i.FRAG_LOAD_ERROR="fragLoadError",i.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",i.FRAG_DECRYPT_ERROR="fragDecryptError",i.FRAG_PARSING_ERROR="fragParsingError",i.FRAG_GAP="fragGap",i.REMUX_ALLOC_ERROR="remuxAllocError",i.KEY_LOAD_ERROR="keyLoadError",i.KEY_LOAD_TIMEOUT="keyLoadTimeOut",i.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",i.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",i.BUFFER_APPEND_ERROR="bufferAppendError",i.BUFFER_APPENDING_ERROR="bufferAppendingError",i.BUFFER_STALLED_ERROR="bufferStalledError",i.BUFFER_FULL_ERROR="bufferFullError",i.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",i.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",i.INTERNAL_EXCEPTION="internalException",i.INTERNAL_ABORTED="aborted",i.UNKNOWN="unknown",i}({});const Ev=function(){},$F={trace:Ev,debug:Ev,log:Ev,warn:Ev,info:Ev,error:Ev};let Uw=$F;function Ewe(i){const e=self.console[i];return e?e.bind(self.console,`[${i}] >`):Ev}function wwe(i,...e){e.forEach(function(t){Uw[t]=i[t]?i[t].bind(i):Ewe(t)})}function Mwe(i,e){if(typeof console=="object"&&i===!0||typeof i=="object"){wwe(i,"debug","log","info","warn","error");try{Uw.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{Uw=$F}}else Uw=$F}const st=Uw,Cwe=/^(\d+)x(\d+)$/,MW=/(.+?)=(".*?"|.*?)(?:,|$)/g;class lo{constructor(e){typeof e=="string"&&(e=lo.parseAttrList(e)),Ga(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(r*2,r*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Cwe.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={},r='"';for(MW.lastIndex=0;(t=MW.exec(e))!==null;){let s=t[2];s.indexOf(r)===0&&s.lastIndexOf(r)===s.length-1&&(s=s.slice(1,-1));const o=t[1].trim();n[o]=s}return n}}function Rwe(i){return i!=="ID"&&i!=="CLASS"&&i!=="START-DATE"&&i!=="DURATION"&&i!=="END-DATE"&&i!=="END-ON-NEXT"}function Dwe(i){return i==="SCTE35-OUT"||i==="SCTE35-IN"}class $9{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const r in n)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==n[r]){st.warn(`DATERANGE tag attribute: "${r}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=r;break}e=Ga(new lo({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);Pn(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Pn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Pn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class L3{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var hs={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class j9{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[hs.AUDIO]:null,[hs.VIDEO]:null,[hs.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let r;n.length===1?r=(t==null?void 0:t.byteRangeEndOffset)||0:r=parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=q9.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class eD extends j9{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new L3,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Pn(this.programDateTime))return null;const e=Pn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,r,s,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[hs.AUDIO]=null,e[hs.VIDEO]=null,e[hs.AUDIOVIDEO]=null}}class iie extends j9{constructor(e,t,n,r,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new L3,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const Lwe=10;class rie{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Pn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Lwe}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function W9(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0))}function Pwe(i){const e=jF(i).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function Nwe(i){const e=function(n,r,s){const o=n[r];n[r]=n[s],n[s]=o};e(i,0,3),e(i,1,2),e(i,4,5),e(i,6,7)}function Bwe(i){const e=i.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),r=n[n.length-1].split(",");if(r.length===2){const s=r[0]==="base64",o=r[1];s?(n.splice(-1,1),t=W9(o)):t=Pwe(o)}}return t}function jF(i){return Uint8Array.from(unescape(encodeURIComponent(i)),e=>e.charCodeAt(0))}const gS=typeof self<"u"?self:void 0;var jr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},iu={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function X6(i){switch(i){case iu.FAIRPLAY:return jr.FAIRPLAY;case iu.PLAYREADY:return jr.PLAYREADY;case iu.WIDEVINE:return jr.WIDEVINE;case iu.CLEARKEY:return jr.CLEARKEY}}var S5={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Q6(i){if(i===S5.WIDEVINE)return jr.WIDEVINE;if(i===S5.PLAYREADY)return jr.PLAYREADY;if(i===S5.CENC||i===S5.CLEARKEY)return jr.CLEARKEY}function Z6(i){switch(i){case jr.FAIRPLAY:return iu.FAIRPLAY;case jr.PLAYREADY:return iu.PLAYREADY;case jr.WIDEVINE:return iu.WIDEVINE;case jr.CLEARKEY:return iu.CLEARKEY}}function T5(i){const{drmSystems:e,widevineLicenseUrl:t}=i,n=e?[jr.FAIRPLAY,jr.WIDEVINE,jr.PLAYREADY,jr.CLEARKEY].filter(r=>!!e[r]):[];return!n[jr.WIDEVINE]&&t&&n.push(jr.WIDEVINE),n}const sie=function(i){return gS!=null&&(i=gS.navigator)!=null&&i.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Iwe(i,e,t,n){let r;switch(i){case jr.FAIRPLAY:r=["cenc","sinf"];break;case jr.WIDEVINE:case jr.PLAYREADY:r=["cenc"];break;case jr.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${i}`)}return Owe(r,e,t,n)}function Owe(i,e,t,n){return[{initDataTypes:i,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function oie(i){const e=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),o=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=W9(a).subarray(0,16);return Nwe(l),l}}return null}function rx(i,e,t){return Uint8Array.prototype.slice?i.slice(e,t):new Uint8Array(Array.prototype.slice.call(i,e,t))}const K9=(i,e)=>e+10<=i.length&&i[e]===73&&i[e+1]===68&&i[e+2]===51&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128,aie=(i,e)=>e+10<=i.length&&i[e]===51&&i[e+1]===68&&i[e+2]===73&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128,gM=(i,e)=>{const t=e;let n=0;for(;K9(i,e);){n+=10;const r=FP(i,e+6);n+=r,aie(i,e+10)&&(n+=10),e+=n}if(n>0)return i.subarray(t,t+n)},FP=(i,e)=>{let t=0;return t=(i[e]&127)<<21,t|=(i[e+1]&127)<<14,t|=(i[e+2]&127)<<7,t|=i[e+3]&127,t},Fwe=(i,e)=>K9(i,e)&&FP(i,e+6)+10<=i.length-e,Y9=i=>{const e=cie(i);for(let t=0;t<e.length;t++){const n=e[t];if(lie(n))return Vwe(n)}},lie=i=>i&&i.key==="PRIV"&&i.info==="com.apple.streaming.transportStreamTimestamp",Uwe=i=>{const e=String.fromCharCode(i[0],i[1],i[2],i[3]),t=FP(i,4),n=10;return{type:e,size:t,data:i.subarray(n,n+t)}},cie=i=>{let e=0;const t=[];for(;K9(i,e);){const n=FP(i,e+6);e+=10;const r=e+n;for(;e+8<r;){const s=Uwe(i.subarray(e)),o=kwe(s);o&&t.push(o),e+=s.size+10}aie(i,e)&&(e+=10)}return t},kwe=i=>i.type==="PRIV"?Gwe(i):i.type[0]==="W"?Hwe(i):zwe(i),Gwe=i=>{if(i.size<2)return;const e=X0(i.data,!0),t=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:t.buffer}},zwe=i=>{if(i.size<2)return;if(i.type==="TXXX"){let t=1;const n=X0(i.data.subarray(t),!0);t+=n.length+1;const r=X0(i.data.subarray(t));return{key:i.type,info:n,data:r}}const e=X0(i.data.subarray(1));return{key:i.type,data:e}},Hwe=i=>{if(i.type==="WXXX"){if(i.size<2)return;let t=1;const n=X0(i.data.subarray(t),!0);t+=n.length+1;const r=X0(i.data.subarray(t));return{key:i.type,info:n,data:r}}const e=X0(i.data);return{key:i.type,data:e}},Vwe=i=>{if(i.data.byteLength===8){const e=new Uint8Array(i.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}},X0=(i,e=!1)=>{const t=qwe();if(t){const c=t.decode(i);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const n=i.length;let r,s,o,a="",l=0;for(;l<n;){if(r=i[l++],r===0&&e)return a;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:s=i[l++],a+=String.fromCharCode((r&31)<<6|s&63);break;case 14:s=i[l++],o=i[l++],a+=String.fromCharCode((r&15)<<12|(s&63)<<6|(o&63)<<0);break}}return a};let J6;function qwe(){if(!navigator.userAgent.includes("PlayStation 4"))return!J6&&typeof self.TextDecoder<"u"&&(J6=new self.TextDecoder("utf-8")),J6}const P0={hexDump:function(i){let e="";for(let t=0;t<i.length;t++){let n=i[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},KD=Math.pow(2,32)-1,$we=[].push,uie={video:1,audio:2,id3:3,text:4};function Ka(i){return String.fromCharCode.apply(null,i)}function fie(i,e){const t=i[e]<<8|i[e+1];return t<0?65536+t:t}function di(i,e){const t=hie(i,e);return t<0?4294967296+t:t}function CW(i,e){let t=di(i,e);return t*=Math.pow(2,32),t+=di(i,e+4),t}function hie(i,e){return i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}function eI(i,e,t){i[e]=t>>24,i[e+1]=t>>16&255,i[e+2]=t>>8&255,i[e+3]=t&255}function jwe(i){const e=i.byteLength;for(let t=0;t<e;){const n=di(i,t);if(n>8&&i[t+4]===109&&i[t+5]===111&&i[t+6]===111&&i[t+7]===102)return!0;t=n>1?t+n:e}return!1}function ji(i,e){const t=[];if(!e.length)return t;const n=i.byteLength;for(let r=0;r<n;){const s=di(i,r),o=Ka(i.subarray(r+4,r+8)),a=s>1?r+s:n;if(o===e[0])if(e.length===1)t.push(i.subarray(r+8,a));else{const l=ji(i.subarray(r+8,a),e.slice(1));l.length&&$we.apply(t,l)}r=a}return t}function Wwe(i){const e=[],t=i[0];let n=8;const r=di(i,n);n+=4;let s=0,o=0;t===0?(s=di(i,n),o=di(i,n+4),n+=8):(s=CW(i,n),o=CW(i,n+8),n+=16),n+=2;let a=i.length+o;const l=fie(i,n);n+=2;for(let c=0;c<l;c++){let u=n;const f=di(i,u);u+=4;const h=f&2147483647;if((f&2147483648)>>>31===1)return st.warn("SIDX has hierarchical references (not supported)"),null;const m=di(i,u);u+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/r,start:a,end:a+h-1}}),a+=h,u+=4,n=u}return{earliestPresentationTime:s,timescale:r,version:t,referencesCount:l,references:e}}function die(i){const e=[],t=ji(i,["moov","trak"]);for(let r=0;r<t.length;r++){const s=t[r],o=ji(s,["tkhd"])[0];if(o){let a=o[0];const l=di(o,a===0?12:20),c=ji(s,["mdia","mdhd"])[0];if(c){a=c[0];const u=di(c,a===0?12:20),f=ji(s,["mdia","hdlr"])[0];if(f){const h=Ka(f.subarray(8,12)),p={soun:hs.AUDIO,vide:hs.VIDEO}[h];if(p){const m=ji(s,["mdia","minf","stbl","stsd"])[0],g=Kwe(m);e[l]={timescale:u,type:p},e[p]=El({timescale:u,id:l},g)}}}}}return ji(i,["moov","mvex","trex"]).forEach(r=>{const s=di(r,4),o=e[s];o&&(o.default={duration:di(r,12),flags:di(r,20)})}),e}function Kwe(i){const e=i.subarray(8),t=e.subarray(86),n=Ka(e.subarray(4,8));let r=n;const s=n==="enca"||n==="encv";if(s){const a=ji(e,[n])[0].subarray(n==="enca"?28:78);ji(a,["sinf"]).forEach(c=>{const u=ji(c,["schm"])[0];if(u){const f=Ka(u.subarray(4,8));if(f==="cbcs"||f==="cenc"){const h=ji(c,["frma"])[0];h&&(r=Ka(h))}}})}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const o=ji(t,["avcC"])[0];r+="."+E5(o[1])+E5(o[2])+E5(o[3]);break}case"mp4a":{const o=ji(e,[n])[0],a=ji(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=tI(a,l),l+=2;const c=a[l++];if(c&128&&(l+=2),c&64&&(l+=a[l++]),a[l++]!==4)break;l=tI(a,l);const u=a[l++];if(u===64)r+="."+E5(u);else break;if(l+=12,a[l++]!==5)break;l=tI(a,l);const f=a[l++];let h=(f&248)>>3;h===31&&(h+=1+((f&7)<<3)+((a[l]&224)>>5)),r+="."+h}break}case"hvc1":case"hev1":{const o=ji(t,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],c=a&31,u=di(o,2),f=(a&32)>>5?"H":"L",h=o[12],p=o.subarray(6,12);r+="."+l+c,r+="."+u.toString(16).toUpperCase(),r+="."+f+h;let m="";for(let g=p.length;g--;){const b=p[g];(b||m)&&(m="."+b.toString(16).toUpperCase()+m)}r+=m;break}case"dvh1":case"dvhe":{const o=ji(t,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;r+="."+_0(a)+"."+_0(l);break}case"vp09":{const o=ji(t,["vpcC"])[0],a=o[4],l=o[5],c=o[6]>>4&15;r+="."+_0(a)+"."+_0(l)+"."+_0(c);break}case"av01":{const o=ji(t,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,c=o[2]>>>7?"H":"M",u=(o[2]&64)>>6,f=(o[2]&32)>>5,h=a===2&&u?f?12:10:u?10:8,p=(o[2]&16)>>4,m=(o[2]&8)>>3,g=(o[2]&4)>>2,b=o[2]&3;r+="."+a+"."+_0(l)+c+"."+_0(h)+"."+p+"."+m+g+b+"."+_0(1)+"."+_0(1)+"."+_0(1)+"."+0;break}}return{codec:r,encrypted:s}}function tI(i,e){const t=e+5;for(;i[e++]&128&&e<t;);return e}function E5(i){return("0"+i.toString(16).toUpperCase()).slice(-2)}function _0(i){return(i<10?"0":"")+i}function Ywe(i,e){if(!i||!e)return i;const t=e.keyId;return t&&e.isCommonEncryption&&ji(i,["moov","trak"]).forEach(r=>{const o=ji(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=ji(o,["enca"]);const l=a.length>0;l||(a=ji(o,["encv"])),a.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);ji(u,["sinf"]).forEach(h=>{const p=pie(h);if(p){const m=p.subarray(8,24);m.some(g=>g!==0)||(st.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${P0.hexDump(m)} -> ${P0.hexDump(t)}`),p.set(t,8))}})})}),i}function pie(i){const e=ji(i,["schm"])[0];if(e){const t=Ka(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return ji(i,["schi","tenc"])[0]}return null}function Xwe(i,e){return ji(e,["moof","traf"]).reduce((t,n)=>{const r=ji(n,["tfdt"])[0],s=r[0],o=ji(n,["tfhd"]).reduce((a,l)=>{const c=di(l,4),u=i[c];if(u){let f=di(r,4);if(s===1){if(f===KD)return st.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;f*=KD+1,f+=di(r,8)}const h=u.timescale||9e4,p=f/h;if(Pn(p)&&(a===null||p<a))return p}return a},null);return o!==null&&Pn(o)&&(t===null||o<t)?o:t},null)}function Qwe(i,e){let t=0,n=0,r=0;const s=ji(i,["moof","traf"]);for(let o=0;o<s.length;o++){const a=s[o],l=ji(a,["tfhd"])[0],c=di(l,4),u=e[c];if(!u)continue;const f=u.default,h=di(l,0)|(f==null?void 0:f.flags);let p=f==null?void 0:f.duration;h&8&&(h&2?p=di(l,12):p=di(l,8));const m=u.timescale||9e4,g=ji(a,["trun"]);for(let b=0;b<g.length;b++){if(t=Zwe(g[b]),!t&&p){const T=di(g[b],4);t=p*T}u.type===hs.VIDEO?n+=t/m:u.type===hs.AUDIO&&(r+=t/m)}}if(n===0&&r===0){let o=1/0,a=0,l=0;const c=ji(i,["sidx"]);for(let u=0;u<c.length;u++){const f=Wwe(c[u]);if(f!=null&&f.references){o=Math.min(o,f.earliestPresentationTime/f.timescale);const h=f.references.reduce((p,m)=>p+m.info.duration||0,0);a=Math.max(a,h+f.earliestPresentationTime/f.timescale),l=a-o}}if(l&&Pn(l))return l}return n||r}function Zwe(i){const e=di(i,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const r=di(i,4);for(let s=0;s<r;s++){if(e&256){const o=di(i,t);n+=o,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function Jwe(i,e,t){ji(e,["moof","traf"]).forEach(n=>{ji(n,["tfhd"]).forEach(r=>{const s=di(r,4),o=i[s];if(!o)return;const a=o.timescale||9e4;ji(n,["tfdt"]).forEach(l=>{const c=l[0],u=t*a;if(u){let f=di(l,4);if(c===0)f-=u,f=Math.max(f,0),eI(l,4,f);else{f*=Math.pow(2,32),f+=di(l,8),f-=u,f=Math.max(f,0);const h=Math.floor(f/(KD+1)),p=Math.floor(f%(KD+1));eI(l,4,h),eI(l,8,p)}}})})})}function eMe(i){const e={valid:null,remainder:null},t=ji(i,["moof"]);if(t.length<2)return e.remainder=i,e;const n=t[t.length-1];return e.valid=rx(i,0,n.byteOffset-8),e.remainder=rx(i,n.byteOffset-8),e}function _d(i,e){const t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t}function RW(i,e){const t=[],n=e.samples,r=e.timescale,s=e.id;let o=!1;return ji(n,["moof"]).map(l=>{const c=l.byteOffset-8;ji(l,["traf"]).map(f=>{const h=ji(f,["tfdt"]).map(p=>{const m=p[0];let g=di(p,4);return m===1&&(g*=Math.pow(2,32),g+=di(p,8)),g/r})[0];return h!==void 0&&(i=h),ji(f,["tfhd"]).map(p=>{const m=di(p,4),g=di(p,0)&16777215,b=(g&1)!==0,T=(g&2)!==0,C=(g&8)!==0;let R=0;const P=(g&16)!==0;let I=0;const F=(g&32)!==0;let k=8;m===s&&(b&&(k+=8),T&&(k+=4),C&&(R=di(p,k),k+=4),P&&(I=di(p,k),k+=4),F&&(k+=4),e.type==="video"&&(o=tMe(e.codec)),ji(f,["trun"]).map(q=>{const H=q[0],O=di(q,0)&16777215,$=(O&1)!==0;let ee=0;const Y=(O&4)!==0,oe=(O&256)!==0;let re=0;const Q=(O&512)!==0;let se=0;const le=(O&1024)!==0,de=(O&2048)!==0;let ie=0;const ge=di(q,4);let Ce=8;$&&(ee=di(q,Ce),Ce+=4),Y&&(Ce+=4);let Ie=ee+c;for(let Ee=0;Ee<ge;Ee++){if(oe?(re=di(q,Ce),Ce+=4):re=R,Q?(se=di(q,Ce),Ce+=4):se=I,le&&(Ce+=4),de&&(H===0?ie=di(q,Ce):ie=hie(q,Ce),Ce+=4),e.type===hs.VIDEO){let Be=0;for(;Be<se;){const qe=di(n,Ie);if(Ie+=4,nMe(o,n[Ie])){const it=n.subarray(Ie,Ie+qe);Aie(it,o?2:1,i+ie/r,t)}Ie+=qe,Be+=qe+4}}i+=re/r}}))})})}),t}function tMe(i){if(!i)return!1;const e=i.indexOf("."),t=e<0?i:i.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function nMe(i,e){if(i){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Aie(i,e,t,n){const r=mie(i);let s=0;s+=e;let o=0,a=0,l=0;for(;s<r.length;){o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(l===255);a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(l===255);const c=r.length-s;let u=s;if(a<c)s+=a;else if(a>c){st.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(r[u++]===181){const h=fie(r,u);if(u+=2,h===49){const p=di(r,u);if(u+=4,p===1195456820){const m=r[u++];if(m===3){const g=r[u++],b=31&g,T=64&g,C=T?2+b*3:0,R=new Uint8Array(C);if(T){R[0]=g;for(let P=1;P<C;P++)R[P]=r[u++]}n.push({type:m,payloadType:o,pts:t,bytes:R})}}}}}else if(o===5&&a>16){const f=[];for(let m=0;m<16;m++){const g=r[u++].toString(16);f.push(g.length==1?"0"+g:g),(m===3||m===5||m===7||m===9)&&f.push("-")}const h=a-16,p=new Uint8Array(h);for(let m=0;m<h;m++)p[m]=r[u++];n.push({payloadType:o,pts:t,uuid:f.join(""),userData:X0(p),userDataBytes:p})}}}function mie(i){const e=i.byteLength,t=[];let n=1;for(;n<e-2;)i[n]===0&&i[n+1]===0&&i[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return i;const r=e-t.length,s=new Uint8Array(r);let o=0;for(n=0;n<r;o++,n++)o===t[0]&&(o++,t.shift()),s[n]=i[o];return s}function iMe(i){const e=i[0];let t="",n="",r=0,s=0,o=0,a=0,l=0,c=0;if(e===0){for(;Ka(i.subarray(c,c+1))!=="\0";)t+=Ka(i.subarray(c,c+1)),c+=1;for(t+=Ka(i.subarray(c,c+1)),c+=1;Ka(i.subarray(c,c+1))!=="\0";)n+=Ka(i.subarray(c,c+1)),c+=1;n+=Ka(i.subarray(c,c+1)),c+=1,r=di(i,12),s=di(i,16),a=di(i,20),l=di(i,24),c=28}else if(e===1){c+=4,r=di(i,c),c+=4;const f=di(i,c);c+=4;const h=di(i,c);for(c+=4,o=2**32*f+h,Swe(o)||(o=Number.MAX_SAFE_INTEGER,st.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=di(i,c),c+=4,l=di(i,c),c+=4;Ka(i.subarray(c,c+1))!=="\0";)t+=Ka(i.subarray(c,c+1)),c+=1;for(t+=Ka(i.subarray(c,c+1)),c+=1;Ka(i.subarray(c,c+1))!=="\0";)n+=Ka(i.subarray(c,c+1)),c+=1;n+=Ka(i.subarray(c,c+1)),c+=1}const u=i.subarray(c,i.byteLength);return{schemeIdUri:t,value:n,timeScale:r,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:u}}function rMe(i,...e){const t=e.length;let n=8,r=t;for(;r--;)n+=e[r].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(i,4),r=0,n=8;r<t;r++)s.set(e[r],n),n+=e[r].byteLength;return s}function sMe(i,e,t){if(i.byteLength!==16)throw new RangeError("Invalid system id");let n,r;n=0,r=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(o.buffer).setUint32(0,t.byteLength,!1),rMe([112,115,115,104],new Uint8Array([n,0,0,0]),i,s,r,o,t||new Uint8Array)}function oMe(i){const e=[];if(i instanceof ArrayBuffer){const t=i.byteLength;let n=0;for(;n+32<t;){const r=new DataView(i,n),s=aMe(r);e.push(s),n+=s.size}}return e}function aMe(i){const e=i.getUint32(0),t=i.byteOffset,n=i.byteLength;if(n<e)return{offset:t,size:n};if(i.getUint32(4)!==1886614376)return{offset:t,size:e};const s=i.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const o=i.buffer,a=P0.hexDump(new Uint8Array(o,t+12,16)),l=i.getUint32(28);let c=null,u=null;if(s===0){if(e-32<l||l<22)return{offset:t,size:e};u=new Uint8Array(o,t+32,l)}else if(s===1){if(!l||n<t+32+l*16+16)return{offset:t,size:e};c=[];for(let f=0;f<l;f++)c.push(new Uint8Array(o,t+32+f*16,16))}return{version:s,systemId:a,kids:c,data:u,offset:t,size:e}}let w5={};class yS{static clearKeyUriToKeyIdMap(){w5={}}constructor(e,t,n,r=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case iu.FAIRPLAY:case iu.WIDEVINE:case iu.PLAYREADY:case iu.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&st.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=lMe(e);return new yS(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=Bwe(this.uri);if(t)switch(this.keyFormat){case iu.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case iu.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=sMe(n,null,t),this.keyId=oie(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const r=new Uint8Array(16);r.set(n,16-n.length),n=r}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=w5[this.uri];if(!n){const r=Object.keys(w5).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,r),w5[this.uri]=n}this.keyId=n}return this}}function lMe(i){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=i>>8*(15-t)&255;return e}const gie=/\{\$([a-zA-Z0-9-_]+)\}/g;function DW(i){return gie.test(i)}function Hu(i,e,t){if(i.variableList!==null||i.hasVariableRefs)for(let n=t.length;n--;){const r=t[n],s=e[r];s&&(e[r]=WF(i,s))}}function WF(i,e){if(i.variableList!==null||i.hasVariableRefs){const t=i.variableList;return e.replace(gie,n=>{const r=n.substring(2,n.length-1),s=t==null?void 0:t[r];return s===void 0?(i.playlistParsingError||(i.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),n):s})}return e}function LW(i,e,t){let n=i.variableList;n||(i.variableList=n={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const o=new self.URL(t).searchParams;if(o.has(r))s=o.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(o){i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else r=e.NAME,s=e.VALUE;r in n?i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):n[r]=s||""}function cMe(i,e,t){const n=e.IMPORT;if(t&&n in t){let r=i.variableList;r||(i.variableList=r={}),r[n]=t[n]}else i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function Zy(i=!0){return typeof self>"u"?void 0:(i||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function uMe(i){return typeof self<"u"&&i===self.ManagedMediaSource}const YD={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function fMe(i,e){const t=YD[e];return!!t&&!!t[i.slice(0,4)]}function nI(i,e,t=!0){return!i.split(",").some(n=>!yie(n,e,t))}function yie(i,e,t=!0){var n;const r=Zy(t);return(n=r==null?void 0:r.isTypeSupported(yM(i,e)))!=null?n:!1}function yM(i,e){return`${e}/mp4;codecs="${i}"`}function PW(i){if(i){const e=i.substring(0,4);return YD.video[e]}return 2}function XD(i){return i.split(",").reduce((e,t)=>{const n=YD.video[t];return n?(n*2+e)/(e?3:2):(YD.audio[t]+e)/(e?2:1)},0)}const iI={};function hMe(i,e=!0){if(iI[i])return iI[i];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[i];for(let n=0;n<t.length;n++)if(yie(t[n],"audio",e))return iI[i]=t[n],t[n];return i}const dMe=/flac|opus/i;function QD(i,e=!0){return i.replace(dMe,t=>hMe(t.toLowerCase(),e))}function NW(i,e){return i&&i!=="mp4a"?i:e&&e.split(",")[0]}function pMe(i){const e=i.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");if(n.length>2){let r=n.shift()+".";r+=parseInt(n.shift()).toString(16),r+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[t]=r}}return e.join(",")}const BW=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,IW=/#EXT-X-MEDIA:(.*)/g,AMe=/^#EXT(?:INF|-X-TARGETDURATION):/m,OW=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),mMe=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class q0{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return q9.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return AMe.test(e)}static parseMasterPlaylist(e,t){const n=DW(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];BW.lastIndex=0;let o;for(;(o=BW.exec(e))!=null;)if(o[1]){var a;const c=new lo(o[1]);Hu(r,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=WF(r,o[2]),f={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:q0.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(f.width=h.width,f.height=h.height),gMe(c.CODECS,f),(a=f.unknownCodecs)!=null&&a.length||s.push(f),r.levels.push(f)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const f=new lo(u);Hu(r,f,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=f["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=f);break}case"SESSION-KEY":{const f=FW(u,t,r);f.encrypted&&f.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(f)):st.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const f=new lo(u);Hu(r,f,["NAME","VALUE","QUERYPARAM"]),LW(r,f,t)}break}case"CONTENT-STEERING":{const f=new lo(u);Hu(r,f,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:q0.resolve(f["SERVER-URI"],t),pathwayId:f["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=UW(u);break}}}const l=s.length>0&&s.length<r.levels.length;return r.levels=l?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,n){let r;const s={},o=n.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(IW.lastIndex=0;(r=IW.exec(e))!==null;){const c=new lo(r[1]),u=c.TYPE;if(u){const f=a[u],h=s[u]||[];s[u]=h,Hu(n,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const p=c.LANGUAGE,m=c["ASSOC-LANGUAGE"],g=c.CHANNELS,b=c.CHARACTERISTICS,T=c["INSTREAM-ID"],C={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||p||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:p,url:c.URI?q0.resolve(c.URI,t):""};if(m&&(C.assocLang=m),g&&(C.channels=g),b&&(C.characteristics=b),T&&(C.instreamId=T),f!=null&&f.length){const R=q0.findGroup(f,C.groupId)||f[0];kW(C,R,"audioCodec"),kW(C,R,"textCodec")}h.push(C)}}return s}static parseLevelPlaylist(e,t,n,r,s,o){const a=new rie(t),l=a.fragments;let c=null,u=0,f=0,h=0,p=0,m=null,g=new eD(r,t),b,T,C,R=-1,P=!1,I=null;for(OW.lastIndex=0,a.m3u8=e,a.hasVariableRefs=DW(e);(b=OW.exec(e))!==null;){P&&(P=!1,g=new eD(r,t),g.start=h,g.sn=u,g.cc=p,g.level=n,c&&(g.initSegment=c,g.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,I&&(g.setByteRange(I),I=null)));const H=b[1];if(H){g.duration=parseFloat(H);const O=(" "+b[2]).slice(1);g.title=O||null,g.tagList.push(O?["INF",H,O]:["INF",H])}else if(b[3]){if(Pn(g.duration)){g.start=h,C&&HW(g,C,a),g.sn=u,g.level=n,g.cc=p,l.push(g);const O=(" "+b[3]).slice(1);g.relurl=WF(a,O),GW(g,m),m=g,h+=g.duration,u++,f=0,P=!0}}else if(b[4]){const O=(" "+b[4]).slice(1);m?g.setByteRange(O,m):g.setByteRange(O)}else if(b[5])g.rawProgramDateTime=(" "+b[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),R===-1&&(R=l.length);else{if(b=b[0].match(mMe),!b){st.warn("No matches on slow regex match for level playlist!");continue}for(T=1;T<b.length&&!(typeof b[T]<"u");T++);const O=(" "+b[T]).slice(1),$=(" "+b[T+1]).slice(1),ee=b[T+2]?(" "+b[T+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":a.type=$.toUpperCase();break;case"MEDIA-SEQUENCE":u=a.startSN=parseInt($);break;case"SKIP":{const Y=new lo($);Hu(a,Y,["RECENTLY-REMOVED-DATERANGES"]);const oe=Y.decimalInteger("SKIPPED-SEGMENTS");if(Pn(oe)){a.skippedSegments=oe;for(let Q=oe;Q--;)l.unshift(null);u+=oe}const re=Y.enumeratedString("RECENTLY-REMOVED-DATERANGES");re&&(a.recentlyRemovedDateranges=re.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt($),1);break;case"VERSION":a.version=parseInt($);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":($||ee)&&g.tagList.push(ee?[$,ee]:[$]);break;case"DISCONTINUITY":p++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([O]);break;case"BITRATE":g.tagList.push([O,$]);break;case"DATERANGE":{const Y=new lo($);Hu(a,Y,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Hu(a,Y,Y.clientAttrs);const oe=new $9(Y,a.dateRanges[Y.ID]);oe.isValid||a.skippedSegments?a.dateRanges[oe.id]=oe:st.warn(`Ignoring invalid DATERANGE tag: "${$}"`),g.tagList.push(["EXT-X-DATERANGE",$]);break}case"DEFINE":{{const Y=new lo($);Hu(a,Y,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in Y?cMe(a,Y,o):LW(a,Y,t)}break}case"DISCONTINUITY-SEQUENCE":p=parseInt($);break;case"KEY":{const Y=FW($,t,a);if(Y.isSupported()){if(Y.method==="NONE"){C=void 0;break}C||(C={}),C[Y.keyFormat]&&(C=Ga({},C)),C[Y.keyFormat]=Y}else st.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${$}"`);break}case"START":a.startTimeOffset=UW($);break;case"MAP":{const Y=new lo($);if(Hu(a,Y,["BYTERANGE","URI"]),g.duration){const oe=new eD(r,t);zW(oe,Y,n,C),c=oe,g.initSegment=c,c.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=c.rawProgramDateTime)}else{const oe=g.byteRangeEndOffset;if(oe){const re=g.byteRangeStartOffset;I=`${oe-re}@${re}`}else I=null;zW(g,Y,n,C),c=g,P=!0}break}case"SERVER-CONTROL":{const Y=new lo($);a.canBlockReload=Y.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=Y.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&Y.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=Y.optionalFloat("PART-HOLD-BACK",0),a.holdBack=Y.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const Y=new lo($);a.partTarget=Y.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Y=a.partList;Y||(Y=a.partList=[]);const oe=f>0?Y[Y.length-1]:void 0,re=f++,Q=new lo($);Hu(a,Q,["BYTERANGE","URI"]);const se=new iie(Q,g,t,re,oe);Y.push(se),g.duration+=se.duration;break}case"PRELOAD-HINT":{const Y=new lo($);Hu(a,Y,["URI"]),a.preloadHint=Y;break}case"RENDITION-REPORT":{const Y=new lo($);Hu(a,Y,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(Y);break}default:st.warn(`line parsed but not handled: ${b}`);break}}}m&&!m.relurl?(l.pop(),h-=m.duration,a.partList&&(a.fragmentHint=m)):a.partList&&(GW(g,m),g.cc=p,a.fragmentHint=g,C&&HW(g,C,a));const F=l.length,k=l[0],q=l[F-1];if(h+=a.skippedSegments*a.targetduration,h>0&&F&&q){a.averagetargetduration=h/F;const H=q.sn;a.endSN=H!=="initSegment"?H:0,a.live||(q.endList=!0),k&&(a.startCC=k.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(h+=a.fragmentHint.duration),a.totalduration=h,a.endCC=p,R>0&&yMe(l,R),a}}function FW(i,e,t){var n,r;const s=new lo(i);Hu(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(n=s.METHOD)!=null?n:"",a=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(r=s.KEYFORMAT)!=null?r:"identity";a&&s.IV&&!l&&st.error(`Invalid IV: ${s.IV}`);const f=a?q0.resolve(a,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new yS(o,f,u,h,l)}function UW(i){const t=new lo(i).decimalFloatingPoint("TIME-OFFSET");return Pn(t)?t:null}function gMe(i,e){let t=(i||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const r=t.filter(s=>fMe(s,n));r.length&&(e[`${n}Codec`]=r.join(","),t=t.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=t}function kW(i,e,t){const n=e[t];n&&(i[t]=n)}function yMe(i,e){let t=i[e];for(let n=e;n--;){const r=i[n];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function GW(i,e){i.rawProgramDateTime?i.programDateTime=Date.parse(i.rawProgramDateTime):e!=null&&e.programDateTime&&(i.programDateTime=e.endProgramDateTime),Pn(i.programDateTime)||(i.programDateTime=null,i.rawProgramDateTime=null)}function zW(i,e,t,n){i.relurl=e.URI,e.BYTERANGE&&i.setByteRange(e.BYTERANGE),i.level=t,i.sn="initSegment",n&&(i.levelkeys=n),i.initSegment=null}function HW(i,e,t){i.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&n.push(i)}var Rr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ui={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function VW(i){const{type:e}=i;switch(e){case Rr.AUDIO_TRACK:return ui.AUDIO;case Rr.SUBTITLE_TRACK:return ui.SUBTITLE;default:return ui.MAIN}}function rI(i,e){let t=i.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class vMe{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(pe.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,s=n||r,o=new s(t);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Rr.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:s,url:o,deliveryDirectives:a}=t;this.load({id:n,level:r,pathwayId:s,responseType:"text",type:Rr.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Rr.AUDIO_TRACK,url:s,deliveryDirectives:o})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:s,deliveryDirectives:o}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:Rr.SUBTITLE_TRACK,url:s,deliveryDirectives:o})}load(e){var t;const n=this.hls.config;let r=this.getInternalLoader(e);if(r){const c=r.context;if(c&&c.url===e.url&&c.level===e.level){st.trace("[playlist-loader]: playlist request ongoing");return}st.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===Rr.MANIFEST?s=n.manifestLoadPolicy.default:s=Ga({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),Pn((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Rr.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Rr.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Rr.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,f=c.targetduration;if(u&&f){const h=Math.max(u*3,f*.8)*1e3;s=Ga({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,f,h)=>{const p=this.getInternalLoader(f);this.resetInternalLoader(f.type);const m=c.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,f,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),q0.isMediaPlaylist(m)?this.handleTrackOrLevelPlaylist(c,u,f,h||null,p):this.handleMasterPlaylist(c,u,f,h)},onError:(c,u,f,h)=>{this.handleNetworkError(u,f,!1,c,h)},onTimeout:(c,u,f)=>{this.handleNetworkError(u,f,!0,void 0,c)}};r.load(e,a,l)}handleMasterPlaylist(e,t,n,r){const s=this.hls,o=e.data,a=rI(e,n),l=q0.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,n,l.playlistParsingError,r,t);return}const{contentSteering:c,levels:u,sessionData:f,sessionKeys:h,startTimeOffset:p,variableList:m}=l;this.variableList=m;const{AUDIO:g=[],SUBTITLES:b,"CLOSED-CAPTIONS":T}=q0.parseMasterPlaylistMedia(o,a,l);g.length&&!g.some(R=>!R.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(st.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new lo({}),bitrate:0,url:""})),s.trigger(pe.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:b,captions:T,contentSteering:c,url:a,stats:t,networkDetails:r,sessionData:f,sessionKeys:h,startTimeOffset:p,variableList:m})}handleTrackOrLevelPlaylist(e,t,n,r,s){const o=this.hls,{id:a,level:l,type:c}=n,u=rI(e,n),f=0,h=Pn(l)?l:Pn(a)?a:0,p=VW(n),m=q0.parseLevelPlaylist(e.data,u,h,p,f,this.variableList);if(c===Rr.MANIFEST){const g={attrs:new lo({}),bitrate:0,details:m,name:"",url:u};o.trigger(pe.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=m,this.handlePlaylistLoaded(m,e,t,n,r,s)}handleManifestParsingError(e,t,n,r,s){this.hls.trigger(pe.ERROR,{type:vi.NETWORK_ERROR,details:St.MANIFEST_PARSING_ERROR,fatal:t.type===Rr.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:s})}handleNetworkError(e,t,n=!1,r,s){let o=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Rr.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===Rr.AUDIO_TRACK||e.type===Rr.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);st.warn(`[playlist-loader]: ${o}`);let l=St.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Rr.MANIFEST:l=n?St.MANIFEST_LOAD_TIMEOUT:St.MANIFEST_LOAD_ERROR,c=!0;break;case Rr.LEVEL:l=n?St.LEVEL_LOAD_TIMEOUT:St.LEVEL_LOAD_ERROR,c=!1;break;case Rr.AUDIO_TRACK:l=n?St.AUDIO_TRACK_LOAD_TIMEOUT:St.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Rr.SUBTITLE_TRACK:l=n?St.SUBTITLE_TRACK_LOAD_TIMEOUT:St.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const f={type:vi.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:t,stats:s};if(r){const h=(t==null?void 0:t.url)||e.url;f.response=El({url:h,data:void 0},r)}this.hls.trigger(pe.ERROR,f)}handlePlaylistLoaded(e,t,n,r,s,o){const a=this.hls,{type:l,level:c,id:u,groupId:f,deliveryDirectives:h}=r,p=rI(t,r),m=VW(r),g=typeof r.level=="number"&&m===ui.MAIN?c:void 0;if(!e.fragments.length){const T=new Error("No Segments found in Playlist");a.trigger(pe.ERROR,{type:vi.NETWORK_ERROR,details:St.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:T,reason:T.message,response:t,context:r,level:g,parent:m,networkDetails:s,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const b=e.playlistParsingError;if(b){a.trigger(pe.ERROR,{type:vi.NETWORK_ERROR,details:St.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:b,reason:b.message,response:t,context:r,level:g,parent:m,networkDetails:s,stats:n});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Rr.MANIFEST:case Rr.LEVEL:a.trigger(pe.LEVEL_LOADED,{details:e,level:g||0,id:u||0,stats:n,networkDetails:s,deliveryDirectives:h});break;case Rr.AUDIO_TRACK:a.trigger(pe.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:f||"",stats:n,networkDetails:s,deliveryDirectives:h});break;case Rr.SUBTITLE_TRACK:a.trigger(pe.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:f||"",stats:n,networkDetails:s,deliveryDirectives:h});break}}}function vie(i,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=i,e.dispatchEvent(t)}function xie(i,e){const t=i.mode;if(t==="disabled"&&(i.mode="hidden"),i.cues&&!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){st.debug(`[texttrack-utils]: ${n}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,i.addCue(r)}catch(r){st.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(i.mode=t)}function p2(i){const e=i.mode;if(e==="disabled"&&(i.mode="hidden"),i.cues)for(let t=i.cues.length;t--;)i.removeCue(i.cues[t]);e==="disabled"&&(i.mode=e)}function KF(i,e,t,n){const r=i.mode;if(r==="disabled"&&(i.mode="hidden"),i.cues&&i.cues.length>0){const s=bMe(i.cues,e,t);for(let o=0;o<s.length;o++)(!n||n(s[o]))&&i.removeCue(s[o])}r==="disabled"&&(i.mode=r)}function xMe(i,e){if(e<i[0].startTime)return 0;const t=i.length-1;if(e>i[t].endTime)return-1;let n=0,r=t;for(;n<=r;){const s=Math.floor((r+n)/2);if(e<i[s].startTime)r=s-1;else if(e>i[s].startTime&&n<t)n=s+1;else return s}return i[n].startTime-e<e-i[r].startTime?n:r}function bMe(i,e,t){const n=[],r=xMe(i,e);if(r>-1)for(let s=r,o=i.length;s<o;s++){const a=i[s];if(a.startTime>=e&&a.endTime<=t)n.push(a);else if(a.startTime>t)return n}return n}function tD(i){const e=[];for(let t=0;t<i.length;t++){const n=i[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(i[t])}return e}var od={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const _Me=.25;function YF(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function qW(i,e,t,n,r){let s=new i(e,t,"");try{s.value=n,r&&(s.type=r)}catch{s=new i(e,t,JSON.stringify(r?El({type:r},n):n))}return s}const M5=(()=>{const i=YF();try{i&&new i(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function sI(i,e){return i.getTime()/1e3-e}function SMe(i){return Uint8Array.from(i.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class TMe{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(p2(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return vie(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:r}}}=this;if(!n&&!r)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=YF();if(o)for(let a=0;a<s.length;a++){const l=s[a].type;if(l===od.emsg&&!n||!r)continue;const c=cie(s[a].data);if(c){const u=s[a].pts;let f=u+s[a].duration;f>M5&&(f=M5),f-u<=0&&(f=u+_Me);for(let p=0;p<c.length;p++){const m=c[p];if(!lie(m)){this.updateId3CueEnds(u,l);const g=qW(o,u,f,m,l);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,t){var n;const r=(n=this.id3Track)==null?void 0:n.cues;if(r)for(let s=r.length;s--;){const o=r[s];o.type===t&&o.startTime<e&&o.endTime===M5&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let c;r==="audio"?c=u=>u.type===od.audioId3&&l:r==="video"?c=u=>u.type===od.emsg&&a:c=u=>u.type===od.audioId3&&l||u.type===od.emsg&&a,KF(s,t,n,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:r}=this,{dateRanges:s}=t,o=Object.keys(s);if(r){const u=Object.keys(n).filter(f=>!o.includes(f));for(let f=u.length;f--;){const h=u[f];Object.keys(n[h].cues).forEach(p=>{r.removeCue(n[h].cues[p])}),delete n[h]}}const a=t.fragments[t.fragments.length-1];if(o.length===0||!Pn(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=YF();for(let u=0;u<o.length;u++){const f=o[u],h=s[f],p=sI(h.startDate,l),m=n[f],g=(m==null?void 0:m.cues)||{};let b=(m==null?void 0:m.durationKnown)||!1,T=M5;const C=h.endDate;if(C)T=sI(C,l),b=!0;else if(h.endOnNext&&!b){const P=o.reduce((I,F)=>{if(F!==h.id){const k=s[F];if(k.class===h.class&&k.startDate>h.startDate&&(!I||h.startDate<I.startDate))return k}return I},null);P&&(T=sI(P.startDate,l),b=!0)}const R=Object.keys(h.attr);for(let P=0;P<R.length;P++){const I=R[P];if(!Rwe(I))continue;const F=g[I];if(F)b&&!m.durationKnown&&(F.endTime=T);else if(c){let k=h.attr[I];Dwe(I)&&(k=SMe(k));const q=qW(c,p,T,{key:I,data:k},od.dateRange);q&&(q.id=f,this.id3Track.addCue(q),g[I]=q)}}n[f]={cues:g,dateRange:h,durationKnown:b}}}}class EMe{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:o*r);const u=r;return c+Math.min(this.stallCount*1,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(e===null||t===null||n===null)return null;const r=n.edge,s=e-t-this.edgeStalled,o=r-n.totalduration,a=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,s),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(pe.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(pe.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===St.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&st.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:s}=this.config;if(!r||s===1||!t.live)return;const o=this.targetLatency;if(o===null)return;const a=n-o,l=Math.min(this.maxLatency,o+t.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,s)),f=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,f))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const XF=["NONE","TYPE-0","TYPE-1",null];function wMe(i){return XF.indexOf(i)>-1}const ZD=["SDR","PQ","HLG"];function MMe(i){return!!i&&ZD.indexOf(i)>-1}var kw={No:"",Yes:"YES",v2:"v2"};function $W(i){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=i,r=n<e/2;return e&&r?t?kw.v2:kw.Yes:kw.No}class QF{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Hx{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return jW(this._audioGroups,e)}hasSubtitleGroup(e){return jW(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function jW(i,e){return!e||!i?!1:i.indexOf(e)!==-1}function oI(i,e){const t=e.startPTS;if(Pn(t)){let n=0,r;e.sn>i.sn?(n=t-i.start,r=i):(n=i.start-t,r=e),r.duration!==n&&(r.duration=n)}else e.sn>i.sn?i.cc===e.cc&&i.minEndPTS?e.start=i.start+(i.minEndPTS-i.start):e.start=i.start+i.duration:e.start=Math.max(i.start-e.duration,0)}function bie(i,e,t,n,r,s){n-t<=0&&(st.warn("Fragment should have a positive duration",e),n=t+e.duration,s=r+e.duration);let a=t,l=n;const c=e.startPTS,u=e.endPTS;if(Pn(c)){const b=Math.abs(c-t);Pn(e.deltaPTS)?e.deltaPTS=Math.max(b,e.deltaPTS):e.deltaPTS=b,a=Math.max(t,c),t=Math.min(t,c),r=Math.min(r,e.startDTS),l=Math.min(n,u),n=Math.max(n,u),s=Math.max(s,e.endDTS)}const f=t-e.start;e.start!==0&&(e.start=t),e.duration=n-e.start,e.startPTS=t,e.maxStartPTS=a,e.startDTS=r,e.endPTS=n,e.minEndPTS=l,e.endDTS=s;const h=e.sn;if(!i||h<i.startSN||h>i.endSN)return 0;let p;const m=h-i.startSN,g=i.fragments;for(g[m]=e,p=m;p>0;p--)oI(g[p],g[p-1]);for(p=m;p<g.length-1;p++)oI(g[p],g[p+1]);return i.fragmentHint&&oI(g[g.length-1],i.fragmentHint),i.PTSKnown=i.alignedSliding=!0,f}function CMe(i,e){let t=null;const n=i.fragments;for(let a=n.length-1;a>=0;a--){const l=n[a].initSegment;if(l){t=l;break}}i.fragmentHint&&delete i.fragmentHint.endPTS;let r;LMe(i,e,(a,l,c,u)=>{if(e.skippedSegments&&l.cc!==a.cc){const f=a.cc-l.cc;for(let h=c;h<u.length;h++)u[h].cc+=f}Pn(a.startPTS)&&Pn(a.endPTS)&&(l.start=l.startPTS=a.startPTS,l.startDTS=a.startDTS,l.maxStartPTS=a.maxStartPTS,l.endPTS=a.endPTS,l.endDTS=a.endDTS,l.minEndPTS=a.minEndPTS,l.duration=a.endPTS-a.startPTS,l.duration&&(r=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=a.elementaryStreams,l.loader=a.loader,l.stats=a.stats,a.initSegment&&(l.initSegment=a.initSegment,t=a.initSegment)});const s=e.fragments;if(t&&(e.fragmentHint?s.concat(e.fragmentHint):s).forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(a=>!a),e.deltaUpdateFailed){st.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)s.shift();e.startSN=s[0].sn}else e.canSkipDateRanges&&(e.dateRanges=RMe(i.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=s[s.length-1].cc}DMe(i.partList,e.partList,(a,l)=>{l.elementaryStreams=a.elementaryStreams,l.stats=a.stats}),r?bie(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):_ie(i,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=i.driftStartTime,e.driftStart=i.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const a=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=a),e.driftEndTime=o,e.driftEnd=a}else e.driftEndTime=i.driftEndTime,e.driftEnd=i.driftEnd,e.advancedDateTime=i.advancedDateTime}function RMe(i,e,t){const n=Ga({},i);return t&&t.forEach(r=>{delete n[r]}),Object.keys(e).forEach(r=>{const s=new $9(e[r].attr,n[r]);s.isValid?n[r]=s:st.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[r].attr)}"`)}),n}function DMe(i,e,t){if(i&&e){let n=0;for(let r=0,s=i.length;r<=s;r++){const o=i[r],a=e[r+n];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?t(o,a):n--}}}function LMe(i,e,t){const n=e.skippedSegments,r=Math.max(i.startSN,e.startSN)-e.startSN,s=(i.fragmentHint?1:0)+(n?e.endSN:Math.min(i.endSN,e.endSN))-e.startSN,o=e.startSN-i.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments;for(let c=r;c<=s;c++){const u=l[o+c];let f=a[c];n&&!f&&c<n&&(f=e.fragments[c]=u),u&&f&&t(u,f,c,a)}}function _ie(i,e){const t=e.startSN+e.skippedSegments-i.startSN,n=i.fragments;t<0||t>=n.length||ZF(e,n[t].start)}function ZF(i,e){if(e){const t=i.fragments;for(let n=i.skippedSegments;n<t.length;n++)t[n].start+=e;i.fragmentHint&&(i.fragmentHint.start+=e)}}function PMe(i,e=1/0){let t=1e3*i.targetduration;if(i.updated){const n=i.fragments;if(n.length&&t*4>e){const s=n[n.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function NMe(i,e,t){if(!(i!=null&&i.details))return null;const n=i.details;let r=n.fragments[e-n.startSN];return r||(r=n.fragmentHint,r&&r.sn===e)?r:e<n.startSN&&t&&t.sn===e?t:null}function WW(i,e,t){var n;return i!=null&&i.details?Sie((n=i.details)==null?void 0:n.partList,e,t):null}function Sie(i,e,t){if(i)for(let n=i.length;n--;){const r=i[n];if(r.index===t&&r.fragment.sn===e)return r}return null}function Tie(i){i.forEach((e,t)=>{const{details:n}=e;n!=null&&n.fragments&&n.fragments.forEach(r=>{r.level=t})})}function JD(i){switch(i.details){case St.FRAG_LOAD_TIMEOUT:case St.KEY_LOAD_TIMEOUT:case St.LEVEL_LOAD_TIMEOUT:case St.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function KW(i,e){const t=JD(e);return i.default[`${t?"timeout":"error"}Retry`]}function X9(i,e){const t=i.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*i.retryDelayMs,i.maxRetryDelayMs)}function YW(i){return El(El({},i),{errorRetry:null,timeoutRetry:null})}function eL(i,e,t,n){if(!i)return!1;const r=n==null?void 0:n.code,s=e<i.maxNumRetry&&(BMe(r)||!!t);return i.shouldRetry?i.shouldRetry(i,e,t,n,s):s}function BMe(i){return i===0&&navigator.onLine===!1||!!i&&(i<400||i>499)}const Eie={search:function(i,e){let t=0,n=i.length-1,r=null,s=null;for(;t<=n;){r=(t+n)/2|0,s=i[r];const o=e(s);if(o>0)t=r+1;else if(o<0)n=r-1;else return s}return null}};function IMe(i,e,t){if(e===null||!Array.isArray(i)||!i.length||!Pn(e))return null;const n=i[0].programDateTime;if(e<(n||0))return null;const r=i[i.length-1].endProgramDateTime;if(e>=(r||0))return null;t=t||0;for(let s=0;s<i.length;++s){const o=i[s];if(FMe(e,t,o))return o}return null}function tL(i,e,t=0,n=0,r=.005){let s=null;if(i){s=e[i.sn-e[0].sn+1]||null;const a=i.endDTS-t;a>0&&a<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!i||i.level===s.level)&&JF(t,n,s)===0||OMe(s,i,Math.min(r,n))))return s;const o=Eie.search(e,JF.bind(null,t,n));return o&&(o!==i||!s)?o:s}function OMe(i,e,t){if(e&&e.start===0&&e.level<i.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),t);return i.start<=n}return!1}function JF(i=0,e=0,t){if(t.start<=i&&t.start+t.duration>i)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=i?1:t.start-n>i&&t.start?-1:0}function FMe(i,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>i}function UMe(i,e){return Eie.search(i,t=>t.cc<e?1:t.cc>e?-1:0)}var Ya={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Yh={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class wie{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=st.log.bind(st,"[info]:"),this.warn=st.warn.bind(st,"[warning]:"),this.error=st.error.bind(st,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.ERROR,this.onError,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.ERROR,this.onError,this),e.off(pe.ERROR,this.onErrorOut,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ui.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,r;if(t.fatal)return;const s=this.hls,o=t.context;switch(t.details){case St.FRAG_LOAD_ERROR:case St.FRAG_LOAD_TIMEOUT:case St.KEY_LOAD_ERROR:case St.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case St.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction={action:Ya.DoNothing,flags:Yh.None};return}case St.FRAG_GAP:case St.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Ya.SendAlternateToPenaltyBox;return}case St.LEVEL_EMPTY_ERROR:case St.LEVEL_PARSING_ERROR:{var a,l;const c=t.parent===ui.MAIN?t.level:s.loadLevel;t.details===St.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(l=a.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case St.LEVEL_LOAD_ERROR:case St.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case St.AUDIO_TRACK_LOAD_ERROR:case St.AUDIO_TRACK_LOAD_TIMEOUT:case St.SUBTITLE_LOAD_ERROR:case St.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=s.levels[s.loadLevel];if(c&&(o.type===Rr.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===Rr.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=Ya.SendAlternateToPenaltyBox,t.errorAction.flags=Yh.MoveAllAlternatesMatchingHost;return}}return;case St.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.levels[s.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?t.errorAction={action:Ya.SendAlternateToPenaltyBox,flags:Yh.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case St.BUFFER_ADD_CODEC_ERROR:case St.REMUX_ALLOC_ERROR:case St.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(r=t.level)!=null?r:s.loadLevel);return;case St.INTERNAL_EXCEPTION:case St.BUFFER_APPENDING_ERROR:case St.BUFFER_FULL_ERROR:case St.LEVEL_SWITCH_ERROR:case St.BUFFER_STALLED_ERROR:case St.BUFFER_SEEK_OVER_HOLE:case St.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Ya.DoNothing,flags:Yh.None};return}t.type===vi.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,r=KW(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(eL(r,s,JD(e),e.response))return{action:Ya.RetryRequest,flags:Yh.None,retryConfig:r,retryCount:s};const a=this.getLevelSwitchAction(e,t);return r&&(a.retryConfig=r,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:s,keyLoadPolicy:o}=t.config,a=KW(e.details.startsWith("key")?o:s,e),l=t.levels.reduce((u,f)=>u+f.fragmentError,0);if(r&&(e.details!==St.FRAG_GAP&&r.fragmentError++,eL(a,l,JD(e),e.response)))return{action:Ya.RetryRequest,flags:Yh.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,n);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var s,o;const c=e.details;r.loadError++,c===St.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:f,loadLevel:h,minAutoLevel:p,maxAutoLevel:m}=n;n.autoLevelEnabled||(n.loadLevel=-1);const g=(s=e.frag)==null?void 0:s.type,T=(g===ui.AUDIO&&c===St.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===St.BUFFER_ADD_CODEC_ERROR||c===St.BUFFER_APPEND_ERROR))&&f.some(({audioCodec:F})=>r.audioCodec!==F),R=e.sourceBufferName==="video"&&(c===St.BUFFER_ADD_CODEC_ERROR||c===St.BUFFER_APPEND_ERROR)&&f.some(({codecSet:F,audioCodec:k})=>r.codecSet!==F&&r.audioCodec===k),{type:P,groupId:I}=(o=e.context)!=null?o:{};for(let F=f.length;F--;){const k=(F+h)%f.length;if(k!==h&&k>=p&&k<=m&&f[k].loadError===0){var a,l;const q=f[k];if(c===St.FRAG_GAP&&g===ui.MAIN&&e.frag){const H=f[k].details;if(H){const O=tL(e.frag,H.fragments,e.frag.start);if(O!=null&&O.gap)continue}}else{if(P===Rr.AUDIO_TRACK&&q.hasAudioGroup(I)||P===Rr.SUBTITLE_TRACK&&q.hasSubtitleGroup(I))continue;if(g===ui.AUDIO&&(a=r.audioGroups)!=null&&a.some(H=>q.hasAudioGroup(H))||g===ui.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(H=>q.hasSubtitleGroup(H))||T&&r.audioCodec===q.audioCodec||!T&&r.audioCodec!==q.audioCodec||R&&r.codecSet===q.codecSet)continue}u=k;break}}if(u>-1&&n.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Ya.SendAlternateToPenaltyBox,flags:Yh.None,nextAutoLevel:u}}return{action:Ya.SendAlternateToPenaltyBox,flags:Yh.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case Ya.DoNothing:break;case Ya.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==St.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break;case Ya.RetryRequest:break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r,hdcpLevel:s,nextAutoLevel:o}=n;switch(r){case Yh.None:this.switchLevel(e,o);break;case Yh.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=XF[XF.indexOf(s)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,o)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class UP{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=st.log.bind(st,`${t}:`),this.warn=st.warn.bind(st,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=t==null?void 0:t.renditionReports;if(r){let s=-1;for(let o=0;o<r.length;o++){const a=r[o];let l;try{l=new self.URL(a.URI,t.url).href}catch(c){st.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===e){s=o;break}else l===e.substring(0,l.length)&&(s=o)}if(s!==-1){const o=r[s],a=parseInt(o["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(o["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=n&&$W(n);return new QF(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:r,stats:s}=t,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;if(r.advancedDateTime=Date.now()-a,r.live||n!=null&&n.live){if(r.reloaded(n),n&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),n&&r.fragments.length>0&&CMe(n,r),!this.canLoad||!r.live)return;let l,c,u;if(r.canBlockReload&&r.endSN&&r.advanced){const b=this.hls.config.lowLatencyMode,T=r.lastPartSn,C=r.endSN,R=r.lastPartIndex,P=R!==-1,I=T===C,F=b?0:R;P?(c=I?C+1:T,u=I?F:R+1):c=C+1;const k=r.age,q=k+r.ageHeader;let H=Math.min(q-r.partTarget,r.targetduration*1.5);if(H>0){if(n&&H>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${H} with playlist age: ${r.age}`),H=0;else{const O=Math.floor(H/r.targetduration);if(c+=O,u!==void 0){const $=Math.round(H%r.targetduration/r.partTarget);u+=$}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${k.toFixed(2)}s goal: ${H} skip sn ${O} to part ${u}`)}r.tuneInGoal=H}if(l=this.getDeliveryDirectives(r,t.deliveryDirectives,c,u),b||!I){this.loadPlaylist(l);return}}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,c,u));const f=this.hls.mainForwardBufferInfo,h=f?f.end-f.len:0,p=(r.edge-h)*1e3,m=PMe(r,p);r.updated&&o>this.requestScheduled+m&&(this.requestScheduled=s.loading.start),c!==void 0&&r.canBlockReload?this.requestScheduled=s.loading.first+m-(r.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+m<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=m);let g=this.requestScheduled-o;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,t,n,r){let s=$W(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,s=kw.No),new QF(n,r,s)}checkRetry(e){const t=e.details,n=JD(e),r=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=r||{},l=!!r&&!!a&&(s===Ya.RetryRequest||!r.resolved&&s===Ya.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=X9(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}class C_{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class kMe{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new C_(e),this.fast_=new C_(t),this.defaultTTFB_=r,this.ttfb_=new C_(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new C_(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new C_(t,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new C_(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,r=e/1e3,s=n/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Mie={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},XW={};function GMe(i,e,t,n,r,s){const o=i.audioCodec?i.audioGroups:null,a=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,c=l?parseInt(l):a?1/0:2;let u=null;if(o!=null&&o.length)try{o.length===1&&o[0]?u=e.groups[o[0]].channels:u=o.reduce((f,h)=>{if(h){const p=e.groups[h];if(!p)throw new Error(`Audio track group ${h} not found`);Object.keys(p.channels).forEach(m=>{f[m]=(f[m]||0)+p.channels[m]})}return f},{2:0})}catch{return!0}return i.videoCodec!==void 0&&(i.width>1920&&i.height>1088||i.height>1920&&i.width>1088||i.frameRate>Math.max(n,30)||i.videoRange!=="SDR"&&i.videoRange!==t||i.bitrate>Math.max(r,8e6))||!!u&&Pn(c)&&Object.keys(u).some(f=>parseInt(f)>c)}function zMe(i,e,t){const n=i.videoCodec,r=i.audioCodec;if(!n||!r||!t)return Promise.resolve(Mie);const s={width:i.width,height:i.height,bitrate:Math.ceil(Math.max(i.bitrate*.9,i.averageBitrate)),framerate:i.frameRate||30},o=i.videoRange;o!=="SDR"&&(s.transferFunction=o.toLowerCase());const a=n.split(",").map(l=>({type:"media-source",video:El(El({},s),{},{contentType:yM(l,"video")})}));return r&&i.audioGroups&&i.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const f=u.channels||"",h=parseFloat(f);Pn(h)&&h>2&&a.push.apply(a,r.split(",").map(p=>({type:"media-source",audio:{contentType:yM(p,"audio"),channels:""+h}})))}}))}),Promise.all(a.map(l=>{const c=HMe(l);return XW[c]||(XW[c]=t.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function HMe(i){const{audio:e,video:t}=i,n=t||e;if(n){const r=n.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${r}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${r}`}return""}function VMe(){if(typeof matchMedia=="function"){const i=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(i.media!==e.media)return i.matches===!0}return!1}function qMe(i,e){let t=!1,n=[];return i&&(t=i!=="SDR",n=[i]),e&&(n=e.allowedVideoRanges||ZD.slice(0),t=e.preferHDR!==void 0?e.preferHDR:VMe(),t?n=n.filter(r=>r!=="SDR"):n=["SDR"]),{preferHDR:t,allowedVideoRanges:n}}function $Me(i,e,t,n,r){const s=Object.keys(i),o=n==null?void 0:n.channels,a=n==null?void 0:n.audioCodec,l=o&&parseInt(o)===2;let c=!0,u=!1,f=1/0,h=1/0,p=1/0,m=0,g=[];const{preferHDR:b,allowedVideoRanges:T}=qMe(e,r);for(let I=s.length;I--;){const F=i[s[I]];c=F.channels[2]>0,f=Math.min(f,F.minHeight),h=Math.min(h,F.minFramerate),p=Math.min(p,F.minBitrate);const k=T.filter(q=>F.videoRanges[q]>0);k.length>0&&(u=!0,g=k)}f=Pn(f)?f:0,h=Pn(h)?h:0;const C=Math.max(1080,f),R=Math.max(30,h);return p=Pn(p)?p:t,t=Math.max(p,t),u||(e=void 0,g=[]),{codecSet:s.reduce((I,F)=>{const k=i[F];if(F===I)return I;if(k.minBitrate>t)return ym(F,`min bitrate of ${k.minBitrate} > current estimate of ${t}`),I;if(!k.hasDefaultAudio)return ym(F,"no renditions with default or auto-select sound found"),I;if(a&&F.indexOf(a.substring(0,4))%5!==0)return ym(F,`audio codec preference "${a}" not found`),I;if(o&&!l){if(!k.channels[o])return ym(F,`no renditions with ${o} channel sound found (channels options: ${Object.keys(k.channels)})`),I}else if((!a||l)&&c&&k.channels[2]===0)return ym(F,"no renditions with stereo sound found"),I;return k.minHeight>C?(ym(F,`min resolution of ${k.minHeight} > maximum of ${C}`),I):k.minFramerate>R?(ym(F,`min framerate of ${k.minFramerate} > maximum of ${R}`),I):g.some(q=>k.videoRanges[q]>0)?k.maxScore<m?(ym(F,`max score of ${k.maxScore} < selected max of ${m}`),I):I&&(XD(F)>=XD(I)||k.fragmentError>i[I].fragmentError)?I:(m=k.maxScore,F):(ym(F,`no variants with VIDEO-RANGE of ${JSON.stringify(g)} found`),I)},void 0),videoRanges:g,preferHDR:b,minFramerate:h,minBitrate:p}}function ym(i,e){st.log(`[abr] start candidates with "${i}" ignored because ${e}`)}function jMe(i){return i.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function WMe(i,e,t,n){return i.slice(t,n+1).reduce((r,s)=>{if(!s.codecSet)return r;const o=s.audioGroups;let a=r[s.codecSet];a||(r[s.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,s.frameRate),a.maxScore=Math.max(a.maxScore,s.score),a.fragmentError+=s.fragmentError,a.videoRanges[s.videoRange]=(a.videoRanges[s.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(f=>{a.channels[f]=(a.channels[f]||0)+u.channels[f]}))}),r},{})}function $0(i,e,t){if("attrs"in i){const n=e.indexOf(i);if(n!==-1)return n}for(let n=0;n<e.length;n++){const r=e[n];if(sx(i,r,t))return n}return-1}function sx(i,e,t){const{groupId:n,name:r,lang:s,assocLang:o,default:a}=i,l=i.forced;return(n===void 0||e.groupId===n)&&(r===void 0||e.name===r)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in i)||KMe(i.characteristics||"",e.characteristics))&&(t===void 0||t(i,e))}function KMe(i,e=""){const t=i.split(","),n=e.split(",");return t.length===n.length&&!t.some(r=>n.indexOf(r)===-1)}function wv(i,e){const{audioCodec:t,channels:n}=i;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function YMe(i,e,t,n,r){const s=e[n],a=e.reduce((h,p,m)=>{const g=p.uri;return(h[g]||(h[g]=[])).push(m),h},{})[s.uri];a.length>1&&(n=Math.max.apply(Math,a));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),f=QW(e,n,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const p=h.audioGroups,m=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return $0(i,m,r)>-1});return f>-1?f:QW(e,n,h=>{const p=h.audioGroups,m=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return $0(i,m,r)>-1})}function QW(i,e,t){for(let n=e;n>-1;n--)if(t(i[n]))return n;for(let n=e+1;n<i.length;n++)if(t(i[n]))return n;return-1}class Cie{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:n,hls:r}=this,{autoLevelEnabled:s,media:o}=r;if(!t||!o)return;const a=performance.now(),l=n?n.stats:t.stats,c=n?n.duration:t.duration,u=a-l.loading.start,f=r.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||o.paused||!o.playbackRate||!o.readyState)return;const h=r.mainForwardBufferInfo;if(h===null)return;const p=this.bwEstimator.getEstimateTTFB(),m=Math.abs(o.playbackRate);if(u<=Math.max(p,1e3*(c/(m*2))))return;const g=h.len/m,b=l.loading.first?l.loading.first-l.loading.start:-1,T=l.loaded&&b>-1,C=this.getBwEstimate(),R=r.levels,P=R[t.level],I=l.total||Math.max(l.loaded,Math.round(c*P.averageBitrate/8));let F=T?u-b:u;F<1&&T&&(F=Math.min(u,l.loaded*8/C));const k=T?l.loaded*1e3/F:0,q=k?(I-l.loaded)/k:I*8/C+p/1e3;if(q<=g)return;const H=k?k*8:C;let O=Number.POSITIVE_INFINITY,$;for($=t.level-1;$>f;$--){const Y=R[$].maxBitrate;if(O=this.getTimeToLoadFrag(p/1e3,H,c*Y,!R[$].details),O<g)break}if(O>=q||O>c*10)return;r.nextLoadLevel=r.nextAutoLevel=$,T?this.bwEstimator.sample(u-Math.min(p,b),l.loaded):this.bwEstimator.sampleTTFB(u);const ee=R[$].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>ee&&this.resetEstimator(ee),this.clearTimer(),st.warn(`[abr] Fragment ${t.sn}${n?" part "+n.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${g.toFixed(3)} s
      Estimated load time for current fragment: ${q.toFixed(3)} s
      Estimated load time for down switch fragment: ${O.toFixed(3)} s
      TTFB estimate: ${b|0} ms
      Current BW estimate: ${Pn(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${$} @ ${ee|0} bps`),r.trigger(pe.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:n,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(st.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new kMe(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(pe.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var r;this.fragCurrent=n,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case St.BUFFER_ADD_CODEC_ERROR:case St.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case St.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:r,partCurrent:s}=this;if(n&&r&&n.sn===r.sn&&n.level===r.level){const o=performance.now(),a=s?s.stats:n.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const f=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(f,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,n,r){const s=e+n/t,o=r?this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,s=r.end-r.start;Pn(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===ui.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:t.duration,o=this.hls.levels[t.level],a=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(t.bitrateTest){const s={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(pe.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,s=r!=null&&r.stats.loaded?r.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ui.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,t,e,0,r,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,t),e);return st.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:r,config:s,minAutoLevel:o}=n,a=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,f=s.abrBandWidthUpFactor;if(c){const b=this.findBestLevel(l,o,r,c,0,u,f);if(b>=0)return b}let h=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const b=this.bitrateTestDelay;b&&(h=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-b,st.info(`[abr] bitrate test took ${Math.round(1e3*b)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=f=1)}const p=this.findBestLevel(l,o,r,c,h,u,f);if(st.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`),p>-1)return p;const m=n.levels[o],g=n.levels[n.loadLevel];return(m==null?void 0:m.bitrate)<(g==null?void 0:g.bitrate)?o:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,s,o,a){var l;const c=r+s,u=this.lastLoadedFragLevel,f=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:p}=this,{levels:m,allAudioTracks:g,loadLevel:b,config:T}=this.hls;if(m.length===1)return 0;const C=m[f],R=!!(C!=null&&(l=C.details)!=null&&l.live),P=b===-1||u===-1;let I,F="SDR",k=(C==null?void 0:C.frameRate)||0;const{audioPreference:q,videoPreference:H}=T,O=this.audioTracksByGroup||(this.audioTracksByGroup=jMe(g));if(P){if(this.firstSelection!==-1)return this.firstSelection;const re=this.codecTiers||(this.codecTiers=WMe(m,O,t,n)),Q=$Me(re,F,e,q,H),{codecSet:se,videoRanges:le,minFramerate:de,minBitrate:ie,preferHDR:ge}=Q;I=se,F=ge?le[le.length-1]:le[0],k=de,e=Math.max(e,ie),st.log(`[abr] picked start tier ${JSON.stringify(Q)}`)}else I=C==null?void 0:C.codecSet,F=C==null?void 0:C.videoRange;const $=p?p.duration:h?h.duration:0,ee=this.bwEstimator.getEstimateTTFB()/1e3,Y=[];for(let re=n;re>=t;re--){var oe;const Q=m[re],se=re>f;if(!Q)continue;if(T.useMediaCapabilities&&!Q.supportedResult&&!Q.supportedPromise){const Ee=navigator.mediaCapabilities;typeof(Ee==null?void 0:Ee.decodingInfo)=="function"&&GMe(Q,O,F,k,e,q)?(Q.supportedPromise=zMe(Q,O,Ee),Q.supportedPromise.then(Be=>{if(!this.hls)return;Q.supportedResult=Be;const qe=this.hls.levels,it=qe.indexOf(Q);Be.error?st.warn(`[abr] MediaCapabilities decodingInfo error: "${Be.error}" for level ${it} ${JSON.stringify(Be)}`):Be.supported||(st.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${it} ${JSON.stringify(Be)}`),it>-1&&qe.length>1&&(st.log(`[abr] Removing unsupported level ${it}`),this.hls.removeLevel(it)))})):Q.supportedResult=Mie}if(I&&Q.codecSet!==I||F&&Q.videoRange!==F||se&&k>Q.frameRate||!se&&k>0&&k<Q.frameRate||Q.supportedResult&&!((oe=Q.supportedResult.decodingInfoResults)!=null&&oe[0].smooth)){Y.push(re);continue}const le=Q.details,de=(p?le==null?void 0:le.partTarget:le==null?void 0:le.averagetargetduration)||$;let ie;se?ie=a*e:ie=o*e;const ge=$&&r>=$*2&&s===0?m[re].averageBitrate:m[re].maxBitrate,Ce=this.getTimeToLoadFrag(ee,ie,ge*de,le===void 0);if(ie>=ge&&(re===u||Q.loadError===0&&Q.fragmentError===0)&&(Ce<=ee||!Pn(Ce)||R&&!this.bitrateTestDelay||Ce<c)){const Ee=this.forcedAutoLevel;return re!==b&&(Ee===-1||Ee!==b)&&(Y.length&&st.trace(`[abr] Skipped level(s) ${Y.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${m[Y[0]].codecs}" ${m[Y[0]].videoRange}; not compatible with "${C.codecs}" ${F}`),st.info(`[abr] switch candidate:${f}->${re} adjustedbw(${Math.round(ie)})-bitrate=${Math.round(ie-ge)} ttfb:${ee.toFixed(1)} avgDuration:${de.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Ce.toFixed(1)} firstSelection:${P} codecSet:${I} videoRange:${F} hls.loadLevel:${b}`)),P&&(this.firstSelection=re),re}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,r=Math.min(Math.max(e,n),t);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}class XMe{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var bl={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class QMe{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.BUFFER_APPENDED,this.onBufferAppended,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const s=n[r];if(!s)break;const o=s.end;if(s.start<=e&&o!==null&&e<=o)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,r=Object.keys(n);for(let s=r.length;s--;){const o=n[r[s]];if((o==null?void 0:o.body.type)===t&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,t,n,r){this.timeRanges&&(this.timeRanges[e]=t);const s=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||s>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===n&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(a.body),u})})}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:r}=e;if(!t||n.sn==="initSegment")return;const s=R_(n),o=this.fragments[s];if(!o||o.buffered&&n.gap)return;const a=!n.relurl;Object.keys(t).forEach(l=>{const c=n.elementaryStreams[l];if(!c)return;const u=t[l],f=a||c.partial===!0;o.range[l]=this.getBufferedTimes(n,r,f,u)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=n.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),C5(o)||this.removeParts(n.sn-1,n.type)):this.removeFragment(o.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter(r=>r.fragment.sn>=e))}fragBuffered(e,t){const n=R_(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const s={time:[],partial:n},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<r.length;u++){const f=r.start(u)-this.bufferPadding,h=r.end(u)+this.bufferPadding;if(c>=f&&l<=h){s.time.push({startPTS:Math.max(o,r.start(u)),endPTS:Math.min(a,r.end(u))});break}else if(o<h&&a>f){const p=Math.max(o,r.start(u)),m=Math.min(a,r.end(u));m>p&&(s.partial=!0,s.time.push({startPTS:p,endPTS:m}))}else if(a<=f)break}return s}getPartialFragment(e){let t=null,n,r,s,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&C5(u)&&(r=u.body.start-a,s=u.body.end+a,e>=r&&e<=s&&(n=Math.min(e-r,s-e),o<=n&&(t=u.body,o=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||C5(t))}getState(e){const t=R_(e),n=this.fragments[t];return n?n.buffered?C5(n)?bl.PARTIAL:bl.OK:bl.APPENDING:bl.NOT_LOADED}isTimeBuffered(e,t,n){let r,s;for(let o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,s=n.end(o)+this.bufferPadding,e>=r&&t<=s)return!0;if(t<=r)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:r}=t;if(n.sn==="initSegment"||n.bitrateTest)return;const s=r?null:t,o=R_(n);this.fragments[o]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:s}=t;if(n.sn==="initSegment")return;const o=n.type;if(r){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(r)}this.timeRanges=s,Object.keys(s).forEach(a=>{const l=s[a];this.detectEvictedFragments(a,l,o,r)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=R_(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==n||r&&!l.gap||l.start<t&&l.end>e&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const t=R_(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const r=e.sn;this.activePartLists[e.type]=n.filter(s=>s.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function C5(i){var e,t,n;return i.buffered&&(i.body.gap||((e=i.range.video)==null?void 0:e.partial)||((t=i.range.audio)==null?void 0:t.partial)||((n=i.range.audiovideo)==null?void 0:n.partial))}function R_(i){return`${i.type}_${i.level}_${i.sn}`}const ZMe={length:0,start:()=>0,end:()=>0};class ks{static isBuffered(e,t){try{if(e){const n=ks.getBuffered(e);for(let r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}}catch{}return!1}static bufferInfo(e,t,n){try{if(e){const r=ks.getBuffered(e),s=[];let o;for(o=0;o<r.length;o++)s.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(s,t,n)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort(function(c,u){const f=c.start-u.start;return f||u.end-c.end});let r=[];if(n)for(let c=0;c<e.length;c++){const u=r.length;if(u){const f=r[u-1].end;e[c].start-f<n?e[c].end>f&&(r[u-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let s=0,o,a=t,l=t;for(let c=0;c<r.length;c++){const u=r[c].start,f=r[c].end;if(t+n>=u&&t<f)a=u,l=f,s=l-t;else if(t+n<u){o=u;break}}return{len:s,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(t){return st.log("failed to get media.buffered",t),ZMe}}}class kP{constructor(e,t,n,r=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=R5(),this.buffering={audio:R5(),video:R5(),audiovideo:R5()},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=s,this.partial=o}}function R5(){return{start:0,executeStart:0,executeEnd:0,end:0}}function nD(i,e){for(let n=0,r=i.length;n<r;n++){var t;if(((t=i[n])==null?void 0:t.cc)===e)return i[n]}return null}function JMe(i,e,t){return!!(e&&(t.endCC>t.startCC||i&&i.cc<t.startCC))}function e3e(i,e){const t=i.fragments,n=e.fragments;if(!n.length||!t.length){st.log("No fragments to align");return}const r=nD(t,n[0].cc);if(!r||r&&!r.startPTS){st.log("No frag in previous level to align on");return}return r}function ZW(i,e){if(i){const t=i.start+e;i.start=i.startPTS=t,i.endPTS=t+i.duration}}function Rie(i,e){const t=e.fragments;for(let n=0,r=t.length;n<r;n++)ZW(t[n],i);e.fragmentHint&&ZW(e.fragmentHint,i),e.alignedSliding=!0}function t3e(i,e,t){e&&(n3e(i,t,e),!t.alignedSliding&&e&&nL(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&_ie(e,t))}function n3e(i,e,t){if(JMe(i,t,e)){const n=e3e(t,e);n&&Pn(n.start)&&(st.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Rie(n.start,e))}}function nL(i,e){if(!i.hasProgramDateTime||!e.hasProgramDateTime)return;const t=i.fragments,n=e.fragments;if(!t.length||!n.length)return;let r,s;const o=Math.min(e.endCC,i.endCC);e.startCC<o&&i.startCC<o&&(r=nD(n,o),s=nD(t,o)),(!r||!s)&&(r=n[Math.floor(n.length/2)],s=nD(t,r.cc)||t[Math.floor(t.length/2)]);const a=r.programDateTime,l=s.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(s.start-r.start);Rie(c,i)}const JW=Math.pow(2,17);class i3e{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Em({type:vi.NETWORK_ERROR,details:St.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){l(tK(e));return}else e.gap=!1;const c=this.loader=e.loader=s?new s(r):new o(r),u=eK(e),f=YW(r.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:JW};e.stats=c.stats,c.load(u,h,{onSuccess:(p,m,g,b)=>{this.resetLoader(e,c);let T=p.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(T.slice(0,16)),T=T.slice(16)),a({frag:e,part:null,payload:T,networkDetails:b})},onError:(p,m,g,b)=>{this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:El({url:n,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:b}))},onAbort:(p,m,g)=>{this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,m,g)=>{this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:p}))},onProgress:(p,m,g,b)=>{t&&t({frag:e,part:null,payload:g,networkDetails:b})}})})}loadPart(e,t,n){this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(tK(e,t));return}const c=this.loader=e.loader=s?new s(r):new o(r),u=eK(e,t),f=YW(r.fragLoadPolicy.default),h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:JW};t.stats=c.stats,c.load(u,h,{onSuccess:(p,m,g,b)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const T={frag:e,part:t,payload:p.data,networkDetails:b};n(T),a(T)},onError:(p,m,g,b)=>{this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:El({url:u.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:b}))},onAbort:(p,m,g)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,m,g)=>{this.resetLoader(e,c),l(new Em({type:vi.NETWORK_ERROR,details:St.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:p}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,s=r.total;if(n.loaded+=r.loaded,s){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/s),l),f=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+f}else n.total=Math.max(n.loaded,n.total);const o=n.loading,a=r.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function eK(i,e=null){const t=e||i,n={frag:i,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(Pn(r)&&Pn(s)){var o;let a=r,l=s;if(i.sn==="initSegment"&&((o=i.decryptdata)==null?void 0:o.method)==="AES-128"){const c=s-r;c%16&&(l=s+(16-c%16)),r!==0&&(n.resetIV=!0,a=r-16)}n.rangeStart=a,n.rangeEnd=l}return n}function tK(i,e){const t=new Error(`GAP ${i.gap?"tag":"attribute"} found`),n={type:vi.MEDIA_ERROR,details:St.FRAG_GAP,fatal:!1,frag:i,error:t,networkDetails:null};return e&&(n.part=e),(e||i).stats.aborted=!0,new Em(n)}class Em extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class r3e{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class s3e{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function o3e(i){const e=i.byteLength,t=e&&new DataView(i.buffer).getUint8(e-1);return t?rx(i,0,e-t):i}class a3e{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(r*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],s=n[1],o=n[2],a=n[3],l=this.invSubMix,c=l[0],u=l[1],f=l[2],h=l[3],p=new Uint32Array(256);let m=0,g=0,b=0;for(b=0;b<256;b++)b<128?p[b]=b<<1:p[b]=b<<1^283;for(b=0;b<256;b++){let T=g^g<<1^g<<2^g<<3^g<<4;T=T>>>8^T&255^99,e[m]=T,t[T]=m;const C=p[m],R=p[C],P=p[R];let I=p[T]*257^T*16843008;r[m]=I<<24|I>>>8,s[m]=I<<16|I>>>16,o[m]=I<<8|I>>>24,a[m]=I,I=P*16843009^R*65537^C*257^m*16843008,c[T]=I<<24|I>>>8,u[T]=I<<16|I>>>16,f[T]=I<<8|I>>>24,h[T]=I,m?(m=C^p[p[p[P^C]]],g^=p[p[g]]):m=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),f=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],g=p[1],b=p[2],T=p[3];let C,R;for(a=0;a<o;a++){if(a<s){C=c[a]=t[a];continue}R=C,a%s===0?(R=R<<8|R>>>24,R=f[R>>>24]<<24|f[R>>>16&255]<<16|f[R>>>8&255]<<8|f[R&255],R^=h[a/s|0]<<24):s>6&&a%s===4&&(R=f[R>>>24]<<24|f[R>>>16&255]<<16|f[R>>>8&255]<<8|f[R&255]),c[a]=C=(c[a-s]^R)>>>0}for(l=0;l<o;l++)a=o-l,l&3?R=c[a]:R=c[a-4],l<4||a<=4?u[l]=R:u[l]=m[f[R>>>24]]^g[f[R>>>16&255]]^b[f[R>>>8&255]]^T[f[R&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],f=a[3],h=this.uint8ArrayToUint32Array_(n);let p=h[0],m=h[1],g=h[2],b=h[3];const T=new Int32Array(e),C=new Int32Array(T.length);let R,P,I,F,k,q,H,O,$,ee,Y,oe,re,Q;const se=this.networkToHostOrderSwap;for(;t<T.length;){for($=se(T[t]),ee=se(T[t+1]),Y=se(T[t+2]),oe=se(T[t+3]),k=$^s[0],q=oe^s[1],H=Y^s[2],O=ee^s[3],re=4,Q=1;Q<r;Q++)R=l[k>>>24]^c[q>>16&255]^u[H>>8&255]^f[O&255]^s[re],P=l[q>>>24]^c[H>>16&255]^u[O>>8&255]^f[k&255]^s[re+1],I=l[H>>>24]^c[O>>16&255]^u[k>>8&255]^f[q&255]^s[re+2],F=l[O>>>24]^c[k>>16&255]^u[q>>8&255]^f[H&255]^s[re+3],k=R,q=P,H=I,O=F,re=re+4;R=o[k>>>24]<<24^o[q>>16&255]<<16^o[H>>8&255]<<8^o[O&255]^s[re],P=o[q>>>24]<<24^o[H>>16&255]<<16^o[O>>8&255]<<8^o[k&255]^s[re+1],I=o[H>>>24]<<24^o[O>>16&255]<<16^o[k>>8&255]<<8^o[q&255]^s[re+2],F=o[O>>>24]<<24^o[k>>16&255]<<16^o[q>>8&255]<<8^o[H&255]^s[re+3],C[t]=se(R^p),C[t+1]=se(F^m),C[t+2]=se(I^g),C[t+3]=se(P^b),p=$,m=ee,g=Y,b=oe,t=t+4}return C.buffer}}const l3e=16;class Q9{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?o3e(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise((r,s)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const o=this.flush();o?r(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:r,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=_d(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;r&&(n=r);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new a3e),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(a.buffer,0,n),this.currentIV=rx(a,-16).buffer,c||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new s3e(this.subtle,t)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new r3e(this.subtle,new Uint8Array(n)).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(st.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,n)))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%l3e;return n!==e.length&&(t=rx(e,0,n),this.remainderData=rx(e,n)),t}logOnce(e){this.logEnabled&&(st.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const c3e={toString:function(i){let e="";const t=i.length;for(let n=0;n<t;n++)e+=`[${i.start(n).toFixed(3)}-${i.end(n).toFixed(3)}]`;return e}},Yt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class GP extends XMe{constructor(e,t,n,r,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Yt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=r,this.log=st.log.bind(st,`${r}:`),this.warn=st.warn.bind(st,`${r}:`),this.hls=e,this.fragmentLoader=new i3e(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Q9(e.config),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Yt.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(n!=null&&n.length){const s=n[n.length-1];return ks.isBuffered(this.media,s.start+s.duration/2)}const r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Yt.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:r,state:s}=this,o=n?n.currentTime:0,a=ks.bufferInfo(r||n,o,e.maxBufferHole);if(this.log(`media seeking to ${Pn(o)?o.toFixed(3):o}, state: ${s}`),this.state===Yt.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,u=t.start+t.duration+l;if(!a.len||u<a.start||c>a.end){const f=o>u;(o<c||f)&&(f&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=Yt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const r=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,n,r).then(s=>{if(!s)return;const o=this.state;if(this.fragContextChanged(e)){(o===Yt.FRAG_LOADING||!this.fragCurrent&&o===Yt.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=Yt.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(pe.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Yt.STOPPED||this.state===Yt.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===bl.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===bl.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(pe.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:r}=this,{payload:s}=n,o=e.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(l=>{throw r.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return r.trigger(pe.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),n.payload=l,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Yt.STOPPED||this.state===Yt.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=Yt.IDLE,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,r,s,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===ui.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((r=e.endPTS)!=null?r:NaN).toFixed(3)}] > buffer:${a?c3e.toString(ks.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==ui.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(f=>!!u[f])){this.state=Yt.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=Yt.IDLE,a&&(!this.loadedmetadata&&e.type==ui.MAIN&&a.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new kP(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!o);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var s;const o=t==null?void 0:t.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=Yt.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(pe.KEY_LOADED,u),this.state===Yt.KEY_LOADING&&(this.state=Yt.IDLE),u}),this.hls.trigger(pe.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=o.partList;if(u&&r){n>e.end&&o.fragmentHint&&(e=o.fragmentHint);const f=this.getNextPart(u,e,n);if(f>-1){const h=u[f];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${f}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=Yt.FRAG_LOADING;let p;return a?p=a.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,h,t,r)).catch(m=>this.handleFragLoadError(m)):p=this.doFragPartsLoad(e,h,t,r).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,part:h,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(u,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),Pn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Yt.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,r)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?r:void 0),a]).then(([u])=>(!l&&u&&r&&r(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(pe.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,n,r){return new Promise((s,o)=>{var a;const l=[],c=(a=n.details)==null?void 0:a.partList,u=f=>{this.fragmentLoader.loadPart(e,f,r).then(h=>{l[f.index]=h;const p=h.part;this.hls.trigger(pe.FRAG_LOADED,h);const m=WW(n,e.sn,f.index+1)||Sie(c,e.sn,f.index+1);if(m)u(m);else return s({frag:e,part:p,partsLoaded:l})}).catch(o)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===St.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(pe.ERROR,t)}else this.hls.trigger(pe.ERROR,{type:vi.OTHER_ERROR,details:St.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Yt.PARSING){!this.fragCurrent&&this.state!==Yt.STOPPED&&this.state!==Yt.ERROR&&(this.state=Yt.IDLE);return}const{frag:n,part:r,level:s}=t,o=self.performance.now();n.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(n,r,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:s,part:o}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${r}. The current chunk will not be buffered.`),null;const a=t[r],l=o>-1?WW(a,s,o):null,c=l?l.fragment:NMe(a,s,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,t,n,r,s){var o;if(!e||this.state!==Yt.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=_d(a,l)),!((o=c)!=null&&o.length))return;const u={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:c};if(this.hls.trigger(pe.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ks.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,r=ks.bufferInfo(t,n,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,r.end-o),n+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return Pn(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:r}}=this,s=ks.bufferInfo(e,t,r);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(t,n);if(o&&s.nextStart<o.end)return ks.bufferInfo(e,t,Math.max(s.nextStart,r))}return s}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),s=Math.max(e-t*3,n.maxMaxBufferLength/2,r);return s>=r?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=ui.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,ui.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:s}=this,o=n[0].start;let a;if(t.live){const l=s.initialLiveManifestSize;if(r<l)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${l})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=n[0]);if(!a){const l=s.lowLatencyMode?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===bl.OK||n===bl.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,s){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,t);if(a===null)return a;if(e=a,o&&e&&!e.gap&&n.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r);if(l!==null&&n.len+l.len>=s)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let r=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,r>-1&&n<c.start)break;const u=c.loaded;u?r=-1:(s||c.independent||o)&&c.fragment===t&&(r=a),s=u}return r}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=IMe(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=t[s-e.startSN];n.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=UMe(t,n.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=r,u=n.partList,f=!!(r.lowLatencyMode&&u!=null&&u.length&&l);f&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let h;if(e<t){const p=e>t-c?0:c;h=tL(s,o,e,p)}else h=o[o.length-1];if(h){const p=h.sn-n.startSN,m=this.fragmentTracker.getState(h);if((m===bl.OK||m===bl.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!f||u[0].fragment.sn>h.sn)&&s&&h.level===s.level){const b=o[p+1];h.sn<a&&this.fragmentTracker.getState(b)!==bl.OK?h=b:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,s=n.currentTime,o=e.fragments[0].start,a=e.edge,l=s>=o-t.maxFragLookUpTolerance&&s<=a;if(r!==null&&n.duration>r&&(s<r||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&n.readyState<4||s<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),n.currentTime=r))}}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,o=!t,a=e.alignedSliding&&Pn(s);if(o||!a&&!s){const{fragPrevious:l}=this;t3e(l,n,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${r}`),c}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),n===-1||this.lastCurrentTime===-1){const r=this.startTimeOffset!==null,s=r?this.startTimeOffset:e.startTimeOffset;s!==null&&Pn(s)?(n=t+s,s<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${s} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Yt.FRAG_LOADING_WAITING_RETRY)&&(this.state=Yt.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const u=this.getCurrentContext(t.chunkMeta);u&&(t.frag=u.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var r;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const s=t.details===St.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(n,!0);const o=t.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===Ya.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=X9(c,l);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),o.resolved=!0,this.retryDate=self.performance.now()+u,this.state=Yt.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!s&&a!==Ya.RemoveAlternatePermanently&&(o.resolved=!0);else{st.warn(`${t.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===Ya.SendAlternateToPenaltyBox?this.state=Yt.WAITING_LEVEL:this.state=Yt.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Yt.PARSING||this.state===Yt.PARSED){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,(t==null?void 0:t.duration)||10);const o=!s;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===ui.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Yt.STOPPED&&(this.state=Yt.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const r=ks.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===Yt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Yt.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){var s;const o=n.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const f=u.endPTS-u.startPTS;if(f<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${f})`),l||!1;const h=r?0:bie(o,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(pe.LEVEL_PTS_UPDATED,{details:o,level:n,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(n.fragmentError===0&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Yt.PARSED,this.hls.trigger(pe.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class Die{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=u3e(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function u3e(i,e){const t=new Uint8Array(e);let n=0;for(let r=0;r<i.length;r++){const s=i[r];t.set(s,n),n+=s.length}return t}function f3e(){return typeof __HLS_WORKER_BUNDLE__=="function"}function h3e(){const i=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(i);return{worker:new self.Worker(e),objectURL:e}}function d3e(i){const e=new self.URL(i,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function I0(i="",e=9e4){return{type:i,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Z9{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=_d(this.cachedData,e),this.cachedData=null);let n=gM(e,0),r=n?n.length:0,s;const o=this._audioTrack,a=this._id3Track,l=n?Y9(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Pn(l))&&(this.basePTS=p3e(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:od.audioId3,duration:Number.POSITIVE_INFINITY});r<c;){if(this.canParse(e,r)){const u=this.appendFrame(o,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,s=r):r=c}else Fwe(e,r)?(n=gM(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:od.audioId3,duration:Number.POSITIVE_INFINITY}),r+=n.length,s=r):r++;if(r===c&&s!==c){const u=rx(e,s);this.cachedData?this.cachedData=_d(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:I0(),id3Track:a,textTrack:I0()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:I0(),id3Track:this._id3Track,textTrack:I0()}}destroy(){}}const p3e=(i,e,t)=>{if(Pn(i))return i*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};function A3e(i,e,t,n){let r,s,o,a;const l=navigator.userAgent.toLowerCase(),c=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=((e[t+2]&192)>>>6)+1;const f=(e[t+2]&60)>>>2;if(f>u.length-1){const h=new Error(`invalid ADTS sampling index:${f}`);i.emit(pe.ERROR,pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return o=(e[t+2]&1)<<2,o|=(e[t+3]&192)>>>6,st.log(`manifest codec:${n}, ADTS type:${r}, samplingIndex:${f}`),/firefox/i.test(l)?f>=6?(r=5,a=new Array(4),s=f-3):(r=2,a=new Array(2),s=f):l.indexOf("android")!==-1?(r=2,a=new Array(2),s=f):(r=5,a=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&f>=6?s=f-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(f>=6&&o===1||/vivaldi/i.test(l))||!n&&o===1)&&(r=2,a=new Array(2)),s=f)),a[0]=r<<3,a[0]|=(f&14)>>1,a[1]|=(f&1)<<7,a[1]|=o<<3,r===5&&(a[1]|=(s&14)>>1,a[2]=(s&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[f],channelCount:o,codec:"mp4a.40."+r,manifestCodec:c}}function Lie(i,e){return i[e]===255&&(i[e+1]&246)===240}function Pie(i,e){return i[e+1]&1?7:9}function J9(i,e){return(i[e+3]&3)<<11|i[e+4]<<3|(i[e+5]&224)>>>5}function m3e(i,e){return e+5<i.length}function iL(i,e){return e+1<i.length&&Lie(i,e)}function g3e(i,e){return m3e(i,e)&&Lie(i,e)&&J9(i,e)<=i.length-e}function y3e(i,e){if(iL(i,e)){const t=Pie(i,e);if(e+t>=i.length)return!1;const n=J9(i,e);if(n<=t)return!1;const r=e+n;return r===i.length||iL(i,r)}return!1}function Nie(i,e,t,n,r){if(!i.samplerate){const s=A3e(e,t,n,r);if(!s)return;i.config=s.config,i.samplerate=s.samplerate,i.channelCount=s.channelCount,i.codec=s.codec,i.manifestCodec=s.manifestCodec,st.log(`parsed codec:${i.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function Bie(i){return 1024*9e4/i}function v3e(i,e){const t=Pie(i,e);if(e+t<=i.length){const n=J9(i,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function Iie(i,e,t,n,r){const s=Bie(i.samplerate),o=n+r*s,a=v3e(e,t);let l;if(a){const{frameLength:f,headerLength:h}=a,p=h+f,m=Math.max(0,t+p-e.length);m?(l=new Uint8Array(p-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+p);const g={unit:l,pts:o};return m||i.samples.push(g),{sample:g,length:p,missing:m}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}let D5=null;const x3e=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],b3e=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],_3e=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],S3e=[0,1,1,4];function Oie(i,e,t,n,r){if(t+24>e.length)return;const s=Fie(e,t);if(s&&t+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=n+r*o,l={unit:e.subarray(t,t+s.frameLength),pts:a,dts:a};return i.config=[],i.channelCount=s.channelCount,i.samplerate=s.sampleRate,i.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function Fie(i,e){const t=i[e+1]>>3&3,n=i[e+1]>>1&3,r=i[e+2]>>4&15,s=i[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&s!==3){const o=i[e+2]>>1&1,a=i[e+3]>>6,l=t===3?3-n:n===3?3:4,c=x3e[l*14+r-1]*1e3,f=b3e[(t===3?0:t===2?1:2)*3+s],h=a===3?1:2,p=_3e[t][n],m=S3e[n],g=p*8*m,b=Math.floor(p*c/f+o)*m;if(D5===null){const R=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);D5=R?parseInt(R[1]):0}return!!D5&&D5<=87&&n===2&&c>=224e3&&a===0&&(i[e+3]=i[e+3]|128),{sampleRate:f,channelCount:h,frameLength:b,samplesPerFrame:g}}}function eG(i,e){return i[e]===255&&(i[e+1]&224)===224&&(i[e+1]&6)!==0}function Uie(i,e){return e+1<i.length&&eG(i,e)}function T3e(i,e){return eG(i,e)&&4<=i.length-e}function kie(i,e){if(e+1<i.length&&eG(i,e)){const n=Fie(i,e);let r=4;n!=null&&n.frameLength&&(r=n.frameLength);const s=e+r;return s===i.length||Uie(i,s)}return!1}class E3e extends Z9{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=gM(e,0);let n=(t==null?void 0:t.length)||0;if(kie(e,n))return!1;for(let r=e.length;n<r;n++)if(y3e(e,n))return st.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return g3e(e,t)}appendFrame(e,t,n){Nie(e,this.observer,t,n,e.manifestCodec);const r=Iie(e,t,n,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const w3e=/\/emsg[-/]ID3/i;class M3e{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const s=this.videoTrack=I0("video",1),o=this.audioTrack=I0("audio",1),a=this.txtTrack=I0("text",1);if(this.id3Track=I0("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=die(e);if(l.video){const{id:c,timescale:u,codec:f}=l.video;s.id=c,s.timescale=a.timescale=u,s.codec=f}if(l.audio){const{id:c,timescale:u,codec:f}=l.audio;o.id=c,o.timescale=u,o.codec=f}a.id=uie.text,s.sampleDuration=0,s.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return jwe(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=_d(this.remainderData,e));const a=eMe(n);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=n;const o=this.extractID3Track(r,t);return s.samples=RW(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=RW(e,t),{videoTrack:t,audioTrack:I0(),id3Track:r,textTrack:I0()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=ji(e.samples,["emsg"]);r&&r.forEach(s=>{const o=iMe(s);if(w3e.test(o.schemeIdUri)){const a=Pn(o.presentationTime)?o.presentationTime/o.timeScale:t+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;n.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:od.emsg,duration:l})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const Gie=(i,e)=>{let t=0,n=5;e+=n;const r=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;n>0;){o[0]=i[e];const a=Math.min(n,8),l=8-a;s[0]=4278190080>>>24+l<<l,r[0]=(o[0]&s[0])>>l,t=t?t<<a|r[0]:r[0],e+=1,n-=a}return t};class C3e extends Z9{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=zie(e,t,n,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=gM(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&Y9(t)!==void 0&&Gie(e,n)<16}}function zie(i,e,t,n,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(t+u>e.length)return-1;const f=e[t+6]>>5;let h=0;f===2?h+=2:(f&1&&f!==1&&(h+=2),f&4&&(h+=2));const p=(e[t+6]<<8|e[t+7])>>12-h&1,g=[2,1,2,3,3,4,4,5][f]+p,b=e[t+5]>>3,T=e[t+5]&7,C=new Uint8Array([s<<6|b<<1|T>>2,(T&3)<<6|f<<3|p<<2|l>>4,l<<4&224]),R=1536/a*9e4,P=n+r*R,I=e.subarray(t,t+u);return i.config=C,i.channelCount=g,i.samplerate=a,i.samples.push({unit:I,pts:P}),u}class R3e{constructor(){this.VideoSample=null}createVideoSample(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,r;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const s=n.units;r=s[s.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,r=n.length;if(r){const s=n[r-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&st.log(e.pts+"/"+e.dts+":"+e.debug)}}class nK{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");r.set(e.subarray(n,n+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&st.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,n=8,r;for(let s=0;s<e;s++)n!==0&&(r=this.readEG(),n=(t+r+256)%256),t=n===0?t:n}readSPS(){let e=0,t=0,n=0,r=0,s,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),f=this.readBoolean.bind(this),h=this.skipBits.bind(this),p=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const b=l();if(c(5),h(3),l(),m(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const F=u();if(F===3&&h(1),m(),m(),h(1),f())for(o=F!==3?8:12,a=0;a<o;a++)f()&&(a<6?g(16):g(64))}m();const T=u();if(T===0)u();else if(T===1)for(h(1),p(),p(),s=u(),a=0;a<s;a++)p();m(),h(1);const C=u(),R=u(),P=c(1);P===0&&h(1),h(1),f()&&(e=u(),t=u(),n=u(),r=u());let I=[1,1];if(f()&&f())switch(l()){case 1:I=[1,1];break;case 2:I=[12,11];break;case 3:I=[10,11];break;case 4:I=[16,11];break;case 5:I=[40,33];break;case 6:I=[24,11];break;case 7:I=[20,11];break;case 8:I=[32,11];break;case 9:I=[80,33];break;case 10:I=[18,11];break;case 11:I=[15,11];break;case 12:I=[64,33];break;case 13:I=[160,99];break;case 14:I=[4,3];break;case 15:I=[3,2];break;case 16:I=[2,1];break;case 255:{I=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((C+1)*16-e*2-t*2),height:(2-P)*(R+1)*16-(P?2:4)*(n+r),pixelRatio:I}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class D3e extends R3e{parseAVCPES(e,t,n,r,s){const o=this.parseAVCNALu(e,n.data);let a=this.VideoSample,l,c=!1;n.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),o.forEach(u=>{var f;switch(u.type){case 1:{let g=!1;l=!0;const b=u.data;if(c&&b.length>4){const T=new nK(b).readSliceType();(T===2||T===4||T===7||T===9)&&(g=!0)}if(g){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),a.frame=!0,a.key=g;break}case 5:l=!0,(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,Aie(u.data,1,n.pts,t.samples);break}case 7:{var p,m;l=!0,c=!0;const g=u.data,T=new nK(g).readSPS();if(!e.sps||e.width!==T.width||e.height!==T.height||((p=e.pixelRatio)==null?void 0:p[0])!==T.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==T.pixelRatio[1]){e.width=T.width,e.height=T.height,e.pixelRatio=T.pixelRatio,e.sps=[g],e.duration=s;const C=g.subarray(1,4);let R="avc1.";for(let P=0;P<3;P++){let I=C[P].toString(16);I.length<2&&(I="0"+I),R+=I}e.codec=R}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+u.type+" ");break}a&&l&&a.units.push(u)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let r=e.naluState||0;const s=r,o=[];let a=0,l,c,u,f=-1,h=0;for(r===-1&&(f=0,h=t[0]&31,r=0,a=1);a<n;){if(l=t[a++],!r){r=l?0:1;continue}if(r===1){r=l?0:2;continue}if(!l)r=3;else if(l===1){if(c=a-r-1,f>=0){const p={data:t.subarray(f,c),type:h};o.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(s&&a<=4-s&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-s)),c>0&&(p.data=_d(p.data,t.subarray(0,c)),p.state=0))}a<n?(u=t[a]&31,f=a,h=u,r=0):r=-1}else r=0}if(f>=0&&r>=0){const p={data:t.subarray(f,n),type:h,state:r};o.push(p)}if(o.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=_d(p.data,t))}return e.naluState=r,o}}class L3e{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Q9(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)n.set(e.subarray(s,s+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(n.subarray(r,r+16),s);return e}decryptAvcSample(e,t,n,r,s){const o=mie(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)})}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){r();return}const s=e[t].units;for(;!(n>=s.length);n++){const o=s[n];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,t,n,r,o),!this.decrypter.isSync()))return}}}}const yl=188;class Ey{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new D3e}static probe(e){const t=Ey.syncOffset(e);return t>0&&st.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let n=Math.min(yl*5,t-yl)+1,r=0;for(;r<n;){let s=!1,o=-1,a=0;for(let l=r;l<t;l+=yl)if(e[l]===71&&(t-l===yl||e[l+yl]===71)){if(a++,o===-1&&(o=l,o!==0&&(n=Math.min(o+yl*99,e.length-yl)+1)),s||(s=eU(e,l)===0),s&&a>1&&(o===0&&a>2||l+yl>n))return o}else{if(a)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:uie[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ey.createTrack("video"),this._audioTrack=Ey.createTrack("audio",r),this._id3Track=Ey.createTrack("id3"),this._txtTrack=Ey.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){n||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,f=o.pesData,h=a.pid,p=l.pid,m=a.pesData,g=l.pesData,b=null,T=this.pmtParsed,C=this._pmtId,R=e.length;if(this.remainderData&&(e=_d(this.remainderData,e),R=e.length,this.remainderData=null),R<yl&&!r)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const P=Math.max(0,Ey.syncOffset(e));R-=(R-P)%yl,R<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,R,e.buffer.byteLength-R));let I=0;for(let k=P;k<R;k+=yl)if(e[k]===71){const q=!!(e[k+1]&64),H=eU(e,k),O=(e[k+3]&48)>>4;let $;if(O>1){if($=k+5+e[k+4],$===k+yl)continue}else $=k+4;switch(H){case u:q&&(f&&(s=D_(f))&&this.videoParser.parseAVCPES(o,c,s,!1,this._duration),f={data:[],size:0}),f&&(f.data.push(e.subarray($,k+yl)),f.size+=k+yl-$);break;case h:if(q){if(m&&(s=D_(m)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray($,k+yl)),m.size+=k+yl-$);break;case p:q&&(g&&(s=D_(g))&&this.parseID3PES(l,s),g={data:[],size:0}),g&&(g.data.push(e.subarray($,k+yl)),g.size+=k+yl-$);break;case 0:q&&($+=e[$]+1),C=this._pmtId=P3e(e,$);break;case C:{q&&($+=e[$]+1);const ee=N3e(e,$,this.typeSupported,n,this.observer);u=ee.videoPid,u>0&&(o.pid=u,o.segmentCodec=ee.segmentVideoCodec),h=ee.audioPid,h>0&&(a.pid=h,a.segmentCodec=ee.segmentAudioCodec),p=ee.id3Pid,p>0&&(l.pid=p),b!==null&&!T&&(st.warn(`MPEG-TS PMT found at ${k} after unknown PID '${b}'. Backtracking to sync byte @${P} to parse all TS packets.`),b=null,k=P-188),T=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=H;break}}else I++;I>0&&rL(this.observer,new Error(`Found ${I} TS packet/s that do not start with 0x47`)),o.pesData=f,a.pesData=m,l.pesData=g;const F={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return r&&this.extractRemainingSamples(F),F}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:s}=e,o=n.pesData,a=t.pesData,l=r.pesData;let c;if(o&&(c=D_(o))?(this.videoParser.parseAVCPES(n,s,c,!0,this._duration),n.pesData=null):n.pesData=o,a&&(c=D_(a))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else a!=null&&a.size&&st.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;l&&(c=D_(l))?(this.parseID3PES(r,c),r.pesData=null):r.pesData=l}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new L3e(this.observer,this.config,t);return this.decrypt(r,s)}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let s=t.data;if(r){this.aacOverFlow=null;const f=r.missing,h=r.sample.unit.byteLength;if(f===-1)s=_d(r.sample.unit,s);else{const p=h-f;r.sample.unit.set(s.subarray(0,f),p),e.samples.push(r.sample),n=r.missing}}let o,a;for(o=n,a=s.length;o<a-1&&!iL(s,o);o++);if(o!==n){let f;const h=o<a-1;if(h?f=`AAC PES did not start with ADTS header,offset:${o}`:f="No ADTS header found in AAC PES",rL(this.observer,new Error(f),h),!h)return}Nie(e,this.observer,s,o,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(r){const f=Bie(e.samplerate);l=r.sample.pts+f}else{st.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=Iie(e,s,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!iL(s,o);o++);}parseMPEGPES(e,t){const n=t.data,r=n.length;let s=0,o=0;const a=t.pts;if(a===void 0){st.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<r;)if(Uie(n,o)){const l=Oie(e,n,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(r===void 0){st.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let o=0,a=0,l;for(;a<s&&(l=zie(e,n,a,r,o++))>0;)a+=l}}parseID3PES(e,t){if(t.pts===void 0){st.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Ga({},t,{type:this._videoTrack?od.emsg:od.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function eU(i,e){return((i[e+1]&31)<<8)+i[e+2]}function P3e(i,e){return(i[e+10]&31)<<8|i[e+11]}function N3e(i,e,t,n,r){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(i[e+1]&15)<<8|i[e+2],a=e+3+o-4,l=(i[e+10]&15)<<8|i[e+11];for(e+=12+l;e<a;){const c=eU(i,e),u=(i[e+3]&15)<<8|i[e+4];switch(i[e]){case 207:if(!n){aI("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=c);break;case 21:s.id3Pid===-1&&(s.id3Pid=c);break;case 219:if(!n){aI("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=c,s.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?st.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="mp3");break;case 193:if(!n){aI("AC-3");break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="ac3"):st.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&u>0){let f=e+5,h=u;for(;h>2;){switch(i[f]){case 106:t.ac3!==!0?st.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=c,s.segmentAudioCodec="ac3");break}const m=i[f+1]+2;f+=m,h-=m}}break;case 194:case 135:return rL(r,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return rL(r,new Error("Unsupported HEVC in M2TS found")),s}e+=u+5}return s}function rL(i,e,t){st.warn(`parsing error: ${e.message}`),i.emit(pe.ERROR,pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function aI(i){st.log(`${i} with AES-128-CBC encryption found in unencrypted stream`)}function D_(i){let e=0,t,n,r,s,o;const a=i.data;if(!i||i.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=_d(a[0],a[1]),a.splice(1,1);if(t=a[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(n=(t[4]<<8)+t[5],n&&n>i.size-6)return null;const c=t[7];c&192&&(s=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,c&64?(o=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,s-o>60*9e4&&(st.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),r=t[8];let u=r+9;if(i.size<=u)return null;i.size-=u;const f=new Uint8Array(i.size);for(let h=0,p=a.length;h<p;h++){t=a[h];let m=t.byteLength;if(u)if(u>m){u-=m;continue}else t=t.subarray(u),m-=u,u=0;f.set(t,e),e+=m}return n&&(n-=r+3),{data:f,pts:s,dts:o,len:n}}return null}class B3e extends Z9{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=gM(e,0);let n=(t==null?void 0:t.length)||0;if(t&&e[n]===11&&e[n+1]===119&&Y9(t)!==void 0&&Gie(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(kie(e,n))return st.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return T3e(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return Oie(e,t,n,this.basePTS,this.frameIndex)}}class iK{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ay=Math.pow(2,32)-1;class ht{static init(){ht.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ht.types)ht.types.hasOwnProperty(e)&&(ht.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ht.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);ht.STTS=ht.STSC=ht.STCO=s,ht.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ht.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ht.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ht.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);ht.FTYP=ht.box(ht.types.ftyp,o,l,o,a),ht.DINF=ht.box(ht.types.dinf,ht.box(ht.types.dref,r))}static box(e,...t){let n=8,r=t.length;const s=r;for(;r--;)n+=t[r].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(e,4),r=0,n=8;r<s;r++)o.set(t[r],n),n+=t[r].byteLength;return o}static hdlr(e){return ht.box(ht.types.hdlr,ht.HDLR_TYPES[e])}static mdat(e){return ht.box(ht.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Ay+1)),r=Math.floor(t%(Ay+1));return ht.box(ht.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return ht.box(ht.types.mdia,ht.mdhd(e.timescale,e.duration),ht.hdlr(e.type),ht.minf(e))}static mfhd(e){return ht.box(ht.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ht.box(ht.types.minf,ht.box(ht.types.smhd,ht.SMHD),ht.DINF,ht.stbl(e)):ht.box(ht.types.minf,ht.box(ht.types.vmhd,ht.VMHD),ht.DINF,ht.stbl(e))}static moof(e,t,n){return ht.box(ht.types.moof,ht.mfhd(e),ht.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=ht.trak(e[t]);return ht.box.apply(null,[ht.types.moov,ht.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(ht.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=ht.trex(e[t]);return ht.box.apply(null,[ht.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Ay+1)),r=Math.floor(t%(Ay+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ht.box(ht.types.mvhd,s)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,s;for(r=0;r<t.length;r++)s=t[r].flags,n[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return ht.box(ht.types.sdtp,n)}static stbl(e){return ht.box(ht.types.stbl,ht.stsd(e),ht.box(ht.types.stts,ht.STTS),ht.box(ht.types.stsc,ht.STSC),ht.box(ht.types.stsz,ht.STSZ),ht.box(ht.types.stco,ht.STCO))}static avc1(e){let t=[],n=[],r,s,o;for(r=0;r<e.sps.length;r++)s=e.sps[r],o=s.byteLength,t.push(o>>>8&255),t.push(o&255),t=t.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));const a=ht.box(ht.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,u=e.pixelRatio[0],f=e.pixelRatio[1];return ht.box(ht.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,ht.box(ht.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ht.box(ht.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,f>>24,f>>16&255,f>>8&255,f&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ht.box(ht.types.mp4a,ht.audioStsd(e),ht.box(ht.types.esds,ht.esds(e)))}static mp3(e){return ht.box(ht.types[".mp3"],ht.audioStsd(e))}static ac3(e){return ht.box(ht.types["ac-3"],ht.audioStsd(e),ht.box(ht.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?ht.box(ht.types.stsd,ht.STSD,ht.mp3(e)):e.segmentCodec==="ac3"?ht.box(ht.types.stsd,ht.STSD,ht.ac3(e)):ht.box(ht.types.stsd,ht.STSD,ht.mp4a(e)):ht.box(ht.types.stsd,ht.STSD,ht.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,r=e.width,s=e.height,o=Math.floor(n/(Ay+1)),a=Math.floor(n%(Ay+1));return ht.box(ht.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const n=ht.sdtp(e),r=e.id,s=Math.floor(t/(Ay+1)),o=Math.floor(t%(Ay+1));return ht.box(ht.types.traf,ht.box(ht.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),ht.box(ht.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),ht.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,ht.box(ht.types.trak,ht.tkhd(e),ht.mdia(e))}static trex(e){const t=e.id;return ht.box(ht.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,s=12+16*r,o=new Uint8Array(s);let a,l,c,u,f,h;for(t+=8+s,o.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),a=0;a<r;a++)l=n[a],c=l.duration,u=l.size,f=l.flags,h=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,f.isLeading<<2|f.dependsOn,f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|f.isNonSync,f.degradPrio&61440,f.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*a);return ht.box(ht.types.trun,o)}static initSegment(e){ht.types||ht.init();const t=ht.moov(e);return _d(ht.FTYP,t)}}ht.types=void 0;ht.HDLR_TYPES=void 0;ht.STTS=void 0;ht.STSC=void 0;ht.STCO=void 0;ht.STSZ=void 0;ht.VMHD=void 0;ht.SMHD=void 0;ht.STSD=void 0;ht.FTYP=void 0;ht.DINF=void 0;const Hie=9e4;function tG(i,e,t=1,n=!1){const r=i*e*t;return n?Math.round(r):r}function I3e(i,e,t=1,n=!1){return tG(i,e,1/t,n)}function NE(i,e=!1){return tG(i,1e3,1/Hie,e)}function O3e(i,e=1){return tG(i,Hie,1/e)}const F3e=10*1e3,rK=1024,U3e=1152,k3e=1536;let L_=null,lI=null;class iD{constructor(e,t,n,r=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,L_===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);L_=o?parseInt(o[1]):0}if(lI===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);lI=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){st.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){st.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){st.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((s,o)=>{let a=o.pts,l=a-s;return l<-4294967296&&(t=!0,a=Zh(a,n),l=a-s),l>0?s:a},n);return t&&st.debug("PTS rollover detected"),r}remux(e,t,n,r,s,o,a,l){let c,u,f,h,p,m,g=s,b=s;const T=e.pid>-1,C=t.pid>-1,R=t.samples.length,P=e.samples.length>0,I=a&&R>0||R>1;if((!T||P)&&(!C||I)||this.ISGenerated||a){if(this.ISGenerated){var k,q,H,O;const oe=this.videoTrackConfig;oe&&(t.width!==oe.width||t.height!==oe.height||((k=t.pixelRatio)==null?void 0:k[0])!==((q=oe.pixelRatio)==null?void 0:q[0])||((H=t.pixelRatio)==null?void 0:H[1])!==((O=oe.pixelRatio)==null?void 0:O[1]))&&this.resetInitSegment()}else f=this.generateIS(e,t,s,o);const $=this.isVideoContiguous;let ee=-1,Y;if(I&&(ee=G3e(t.samples),!$&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,ee>0){st.warn(`[mp4-remuxer]: Dropped ${ee} out of ${R} video samples due to a missing keyframe`);const oe=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(ee),t.dropped+=ee,b+=(t.samples[0].pts-oe)/t.inputTimeScale,Y=b}else ee===-1&&(st.warn(`[mp4-remuxer]: No keyframe found out of ${R} video samples`),m=!1);if(this.ISGenerated){if(P&&I){const oe=this.getVideoStartPts(t.samples),Q=(Zh(e.samples[0].pts,oe)-oe)/t.inputTimeScale;g+=Math.max(0,Q),b+=Math.max(0,-Q)}if(P){if(e.samplerate||(st.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(e,t,s,o)),u=this.remuxAudio(e,g,this.isAudioContiguous,o,C||I||l===ui.AUDIO?b:void 0),I){const oe=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(st.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(e,t,s,o)),c=this.remuxVideo(t,b,$,oe)}}else I&&(c=this.remuxVideo(t,b,$,0));c&&(c.firstKeyFrame=ee,c.independent=ee!==-1,c.firstKeyFramePTS=Y)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(p=Vie(n,s,this._initPTS,this._initDTS)),r.samples.length&&(h=qie(r,s,this._initPTS))),{audio:u,video:c,initSegment:f,independent:m,text:h,id3:p}}generateIS(e,t,n,r){const s=e.samples,o=t.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||r,f="audio/mp4",h,p,m;if(u&&(h=p=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:f,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):ht.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(m=e.inputTimeScale,!c||m!==c.timescale?h=p=s[0].pts-Math.round(m*n):u=!1)}if(t.sps&&t.pps&&o.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ht.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(m=t.inputTimeScale,!c||m!==c.timescale){const g=this.getVideoStartPts(o),b=Math.round(m*n);p=Math.min(p,Zh(o[0].dts,g)-b),h=Math.min(h,g-b)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:m},this._initDTS={baseTime:p,timescale:m}):h=m=void 0,{tracks:l,initPTS:h,timescale:m}}remuxVideo(e,t,n,r){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let u=this.nextAvcDts,f=8,h=this.videoSampleDuration,p,m,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,T=!1;if(!n||u===null){const de=t*s,ie=o[0].pts-Zh(o[0].dts,o[0].pts);L_&&u!==null&&Math.abs(de-ie-u)<15e3?n=!0:u=de-ie}const C=c.baseTime*s/c.timescale;for(let de=0;de<l;de++){const ie=o[de];ie.pts=Zh(ie.pts-C,u),ie.dts=Zh(ie.dts-C,u),ie.dts<o[de>0?de-1:de].dts&&(T=!0)}T&&o.sort(function(de,ie){const ge=de.dts-ie.dts,Ce=de.pts-ie.pts;return ge||Ce}),p=o[0].dts,m=o[o.length-1].dts;const R=m-p,P=R?Math.round(R/(l-1)):h||e.inputTimeScale/30;if(n){const de=p-u,ie=de>P,ge=de<-1;if((ie||ge)&&(ie?st.warn(`AVC: ${NE(de,!0)} ms (${de}dts) hole between fragments detected at ${t.toFixed(3)}`):st.warn(`AVC: ${NE(-de,!0)} ms (${de}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!ge||u>=o[0].pts||L_)){p=u;const Ce=o[0].pts-de;if(ie)o[0].dts=p,o[0].pts=Ce;else for(let Ie=0;Ie<o.length&&!(o[Ie].dts>Ce);Ie++)o[Ie].dts-=de,o[Ie].pts-=de;st.log(`Video: Initial PTS/DTS adjusted: ${NE(Ce,!0)}/${NE(p,!0)}, delta: ${NE(de,!0)} ms`)}}p=Math.max(0,p);let I=0,F=0,k=p;for(let de=0;de<l;de++){const ie=o[de],ge=ie.units,Ce=ge.length;let Ie=0;for(let Ee=0;Ee<Ce;Ee++)Ie+=ge[Ee].data.length;F+=Ie,I+=Ce,ie.length=Ie,ie.dts<k?(ie.dts=k,k+=P/4|0||1):k=ie.dts,g=Math.min(ie.pts,g),b=Math.max(ie.pts,b)}m=o[l-1].dts;const q=F+4*I+8;let H;try{H=new Uint8Array(q)}catch(de){this.observer.emit(pe.ERROR,pe.ERROR,{type:vi.MUX_ERROR,details:St.REMUX_ALLOC_ERROR,fatal:!1,error:de,bytes:q,reason:`fail allocating video mdat ${q}`});return}const O=new DataView(H.buffer);O.setUint32(0,q),H.set(ht.types.mdat,4);let $=!1,ee=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,oe=Number.NEGATIVE_INFINITY,re=Number.NEGATIVE_INFINITY;for(let de=0;de<l;de++){const ie=o[de],ge=ie.units;let Ce=0;for(let Be=0,qe=ge.length;Be<qe;Be++){const it=ge[Be],et=it.data,Ht=it.data.byteLength;O.setUint32(f,Ht),f+=4,H.set(et,f),f+=Ht,Ce+=4+Ht}let Ie;if(de<l-1)h=o[de+1].dts-ie.dts,Ie=o[de+1].pts-ie.pts;else{const Be=this.config,qe=de>0?ie.dts-o[de-1].dts:P;if(Ie=de>0?ie.pts-o[de-1].pts:P,Be.stretchShortVideoTrack&&this.nextAudioPts!==null){const it=Math.floor(Be.maxBufferHole*s),et=(r?g+r*s:this.nextAudioPts)-ie.pts;et>it?(h=et-qe,h<0?h=qe:$=!0,st.log(`[mp4-remuxer]: It is approximately ${et/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=qe}else h=qe}const Ee=Math.round(ie.pts-ie.dts);ee=Math.min(ee,h),oe=Math.max(oe,h),Y=Math.min(Y,Ie),re=Math.max(re,Ie),a.push(new sK(ie.key,h,Ce,Ee))}if(a.length){if(L_){if(L_<70){const de=a[0].flags;de.dependsOn=2,de.isNonSync=0}}else if(lI&&re-Y<oe-ee&&P/oe<.025&&a[0].cts===0){st.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let de=p;for(let ie=0,ge=a.length;ie<ge;ie++){const Ce=de+a[ie].duration,Ie=de+a[ie].cts;if(ie<ge-1){const Ee=Ce+a[ie+1].cts;a[ie].duration=Ee-Ie}else a[ie].duration=ie?a[ie-1].duration:P;a[ie].cts=0,de=Ce}}}h=$||!h?P:h,this.nextAvcDts=u=m+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const le={data1:ht.moof(e.sequenceNumber++,p,Ga({},e,{samples:a})),data2:H,startPTS:g/s,endPTS:(b+h)/s,startDTS:p/s,endDTS:u/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,le}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return U3e;case"ac3":return k3e;default:return rK}}remuxAudio(e,t,n,r,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),u=c*l,f=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],m=s!==void 0;let g=e.samples,b=h?0:8,T=this.nextAudioPts||-1;const C=t*o,R=f.baseTime*o/f.timescale;if(this.isAudioContiguous=n=n||g.length&&T>0&&(r&&Math.abs(C-T)<9e3||Math.abs(Zh(g[0].pts-R,C)-T)<20*u),g.forEach(function(Q){Q.pts=Zh(Q.pts-R,C)}),!n||T<0){if(g=g.filter(Q=>Q.pts>=0),!g.length)return;s===0?T=0:r&&!m?T=Math.max(0,C):T=g[0].pts}if(e.segmentCodec==="aac"){const Q=this.config.maxAudioFramesDrift;for(let se=0,le=T;se<g.length;se++){const de=g[se],ie=de.pts,ge=ie-le,Ce=Math.abs(1e3*ge/o);if(ge<=-Q*u&&m)se===0&&(st.warn(`Audio frame @ ${(ie/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*ge/o)} ms.`),this.nextAudioPts=T=le=ie);else if(ge>=Q*u&&Ce<F3e&&m){let Ie=Math.round(ge/u);le=ie-Ie*u,le<0&&(Ie--,le+=u),se===0&&(this.nextAudioPts=T=le),st.warn(`[mp4-remuxer]: Injecting ${Ie} audio frame @ ${(le/o).toFixed(3)}s due to ${Math.round(1e3*ge/o)} ms gap.`);for(let Ee=0;Ee<Ie;Ee++){const Be=Math.max(le,0);let qe=iK.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);qe||(st.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),qe=de.unit.subarray()),g.splice(se,0,{unit:qe,pts:Be}),le+=u,se++}}de.pts=le,le+=u}}let P=null,I=null,F,k=0,q=g.length;for(;q--;)k+=g[q].unit.byteLength;for(let Q=0,se=g.length;Q<se;Q++){const le=g[Q],de=le.unit;let ie=le.pts;if(I!==null){const Ce=p[Q-1];Ce.duration=Math.round((ie-I)/l)}else if(n&&e.segmentCodec==="aac"&&(ie=T),P=ie,k>0){k+=b;try{F=new Uint8Array(k)}catch(Ce){this.observer.emit(pe.ERROR,pe.ERROR,{type:vi.MUX_ERROR,details:St.REMUX_ALLOC_ERROR,fatal:!1,error:Ce,bytes:k,reason:`fail allocating audio mdat ${k}`});return}h||(new DataView(F.buffer).setUint32(0,k),F.set(ht.types.mdat,4))}else return;F.set(de,b);const ge=de.byteLength;b+=ge,p.push(new sK(!0,c,ge,0)),I=ie}const H=p.length;if(!H)return;const O=p[p.length-1];this.nextAudioPts=T=I+l*O.duration;const $=h?new Uint8Array(0):ht.moof(e.sequenceNumber++,P/l,Ga({},e,{samples:p}));e.samples=[];const ee=P/o,Y=T/o,re={data1:$,data2:F,startPTS:ee,endPTS:Y,startDTS:ee,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:H};return this.isAudioContiguous=!0,re}remuxEmptyAudio(e,t,n,r){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,a=s/o,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,f=(l!==null?l:r.startDTS*s)+u,h=r.endDTS*s+u,p=a*rK,m=Math.ceil((h-f)/p),g=iK.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(st.warn("[mp4-remuxer]: remux empty Audio"),!g){st.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const b=[];for(let T=0;T<m;T++){const C=f+T*p;b.push({unit:g,pts:C,dts:C})}return e.samples=b,this.remuxAudio(e,t,n,!1)}}function Zh(i,e){let t;if(e===null)return i;for(e<i?t=-8589934592:t=8589934592;Math.abs(i-e)>4294967296;)i+=t;return i}function G3e(i){for(let e=0;e<i.length;e++)if(i[e].key)return e;return-1}function Vie(i,e,t,n){const r=i.samples.length;if(!r)return;const s=i.inputTimeScale;for(let a=0;a<r;a++){const l=i.samples[a];l.pts=Zh(l.pts-t.baseTime*s/t.timescale,e*s)/s,l.dts=Zh(l.dts-n.baseTime*s/n.timescale,e*s)/s}const o=i.samples;return i.samples=[],{samples:o}}function qie(i,e,t){const n=i.samples.length;if(!n)return;const r=i.inputTimeScale;for(let o=0;o<n;o++){const a=i.samples[o];a.pts=Zh(a.pts-t.baseTime*r/t.timescale,e*r)/r}i.samples.sort((o,a)=>o.pts-a.pts);const s=i.samples;return i.samples=[],{samples:s}}class sK{constructor(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class z3e{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(Ywe(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=die(e);r.audio&&(t=oK(r.audio,hs.AUDIO)),r.video&&(n=oK(r.video,hs.VIDEO));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:st.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,n,r,s,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const f={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};Pn(u)||(u=this.lastEndTime=s||0);const h=t.samples;if(!(h!=null&&h.length))return f;const p={initPTS:void 0,timescale:1};let m=this.initData;if((a=m)!=null&&a.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return st.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),f;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const g=Qwe(h,m),b=Xwe(m,h),T=b===null?s:b;(H3e(c,T,s,g)||p.timescale!==c.timescale&&o)&&(p.initPTS=T-s,c&&c.timescale===1&&st.warn(`Adjusting initPTS by ${p.initPTS-c.baseTime}`),this.initPTS=c={baseTime:p.initPTS,timescale:1});const C=e?T-c.baseTime/c.timescale:u,R=C+g;Jwe(m,h,c.baseTime/c.timescale),g>0?this.lastEndTime=R:(st.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const P=!!m.audio,I=!!m.video;let F="";P&&(F+="audio"),I&&(F+="video");const k={data1:h,startPTS:C,startDTS:C,endPTS:R,endDTS:R,type:F,hasAudio:P,hasVideo:I,nb:1,dropped:0};return f.audio=k.type==="audio"?k:void 0,f.video=k.type!=="audio"?k:void 0,f.initSegment=p,f.id3=Vie(n,s,c,c),r.samples.length&&(f.text=qie(r,s,c)),f}}function H3e(i,e,t,n){if(i===null)return!0;const r=Math.max(n,1),s=e-i.baseTime/i.timescale;return Math.abs(s-t)>r}function oK(i,e){const t=i==null?void 0:i.codec;if(t&&t.length>4)return t;if(e===hs.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return QD(t,!1);const n="mp4a.40.5";return st.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${n}"`),n}return st.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let wm;try{wm=self.performance.now.bind(self.performance)}catch{st.debug("Unable to use Performance API on this environment"),wm=gS==null?void 0:gS.Date.now}const rD=[{demux:M3e,remux:z3e},{demux:Ey,remux:iD},{demux:E3e,remux:iD},{demux:B3e,remux:iD}];rD.splice(2,0,{demux:C3e,remux:iD});class aK{constructor(e,t,n,r,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const s=n.transmuxing;s.executeStart=wm();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:u,trackSwitch:f,accurateTimeOffset:h,timeOffset:p,initSegmentChange:m}=r||a,{audioCodec:g,videoCodec:b,defaultInitPts:T,duration:C,initSegmentData:R}=l,P=V3e(o,t);if(P&&P.method==="AES-128"){const q=this.getDecrypter();if(q.isSync()){let H=q.softwareDecrypt(o,P.key.buffer,P.iv.buffer);if(n.part>-1&&(H=q.flush()),!H)return s.executeEnd=wm(),cI(n);o=new Uint8Array(H)}else return this.decryptionPromise=q.webCryptoDecrypt(o,P.key.buffer,P.iv.buffer).then(H=>{const O=this.push(H,null,n);return this.decryptionPromise=null,O}),this.decryptionPromise}const I=this.needsProbing(u,f);if(I){const q=this.configureTransmuxer(o);if(q)return st.warn(`[transmuxer] ${q.message}`),this.observer.emit(pe.ERROR,pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_PARSING_ERROR,fatal:!1,error:q,reason:q.message}),s.executeEnd=wm(),cI(n)}(u||f||m||I)&&this.resetInitSegment(R,g,b,C,t),(u||m||I)&&this.resetInitialTimestamp(T),c||this.resetContiguity();const F=this.transmux(o,P,p,h,n),k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,s.executeEnd=wm(),F}flush(e){const t=e.transmuxing;t.executeStart=wm();const{decrypter:n,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:a}=r;if(n){const f=n.flush();f&&o.push(this.push(f,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=wm(),[cI(e)];const u=l.flush(a);return sD(u)?u.then(f=>(this.flushRemux(o,f,e),o)):(this.flushRemux(o,u,e),o)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:s,id3Track:o,textTrack:a}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;st.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const u=this.remuxer.remux(r,s,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:n}),n.transmuxing.executeEnd=wm()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,s){let o;return t&&t.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,t,n,r,s):o=this.transmuxUnencrypted(e,n,r,s),o}transmuxUnencrypted(e,t,n,r){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,s){return this.demuxer.demuxSampleAes(e,t,n).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,n,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r,vendor:s}=this;let o;for(let h=0,p=rD.length;h<p;h++){var a;if((a=rD[h].demux)!=null&&a.probe(e)){o=rD[h];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=o.remux,f=o.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(n,t,r,s)),(!l||!(l instanceof f))&&(this.demuxer=new f(n,t,r),this.probe=f.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Q9(this.config)),e}}function V3e(i,e){let t=null;return i.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const cI=i=>({remuxResult:{},chunkMeta:i});function sD(i){return"then"in i&&i.then instanceof Function}class q3e{constructor(e,t,n,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=s||null}}class $3e{constructor(e,t,n,r,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=o}}var $ie={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,f||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=t?t+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},a.prototype.listenerCount=function(c){var u=t?t+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,h,p,m){var g=t?t+c:c;if(!this._events[g])return!1;var b=this._events[g],T=arguments.length,C,R;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),T){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,h),!0;case 5:return b.fn.call(b.context,u,f,h,p),!0;case 6:return b.fn.call(b.context,u,f,h,p,m),!0}for(R=1,C=new Array(T-1);R<T;R++)C[R-1]=arguments[R];b.fn.apply(b.context,C)}else{var P=b.length,I;for(R=0;R<P;R++)switch(b[R].once&&this.removeListener(c,b[R].fn,void 0,!0),T){case 1:b[R].fn.call(b[R].context);break;case 2:b[R].fn.call(b[R].context,u);break;case 3:b[R].fn.call(b[R].context,u,f);break;case 4:b[R].fn.call(b[R].context,u,f,h);break;default:if(!C)for(I=1,C=new Array(T-1);I<T;I++)C[I-1]=arguments[I];b[R].fn.apply(b[R].context,C)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,h){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!f||m.context===f)&&o(this,p);else{for(var g=0,b=[],T=m.length;g<T;g++)(m[g].fn!==u||h&&!m[g].once||f&&m[g].context!==f)&&b.push(m[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})($ie);var j3e=$ie.exports,nG=vwe(j3e);class jie{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const o=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===pe.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new nG,this.observer.on(pe.FRAG_DECRYPTED,o),this.observer.on(pe.ERROR,o);const a=Zy(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||f3e())){try{s.workerPath?(st.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=d3e(s.workerPath)):(st.log(`injecting Web Worker for "${t}"`),this.workerContext=h3e()),this.onwmsg=f=>this.onWorkerMessage(f);const{worker:u}=this.workerContext;u.addEventListener("message",this.onwmsg),u.onerror=f=>{const h=new Error(`${f.message}  (${f.filename}:${f.lineno})`);s.enableWorker=!1,st.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(pe.ERROR,{type:vi.OTHER_ERROR,details:St.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:t,config:JSON.stringify(s)})}catch(u){st.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.resetWorker(),this.error=null,this.transmuxer=new aK(this.observer,l,s,"",t)}return}this.transmuxer=new aK(this.observer,l,s,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,r,s,o,a,l,c,u){var f,h;c.transmuxing.start=self.performance.now();const{transmuxer:p}=this,m=o?o.start:s.start,g=s.decryptdata,b=this.frag,T=!(b&&s.cc===b.cc),C=!(b&&c.level===b.level),R=b?c.sn-b.sn:-1,P=this.part?c.part-this.part.index:-1,I=R===0&&c.id>1&&c.id===(b==null?void 0:b.stats.chunkCount),F=!C&&(R===1||R===0&&(P===1||I&&P<=0)),k=self.performance.now();(C||R||s.stats.parsing.start===0)&&(s.stats.parsing.start=k),o&&(P||!F)&&(o.stats.parsing.start=k);const q=!(b&&((f=s.initSegment)==null?void 0:f.url)===((h=b.initSegment)==null?void 0:h.url)),H=new $3e(T,F,l,C,m,q);if(!F||T||q){st.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${T}
        trackSwitch: ${C}
        contiguous: ${F}
        accurateTimeOffset: ${l}
        timeOffset: ${m}
        initSegmentChange: ${q}`);const O=new q3e(n,r,t,a,u);this.configureTransmuxer(O)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:c,state:H},e instanceof ArrayBuffer?[e]:[]);else if(p){const O=p.push(e,g,c,H);sD(O)?(p.async=!0,O.then($=>{this.handleTransmuxComplete($)}).catch($=>{this.transmuxerError($,c,"transmuxer-interface push error")})):(p.async=!1,this.handleTransmuxComplete(O))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);sD(n)||t.async?(sD(n)||(n=Promise.resolve(n)),n.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){st.warn(`worker message received with no ${t?"event name":"data"}`);return}const n=this.hls;if(this.hls)switch(t.event){case"init":{var r;const s=(r=this.workerContext)==null?void 0:r.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":st[t.data.logType]&&st[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const lK=100;class Wie extends GP{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",ui.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.ERROR,this.onError,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.ERROR,this.onError,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:s}){if(n==="main"){const o=t.cc;this.initPTS[t.cc]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${r}`),this.videoTrackCC=o,this.state===Yt.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=Yt.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(lK),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=Yt.IDLE):(this.loadedmetadata=!1,this.state=Yt.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case Yt.IDLE:this.doTickIdle();break;case Yt.WAITING_TRACK:{var e;const{levels:n,trackId:r}=this,s=n==null||(e=n[r])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=Yt.WAITING_INIT_PTS}break}case Yt.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(t=this.media)!=null&&t.seeking){const{levels:s,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[o])||null),this.state=Yt.IDLE}break}case Yt.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:s,cache:o,complete:a}=n;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=Yt.FRAG_LOADING;const l=o.flush(),c={frag:r,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${r.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=ks.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);JF(c.end,this.config.maxFragLookUpTolerance,r)<0&&(this.log(`Waiting fragment cc (${r.cc}) @ ${r.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=Yt.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Yt.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:r}=this,s=e.config;if(!this.buffering||!n&&(this.startFragRequested||!s.startFragPrefetch)||!(t!=null&&t[r]))return;const o=t[r],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=Yt.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,hs.AUDIO,ui.AUDIO));const c=this.getFwdBufferInfo(l,ui.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,a)){e.trigger(pe.BUFFER_EOS,{type:"audio"}),this.state=Yt.ENDED;return}const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ui.MAIN),f=c.len,h=this.getMaxBufferLength(u==null?void 0:u.len),p=a.fragments,m=p[0].start,g=this.getLoadPosition(),b=this.flushing?g:c.end;if(this.switchingTrack&&n){const P=g;a.PTSKnown&&P<m&&(c.end>m||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=m+.05)}if(f>=h&&!this.switchingTrack&&b<p[p.length-1].start)return;let T=this.getNextFragment(b,a),C=!1;if(T&&this.isLoopLoading(T,b)&&(C=!!T.gap,T=this.getNextFragmentLoopLoading(T,a,c,ui.MAIN,h)),!T){this.bufferFlushed=!0;return}const R=u&&T.start>u.end+a.targetduration;if(R||!(u!=null&&u.len)&&c.len){const P=this.getAppendedFrag(T.start,ui.MAIN);if(P===null||(C||(C=!!P.gap||!!R&&u.len===0),R&&!C||C&&c.nextStart&&c.nextStart<P.end))return}this.loadFragment(T,o,b)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Hx(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?this.setInterval(lK):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=Yt.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=Yt.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(pe.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:r}=this,{details:s,id:o}=t;if(!r){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const a=r[o];let l=0;if(s.live||(n=a.details)!=null&&n.live){this.checkLiveUpdate(s);const u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;if(!a.details&&s.hasProgramDateTime&&u.hasProgramDateTime)nL(s,u),l=s.fragments[0].start;else{var c;l=this.alignPlaylists(s,a.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}a.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===Yt.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Yt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const f=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new jie(this.hls,ui.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[n.cc],m=(t=n.initSegment)==null?void 0:t.data;if(p!==void 0){const b=r?r.index:-1,T=b!==-1,C=new kP(n.level,n.sn,n.stats.chunkCount,s.byteLength,b,T);h.push(s,m,f,"",n,r,u.totalduration,!1,C,p)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:g}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new Die,complete:!1};g.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=Yt.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type!==ui.AUDIO){if(!this.loadedmetadata&&n.type===ui.MAIN){const s=this.videoBuffer||this.media;s&&ks.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(pe.AUDIO_TRACK_SWITCHED,El({},s)))}this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal){this.state=Yt.ERROR;return}switch(t.details){case St.FRAG_GAP:case St.FRAG_PARSING_ERROR:case St.FRAG_DECRYPT_ERROR:case St.FRAG_LOAD_ERROR:case St.FRAG_LOAD_TIMEOUT:case St.KEY_LOAD_ERROR:case St.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ui.AUDIO,t);break;case St.AUDIO_TRACK_LOAD_ERROR:case St.AUDIO_TRACK_LOAD_TIMEOUT:case St.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Yt.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Rr.AUDIO_TRACK&&(this.state=Yt.IDLE);break;case St.BUFFER_APPEND_ERROR:case St.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===St.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case St.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==hs.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==hs.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Yt.ENDED&&(this.state=Yt.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,ui.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:f}=u,{audio:h,text:p,id3:m,initSegment:g}=s;if(this.fragContextChanged(l)||!f){this.fragmentTracker.removeFragment(l);return}if(this.state=Yt.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const b=l.initSegment||l;this._bufferInitSegment(u,g.tracks,b,o),r.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:n,tracks:g.tracks})}if(h){const{startPTS:b,endPTS:T,startDTS:C,endDTS:R}=h;c&&(c.elementaryStreams[hs.AUDIO]={startPTS:b,endPTS:T,startDTS:C,endDTS:R}),l.setElementaryStreamInfo(hs.AUDIO,b,T,C,R),this.bufferFragmentData(h,l,c,o)}if(m!=null&&(t=m.samples)!=null&&t.length){const b=Ga({id:n,frag:l,details:f},m);r.trigger(pe.FRAG_PARSING_METADATA,b)}if(p){const b=Ga({id:n,frag:l,details:f},p);r.trigger(pe.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,n,r){if(this.state!==Yt.PARSING)return;t.video&&delete t.video;const s=t.audio;if(!s)return;s.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(pe.BUFFER_CODECS,t);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:a};this.hls.trigger(pe.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||r===bl.NOT_LOADED||r===bl.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Yt.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==t.details.fragments[0].start&&nL(t.details,o)}else this.startFragRequested=!0,super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:s,audioCodec:o,channels:a}=this.bufferedTrack;sx({name:t,lang:n,assocLang:r,characteristics:s,audioCodec:o,channels:a},e,wv)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(pe.AUDIO_TRACK_SWITCHED,El({},e))}}function Kie(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!vM(i[t].attrs,e[t].attrs))return!1;return!0}function vM(i,e,t){const n=i["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>i[r]!==e[r])}function tU(i,e){return e.label.toLowerCase()===i.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(i.lang||"").toLowerCase())}class Yie extends UP{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:s}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r){this.warn(`Audio track with id:${n} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=t.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(h=>h.default)&&(this.selectDefaultTrack=!1),a.forEach((h,p)=>{h.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const h=$0(l,a,wv);if(h>-1)s=a[h];else{const p=$0(l,this.tracks);s=this.tracks[p]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(pe.AUDIO_TRACKS_UPDATED,u);const f=this.trackId;if(c!==-1&&f===-1)this.setAudioTrack(c);else if(a.length&&f===-1){var o;const h=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(h.message),this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Rr.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&sx(e,r,wv))return r;const s=$0(e,this.tracksInGroup,wv);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(r){let o=t.loadLevel;o===-1&&(o=t.firstAutoLevel);const a=YMe(e,t.levels,n,o,wv);if(a===-1)return null;t.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=$0(e,n);if(o>-1)return n[o]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===n&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(pe.AUDIO_TRACK_SWITCHING,El({},r)),s))return;const o=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(o)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(!(this.selectDefaultTrack&&!r.default)&&(!e||sx(e,r,wv)))return n}if(e){const{name:n,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(sx({name:n,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l},u,wv))return c}for(let c=0;c<t.length;c++){const u=t[c];if(vM(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(vM(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${r}`),this.clearTimer(),this.hls.trigger(pe.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:r,deliveryDirectives:e||null})}}}const cK=500;class Xie extends GP{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",ui.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.ERROR,this.onError,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.ERROR,this.onError,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=Yt.IDLE,this.setInterval(cK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragPrevious=n,this.state=Yt.IDLE,!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=n.start;for(let c=0;c<s.length;c++)if(a>=s[c].start&&a<=s[c].end){o=s[c];break}const l=n.start+n.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(n===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(n,s,ui.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===ui.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===ui.SUBTITLE&&(t.details===St.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Yt.STOPPED&&(this.state=Yt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&Kie(this.levels,t)){this.levels=t.map(n=>new Hx(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const r=new Hx(n);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ui.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(cK)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:s}=this,{details:o,id:a}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[a];if(a>=s.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(n=l.details)!=null&&n.live){const f=this.mainDetails;if(o.deltaUpdateFailed||!f)return;const h=f.fragments[0];if(!l.details)o.hasProgramDateTime&&f.hasProgramDateTime?(nL(o,f),c=o.fragments[0].start):h&&(c=h.start,ZF(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,ZF(o,c))}}l.details=o,this.levelLastLoaded=l,a===r&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===Yt.IDLE&&(tL(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&r!=null&&r.key&&r.iv&&r.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).catch(a=>{throw s.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:t}),a}).then(a=>{const l=performance.now();s.trigger(pe.FRAG_DECRYPTED,{frag:t,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=Yt.IDLE})}}doTick(){if(!this.media){this.state=Yt.IDLE;return}if(this.state===Yt.IDLE){const{currentTrackId:e,levels:t}=this,n=t==null?void 0:t[e];if(!n||!t.length||!n.details)return;const{config:r}=this,s=this.getLoadPosition(),o=ks.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,ui.MAIN),u=n.details,f=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>f)return;const h=u.fragments,p=h.length,m=u.edge;let g=null;const b=this.fragPrevious;if(a<m){const T=r.maxFragLookUpTolerance,C=a>m-T?0:T;g=tL(b,h,Math.max(h[0].start,a),C),!g&&b&&b.start<h[0].start&&(g=h[0])}else g=h[p-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const T=g.sn-u.startSN,C=h[T-1];C&&C.cc===g.cc&&this.fragmentTracker.getState(C)===bl.NOT_LOADED&&(g=C)}this.fragmentTracker.getState(g)===bl.NOT_LOADED&&this.loadFragment(g,n,a)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new W3e(this.tracksBuffered[this.currentTrackId]||[])}}class W3e{constructor(e){this.buffered=void 0;const t=(n,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}class Qie extends UP{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=tD(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")t=n[s];else if(n[s].mode==="showing"){t=n[s];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADING,this.onLevelLoading,this),e.off(pe.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(pe.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(pe.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),tD(this.media.textTracks).forEach(t=>{p2(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:s}=t,o=this.tracksInGroup[n];if(!o||o.groupId!==r){this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=t.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(u=>!n||n.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,f)=>{u.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const u=$0(a,o);if(u>-1)s=o[u];else{const f=$0(a,this.tracks);s=this.tracks[f]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(pe.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const s=t[r];if(!(n&&!s.default||!n&&!e)&&(!e||sx(s,e)))return r}if(e){for(let r=0;r<t.length;r++){const s=t[r];if(vM(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const s=t[r];if(vM(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(tU(r,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Rr.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&sx(e,n))return n;const r=$0(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(n)return null;{const s=$0(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,r=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(pe.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=tD(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(s=>tU(n,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Pn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:o,groupId:a="",name:l,type:c,url:u}=r;this.hls.trigger(pe.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const f=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(f)}}class K3e{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const r=this.queues[t];r.push(e),r.length===1&&!n&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise(s=>{t=s}),r={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(r){st.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${r}`),n.onError(r);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const uK=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class Zie{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=n=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:n,mediaSource:r}=this;this.log("Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(pe.MEDIA_ATTACHED,{media:n,mediaSource:r})),r&&r.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:r}=this;n!==r&&st.error(`Media element src was set while attaching MediaSource (${r} > ${n})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=uMe(Zy(e.config.preferManagedMediaSource)),this.log=st.log.bind(st,t),this.warn=st.warn.bind(st,t),this.error=st.error.bind(st,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.BUFFER_RESET,this.onBufferReset,this),e.on(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.BUFFER_EOS,this.onBufferEos,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(pe.FRAG_PARSED,this.onFragParsed,this),e.on(pe.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.BUFFER_RESET,this.onBufferReset,this),e.off(pe.BUFFER_APPENDING,this.onBufferAppending,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.BUFFER_EOS,this.onBufferEos,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(pe.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(pe.FRAG_PARSED,this.onFragParsed,this),e.off(pe.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new K3e(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,r=Zy(this.appendSource);if(n&&r){var s;const o=this.mediaSource=new r;this.log(`created media source: ${(s=o.constructor)==null?void 0:s.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&o instanceof l,fK(n),Y3e(n,a),n.load()}catch{n.src=a}else n.src=a;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(r){this.warn(`onMediaDetaching: ${r.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&fK(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(pe.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var n;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(r){this.warn(`onBufferReset ${e}`,r)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,r=Object.keys(t);if(r.forEach(o=>{if(n){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:c,codec:u,levelCodec:f,container:h,metadata:p}=t[o],m=NW(l.codec,l.levelCodec),g=m==null?void 0:m.replace(uK,"$1");let b=NW(u,f);const T=(a=b)==null?void 0:a.replace(uK,"$1");if(b&&g!==T){o.slice(0,5)==="audio"&&(b=QD(b,this.appendSource));const C=`${h};codecs=${b}`;this.appendChangeType(o,C),this.log(`switching codec ${m} to ${b}`),this.tracks[o]={buffer:l.buffer,codec:u,container:h,levelCodec:f,metadata:p,id:c}}}}else this.pendingTracks[o]=t[o]}),n)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,r={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};n.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:r,tracks:s}=this,{data:o,type:a,frag:l,part:c,chunkMeta:u}=t,f=u.buffering[a],h=self.performance.now();f.start=h;const p=l.stats.buffering,m=c?c.stats.buffering:null;p.start===0&&(p.start=h),m&&m.start===0&&(m.start=h);const g=s.audio;let b=!1;a==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const T=l.start,C={execute:()=>{if(f.executeStart=self.performance.now(),b){const R=this.sourceBuffer[a];if(R){const P=T-R.timestampOffset;Math.abs(P)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${T} (delta: ${P}) sn: ${l.sn})`),R.timestampOffset=T)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const R=self.performance.now();f.executeEnd=f.end=R,p.first===0&&(p.first=R),m&&m.first===0&&(m.first=R);const{sourceBuffer:P}=this,I={};for(const F in P)I[F]=ks.getBuffered(P[F]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(pe.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:I})},onError:R=>{const P={type:vi.MEDIA_ERROR,parent:l.type,details:St.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:c,chunkMeta:u,error:R,err:R,fatal:!1};if(R.code===DOMException.QUOTA_EXCEEDED_ERR)P.details=St.BUFFER_FULL_ERROR;else{const I=++this.appendErrors[a];P.details=St.BUFFER_APPEND_ERROR,this.warn(`Failed ${I}/${n.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),I>=n.config.appendErrorMaxRetry&&(P.fatal=!0)}n.trigger(pe.ERROR,P)}};r.append(C,a,!!this.pendingTracks[a])}onBufferFlushing(e,t){const{operationQueue:n}=this,r=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(pe.BUFFER_FLUSHED,{type:s})},onError:o=>{this.warn(`Failed to remove from ${s} SourceBuffer`,o)}});t.type?n.append(r(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{n.append(r(s),s)})}onFragParsed(e,t){const{frag:n,part:r}=t,s=[],o=r?r.elementaryStreams:n.elementaryStreams;o[hs.AUDIOVIDEO]?s.push("audiovideo"):(o[hs.AUDIO]&&s.push("audio"),o[hs.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();n.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const c=r?r.stats:n.stats;this.hls.trigger(pe.FRAG_BUFFERED,{frag:n,part:r,stats:c,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(a,s)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((r,s)=>{const o=this.sourceBuffer[s];return o&&(!t.type||t.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} sourceBuffer now EOS`))),r&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:r}=this;if(!r||r.readyState!=="open"){r&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),r.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.getSourceBufferTypes().length)return;const s=e.config,o=n.currentTime,a=t.levelTargetDuration,l=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Pn(l)&&l>0){const c=Math.max(l,a),u=Math.floor(o/a)*a-c;this.flushBackBuffer(o,a,u)}if(Pn(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const c=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),u=Math.max(c,a),f=Math.floor(o/a)*a+u;this.flushFrontBuffer(o,a,f)}}flushBackBuffer(e,t,n){const{details:r,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const l=s[a];if(l){const c=ks.getBuffered(l);if(c.length>0&&n>c.start(0)){if(this.hls.trigger(pe.BACK_BUFFER_REACHED,{bufferEnd:n}),r!=null&&r.live)this.hls.trigger(pe.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l.ended&&c.end(c.length-1)-e<t*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:a})}}})}flushFrontBuffer(e,t,n){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(o=>{const a=r[o];if(a){const l=ks.getBuffered(a),c=l.length;if(c<2)return;const u=l.start(c-1),f=l.end(c-1);if(n>u||e>=u&&e<=f)return;if(a.ended&&e-f<2*t){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(pe.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:n,mediaSource:r}=this,s=e.fragments[0].start+e.totalduration,o=n.duration,a=Pn(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(s>a&&s>o||!Pn(o))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),r.duration=s)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&t!=null&&t.setLiveSeekableRange){const s=Math.max(0,n[0].start),o=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${s}-${o}.`),t.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,r=Object.keys(n).length;if(r&&(!e||r===2||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(pe.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{t.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!t[s]){var r;const o=e[s];if(!o)throw Error(`source buffer exists for track ${s}, however track does not`);let a=((r=o.levelCodec)==null?void 0:r.indexOf(","))===-1?o.levelCodec:o.codec;a&&s.slice(0,5)==="audio"&&(a=QD(a,this.appendSource));const l=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${l})`);try{const c=t[s]=n.addSourceBuffer(l),u=s;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(f,h)=>{const p=h.removedRanges;p!=null&&p.length&&this.hls.trigger(pe.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:c,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(c){this.error(`error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:s,mimeType:l})}}}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n==null?void 0:n.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(r)}removeExecutor(e,t,n){const{media:r,mediaSource:s,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!r||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const c=Pn(r.duration)?r.duration:1/0,u=Pn(s.duration)?s.duration:1/0,f=Math.max(0,t),h=Math.min(n,c,u);h>f&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${f},${h}] from the ${e} SourceBuffer`),l.remove(f,h)):o.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(!n){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}n.ended=!1,n.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,r=t.map(s=>n.appendBlocker(s));Promise.all(r).then(()=>{e(),t.forEach(s=>{const o=this.sourceBuffer[s];o!=null&&o.updating||n.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const r=this.sourceBuffer[e];if(!r)return;const s=n.bind(this,e);this.listeners[e].push({event:t,listener:s}),r.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(n=>{t.removeEventListener(n.event,n.listener)})}}function fK(i){const e=i.querySelectorAll("source");[].slice.call(e).forEach(t=>{i.removeChild(t)})}function Y3e(i,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,i.appendChild(t)}const X3e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Jie=i=>String.fromCharCode(X3e[i]||i),_p=15,vm=100,Q3e={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Z3e={17:2,18:4,21:6,22:8,23:10,19:13,20:15},J3e={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},eCe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},tCe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class nCe{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;st.log(`${this.time} [${e}] ${n}`)}}}const fv=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class ere{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class iCe{constructor(){this.uchar=" ",this.penState=new ere}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}let rCe=class{constructor(e){this.chars=[],this.pos=0,this.currPenState=new ere,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<vm;t++)this.chars.push(new iCe);this.logger=e}equals(e){for(let t=0;t<vm;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<vm;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<vm;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>vm&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=vm)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Jie(e);if(this.pos>=vm){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<vm;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<vm;n++){const r=this.chars[n].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};class uI{constructor(e){this.rows=[],this.currRow=_p-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<_p;t++)this.rows.push(new rCe(e));this.logger=e}reset(){for(let e=0;e<_p;e++)this.rows[e].clear();this.currRow=_p-1}equals(e){let t=!0;for(let n=0;n<_p;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<_p;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<_p;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let a=0;a<_p;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(o.rows[s+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[o].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let s=0;s<_p;s++){const o=this.rows[s].getTextString();o&&(r=s+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class hK{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new uI(n),this.nonDisplayedMemory=new uI(n),this.lastOutputScreen=new uI(n),this.currRollUpRow=this.displayedMemory.rows[_p-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[_p-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class dK{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=oCe(),this.logger=void 0;const r=this.logger=new nCe;this.channels=[null,new hK(e,t,r),new hK(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const r=t[n]&127,s=t[n+1]&127;let o=!1,a=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+fv([t[n],t[n+1]])+"] -> ("+fv([r,s])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if(sCe(r,s,l)){L5(null,null,l),this.logger.log(3,()=>"Repeated command ("+fv([r,s])+") is dropped");continue}L5(r,s,this.cmdHistory),o=this.parseCmd(r,s),o||(o=this.parseMidrow(r,s)),o||(o=this.parsePAC(r,s)),o||(o=this.parseBackgroundAttributes(r,s))}else L5(null,null,l);if(!o&&(a=this.parseChars(r,s),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+fv([r,s])+" orig: "+fv([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(n||r))return!1;const s=e===20||e===21||e===23?1:2,o=this.channels[s];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+fv([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(r||s))return!1;const o=e<=23?1:2;t>=64&&t<=95?n=o===1?Q3e[e]:J3e[e]:n=o===1?Z3e[e]:eCe[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(n,t)),this.currentChannel=o,!0):!1}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,r.underline=(n&1)===1,n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((n-16)/2)*4,r}parseChars(e,t){let n,r=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let o;s===17?o=t+80:s===18?o=t+112:o=t+144,this.logger.log(2,()=>"Special char '"+Jie(o)+"' in channel "+n),r=[o]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+fv(r).join(",")),r}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(n||r))return!1;let s;const o={};e===16||e===24?(s=Math.floor((t-32)/2),o.background=tCe[s],t%2===1&&(o.background=o.background+"_semi")):t===45?o.background="transparent":(o.foreground="black",t===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}L5(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function L5(i,e,t){t.a=i,t.b=e}function sCe(i,e,t){return t.a===i&&t.b===e}function oCe(){return{a:null,b:null}}class P5{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var iG=function(){if(gS!=null&&gS.VTTCue)return self.VTTCue;const i=["","lr","rl"],e=["start","middle","end","left","right"];function t(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function n(a){return t(i,a)}function r(a){return t(e,a)}function s(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const f in u)a[f]=u[f]}return a}function o(a,l,c){const u=this,f={enumerable:!0};u.hasBeenReset=!1;let h="",p=!1,m=a,g=l,b=c,T=null,C="",R=!0,P="auto",I="start",F=50,k="middle",q=50,H="middle";Object.defineProperty(u,"id",s({},f,{get:function(){return h},set:function(O){h=""+O}})),Object.defineProperty(u,"pauseOnExit",s({},f,{get:function(){return p},set:function(O){p=!!O}})),Object.defineProperty(u,"startTime",s({},f,{get:function(){return m},set:function(O){if(typeof O!="number")throw new TypeError("Start time must be set to a number.");m=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},f,{get:function(){return g},set:function(O){if(typeof O!="number")throw new TypeError("End time must be set to a number.");g=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},f,{get:function(){return b},set:function(O){b=""+O,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},f,{get:function(){return T},set:function(O){T=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},f,{get:function(){return C},set:function(O){const $=n(O);if($===!1)throw new SyntaxError("An invalid or illegal string was specified.");C=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},f,{get:function(){return R},set:function(O){R=!!O,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},f,{get:function(){return P},set:function(O){if(typeof O!="number"&&O!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");P=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},f,{get:function(){return I},set:function(O){const $=r(O);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");I=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},f,{get:function(){return F},set:function(O){if(O<0||O>100)throw new Error("Position must be between 0 and 100.");F=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},f,{get:function(){return k},set:function(O){const $=r(O);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");k=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},f,{get:function(){return q},set:function(O){if(O<0||O>100)throw new Error("Size must be between 0 and 100.");q=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},f,{get:function(){return H},set:function(O){const $=r(O);if(!$)throw new SyntaxError("An invalid or illegal string was specified.");H=$,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class aCe{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function tre(i){function e(n,r,s,o){return(n|0)*3600+(r|0)*60+(s|0)+parseFloat(o||0)}const t=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class lCe{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function nre(i,e,t,n){const r=n?i.split(n):[i];for(const s in r){if(typeof r[s]!="string")continue;const o=r[s].split(t);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const nU=new iG(0,0,""),N5=nU.align==="middle"?"middle":"center";function cCe(i,e,t){const n=i;function r(){const a=tre(i);if(a===null)throw new Error("Malformed timestamp: "+n);return i=i.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const c=new lCe;nre(a,function(h,p){let m;switch(h){case"region":for(let g=t.length-1;g>=0;g--)if(t[g].id===p){c.set(h,t[g].region);break}break;case"vertical":c.alt(h,p,["rl","lr"]);break;case"line":m=p.split(","),c.integer(h,m[0]),c.percent(h,m[0])&&c.set("snapToLines",!1),c.alt(h,m[0],["auto"]),m.length===2&&c.alt("lineAlign",m[1],["start",N5,"end"]);break;case"position":m=p.split(","),c.percent(h,m[0]),m.length===2&&c.alt("positionAlign",m[1],["start",N5,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,p);break;case"align":c.alt(h,p,["start",N5,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&nU.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",N5);let f=c.get("position","auto");f==="auto"&&nU.position===50&&(f=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=f}function o(){i=i.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),i.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);i=i.slice(3),o(),e.endTime=r(),o(),s(i,e)}function ire(i){return i.replace(/<br(?: \/)?>/gi,`
`)}class uCe{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new aCe,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let s=t.buffer,o=0;for(s=ire(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,t.buffer=s.slice(o),a}function r(s){nre(s,function(o,a){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=n();const a=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let o=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:s=n(),t.state){case"HEADER":/:/.test(s)?r(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new iG(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{cCe(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const fCe=/\r\n|\n\r|\n|\r/g,fI=function(e,t,n=0){return e.slice(n,n+t.length)===t},hCe=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Pn(t)||!Pn(n)||!Pn(r)||!Pn(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*r,t+=60*60*1e3*s,t},hI=function(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0).toString()};function rG(i,e,t){return hI(i.toString())+hI(e.toString())+hI(t)}const dCe=function(e,t,n){let r=e[t],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=n};function pCe(i,e,t,n,r,s,o){const a=new uCe,l=X0(new Uint8Array(i)).trim().replace(fCe,`
`).split(`
`),c=[],u=e?O3e(e.baseTime,e.timescale):0;let f="00:00.000",h=0,p=0,m,g=!0;a.oncue=function(b){const T=t[n];let C=t.ccOffset;const R=(h-u)/9e4;if(T!=null&&T.new&&(p!==void 0?C=t.ccOffset=T.start:dCe(t,n,R)),R){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}C=R-t.presentationOffset}const P=b.endTime-b.startTime,I=Zh((b.startTime+C-p)*9e4,r*9e4)/9e4;b.startTime=Math.max(I,0),b.endTime=Math.max(I+P,0);const F=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(F)),b.id||(b.id=rG(b.startTime,b.endTime,F)),b.endTime>0&&c.push(b)},a.onparsingerror=function(b){m=b},a.onflush=function(){if(m){o(m);return}s(c)},l.forEach(b=>{if(g)if(fI(b,"X-TIMESTAMP-MAP=")){g=!1,b.slice(16).split(",").forEach(T=>{fI(T,"LOCAL:")?f=T.slice(6):fI(T,"MPEGTS:")&&(h=parseInt(T.slice(7)))});try{p=hCe(f)/1e3}catch(T){m=T}return}else b===""&&(g=!1);a.parse(b+`
`)}),a.flush()}const dI="stpp.ttml.im1t",rre=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,sre=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ACe={left:"start",center:"center",right:"end",start:"start",end:"end"};function pK(i,e,t,n){const r=ji(new Uint8Array(i),["mdat"]);if(r.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(a=>X0(a)),o=I3e(e.baseTime,1,e.timescale);try{s.forEach(a=>t(mCe(a,o)))}catch(a){n(a)}}function mCe(i,e){const r=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((f,h)=>(f[h]=r.getAttribute(`ttp:${h}`)||s[h],f),{}),a=r.getAttribute("xml:space")!=="preserve",l=AK(pI(r,"styling","style")),c=AK(pI(r,"layout","region")),u=pI(r,"body","[begin]");return[].map.call(u,f=>{const h=ore(f,a);if(!h||!f.hasAttribute("begin"))return null;const p=mI(f.getAttribute("begin"),o),m=mI(f.getAttribute("dur"),o);let g=mI(f.getAttribute("end"),o);if(p===null)throw mK(f);if(g===null){if(m===null)throw mK(f);g=p+m}const b=new iG(p-e,g-e,h);b.id=rG(b.startTime,b.endTime,b.text);const T=c[f.getAttribute("region")],C=l[f.getAttribute("style")],R=gCe(T,C,l),{textAlign:P}=R;if(P){const I=ACe[P];I&&(b.lineAlign=I),b.align=P}return Ga(b,R),b}).filter(f=>f!==null)}function pI(i,e,t){const n=i.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function AK(i){return i.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function ore(i,e){return[].slice.call(i.childNodes).reduce((t,n,r)=>{var s;return n.nodeName==="br"&&r?t+`
`:(s=n.childNodes)!=null&&s.length?ore(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function gCe(i,e,t){const n="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=i!=null&&i.hasAttribute("style")?i.getAttribute("style"):null;return o&&t.hasOwnProperty(o)&&(r=t[o]),s.reduce((a,l)=>{const c=AI(e,n,l)||AI(i,n,l)||AI(r,n,l);return c&&(a[l]=c),a},{})}function AI(i,e,t){return i&&i.hasAttributeNS(e,t)?i.getAttributeNS(e,t):null}function mK(i){return new Error(`Could not parse ttml timestamp ${i}`)}function mI(i,e){if(!i)return null;let t=tre(i);return t===null&&(rre.test(i)?t=yCe(i,e):sre.test(i)&&(t=vCe(i,e))),t}function yCe(i,e){const t=rre.exec(i),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function vCe(i,e){const t=sre.exec(i),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class are{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=yK(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(pe.FRAG_LOADING,this.onFragLoading,this),e.on(pe.FRAG_LOADED,this.onFragLoaded,this),e.on(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(pe.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(pe.FRAG_LOADING,this.onFragLoading,this),e.off(pe.FRAG_LOADED,this.onFragLoaded,this),e.off(pe.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(pe.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(pe.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(pe.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(pe.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new P5(this,"textTrack1"),t=new P5(this,"textTrack2"),n=new P5(this,"textTrack3"),r=new P5(this,"textTrack4");this.cea608Parser1=new dK(1,e,t),this.cea608Parser2=new dK(3,n,r)}}addCues(e,t,n,r,s){let o=!1;for(let a=s.length;a--;){const l=s[a],c=xCe(l[0],l[1],t,n);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],n),o=!0,c/(n-t)>.5))return}if(o||s.push([t,n]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,t,n,r)}else{const a=this.Cues.newCue(null,t,n,r);this.hls.trigger(pe.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:s}){const{unparsedVttFrags:o}=this;n==="main"&&(this.initPTS[t.cc]={baseTime:r,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(pe.FRAG_LOADED,a)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const s=n.textTracks[r];if(gK(s,{name:e,lang:t}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:s,languageCode:o}=t[e],a=this.getExistingTrack(s,o);if(a)n[e]=a,p2(n[e]),vie(n[e],r);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,r={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{p2(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=yK(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)p2(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(s=>s.textCodec===dI);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(Kie(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const o=this.media,a=o?tD(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(a){let f=null;for(let h=0;h<a.length;h++)if(a[h]&&gK(a[h],l)){f=a[h],a[h]=null;break}f&&(u=f)}if(u)p2(u);else{const f=lre(l);u=this.createTextTrack(f,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&st.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(pe.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const r=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!r)return;const s=`textTrack${r[1]}`,o=this.captionsProperties[s];o&&(o.label=n.name,n.lang&&(o.languageCode=n.lang),o.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===ui.MAIN){var n,r;const{cea608Parser1:s,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=t.frag,u=(n=(r=t.part)==null?void 0:r.index)!=null?n:-1;s&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===ui.SUBTITLE)if(r.byteLength){const s=n.decryptdata,o="stats"in t;if(s==null||!s.encrypted||o){const a=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),a&&a.textCodec===dI?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;pK(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),n.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{st.log(`Failed to parse IMSC1: ${r}`),n.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[n.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(t=n.initSegment)!=null&&t.data?_d(n.initSegment.data,new Uint8Array(r)):r;pCe(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,u=>{this._appendCues(u,n.level),l.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},u=>{const f=u.message==="Missing initPTS for VTT MPEGTS";f?o.push(e):this._fallbackToIMSC1(n,r),st.log(`Failed to parse VTT cue: ${u}`),!(f&&a>n.cc)&&l.trigger(pe.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:u})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||pK(t,this.initPTS[e.cc],()=>{n.textCodec=dI,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(s=>xie(r,s))}else{const r=this.tracks[t];if(!r)return;const s=r.default?"default":"subtitles"+t;n.trigger(pe.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===ui.SUBTITLE&&this.onFragLoaded(pe.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:r}=this;if(!this.enabled||!n||!r)return;const{frag:s,samples:o}=t;if(!(s.type===ui.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);n.addData(o[a].pts,c[0]),r.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:s}){const{media:o}=this;if(!(!o||o.currentTime<n)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>KF(a[l],t,n))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>KF(a[l],t,r))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let r=2;for(let s=0;s<n;s++){const o=e[r++],a=127&e[r++],l=127&e[r++];if(a===0&&l===0)continue;if((4&o)!==0){const u=3&o;(u===0||u===1)&&(t[u].push(a),t[u].push(l))}}return t}}function lre(i){return i.characteristics&&/transcribes-spoken-dialog/gi.test(i.characteristics)&&/describes-music-and-sound/gi.test(i.characteristics)?"captions":"subtitles"}function gK(i,e){return!!i&&i.kind===lre(e)&&tU(e,i)}function xCe(i,e,t,n){return Math.min(e,n)-Math.max(i,t)}function yK(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class zP{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(pe.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.BUFFER_CODECS,this.onBufferCodecs,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Pn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&st.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,zP.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const r=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(t,n);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&r(l,e[a+1])){s=a;break}}return s}}class cre{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(pe.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const s=r-this.lastTime,o=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;if(c.trigger(pe.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;st.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(pe.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const B5="[eme]";class ox{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=ox.CDMCleanupPromise?[ox.CDMCleanupPromise]:[],this.debug=st.debug.bind(st,B5),this.log=st.log.bind(st,B5),this.warn=st.warn.bind(st,B5),this.error=st.error.bind(st,B5),this.onMediaEncrypted=t=>{const{initDataType:n,initData:r}=t,s=`"${t.type}" event: init data type: "${n}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=T5(this.config));const a=o.map(Z6).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=X6(o);let l,c;if(n==="sinf"){if(a!==jr.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${a}`);return}const m=Ka(new Uint8Array(r));try{const g=W9(JSON.parse(m).sinf),b=pie(g);if(!b)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=b.subarray(8,24),c=jr.FAIRPLAY}catch(g){this.warn(`${s} Failed to parse sinf: ${g}`);return}}else{if(a!==jr.WIDEVINE&&a!==jr.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${a}`);return}const m=oMe(r),g=m.filter(T=>!!T.systemId&&Q6(T.systemId)===a);g.length>1&&this.warn(`${s} Using first of ${g.length} pssh found for selected key-system ${a}`);const b=g[0];if(!b){m.length===0||m.some(T=>!T.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${m.map(T=>Q6(T.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=Q6(b.systemId),b.version===0&&b.data)if(c===jr.WIDEVINE){const T=b.data.length-22;l=b.data.subarray(T,T+16)}else c===jr.PLAYREADY&&(l=oie(b.data))}if(!c||!l){this.log(`Unable to handle ${s} with key-system ${a}`);return}const u=P0.hexDump(l),{keyIdToKeySessionPromise:f,mediaKeySessions:h}=this;let p=f[u];for(let m=0;m<h.length;m++){const g=h[m],b=g.decryptdata;if(!b.keyId)continue;const T=P0.hexDump(b.keyId);if(u===T||b.uri.replace(/-/g,"").indexOf(u)!==-1){if(p=f[T],b.pssh)break;delete f[T],b.pssh=new Uint8Array(r),b.keyId=l,p=f[u]=p.then(()=>this.generateRequestWithPreferredKeySession(g,n,r,"encrypted-event-key-match")),p.catch(C=>this.handleError(C));break}}if(!p){if(c!==a){this.log(`Ignoring "${s}" with ${c} init data for selected key-system ${a}`);return}p=f[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:m,mediaKeys:g})=>{var b;this.throwIfDestroyed();const T=new yS("ISO-23001-7",u,(b=Z6(m))!=null?b:"");return T.pssh=new Uint8Array(r),T.keyId=l,this.attemptSetMediaKeys(m,g).then(()=>{this.throwIfDestroyed();const C=this.createMediaKeySessionContext({decryptdata:T,keySystem:m,mediaKeys:g});return this.generateRequestWithPreferredKeySession(C,n,r,"encrypted-event-no-match")})}),p.catch(m=>this.handleError(m))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===jr.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(o,a,l)=>!!o&&l.indexOf(o)===a,r=t.map(o=>o.audioCodec).filter(n),s=t.map(o=>o.videoCodec).filter(n);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,r,s).then(f=>o({keySystem:u,mediaKeys:f})).catch(f=>{c.length?l(c):f instanceof Kh?a(f):a(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_NO_ACCESS,error:f,fatal:!0},f.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${n}`;return sie===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return n(e,t)}getMediaKeysPromise(e,t,n){const r=Iwe(e,t,n,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let o=s==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),o=this.requestMediaKeySystemAccess(e,r);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(f=>f?this.setMediaKeysServerCertificate(u,e,f):u))),a.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),a.mediaKeys})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${P0.hexDump(e.keyId||[])}`);const r=n.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,s,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return P0.hexDump(e.keyId)}updateKeySession(e,t){var n;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${P0.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const r=T5(this.config),s=e.map(X6).filter(o=>!!o&&r.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:o})=>{const a=Z6(o);a?t(a):n(new Error(`Unable to find format for key-system "${o}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let s=this.keyIdToKeySessionPromise[n];return s||(s=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:t});return this.generateRequestWithPreferredKeySession(l,"cenc",t.pssh,"playlist-key")}))),s.catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Kh?this.hls.trigger(pe.ERROR,e.data):this.hls.trigger(pe.ERROR,{type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const r=X6(e.keyFormat),s=r?[r]:T5(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=T5(this.config)),e.length===0)throw new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,n,r){var s,o;const a=(s=this.config.drmSystems)==null||(o=s[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const m=a.call(this.hls,t,n,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");t=m.initDataType,n=e.decryptdata.pssh=m.initData?new Uint8Array(m.initData):null}catch(m){var l;if(this.warn(m.message),(l=this.hls)!=null&&l.config.debug)throw m}if(n===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${t} length: ${n?n.byteLength:null})`);const u=new nG,f=e._onmessage=m=>{const g=e.mediaKeysSession;if(!g){u.emit("error",new Error("invalid state"));return}const{messageType:b,message:T}=m;this.log(`"${b}" message event for session "${g.sessionId}" message size: ${T.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,T).catch(C=>{this.handleError(C),u.emit("error",C)}):b==="license-release"?e.keySystem===jr.FAIRPLAY&&(this.updateKeySession(e,jF("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${b}"`)},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const b=e.keyStatus;u.emit("keyStatus",b),b==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",f),e.mediaKeysSession.addEventListener("keystatuseschange",h);const p=new Promise((m,g)=>{u.on("error",g),u.on("keyStatus",b=>{b.startsWith("usable")?m():b==="output-restricted"?g(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):b==="internal-error"?g(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${b}"`)):b==="expired"?g(new Error("key expired while generating request")):this.warn(`unhandled key status change "${b}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var m;this.log(`Request generated for key-session "${(m=e.mediaKeysSession)==null?void 0:m.sessionId}" keyId: ${c}`)}).catch(m=>{throw new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_NO_SESSION,error:m,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>p).catch(m=>{throw u.removeAllListeners(),this.removeSession(e),m}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${P0.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${P0.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,r=new n(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,p,m,g)=>{o(h.data)},onError:(h,p,m,g)=>{a(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:El({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,p,m)=>{a(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,p,m)=>{a(new Error("aborted"))}};r.load(l,u,f)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,s)=>{e.setServerCertificate(n).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${t}"`),r(e)}).catch(o=>{s(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(r=>{throw new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(n,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let f=0,h=s.length;f<h;f++){var o,a;u=s[f];const p=(o=u.querySelector("name"))==null?void 0:o.textContent,m=(a=u.querySelector("value"))==null?void 0:a.textContent;p&&m&&e.setRequestHeader(p,m)}}const l=r.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return jF(atob(c))}setupLicenseXHR(e,t,n,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,n,r)}).catch(o=>{if(!n.decryptdata)throw o;return e.open("POST",t,!0),s.call(this.hls,e,t,n,r)}).then(o=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:o||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}r(l)}else{const l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)s(new Kh({type:vi.KEY_SYSTEM_ERROR,details:St.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==jr.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},yS.clearKeyUriToKeyIdMap();const n=t.length;ox.CDMCleanupPromise=Promise.all(t.map(r=>this.removeSession(r)).concat(e==null?void 0:e.setMediaKeys(null).catch(r=>{this.log(`Could not clear media keys: ${r}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(r=>{this.log(`Could not close sessions and clear media keys: ${r}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),t.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>t.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}ox.CDMCleanupPromise=void 0;class Kh extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var dc;(function(i){i.MANIFEST="m",i.AUDIO="a",i.VIDEO="v",i.MUXED="av",i.INIT="i",i.CAPTION="c",i.TIMED_TEXT="tt",i.KEY="k",i.OTHER="o"})(dc||(dc={}));var iU;(function(i){i.DASH="d",i.HLS="h",i.SMOOTH="s",i.OTHER="o"})(iU||(iU={}));var Wv;(function(i){i.OBJECT="CMCD-Object",i.REQUEST="CMCD-Request",i.SESSION="CMCD-Session",i.STATUS="CMCD-Status"})(Wv||(Wv={}));const bCe={[Wv.OBJECT]:["br","d","ot","tb"],[Wv.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Wv.SESSION]:["cid","pr","sf","sid","st","v"],[Wv.STATUS]:["bs","rtp"]};class vS{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(n=>n instanceof vS?n:new vS(n))),this.value=e,this.params=t}}class ure{constructor(e){this.description=void 0,this.description=e}}const _Ce="Dict";function SCe(i){return Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":typeof i=="object"?JSON.stringify(i):String(i)}function TCe(i,e,t,n){return new Error(`failed to ${i} "${SCe(e)}" as ${t}`,{cause:n})}const vK="Bare Item",ECe="Boolean",wCe="Byte Sequence",MCe="Decimal",CCe="Integer";function RCe(i){return i<-999999999999999||999999999999999<i}const DCe=/[\x00-\x1f\x7f]+/,LCe="Token",PCe="Key";function uA(i,e,t){return TCe("serialize",i,e,t)}function NCe(i){if(typeof i!="boolean")throw uA(i,ECe);return i?"?1":"?0"}function BCe(i){return btoa(String.fromCharCode(...i))}function ICe(i){if(ArrayBuffer.isView(i)===!1)throw uA(i,wCe);return`:${BCe(i)}:`}function fre(i){if(RCe(i))throw uA(i,CCe);return i.toString()}function OCe(i){return`@${fre(i.getTime()/1e3)}`}function hre(i,e){if(i<0)return-hre(-i,e);const t=Math.pow(10,e);if(Math.abs(i*t%1-.5)<Number.EPSILON){const r=Math.floor(i*t);return(r%2===0?r:r+1)/t}else return Math.round(i*t)/t}function FCe(i){const e=hre(i,3);if(Math.floor(Math.abs(e)).toString().length>12)throw uA(i,MCe);const t=e.toString();return t.includes(".")?t:`${t}.0`}const UCe="String";function kCe(i){if(DCe.test(i))throw uA(i,UCe);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function GCe(i){return i.description||i.toString().slice(7,-1)}function xK(i){const e=GCe(i);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw uA(e,LCe);return e}function rU(i){switch(typeof i){case"number":if(!Pn(i))throw uA(i,vK);return Number.isInteger(i)?fre(i):FCe(i);case"string":return kCe(i);case"symbol":return xK(i);case"boolean":return NCe(i);case"object":if(i instanceof Date)return OCe(i);if(i instanceof Uint8Array)return ICe(i);if(i instanceof ure)return xK(i);default:throw uA(i,vK)}}function sU(i){if(/^[a-z*][a-z0-9\-_.*]*$/.test(i)===!1)throw uA(i,PCe);return i}function sG(i){return i==null?"":Object.entries(i).map(([e,t])=>t===!0?`;${sU(e)}`:`;${sU(e)}=${rU(t)}`).join("")}function dre(i){return i instanceof vS?`${rU(i.value)}${sG(i.params)}`:rU(i)}function zCe(i){return`(${i.value.map(dre).join(" ")})${sG(i.params)}`}function HCe(i,e={whitespace:!0}){if(typeof i!="object")throw uA(i,_Ce);const t=i instanceof Map?i.entries():Object.entries(i),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([r,s])=>{s instanceof vS||(s=new vS(s));let o=sU(r);return s.value===!0?o+=sG(s.params):(o+="=",Array.isArray(s.value)?o+=zCe(s):o+=dre(s)),o}).join(`,${n}`)}function VCe(i,e){return HCe(i,e)}const qCe=i=>i==="ot"||i==="sf"||i==="st",$Ce=i=>typeof i=="number"?Pn(i):i!=null&&i!==""&&i!==!1;function jCe(i,e){const t=new URL(i),n=new URL(e);if(t.origin!==n.origin)return i;const r=t.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}function WCe(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?s:s&3|8).toString(16)})}}}const oD=i=>Math.round(i),KCe=(i,e)=>(e!=null&&e.baseUrl&&(i=jCe(i,e.baseUrl)),encodeURIComponent(i)),I5=i=>oD(i/100)*100,YCe={br:oD,d:oD,bl:I5,dl:I5,mtp:I5,nor:KCe,rtp:I5,tb:oD};function XCe(i,e){const t={};if(i==null||typeof i!="object")return t;const n=Object.keys(i).sort(),r=Ga({},YCe,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return n.forEach(o=>{if(s!=null&&s(o))return;let a=i[o];const l=r[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||$Ce(a)&&(qCe(o)&&typeof a=="string"&&(a=new ure(a)),t[o]=a))}),t}function pre(i,e={}){return i?VCe(XCe(i,e),Ga({whitespace:!1},e)):""}function QCe(i,e={}){if(!i)return{};const t=Object.entries(i),n=Object.entries(bCe).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),r=t.reduce((s,o)=>{var a,l;const[c,u]=o,f=((a=n.find(h=>h[1].includes(c)))==null?void 0:a[0])||Wv.REQUEST;return(l=s[f])!=null||(s[f]={}),s[f][c]=u,s},{});return Object.entries(r).reduce((s,[o,a])=>(s[o]=pre(a,e),s),{})}function ZCe(i,e,t){return Ga(i,QCe(e,t))}const JCe="CMCD";function eRe(i,e={}){if(!i)return"";const t=pre(i,e);return`${JCe}=${encodeURIComponent(t)}`}const bK=/CMCD=[^&#]+/;function tRe(i,e,t){const n=eRe(e,t);if(!n)return i;if(bK.test(i))return i.replace(bK,n);const r=i.includes("?")?"&":"?";return`${i}${r}${n}`}class Are{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:dc.MANIFEST,su:!this.initialized})}catch(s){st.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const s=r.frag,o=this.hls.levels[s.level],a=this.getObjectType(s),l={d:s.duration*1e3,ot:a};(a===dc.VIDEO||a===dc.AUDIO||a==dc.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(r,l)}catch(s){st.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||WCe(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHED,this.onMediaDetached,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:iU.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Ga(t,this.createData());const n=t.ot===dc.INIT||t.ot===dc.VIDEO||t.ot===dc.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((s,o)=>(r.includes(o)&&(s[o]=t[o]),s),{})),this.useHeaders?(e.headers||(e.headers={}),ZCe(e.headers,t)):e.url=tRe(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return dc.TIMED_TEXT;if(e.sn==="initSegment")return dc.INIT;if(t==="audio")return dc.AUDIO;if(t==="main")return this.hls.audioTracks.length?dc.VIDEO:dc.MUXED}getTopBandwidth(e){let t=0,n;const r=this.hls;if(e===dc.AUDIO)n=r.audioTracks;else{const s=r.maxAutoLevel,o=s>-1?s+1:r.levels.length;n=r.levels.slice(0,o)}for(const s of n)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,n=e===dc.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:ks.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){t(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){t(s),this.loader.load(s,o,a)}}}}const nRe=3e5;class mre{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=st.log.bind(st,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===Ya.SendAlternateToPenaltyBox&&n.flags===Yh.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this.pathwayPriority,o=this.pathwayId;if(t.context){const{groupId:a,pathwayId:l,type:c}=t.context;a&&r?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&r&&(s=r.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==o),n.resolved||st.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${o} levels: ${r&&r.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(s=>{r-n[s]>nRe&&delete n[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in n)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(t=this.getLevelsForPathway(o),t.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,Tie(t),this.hls.trigger(pe.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(t===Rr.AUDIO_TRACK&&r[s].hasAudioGroup(e)||t===Rr.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(t.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const f=new lo(u.attrs);f["PATHWAY-ID"]=o;const h=f.AUDIO&&`${f.AUDIO}_clone_${o}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;h&&(n[f.AUDIO]=h,f.AUDIO=h),p&&(r[f.SUBTITLES]=p,f.SUBTITLES=p);const m=gre(u.uri,f["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new Hx({attrs:f,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:m,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let b=1;b<u.audioGroups.length;b++)g.addGroupId("audio",`${u.audioGroups[b]}_clone_${o}`);if(u.subtitleGroups)for(let b=1;b<u.subtitleGroups.length;b++)g.addGroupId("text",`${u.subtitleGroups[b]}_clone_${o}`);return g});t.push(...c),_K(this.audioTracks,n,l,o),_K(this.subtitleTracks,r,l,o)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:r.href},o=t.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,f,h,p)=>{this.log(`Loaded steering manifest: "${r}"`);const m=u.data;if(m.VERSION!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":T}=m;if(g)try{this.uri=new self.URL(g,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||h.url),b&&this.clonePathways(b);const C={steeringManifest:m,url:r.toString()};this.hls.trigger(pe.STEERING_MANIFEST_LOADED,C),T&&this.updatePathwayPriority(T)},onError:(u,f,h,p)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${f.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${f.url} no longer available`);return}let m=this.timeToLoad*1e3;if(u.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const b=g.getResponseHeader("Retry-After");b&&(m=parseFloat(b)*1e3)}this.log(`Steering manifest ${f.url} rate limited`);return}this.scheduleRefresh(this.uri||f.url,m)},onTimeout:(u,f,h)=>{this.log(`Timeout loading steering manifest (${f.url})`),this.scheduleRefresh(this.uri||f.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const r=(n=this.hls)==null?void 0:n.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function _K(i,e,t,n){i&&Object.keys(e).forEach(r=>{const s=i.filter(o=>o.groupId===r).map(o=>{const a=Ga({},o);return a.details=void 0,a.attrs=new lo(a.attrs),a.url=a.attrs.URI=gre(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),a.groupId=a.attrs["GROUP-ID"]=e[r],a.attrs["PATHWAY-ID"]=n,a});i.push(...s)})}function gre(i,e,t,n){const{HOST:r,PARAMS:s,[t]:o}=n;let a;e&&(a=o==null?void 0:o[e],a&&(i=a));const l=new self.URL(i);return r&&!a&&(l.host=r),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}const iRe=/^age:\s*[\d.]+\s*$/im;class yre{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new L3,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,t.url)}).catch(o=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),s(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(o=>{this.callbacks.onError({code:n.status,text:o.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=n.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&Pn(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,s=this.config;if(!n.aborted&&r>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const o=t.status,a=t.responseType==="text"?t.responseText:null;if(o>=200&&o<300){const f=a??t.response;if(f!=null){n.loading.end=Math.max(self.performance.now(),n.loading.first);const h=t.responseType==="arraybuffer"?f.byteLength:f.length;if(n.loaded=n.total=h,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const p=this.callbacks.onProgress;if(p&&p(n,e,f,t),!this.callbacks)return;const m={url:t.responseURL,data:f,code:o};this.callbacks.onSuccess(m,n,e,t);return}}const l=s.loadPolicy.errorRetry,c=n.retry,u={url:e.url,data:void 0,code:o};eL(l,c,!1,u)?this.retry(l):(st.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(eL(e,t,!0))this.retry(e);else{var n;st.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=X9(e,n.retry),n.retry++,st.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&iRe.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function rRe(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const sRe=/(\d+)-(\d+)\/(\d+)/;class SK{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||cRe,this.controller=new self.AbortController,this.stats=new L3}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=oRe(e,this.controller.signal),o=n.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=c&&Pn(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(r,e,this.response)},t.timeout),self.fetch(this.request).then(f=>{this.response=this.loader=f;const h=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(r,e,this.response)},u-(h-r.loading.start)),!f.ok){const{status:p,statusText:m}=f;throw new uRe(m||"fetch, bad network response",p,f)}return r.loading.first=h,r.total=lRe(f.headers)||r.total,o&&Pn(t.highWaterMark)?this.loadProgressively(f,r,e,t.highWaterMark,o):a?f.arrayBuffer():e.responseType==="json"?f.json():f.text()}).then(f=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const p=f[l];p&&(r.loaded=r.total=p);const m={url:h.url,data:f,code:h.status};o&&!Pn(t.highWaterMark)&&o(r,e,f,h),n.onSuccess(m,r,e,h)}).catch(f=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const h=f&&f.code||0,p=f?f.message:null;n.onError({code:h,text:p},e,f?f.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,s){const o=new Die,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&s(t,n,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,f=u.length;return t.loaded+=f,f<r||o.dataLength?(o.push(u),o.dataLength>=r&&s(t,n,o.flush(),e)):s(t,n,u,e),l()}).catch(()=>Promise.reject());return l()}}function oRe(i,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ga({},i.headers))};return i.rangeEnd&&t.headers.set("Range","bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)),t}function aRe(i){const e=sRe.exec(i);if(e)return parseInt(e[2])-parseInt(e[1])+1}function lRe(i){const e=i.get("Content-Range");if(e){const n=aRe(e);if(Pn(n))return n}const t=i.get("Content-Length");if(t)return parseInt(t)}function cRe(i,e){return new self.Request(i.url,e)}class uRe extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const fRe=/\s/,hRe={newCue(i,e,t,n){const r=[];let s,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],a=!0,l=0,c="",!s.isEmpty()){var f;for(let g=0;g<s.chars.length;g++)fRe.test(s.chars[g].uchar)&&a?l++:(c+=s.chars[g].uchar,a=!1);s.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const p=ire(c.trim()),m=rG(e,t,p);i!=null&&(f=i.cues)!=null&&f.getCueById(m)||(o=new u(e,t,p),o.id=m,o.line=h+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(o))}return i&&r.length&&(r.sort((h,p)=>h.line==="auto"||p.line==="auto"?0:h.line>8&&p.line>8?p.line-h.line:h.line-p.line),r.forEach(h=>xie(i,h))),r}},dRe={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},vre=El(El({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:yre,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Cie,bufferController:Zie,capLevelController:zP,errorController:wie,fpsController:cre,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:sie,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:dRe},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},pRe()),{},{subtitleStreamController:Xie,subtitleTrackController:Qie,timelineController:are,audioStreamController:Wie,audioTrackController:Yie,emeController:ox,cmcdController:Are,contentSteeringController:mre});function pRe(){return{cueHandler:hRe,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function ARe(i,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=oU(i),n=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,a=e[o]===void 0,l=[];r.forEach(c=>{const u=`${s}Loading${c}`,f=e[u];if(f!==void 0&&a){l.push(u);const h=t[o].default;switch(e[o]={default:h},c){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),l.length&&st.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),El(El({},t),e)}function oU(i){return i&&typeof i=="object"?Array.isArray(i)?i.map(oU):Object.keys(i).reduce((e,t)=>(e[t]=oU(i[t]),e),{}):i}function mRe(i){const e=i.loader;e!==SK&&e!==yre?(st.log("[config]: Custom loader detected, cannot enable progressive streaming"),i.progressive=!1):rRe()&&(i.loader=SK,i.progressive=!0,i.enableSoftwareAES=!0,st.log("[config]: Progressive streaming enabled, using FetchLoader"))}let gI;class gRe extends UP{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.on(pe.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this),e.off(pe.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],s={},o={};let a=!1,l=!1,c=!1;t.levels.forEach(u=>{var f,h;const p=u.attrs;let{audioCodec:m,videoCodec:g}=u;((f=m)==null?void 0:f.indexOf("mp4a.40.34"))!==-1&&(gI||(gI=/chrome|firefox/i.test(navigator.userAgent)),gI&&(u.audioCodec=m=void 0)),m&&(u.audioCodec=m=QD(m,n)),((h=g)==null?void 0:h.indexOf("avc1"))===0&&(g=u.videoCodec=pMe(g));const{width:b,height:T,unknownCodecs:C}=u;if(a||(a=!!(b&&T)),l||(l=!!g),c||(c=!!m),C!=null&&C.length||m&&!nI(m,"audio",n)||g&&!nI(g,"video",n))return;const{CODECS:R,"FRAME-RATE":P,"HDCP-LEVEL":I,"PATHWAY-ID":F,RESOLUTION:k,"VIDEO-RANGE":q}=p,O=`${`${F||"."}-`}${u.bitrate}-${k}-${P}-${R}-${q}-${I}`;if(s[O])if(s[O].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const $=o[O]+=1;u.attrs["PATHWAY-ID"]=new Array($+1).join(".");const ee=new Hx(u);s[O]=ee,r.push(ee)}else s[O].addGroupId("audio",p.AUDIO),s[O].addGroupId("text",p.SUBTITLES);else{const $=new Hx(u);s[O]=$,o[O]=1,r.push($)}}),this.filterAndSortMediaOptions(r,t,a,l,c)}filterAndSortMediaOptions(e,t,n,r,s){let o=[],a=[],l=e;if((n||r)&&s&&(l=l.filter(({videoCodec:m,videoRange:g,width:b,height:T})=>(!!m||!!(b&&T))&&MMe(g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const m=new Error("no level with compatible codecs found in manifest");this.hls.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:m,reason:m.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:m}=this.hls.config;o=t.audioTracks.filter(g=>!g.audioCodec||nI(g.audioCodec,"audio",m)),TK(o)}t.subtitles&&(a=t.subtitles,TK(a));const c=l.slice(0);l.sort((m,g)=>{if(m.attrs["HDCP-LEVEL"]!==g.attrs["HDCP-LEVEL"])return(m.attrs["HDCP-LEVEL"]||"")>(g.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&m.height!==g.height)return m.height-g.height;if(m.frameRate!==g.frameRate)return m.frameRate-g.frameRate;if(m.videoRange!==g.videoRange)return ZD.indexOf(m.videoRange)-ZD.indexOf(g.videoRange);if(m.videoCodec!==g.videoCodec){const b=PW(m.videoCodec),T=PW(g.videoCodec);if(b!==T)return T-b}if(m.uri===g.uri&&m.codecSet!==g.codecSet){const b=XD(m.codecSet),T=XD(g.codecSet);if(b!==T)return T-b}return m.averageBitrate!==g.averageBitrate?m.averageBitrate-g.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let m=0;m<c.length;m++)if(c[m].pathwayId===l[0].pathwayId){u=c[m];break}}this._levels=l;for(let m=0;m<l.length;m++)if(l[m]===u){var f;this._firstLevel=m;const g=u.bitrate,b=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${g}`),((f=this.hls.userConfig)==null?void 0:f.abrEwmaDefaultEstimate)===void 0){const T=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);T>b&&b===vre.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=T)}break}const h=s&&!r,p={levels:l,audioTracks:o,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:r,altAudio:!h&&o.some(m=>!!m.url)};this.hls.trigger(pe.MANIFEST_PARSED,p),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),f=e<0;if(this.hls.trigger(pe.ERROR,{type:vi.OTHER_ERROR,details:St.LEVEL_SWITCH_ERROR,level:e,fatal:f,error:u,reason:u.message}),f)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,o=t[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&o.details&&r&&s===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${n}${s?" with Pathway "+s:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(pe.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,r==null?void 0:r.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Rr.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===ui.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:s}=t,o=this._levels[r];if(!o){var a;this.warn(`Invalid level index ${r}`),(a=t.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}r===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(r,t,o.details)):(n=t.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let r=n.uri;if(e)try{r=e.addDirectives(r)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const s=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${r}`),this.clearTimer(),this.hls.trigger(pe.LEVEL_LOADING,{url:r,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter((r,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(o=>o.level=-1)),!1));Tie(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(pe.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(pe.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function TK(i){const e={};i.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}class yRe{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=St.KEY_LOAD_ERROR,n,r,s){return new Em({type:vi.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:n,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:r}=e;for(let s=0;s<t.length;s++){const o=t[s];if(r<=o.cc&&(n==="initSegment"||o.sn==="initSegment"||n<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,St.KEY_LOAD_ERROR,c))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,St.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((n=a)!=null&&n.decryptdata.key)return s.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((r=a)!=null&&r.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,St.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(n);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=n.loader,s=new r(n);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},f={onSuccess:(h,p,m,g)=>{const{frag:b,keyInfo:T,url:C}=m;if(!b.decryptdata||T!==this.keyUriToKeyInfo[C])return a(this.createKeyLoadError(b,St.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));T.decryptdata.key=b.decryptdata.key=new Uint8Array(h.data),b.keyLoader=null,T.loader=null,o({frag:b,keyInfo:T})},onError:(h,p,m,g)=>{this.resetLoader(p),a(this.createKeyLoadError(t,St.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),m,El({url:l.url,data:void 0},h)))},onTimeout:(h,p,m)=>{this.resetLoader(p),a(this.createKeyLoadError(t,St.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,p,m)=>{this.resetLoader(p),a(this.createKeyLoadError(t,St.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(l,u,f)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,s=n.loader;t.keyLoader===s&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}function xre(){return self.SourceBuffer||self.WebKitSourceBuffer}function oG(){if(!Zy())return!1;const e=xre();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function bre(){if(!oG())return!1;const i=Zy();return typeof(i==null?void 0:i.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>i.isTypeSupported(yM(e,"video")))||["mp4a.40.2","fLaC"].some(e=>i.isTypeSupported(yM(e,"audio"))))}function vRe(){var i;const e=xre();return typeof(e==null||(i=e.prototype)==null?void 0:i.changeType)=="function"}const xRe=250,aD=2,bRe=.1,_Re=.05;class SRe{constructor(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:r,stalled:s}=this;if(r===null)return;const{currentTime:o,seeking:a}=r,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),s!==null){if(this.stallReported){const b=self.performance.now()-s;st.warn(`playback not stuck anymore @${o}, after ${Math.round(b)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(r.paused&&!a||r.ended||r.playbackRate===0||!ks.getBuffered(r).length){this.nudgeRetry=0;return}const u=ks.bufferInfo(r,o,0),f=u.nextStart||0;if(a){const b=u.len>aD,T=!f||t&&t.start<=o||f-o>aD&&!this.fragmentTracker.getPartialFragment(o);if(b||T)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(u.len>0)&&!f)return;const T=Math.max(f,u.start||0)-o,C=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,P=(C==null||(h=C.details)==null?void 0:h.live)?C.details.targetduration*2:aD,I=this.fragmentTracker.getPartialFragment(o);if(T>0&&(T<=P||I)){r.paused||this._trySkipBufferHole(I);return}}const p=self.performance.now();if(s===null){this.stalled=p;return}const m=p-s;if(!a&&m>=xRe&&(this._reportStall(u),!this.media))return;const g=ks.bufferInfo(r,o,n.maxBufferHole);this._tryFixBufferStall(g,m)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:r,media:s}=this;if(s===null)return;const o=s.currentTime,a=r.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-o<n.maxBufferHole)&&t>n.highBufferWatchdogPeriod*1e3&&(st.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:r}=this;if(!r&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);st.warn(s.message),t.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:r}=this;if(r===null)return 0;const s=r.currentTime,o=ks.bufferInfo(r,s,0),a=s<o.start?o.start:o.nextStart;if(a){const l=o.len<=t.maxBufferHole,c=o.len>0&&o.len<1&&r.readyState<3,u=a-s;if(u>0&&(l||c)){if(u>t.maxBufferHole){const{fragmentTracker:h}=this;let p=!1;if(s===0){const m=h.getAppendedFrag(0,ui.MAIN);m&&a<m.end&&(p=!0)}if(!p){const m=e||h.getAppendedFrag(s,ui.MAIN);if(m){let g=!1,b=m.end;for(;b<a;){const T=h.getPartialFragment(b);if(T)b+=T.duration;else{g=!0;break}}if(g)return 0}}}const f=Math.max(a+_Re,s+bRe);if(st.warn(`skipping hole, adjusting currentTime from ${s} to ${f}`),this.moved=!0,this.stalled=null,r.currentTime=f,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${f}`);n.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return f}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:r}=this;if(n===null)return;const s=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=s+(r+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${s} to ${o}`);st.warn(a.message),n.currentTime=o,t.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);st.error(o.message),t.trigger(pe.ERROR,{type:vi.MEDIA_ERROR,details:St.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const TRe=100;class ERe extends GP{constructor(e,t,n){super(e,t,n,"[stream-controller]",ui.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.on(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.on(pe.LEVEL_LOADING,this.onLevelLoading,this),e.on(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.on(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(pe.ERROR,this.onError,this),e.on(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(pe.BUFFER_CREATED,this.onBufferCreated,this),e.on(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(pe.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(pe.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(pe.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(pe.MANIFEST_LOADING,this.onManifestLoading,this),e.off(pe.MANIFEST_PARSED,this.onManifestParsed,this),e.off(pe.LEVEL_LOADED,this.onLevelLoaded,this),e.off(pe.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(pe.ERROR,this.onError,this),e.off(pe.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(pe.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(pe.BUFFER_CREATED,this.onBufferCreated,this),e.off(pe.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(pe.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(pe.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(TRe),this.level=-1,!this.startFragRequested){let r=n.startLevel;r===-1&&(n.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=n.firstAutoLevel),n.nextLoadLevel=r,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=Yt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Yt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Yt.WAITING_LEVEL:{const{levels:t,level:n}=this,r=t==null?void 0:t[n],s=r==null?void 0:r.details;if(s&&(!s.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(s))break;this.state=Yt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Yt.IDLE;break}break}case Yt.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:r,level:s}=this,o=r==null?void 0:r[s];this.resetStartWhenNotLoaded(o||null),this.state=Yt.IDLE}}break}this.state===Yt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(t===null||!r&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const o=n[s],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const g={};this.altAudio&&(g.type="video"),this.hls.trigger(pe.BUFFER_EOS,g),this.state=Yt.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=o.details;if(!c||this.state===Yt.WAITING_LEVEL||c.live&&this.levelLastLoaded!==o){this.level=s,this.state=Yt.WAITING_LEVEL;return}const u=a.len,f=this.getMaxBufferLength(o.maxBitrate);if(u>=f)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:a.end;let p=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&p.sn!=="initSegment"&&this.fragmentTracker.getState(p)!==bl.OK){var m;const b=((m=this.backtrackFragment)!=null?m:p).sn-c.startSN,T=c.fragments[b-1];T&&p.cc===T.cc&&(p=T,this.fragmentTracker.removeFragment(T))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const b=this.audioOnly&&!this.altAudio?hs.AUDIO:hs.VIDEO,T=(b===hs.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,b,ui.MAIN)}p=this.getNextFragmentLoopLoading(p,c,a,ui.MAIN,f)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,o,h))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===bl.NOT_LOADED||r===bl.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ui.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!t.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;const o=this.getBufferedFrag(t.currentTime+n);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Yt.KEY_LOADING:case Yt.FRAG_LOADING:case Yt.FRAG_LOADING_WAITING_RETRY:case Yt.PARSING:case Yt.PARSED:this.state=Yt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new SRe(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Pn(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(pe.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,r=!1;t.levels.forEach(s=>{const o=s.audioCodec;o&&(n=n||o.indexOf("mp4a.40.2")!==-1,r=r||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&r&&!vRe(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Yt.IDLE)return;const r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=Yt.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:r}=this,s=t.level,o=t.details,a=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=r[s],c=this.fragCurrent;c&&(this.state===Yt.FRAG_LOADING||this.state===Yt.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(o.live||(n=l.details)!=null&&n.live){var f;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,l.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(pe.LEVEL_UPDATED,{details:o,level:s}),this.state===Yt.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Yt.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:r,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const a=o[n.level],l=a.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,f=(t=n.initSegment)==null?void 0:t.data,h=this._getAudioCodec(a),p=this.transmuxer=this.transmuxer||new jie(this.hls,ui.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,g=m!==-1,b=new kP(n.level,n.sn,n.stats.chunkCount,s.byteLength,m,g),T=this.initPTS[n.cc];p.push(s,f,h,c,n,r,l.totalduration,u,b,T)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;n&&(s.trigger(pe.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(pe.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,r=!!this.hls.audioTracks[n].url;if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,s,o=!1;for(const a in n){const l=n[a];if(l.id==="main"){if(s=a,r=l,a==="video"){const c=n[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n&&n.type!==ui.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Yt.PARSED&&(this.state=Yt.IDLE);return}const s=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}onError(e,t){var n;if(t.fatal){this.state=Yt.ERROR;return}switch(t.details){case St.FRAG_GAP:case St.FRAG_PARSING_ERROR:case St.FRAG_DECRYPT_ERROR:case St.FRAG_LOAD_ERROR:case St.FRAG_LOAD_TIMEOUT:case St.KEY_LOAD_ERROR:case St.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ui.MAIN,t);break;case St.LEVEL_LOAD_ERROR:case St.LEVEL_LOAD_TIMEOUT:case St.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Yt.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Rr.LEVEL&&(this.state=Yt.IDLE);break;case St.BUFFER_APPEND_ERROR:case St.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===St.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case St.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!ks.getBuffered(e).length){const n=this.state!==Yt.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=Yt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==hs.AUDIO||this.audioOnly&&!this.altAudio){const n=(t===hs.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,t,ui.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const r=ks.getBuffered(e),o=(r.length?r.start(0):0)-n;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),n+=o,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:r}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=Yt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),r.trigger(pe.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n="main",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{video:f,text:h,id3:p,initSegment:m}=s,{details:g}=u,b=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=Yt.PARSING,m){if(m!=null&&m.tracks){const R=l.initSegment||l;this._bufferInitSegment(u,m.tracks,R,o),r.trigger(pe.FRAG_PARSING_INIT_SEGMENT,{frag:R,id:n,tracks:m.tracks})}const T=m.initPTS,C=m.timescale;Pn(T)&&(this.initPTS[l.cc]={baseTime:T,timescale:C},r.trigger(pe.INIT_PTS_FOUND,{frag:l,id:n,initPTS:T,timescale:C}))}if(f&&g&&l.sn!=="initSegment"){const T=g.fragments[l.sn-1-g.startSN],C=l.sn===g.startSN,R=!T||l.cc>T.cc;if(s.independent!==!1){const{startPTS:P,endPTS:I,startDTS:F,endDTS:k}=f;if(c)c.elementaryStreams[f.type]={startPTS:P,endPTS:I,startDTS:F,endDTS:k};else if(f.firstKeyFrame&&f.independent&&o.id===1&&!R&&(this.couldBacktrack=!0),f.dropped&&f.independent){const q=this.getMainFwdBufferInfo(),H=(q?q.end:this.getLoadPosition())+this.config.maxBufferHole,O=f.firstKeyFramePTS?f.firstKeyFramePTS:P;if(!C&&H<O-this.config.maxBufferHole&&!R){this.backtrack(l);return}else R&&(l.gap=!0);l.setElementaryStreamInfo(f.type,l.start,I,l.start,k,!0)}else C&&P>aD&&(l.gap=!0);l.setElementaryStreamInfo(f.type,P,I,F,k),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(f,l,c,o,C||R)}else if(C||R)l.gap=!0;else{this.backtrack(l);return}}if(b){const{startPTS:T,endPTS:C,startDTS:R,endDTS:P}=b;c&&(c.elementaryStreams[hs.AUDIO]={startPTS:T,endPTS:C,startDTS:R,endDTS:P}),l.setElementaryStreamInfo(hs.AUDIO,T,C,R,P),this.bufferFragmentData(b,l,c,o)}if(g&&p!=null&&(t=p.samples)!=null&&t.length){const T={id:n,frag:l,details:g,samples:p.samples};r.trigger(pe.FRAG_PARSING_METADATA,T)}if(g&&h){const T={id:n,frag:l,details:g,samples:h.samples};r.trigger(pe.FRAG_PARSING_USERDATA,T)}}_bufferInitSegment(e,t,n,r){if(this.state!==Yt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:o,audiovideo:a}=t;if(s){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const u=s.metadata;u&&"channelCount"in u&&(u.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(pe.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const u=t[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(pe.BUFFER_APPENDING,{type:l,data:u,frag:n,part:null,chunkMeta:r,parent:n.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ui.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Yt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(ks.isBuffered(e,n)?t=this.getAppendedFrag(n):ks.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,s=t.level;(!r||t.sn!==r.sn||r.level!==s)&&(this.fragPlaying=t,this.hls.trigger(pe.FRAG_CHANGED,{frag:t}),(!r||r.level!==s)&&this.hls.trigger(pe.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&Pn(t)&&Pn(n.programDateTime)){const r=n.programDateTime+(t-n.start)*1e3;return new Date(r)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class By{static get version(){return"1.5.20"}static isMSESupported(){return oG()}static isSupported(){return bre()}static getMediaSource(){return Zy()}static get Events(){return pe}static get ErrorTypes(){return vi}static get ErrorDetails(){return St}static get DefaultConfig(){return By.defaultConfig?By.defaultConfig:vre}static set DefaultConfig(e){By.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new nG,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,Mwe(e.debug||!1,"Hls instance");const t=this.config=ARe(By.DefaultConfig,e);this.userConfig=e,t.progressive&&mRe(t);const{abrController:n,bufferController:r,capLevelController:s,errorController:o,fpsController:a}=t,l=new o(this),c=this.abrController=new n(this),u=this.bufferController=new r(this),f=this.capLevelController=new s(this),h=new a(this),p=new vMe(this),m=new TMe(this),g=t.contentSteeringController,b=g?new g(this):null,T=this.levelController=new gRe(this,b),C=new QMe(this),R=new yRe(this.config),P=this.streamController=new ERe(this,C,R);f.setStreamController(P),h.setStreamController(P);const I=[p,T,P];b&&I.splice(1,0,b),this.networkControllers=I;const F=[c,u,f,h,m,C];this.audioTrackController=this.createController(t.audioTrackController,I);const k=t.audioStreamController;k&&I.push(new k(this,C,R)),this.subtitleTrackController=this.createController(t.subtitleTrackController,I);const q=t.subtitleStreamController;q&&I.push(new q(this,C,R)),this.createController(t.timelineController,F),R.emeController=this.emeController=this.createController(t.emeController,F),this.cmcdController=this.createController(t.cmcdController,F),this.latencyController=this.createController(EMe,F),this.coreComponents=F,I.push(l);const H=l.onErrorOut;typeof H=="function"&&this.on(pe.ERROR,H,l)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(st.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const r=e===pe.ERROR;this.trigger(pe.ERROR,{type:vi.OTHER_ERROR,details:St.INTERNAL_EXCEPTION,fatal:r,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){st.log("destroy"),this.trigger(pe.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){st.log("attachMedia"),this._media=e,this.trigger(pe.MEDIA_ATTACHING,{media:e})}detachMedia(){st.log("detachMedia"),this.trigger(pe.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,r=this.url=q9.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,st.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(pe.MANIFEST_LOADING,{url:e})}startLoad(e=-1){st.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){st.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){st.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){st.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){st.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){st.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){st.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){st.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){st.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){st.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){st.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(st.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){wMe(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,n)for(let s=r;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=n)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}By.defaultConfig=void 0;const wRe=Object.freeze(Object.defineProperty({__proto__:null,AbrController:Cie,AttrList:lo,AudioStreamController:Wie,AudioTrackController:Yie,BasePlaylistController:UP,BaseSegment:j9,BaseStreamController:GP,BufferController:Zie,CMCDController:Are,CapLevelController:zP,ChunkMetadata:kP,ContentSteeringController:mre,DateRange:$9,EMEController:ox,ErrorActionFlags:Yh,ErrorController:wie,ErrorDetails:St,ErrorTypes:vi,Events:pe,FPSController:cre,Fragment:eD,Hls:By,HlsSkip:kw,HlsUrlParameters:QF,KeySystemFormats:iu,KeySystems:jr,Level:Hx,LevelDetails:rie,LevelKey:yS,LoadStats:L3,MetadataSchema:od,NetworkErrorAction:Ya,Part:iie,PlaylistLevelType:ui,SubtitleStreamController:Xie,SubtitleTrackController:Qie,TimelineController:are,default:By,getMediaSource:Zy,isMSESupported:oG,isSupported:bre},Symbol.toStringTag,{value:"Module"})),MRe=((i,e)=>typeof window<"u"&&typeof((i=window.document)==null?void 0:i.createElement)=="function"&&typeof((e=window.navigator)==null?void 0:e.userAgent)=="string")();let yI=null;async function CRe(...i){var e;(e=yI)!==null&&e!==void 0||(yI=await ywe(()=>Promise.resolve().then(()=>wRe),void 0));const t=yI.default;return t.isSupported()?new t(...i):null}function RRe(i,{unsuspend:e="loadedmetadata",start:t=!0,hls:n={},crossOrigin:r="anonymous",muted:s=!0,loop:o=!0,playsInline:a=!0,onVideoFrame:l,...c}={}){const u=Ac(m=>m.gl),f=X.useRef(null),h=sne(()=>new Promise(async m=>{let g,b;typeof i=="string"?g=i:b=i;const T=Object.assign(document.createElement("video"),{src:g,srcObject:b,crossOrigin:r,loop:o,muted:s,playsInline:a,...c});if(g&&MRe&&g.endsWith(".m3u8")){const R=f.current=await CRe(n);R&&(R.on(pe.MEDIA_ATTACHED,()=>void R.loadSource(g)),R.attachMedia(T))}const C=new i9(T);C.colorSpace=u.outputColorSpace,T.addEventListener(e,()=>m(C))}),[i]),p=h.source.data;return DRe(p,l),X.useEffect(()=>(t&&h.image.play(),()=>{f.current&&(f.current.destroy(),f.current=null)}),[h,t]),h}const DRe=(i,e)=>{X.useEffect(()=>{if(!e||!i.requestVideoFrameCallback)return;let t;const n=(...r)=>{e(...r),t=i.requestVideoFrameCallback(n)};return i.requestVideoFrameCallback(n),()=>i.cancelVideoFrameCallback(t)},[i,e])};function _re(i,e){const t=X.useRef(null),[n]=X.useState(()=>e?e instanceof Vi?{current:e}:e:t),[r]=X.useState(()=>new N9(void 0));X.useLayoutEffect(()=>{e&&(n.current=e instanceof Vi?e:e.current),r._root=n.current});const s=X.useRef({}),o=X.useMemo(()=>{const a={};return i.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(n.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,n.current))},configurable:!0})),{ref:n,clips:i,actions:a,names:i.map(l=>l.name),mixer:r}},[i]);return w3((a,l)=>r.update(l)),X.useEffect(()=>{const a=n.current;return()=>{s.current={},r.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&r.uncacheAction(l,a)})}},[i]),o}const LRe=X.forwardRef(function({children:e,disable:t,disableX:n,disableY:r,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:f,onCentered:h,precise:p=!0,cacheKey:m=0,...g},b){const T=X.useRef(null),C=X.useRef(null),R=X.useRef(null);return X.useLayoutEffect(()=>{C.current.matrixWorld.identity();const P=new ma().setFromObject(R.current,p),I=new he,F=new Ua,k=P.max.x-P.min.x,q=P.max.y-P.min.y,H=P.max.z-P.min.z;P.getCenter(I),P.getBoundingSphere(F);const O=l?q/2:c?-q/2:0,$=o?-k/2:a?k/2:0,ee=u?H/2:f?-H/2:0;C.current.position.set(t||n?0:-I.x+$,t||r?0:-I.y+O,t||s?0:-I.z+ee),typeof h<"u"&&h({parent:T.current.parent,container:T.current,width:k,height:q,depth:H,boundingBox:P,boundingSphere:F,center:I,verticalAlignment:O,horizontalAlignment:$,depthAlignment:ee})},[m,h,l,o,u,t,n,r,s,p,a,c,f]),X.useImperativeHandle(b,()=>T.current,[]),X.createElement("group",ar({ref:T},g),X.createElement("group",{ref:C},X.createElement("group",{ref:R},e)))});function aG(){const{progress:i}=mSe();return ce.jsxs(hSe,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[ce.jsx("span",{className:"canvas-loader"}),ce.jsx("p",{style:{fontSize:"14px",color:"#F1F1F1",fontWeight:400,marginTop:40},children:i!==0?`${i.toFixed(2)}%`:"Loading..."})]})}const PRe=i=>{const{nodes:e,materials:t}=Up("src/public/models/hacker-room.glb"),n=WD("src/public/textures/desk/monitor.png"),r=WD("src/public/textures/desk/screen.png");return ce.jsxs("group",{...i,dispose:null,children:[ce.jsx("mesh",{geometry:e.screen_screens_0.geometry,material:t.screens,children:ce.jsx("meshMatcapMaterial",{map:r})}),ce.jsx("mesh",{geometry:e.screen_glass_glass_0.geometry,material:t.glass}),ce.jsx("mesh",{geometry:e.table_table_mat_0_1.geometry,material:t.table_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_2.geometry,material:t.computer_mat,children:ce.jsx("meshMatcapMaterial",{map:n})}),ce.jsx("mesh",{geometry:e.table_table_mat_0_3.geometry,material:t.server_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_4.geometry,material:t.vhsPlayer_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_5.geometry,material:t.stand_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_6.geometry,material:t.mat_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_7.geometry,material:t.arm_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_8.geometry,material:t.tv_mat,children:ce.jsx("meshMatcapMaterial",{map:n})}),ce.jsx("mesh",{geometry:e.table_table_mat_0_9.geometry,material:t.cables_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_10.geometry,material:t.props_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_11.geometry,material:t.ground_mat}),ce.jsx("mesh",{geometry:e.table_table_mat_0_12.geometry,material:t.key_mat})]})};Up.preload("src/public/models/hacker-room.glb");var P3=Vee();const Aw=Ag(P3);function NRe(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function BRe(...i){return e=>i.forEach(t=>NRe(t,e))}const Sre=X.forwardRef((i,e)=>{const{children:t,...n}=i,r=X.Children.toArray(t),s=r.find(ORe);if(s){const o=s.props.children,a=r.map(l=>l===s?X.Children.count(o)>1?X.Children.only(null):X.isValidElement(o)?o.props.children:null:l);return X.createElement(aU,ar({},n,{ref:e}),X.isValidElement(o)?X.cloneElement(o,void 0,a):null)}return X.createElement(aU,ar({},n,{ref:e}),t)});Sre.displayName="Slot";const aU=X.forwardRef((i,e)=>{const{children:t,...n}=i;return X.isValidElement(t)?X.cloneElement(t,{...FRe(n,t.props),ref:BRe(e,t.ref)}):X.Children.count(t)>1?X.Children.only(null):null});aU.displayName="SlotClone";const IRe=({children:i})=>X.createElement(X.Fragment,null,i);function ORe(i){return X.isValidElement(i)&&i.type===IRe}function FRe(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{s(...a),r(...a)}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}const URe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kRe=URe.reduce((i,e)=>{const t=X.forwardRef((n,r)=>{const{asChild:s,...o}=n,a=s?Sre:e;return X.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),X.createElement(a,ar({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{}),GRe=X.forwardRef((i,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=i;return n?Aw.createPortal(X.createElement(kRe.div,ar({},r,{ref:e})),n):null}),zRe=GRe;var EK=Object.prototype.hasOwnProperty;function sL(i,e){var t,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&sL(i[n],e[n]););return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(EK.call(i,t)&&++n&&!EK.call(e,t)||!(t in e)||!sL(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function Tre(i,e){if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(i[t[n]],e[t[n]]))return!1;return!0}var HP=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};HP.prototype._test=function(e){var t=this.fn;try{R2(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return R2(this.modifiers.slice(),t,this)(e)}catch{return!1}};HP.prototype._check=function(e){try{R2(this.modifiers.slice(),this.fn,this)(e)}catch{if(R2(this.modifiers.slice(),function(n){return n},this)(!1))return}if(!R2(this.modifiers.slice(),this.fn,this)(e))throw null};HP.prototype._testAsync=function(e){var t=this;return new Promise(function(n,r){wre(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?n(e):r(null)}).catch(function(s){return r(s)})})};function Ere(i,e){return e===void 0&&(e="simple"),typeof i=="object"?i[e]:i}function R2(i,e,t){if(i.length){var n=i.shift(),r=R2(i,e,t);return n.perform(r,t)}else return Ere(e)}function wre(i,e,t){if(i.length){var n=i.shift(),r=wre(i,e,t);return n.performAsync(r,t)}else return function(s){return Promise.resolve(Ere(e,"async")(s))}}var HRe=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},lG=function(i){function e(t,n,r,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];i.call(this,o),i.captureStackTrace&&i.captureStackTrace(this,e),this.rule=t,this.value=n,this.cause=r,this.target=s}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e}(Error),fA=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};fA.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return n.chain.push(new HP(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}};fA.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new HRe(t,e.simple,e.async)),this};fA.prototype._clone=function(){return new fA(this.chain.slice(),this.nextRuleModifiers.slice())};fA.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};fA.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(r){t.push(new lG(n,e,r))}}),t};fA.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new lG(t,e,n)}})};fA.prototype.testAsync=function(e){var t=this;return new Promise(function(n,r){Mre(e,t.chain.slice(),n,r)})};function Mre(i,e,t,n){if(e.length){var r=e.shift();r._testAsync(i).then(function(){Mre(i,e,t,n)},function(s){n(new lG(r,i,s))})}else t(i)}var wK=function(i,e){return e&&typeof i=="string"&&i.trim().length===0?!0:i==null};function VRe(i,e){return e===void 0&&(e=!1),{simple:function(t){return wK(t,e)||i.check(t)===void 0},async:function(t){return wK(t,e)||i.testAsync(t)}}}function Qu(){return typeof Proxy<"u"?Cre(new fA):lU(new fA)}var xM={};Qu.extend=function(i){Object.assign(xM,i)};Qu.clearCustomRules=function(){xM={}};function Cre(i){return new Proxy(i,{get:function(t,n){if(n in t)return t[n];var r=Cre(i._clone());if(n in oL)return r._applyModifier(oL[n],n);if(n in xM)return r._applyRule(xM[n],n);if(n in cU)return r._applyRule(cU[n],n)}})}function lU(i){var e=function(r,s){return Object.keys(r).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=lU(s._clone()),u=c._applyRule(r[o],o).apply(void 0,a);return u}}),s},t=e(cU,i),n=e(xM,t);return Object.keys(oL).forEach(function(r){Object.defineProperty(n,r,{get:function(){var s=lU(n._clone());return s._applyModifier(oL[r],r)}})}),n}var oL={not:{simple:function(i){return function(e){return!i(e)}},async:function(i){return function(e){return Promise.resolve(i(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(i){return function(e){return O5(e).some(function(t){try{return i(t)}catch{return!1}})}},async:function(i){return function(e){return Promise.all(O5(e).map(function(t){try{return i(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(i){return function(e){return e!==!1&&O5(e).every(i)}},async:function(i){return function(e){return Promise.all(O5(e).map(i)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(i,e){return function(t){return MK(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i(t):i(t)}},async:function(i,e){return function(t){return Promise.resolve(i(t)).then(function(n){return MK(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n:n}).catch(function(){return!1})}}}};function MK(i){return i&&i.name==="schema"&&i.args.length>0&&typeof i.args[0]=="object"}function O5(i){return typeof i=="string"?i.split(""):i}var cU={equal:function(i){return function(e){return e==i}},exact:function(i){return function(e){return e===i}},number:function(i){return i===void 0&&(i=!0),function(e){return typeof e=="number"&&(i||isFinite(e))}},integer:function(){return function(i){var e=Number.isInteger||qRe;return e(i)}},numeric:function(){return function(i){return!isNaN(parseFloat(i))&&isFinite(i)}},string:function(){return P_("string")},boolean:function(){return P_("boolean")},undefined:function(){return P_("undefined")},null:function(){return P_("null")},array:function(){return P_("array")},object:function(){return P_("object")},instanceOf:function(i){return function(e){return e instanceof i}},pattern:function(i){return function(e){return i.test(e)}},lowercase:function(){return function(i){return typeof i=="boolean"||i===i.toLowerCase()&&i.trim()!==""}},uppercase:function(){return function(i){return i===i.toUpperCase()&&i.trim()!==""}},vowel:function(){return function(i){return/^[aeiou]+$/i.test(i)}},consonant:function(){return function(i){return/^(?=[^aeiou])([a-z]+)$/i.test(i)}},first:function(i){return function(e){return e[0]==i}},last:function(i){return function(e){return e[e.length-1]==i}},empty:function(){return function(i){return i.length===0}},length:function(i,e){return function(t){return t.length>=i&&t.length<=(e||i)}},minLength:function(i){return function(e){return e.length>=i}},maxLength:function(i){return function(e){return e.length<=i}},negative:function(){return function(i){return i<0}},positive:function(){return function(i){return i>=0}},between:function(i,e){return function(t){return t>=i&&t<=e}},range:function(i,e){return function(t){return t>=i&&t<=e}},lessThan:function(i){return function(e){return e<i}},lessThanOrEqual:function(i){return function(e){return e<=i}},greaterThan:function(i){return function(e){return e>i}},greaterThanOrEqual:function(i){return function(e){return e>=i}},even:function(){return function(i){return i%2===0}},odd:function(){return function(i){return i%2!==0}},includes:function(i){return function(e){return~e.indexOf(i)}},schema:function(i){return $Re(i)},passesAnyOf:function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];return function(t){return i.some(function(n){return n.test(t)})}},optional:VRe};function P_(i){return function(e){return Array.isArray(e)&&i==="array"||e===null&&i==="null"||typeof e===i}}function qRe(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i}function $Re(i){return{simple:function(e){var t=[];if(Object.keys(i).forEach(function(n){var r=i[n];try{r.check((e||{})[n])}catch(s){s.target=n,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],n=Object.keys(i).map(function(r){var s=i[r];return s.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(n).then(function(){if(t.length>0)throw t;return!0})}}}var vs="colors",Yc="sizes",Bn="space",jRe={gap:Bn,gridGap:Bn,columnGap:Bn,gridColumnGap:Bn,rowGap:Bn,gridRowGap:Bn,inset:Bn,insetBlock:Bn,insetBlockEnd:Bn,insetBlockStart:Bn,insetInline:Bn,insetInlineEnd:Bn,insetInlineStart:Bn,margin:Bn,marginTop:Bn,marginRight:Bn,marginBottom:Bn,marginLeft:Bn,marginBlock:Bn,marginBlockEnd:Bn,marginBlockStart:Bn,marginInline:Bn,marginInlineEnd:Bn,marginInlineStart:Bn,padding:Bn,paddingTop:Bn,paddingRight:Bn,paddingBottom:Bn,paddingLeft:Bn,paddingBlock:Bn,paddingBlockEnd:Bn,paddingBlockStart:Bn,paddingInline:Bn,paddingInlineEnd:Bn,paddingInlineStart:Bn,top:Bn,right:Bn,bottom:Bn,left:Bn,scrollMargin:Bn,scrollMarginTop:Bn,scrollMarginRight:Bn,scrollMarginBottom:Bn,scrollMarginLeft:Bn,scrollMarginX:Bn,scrollMarginY:Bn,scrollMarginBlock:Bn,scrollMarginBlockEnd:Bn,scrollMarginBlockStart:Bn,scrollMarginInline:Bn,scrollMarginInlineEnd:Bn,scrollMarginInlineStart:Bn,scrollPadding:Bn,scrollPaddingTop:Bn,scrollPaddingRight:Bn,scrollPaddingBottom:Bn,scrollPaddingLeft:Bn,scrollPaddingX:Bn,scrollPaddingY:Bn,scrollPaddingBlock:Bn,scrollPaddingBlockEnd:Bn,scrollPaddingBlockStart:Bn,scrollPaddingInline:Bn,scrollPaddingInlineEnd:Bn,scrollPaddingInlineStart:Bn,fontSize:"fontSizes",background:vs,backgroundColor:vs,backgroundImage:vs,borderImage:vs,border:vs,borderBlock:vs,borderBlockEnd:vs,borderBlockStart:vs,borderBottom:vs,borderBottomColor:vs,borderColor:vs,borderInline:vs,borderInlineEnd:vs,borderInlineStart:vs,borderLeft:vs,borderLeftColor:vs,borderRight:vs,borderRightColor:vs,borderTop:vs,borderTopColor:vs,caretColor:vs,color:vs,columnRuleColor:vs,fill:vs,outline:vs,outlineColor:vs,stroke:vs,textDecorationColor:vs,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Yc,minBlockSize:Yc,maxBlockSize:Yc,inlineSize:Yc,minInlineSize:Yc,maxInlineSize:Yc,width:Yc,minWidth:Yc,maxWidth:Yc,height:Yc,minHeight:Yc,maxHeight:Yc,flexBasis:Yc,gridTemplateColumns:Yc,gridTemplateRows:Yc,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},WRe=(i,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,uT=()=>{const i=Object.create(null);return(e,t,...n)=>{const r=(s=>JSON.stringify(s,WRe))(e);return r in i?i[r]:i[r]=t(e,...n)}},ax=Symbol.for("sxs.internal"),cG=(i,e)=>Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),CK=i=>{for(const e in i)return!0;return!1},{hasOwnProperty:KRe}=Object.prototype,uU=i=>i.includes("-")?i:i.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),YRe=/\s+(?![^()]*\))/,N_=i=>e=>i(...typeof e=="string"?String(e).split(YRe):[e]),RK={appearance:i=>({WebkitAppearance:i,appearance:i}),backfaceVisibility:i=>({WebkitBackfaceVisibility:i,backfaceVisibility:i}),backdropFilter:i=>({WebkitBackdropFilter:i,backdropFilter:i}),backgroundClip:i=>({WebkitBackgroundClip:i,backgroundClip:i}),boxDecorationBreak:i=>({WebkitBoxDecorationBreak:i,boxDecorationBreak:i}),clipPath:i=>({WebkitClipPath:i,clipPath:i}),content:i=>({content:i.includes('"')||i.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(i)?i:`"${i}"`}),hyphens:i=>({WebkitHyphens:i,hyphens:i}),maskImage:i=>({WebkitMaskImage:i,maskImage:i}),maskSize:i=>({WebkitMaskSize:i,maskSize:i}),tabSize:i=>({MozTabSize:i,tabSize:i}),textSizeAdjust:i=>({WebkitTextSizeAdjust:i,textSizeAdjust:i}),userSelect:i=>({WebkitUserSelect:i,userSelect:i}),marginBlock:N_((i,e)=>({marginBlockStart:i,marginBlockEnd:e||i})),marginInline:N_((i,e)=>({marginInlineStart:i,marginInlineEnd:e||i})),maxSize:N_((i,e)=>({maxBlockSize:i,maxInlineSize:e||i})),minSize:N_((i,e)=>({minBlockSize:i,minInlineSize:e||i})),paddingBlock:N_((i,e)=>({paddingBlockStart:i,paddingBlockEnd:e||i})),paddingInline:N_((i,e)=>({paddingInlineStart:i,paddingInlineEnd:e||i}))},vI=/([\d.]+)([^]*)/,XRe=(i,e)=>i.length?i.reduce((t,n)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(r)?`:is(${n})`:n):n+" "+r)),t),[]):e,QRe=(i,e)=>i in ZRe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,r,s)=>n+(r==="stretch"?`-moz-available${s};${uU(i)}:${n}-webkit-fill-available`:`-moz-fit-content${s};${uU(i)}:${n}fit-content`)+s):String(e),ZRe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ig=i=>i?i+"-":"",Rre=(i,e,t)=>i.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,r,s,o,a)=>o=="$"==!!s?n:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?ig(e)+(a.includes("$")?"":ig(t))+a.replace(/\$/g,"-"):a)+")"+(r||o=="--"?"*"+(r||"")+(s||"1")+")":"")),JRe=/\s*,\s*(?![^()]*\))/,e5e=Object.prototype.toString,A2=(i,e,t,n,r)=>{let s,o,a;const l=(c,u,f)=>{let h,p;const m=g=>{for(h in g){const C=h.charCodeAt(0)===64,R=C&&Array.isArray(g[h])?g[h]:[g[h]];for(p of R){const P=/[A-Z]/.test(T=h)?T:T.replace(/-[^]/g,F=>F[1].toUpperCase()),I=typeof p=="object"&&p&&p.toString===e5e&&(!n.utils[P]||!u.length);if(P in n.utils&&!I){const F=n.utils[P];if(F!==o){o=F,m(F(p)),o=null;continue}}else if(P in RK){const F=RK[P];if(F!==a){a=F,m(F(p)),a=null;continue}}if(C&&(b=h.slice(1)in n.media?"@media "+n.media[h.slice(1)]:h,h=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(F,k,q,H,O,$)=>{const ee=vI.test(k),Y=.0625*(ee?-1:1),[oe,re]=ee?[H,k]:[k,H];return"("+(q[0]==="="?"":q[0]===">"===ee?"max-":"min-")+oe+":"+(q[0]!=="="&&q.length===1?re.replace(vI,(Q,se,le)=>Number(se)+Y*(q===">"?1:-1)+le):re)+(O?") and ("+(O[0]===">"?"min-":"max-")+oe+":"+(O.length===1?$.replace(vI,(Q,se,le)=>Number(se)+Y*(O===">"?-1:1)+le):$):"")+")"})),I){const F=C?f.concat(h):[...f],k=C?[...u]:XRe(u,h.split(JRe));s!==void 0&&r(DK(...s)),s=void 0,l(p,k,F)}else s===void 0&&(s=[[],u,f]),h=C||h.charCodeAt(0)!==36?h:`--${ig(n.prefix)}${h.slice(1).replace(/\$/g,"-")}`,p=I?p:typeof p=="number"?p&&P in t5e?String(p)+"px":String(p):Rre(QRe(P,p??""),n.prefix,n.themeMap[P]),s[0].push(`${C?`${h} `:`${uU(h)}:`}${p}`)}}var b,T};m(c),s!==void 0&&r(DK(...s)),s=void 0};l(i,e,t)},DK=(i,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${i.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,t5e={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},LK=i=>String.fromCharCode(i+(i>25?39:97)),lx=i=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=LK(t%52)+n;return LK(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(i))>>>0),mw=["themed","global","styled","onevar","resonevar","allvar","inline"],n5e=i=>{if(i.href&&!i.href.startsWith(location.origin))return!1;try{return!!i.cssRules}catch{return!1}},i5e=i=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(r[o-1]&&(l=r[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},n=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const r=Object(i).styleSheets||[];for(const a of r)if(n5e(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const p=h.slice(14,-3).trim().split(/\s+/),m=mw[p[0]];m&&(e||(e={sheet:a,reset:n,rules:{},toString:t}),e.rules[m]={group:f,index:l,cache:new Set(p)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:i?(i.head||i).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:n,toString:t}}const{sheet:s,rules:o}=e;for(let a=mw.length-1;a>=0;--a){const l=mw[a];if(!o[l]){const c=mw[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}r5e(o[l])}};return n(),e},r5e=i=>{const e=i.group;let t=e.cssRules.length;i.apply=n=>{try{e.insertRule(n,t),++t}catch{}}},BE=Symbol(),s5e=uT(),PK=(i,e)=>s5e(i,()=>(...t)=>{let n={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[ax]){n.type==null&&(n.type=r[ax].type);for(const s of r[ax].composers)n.composers.add(s)}else r.constructor!==Object||r.$$typeof?n.type==null&&(n.type=r):n.composers.add(o5e(r,i));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),a5e(i,n,e)}),o5e=({variants:i,compoundVariants:e,defaultVariants:t,...n},r)=>{const s=`${ig(r.prefix)}c-${lx(n)}`,o=[],a=[],l=Object.create(null),c=[];for(const h in t)l[h]=String(t[h]);if(typeof i=="object"&&i)for(const h in i){u=l,f=h,KRe.call(u,f)||(l[h]="undefined");const p=i[h];for(const m in p){const g={[h]:String(m)};String(m)==="undefined"&&c.push(h);const b=p[m],T=[g,b,!CK(b)];o.push(T)}}var u,f;if(typeof e=="object"&&e)for(const h of e){let{css:p,...m}=h;p=typeof p=="object"&&p||{};for(const b in m)m[b]=String(m[b]);const g=[m,p,!CK(p)];a.push(g)}return[s,n,o,a,l,c]},a5e=(i,e,t)=>{const[n,r,s,o]=l5e(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let p=0;p<h[BE].length;p++){const[m,g]=h[BE][p];f.rules[m].apply(g)}return h[BE]=[],null}return h[BE]=[],h.rules={},mw.forEach(p=>h.rules[p]={apply:m=>h[BE].push([p,m])}),h})(t):null,l=(a||t).rules,c=`.${n}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||c5e;const{css:h,...p}=f,m={};for(const T in s)if(delete p[T],T in f){let C=f[T];typeof C=="object"&&C?m[T]={"@initial":s[T],...C}:(C=String(C),m[T]=C!=="undefined"||o.has(T)?C:s[T])}else m[T]=s[T];const g=new Set([...r]);for(const[T,C,R,P]of e.composers){t.rules.styled.cache.has(T)||(t.rules.styled.cache.add(T),A2(C,[`.${T}`],[],i,k=>{l.styled.apply(k)}));const I=NK(R,m,i.media),F=NK(P,m,i.media,!0);for(const k of I)if(k!==void 0)for(const[q,H,O]of k){const $=`${T}-${lx(H)}-${q}`;g.add($);const ee=(O?t.rules.resonevar:t.rules.onevar).cache,Y=O?l.resonevar:l.onevar;ee.has($)||(ee.add($),A2(H,[`.${$}`],[],i,oe=>{Y.apply(oe)}))}for(const k of F)if(k!==void 0)for(const[q,H]of k){const O=`${T}-${lx(H)}-${q}`;g.add(O),t.rules.allvar.cache.has(O)||(t.rules.allvar.cache.add(O),A2(H,[`.${O}`],[],i,$=>{l.allvar.apply($)}))}}if(typeof h=="object"&&h){const T=`${n}-i${lx(h)}-css`;g.add(T),t.rules.inline.cache.has(T)||(t.rules.inline.cache.add(T),A2(h,[`.${T}`],[],i,C=>{l.inline.apply(C)}))}for(const T of String(f.className||"").trim().split(/\s+/))T&&g.add(T);const b=p.className=[...g].join(" ");return{type:e.type,className:b,selector:c,props:p,toString:()=>b,deferredInjector:a}};return cG(u,{className:n,selector:c,[ax]:e,toString:()=>(t.rules.styled.cache.has(n)||u(),n)})},l5e=i=>{let e="";const t=[],n={},r=[];for(const[s,,,,o,a]of i){e===""&&(e=s),t.push(s),r.push(...a);for(const l in o){const c=o[l];(n[l]===void 0||c!=="undefined"||a.includes(c))&&(n[l]=c)}}return[e,t,n,new Set(r)]},NK=(i,e,t,n)=>{const r=[];e:for(let[s,o,a]of i){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let h=e[l];if(h!==f){if(typeof h!="object"||!h)continue e;{let p,m,g=0;for(const b in h){if(f===String(h[b])){if(b!=="@initial"){const T=b.slice(1);(m=m||[]).push(T in t?t[T]:b.replace(/^@media ?/,"")),u=!0}c+=g,p=!0}++g}if(m&&m.length&&(o={["@media "+m.join(", ")]:o}),!p)continue e}}}(r[c]=r[c]||[]).push([n?"cv":`${l}-${s[l]}`,o,u])}return r},c5e={},u5e=uT(),f5e=(i,e)=>u5e(i,()=>(...t)=>{const n=()=>{for(let r of t){r=typeof r=="object"&&r||{};let s=lx(r);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(r["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete r["@import"]}A2(r,[],[],i,o=>{e.rules.global.apply(o)})}}return""};return cG(n,{toString:n})}),h5e=uT(),d5e=(i,e)=>h5e(i,()=>t=>{const n=`${ig(i.prefix)}k-${lx(t)}`,r=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);const s=[];A2(t,[],[],i,a=>s.push(a));const o=`@keyframes ${n}{${s.join("")}}`;e.rules.global.apply(o)}return n};return cG(r,{get name(){return r()},toString:r})}),p5e=class{constructor(e,t,n,r){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ig(this.prefix)+ig(this.scale)+this.token}toString(){return this.computedValue}},A5e=uT(),m5e=(i,e)=>A5e(i,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);const r=`.${t=(t=typeof t=="string"?t:"")||`${ig(i.prefix)}t-${lx(n)}`}`,s={},o=[];for(const l in n){s[l]={};for(const c in n[l]){const u=`--${ig(i.prefix)}${l}-${c}`,f=Rre(String(n[l][c]),i.prefix,l);s[l][c]=new p5e(c,f,l,i.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${n===i.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:r,toString:a}}),g5e=uT(),y5e=uT(),v5e=i=>{const e=(t=>{let n=!1;const r=g5e(t,s=>{n=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...jRe},utils:typeof s.utils=="object"&&s.utils||{}},f=i5e(l),h={css:PK(u,f),globalCss:f5e(u,f),keyframes:d5e(u,f),createTheme:m5e(u,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(c)),h});return n||r.reset(),r})(i);return e.styled=(({config:t,sheet:n})=>y5e(t,()=>{const r=PK(t,n);return(...s)=>{const o=r(...s),a=o[ax].type,l=Ne.forwardRef((c,u)=>{const f=c&&c.as||a,{props:h,deferredInjector:p}=o(c);return delete h.as,h.ref=u,p?Ne.createElement(Ne.Fragment,null,Ne.createElement(f,h),Ne.createElement(p,null)):Ne.createElement(f,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[ax]=o[ax],l}}))(e),e};function Cm(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i==null||i(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function x5e(i,e){typeof i=="function"?i(e):i!=null&&(i.current=e)}function Dre(...i){return e=>i.forEach(t=>x5e(t,e))}function fT(...i){return X.useCallback(Dre(...i),i)}function Lre(i,e=[]){let t=[];function n(s,o){const a=X.createContext(o),l=t.length;t=[...t,o];function c(f){const{scope:h,children:p,...m}=f,g=(h==null?void 0:h[i][l])||a,b=X.useMemo(()=>m,Object.values(m));return X.createElement(g.Provider,{value:b},p)}function u(f,h){const p=(h==null?void 0:h[i][l])||a,m=X.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const r=()=>{const s=t.map(o=>X.createContext(o));return function(a){const l=(a==null?void 0:a[i])||s;return X.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return r.scopeName=i,[n,b5e(r,...e)]}function b5e(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return X.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}const Pre=X.forwardRef((i,e)=>{const{children:t,...n}=i,r=X.Children.toArray(t),s=r.find(_5e);if(s){const o=s.props.children,a=r.map(l=>l===s?X.Children.count(o)>1?X.Children.only(null):X.isValidElement(o)?o.props.children:null:l);return X.createElement(fU,ar({},n,{ref:e}),X.isValidElement(o)?X.cloneElement(o,void 0,a):null)}return X.createElement(fU,ar({},n,{ref:e}),t)});Pre.displayName="Slot";const fU=X.forwardRef((i,e)=>{const{children:t,...n}=i;return X.isValidElement(t)?X.cloneElement(t,{...S5e(n,t.props),ref:Dre(e,t.ref)}):X.Children.count(t)>1?X.Children.only(null):null});fU.displayName="SlotClone";const Nre=({children:i})=>X.createElement(X.Fragment,null,i);function _5e(i){return X.isValidElement(i)&&i.type===Nre}function S5e(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{s(...a),r(...a)}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}const T5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Vx=T5e.reduce((i,e)=>{const t=X.forwardRef((n,r)=>{const{asChild:s,...o}=n,a=s?Pre:e;return X.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),X.createElement(a,ar({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function E5e(i,e){i&&P3.flushSync(()=>i.dispatchEvent(e))}function uG(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i}),X.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function w5e(i,e=globalThis==null?void 0:globalThis.document){const t=uG(i);X.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const hU="dismissableLayer.update",M5e="dismissableLayer.pointerDownOutside",C5e="dismissableLayer.focusOutside";let BK;const R5e=X.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),D5e=X.forwardRef((i,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=i,u=X.useContext(R5e),[f,h]=X.useState(null),p=(t=f==null?void 0:f.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,m]=X.useState({}),g=fT(e,q=>h(q)),b=Array.from(u.layers),[T]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=b.indexOf(T),R=f?b.indexOf(f):-1,P=u.layersWithOutsidePointerEventsDisabled.size>0,I=R>=C,F=L5e(q=>{const H=q.target,O=[...u.branches].some($=>$.contains(H));!I||O||(s==null||s(q),a==null||a(q),q.defaultPrevented||l==null||l())},p),k=P5e(q=>{const H=q.target;[...u.branches].some($=>$.contains(H))||(o==null||o(q),a==null||a(q),q.defaultPrevented||l==null||l())},p);return w5e(q=>{R===u.layers.size-1&&(r==null||r(q),!q.defaultPrevented&&l&&(q.preventDefault(),l()))},p),X.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(BK=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),IK(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=BK)}},[f,p,n,u]),X.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),IK())},[f,u]),X.useEffect(()=>{const q=()=>m({});return document.addEventListener(hU,q),()=>document.removeEventListener(hU,q)},[]),X.createElement(Vx.div,ar({},c,{ref:g,style:{pointerEvents:P?I?"auto":"none":void 0,...i.style},onFocusCapture:Cm(i.onFocusCapture,k.onFocusCapture),onBlurCapture:Cm(i.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Cm(i.onPointerDownCapture,F.onPointerDownCapture)}))});function L5e(i,e=globalThis==null?void 0:globalThis.document){const t=uG(i),n=X.useRef(!1),r=X.useRef(()=>{});return X.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let u=function(){Bre(M5e,t,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function P5e(i,e=globalThis==null?void 0:globalThis.document){const t=uG(i),n=X.useRef(!1);return X.useEffect(()=>{const r=s=>{s.target&&!n.current&&Bre(C5e,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function IK(){const i=new CustomEvent(hU);document.dispatchEvent(i)}function Bre(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?E5e(r,s):r.dispatchEvent(s)}const N5e=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{},B5e=PD.useId||(()=>{});let I5e=0;function O5e(i){const[e,t]=X.useState(B5e());return N5e(()=>{t(n=>n??String(I5e++))},[i]),e?`radix-${e}`:""}function fb(i){return i.split("-")[0]}function N3(i){return i.split("-")[1]}function hT(i){return["top","bottom"].includes(fb(i))?"x":"y"}function fG(i){return i==="y"?"height":"width"}function OK(i,e,t){let{reference:n,floating:r}=i;const s=n.x+n.width/2-r.width/2,o=n.y+n.height/2-r.height/2,a=hT(e),l=fG(a),c=n[l]/2-r[l]/2,u=a==="x";let f;switch(fb(e)){case"top":f={x:s,y:n.y-r.height};break;case"bottom":f={x:s,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:o};break;case"left":f={x:n.x-r.width,y:o};break;default:f={x:n.x,y:n.y}}switch(N3(e)){case"start":f[a]-=c*(t&&u?-1:1);break;case"end":f[a]+=c*(t&&u?-1:1)}return f}const F5e=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:c,y:u}=OK(l,n,a),f=n,h={},p=0;for(let m=0;m<s.length;m++){const{name:g,fn:b}=s[m],{x:T,y:C,data:R,reset:P}=await b({x:c,y:u,initialPlacement:n,placement:f,strategy:r,middlewareData:h,rects:l,platform:o,elements:{reference:i,floating:e}});c=T??c,u=C??u,h={...h,[g]:{...h[g],...R}},P&&p<=50&&(p++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(l=P.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):P.rects),{x:c,y:u}=OK(l,f,a)),m=-1)}return{x:c,y:u,placement:f,strategy:r,middlewareData:h}};function Ire(i){return typeof i!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(i):{top:i,right:i,bottom:i,left:i}}function aL(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}async function bM(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=e,m=Ire(p),g=a[h?f==="floating"?"reference":"floating":f],b=aL(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),T=aL(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:n,y:r}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[f]);return{top:b.top-T.top+m.top,bottom:T.bottom-b.bottom+m.bottom,left:b.left-T.left+m.left,right:T.right-b.right+m.right}}const U5e=Math.min,Mv=Math.max;function dU(i,e,t){return Mv(i,U5e(e,t))}const FK=i=>({name:"arrow",options:i,async fn(e){const{element:t,padding:n=0}=i??{},{x:r,y:s,placement:o,rects:a,platform:l}=e;if(t==null)return{};const c=Ire(n),u={x:r,y:s},f=hT(o),h=N3(o),p=fG(f),m=await l.getDimensions(t),g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",T=a.reference[p]+a.reference[f]-u[f]-a.floating[p],C=u[f]-a.reference[f],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let P=R?f==="y"?R.clientHeight||0:R.clientWidth||0:0;P===0&&(P=a.floating[p]);const I=T/2-C/2,F=c[g],k=P-m[p]-c[b],q=P/2-m[p]/2+I,H=dU(F,q,k),O=(h==="start"?c[g]:c[b])>0&&q!==H&&a.reference[p]<=a.floating[p];return{[f]:u[f]-(O?q<F?F-q:k-q:0),data:{[f]:H,centerOffset:q-H}}}}),k5e={left:"right",right:"left",bottom:"top",top:"bottom"};function lL(i){return i.replace(/left|right|bottom|top/g,e=>k5e[e])}function G5e(i,e,t){t===void 0&&(t=!1);const n=N3(i),r=hT(i),s=fG(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=lL(o)),{main:o,cross:lL(o)}}const z5e={start:"end",end:"start"};function UK(i){return i.replace(/start|end/g,e=>z5e[e])}const Ore=["top","right","bottom","left"];Ore.reduce((i,e)=>i.concat(e,e+"-start",e+"-end"),[]);const H5e=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t;const{placement:n,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",flipAlignment:p=!0,...m}=i,g=fb(n),b=f||(g===o||!p?[lL(o)]:function(q){const H=lL(q);return[UK(q),H,UK(H)]}(o)),T=[o,...b],C=await bM(e,m),R=[];let P=((t=r.flip)==null?void 0:t.overflows)||[];if(c&&R.push(C[g]),u){const{main:q,cross:H}=G5e(n,s,await(a.isRTL==null?void 0:a.isRTL(l.floating)));R.push(C[q],C[H])}if(P=[...P,{placement:n,overflows:R}],!R.every(q=>q<=0)){var I,F;const q=((I=(F=r.flip)==null?void 0:F.index)!=null?I:0)+1,H=T[q];if(H)return{data:{index:q,overflows:P},reset:{placement:H}};let O="bottom";switch(h){case"bestFit":{var k;const $=(k=P.map(ee=>[ee,ee.overflows.filter(Y=>Y>0).reduce((Y,oe)=>Y+oe,0)]).sort((ee,Y)=>ee[1]-Y[1])[0])==null?void 0:k[0].placement;$&&(O=$);break}case"initialPlacement":O=o}if(n!==O)return{reset:{placement:O}}}return{}}}};function kK(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function GK(i){return Ore.some(e=>i[e]>=0)}const V5e=function(i){let{strategy:e="referenceHidden",...t}=i===void 0?{}:i;return{name:"hide",async fn(n){const{rects:r}=n;switch(e){case"referenceHidden":{const s=kK(await bM(n,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:GK(s)}}}case"escaped":{const s=kK(await bM(n,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:s,escaped:GK(s)}}}default:return{}}}}},q5e=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){const{x:t,y:n}=e,r=await async function(s,o){const{placement:a,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),f=fb(a),h=N3(a),p=hT(a)==="x",m=["left","top"].includes(f)?-1:1,g=u&&p?-1:1,b=typeof o=="function"?o(s):o;let{mainAxis:T,crossAxis:C,alignmentAxis:R}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return h&&typeof R=="number"&&(C=h==="end"?-1*R:R),p?{x:C*g,y:T*m}:{x:T*m,y:C*g}}(e,i);return{x:t+r.x,y:n+r.y,data:r}}}};function Fre(i){return i==="x"?"y":"x"}const $5e=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:T,y:C}=b;return{x:T,y:C}}},...l}=i,c={x:t,y:n},u=await bM(e,l),f=hT(fb(r)),h=Fre(f);let p=c[f],m=c[h];if(s){const b=f==="y"?"bottom":"right";p=dU(p+u[f==="y"?"top":"left"],p,p-u[b])}if(o){const b=h==="y"?"bottom":"right";m=dU(m+u[h==="y"?"top":"left"],m,m-u[b])}const g=a.fn({...e,[f]:p,[h]:m});return{...g,data:{x:g.x-t,y:g.y-n}}}}},j5e=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=i,u={x:t,y:n},f=hT(r),h=Fre(f);let p=u[f],m=u[h];const g=typeof a=="function"?a({...s,placement:r}):a,b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const I=f==="y"?"height":"width",F=s.reference[f]-s.floating[I]+b.mainAxis,k=s.reference[f]+s.reference[I]-b.mainAxis;p<F?p=F:p>k&&(p=k)}if(c){var T,C,R,P;const I=f==="y"?"width":"height",F=["top","left"].includes(fb(r)),k=s.reference[h]-s.floating[I]+(F&&(T=(C=o.offset)==null?void 0:C[h])!=null?T:0)+(F?0:b.crossAxis),q=s.reference[h]+s.reference[I]+(F?0:(R=(P=o.offset)==null?void 0:P[h])!=null?R:0)-(F?b.crossAxis:0);m<k?m=k:m>q&&(m=q)}return{[f]:p,[h]:m}}}},W5e=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){const{placement:t,rects:n,platform:r,elements:s}=e,{apply:o,...a}=i,l=await bM(e,a),c=fb(t),u=N3(t);let f,h;c==="top"||c==="bottom"?(f=c,h=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(h=c,f=u==="end"?"top":"bottom");const p=Mv(l.left,0),m=Mv(l.right,0),g=Mv(l.top,0),b=Mv(l.bottom,0),T={availableHeight:n.floating.height-(["left","right"].includes(t)?2*(g!==0||b!==0?g+b:Mv(l.top,l.bottom)):l[f]),availableWidth:n.floating.width-(["top","bottom"].includes(t)?2*(p!==0||m!==0?p+m:Mv(l.left,l.right)):l[h])},C=await r.getDimensions(s.floating);o==null||o({...e,...T});const R=await r.getDimensions(s.floating);return C.width!==R.width||C.height!==R.height?{reset:{rects:!0}}:{}}}};function Ure(i){return i&&i.document&&i.location&&i.alert&&i.setInterval}function gg(i){if(i==null)return window;if(!Ure(i)){const e=i.ownerDocument;return e&&e.defaultView||window}return i}function B3(i){return gg(i).getComputedStyle(i)}function $m(i){return Ure(i)?"":i?(i.nodeName||"").toLowerCase():""}function kre(){const i=navigator.userAgentData;return i!=null&&i.brands?i.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function hA(i){return i instanceof gg(i).HTMLElement}function Jy(i){return i instanceof gg(i).Element}function hG(i){return typeof ShadowRoot>"u"?!1:i instanceof gg(i).ShadowRoot||i instanceof ShadowRoot}function VP(i){const{overflow:e,overflowX:t,overflowY:n}=B3(i);return/auto|scroll|overlay|hidden/.test(e+n+t)}function K5e(i){return["table","td","th"].includes($m(i))}function zK(i){const e=/firefox/i.test(kre()),t=B3(i);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function Gre(){return!/^((?!chrome|android).)*safari/i.test(kre())}const HK=Math.min,Gw=Math.max,cL=Math.round;function jm(i,e,t){var n,r,s,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const a=i.getBoundingClientRect();let l=1,c=1;e&&hA(i)&&(l=i.offsetWidth>0&&cL(a.width)/i.offsetWidth||1,c=i.offsetHeight>0&&cL(a.height)/i.offsetHeight||1);const u=Jy(i)?gg(i):window,f=!Gre()&&t,h=(a.left+(f&&(n=(r=u.visualViewport)==null?void 0:r.offsetLeft)!=null?n:0))/l,p=(a.top+(f&&(s=(o=u.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/c,m=a.width/l,g=a.height/c;return{width:m,height:g,top:p,right:h+m,bottom:p+g,left:h,x:h,y:p}}function $y(i){return(e=i,(e instanceof gg(e).Node?i.ownerDocument:i.document)||window.document).documentElement;var e}function qP(i){return Jy(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function zre(i){return jm($y(i)).left+qP(i).scrollLeft}function Y5e(i,e,t){const n=hA(e),r=$y(e),s=jm(i,n&&function(l){const c=jm(l);return cL(c.width)!==l.offsetWidth||cL(c.height)!==l.offsetHeight}(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(n||!n&&t!=="fixed")if(($m(e)!=="body"||VP(r))&&(o=qP(e)),hA(e)){const l=jm(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else r&&(a.x=zre(r));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function Hre(i){return $m(i)==="html"?i:i.assignedSlot||i.parentNode||(hG(i)?i.host:null)||$y(i)}function VK(i){return hA(i)&&getComputedStyle(i).position!=="fixed"?i.offsetParent:null}function pU(i){const e=gg(i);let t=VK(i);for(;t&&K5e(t)&&getComputedStyle(t).position==="static";)t=VK(t);return t&&($m(t)==="html"||$m(t)==="body"&&getComputedStyle(t).position==="static"&&!zK(t))?e:t||function(n){let r=Hre(n);for(hG(r)&&(r=r.host);hA(r)&&!["html","body"].includes($m(r));){if(zK(r))return r;r=r.parentNode}return null}(i)||e}function qK(i){if(hA(i))return{width:i.offsetWidth,height:i.offsetHeight};const e=jm(i);return{width:e.width,height:e.height}}function Vre(i){const e=Hre(i);return["html","body","#document"].includes($m(e))?i.ownerDocument.body:hA(e)&&VP(e)?e:Vre(e)}function uL(i,e){var t;e===void 0&&(e=[]);const n=Vre(i),r=n===((t=i.ownerDocument)==null?void 0:t.body),s=gg(n),o=r?[s].concat(s.visualViewport||[],VP(n)?n:[]):n,a=e.concat(o);return r?a:a.concat(uL(o))}function $K(i,e,t){return e==="viewport"?aL(function(n,r){const s=gg(n),o=$y(n),a=s.visualViewport;let l=o.clientWidth,c=o.clientHeight,u=0,f=0;if(a){l=a.width,c=a.height;const h=Gre();(h||!h&&r==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}return{width:l,height:c,x:u,y:f}}(i,t)):Jy(e)?function(n,r){const s=jm(n,!1,r==="fixed"),o=s.top+n.clientTop,a=s.left+n.clientLeft;return{top:o,left:a,x:a,y:o,right:a+n.clientWidth,bottom:o+n.clientHeight,width:n.clientWidth,height:n.clientHeight}}(e,t):aL(function(n){var r;const s=$y(n),o=qP(n),a=(r=n.ownerDocument)==null?void 0:r.body,l=Gw(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=Gw(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-o.scrollLeft+zre(n);const f=-o.scrollTop;return B3(a||s).direction==="rtl"&&(u+=Gw(s.clientWidth,a?a.clientWidth:0)-l),{width:l,height:c,x:u,y:f}}($y(i)))}function X5e(i){const e=uL(i),t=["absolute","fixed"].includes(B3(i).position)&&hA(i)?pU(i):i;return Jy(t)?e.filter(n=>Jy(n)&&function(r,s){const o=s.getRootNode==null?void 0:s.getRootNode();if(r.contains(s))return!0;if(o&&hG(o)){let a=s;do{if(a&&r===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(n,t)&&$m(n)!=="body"):[]}const Q5e={getClippingRect:function(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const s=[...t==="clippingAncestors"?X5e(e):[].concat(t),n],o=s[0],a=s.reduce((l,c)=>{const u=$K(e,c,r);return l.top=Gw(u.top,l.top),l.right=HK(u.right,l.right),l.bottom=HK(u.bottom,l.bottom),l.left=Gw(u.left,l.left),l},$K(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(i){let{rect:e,offsetParent:t,strategy:n}=i;const r=hA(t),s=$y(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&n!=="fixed")&&(($m(t)!=="body"||VP(s))&&(o=qP(t)),hA(t))){const l=jm(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+a.x,y:e.y-o.scrollTop+a.y}},isElement:Jy,getDimensions:qK,getOffsetParent:pU,getDocumentElement:$y,getElementRects:i=>{let{reference:e,floating:t,strategy:n}=i;return{reference:Y5e(e,pU(t),n),floating:{...qK(t),x:0,y:0}}},getClientRects:i=>Array.from(i.getClientRects()),isRTL:i=>B3(i).direction==="rtl"};function Z5e(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=n,l=r&&!a,c=s&&!a,u=l||c?[...Jy(i)?uL(i):[],...uL(e)]:[];u.forEach(m=>{l&&m.addEventListener("scroll",t,{passive:!0}),c&&m.addEventListener("resize",t)});let f,h=null;if(o){let m=!0;h=new ResizeObserver(()=>{m||t(),m=!1}),Jy(i)&&!a&&h.observe(i),h.observe(e)}let p=a?jm(i):null;return a&&function m(){const g=jm(i);!p||g.x===p.x&&g.y===p.y&&g.width===p.width&&g.height===p.height||t(),p=g,f=requestAnimationFrame(m)}(),t(),()=>{var m;u.forEach(g=>{l&&g.removeEventListener("scroll",t),c&&g.removeEventListener("resize",t)}),(m=h)==null||m.disconnect(),h=null,a&&cancelAnimationFrame(f)}}const J5e=(i,e,t)=>F5e(i,e,{platform:Q5e,...t});var AU=typeof document<"u"?X.useLayoutEffect:X.useEffect;function mU(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!mU(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!mU(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function e4e(i){const e=X.useRef(i);return AU(()=>{e.current=i}),e}function t4e(i){let{middleware:e,placement:t="bottom",strategy:n="absolute",whileElementsMounted:r}=i===void 0?{}:i;const s=X.useRef(null),o=X.useRef(null),a=e4e(r),l=X.useRef(null),[c,u]=X.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{}}),[f,h]=X.useState(e);mU(f==null?void 0:f.map(R=>{let{options:P}=R;return P}),e==null?void 0:e.map(R=>{let{options:P}=R;return P}))||h(e);const p=X.useCallback(()=>{!s.current||!o.current||J5e(s.current,o.current,{middleware:f,placement:t,strategy:n}).then(R=>{m.current&&P3.flushSync(()=>{u(R)})})},[f,t,n]);AU(()=>{m.current&&p()},[p]);const m=X.useRef(!1);AU(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=X.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),s.current&&o.current)if(a.current){const R=a.current(s.current,o.current,p);l.current=R}else p()},[p,a]),b=X.useCallback(R=>{s.current=R,g()},[g]),T=X.useCallback(R=>{o.current=R,g()},[g]),C=X.useMemo(()=>({reference:s,floating:o}),[]);return X.useMemo(()=>({...c,update:p,refs:C,reference:b,floating:T}),[c,p,C,b,T])}const n4e=i=>{const{element:e,padding:t}=i;function n(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:i,fn(r){return n(e)?e.current!=null?FK({element:e.current,padding:t}).fn(r):{}:e?FK({element:e,padding:t}).fn(r):{}}}},i4e=X.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...s}=i;return X.createElement(Vx.svg,ar({},s,{ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),i.asChild?t:X.createElement("polygon",{points:"0,0 30,0 15,10"}))}),r4e=i4e;function s4e(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i}),X.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}const gw=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{};function o4e(i){const[e,t]=X.useState(void 0);return gw(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=i.offsetWidth,a=i.offsetHeight;t({width:o,height:a})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}const qre="Popper",[dG,$re]=Lre(qre),[a4e,jre]=dG(qre),l4e=i=>{const{__scopePopper:e,children:t}=i,[n,r]=X.useState(null);return X.createElement(a4e,{scope:e,anchor:n,onAnchorChange:r},t)},c4e="PopperAnchor",u4e=X.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,s=jre(c4e,t),o=X.useRef(null),a=fT(e,o);return X.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:X.createElement(Vx.div,ar({},r,{ref:a}))}),fL="PopperContent",[f4e,h4e]=dG(fL),[d4e,p4e]=dG(fL,{hasParent:!1,positionUpdateFns:new Set}),A4e=X.forwardRef((i,e)=>{var t,n,r,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:h=0,align:p="center",alignOffset:m=0,arrowPadding:g=0,collisionBoundary:b=[],collisionPadding:T=0,sticky:C="partial",hideWhenDetached:R=!1,avoidCollisions:P=!0,onPlaced:I,...F}=i,k=jre(fL,u),[q,H]=X.useState(null),O=fT(e,fe=>H(fe)),[$,ee]=X.useState(null),Y=o4e($),oe=(t=Y==null?void 0:Y.width)!==null&&t!==void 0?t:0,re=(n=Y==null?void 0:Y.height)!==null&&n!==void 0?n:0,Q=f+(p!=="center"?"-"+p:""),se=typeof T=="number"?T:{top:0,right:0,bottom:0,left:0,...T},le=Array.isArray(b)?b:[b],de=le.length>0,ie={padding:se,boundary:le.filter(x4e),altBoundary:de},{reference:ge,floating:Ce,strategy:Ie,x:Ee,y:Be,placement:qe,middlewareData:it,update:et}=t4e({strategy:"fixed",placement:Q,whileElementsMounted:Z5e,middleware:[b4e(),q5e({mainAxis:h+re,alignmentAxis:m}),P?$5e({mainAxis:!0,crossAxis:!1,limiter:C==="partial"?j5e():void 0,...ie}):void 0,$?n4e({element:$,padding:g}):void 0,P?H5e({...ie}):void 0,W5e({...ie,apply:({elements:fe,availableWidth:Pe,availableHeight:Ve})=>{fe.floating.style.setProperty("--radix-popper-available-width",`${Pe}px`),fe.floating.style.setProperty("--radix-popper-available-height",`${Ve}px`)}}),_4e({arrowWidth:oe,arrowHeight:re}),R?V5e({strategy:"referenceHidden"}):void 0].filter(v4e)});gw(()=>{ge(k.anchor)},[ge,k.anchor]);const Ht=Ee!==null&&Be!==null,[_t,$t]=Wre(qe),mt=s4e(I);gw(()=>{Ht&&(mt==null||mt())},[Ht,mt]);const ut=(r=it.arrow)===null||r===void 0?void 0:r.x,we=(s=it.arrow)===null||s===void 0?void 0:s.y,Jt=((o=it.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[ft,Dt]=X.useState();gw(()=>{q&&Dt(window.getComputedStyle(q).zIndex)},[q]);const{hasParent:Rt,positionUpdateFns:yn}=p4e(fL,u),Gt=!Rt;X.useLayoutEffect(()=>{if(!Gt)return yn.add(et),()=>{yn.delete(et)}},[Gt,yn,et]),gw(()=>{Gt&&Ht&&Array.from(yn).reverse().forEach(fe=>requestAnimationFrame(fe))},[Gt,Ht,yn]);const Se={"data-side":_t,"data-align":$t,...F,ref:O,style:{...F.style,animation:Ht?void 0:"none",opacity:(a=it.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return X.createElement("div",{ref:Ce,"data-radix-popper-content-wrapper":"",style:{position:Ie,left:0,top:0,transform:Ht?`translate3d(${Math.round(Ee)}px, ${Math.round(Be)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ft,"--radix-popper-transform-origin":[(l=it.transformOrigin)===null||l===void 0?void 0:l.x,(c=it.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:i.dir},X.createElement(f4e,{scope:u,placedSide:_t,onArrowChange:ee,arrowX:ut,arrowY:we,shouldHideArrow:Jt},Gt?X.createElement(d4e,{scope:u,hasParent:!0,positionUpdateFns:yn},X.createElement(Vx.div,Se)):X.createElement(Vx.div,Se)))}),m4e="PopperArrow",g4e={top:"bottom",right:"left",bottom:"top",left:"right"},y4e=X.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=h4e(m4e,n),o=g4e[s.placedSide];return X.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},X.createElement(r4e,ar({},r,{ref:t,style:{...r.style,display:"block"}})))});function v4e(i){return i!==void 0}function x4e(i){return i!==null}const b4e=()=>({name:"anchorCssProperties",fn(i){const{rects:e,elements:t}=i,{width:n,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${n}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),_4e=i=>({name:"transformOrigin",options:i,fn(e){var t,n,r,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=f?0:i.arrowWidth,p=f?0:i.arrowHeight,[m,g]=Wre(a),b={start:"0%",center:"50%",end:"100%"}[g],T=((n=(r=c.arrow)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0)+h/2,C=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+p/2;let R="",P="";return m==="bottom"?(R=f?b:`${T}px`,P=`${-p}px`):m==="top"?(R=f?b:`${T}px`,P=`${l.floating.height+p}px`):m==="right"?(R=`${-p}px`,P=f?b:`${C}px`):m==="left"&&(R=`${l.floating.width+p}px`,P=f?b:`${C}px`),{data:{x:R,y:P}}}});function Wre(i){const[e,t="center"]=i.split("-");return[e,t]}const S4e=l4e,T4e=u4e,E4e=A4e,w4e=y4e,jK=globalThis!=null&&globalThis.document?X.useLayoutEffect:()=>{};function M4e(i,e){return X.useReducer((t,n)=>{const r=e[t][n];return r??t},i)}const Kre=i=>{const{present:e,children:t}=i,n=C4e(e),r=typeof t=="function"?t({present:n.isPresent}):X.Children.only(t),s=fT(n.ref,r.ref);return typeof t=="function"||n.isPresent?X.cloneElement(r,{ref:s}):null};Kre.displayName="Presence";function C4e(i){const[e,t]=X.useState(),n=X.useRef({}),r=X.useRef(i),s=X.useRef("none"),o=i?"mounted":"unmounted",[a,l]=M4e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return X.useEffect(()=>{const c=F5(n.current);s.current=a==="mounted"?c:"none"},[a]),jK(()=>{const c=n.current,u=r.current;if(u!==i){const h=s.current,p=F5(c);i?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,l]),jK(()=>{if(e){const c=f=>{const p=F5(n.current).includes(f.animationName);f.target===e&&p&&P3.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=F5(n.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:X.useCallback(c=>{c&&(n.current=getComputedStyle(c)),t(c)},[])}}function F5(i){return(i==null?void 0:i.animationName)||"none"}function Yre(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i}),X.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function R4e({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,r]=D4e({defaultProp:e,onChange:t}),s=i!==void 0,o=s?i:n,a=Yre(t),l=X.useCallback(c=>{if(s){const f=typeof c=="function"?c(i):c;f!==i&&a(f)}else r(c)},[s,i,r,a]);return[o,l]}function D4e({defaultProp:i,onChange:e}){const t=X.useState(i),[n]=t,r=X.useRef(n),s=Yre(e);return X.useEffect(()=>{r.current!==n&&(s(n),r.current=n)},[n,r,s]),t}const L4e=X.forwardRef((i,e)=>X.createElement(Vx.span,ar({},i,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}))),P4e=L4e,[$P,Qut]=Lre("Tooltip",[$re]),jP=$re(),N4e="TooltipProvider",gU="tooltip.open",[Zut,pG]=$P(N4e),AG="Tooltip",[B4e,WP]=$P(AG),I4e=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=i,l=pG(AG,i.__scopeTooltip),c=jP(e),[u,f]=X.useState(null),h=O5e(),p=X.useRef(0),m=o??l.disableHoverableContent,g=a??l.delayDuration,b=X.useRef(!1),[T=!1,C]=R4e({prop:n,defaultProp:r,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(gU))):l.onClose(),s==null||s(k)}}),R=X.useMemo(()=>T?b.current?"delayed-open":"instant-open":"closed",[T]),P=X.useCallback(()=>{window.clearTimeout(p.current),b.current=!1,C(!0)},[C]),I=X.useCallback(()=>{window.clearTimeout(p.current),C(!1)},[C]),F=X.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,C(!0)},g)},[g,C]);return X.useEffect(()=>()=>window.clearTimeout(p.current),[]),X.createElement(S4e,c,X.createElement(B4e,{scope:e,contentId:h,open:T,stateAttribute:R,trigger:u,onTriggerChange:f,onTriggerEnter:X.useCallback(()=>{l.isOpenDelayed?F():P()},[l.isOpenDelayed,F,P]),onTriggerLeave:X.useCallback(()=>{m?I():window.clearTimeout(p.current)},[I,m]),onOpen:P,onClose:I,disableHoverableContent:m},t))},WK="TooltipTrigger",O4e=X.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=WP(WK,t),s=pG(WK,t),o=jP(t),a=X.useRef(null),l=fT(e,a,r.onTriggerChange),c=X.useRef(!1),u=X.useRef(!1),f=X.useCallback(()=>c.current=!1,[]);return X.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),X.createElement(T4e,ar({asChild:!0},o),X.createElement(Vx.button,ar({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},n,{ref:l,onPointerMove:Cm(i.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:Cm(i.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:Cm(i.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Cm(i.onFocus,()=>{c.current||r.onOpen()}),onBlur:Cm(i.onBlur,r.onClose),onClick:Cm(i.onClick,r.onClose)})))}),F4e="TooltipPortal",[Jut,U4e]=$P(F4e,{forceMount:void 0}),_M="TooltipContent",k4e=X.forwardRef((i,e)=>{const t=U4e(_M,i.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...s}=i,o=WP(_M,i.__scopeTooltip);return X.createElement(Kre,{present:n||o.open},o.disableHoverableContent?X.createElement(Xre,ar({side:r},s,{ref:e})):X.createElement(G4e,ar({side:r},s,{ref:e})))}),G4e=X.forwardRef((i,e)=>{const t=WP(_M,i.__scopeTooltip),n=pG(_M,i.__scopeTooltip),r=X.useRef(null),s=fT(e,r),[o,a]=X.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:f}=n,h=X.useCallback(()=>{a(null),f(!1)},[f]),p=X.useCallback((m,g)=>{const b=m.currentTarget,T={x:m.clientX,y:m.clientY},C=$4e(T,b.getBoundingClientRect()),R=C==="right"||C==="bottom"?-5:5,I=C==="right"||C==="left"?{x:m.clientX+R,y:m.clientY}:{x:m.clientX,y:m.clientY+R},F=j4e(g.getBoundingClientRect()),k=K4e([I,...F]);a(k),f(!0)},[f]);return X.useEffect(()=>()=>h(),[h]),X.useEffect(()=>{if(l&&u){const m=b=>p(b,u),g=b=>p(b,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,p,h]),X.useEffect(()=>{if(o){const m=g=>{const b=g.target,T={x:g.clientX,y:g.clientY},C=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),R=!W4e(T,o);C?h():R&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,o,c,h]),X.createElement(Xre,ar({},i,{ref:s}))}),[z4e,H4e]=$P(AG,{isInside:!1}),Xre=X.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=i,l=WP(_M,t),c=jP(t),{onClose:u}=l;return X.useEffect(()=>(document.addEventListener(gU,u),()=>document.removeEventListener(gU,u)),[u]),X.useEffect(()=>{if(l.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),X.createElement(D5e,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},X.createElement(E4e,ar({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),X.createElement(Nre,null,n),X.createElement(z4e,{scope:t,isInside:!0},X.createElement(P4e,{id:l.contentId,role:"tooltip"},r||n))))}),V4e="TooltipArrow",q4e=X.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=jP(t);return H4e(V4e,t).isInside?null:X.createElement(w4e,ar({},r,n,{ref:e}))});function $4e(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),r=Math.abs(e.right-i.x),s=Math.abs(e.left-i.x);switch(Math.min(t,n,r,s)){case s:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:return null}}function j4e(i){const{top:e,right:t,bottom:n,left:r}=i;return[{x:r,y:e},{x:t,y:e},{x:t,y:n},{x:r,y:n}]}function W4e(i,e){const{x:t,y:n}=i;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>n!=u>n&&t<(c-a)*(n-l)/(u-l)+a&&(r=!r)}return r}function K4e(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Y4e(e)}function Y4e(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const r=i[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const r=i[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const X4e=I4e,Q4e=O4e,Z4e=k4e,J4e=q4e;function eDe(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function Hs(i,e){if(i==null)return{};var t=eDe(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}let Mo;(function(i){i[i.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",i[i.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",i[i.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",i[i.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",i[i.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",i[i.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",i[i.THEME_ERROR=6]="THEME_ERROR",i[i.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",i[i.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",i[i.EMPTY_KEY=9]="EMPTY_KEY"})(Mo||(Mo={}));const tDe={[Mo.UNSUPPORTED_INPUT]:(i,e)=>[`An input with type \`${i}\` input was found at path \`${e}\` but it's not supported yet.`],[Mo.NO_COMPONENT_FOR_TYPE]:(i,e)=>[`Type \`${i}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Mo.UNKNOWN_INPUT]:(i,e)=>[`input at path \`${i}\` is not recognized.`,e],[Mo.DUPLICATE_KEYS]:(i,e,t)=>[`Key \`${i}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Mo.ALREADY_REGISTERED_TYPE]:i=>[`Type ${i} has already been registered. You can't register a component with the same type.`],[Mo.CLIPBOARD_ERROR]:i=>["Error copying the value",i],[Mo.THEME_ERROR]:(i,e)=>[`Error accessing the theme \`${i}.${e}\` value.`],[Mo.PATH_DOESNT_EXIST]:i=>[`Error getting the value at path \`${i}\`. There is probably an error in your \`render\` function.`],[Mo.PATH_DOESNT_EXIST]:i=>[`Error accessing the value at path \`${i}\``],[Mo.INPUT_TYPE_OVERRIDE]:(i,e,t)=>[`Input at path \`${i}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Mo.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function Qre(i,e,...t){const[n,...r]=tDe[e](...t);console[i]("LEVA: "+n,...r)}const Bm=Qre.bind(null,"warn"),nDe=Qre.bind(null,"log"),iDe=["value"],rDe=["schema"],sDe=["value"],Zre=[],qx={};function KK(i){let{value:e}=i,t=Hs(i,iDe);for(let n of Zre){const r=n(e,t);if(r)return r}}function yg(i,e){let{schema:t}=e,n=Hs(e,rDe);if(i in qx){Bm(Mo.ALREADY_REGISTERED_TYPE,i);return}Zre.push((r,s)=>t(r,s)&&i),qx[i]=n}function xI(i,e,t,n){const{normalize:r}=qx[i];if(r)return r(e,t,n);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Hs(e,sDe);return{value:s,settings:o}}function oDe(i,e,t,n,r,s){const{sanitize:o}=qx[i];return o?o(e,t,n,r,s):e}function YK(i,e,t){const{format:n}=qx[i];return n?n(e,t):e}function aDe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function XK(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Wi(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XK(Object(t),!0).forEach(function(n){aDe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):XK(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}const e1=(i,e,t)=>i>t?t:i<e?e:i,lDe=i=>{if(i===""||typeof i=="number")return i;try{const e=Sy(i);if(!isNaN(e))return e}catch{}return parseFloat(i)},cDe=Math.log(10);function QK(i){let e=Math.abs(+String(i).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/cDe)+1,n=Math.floor(Math.log10(Math.abs(i))),r=Math.pow(10,n-t);return Math.max(r,.001)}const hL=(i,e,t)=>t===e?0:(e1(i,e,t)-e)/(t-e),dL=(i,e,t)=>i*(t-e)+e,uDe=()=>"_"+Math.random().toString(36).substr(2,9),ZK=/\(([0-9+\-*/^ .]+)\)/,JK=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,eY=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,tY=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,nY=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,iY=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Sy(i){if(isNaN(Number(i)))if(ZK.test(i)){const e=i.replace(ZK,(t,n)=>String(Sy(n)));return Sy(e)}else if(JK.test(i)){const e=i.replace(JK,(t,n,r)=>String(Math.pow(Number(n),Number(r))));return Sy(e)}else if(eY.test(i)){const e=i.replace(eY,(t,n,r)=>String(Number(n)*Number(r)));return Sy(e)}else if(tY.test(i)){const e=i.replace(tY,(t,n,r)=>{if(r!=0)return String(Number(n)/Number(r));throw new Error("Division by zero")});return Sy(e)}else if(nY.test(i)){const e=i.replace(nY,(t,n,r)=>String(Number(n)+Number(r)));return Sy(e)}else if(iY.test(i)){const e=i.replace(iY,(t,n,r)=>String(Number(n)-Number(r)));return Sy(e)}else return Number(i);return Number(i)}function fDe(i,e){const t=Wi({},i);return e.forEach(n=>n in i&&delete t[n]),t}function hDe(i,e){return i.reduce((t,n,r)=>Object.assign(t,{[e[r]]:n}),{})}function Jre(i){return Object.prototype.toString.call(i)==="[object Object]"}const dDe=i=>Jre(i)&&Object.keys(i).length===0;let Q0;(function(i){i.BUTTON="BUTTON",i.BUTTON_GROUP="BUTTON_GROUP",i.MONITOR="MONITOR",i.FOLDER="FOLDER"})(Q0||(Q0={}));let Np;(function(i){i.SELECT="SELECT",i.IMAGE="IMAGE",i.NUMBER="NUMBER",i.COLOR="COLOR",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.INTERVAL="INTERVAL",i.VECTOR3D="VECTOR3D",i.VECTOR2D="VECTOR2D"})(Np||(Np={}));const pDe=["type","__customInput"],ADe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],mDe=["type"];function ese(i,e,t={},n){var r,s;if(typeof i!="object"||Array.isArray(i))return{type:n,input:i,options:Wi({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in i){const{type:I,__customInput:F}=i,k=Hs(i,pDe);return ese(F,e,k,I)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:h,onEditStart:p,onEditEnd:m,transient:g}=i,b=Hs(i,ADe),T=Wi({render:o,key:e,label:a??e,hint:f,transient:g??!!h,onEditStart:p,onEditEnd:m,disabled:u,optional:l,order:c},t);let{type:C}=b,R=Hs(b,mDe);if(C=n??C,C in Q0)return{type:C,input:R,options:T};let P;return n&&Jre(R)&&"value"in R?P=R.value:P=dDe(R)?void 0:R,{type:C,input:P,options:Wi(Wi({},T),{},{onChange:h,optional:(r=T.optional)!==null&&r!==void 0?r:!1,disabled:(s=T.disabled)!==null&&s!==void 0?s:!1})}}function gDe(i,e,t,n){const r=ese(i,e),{type:s,input:o,options:a}=r;if(s)return s in Q0?r:{type:s,input:xI(s,o,t,n),options:a};let l=KK(o);return l?{type:l,input:xI(l,o,t,n),options:a}:(l=KK({value:o}),l?{type:l,input:xI(l,{value:o},t,n),options:a}:!1)}function rY(i,e,t,n,r){const{value:s,type:o,settings:a}=i;i.value=tse({type:o,value:s,settings:a},e,t,n),i.fromPanel=r}const yDe=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function tse({type:i,value:e,settings:t},n,r,s){const o=i!=="SELECT"&&typeof n=="function"?n(e):n;let a;try{a=oDe(i,o,t,e,r,s)}catch(l){throw new yDe(`The value \`${n}\` did not result in a correct value.`,e,l)}return sL(a,e)?e:a}const nse=(i,e,t=!1)=>{let n=0;return function(){const r=arguments,s=t&&!n,o=()=>i.apply(this,r);window.clearTimeout(n),n=window.setTimeout(o,e),s&&o()}},ise=i=>i.shiftKey?5:i.altKey?1/5:1,vDe=["value"],xDe=["min","max"],bDe=i=>{if(typeof i=="number")return!0;if(typeof i=="string"){const e=parseFloat(i);return isNaN(e)?!1:i.substring((""+e).length).trim().length<4}return!1},rse=(i,{min:e=-1/0,max:t=1/0,suffix:n})=>{const r=parseFloat(i);if(i===""||isNaN(r))throw Error("Invalid number");const s=e1(r,e,t);return n?s+n:s},_De=(i,{pad:e=0,suffix:t})=>{const n=parseFloat(i).toFixed(e);return t?n+t:n},sse=i=>{let{value:e}=i,t=Hs(i,vDe);const{min:n=-1/0,max:r=1/0}=t,s=Hs(t,xDe);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=e1(o,n,r);let l=t.step;l||(Number.isFinite(n)?Number.isFinite(r)?l=+(Math.abs(r-n)/100).toPrecision(1):l=+(Math.abs(o-n)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-o)/100).toPrecision(1)));const c=l?QK(l)*10:QK(o);l=l||c/10;const u=Math.round(e1(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Wi({initialValue:o,step:l,pad:u,min:n,max:r,suffix:a},s)}},ose=(i,{step:e,initialValue:t})=>{const n=Math.round((i-t)/e);return t+n*e};var ase=Object.freeze({__proto__:null,schema:bDe,sanitize:rse,format:_De,normalize:sse,sanitizeStep:ose});function za(){return za=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},za.apply(this,arguments)}const lse=X.createContext({});function Rc(){return X.useContext(lse)}const cse=X.createContext(null),use=X.createContext(null),fse=X.createContext(null);function I3(){return X.useContext(use)}function SDe(){return X.useContext(fse)}const TDe=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function U5(i,e){const[t,n]=i.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),n&&(r.backgroundColor=n),r}const IE={$inputStyle:()=>i=>U5(i,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>i=>U5(i,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>i=>U5(i,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>i=>U5(i,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Ai,css:eft,createTheme:tft,globalCss:EDe,keyframes:nft}=v5e({prefix:"leva",theme:TDe(),utils:Wi(Wi({},IE),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:i=>({"&:focus":IE.$focusStyle()(i)}),$focusWithin:i=>({"&:focus-within":IE.$focusStyle()(i)}),$hover:i=>({"&:hover":IE.$hoverStyle()(i)}),$active:i=>({"&:active":IE.$activeStyle()(i)})})}),wDe=EDe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Wm(i,e){const{theme:t}=X.useContext(cse);if(!(i in t)||!(e in t[i]))return Bm(Mo.THEME_ERROR,i,e),"";let n=e;for(;;){let r=t[i][n];if(typeof r=="string"&&r.charAt(0)==="$")n=r.substr(1);else return r}}const hse=Ai("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),dse=Ai("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${hse}`]:{paddingLeft:0}}),MDe=Ai(dse,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),CDe=Ai("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),RDe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],DDe=["onUpdate"];function mG(i){let{innerLabel:e,value:t,onUpdate:n,onChange:r,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=i,u=Hs(i,RDe);const{id:f,emitOnEditStart:h,emitOnEditEnd:p,disabled:m}=Rc(),g=a||f,b=X.useRef(null),T=c>0,C=T?"textarea":"input",R=X.useCallback(F=>k=>{const q=k.currentTarget.value;F(q)},[]);Ne.useEffect(()=>{const F=b.current,k=R(q=>{n(q),p()});return F==null||F.addEventListener("blur",k),()=>F==null?void 0:F.removeEventListener("blur",k)},[R,n,p]);const P=X.useCallback(F=>{F.key==="Enter"&&R(n)(F)},[R,n]),I=Object.assign({as:C},T?{rows:c}:{},u);return Ne.createElement(CDe,{textArea:T},e&&typeof e=="string"?Ne.createElement(dse,null,e):e,Ne.createElement(hse,za({levaType:o,ref:b,id:g,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:R(r),onFocus:()=>h(),onKeyPress:P,onKeyDown:s,disabled:m},I)))}function LDe(i){let{onUpdate:e}=i,t=Hs(i,DDe);const n=X.useCallback(s=>e(lDe(s)),[e]),r=X.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return Ne.createElement(mG,za({},t,{onUpdate:n,onKeyDown:r,type:"number"}))}const pL=Ai("div",{}),yU=Ai("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),PDe=Ai("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${yU}::after`]:{opacity:.6},[`${pL}:hover > & + ${yU}::after`]:{opacity:.6},[`${pL}:hover > & > svg`]:{opacity:1}}),pse=Ai("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${pL}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),Ase=Ai("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${pse} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),mse=Ai(Ase,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),NDe=Ai("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),BDe=Ai("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),vU=Ai("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),IDe=Ai("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${vU}`]:{pointerEvents:"auto"}}}}}),gse=Ai("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),ODe=Ai("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),FDe=Ai(J4e,{fill:"$toolTipBackground"});function gG({children:i}){const{className:e}=X.useContext(cse);return Ne.createElement(zRe,{className:e},i)}const UDe=["align"];function kDe(){const{id:i,disable:e,disabled:t}=Rc();return Ne.createElement(Ne.Fragment,null,Ne.createElement(BDe,{id:i+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),Ne.createElement("label",{htmlFor:i+"__disable"}))}function GDe(i){const{id:e,optional:t,hint:n}=Rc(),r=i.htmlFor||(e?{htmlFor:e}:null),s=!n&&typeof i.children=="string"?{title:i.children}:null;return Ne.createElement(Ne.Fragment,null,t&&Ne.createElement(kDe,null),n!==void 0?Ne.createElement(X4e,null,Ne.createElement(Q4e,{asChild:!0},Ne.createElement(vU,za({},r,i))),Ne.createElement(Z4e,{side:"top",sideOffset:2},Ne.createElement(ODe,null,n,Ne.createElement(FDe,null)))):Ne.createElement(vU,za({},r,s,i)))}function kp(i){let{align:e}=i,t=Hs(i,UDe);const{value:n,label:r,key:s,disabled:o}=Rc(),{hideCopyButton:a}=SDe(),l=!a&&s!==void 0,[c,u]=X.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:n??""})),u(!0)}catch{Bm(Mo.CLIPBOARD_ERROR,{[s]:n})}};return Ne.createElement(NDe,{align:e,onPointerLeave:()=>u(!1)},Ne.createElement(GDe,t),l&&!o&&Ne.createElement("div",{title:`Click to copy ${typeof r=="string"?r:s} value`},c?Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ne.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ne.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const zDe=["toggled"],HDe=Ai("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function yG(i){let{toggled:e}=i,t=Hs(i,zDe);return Ne.createElement(HDe,za({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),Ne.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const VDe=["input"];function Nd(i){let{input:e}=i,t=Hs(i,VDe);return e?Ne.createElement(mse,t):Ne.createElement(Ase,t)}function yse({value:i,type:e,settings:t,setValue:n}){const[r,s]=X.useState(YK(e,i,t)),o=X.useRef(i),a=X.useRef(t);a.current=t;const l=X.useCallback(u=>s(YK(e,u,a.current)),[e]),c=X.useCallback(u=>{try{n(u)}catch(f){const{type:h,previousValue:p}=f;if(h!=="LEVA_ERROR")throw f;l(p)}},[l,n]);return X.useEffect(()=>{sL(i,o.current)||l(i),o.current=i},[i,l]),{displayValue:r,onChange:s,onUpdate:c}}function O3(i,e){const{emitOnEditStart:t,emitOnEditEnd:n}=Rc();return cTe(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=i(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),n==null||n()),s},e)}function qDe(i){const e=X.useRef(null),t=X.useRef(null),n=X.useRef(!1);return X.useEffect(()=>{const r=nse(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,i(e.current,t.current)},250);return window.addEventListener("resize",r),n.current||(r(),n.current=!0),()=>window.removeEventListener("resize",r)},[i]),X.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function vse(){const i=X.useRef(null),e=X.useRef({x:0,y:0}),t=X.useCallback(n=>{Object.assign(e.current,n),i.current&&(i.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[i,t]}const $De=["__refCount"],bI=(i,e)=>{if(!i[e])return null;const t=i[e];return Hs(t,$De)};function jDe(i){const e=I3(),[t,n]=X.useState(bI(e.getData(),i)),r=X.useCallback(c=>e.setValueAtPath(i,c,!0),[i,e]),s=X.useCallback(c=>e.setSettingsAtPath(i,c),[i,e]),o=X.useCallback(c=>e.disableInputAtPath(i,c),[i,e]),a=X.useCallback(()=>e.emitOnEditStart(i),[i,e]),l=X.useCallback(()=>e.emitOnEditEnd(i),[i,e]);return X.useEffect(()=>{n(bI(e.getData(),i));const c=e.useStore.subscribe(u=>bI(u.data,i),n,{equalityFn:Tre});return()=>c()},[e,i]),[t,{set:r,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const WDe=Ai("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),xse=Ai("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),xU=Ai("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),bse=Ai("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),_se=Ai("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function KDe({value:i,min:e,max:t,onDrag:n,step:r,initialValue:s}){const o=X.useRef(null),a=X.useRef(null),l=X.useRef(0),c=Wm("sizes","scrubberWidth"),u=O3(({event:h,first:p,xy:[m],movement:[g],memo:b})=>{if(p){const{width:C,left:R}=o.current.getBoundingClientRect();l.current=C-parseFloat(c),b=(h==null?void 0:h.target)===a.current?i:dL((m-R)/C,e,t)}const T=b+dL(g/l.current,0,t-e);return n(ose(T,{step:r,initialValue:s})),b}),f=hL(i,e,t);return Ne.createElement(bse,za({ref:o},u()),Ne.createElement(xse,null,Ne.createElement(_se,{style:{left:0,right:`${(1-f)*100}%`}})),Ne.createElement(xU,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const YDe=Ne.memo(({label:i,onUpdate:e,step:t,innerLabelTrim:n})=>{const[r,s]=X.useState(!1),o=O3(({active:a,delta:[l],event:c,memo:u=0,first:f,last:h,target:p})=>(f&&p.requestPointerLock(),h&&document.exitPointerLock(),s(a),u+=l/2,Math.abs(u)>=1&&(e(m=>parseFloat(m)+Math.floor(u)*t*ise(c)),u=0),u));return Ne.createElement(MDe,za({dragging:r,title:i.length>1?i:""},o()),i.slice(0,n))});function Sse({label:i,id:e,displayValue:t,onUpdate:n,onChange:r,settings:s,innerLabelTrim:o=1}){const a=o>0&&Ne.createElement(YDe,{label:i,step:s.step,onUpdate:n,innerLabelTrim:o});return Ne.createElement(LDe,{id:e,value:String(t),onUpdate:n,onChange:r,innerLabel:a})}function XDe(){const i=Rc(),{label:e,value:t,onUpdate:n,settings:r,id:s}=i,{min:o,max:a}=r,l=a!==1/0&&o!==-1/0;return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,e),Ne.createElement(WDe,{hasRange:l},l&&Ne.createElement(KDe,za({value:parseFloat(t),onDrag:n},r)),Ne.createElement(Sse,za({},i,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:QDe}=ase,ZDe=Hs(ase,["sanitizeStep"]);var JDe=Wi({component:XDe},ZDe);const eLe=(i,e)=>Qu().schema({options:Qu().passesAnyOf(Qu().object(),Qu().array())}).test(e),tLe=(i,{values:e})=>{if(e.indexOf(i)<0)throw Error("Selected value doesn't match Select options");return i},nLe=(i,{values:e})=>e.indexOf(i),iLe=i=>{let{value:e,options:t}=i,n,r;return Array.isArray(t)?(r=t,n=t.map(s=>String(s))):(r=Object.values(t),n=Object.keys(t)),"value"in i?r.includes(e)||(n.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:n,values:r}}};var rLe=Object.freeze({__proto__:null,schema:eLe,sanitize:tLe,format:nLe,normalize:iLe});const sLe=Ai("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),bU=Ai("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),oLe=Ai("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${bU}:focus + &`]:{$focusStyle:""},[`${bU}:hover + &`]:{$hoverStyle:""}});function aLe({displayValue:i,value:e,onUpdate:t,id:n,settings:r,disabled:s}){const{keys:o,values:a}=r,l=X.useRef();return e===a[i]&&(l.current=o[i]),Ne.createElement(sLe,null,Ne.createElement(bU,{id:n,value:i,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>Ne.createElement("option",{key:c,value:u},c))),Ne.createElement(oLe,null,l.current),Ne.createElement(yG,{toggled:!0}))}function lLe(){const{label:i,value:e,displayValue:t,onUpdate:n,id:r,disabled:s,settings:o}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(aLe,{id:r,value:e,displayValue:t,onUpdate:n,settings:o,disabled:s}))}var cLe=Wi({component:lLe},rLe);const uLe=i=>Qu().string().test(i),fLe=i=>{if(typeof i!="string")throw Error("Invalid string");return i},hLe=({value:i,editable:e=!0,rows:t=!1})=>({value:i,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var dLe=Object.freeze({__proto__:null,schema:uLe,sanitize:fLe,normalize:hLe});const pLe=["displayValue","onUpdate","onChange","editable"],ALe=Ai("div",{whiteSpace:"pre-wrap"});function mLe(i){let{displayValue:e,onUpdate:t,onChange:n,editable:r=!0}=i,s=Hs(i,pLe);return r?Ne.createElement(mG,za({value:e,onUpdate:t,onChange:n},s)):Ne.createElement(ALe,null,e)}function gLe(){const{label:i,settings:e,displayValue:t,onUpdate:n,onChange:r}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(mLe,za({displayValue:t,onUpdate:n,onChange:r},e)))}var yLe=Wi({component:gLe},dLe);const vLe=i=>Qu().boolean().test(i),xLe=i=>{if(typeof i!="boolean")throw Error("Invalid boolean");return i};var bLe=Object.freeze({__proto__:null,schema:vLe,sanitize:xLe});const _Le=Ai("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function SLe({value:i,onUpdate:e,id:t,disabled:n}){return Ne.createElement(_Le,null,Ne.createElement("input",{id:t,type:"checkbox",checked:i,onChange:r=>e(r.currentTarget.checked),disabled:n}),Ne.createElement("label",{htmlFor:t},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ne.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function TLe(){const{label:i,value:e,onUpdate:t,disabled:n,id:r}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(SLe,{value:e,onUpdate:t,id:r,disabled:n}))}var ELe=Wi({component:TLe},bLe);const wLe=["locked"];function MLe({value:i,id:e,valueKey:t,settings:n,onUpdate:r,innerLabelTrim:s}){const o=X.useRef(i[t]);o.current=i[t];const a=X.useCallback(c=>r({[t]:tse({type:"NUMBER",value:o.current,settings:n},c)}),[r,n,t]),l=yse({type:"NUMBER",value:i[t],settings:n,setValue:a});return Ne.createElement(Sse,{id:e,label:t,value:i[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:n,innerLabelTrim:s})}const CLe=Ai("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function RLe(i){let{locked:e}=i,t=Hs(i,wLe);return Ne.createElement("svg",za({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?Ne.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ne.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function vG({value:i,onUpdate:e,settings:t,innerLabelTrim:n}){const{id:r,setSettings:s}=Rc(),{lock:o,locked:a}=t;return Ne.createElement(CLe,{withLock:o},o&&Ne.createElement(RLe,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(i).map((l,c)=>Ne.createElement(MLe,{id:c===0?r:`${r}.${l}`,key:l,valueKey:l,value:i,settings:t[l],onUpdate:e,innerLabelTrim:n})))}const Tse=(i,e)=>{const t={};let n=0,r=1/0;Object.entries(i).forEach(([s,o])=>{t[s]=sse(Wi({value:o},e[s])).settings,n=Math.max(n,t[s].step),r=Math.min(r,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=n,t[s].pad=r)}return t},DLe=["lock"],LLe=["value"];function PLe(i){const e=Qu().array().length(i).every.number(),t=n=>{if(!n||typeof n!="object")return!1;const r=Object.values(n);return r.length===i&&r.every(s=>isFinite(s))};return n=>e.test(n)||t(n)}function NLe(i){return Array.isArray(i)?"array":"object"}function zw(i,e,t){return NLe(i)===e?i:e==="array"?Object.values(i):hDe(i,t)}const BLe=(i,e,t)=>{const n=zw(i,"object",e.keys);for(let o in n)n[o]=rse(n[o],e[o]);const r=Object.keys(n);let s={};if(r.length===e.keys.length)s=n;else{const o=zw(t,"object",e.keys);if(r.length===1&&e.locked){const a=r[0],l=n[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=Wi(Wi({},o),n)}return zw(s,e.format,e.keys)},ILe=(i,e)=>zw(i,"object",e.keys),OLe=i=>!!i&&("step"in i||"min"in i||"max"in i);function FLe(i,e,t=[]){const{lock:n=!1}=e,r=Hs(e,DLe),s=Array.isArray(i)?"array":"object",o=s==="object"?Object.keys(i):t,a=zw(i,"object",o),l=OLe(r)?o.reduce((u,f)=>Object.assign(u,{[f]:r}),{}):r,c=Tse(a,l);return{value:s==="array"?i:a,settings:Wi(Wi({},c),{},{format:s,keys:o,lock:n,locked:!1})}}function Ese(i){return{schema:PLe(i.length),normalize:e=>{let{value:t}=e,n=Hs(e,LLe);return FLe(t,n,i)},format:(e,t)=>ILe(e,t),sanitize:(e,t,n)=>BLe(e,t,n)}}var ULe={grad:.9,turn:360,rad:360/(2*Math.PI)},xm=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},vl=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},fd=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},wse=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},sY=function(i){return{r:fd(i.r,0,255),g:fd(i.g,0,255),b:fd(i.b,0,255),a:fd(i.a)}},_I=function(i){return{r:vl(i.r),g:vl(i.g),b:vl(i.b),a:vl(i.a,3)}},kLe=/^#([0-9a-f]{3,8})$/i,k5=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},Mse=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},Cse=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),c=s%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:r}},oY=function(i){return{h:wse(i.h),s:fd(i.s,0,100),l:fd(i.l,0,100),a:fd(i.a)}},aY=function(i){return{h:vl(i.h),s:vl(i.s),l:vl(i.l),a:vl(i.a,3)}},lY=function(i){return Cse((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},Hw=function(i){return{h:(e=Mse(i)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},GLe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,zLe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HLe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VLe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_U={string:[[function(i){var e=kLe.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?vl(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?vl(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=HLe.exec(i)||VLe.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:sY({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=GLe.exec(i)||zLe.exec(i);if(!e)return null;var t,n,r=oY({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(ULe[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return lY(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=r===void 0?1:r;return xm(e)&&xm(t)&&xm(n)?sY({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,r=i.a,s=r===void 0?1:r;if(!xm(e)||!xm(t)||!xm(n))return null;var o=oY({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return lY(o)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,r=i.a,s=r===void 0?1:r;if(!xm(e)||!xm(t)||!xm(n))return null;var o=function(a){return{h:wse(a.h),s:fd(a.s,0,100),v:fd(a.v,0,100),a:fd(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return Cse(o)},"hsv"]]},cY=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},Rse=function(i){return typeof i=="string"?cY(i.trim(),_U.string):typeof i=="object"&&i!==null?cY(i,_U.object):[null,void 0]},qLe=function(i){return Rse(i)[1]},SI=function(i,e){var t=Hw(i);return{h:t.h,s:fd(t.s+100*e,0,100),l:t.l,a:t.a}},TI=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},uY=function(i,e){var t=Hw(i);return{h:t.h,s:t.s,l:fd(t.l+100*e,0,100),a:t.a}},SU=function(){function i(e){this.parsed=Rse(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return vl(TI(this.rgba),2)},i.prototype.isDark=function(){return TI(this.rgba)<.5},i.prototype.isLight=function(){return TI(this.rgba)>=.5},i.prototype.toHex=function(){return e=_I(this.rgba),t=e.r,n=e.g,r=e.b,o=(s=e.a)<1?k5(vl(255*s)):"","#"+k5(t)+k5(n)+k5(r)+o;var e,t,n,r,s,o},i.prototype.toRgb=function(){return _I(this.rgba)},i.prototype.toRgbString=function(){return e=_I(this.rgba),t=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},i.prototype.toHsl=function(){return aY(Hw(this.rgba))},i.prototype.toHslString=function(){return e=aY(Hw(this.rgba)),t=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},i.prototype.toHsv=function(){return e=Mse(this.rgba),{h:vl(e.h),s:vl(e.s),v:vl(e.v),a:vl(e.a,3)};var e},i.prototype.invert=function(){return Jc({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Jc(SI(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Jc(SI(this.rgba,-e))},i.prototype.grayscale=function(){return Jc(SI(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Jc(uY(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Jc(uY(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Jc({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):vl(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=Hw(this.rgba);return typeof e=="number"?Jc({h:e,s:t.s,l:t.l,a:t.a}):vl(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Jc(e).toHex()},i}(),Jc=function(i){return i instanceof SU?i:new SU(i)},fY=[],$Le=function(i){i.forEach(function(e){fY.indexOf(e)<0&&(e(SU,_U),fY.push(e))})};function jLe(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var s={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,h="black";if(!s.length)for(var p in t)s[p]=new i(t[p]).toRgb();for(var m in t){var g=(a=u,l=s[m],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<f&&(f=g,h=m)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new i(l).toRgb():null},"name"])}function dT(){return(dT=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i}).apply(this,arguments)}function xG(i,e){if(i==null)return{};var t,n,r={},s=Object.keys(i);for(n=0;n<s.length;n++)e.indexOf(t=s[n])>=0||(r[t]=i[t]);return r}function TU(i){var e=X.useRef(i),t=X.useRef(function(n){e.current&&e.current(n)});return e.current=i,t.current}var xS=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i<e?e:i},Vw=function(i){return"touches"in i},EU=function(i){return i&&i.ownerDocument.defaultView||self},hY=function(i,e,t){var n=i.getBoundingClientRect(),r=Vw(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:xS((r.pageX-(n.left+EU(i).pageXOffset))/n.width),top:xS((r.pageY-(n.top+EU(i).pageYOffset))/n.height)}},dY=function(i){!Vw(i)&&i.preventDefault()},bG=Ne.memo(function(i){var e=i.onMove,t=i.onKey,n=xG(i,["onMove","onKey"]),r=X.useRef(null),s=TU(e),o=TU(t),a=X.useRef(null),l=X.useRef(!1),c=X.useMemo(function(){var p=function(b){dY(b),(Vw(b)?b.touches.length>0:b.buttons>0)&&r.current?s(hY(r.current,b,a.current)):g(!1)},m=function(){return g(!1)};function g(b){var T=l.current,C=EU(r.current),R=b?C.addEventListener:C.removeEventListener;R(T?"touchmove":"mousemove",p),R(T?"touchend":"mouseup",m)}return[function(b){var T=b.nativeEvent,C=r.current;if(C&&(dY(T),!function(P,I){return I&&!Vw(P)}(T,l.current)&&C)){if(Vw(T)){l.current=!0;var R=T.changedTouches||[];R.length&&(a.current=R[0].identifier)}C.focus(),s(hY(C,T,a.current)),g(!0)}},function(b){var T=b.which||b.keyCode;T<37||T>40||(b.preventDefault(),o({left:T===39?.05:T===37?-.05:0,top:T===40?.05:T===38?-.05:0}))},g]},[o,s]),u=c[0],f=c[1],h=c[2];return X.useEffect(function(){return h},[h]),Ne.createElement("div",dT({},n,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:f,tabIndex:0,role:"slider"}))}),F3=function(i){return i.filter(Boolean).join(" ")},_G=function(i){var e=i.color,t=i.left,n=i.top,r=n===void 0?.5:n,s=F3(["react-colorful__pointer",i.className]);return Ne.createElement("div",{className:s,style:{top:100*r+"%",left:100*t+"%"}},Ne.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},cu=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t},Dse=function(i){var e=i.s,t=i.v,n=i.a,r=(200-e)*t/100;return{h:cu(i.h),s:cu(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:cu(r/2),a:cu(n,2)}},wU=function(i){var e=Dse(i);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},EI=function(i){var e=Dse(i);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},Lse=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),c=s%6;return{r:cu(255*[n,a,o,o,l,n][c]),g:cu(255*[l,n,n,a,o,o][c]),b:cu(255*[o,o,l,n,n,a][c]),a:cu(r,2)}},Pse=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:cu(60*(a<0?a+6:a)),s:cu(s?o/s*100:0),v:cu(s/255*100),a:r}},Nse=Ne.memo(function(i){var e=i.hue,t=i.onChange,n=F3(["react-colorful__hue",i.className]);return Ne.createElement("div",{className:n},Ne.createElement(bG,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:xS(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":cu(e),"aria-valuemax":"360","aria-valuemin":"0"},Ne.createElement(_G,{className:"react-colorful__hue-pointer",left:e/360,color:wU({h:e,s:100,v:100,a:1})})))}),Bse=Ne.memo(function(i){var e=i.hsva,t=i.onChange,n={backgroundColor:wU({h:e.h,s:100,v:100,a:1})};return Ne.createElement("div",{className:"react-colorful__saturation",style:n},Ne.createElement(bG,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:xS(e.s+100*r.left,0,100),v:xS(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+cu(e.s)+"%, Brightness "+cu(e.v)+"%"},Ne.createElement(_G,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:wU(e)})))}),SG=function(i,e){if(i===e)return!0;for(var t in i)if(i[t]!==e[t])return!1;return!0};function Ise(i,e,t){var n=TU(t),r=X.useState(function(){return i.toHsva(e)}),s=r[0],o=r[1],a=X.useRef({color:e,hsva:s});X.useEffect(function(){if(!i.equal(e,a.current.color)){var c=i.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,i]),X.useEffect(function(){var c;SG(s,a.current.hsva)||i.equal(c=i.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},n(c))},[s,i,n]);var l=X.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var WLe=typeof window<"u"?X.useLayoutEffect:X.useEffect,KLe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},pY=new Map,Ose=function(i){WLe(function(){var e=i.current?i.current.ownerDocument:document;if(e!==void 0&&!pY.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,pY.set(e,t);var n=KLe();n&&t.setAttribute("nonce",n),e.head.appendChild(t)}},[])},YLe=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,s=i.onChange,o=xG(i,["className","colorModel","color","onChange"]),a=X.useRef(null);Ose(a);var l=Ise(t,r,s),c=l[0],u=l[1],f=F3(["react-colorful",e]);return Ne.createElement("div",dT({},o,{ref:a,className:f}),Ne.createElement(Bse,{hsva:c,onChange:u}),Ne.createElement(Nse,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},XLe=function(i){var e=i.className,t=i.hsva,n=i.onChange,r={backgroundImage:"linear-gradient(90deg, "+EI(Object.assign({},t,{a:0}))+", "+EI(Object.assign({},t,{a:1}))+")"},s=F3(["react-colorful__alpha",e]),o=cu(100*t.a);return Ne.createElement("div",{className:s},Ne.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),Ne.createElement(bG,{onMove:function(a){n({a:a.left})},onKey:function(a){n({a:xS(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Ne.createElement(_G,{className:"react-colorful__alpha-pointer",left:t.a,color:EI(t)})))},QLe=function(i){var e=i.className,t=i.colorModel,n=i.color,r=n===void 0?t.defaultColor:n,s=i.onChange,o=xG(i,["className","colorModel","color","onChange"]),a=X.useRef(null);Ose(a);var l=Ise(t,r,s),c=l[0],u=l[1],f=F3(["react-colorful",e]);return Ne.createElement("div",dT({},o,{ref:a,className:f}),Ne.createElement(Bse,{hsva:c,onChange:u}),Ne.createElement(Nse,{hue:c.h,onChange:u}),Ne.createElement(XLe,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},ZLe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Pse,fromHsva:Lse,equal:SG},JLe=function(i){return Ne.createElement(QLe,dT({},i,{colorModel:ZLe}))},e8e={defaultColor:{r:0,g:0,b:0},toHsva:function(i){return Pse({r:i.r,g:i.g,b:i.b,a:1})},fromHsva:function(i){return{r:(e=Lse(i)).r,g:e.g,b:e.b};var e},equal:SG},t8e=function(i){return Ne.createElement(YLe,dT({},i,{colorModel:e8e}))},wI={exports:{}},MI,AY;function n8e(){if(AY)return MI;AY=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return MI=i,MI}var CI,mY;function i8e(){if(mY)return CI;mY=1;var i=n8e();function e(){}function t(){}return t.resetWarningCache=e,CI=function(){function n(o,a,l,c,u,f){if(f!==i){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function r(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},CI}var gY;function r8e(){return gY||(gY=1,wI.exports=i8e()()),wI.exports}var s8e=r8e();const Z=Ag(s8e);function pT(i,e,t,n){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}function AT(i,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(n=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],r=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function o8e(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function a8e(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(o8e(arguments[e]));return i}var l8e=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function U3(i,e){var t=c8e(i);if(typeof t.path!="string"){var n=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function c8e(i){var e=i.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!i.type){var n=e.split(".").pop().toLowerCase(),r=l8e.get(n);r&&Object.defineProperty(i,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return i}var u8e=[".DS_Store","Thumbs.db"];function f8e(i){return pT(this,void 0,void 0,function(){return AT(this,function(e){return AL(i)&&h8e(i)?[2,m8e(i.dataTransfer,i.type)]:d8e(i)?[2,p8e(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,A8e(i)]:[2,[]]})})}function h8e(i){return AL(i.dataTransfer)}function d8e(i){return AL(i)&&AL(i.target)}function AL(i){return typeof i=="object"&&i!==null}function p8e(i){return MU(i.target.files).map(function(e){return U3(e)})}function A8e(i){return pT(this,void 0,void 0,function(){var e;return AT(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(n){return n.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(n){return U3(n)})]}})})}function m8e(i,e){return pT(this,void 0,void 0,function(){var t,n;return AT(this,function(r){switch(r.label){case 0:return i===null?[2,[]]:i.items?(t=MU(i.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(g8e))]):[3,2];case 1:return n=r.sent(),[2,yY(Fse(n))];case 2:return[2,yY(MU(i.files).map(function(s){return U3(s)}))]}})})}function yY(i){return i.filter(function(e){return u8e.indexOf(e.name)===-1})}function MU(i){if(i===null)return[];for(var e=[],t=0;t<i.length;t++){var n=i[t];e.push(n)}return e}function g8e(i){if(typeof i.webkitGetAsEntry!="function")return vY(i);var e=i.webkitGetAsEntry();return e&&e.isDirectory?Use(e):vY(i)}function Fse(i){return i.reduce(function(e,t){return a8e(e,Array.isArray(t)?Fse(t):[t])},[])}function vY(i){var e=i.getAsFile();if(!e)return Promise.reject(i+" is not a File");var t=U3(e);return Promise.resolve(t)}function y8e(i){return pT(this,void 0,void 0,function(){return AT(this,function(e){return[2,i.isDirectory?Use(i):v8e(i)]})})}function Use(i){var e=i.createReader();return new Promise(function(t,n){var r=[];function s(){var o=this;e.readEntries(function(a){return pT(o,void 0,void 0,function(){var l,c,u;return AT(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=f.sent(),t(l),[3,4];case 3:return c=f.sent(),n(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(y8e)),r.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){n(a)})}s()})}function v8e(i){return pT(this,void 0,void 0,function(){return AT(this,function(e){return[2,new Promise(function(t,n){i.file(function(r){var s=U3(r,i.fullPath);t(s)},function(r){n(r)})})]})})}var G5={},xY;function x8e(){return xY||(xY=1,G5.__esModule=!0,G5.default=function(i,e){if(i&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=i.name||"",r=(i.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?n.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):r===a})}return!0}),G5}var b8e=x8e();const _8e=Ag(b8e);function bY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function _Y(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bY(Object(t),!0).forEach(function(n){kse(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):bY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function kse(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function SY(i,e){return w8e(i)||E8e(i,e)||T8e(i,e)||S8e()}function S8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8e(i,e){if(i){if(typeof i=="string")return TY(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TY(i,e)}}function TY(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function E8e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function w8e(i){if(Array.isArray(i))return i}var M8e="file-invalid-type",C8e="file-too-large",R8e="file-too-small",D8e="too-many-files",L8e=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:M8e,message:"File type must be ".concat(t)}},EY=function(e){return{code:C8e,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},wY=function(e){return{code:R8e,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},P8e={code:D8e,message:"Too many files"};function Gse(i,e){var t=i.type==="application/x-moz-file"||_8e(i,e);return[t,t?null:L8e(e)]}function zse(i,e,t){if(OE(i.size))if(OE(e)&&OE(t)){if(i.size>t)return[!1,EY(t)];if(i.size<e)return[!1,wY(e)]}else{if(OE(e)&&i.size<e)return[!1,wY(e)];if(OE(t)&&i.size>t)return[!1,EY(t)]}return[!0,null]}function OE(i){return i!=null}function N8e(i){var e=i.files,t=i.accept,n=i.minSize,r=i.maxSize,s=i.multiple,o=i.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=Gse(a,t),c=SY(l,1),u=c[0],f=zse(a,n,r),h=SY(f,1),p=h[0];return u&&p})}function mL(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function z5(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function MY(i){i.preventDefault()}function B8e(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function I8e(i){return i.indexOf("Edge/")!==-1}function O8e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return B8e(i)||I8e(i)}function S0(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return e.some(function(a){return!mL(n)&&a&&a.apply(void 0,[n].concat(s)),mL(n)})}}function F8e(){return"showOpenFilePicker"in window}function U8e(i){return i=typeof i=="string"?i.split(","):i,[{description:"everything",accept:Array.isArray(i)?i.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return _Y(_Y({},e),{},kse({},t,[]))},{}):{}}]}function k8e(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function G8e(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}var z8e=["children"],H8e=["open"],V8e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],q8e=["refKey","onChange","onClick"];function $8e(i){return K8e(i)||W8e(i)||Hse(i)||j8e()}function j8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W8e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function K8e(i){if(Array.isArray(i))return CU(i)}function RI(i,e){return Q8e(i)||X8e(i,e)||Hse(i,e)||Y8e()}function Y8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hse(i,e){if(i){if(typeof i=="string")return CU(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return CU(i,e)}}function CU(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function X8e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,s=!1,o,a;try{for(t=t.call(i);!(r=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return n}}function Q8e(i){if(Array.isArray(i))return i}function CY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Eo(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(t),!0).forEach(function(n){RU(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):CY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function RU(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function gL(i,e){if(i==null)return{};var t=Z8e(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function Z8e(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}var TG=X.forwardRef(function(i,e){var t=i.children,n=gL(i,z8e),r=qse(n),s=r.open,o=gL(r,H8e);return X.useImperativeHandle(e,function(){return{open:s}},[s]),Ne.createElement(X.Fragment,null,t(Eo(Eo({},o),{},{open:s})))});TG.displayName="Dropzone";var Vse={disabled:!1,getFilesFromEvent:f8e,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};TG.defaultProps=Vse;TG.propTypes={children:Z.func,accept:Z.oneOfType([Z.string,Z.arrayOf(Z.string)]),multiple:Z.bool,preventDropOnDocument:Z.bool,noClick:Z.bool,noKeyboard:Z.bool,noDrag:Z.bool,noDragEventsBubbling:Z.bool,minSize:Z.number,maxSize:Z.number,maxFiles:Z.number,disabled:Z.bool,getFilesFromEvent:Z.func,onFileDialogCancel:Z.func,onFileDialogOpen:Z.func,useFsAccessApi:Z.bool,onDragEnter:Z.func,onDragLeave:Z.func,onDragOver:Z.func,onDrop:Z.func,onDropAccepted:Z.func,onDropRejected:Z.func,validator:Z.func};var DU={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function qse(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Eo(Eo({},Vse),i),t=e.accept,n=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,h=e.onDrop,p=e.onDropAccepted,m=e.onDropRejected,g=e.onFileDialogCancel,b=e.onFileDialogOpen,T=e.useFsAccessApi,C=e.preventDropOnDocument,R=e.noClick,P=e.noKeyboard,I=e.noDrag,F=e.noDragEventsBubbling,k=e.validator,q=X.useMemo(function(){return typeof b=="function"?b:RY},[b]),H=X.useMemo(function(){return typeof g=="function"?g:RY},[g]),O=X.useRef(null),$=X.useRef(null),ee=X.useReducer(J8e,DU),Y=RI(ee,2),oe=Y[0],re=Y[1],Q=oe.isFocused,se=oe.isFileDialogActive,le=oe.draggedFiles,de=X.useRef(typeof window<"u"&&window.isSecureContext&&T&&F8e()),ie=function(){!de.current&&se&&setTimeout(function(){if($.current){var Ve=$.current.files;Ve.length||(re({type:"closeDialog"}),H())}},300)};X.useEffect(function(){return window.addEventListener("focus",ie,!1),function(){window.removeEventListener("focus",ie,!1)}},[$,se,H,de]);var ge=X.useRef([]),Ce=function(Ve){O.current&&O.current.contains(Ve.target)||(Ve.preventDefault(),ge.current=[])};X.useEffect(function(){return C&&(document.addEventListener("dragover",MY,!1),document.addEventListener("drop",Ce,!1)),function(){C&&(document.removeEventListener("dragover",MY),document.removeEventListener("drop",Ce))}},[O,C]);var Ie=X.useCallback(function(Pe){Pe.preventDefault(),Pe.persist(),ft(Pe),ge.current=[].concat($8e(ge.current),[Pe.target]),z5(Pe)&&Promise.resolve(r(Pe)).then(function(Ve){mL(Pe)&&!F||(re({draggedFiles:Ve,isDragActive:!0,type:"setDraggedFiles"}),c&&c(Pe))})},[r,c,F]),Ee=X.useCallback(function(Pe){Pe.preventDefault(),Pe.persist(),ft(Pe);var Ve=z5(Pe);if(Ve&&Pe.dataTransfer)try{Pe.dataTransfer.dropEffect="copy"}catch{}return Ve&&f&&f(Pe),!1},[f,F]),Be=X.useCallback(function(Pe){Pe.preventDefault(),Pe.persist(),ft(Pe);var Ve=ge.current.filter(function(bt){return O.current&&O.current.contains(bt)}),Tt=Ve.indexOf(Pe.target);Tt!==-1&&Ve.splice(Tt,1),ge.current=Ve,!(Ve.length>0)&&(re({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),z5(Pe)&&u&&u(Pe))},[O,u,F]),qe=X.useCallback(function(Pe,Ve){var Tt=[],bt=[];Pe.forEach(function(sn){var on=Gse(sn,t),mn=RI(on,2),ai=mn[0],Vt=mn[1],_n=zse(sn,o,s),En=RI(_n,2),pn=En[0],Sn=En[1],Fe=k?k(sn):null;if(ai&&pn&&!Fe)Tt.push(sn);else{var xt=[Vt,Sn];Fe&&(xt=xt.concat(Fe)),bt.push({file:sn,errors:xt.filter(function(dn){return dn})})}}),(!a&&Tt.length>1||a&&l>=1&&Tt.length>l)&&(Tt.forEach(function(sn){bt.push({file:sn,errors:[P8e]})}),Tt.splice(0)),re({acceptedFiles:Tt,fileRejections:bt,type:"setFiles"}),h&&h(Tt,bt,Ve),bt.length>0&&m&&m(bt,Ve),Tt.length>0&&p&&p(Tt,Ve)},[re,a,t,o,s,l,h,p,m,k]),it=X.useCallback(function(Pe){Pe.preventDefault(),Pe.persist(),ft(Pe),ge.current=[],z5(Pe)&&Promise.resolve(r(Pe)).then(function(Ve){mL(Pe)&&!F||qe(Ve,Pe)}),re({type:"reset"})},[r,qe,F]),et=X.useCallback(function(){if(de.current){re({type:"openDialog"}),q();var Pe={multiple:a,types:U8e(t)};window.showOpenFilePicker(Pe).then(function(Ve){return r(Ve)}).then(function(Ve){qe(Ve,null),re({type:"closeDialog"})}).catch(function(Ve){k8e(Ve)?(H(Ve),re({type:"closeDialog"})):G8e(Ve)&&(de.current=!1,$.current&&($.current.value=null,$.current.click()))});return}$.current&&(re({type:"openDialog"}),q(),$.current.value=null,$.current.click())},[re,q,H,T,qe,t,a]),Ht=X.useCallback(function(Pe){!O.current||!O.current.isEqualNode(Pe.target)||(Pe.key===" "||Pe.key==="Enter"||Pe.keyCode===32||Pe.keyCode===13)&&(Pe.preventDefault(),et())},[O,et]),_t=X.useCallback(function(){re({type:"focus"})},[]),$t=X.useCallback(function(){re({type:"blur"})},[]),mt=X.useCallback(function(){R||(O8e()?setTimeout(et,0):et())},[R,et]),ut=function(Ve){return n?null:Ve},we=function(Ve){return P?null:ut(Ve)},Jt=function(Ve){return I?null:ut(Ve)},ft=function(Ve){F&&Ve.stopPropagation()},Dt=X.useMemo(function(){return function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ve=Pe.refKey,Tt=Ve===void 0?"ref":Ve,bt=Pe.role,sn=Pe.onKeyDown,on=Pe.onFocus,mn=Pe.onBlur,ai=Pe.onClick,Vt=Pe.onDragEnter,_n=Pe.onDragOver,En=Pe.onDragLeave,pn=Pe.onDrop,Sn=gL(Pe,V8e);return Eo(Eo(RU({onKeyDown:we(S0(sn,Ht)),onFocus:we(S0(on,_t)),onBlur:we(S0(mn,$t)),onClick:ut(S0(ai,mt)),onDragEnter:Jt(S0(Vt,Ie)),onDragOver:Jt(S0(_n,Ee)),onDragLeave:Jt(S0(En,Be)),onDrop:Jt(S0(pn,it)),role:typeof bt=="string"&&bt!==""?bt:"button"},Tt,O),!n&&!P?{tabIndex:0}:{}),Sn)}},[O,Ht,_t,$t,mt,Ie,Ee,Be,it,P,I,n]),Rt=X.useCallback(function(Pe){Pe.stopPropagation()},[]),yn=X.useMemo(function(){return function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ve=Pe.refKey,Tt=Ve===void 0?"ref":Ve,bt=Pe.onChange,sn=Pe.onClick,on=gL(Pe,q8e),mn=RU({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:ut(S0(bt,it)),onClick:ut(S0(sn,Rt)),tabIndex:-1},Tt,$);return Eo(Eo({},mn),on)}},[$,t,a,it,n]),Gt=le.length,Se=Gt>0&&N8e({files:le,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),fe=Gt>0&&!Se;return Eo(Eo({},oe),{},{isDragAccept:Se,isDragReject:fe,isFocused:Q&&!n,getRootProps:Dt,getInputProps:yn,rootRef:O,inputRef:$,open:ut(et)})}function J8e(i,e){switch(e.type){case"focus":return Eo(Eo({},i),{},{isFocused:!0});case"blur":return Eo(Eo({},i),{},{isFocused:!1});case"openDialog":return Eo(Eo({},DU),{},{isFileDialogActive:!0});case"closeDialog":return Eo(Eo({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,n=e.draggedFiles;return Eo(Eo({},i),{},{draggedFiles:n,isDragActive:t});case"setFiles":return Eo(Eo({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Eo({},DU);default:return i}}function RY(){}function ePe(i){let e;const t=new Set,n=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function p(){const m=u(e);if(!f(h,m)){const g=h;c(h=m,g)}}return t.add(p),()=>t.delete(p)},l={setState:n,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=i(n,r,l),l}const tPe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DY=tPe?X.useEffect:X.useLayoutEffect;function nPe(i){const e=typeof i=="function"?ePe(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=X.useReducer(b=>b+1,0),o=e.getState(),a=X.useRef(o),l=X.useRef(n),c=X.useRef(r),u=X.useRef(!1),f=X.useRef();f.current===void 0&&(f.current=n(o));let h,p=!1;(a.current!==o||l.current!==n||c.current!==r||u.current)&&(h=n(o),p=!r(f.current,h)),DY(()=>{p&&(f.current=h),a.current=o,l.current=n,c.current=r,u.current=!1});const m=X.useRef(o);DY(()=>{const b=()=>{try{const C=e.getState(),R=l.current(C);c.current(f.current,R)||(a.current=C,f.current=R,s())}catch{u.current=!0,s()}},T=e.subscribe(b);return e.getState()!==m.current&&b(),T},[]);const g=p?h:f.current;return X.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const iPe=i=>(e,t,n)=>{const r=n.subscribe;return n.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(n.getState());c=h=>{const p=o(h);if(!u(f,p)){const m=f;a(f=p,m)}},l!=null&&l.fireImmediately&&a(f,f)}return r(c)},i(e,t,n)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var DI,LY;function rPe(){return LY||(LY=1,DI=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),DI}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var LI,PY;function $se(){if(PY)return LI;PY=1;var i=rPe();function e(t){return i(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return LI=function(n){var r,s;return!(e(n)===!1||(r=n.constructor,typeof r!="function")||(s=r.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},LI}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var PI,NY;function EG(){if(NY)return PI;NY=1;var i=$se();return PI=function(t){return i(t)||typeof t=="function"||Array.isArray(t)},PI}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var NI,BY;function sPe(){return BY||(BY=1,NI=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e)===!1)break}),NI}var BI,IY;function oPe(){if(IY)return BI;IY=1;var i=EG(),e=sPe();function t(o,a){for(var l=arguments.length,c=0;++c<l;){var u=arguments[c];r(u)&&e(u,n,o)}return o}function n(o,a){if(s(a)){var l=this[a];r(o)&&r(l)?t(l,o):this[a]=o}}function r(o){return i(o)&&!Array.isArray(o)}function s(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return BI=t,BI}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var II,OY;function aPe(){if(OY)return II;OY=1,II=function(t,n,r,s,o){if(!i(t)||!n)return t;if(n=e(n),r&&(n+="."+e(r)),s&&(n+="."+e(s)),o&&(n+="."+e(o)),n in t)return t[n];for(var a=n.split("."),l=a.length,c=-1;t&&++c<l;){for(var u=a[c];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+a[++c];t=t[u]}return t};function i(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return II}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var OI,FY;function lPe(){return FY||(FY=1,OI=function(i,e){if(i===null||typeof i>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return i;for(var t=Object.prototype.propertyIsEnumerable,n=Object(i),r=arguments.length,s=0;++s<r;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(n[c]=o[c])}return n}),OI}var FI,UY;function cPe(){if(UY)return FI;UY=1;var i=EG(),e=lPe();FI=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");s(a)||(a={});for(var l=1;l<arguments.length;l++){var c=arguments[l];n(c)&&(c=r(c)),s(c)&&(t(a,c),e(a,c))}return a};function t(a,l){for(var c in l)o(l,c)&&(a[c]=l[c])}function n(a){return a&&typeof a=="string"}function r(a){var l={};for(var c in a)l[c]=a[c];return l}function s(a){return a&&typeof a=="object"||i(a)}function o(a,l){return Object.prototype.hasOwnProperty.call(a,l)}return FI}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var UI,kY;function uPe(){if(kY)return UI;kY=1;var i=cPe();UI=function(r,s,o){if(typeof r!="string")throw new TypeError("expected a string");typeof s=="function"&&(o=s,s=null),typeof s=="string"&&(s={sep:s});var a=i({sep:"."},s),l=a.quotes||['"',"'","`"],c;a.brackets===!0?c={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(c=a.brackets);var u=[],f=[],h=[""],p=a.sep,m=r.length,g=-1,b;function T(){if(c&&f.length)return c[f[f.length-1]]}for(;++g<m;){var C=r[g],R=r[g+1],P={val:C,idx:g,arr:h,str:r};if(u.push(P),C==="\\"){P.val=n(a,r,g)===!0?C+R:R,P.escaped=!0,typeof o=="function"&&o(P),h[h.length-1]+=P.val,g++;continue}if(c&&c[C]){f.push(C);var I=T(),F=g+1;if(r.indexOf(I,F+1)!==-1)for(;f.length&&F<m;){var k=r[++F];if(k==="\\"){k++;continue}if(l.indexOf(k)!==-1){F=e(r,k,F+1);continue}if(I=T(),f.length&&r.indexOf(I,F+1)===-1)break;if(c[k]){f.push(k);continue}I===k&&f.pop()}if(b=F,b===-1){h[h.length-1]+=C;continue}C=r.slice(g,b+1),P.val=C,P.idx=g=b}if(l.indexOf(C)!==-1){if(b=e(r,C,g+1),b===-1){h[h.length-1]+=C;continue}t(C,a)===!0?C=r.slice(g,b+1):C=r.slice(g+1,b),P.val=C,P.idx=g=b}if(typeof o=="function"&&(o(P,u),C=P.val,g=P.idx),P.val===p&&P.split!==!1){h.push("");continue}h[h.length-1]+=P.val}return h};function e(r,s,o,a){var l=r.indexOf(s,o);return r.charAt(l-1)==="\\"?e(r,s,l+1):l}function t(r,s){return s.keepDoubleQuotes===!0&&r==='"'||s.keepSingleQuotes===!0&&r==="'"?!0:s.keepQuotes}function n(r,s,o){return typeof r.keepEscaping=="function"?r.keepEscaping(s,o):r.keepEscaping===!0||s[o+1]==="\\"}return UI}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var kI,GY;function fPe(){return GY||(GY=1,kI=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),kI}var GI,zY;function hPe(){if(zY)return GI;zY=1;var i=fPe();GI=function(r){i(r)||(r={});for(var s=arguments.length,o=1;o<s;o++){var a=arguments[o];i(a)&&e(r,a)}return r};function e(n,r){for(var s in r)t(r,s)&&(n[s]=r[s])}function t(n,r){return Object.prototype.hasOwnProperty.call(n,r)}return GI}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var zI,HY;function dPe(){return HY||(HY=1,zI=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),zI}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var HI,VY;function pPe(){if(VY)return HI;VY=1;var i=uPe(),e=hPe(),t=$se(),n=dPe();HI=function(s,o,a){if(!n(s)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return s;for(var l=i(o,{sep:".",brackets:!0}).filter(r),c=l.length,u=-1,f=s;++u<c;){var h=l[u];if(u!==c-1){n(f[h])||(f[h]={}),f=f[h];continue}t(f[h])&&t(a)?f[h]=e({},f[h],a):f[h]=a}return s};function r(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return HI}var VI,qY;function APe(){if(qY)return VI;qY=1;var i=EG(),e=oPe(),t=aPe(),n=pPe();return VI=function(s,o,a){if(!i(s))throw new TypeError("expected an object");if(typeof o!="string"||a==null)return e.apply(null,arguments);if(typeof a=="string")return n(s,o,a),s;var l=t(s,o);return i(a)&&i(l)&&(a=e({},l,a)),n(s,o,a),s},VI}var mPe=APe();const gPe=Ag(mPe),wG=(...i)=>i.filter(Boolean).join(".");function yPe(i){const e=i.split(".");return[e.pop(),e.join(".")||void 0]}function vPe(i){const e=X.useRef(null),t=X.useRef(null),n=X.useRef(!0);return X.useLayoutEffect(()=>{i||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),X.useEffect(()=>{if(n.current){n.current=!1;return}let r;const s=e.current,o=()=>{i&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",i||(s.style.overflow="hidden",r=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(r)}},[i]),{wrapperRef:e,contentRef:t}}const xPe=i=>{const[e,t]=X.useState(i.getVisiblePaths());return X.useEffect(()=>{t(i.getVisiblePaths());const n=i.useStore.subscribe(i.getVisiblePaths,t,{equalityFn:Tre});return()=>n()},[i]),e};function jse(i=3){const e=X.useRef(null),t=X.useRef(null),[n,r]=X.useState(!1),s=X.useCallback(()=>r(!0),[]),o=X.useCallback(()=>r(!1),[]);return X.useLayoutEffect(()=>{if(n){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=t.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",f==="down"?t.current.style.top=a+i+"px":t.current.style.bottom=window.innerHeight-l+i+"px"}},[i,n]),{popinRef:e,wrapperRef:t,shown:n,show:s,hide:o}}$Le([jLe]);const bPe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Qu.extend({color:()=>i=>Jc(i).isValid()});const _Pe=i=>Qu().color().test(i);function Wse(i,{format:e,hasAlpha:t,isString:n}){const r=bPe[e]+(n&&e!=="hex"?"String":""),s=i[r]();return typeof s=="object"&&!t?fDe(s,["a"]):s}const Kse=(i,e)=>{const t=Jc(i);if(!t.isValid())throw Error("Invalid color");return Wse(t,e)},SPe=(i,e)=>Wse(Jc(i),Wi(Wi({},e),{},{isString:!0,format:"hex"})),TPe=({value:i})=>{const e=qLe(i),t=e==="name"?"hex":e,n=typeof i=="object"?"a"in i:e==="hex"&&i.length===8||/^(rgba)|(hsla)|(hsva)/.test(i),r={format:t,hasAlpha:n,isString:typeof i=="string"};return{value:Kse(i,r),settings:r}};var EPe=Object.freeze({__proto__:null,schema:_Pe,sanitize:Kse,format:SPe,normalize:TPe});const wPe=Ai("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),MPe=Ai("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),CPe=Ai("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function $Y(i,e){return e!=="rgb"?Jc(i).toRgb():i}function RPe({value:i,displayValue:e,settings:t,onUpdate:n}){const{emitOnEditStart:r,emitOnEditEnd:s}=Rc(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:h}=jse(),p=X.useRef(0),[m,g]=X.useState(()=>$Y(i,o)),b=a?JLe:t8e,T=()=>{g($Y(i,o)),f(),r()},C=()=>{h(),s(),window.clearTimeout(p.current)},R=()=>{p.current=window.setTimeout(C,500)};return X.useEffect(()=>()=>window.clearTimeout(p.current),[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(wPe,{ref:l,active:u,onClick:()=>T(),style:{color:e}}),u&&Ne.createElement(gG,null,Ne.createElement(gse,{onPointerUp:C}),Ne.createElement(CPe,{ref:c,onMouseEnter:()=>window.clearTimeout(p.current),onMouseLeave:P=>P.buttons===0&&R()},Ne.createElement(b,{color:m,onChange:n}))))}function DPe(){const{value:i,displayValue:e,label:t,onChange:n,onUpdate:r,settings:s}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,t),Ne.createElement(MPe,null,Ne.createElement(RPe,{value:i,displayValue:e,onChange:n,onUpdate:r,settings:s}),Ne.createElement(mG,{value:e,onChange:n,onUpdate:r})))}var LPe=Wi({component:DPe},EPe);function PPe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(vG,{value:e,settings:n,onUpdate:t}))}var NPe=Wi({component:PPe},Ese(["x","y","z"]));const BPe=Ai("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),IPe=Ai("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function OPe({value:i,settings:e,onUpdate:t}){const n=X.useRef(),r=X.useRef(0),s=X.useRef(0),o=X.useRef(1),[a,l]=X.useState(!1),[c,u]=X.useState(!1),[f,h]=vse(),p=X.useRef(null),m=X.useRef(null);X.useLayoutEffect(()=>{if(a){const{top:ee,left:Y,width:oe,height:re}=p.current.getBoundingClientRect();m.current.style.left=Y+oe/2+"px",m.current.style.top=ee+re/2+"px"}},[a]);const{keys:[g,b],joystick:T}=e,C=T==="invertY"?1:-1,{[g]:{step:R},[b]:{step:P}}=e,I=Wm("sizes","joystickWidth"),F=Wm("sizes","joystickHeight"),k=parseFloat(I)*.8/2,q=parseFloat(F)*.8/2,H=X.useCallback(()=>{n.current||(u(!0),r.current&&h({x:r.current*k}),s.current&&h({y:s.current*-q}),n.current=window.setInterval(()=>{t(ee=>{const Y=R*r.current*o.current,oe=C*P*s.current*o.current;return Array.isArray(ee)?{[g]:ee[0]+Y,[b]:ee[1]+oe}:{[g]:ee[g]+Y,[b]:ee[b]+oe}})},16))},[k,q,t,h,R,P,g,b,C]),O=X.useCallback(()=>{window.clearTimeout(n.current),n.current=void 0,u(!1)},[]);X.useEffect(()=>{function ee(Y){o.current=ise(Y)}return window.addEventListener("keydown",ee),window.addEventListener("keyup",ee),()=>{window.clearTimeout(n.current),window.removeEventListener("keydown",ee),window.removeEventListener("keyup",ee)}},[]);const $=O3(({first:ee,active:Y,delta:[oe,re],movement:[Q,se]})=>{ee&&l(!0);const le=e1(Q,-k,k),de=e1(se,-q,q);r.current=Math.abs(Q)>Math.abs(le)?Math.sign(Q-le):0,s.current=Math.abs(se)>Math.abs(de)?Math.sign(de-se):0;let ie=i[g],ge=i[b];Y?(r.current||(ie+=oe*R*o.current,h({x:le})),s.current||(ge-=C*re*P*o.current,h({y:de})),r.current||s.current?H():O(),t({[g]:ie,[b]:ge})):(l(!1),r.current=0,s.current=0,h({x:0,y:0}),O())});return Ne.createElement(BPe,za({ref:p},$()),a&&Ne.createElement(gG,null,Ne.createElement(IPe,{ref:m,isOutOfBounds:c},Ne.createElement("div",null),Ne.createElement("span",{ref:f}))))}const FPe=Ai("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function UPe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Rc();return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(FPe,{withJoystick:!!n.joystick},n.joystick&&Ne.createElement(OPe,{value:e,settings:n,onUpdate:t}),Ne.createElement(vG,{value:e,settings:n,onUpdate:t})))}const kPe=["joystick"],Yse=Ese(["x","y"]),GPe=i=>{let{joystick:e=!0}=i,t=Hs(i,kPe);const{value:n,settings:r}=Yse.normalize(t);return{value:n,settings:Wi(Wi({},r),{},{joystick:e})}};var zPe=Wi(Wi({component:UPe},Yse),{},{normalize:GPe});const HPe=i=>{if(i!==void 0){if(i instanceof File)try{return URL.createObjectURL(i)}catch{return}if(typeof i=="string"&&i.indexOf("blob:")===0)return i;throw Error("Invalid image format [undefined | blob |File].")}},VPe=(i,e)=>typeof e=="object"&&"image"in e,qPe=({image:i})=>({value:i});var $Pe=Object.freeze({__proto__:null,sanitize:HPe,schema:VPe,normalize:qPe});const jPe=Ai("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),WPe=Ai("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),KPe=Ai("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),YPe=Ai("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),XPe=Ai("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),QPe=Ai("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ZPe(){const{label:i,value:e,onUpdate:t,disabled:n}=Rc(),{popinRef:r,wrapperRef:s,shown:o,show:a,hide:l}=jse(),c=X.useCallback(m=>{m.length&&t(m[0])},[t]),u=X.useCallback(m=>{m.stopPropagation(),t(void 0)},[t]),{getRootProps:f,getInputProps:h,isDragAccept:p}=qse({maxFiles:1,accept:"image/*",onDrop:c,disabled:n});return Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(jPe,null,Ne.createElement(KPe,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Ne.createElement(gG,null,Ne.createElement(gse,{onPointerUp:l,style:{cursor:"pointer"}}),Ne.createElement(YPe,{ref:s,style:{backgroundImage:`url(${e})`}})),Ne.createElement(WPe,f({isDragAccept:p}),Ne.createElement("input",h()),Ne.createElement(XPe,null,p?"drop image":"click or drop")),Ne.createElement(QPe,{onClick:u,disabled:!e})))}var JPe=Wi({component:ZPe},$Pe);const jY=Qu().number(),eNe=(i,e)=>Qu().array().length(2).every.number().test(i)&&Qu().schema({min:jY,max:jY}).test(e),yL=i=>({min:i[0],max:i[1]}),Xse=(i,{bounds:[e,t]},n)=>{const r=Array.isArray(i)?yL(i):i,s={min:n[0],max:n[1]},{min:o,max:a}=Wi(Wi({},s),r);return[e1(Number(o),e,Math.max(e,a)),e1(Number(a),Math.min(t,o),t)]},tNe=({value:i,min:e,max:t})=>{const n={min:e,max:t},r=Tse(yL(i),{min:n,max:n}),s=[e,t],o=Wi(Wi({},r),{},{bounds:s});return{value:Xse(yL(i),o,i),settings:o}};var nNe=Object.freeze({__proto__:null,schema:eNe,format:yL,sanitize:Xse,normalize:tNe});const iNe=["value","bounds","onDrag"],rNe=["bounds"],sNe=Ai("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function oNe(i){let{value:e,bounds:[t,n],onDrag:r}=i,s=Hs(i,iNe);const o=X.useRef(null),a=X.useRef(null),l=X.useRef(null),c=X.useRef(0),u=Wm("sizes","scrubberWidth"),f=O3(({event:m,first:g,xy:[b],movement:[T],memo:C={}})=>{if(g){const{width:P,left:I}=o.current.getBoundingClientRect();c.current=P-parseFloat(u);const F=(m==null?void 0:m.target)===a.current||(m==null?void 0:m.target)===l.current;C.pos=dL((b-I)/P,t,n);const k=Math.abs(C.pos-e.min)-Math.abs(C.pos-e.max);C.key=k<0||k===0&&C.pos<=e.min?"min":"max",F&&(C.pos=e[C.key])}const R=C.pos+dL(T/c.current,0,n-t);return r({[C.key]:QDe(R,s[C.key])}),C}),h=`calc(${hL(e.min,t,n)} * (100% - ${u} - 8px) + 4px)`,p=`calc(${1-hL(e.max,t,n)} * (100% - ${u} - 8px) + 4px)`;return Ne.createElement(bse,za({ref:o},f()),Ne.createElement(xse,null,Ne.createElement(_se,{style:{left:h,right:p}})),Ne.createElement(xU,{position:"left",ref:a,style:{left:h}}),Ne.createElement(xU,{position:"right",ref:l,style:{right:p}}))}function aNe(){const{label:i,displayValue:e,onUpdate:t,settings:n}=Rc(),r=Hs(n,rNe);return Ne.createElement(Ne.Fragment,null,Ne.createElement(Nd,{input:!0},Ne.createElement(kp,null,i),Ne.createElement(sNe,null,Ne.createElement(oNe,za({value:e},n,{onDrag:t})),Ne.createElement(vG,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var lNe=Wi({component:aNe},nNe);const cNe=()=>{const i=new Map;return{on:(e,t)=>{let n=i.get(e);n===void 0&&(n=new Set,i.set(e,n)),n.add(t)},off:(e,t)=>{const n=i.get(e);n!==void 0&&(n.delete(t),n.size===0&&i.delete(e))},emit:(e,...t)=>{const n=i.get(e);if(n!==void 0)for(const r of n)r(...t)}}},uNe=["type","value"],fNe=["onChange","transient","onEditStart","onEditEnd"],hNe=function(){const e=nPe(iPe(()=>({data:{}}))),t=cNe();this.storeId=uDe(),this.useStore=e;const n={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(n).forEach(([u,f])=>{f.render&&a.some(h=>h.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return r.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>r.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in Q0&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>n[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let h=c[u];if(h){const{type:p,value:m}=f,g=Hs(f,uNe);p!==h.type?Bm(Mo.INPUT_TYPE_OVERRIDE,p):((h.__refCount===0||a)&&Object.assign(h,g),h.__refCount++)}else c[u]=Wi(Wi({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return rY(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Wi(Wi({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{rY(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Bm(Mo.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,Wi(Wi({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,Wi(Wi({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return Bm(Mo.EMPTY_KEY);let h=wG(a,u);if(f.type===Q0.FOLDER){const p=s(f.schema,h,l);Object.assign(c,p),h in n||(n[h]=f.settings)}else if(u in l)Bm(Mo.DUPLICATE_KEYS,u,h,l[u].path);else{const p=gDe(f,u,h,c);if(p){const{type:m,options:g,input:b}=p,{onChange:T,transient:C,onEditStart:R,onEditEnd:P}=g,I=Hs(g,fNe);c[h]=Wi(Wi(Wi({type:m},I),b),{},{fromPanel:!0}),l[u]={path:h,onChange:T,transient:C,onEditStart:R,onEditEnd:P}}else Bm(Mo.UNKNOWN_INPUT,h,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new hNe;const WY=i=>"__levaInput"in i,dNe=(i,e)=>{const t={},n=e?e.toLowerCase():null;return i.forEach(r=>{const[s,o]=yPe(r);(!n||s.toLowerCase().indexOf(n)>-1)&&gPe(t,o,{[s]:{__levaInput:!0,path:r}})}),t},pNe=["type","label","path","valueKey","value","settings","setValue","disabled"];function ANe(i){let{type:e,label:t,path:n,valueKey:r,value:s,settings:o,setValue:a,disabled:l}=i,c=Hs(i,pNe);const{displayValue:u,onChange:f,onUpdate:h}=yse({type:e,value:s,settings:o,setValue:a}),p=qx[e].component;return p?Ne.createElement(lse.Provider,{value:Wi({key:r,path:n,id:""+n,label:t,displayValue:u,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:l},c)},Ne.createElement(IDe,{disabled:l},Ne.createElement(p,null))):(Bm(Mo.NO_COMPONENT_FOR_TYPE,e,n),null)}const mNe=Ai("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function gNe({onClick:i,settings:e,label:t}){const n=I3();return Ne.createElement(Nd,null,Ne.createElement(mNe,{disabled:e.disabled,onClick:()=>i(n.get)},t))}const yNe=Ai("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),vNe=Ai("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),xNe=({label:i,opts:e})=>{let t=typeof i=="string"&&i.trim()===""?null:i,n=e;return typeof e.opts=="object"&&(n.label!==void 0&&(t=e.label),n=e.opts),{label:t,opts:n}};function bNe(i){const{label:e,opts:t}=xNe(i),n=I3();return Ne.createElement(Nd,{input:!!e},e&&Ne.createElement(kp,null,e),Ne.createElement(yNe,null,Object.entries(t).map(([r,s])=>Ne.createElement(vNe,{key:r,onClick:()=>s(n.get)},r))))}const _Ne=Ai("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Qse=100;function SNe(i,e){i.push(e),i.length>Qse&&i.shift()}const TNe=X.forwardRef(function({initialValue:i},e){const t=Wm("colors","highlight3"),n=Wm("colors","elevation2"),r=Wm("colors","highlight1"),[s,o]=X.useMemo(()=>[Jc(r).alpha(.4).toRgbString(),Jc(r).alpha(.1).toRgbString()],[r]),a=X.useRef([i]),l=X.useRef(i),c=X.useRef(i),u=X.useRef(),f=X.useCallback((m,g)=>{if(!m)return;const{width:b,height:T}=m,C=new Path2D,R=b/Qse,P=T*.05;for(let k=0;k<a.current.length;k++){const q=hL(a.current[k],l.current,c.current),H=R*k,O=T-q*(T-P*2)-P;C.lineTo(H,O)}g.clearRect(0,0,b,T);const I=new Path2D(C);I.lineTo(R*(a.current.length+1),T),I.lineTo(0,T),I.lineTo(0,0);const F=g.createLinearGradient(0,0,0,T);F.addColorStop(0,s),F.addColorStop(1,o),g.fillStyle=F,g.fill(I),g.strokeStyle=n,g.lineJoin="round",g.lineWidth=14,g.stroke(C),g.strokeStyle=t,g.lineWidth=2,g.stroke(C)},[t,n,s,o]),[h,p]=qDe(f);return X.useImperativeHandle(e,()=>({frame:m=>{(l.current===void 0||m<l.current)&&(l.current=m),(c.current===void 0||m>c.current)&&(c.current=m),SNe(a.current,m),u.current=requestAnimationFrame(()=>f(h.current,p.current))}}),[h,p,f]),X.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),Ne.createElement(_Ne,{ref:h})}),KY=i=>Number.isFinite(i)?i.toPrecision(2):i.toString(),ENe=X.forwardRef(function({initialValue:i},e){const[t,n]=X.useState(KY(i));return X.useImperativeHandle(e,()=>({frame:r=>n(KY(r))}),[]),Ne.createElement("div",null,t)});function YY(i){return typeof i=="function"?i():i.current}function wNe({label:i,objectOrFn:e,settings:t}){const n=X.useRef(),r=X.useRef(YY(e));return X.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=n.current)===null||o===void 0||o.frame(YY(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),Ne.createElement(Nd,{input:!0},Ne.createElement(kp,{align:"top"},i),t.graph?Ne.createElement(TNe,{ref:n,initialValue:r.current}):Ne.createElement(ENe,{ref:n,initialValue:r.current}))}const MNe=["type","label","key"],CNe={[Q0.BUTTON]:gNe,[Q0.BUTTON_GROUP]:bNe,[Q0.MONITOR]:wNe},RNe=Ne.memo(({path:i})=>{const[e,{set:t,setSettings:n,disable:r,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=jDe(i);if(!e)return null;const{type:l,label:c,key:u}=e,f=Hs(e,MNe);if(l in Q0){const h=CNe[l];return Ne.createElement(h,za({label:c,path:i},f))}return l in qx?Ne.createElement(ANe,za({key:s+i,type:l,label:c,storeId:s,path:i,valueKey:u,setValue:t,setSettings:n,disable:r,emitOnEditStart:o,emitOnEditEnd:a},f)):(nDe(Mo.UNSUPPORTED_INPUT,l,i),null)});function DNe({toggle:i,toggled:e,name:t}){return Ne.createElement(PDe,{onClick:()=>i()},Ne.createElement(yG,{toggled:e}),Ne.createElement("div",null,t))}const LNe=({name:i,path:e,tree:t})=>{const n=I3(),r=wG(e,i),{collapsed:s,color:o}=n.getFolderSettings(r),[a,l]=X.useState(!s),c=X.useRef(null),u=Wm("colors","folderWidgetColor"),f=Wm("colors","folderTextColor");return X.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),Ne.createElement(pL,{ref:c},Ne.createElement(DNe,{name:i,toggled:a,toggle:()=>l(h=>!h)}),Ne.createElement(Zse,{parent:r,tree:t,toggled:a}))},Zse=Ne.memo(({isRoot:i=!1,fill:e=!1,flat:t=!1,parent:n,tree:r,toggled:s})=>{const{wrapperRef:o,contentRef:a}=vPe(s),l=I3(),c=([f,h])=>{var p;return(WY(h)?(p=l.getInput(h.path))===null||p===void 0?void 0:p.order:l.getFolderSettings(wG(n,f)).order)||0},u=Object.entries(r).sort((f,h)=>c(f)-c(h));return Ne.createElement(yU,{ref:o,isRoot:i,fill:e,flat:t},Ne.createElement(pse,{ref:a,isRoot:i,toggled:s},u.map(([f,h])=>WY(h)?Ne.createElement(RNe,{key:h.path,valueKey:h.valueKey,path:h.path}):Ne.createElement(LNe,{key:f,name:f,path:n,tree:h}))))}),PNe=Ai("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${mse}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Jse=40,vL=Ai("i",{$flexCenter:"",width:Jse,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),NNe=Ai("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),BNe=Ai("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${vL}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),INe=Ai("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),ONe=Ai("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Jse}}}}),FNe=Ne.forwardRef(({setFilter:i,toggle:e},t)=>{const[n,r]=X.useState(""),s=X.useMemo(()=>nse(i,250),[i]),o=()=>{i(""),r("")},a=l=>{const c=l.currentTarget.value;e(!0),r(c)};return X.useEffect(()=>{s(n)},[n,s]),Ne.createElement(Ne.Fragment,null,Ne.createElement(INe,{ref:t,value:n,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),Ne.createElement(vL,{onClick:()=>o(),style:{visibility:n?"visible":"hidden"}},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function UNe({setFilter:i,onDrag:e,onDragStart:t,onDragEnd:n,toggle:r,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=X.useState(!1),h=X.useRef(null);X.useEffect(()=>{var m,g;u?(m=h.current)===null||m===void 0||m.focus():(g=h.current)===null||g===void 0||g.blur()},[u]);const p=O3(({offset:[m,g],first:b,last:T})=>{e({x:m,y:g}),b&&t({x:m,y:g}),T&&n({x:m,y:g})},{filterTaps:!0,from:({offset:[m,g]})=>[(c==null?void 0:c.x)||m,(c==null?void 0:c.y)||g]});return X.useEffect(()=>{const m=g=>{g.key==="L"&&g.shiftKey&&g.metaKey&&f(b=>!b)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),Ne.createElement(Ne.Fragment,null,Ne.createElement(NNe,{mode:a?"drag":void 0},Ne.createElement(vL,{active:!s,onClick:()=>r()},Ne.createElement(yG,{toggled:s,width:12,height:8})),Ne.createElement(ONe,za({},a?p():{},{drag:a,filterEnabled:l}),o===void 0&&a?Ne.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ne.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ne.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ne.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Ne.createElement(vL,{active:u,onClick:()=>f(m=>!m)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ne.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ne.createElement(BNe,{toggled:u},Ne.createElement(FNe,{ref:h,setFilter:i,toggle:r})))}Ne.memo(({store:i,rootClass:e,fill:t=!1,flat:n=!1,neverHide:r=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const h=xPe(i),[p,m]=X.useState(""),g=X.useMemo(()=>dNe(h,p),[h,p]),[b,T]=vse(),C=r||h.length>0,R=typeof o=="object"&&o.title||void 0,P=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,I=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,F=typeof o=="object"&&o.position||void 0,k=typeof o=="object"&&o.onDrag||void 0,q=typeof o=="object"&&o.onDragStart||void 0,H=typeof o=="object"&&o.onDragEnd||void 0;return Ne.useEffect(()=>{T({x:F==null?void 0:F.x,y:F==null?void 0:F.y})},[F,T]),wDe(),Ne.createElement(fse.Provider,{value:{hideCopyButton:a}},Ne.createElement(PNe,{ref:b,className:e,fill:t,flat:n,oneLineLabels:s,hideTitleBar:!o,style:{display:C?"block":"none"}},o&&Ne.createElement(UNe,{onDrag:O=>{T(O),k==null||k(O)},onDragStart:O=>q==null?void 0:q(O),onDragEnd:O=>H==null?void 0:H(O),setFilter:m,toggle:O=>c($=>O??!$),toggled:l,title:R,drag:P,filterEnabled:I,from:F}),C&&Ne.createElement(use.Provider,{value:i},Ne.createElement(Zse,{isRoot:!0,fill:t,flat:n,tree:g,toggled:l}))))});yg(Np.SELECT,cLe);yg(Np.IMAGE,JPe);yg(Np.NUMBER,JDe);yg(Np.COLOR,LPe);yg(Np.STRING,yLe);yg(Np.BOOLEAN,ELe);yg(Np.INTERVAL,lNe);yg(Np.VECTOR3D,NPe);yg(Np.VECTOR2D,zPe);var H5={},XY;function kNe(){if(XY)return H5;XY=1,H5.match=s,H5.parse=o;var i=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,e=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,t=/^(?:(min|max)-)?(.+)/,n=/(em|rem|px|cm|mm|in|pt|pc)?$/,r=/(dpi|dpcm|dppx)?$/;function s(u,f){return o(u).some(function(h){var p=h.inverse,m=h.type==="all"||f.type===h.type;if(m&&p||!(m||p))return!1;var g=h.expressions.every(function(b){var T=b.feature,C=b.modifier,R=b.value,P=f[T];if(!P)return!1;switch(T){case"orientation":case"scan":return P.toLowerCase()===R.toLowerCase();case"width":case"height":case"device-width":case"device-height":R=c(R),P=c(P);break;case"resolution":R=l(R),P=l(P);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":R=a(R),P=a(P);break;case"grid":case"color":case"color-index":case"monochrome":R=parseInt(R,10)||1,P=parseInt(P,10)||0;break}switch(C){case"min":return P>=R;case"max":return P<=R;default:return P===R}});return g&&!p||!g&&p})}function o(u){return u.split(",").map(function(f){f=f.trim();var h=f.match(i),p=h[1],m=h[2],g=h[3]||"",b={};return b.inverse=!!p&&p.toLowerCase()==="not",b.type=m?m.toLowerCase():"all",g=g.match(/\([^\)]+\)/g)||[],b.expressions=g.map(function(T){var C=T.match(e),R=C[1].toLowerCase().match(t);return{modifier:R[1],feature:R[2],value:C[2]}}),b})}function a(u){var f=Number(u),h;return f||(h=u.match(/^(\d+)\s*\/\s*(\d+)$/),f=h[1]/h[2]),f}function l(u){var f=parseFloat(u),h=String(u).match(r)[1];switch(h){case"dpcm":return f/2.54;case"dppx":return f*96;default:return f}}function c(u){var f=parseFloat(u),h=String(u).match(n)[1];switch(h){case"em":return f*16;case"rem":return f*16;case"cm":return f*96/2.54;case"mm":return f*96/2.54/10;case"in":return f*96;case"pt":return f*72;case"pc":return f*72/12;default:return f}}return H5}var qI,QY;function GNe(){if(QY)return qI;QY=1;var i=kNe().match,e=typeof window<"u"?window.matchMedia:null;function t(r,s,o){var a=this,l;e&&!o&&(l=e.call(window,r)),l?(this.matches=l.matches,this.media=l.media,l.addListener(f)):(this.matches=i(r,s),this.media=r),this.addListener=c,this.removeListener=u,this.dispose=h;function c(p){l&&l.addListener(p)}function u(p){l&&l.removeListener(p)}function f(p){a.matches=p.matches,a.media=p.media}function h(){l&&l.removeListener(f)}}function n(r,s,o){return new t(r,s,o)}return qI=n,qI}var zNe=GNe();const HNe=Ag(zNe);var VNe=/[A-Z]/g,qNe=/^ms-/,$I={};function $Ne(i){return"-"+i.toLowerCase()}function eoe(i){if($I.hasOwnProperty(i))return $I[i];var e=i.replace(VNe,$Ne);return $I[i]=qNe.test(e)?"-"+e:e}function jNe(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),n=Object.keys(e),r=t.length;if(n.length!==r)return!1;for(let s=0;s<r;s++){const o=t[s];if(i[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}const Zc=Z.oneOfType([Z.string,Z.number]),toe={all:Z.bool,grid:Z.bool,aural:Z.bool,braille:Z.bool,handheld:Z.bool,print:Z.bool,projection:Z.bool,screen:Z.bool,tty:Z.bool,tv:Z.bool,embossed:Z.bool},WNe={orientation:Z.oneOf(["portrait","landscape"]),scan:Z.oneOf(["progressive","interlace"]),aspectRatio:Z.string,deviceAspectRatio:Z.string,height:Zc,deviceHeight:Zc,width:Zc,deviceWidth:Zc,color:Z.bool,colorIndex:Z.bool,monochrome:Z.bool,resolution:Zc,type:Object.keys(toe)},{type:ift,...KNe}=WNe,YNe={minAspectRatio:Z.string,maxAspectRatio:Z.string,minDeviceAspectRatio:Z.string,maxDeviceAspectRatio:Z.string,minHeight:Zc,maxHeight:Zc,minDeviceHeight:Zc,maxDeviceHeight:Zc,minWidth:Zc,maxWidth:Zc,minDeviceWidth:Zc,maxDeviceWidth:Zc,minColor:Z.number,maxColor:Z.number,minColorIndex:Z.number,maxColorIndex:Z.number,minMonochrome:Z.number,maxMonochrome:Z.number,minResolution:Zc,maxResolution:Zc,...KNe},XNe={...toe,...YNe};var QNe={all:XNe};const ZNe=i=>`not ${i}`,JNe=(i,e)=>{const t=eoe(i);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?ZNe(t):`(${t}: ${e})`},eBe=i=>i.join(" and "),tBe=i=>{const e=[];return Object.keys(QNe.all).forEach(t=>{const n=i[t];n!=null&&e.push(JNe(t,n))}),eBe(e)},nBe=X.createContext(void 0),iBe=i=>i.query||tBe(i),ZY=i=>i?Object.keys(i).reduce((t,n)=>(t[eoe(n)]=i[n],t),{}):void 0,noe=()=>{const i=X.useRef(!1);return X.useEffect(()=>{i.current=!0},[]),i.current},rBe=i=>{const e=X.useContext(nBe),t=()=>ZY(i)||ZY(e),[n,r]=X.useState(t);return X.useEffect(()=>{const s=t();jNe(n,s)||r(s)},[i,e]),n},sBe=i=>{const e=()=>iBe(i),[t,n]=X.useState(e);return X.useEffect(()=>{const r=e();t!==r&&n(r)},[i]),t},oBe=(i,e)=>{const t=()=>HNe(i,e||{},!!e),[n,r]=X.useState(t),s=noe();return X.useEffect(()=>{if(s){const o=t();return r(o),()=>{o&&o.dispose()}}},[i,e]),n},aBe=i=>{const[e,t]=X.useState(i.matches);return X.useEffect(()=>{const n=r=>{t(r.matches)};return i.addListener(n),t(i.matches),()=>{i.removeListener(n)}},[i]),e},jI=(i,e,t)=>{const n=rBe(e),r=sBe(i);if(!r)throw new Error("Invalid or missing MediaQuery!");const s=oBe(r,n),o=aBe(s);return noe(),X.useEffect(()=>{},[o]),X.useEffect(()=>()=>{s&&s.dispose()},[]),o};function Mm(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ioe(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nh={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bS={duration:.5,overwrite:!1,delay:0},MG,$l,fo,Z0=1e8,bc=1/Z0,LU=Math.PI*2,lBe=LU/4,cBe=0,roe=Math.sqrt,uBe=Math.cos,fBe=Math.sin,wl=function(e){return typeof e=="string"},ta=function(e){return typeof e=="function"},rg=function(e){return typeof e=="number"},CG=function(e){return typeof e>"u"},dA=function(e){return typeof e=="object"},nf=function(e){return e!==!1},RG=function(){return typeof window<"u"},V5=function(e){return ta(e)||wl(e)},soe=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Tc=Array.isArray,PU=/(?:-?\.?\d|\.)+/gi,ooe=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,m2=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,WI=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,aoe=/[+-]=-?[.\d]+/,loe=/[^,'"\[\]\s]+/gi,hBe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Co,N0,NU,DG,ah={},xL={},coe,uoe=function(e){return(xL=_S(e,ah))&&df},LG=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},SM=function(e,t){return!t&&console.warn(e)},foe=function(e,t){return e&&(ah[e]=t)&&xL&&(xL[e]=t)||ah},TM=function(){return 0},dBe={suppressEvents:!0,isStart:!0,kill:!1},lD={suppressEvents:!0,kill:!1},pBe={suppressEvents:!0},PG={},jy=[],BU={},hoe,Wf={},KI={},JY=30,cD=[],NG="",BG=function(e){var t=e[0],n,r;if(dA(t)||ta(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=cD.length;r--&&!cD[r].targetTest(t););n=cD[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Ooe(e[r],n)))||e.splice(r,1);return e},cx=function(e){return e._gsap||BG(hd(e))[0]._gsap},doe=function(e,t,n){return(n=e[t])&&ta(n)?e[t]():CG(n)&&e.getAttribute&&e.getAttribute(t)||n},rf=function(e,t){return(e=e.split(",")).forEach(t)||e},ha=function(e){return Math.round(e*1e5)/1e5||0},Ba=function(e){return Math.round(e*1e7)/1e7||0},D2=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},ABe=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},bL=function(){var e=jy.length,t=jy.slice(0),n,r;for(BU={},jy.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},poe=function(e,t,n,r){jy.length&&!$l&&bL(),e.render(t,n,$l&&t<0&&(e._initted||e._startAt)),jy.length&&!$l&&bL()},Aoe=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(loe).length<2?t:wl(e)?e.trim():e},moe=function(e){return e},lh=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},mBe=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},_S=function(e,t){for(var n in t)e[n]=t[n];return e},eX=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=dA(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},_L=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},qw=function(e){var t=e.parent||Co,n=e.keyframes?mBe(Tc(e.keyframes)):lh;if(nf(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},gBe=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},goe=function(e,t,n,r,s){var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},KP=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},t1=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ux=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},yBe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},IU=function(e,t,n,r){return e._startAt&&($l?e._startAt.revert(lD):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},vBe=function i(e){return!e||e._ts&&i(e.parent)},tX=function(e){return e._repeat?SS(e._tTime,e=e.duration()+e._rDelay)*e:0},SS=function(e,t){var n=Math.floor(e=Ba(e/t));return e&&n===e?n-1:n},SL=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},YP=function(e){return e._end=Ba(e._start+(e._tDur/Math.abs(e._ts||e._rts||bc)||0))},XP=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ba(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),YP(e),n._dirty||ux(n,e)),e},yoe=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=SL(e.rawTime(),t),(!t._dur||k3(0,t.totalDuration(),n)-t._tTime>bc)&&t.render(n,!0)),ux(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},G0=function(e,t,n,r){return t.parent&&t1(t),t._start=Ba((rg(n)?n:n||e!==Co?Xh(e,n,t):e._time)+t._delay),t._end=Ba(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),goe(e,t,"_first","_last",e._sort?"_start":0),OU(t)||(e._recent=t),r||yoe(e,t),e._ts<0&&XP(e,e._tTime),e},voe=function(e,t){return(ah.ScrollTrigger||LG("scrollTrigger",t))&&ah.ScrollTrigger.create(t,e)},xoe=function(e,t,n,r,s){if(OG(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!$l&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&hoe!==Zf.frame)return jy.push(e),e._lazy=[s,r],1},xBe=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},OU=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},bBe=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&xBe(e)&&!(!e._initted&&OU(e))||(e._ts<0||e._dp._ts<0)&&!OU(e))?0:1,a=e._rDelay,l=0,c,u,f;if(a&&e._repeat&&(l=k3(0,e._tDur,t),u=SS(l,a),e._yoyo&&u&1&&(o=1-o),u!==SS(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||$l||r||e._zTime===bc||!t&&e._zTime){if(!e._initted&&xoe(e,t,r,n,l))return;for(f=e._zTime,e._zTime=t||(n?bc:0),n||(n=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&IU(e,t,n,!0),e._onUpdate&&!n&&eh(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&eh(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&t1(e,1),!n&&!$l&&(eh(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},_Be=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},TS=function(e,t,n,r){var s=e._repeat,o=Ba(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Ba(o*(s+1)+e._rDelay*s):o,a>0&&!r&&XP(e,e._tTime=e._tDur*a),e.parent&&YP(e),n||ux(e.parent,e),e},nX=function(e){return e instanceof lu?ux(e):TS(e,e._dur)},SBe={_start:0,endTime:TM,totalDuration:TM},Xh=function i(e,t,n){var r=e.labels,s=e._recent||SBe,o=e.duration()>=Z0?s.endTime(!1):e._dur,a,l,c;return wl(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(Tc(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},$w=function(e,t,n){var r=rg(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=nf(l.vars.inherit)&&l.parent;o.immediateRender=nf(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Na(t[0],o,t[s+1])},h1=function(e,t){return e||e===0?t(e):t},k3=function(e,t,n){return n<e?e:n>t?t:n},mc=function(e,t){return!wl(e)||!(t=hBe.exec(e))?"":t[1]},TBe=function(e,t,n){return h1(n,function(r){return k3(e,t,r)})},FU=[].slice,boe=function(e,t){return e&&dA(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&dA(e[0]))&&!e.nodeType&&e!==N0},EBe=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return wl(r)&&!t||boe(r,1)?(s=n).push.apply(s,hd(r)):n.push(r)})||n},hd=function(e,t,n){return fo&&!t&&fo.selector?fo.selector(e):wl(e)&&!n&&(NU||!ES())?FU.call((t||DG).querySelectorAll(e),0):Tc(e)?EBe(e,n):boe(e)?FU.call(e,0):e?[e]:[]},UU=function(e){return e=hd(e)[0]||SM("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return hd(t,n.querySelectorAll?n:n===e?SM("Invalid scope")||DG.createElement("div"):e)}},_oe=function(e){return e.sort(function(){return .5-Math.random()})},Soe=function(e){if(ta(e))return e;var t=dA(e)?e:{each:e},n=fx(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,f=r;return wl(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],f=r[1]),function(h,p,m){var g=(m||t).length,b=o[g],T,C,R,P,I,F,k,q,H;if(!b){if(H=t.grid==="auto"?0:(t.grid||[1,Z0])[1],!H){for(k=-1e8;k<(k=m[H++].getBoundingClientRect().left)&&H<g;);H<g&&H--}for(b=o[g]=[],T=l?Math.min(H,g)*u-.5:r%H,C=H===Z0?0:l?g*f/H-.5:r/H|0,k=0,q=Z0,F=0;F<g;F++)R=F%H-T,P=C-(F/H|0),b[F]=I=c?Math.abs(c==="y"?P:R):roe(R*R+P*P),I>k&&(k=I),I<q&&(q=I);r==="random"&&_oe(b),b.max=k-q,b.min=q,b.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(H>g?g-1:c?c==="y"?g/H:H:Math.max(H,g/H))||0)*(r==="edges"?-1:1),b.b=g<0?s-g:s,b.u=mc(t.amount||t.each)||0,n=n&&g<0?Noe(n):n}return g=(b[h]-b.min)/b.max||0,Ba(b.b+(n?n(g):g)*b.v)+b.u}},kU=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Ba(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(rg(n)?0:mc(n))}},Toe=function(e,t){var n=Tc(e),r,s;return!n&&dA(e)&&(r=n=e.radius||Z0,e.values?(e=hd(e.values),(s=!rg(e[0]))&&(r*=r)):e=kU(e.increment)),h1(t,n?ta(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Z0,u=0,f=e.length,h,p;f--;)s?(h=e[f].x-a,p=e[f].y-l,h=h*h+p*p):h=Math.abs(e[f]-a),h<c&&(c=h,u=f);return u=!r||c<=r?e[u]:o,s||u===o||rg(o)?u:u+mc(o)}:kU(e))},Eoe=function(e,t,n,r){return h1(Tc(e)?!t:n===!0?!!(n=0):!r,function(){return Tc(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},wBe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},MBe=function(e,t){return function(n){return e(parseFloat(n))+(t||mc(n))}},CBe=function(e,t,n){return Moe(e,t,0,1,n)},woe=function(e,t,n){return h1(n,function(r){return e[~~t(r)]})},RBe=function i(e,t,n){var r=t-e;return Tc(e)?woe(e,i(0,e.length),t):h1(n,function(s){return(r+(s-e)%r)%r+e})},DBe=function i(e,t,n){var r=t-e,s=r*2;return Tc(e)?woe(e,i(0,e.length-1),t):h1(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},EM=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?loe:PU),n+=e.substr(t,r-t)+Eoe(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},Moe=function(e,t,n,r,s){var o=t-e,a=r-n;return h1(s,function(l){return n+((l-e)/o*a||0)})},LBe=function i(e,t,n,r){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var o=wl(e),a={},l,c,u,f,h;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(Tc(e)&&!Tc(t)){for(u=[],f=e.length,h=f-2,c=1;c<f;c++)u.push(i(e[c-1],e[c]));f--,s=function(m){m*=f;var g=Math.min(h,~~m);return u[g](m-g)},n=t}else r||(e=_S(Tc(e)?[]:{},e));if(!u){for(l in t)IG.call(a,e,l,"get",t[l]);s=function(m){return kG(m,a)||(o?e.p:e)}}}return h1(n,s)},iX=function(e,t,n){var r=e.labels,s=Z0,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},eh=function(e,t,n){var r=e.vars,s=r[t],o=fo,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&jy.length&&bL(),a&&(fo=a),u=l?s.apply(c,l):s.call(c),fo=o,u},yw=function(e){return t1(e),e.scrollTrigger&&e.scrollTrigger.kill(!!$l),e.progress()<1&&eh(e,"onInterrupt"),e},g2,Coe=[],Roe=function(e){if(e)if(e=!e.name&&e.default||e,RG()||e.headless){var t=e.name,n=ta(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:TM,render:kG,add:IG,kill:WBe,modifier:jBe,rawVars:0},o={targetTest:0,get:0,getSetter:UG,aliases:{},register:0};if(ES(),e!==r){if(Wf[t])return;lh(r,lh(_L(e,s),o)),_S(r.prototype,_S(s,_L(e,o))),Wf[r.prop=t]=r,e.targetTest&&(cD.push(r),PG[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}foe(t,r),e.register&&e.register(df,r,sf)}else Coe.push(e)},Rs=255,vw={aqua:[0,Rs,Rs],lime:[0,Rs,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Rs],navy:[0,0,128],white:[Rs,Rs,Rs],olive:[128,128,0],yellow:[Rs,Rs,0],orange:[Rs,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Rs,0,0],pink:[Rs,192,203],cyan:[0,Rs,Rs],transparent:[Rs,Rs,Rs,0]},YI=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Rs+.5|0},Doe=function(e,t,n){var r=e?rg(e)?[e>>16,e>>8&Rs,e&Rs]:0:vw.black,s,o,a,l,c,u,f,h,p,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),vw[e])r=vw[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Rs,r&Rs,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Rs,e&Rs]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(PU),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=YI(l+1/3,s,o),r[1]=YI(l,s,o),r[2]=YI(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(ooe),n&&r.length<4&&(r[3]=1),r}else r=e.match(PU)||vw.transparent;r=r.map(Number)}return t&&!m&&(s=r[0]/Rs,o=r[1]/Rs,a=r[2]/Rs,f=Math.max(s,o,a),h=Math.min(s,o,a),u=(f+h)/2,f===h?l=c=0:(p=f-h,c=u>.5?p/(2-f-h):p/(f+h),l=f===s?(o-a)/p+(o<a?6:0):f===o?(a-s)/p+2:(s-o)/p+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),n&&r.length<4&&(r[3]=1),r},Loe=function(e){var t=[],n=[],r=-1;return e.split(Wy).forEach(function(s){var o=s.match(m2)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},rX=function(e,t,n){var r="",s=(e+r).match(Wy),o=t?"hsla(":"rgba(",a=0,l,c,u,f;if(!s)return e;if(s=s.map(function(h){return(h=Doe(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),n&&(u=Loe(e),l=n.c,l.join(r)!==u.c.join(r)))for(c=e.replace(Wy,"1").split(m2),f=c.length-1;a<f;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(c=e.split(Wy),f=c.length-1;a<f;a++)r+=c[a]+s[a];return r+c[f]},Wy=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in vw)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),PBe=/hsl[a]?\(/,Poe=function(e){var t=e.join(" "),n;if(Wy.lastIndex=0,Wy.test(t))return n=PBe.test(t),e[1]=rX(e[1],n),e[0]=rX(e[0],n,Loe(e[1])),!0},wM,Zf=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,c,u,f,h,p,m=function g(b){var T=i()-r,C=b===!0,R,P,I,F;if((T>e||T<0)&&(n+=T-t),r+=T,I=r-n,R=I-o,(R>0||C)&&(F=++f.frame,h=I-f.time*1e3,f.time=I=I/1e3,o+=R+(R>=s?4:s-R),P=1),C||(l=c(g)),P)for(p=0;p<a.length;p++)a[p](I,h,F,b)};return f={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(b){return h/(1e3/(b||60))},wake:function(){coe&&(!NU&&RG()&&(N0=NU=window,DG=N0.document||{},ah.gsap=df,(N0.gsapVersions||(N0.gsapVersions=[])).push(df.version),uoe(xL||N0.GreenSockGlobals||!N0.gsap&&N0||{}),Coe.forEach(Roe)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(b){return setTimeout(b,o-f.time*1e3+1|0)},wM=1,m(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),wM=0,c=TM},lagSmoothing:function(b,T){e=b||1/0,t=Math.min(T||33,e)},fps:function(b){s=1e3/(b||240),o=f.time*1e3+s},add:function(b,T,C){var R=T?function(P,I,F,k){b(P,I,F,k),f.remove(R)}:b;return f.remove(b),a[C?"unshift":"push"](R),ES(),R},remove:function(b,T){~(T=a.indexOf(b))&&a.splice(T,1)&&p>=T&&p--},_listeners:a},f}(),ES=function(){return!wM&&Zf.wake()},Sr={},NBe=/^[\d.\-M][\d.\-,\s]/,BBe=/["']/g,IBe=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,c;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(BBe,"").trim():+c,r=l.substr(a+1).trim();return t},OBe=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},FBe=function(e){var t=(e+"").split("("),n=Sr[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[IBe(t[1])]:OBe(e).split(",").map(Aoe)):Sr._CE&&NBe.test(e)?Sr._CE("",e):n},Noe=function(e){return function(t){return 1-e(1-t)}},Boe=function i(e,t){for(var n=e._first,r;n;)n instanceof lu?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},fx=function(e,t){return e&&(ta(e)?e:Sr[e]||FBe(e))||t},hb=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return rf(e,function(a){Sr[a]=ah[a]=s,Sr[o=a.toLowerCase()]=n;for(var l in s)Sr[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Sr[a+"."+l]=s[l]}),s},Ioe=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},XI=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/LU*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*fBe((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Ioe(a);return s=LU/s,l.config=function(c,u){return i(e,c,u)},l},QI=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:Ioe(n);return r.config=function(s){return i(e,s)},r};rf("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;hb(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Sr.Linear.easeNone=Sr.none=Sr.Linear.easeIn;hb("Elastic",XI("in"),XI("out"),XI());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};hb("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);hb("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});hb("Circ",function(i){return-(roe(1-i*i)-1)});hb("Sine",function(i){return i===1?1:-uBe(i*lBe)+1});hb("Back",QI("in"),QI("out"),QI());Sr.SteppedEase=Sr.steps=ah.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-bc;return function(a){return((r*k3(0,o,a)|0)+s)*n}}};bS.ease=Sr["quad.out"];rf("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return NG+=i+","+i+"Params,"});var Ooe=function(e,t){this.id=cBe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:doe,this.set=t?t.getSetter:UG},MM=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,TS(this,+t.duration,1,1),this.data=t.data,fo&&(this._ctx=fo,fo.data.push(this)),wM||Zf.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,TS(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(ES(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(XP(this,n),!s._dp||s.parent||yoe(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&G0(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===bc||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),poe(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+tX(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+tX(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?SS(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?SL(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-1e-8?0:this._rts,this.totalTime(k3(-Math.abs(this._delay),this._tDur,s),r!==!1),YP(this),yBe(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ES(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==bc&&(this._tTime-=bc)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&G0(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(nf(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?SL(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=pBe);var r=$l;return $l=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),$l=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,nX(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,nX(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Xh(this,n),nf(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,nf(r)),this._dur||(this._zTime=-1e-8),this},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-bc)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=ta(n)?n:moe,a=function(){var c=r.then;r.then=null,ta(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){yw(this)},i}();lh(MM.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var lu=function(i){ioe(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=nf(n.sortChildren),Co&&G0(n.parent||Co,Mm(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&voe(Mm(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return $w(0,arguments,this),this},t.from=function(r,s,o){return $w(1,arguments,this),this},t.fromTo=function(r,s,o,a){return $w(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,qw(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Na(r,s,Xh(this,o),1),this},t.call=function(r,s,o){return G0(this,Na.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Na(r,o,Xh(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,qw(o).immediateRender=nf(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,f){return a.startAt=o,qw(a).immediateRender=nf(a.immediateRender),this.staggerTo(r,s,a,l,c,u,f)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Ba(r),f=this._zTime<0!=r<0&&(this._initted||!c),h,p,m,g,b,T,C,R,P,I,F,k;if(this!==Co&&u>l&&r>=0&&(u=l),u!==this._tTime||o||f){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),h=u,P=this._start,R=this._ts,T=!R,f&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(F=this._yoyo,b=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(b*100+r,s,o);if(h=Ba(u%b),u===l?(g=this._repeat,h=c):(I=Ba(u/b),g=~~I,g&&g===I&&(h=c,g--),h>c&&(h=c)),I=SS(this._tTime,b),!a&&this._tTime&&I!==g&&this._tTime-I*b-this._dur<=0&&(I=g),F&&g&1&&(h=c-h,k=1),g!==I&&!this._lock){var q=F&&I&1,H=q===(F&&g&1);if(g<I&&(q=!q),a=q?0:u%c?c:u,this._lock=1,this.render(a||(k?0:Ba(g*b)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&eh(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),a&&a!==this._time||T!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,H&&(this._lock=2,a=q?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!T)return this;Boe(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=_Be(this,Ba(a),Ba(h)),C&&(u-=h-(h=C._start))),this._tTime=u,this._time=h,this._act=!R,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&!g&&(eh(this,"onStart"),this._tTime!==u))return this;if(h>=a&&r>=0)for(p=this._first;p;){if(m=p._next,(p._act||h>=p._start)&&p._ts&&C!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(h-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(h-p._start)*p._ts,s,o),h!==this._time||!this._ts&&!T){C=0,m&&(u+=this._zTime=-1e-8);break}}p=m}else{p=this._last;for(var O=r<0?r:h;p;){if(m=p._prev,(p._act||O<=p._end)&&p._ts&&C!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(O-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(O-p._start)*p._ts,s,o||$l&&(p._initted||p._startAt)),h!==this._time||!this._ts&&!T){C=0,m&&(u+=this._zTime=O?-1e-8:bc);break}}p=m}}if(C&&!s&&(this.pause(),C.render(h>=a?0:-1e-8)._zTime=h>=a?1:-1,this._ts))return this._start=P,YP(this),this.render(r,s,o);this._onUpdate&&!s&&eh(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(P===this._start||Math.abs(R)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&t1(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(eh(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(rg(s)||(s=Xh(this,s,r)),!(r instanceof MM)){if(Tc(r))return r.forEach(function(a){return o.add(a,s)}),this;if(wl(r))return this.addLabel(r,s);if(ta(r))r=Na.delayedCall(0,r);else return this}return this!==r?G0(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Na?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return wl(r)?this.removeLabel(r):ta(r)?this.killTweensOf(r):(r.parent===this&&KP(this,r),r===this._recent&&(this._recent=this._last),ux(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ba(Zf.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Xh(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Na.delayedCall(0,s||TM,o);return a.data="isPause",this._hasPause=1,G0(this,a,Xh(this,r))},t.removePause=function(r){var s=this._first;for(r=Xh(this,r);s;)s._start===r&&s.data==="isPause"&&t1(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Iy!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=hd(r),l=this._first,c=rg(s),u;l;)l instanceof Na?ABe(l._targets,a)&&(c?(!Iy||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Xh(o,r),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,h=l.immediateRender,p,m=Na.to(o,lh({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||bc,onStart:function(){if(o.pause(),!p){var b=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());m._dur!==b&&TS(m,b,0,1).render(m._time,!0,!0),p=1}u&&u.apply(m,f||[])}},s));return h?m.render(0):m},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,lh({startAt:{time:Xh(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),iX(this,Xh(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),iX(this,Xh(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+bc)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return ux(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ux(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Z0,c,u,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,G0(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;TS(o,o===Co&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Co._ts&&(poe(Co,SL(r,Co)),hoe=Zf.frame),Zf.frame>=JY){JY+=nh.autoSleep||120;var s=Co._first;if((!s||!s._ts)&&nh.autoSleep&&Zf._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Zf.sleep()}}},e}(MM);lh(lu.prototype,{_lock:0,_hasPause:0,_forcing:0});var UBe=function(e,t,n,r,s,o,a){var l=new sf(this._pt,e,t,0,1,Hoe,null,s),c=0,u=0,f,h,p,m,g,b,T,C;for(l.b=n,l.e=r,n+="",r+="",(T=~r.indexOf("random("))&&(r=EM(r)),o&&(C=[n,r],o(C,e,t),n=C[0],r=C[1]),h=n.match(WI)||[];f=WI.exec(r);)m=f[0],g=r.substring(c,f.index),p?p=(p+1)%5:g.substr(-5)==="rgba("&&(p=1),m!==h[u++]&&(b=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:g||u===1?g:",",s:b,c:m.charAt(1)==="="?D2(b,m)-b:parseFloat(m)-b,m:p&&p<4?Math.round:0},c=WI.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(aoe.test(r)||T)&&(l.e=0),this._pt=l,l},IG=function(e,t,n,r,s,o,a,l,c,u){ta(r)&&(r=r(s||0,e,o));var f=e[t],h=n!=="get"?n:ta(f)?c?e[t.indexOf("set")||!ta(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,p=ta(f)?c?VBe:Goe:FG,m;if(wl(r)&&(~r.indexOf("random(")&&(r=EM(r)),r.charAt(1)==="="&&(m=D2(h,r)+(mc(h)||0),(m||m===0)&&(r=m))),!u||h!==r||GU)return!isNaN(h*r)&&r!==""?(m=new sf(this._pt,e,t,+h||0,r-(h||0),typeof f=="boolean"?$Be:zoe,0,p),c&&(m.fp=c),a&&m.modifier(a,this,e),this._pt=m):(!f&&!(t in e)&&LG(t,r),UBe.call(this,e,t,h,r,p,l||nh.stringFilter,c))},kBe=function(e,t,n,r,s){if(ta(e)&&(e=jw(e,s,t,n,r)),!dA(e)||e.style&&e.nodeType||Tc(e)||soe(e))return wl(e)?jw(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=jw(e[a],s,t,n,r);return o},Foe=function(e,t,n,r,s,o){var a,l,c,u;if(Wf[e]&&(a=new Wf[e]).init(s,a.rawVars?t[e]:kBe(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new sf(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==g2))for(c=n._ptLookup[n._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Iy,GU,OG=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,f=r.yoyoEase,h=r.keyframes,p=r.autoRevert,m=e._dur,g=e._startAt,b=e._targets,T=e.parent,C=T&&T.data==="nested"?T.vars.targets:b,R=e._overwrite==="auto"&&!MG,P=e.timeline,I,F,k,q,H,O,$,ee,Y,oe,re,Q,se;if(P&&(!h||!s)&&(s="none"),e._ease=fx(s,bS.ease),e._yEase=f?Noe(fx(f===!0?s:f,bS.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!P&&!!r.runBackwards,!P||h&&!r.stagger){if(ee=b[0]?cx(b[0]).harness:0,Q=ee&&r[ee.prop],I=_L(r,PG),g&&(g._zTime<0&&g.progress(1),t<0&&u&&a&&!p?g.render(-1,!0):g.revert(u&&m?lD:dBe),g._lazy=0),o){if(t1(e._startAt=Na.set(b,lh({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:!g&&nf(l),startAt:null,delay:0,onUpdate:c&&function(){return eh(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&($l||!a&&!p)&&e._startAt.revert(lD),a&&m&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(u&&m&&!g){if(t&&(a=!1),k=lh({overwrite:!1,data:"isFromStart",lazy:a&&!g&&nf(l),immediateRender:a,stagger:0,parent:T},I),Q&&(k[ee.prop]=Q),t1(e._startAt=Na.set(b,k)),e._startAt._dp=0,e._startAt._sat=e,t<0&&($l?e._startAt.revert(lD):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,bc,bc);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&nf(l)||l&&!m,F=0;F<b.length;F++){if(H=b[F],$=H._gsap||BG(b)[F]._gsap,e._ptLookup[F]=oe={},BU[$.id]&&jy.length&&bL(),re=C===b?F:C.indexOf(H),ee&&(Y=new ee).init(H,Q||I,e,re,C)!==!1&&(e._pt=q=new sf(e._pt,H,Y.name,0,1,Y.render,Y,0,Y.priority),Y._props.forEach(function(le){oe[le]=q}),Y.priority&&(O=1)),!ee||Q)for(k in I)Wf[k]&&(Y=Foe(k,I,e,re,H,C))?Y.priority&&(O=1):oe[k]=q=IG.call(e,H,k,"get",I[k],re,C,0,r.stringFilter);e._op&&e._op[F]&&e.kill(H,e._op[F]),R&&e._pt&&(Iy=e,Co.killTweensOf(H,oe,e.globalTime(t)),se=!e.parent,Iy=0),e._pt&&l&&(BU[$.id]=1)}O&&Voe(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!se,h&&t<=0&&P.render(Z0,!0,!0)},GBe=function(e,t,n,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,h,p;if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,p=e._targets.length;p--;){if(u=h[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return GU=1,e.vars[t]="+=0",OG(e,a),GU=0,l?SM(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)f=c[p],u=f._pt||f,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=n-u.s,f.e&&(f.e=ha(n)+mc(f.e)),f.b&&(f.b=u.s+mc(f.b))},zBe=function(e,t){var n=e[0]?cx(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=_S({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},HBe=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(Tc(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},jw=function(e,t,n,r,s){return ta(e)?e.call(t,n,r,s):wl(e)&&~e.indexOf("random(")?EM(e):e},Uoe=NG+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",koe={};rf(Uoe+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return koe[i]=1});var Na=function(i){ioe(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:qw(r))||this;var l=a.vars,c=l.duration,u=l.delay,f=l.immediateRender,h=l.stagger,p=l.overwrite,m=l.keyframes,g=l.defaults,b=l.scrollTrigger,T=l.yoyoEase,C=r.parent||Co,R=(Tc(n)||soe(n)?rg(n[0]):"length"in r)?[n]:hd(n),P,I,F,k,q,H,O,$;if(a._targets=R.length?BG(R):SM("GSAP target "+n+" not found. https://gsap.com",!nh.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,m||h||V5(c)||V5(u)){if(r=a.vars,P=a.timeline=new lu({data:"nested",defaults:g||{},targets:C&&C.data==="nested"?C.vars.targets:R}),P.kill(),P.parent=P._dp=Mm(a),P._start=0,h||V5(c)||V5(u)){if(k=R.length,O=h&&Soe(h),dA(h))for(q in h)~Uoe.indexOf(q)&&($||($={}),$[q]=h[q]);for(I=0;I<k;I++)F=_L(r,koe),F.stagger=0,T&&(F.yoyoEase=T),$&&_S(F,$),H=R[I],F.duration=+jw(c,Mm(a),I,H,R),F.delay=(+jw(u,Mm(a),I,H,R)||0)-a._delay,!h&&k===1&&F.delay&&(a._delay=u=F.delay,a._start+=u,F.delay=0),P.to(H,F,O?O(I,H,R):0),P._ease=Sr.none;P.duration()?c=u=0:a.timeline=0}else if(m){qw(lh(P.vars.defaults,{ease:"none"})),P._ease=fx(m.ease||r.ease||"none");var ee=0,Y,oe,re;if(Tc(m))m.forEach(function(Q){return P.to(R,Q,">")}),P.duration();else{F={};for(q in m)q==="ease"||q==="easeEach"||HBe(q,m[q],F,m.easeEach);for(q in F)for(Y=F[q].sort(function(Q,se){return Q.t-se.t}),ee=0,I=0;I<Y.length;I++)oe=Y[I],re={ease:oe.e,duration:(oe.t-(I?Y[I-1].t:0))/100*c},re[q]=oe.v,P.to(R,re,ee),ee+=re.duration;P.duration()<c&&P.to({},{duration:c-P.duration()})}}c||a.duration(c=P.duration())}else a.timeline=0;return p===!0&&!MG&&(Iy=Mm(a),Co.killTweensOf(R),Iy=0),G0(C,Mm(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!c&&!m&&a._start===Ba(C._time)&&nf(f)&&vBe(Mm(a))&&C.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-u)||0)),b&&voe(Mm(a),b),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,f=r>l-bc&&!u?l:r<bc?0:r,h,p,m,g,b,T,C,R,P;if(!c)bBe(this,r,s,o);else if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(h=f,R=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(g*100+r,s,o);if(h=Ba(f%g),f===l?(m=this._repeat,h=c):(b=Ba(f/g),m=~~b,m&&m===b?(h=c,m--):h>c&&(h=c)),T=this._yoyo&&m&1,T&&(P=this._yEase,h=c-h),b=SS(this._tTime,g),h===a&&!o&&this._initted&&m===b)return this._tTime=f,this;m!==b&&(R&&this._yEase&&Boe(R,T),this.vars.repeatRefresh&&!T&&!this._lock&&h!==g&&this._initted&&(this._lock=o=1,this.render(Ba(g*m),!0).invalidate()._lock=0))}if(!this._initted){if(xoe(this,u?r:h,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&m!==b))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(P||this._ease)(h/c),this._from&&(this.ratio=C=1-C),h&&!a&&!s&&!m&&(eh(this,"onStart"),this._tTime!==f))return this;for(p=this._pt;p;)p.r(C,p.d),p=p._next;R&&R.render(r<0?r:R._dur*R._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&IU(this,r,s,o),eh(this,"onUpdate")),this._repeat&&m!==b&&this.vars.onRepeat&&!s&&this.parent&&eh(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&IU(this,r,!0,!0),(r||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&t1(this,1),!s&&!(u&&!a)&&(f||a||T)&&(eh(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){wM||Zf.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||OG(this,c),u=this._ease(c/this._dur),GBe(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(XP(this,0),this.parent||goe(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?yw(this):this.scrollTrigger&&this.scrollTrigger.kill(!!$l),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Iy&&Iy.vars.overwrite!==!0)._first||yw(this),this.parent&&o!==this.timeline.totalDuration()&&TS(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?hd(r):a,c=this._ptLookup,u=this._pt,f,h,p,m,g,b,T;if((!s||s==="all")&&gBe(a,l))return s==="all"&&(this._pt=0),yw(this);for(f=this._op=this._op||[],s!=="all"&&(wl(s)&&(g={},rf(s,function(C){return g[C]=1}),s=g),s=zBe(a,s)),T=a.length;T--;)if(~l.indexOf(a[T])){h=c[T],s==="all"?(f[T]=s,m=h,p={}):(p=f[T]=f[T]||{},m=s);for(g in m)b=h&&h[g],b&&((!("kill"in b.d)||b.d.kill(g)===!0)&&KP(this,b,"_pt"),delete h[g]),p!=="all"&&(p[g]=1)}return this._initted&&!this._pt&&u&&yw(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return $w(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return $w(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Co.killTweensOf(r,s,o)},e}(MM);lh(Na.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});rf("staggerTo,staggerFrom,staggerFromTo",function(i){Na[i]=function(){var e=new lu,t=FU.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var FG=function(e,t,n){return e[t]=n},Goe=function(e,t,n){return e[t](n)},VBe=function(e,t,n,r){return e[t](r.fp,n)},qBe=function(e,t,n){return e.setAttribute(t,n)},UG=function(e,t){return ta(e[t])?Goe:CG(e[t])&&e.setAttribute?qBe:FG},zoe=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},$Be=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Hoe=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},kG=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},jBe=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},WBe=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?KP(this,t,"_pt"):t.dep||(n=1),t=r;return!n},KBe=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Voe=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},sf=function(){function i(t,n,r,s,o,a,l,c,u){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||zoe,this.d=l||this,this.set=c||FG,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=KBe,this.m=n,this.mt=s,this.tween=r},i}();rf(NG+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return PG[i]=1});ah.TweenMax=ah.TweenLite=Na;ah.TimelineLite=ah.TimelineMax=lu;Co=new lu({sortChildren:!1,defaults:bS,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});nh.stringFilter=Poe;var hx=[],uD={},YBe=[],sX=0,XBe=0,ZI=function(e){return(uD[e]||YBe).map(function(t){return t()})},zU=function(){var e=Date.now(),t=[];e-sX>2&&(ZI("matchMediaInit"),hx.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,c;for(a in r)o=N0.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),ZI("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),sX=e,ZI("matchMedia"))},qoe=function(){function i(t,n){this.selector=n&&UU(n),this.data=[],this._r=[],this.isReverted=!1,this.id=XBe++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){ta(n)&&(s=r,r=n,n=ta);var o=this,a=function(){var c=fo,u=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=UU(s)),fo=o,f=r.apply(o,arguments),ta(f)&&o._r.push(f),fo=c,o.selector=u,o.isReverted=!1,f};return o.last=a,n===ta?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var r=fo;fo=null,n(this),fo=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Na&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),l=s.data.length;l--;)c=s.data[l],c instanceof lu?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Na)&&c.revert&&c.revert(n);s._r.forEach(function(u){return u(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=hx.length;o--;)hx[o].id===this.id&&hx.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),QBe=function(){function i(t){this.contexts=[],this.scope=t,fo&&fo.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){dA(n)||(n={matches:n});var o=new qoe(0,s||this.scope),a=o.conditions={},l,c,u;fo&&!o.selector&&(o.selector=fo.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?u=1:(l=N0.matchMedia(n[c]),l&&(hx.indexOf(o)<0&&hx.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(zU):l.addEventListener("change",zU)));return u&&r(o,function(f){return o.add(null,f)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),TL={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return Roe(r)})},timeline:function(e){return new lu(e)},getTweensOf:function(e,t){return Co.getTweensOf(e,t)},getProperty:function(e,t,n,r){wl(e)&&(e=hd(e)[0]);var s=cx(e||{}).get,o=n?moe:Aoe;return n==="native"&&(n=""),e&&(t?o((Wf[t]&&Wf[t].get||s)(e,t,n,r)):function(a,l,c){return o((Wf[a]&&Wf[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if(e=hd(e),e.length>1){var r=e.map(function(u){return df.quickSetter(u,t,n)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}e=e[0]||{};var o=Wf[t],a=cx(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var f=new o;g2._pt=0,f.init(e,n?u+n:u,g2,0,[e]),f.render(1,f),g2._pt&&kG(1,g2)}:a.set(e,l);return o?c:function(u){return c(e,l,n?u+n:u,a,1)}},quickTo:function(e,t,n){var r,s=df.to(e,lh((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Co.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=fx(e.ease,bS.ease)),eX(bS,e||{})},config:function(e){return eX(nh,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Wf[a]&&!ah[a]&&SM(t+" effect requires "+a+" plugin.")}),KI[t]=function(a,l,c){return n(hd(a),lh(l||{},s),c)},o&&(lu.prototype[t]=function(a,l,c){return this.add(KI[t](a,dA(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Sr[e]=fx(t)},parseEase:function(e,t){return arguments.length?fx(e,t):Sr},getById:function(e){return Co.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new lu(e),r,s;for(n.smoothChildTiming=nf(e.smoothChildTiming),Co.remove(n),n._dp=0,n._time=n._tTime=Co._time,r=Co._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Na&&r.vars.onComplete===r._targets[0]))&&G0(n,r,r._start-r._delay),r=s;return G0(Co,n,0),n},context:function(e,t){return e?new qoe(e,t):fo},matchMedia:function(e){return new QBe(e)},matchMediaRefresh:function(){return hx.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||zU()},addEventListener:function(e,t){var n=uD[e]||(uD[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=uD[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:RBe,wrapYoyo:DBe,distribute:Soe,random:Eoe,snap:Toe,normalize:CBe,getUnit:mc,clamp:TBe,splitColor:Doe,toArray:hd,selector:UU,mapRange:Moe,pipe:wBe,unitize:MBe,interpolate:LBe,shuffle:_oe},install:uoe,effects:KI,ticker:Zf,updateRoot:lu.updateRoot,plugins:Wf,globalTimeline:Co,core:{PropTween:sf,globals:foe,Tween:Na,Timeline:lu,Animation:MM,getCache:cx,_removeLinkedListItem:KP,reverting:function(){return $l},context:function(e){return e&&fo&&(fo.data.push(e),e._ctx=fo),fo},suppressOverwrites:function(e){return MG=e}}};rf("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return TL[i]=Na[i]});Zf.add(lu.updateRoot);g2=TL.to({},{duration:0});var ZBe=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},JBe=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=ZBe(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},JI=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(wl(s)&&(l={},rf(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}JBe(a,s)}}}},df=TL.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)$l?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},JI("roundProps",kU),JI("modifiers"),JI("snap",Toe))||TL;Na.version=lu.version=df.version="3.12.7";coe=1;RG()&&ES();Sr.Power0;Sr.Power1;Sr.Power2;Sr.Power3;Sr.Power4;Sr.Linear;Sr.Quad;Sr.Cubic;Sr.Quart;Sr.Quint;Sr.Strong;Sr.Elastic;Sr.Back;Sr.SteppedEase;Sr.Bounce;Sr.Sine;Sr.Expo;Sr.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var oX,Oy,L2,GG,Kv,aX,zG,e6e=function(){return typeof window<"u"},sg={},Cv=180/Math.PI,P2=Math.PI/180,B_=Math.atan2,lX=1e8,HG=/([A-Z])/g,t6e=/(left|right|width|margin|padding|x)/i,n6e=/[\s,\(]\S/,j0={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},HU=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},i6e=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},r6e=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},s6e=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},$oe=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},joe=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},o6e=function(e,t,n){return e.style[t]=n},a6e=function(e,t,n){return e.style.setProperty(t,n)},l6e=function(e,t,n){return e._gsap[t]=n},c6e=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},u6e=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},f6e=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},Po="transform",of=Po+"Origin",h6e=function i(e,t){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in sg&&s){if(this.tfm=this.tfm||{},e!=="transform")e=j0[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Rm(r,a)}):this.tfm[e]=o.x?o[e]:Rm(r,e),e===of&&(this.tfm.zOrigin=o.zOrigin);else return j0.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(Po)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(of,t,"")),e=Po}(s||t)&&this.props.push(e,t,s[e])},Woe=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},d6e=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(HG,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=zG(),(!s||!s.isStart)&&!n[Po]&&(Woe(n),r.zOrigin&&n[of]&&(n[of]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Koe=function(e,t){var n={target:e,props:[],revert:d6e,save:h6e};return e._gsap||df.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return n.save(r)}),n},Yoe,VU=function(e,t){var n=Oy.createElementNS?Oy.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Oy.createElement(e);return n&&n.style?n:Oy.createElement(e)},J0=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(HG,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,wS(t)||t,1)||""},cX="O,Moz,ms,Ms,Webkit".split(","),wS=function(e,t,n){var r=t||Kv,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(cX[o]+e in s););return o<0?null:(o===3?"ms":o>=0?cX[o]:"")+e},qU=function(){e6e()&&window.document&&(oX=window,Oy=oX.document,L2=Oy.documentElement,Kv=VU("div")||{style:{}},VU("div"),Po=wS(Po),of=Po+"Origin",Kv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Yoe=!!wS("perspective"),zG=df.core.reverting,GG=1)},uX=function(e){var t=e.ownerSVGElement,n=VU("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",n.appendChild(r),L2.appendChild(n);try{s=r.getBBox()}catch{}return n.removeChild(r),L2.removeChild(n),s},fX=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Xoe=function(e){var t,n;try{t=e.getBBox()}catch{t=uX(e),n=1}return t&&(t.width||t.height)||n||(t=uX(e)),t&&!t.width&&!t.x&&!t.y?{x:+fX(e,["x","cx","x1"])||0,y:+fX(e,["y","cy","y1"])||0,width:0,height:0}:t},Qoe=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Xoe(e))},$x=function(e,t){if(t){var n=e.style,r;t in sg&&t!==of&&(t=Po),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(HG,"-$1").toLowerCase())):n.removeAttribute(t)}},Fy=function(e,t,n,r,s,o){var a=new sf(e._pt,t,n,0,1,o?joe:$oe);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},hX={deg:1,rad:1,turn:1},p6e={grid:1,flex:1},n1=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=Kv.style,l=t6e.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,h=r==="px",p=r==="%",m,g,b,T;if(r===o||!s||hX[r]||hX[o])return s;if(o!=="px"&&!h&&(s=i(e,t,n,"px")),T=e.getCTM&&Qoe(e),(p||o==="%")&&(sg[t]||~t.indexOf("adius")))return m=T?e.getBBox()[l?"width":"height"]:e[u],ha(p?s/m*f:s/100*m);if(a[l?"width":"height"]=f+(h?o:r),g=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,T&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Oy||!g.appendChild)&&(g=Oy.body),b=g._gsap,b&&p&&b.width&&l&&b.time===Zf.time&&!b.uncache)return ha(s/b.width*f);if(p&&(t==="height"||t==="width")){var C=e.style[t];e.style[t]=f+r,m=e[u],C?e.style[t]=C:$x(e,t)}else(p||o==="%")&&!p6e[J0(g,"display")]&&(a.position=J0(e,"position")),g===e&&(a.position="static"),g.appendChild(Kv),m=Kv[u],g.removeChild(Kv),a.position="absolute";return l&&p&&(b=cx(g),b.time=Zf.time,b.width=g[u]),ha(h?m*s/f:m&&s?f/m*s:0)},Rm=function(e,t,n,r){var s;return GG||qU(),t in j0&&t!=="transform"&&(t=j0[t],~t.indexOf(",")&&(t=t.split(",")[0])),sg[t]&&t!=="transform"?(s=RM(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:wL(J0(e,of))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=EL[t]&&EL[t](e,t,n)||J0(e,t)||doe(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?n1(e,t,s,n)+n:s},A6e=function(e,t,n,r){if(!n||n==="none"){var s=wS(t,e,1),o=s&&J0(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=J0(e,"borderTopColor"))}var a=new sf(this._pt,e.style,t,0,1,Hoe),l=0,c=0,u,f,h,p,m,g,b,T,C,R,P,I;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(g=e.style[t],e.style[t]=r,r=J0(e,t)||r,g?e.style[t]=g:$x(e,t)),u=[n,r],Poe(u),n=u[0],r=u[1],h=n.match(m2)||[],I=r.match(m2)||[],I.length){for(;f=m2.exec(r);)b=f[0],C=r.substring(l,f.index),m?m=(m+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(m=1),b!==(g=h[c++]||"")&&(p=parseFloat(g)||0,P=g.substr((p+"").length),b.charAt(1)==="="&&(b=D2(p,b)+P),T=parseFloat(b),R=b.substr((T+"").length),l=m2.lastIndex-R.length,R||(R=R||nh.units[t]||P,l===r.length&&(r+=R,a.e+=R)),P!==R&&(p=n1(e,t,g,R)||0),a._pt={_next:a._pt,p:C||c===1?C:",",s:p,c:T-p,m:m&&m<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?joe:$oe;return aoe.test(r)&&(a.e=0),this._pt=a,a},dX={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},m6e=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=dX[n]||n,t[1]=dX[r]||r,t.join(" ")},g6e=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],sg[a]&&(l=1,a=a==="transformOrigin"?of:Po),$x(n,a);l&&($x(n,Po),o&&(o.svg&&n.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",RM(n,1),o.uncache=1,Woe(r)))}},EL={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new sf(e._pt,t,n,0,0,g6e);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},CM=[1,0,0,1,0,0],Zoe={},Joe=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},pX=function(e){var t=J0(e,Po);return Joe(t)?CM:t.substr(7).match(ooe).map(ha)},VG=function(e,t){var n=e._gsap||cx(e),r=e.style,s=pX(e),o,a,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?CM:s):(s===CM&&!e.offsetParent&&e!==L2&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,L2.appendChild(e)),s=pX(e),l?r.display=l:$x(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):L2.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},$U=function(e,t,n,r,s,o){var a=e._gsap,l=s||VG(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,h=a.yOffset||0,p=l[0],m=l[1],g=l[2],b=l[3],T=l[4],C=l[5],R=t.split(" "),P=parseFloat(R[0])||0,I=parseFloat(R[1])||0,F,k,q,H;n?l!==CM&&(k=p*b-m*g)&&(q=P*(b/k)+I*(-g/k)+(g*C-b*T)/k,H=P*(-m/k)+I*(p/k)-(p*C-m*T)/k,P=q,I=H):(F=Xoe(e),P=F.x+(~R[0].indexOf("%")?P/100*F.width:P),I=F.y+(~(R[1]||R[0]).indexOf("%")?I/100*F.height:I)),r||r!==!1&&a.smooth?(T=P-c,C=I-u,a.xOffset=f+(T*p+C*g)-T,a.yOffset=h+(T*m+C*b)-C):a.xOffset=a.yOffset=0,a.xOrigin=P,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[of]="0px 0px",o&&(Fy(o,a,"xOrigin",c,P),Fy(o,a,"yOrigin",u,I),Fy(o,a,"xOffset",f,a.xOffset),Fy(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",P+" "+I)},RM=function(e,t){var n=e._gsap||new Ooe(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=J0(e,of)||"0",u,f,h,p,m,g,b,T,C,R,P,I,F,k,q,H,O,$,ee,Y,oe,re,Q,se,le,de,ie,ge,Ce,Ie,Ee,Be;return u=f=h=g=b=T=C=R=P=0,p=m=1,n.svg=!!(e.getCTM&&Qoe(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Po]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Po]!=="none"?l[Po]:"")),r.scale=r.rotate=r.translate="none"),k=VG(e,n.svg),n.svg&&(n.uncache?(le=e.getBBox(),c=n.xOrigin-le.x+"px "+(n.yOrigin-le.y)+"px",se=""):se=!t&&e.getAttribute("data-svg-origin"),$U(e,se||c,!!se||n.originIsAbsolute,n.smooth!==!1,k)),I=n.xOrigin||0,F=n.yOrigin||0,k!==CM&&($=k[0],ee=k[1],Y=k[2],oe=k[3],u=re=k[4],f=Q=k[5],k.length===6?(p=Math.sqrt($*$+ee*ee),m=Math.sqrt(oe*oe+Y*Y),g=$||ee?B_(ee,$)*Cv:0,C=Y||oe?B_(Y,oe)*Cv+g:0,C&&(m*=Math.abs(Math.cos(C*P2))),n.svg&&(u-=I-(I*$+F*Y),f-=F-(I*ee+F*oe))):(Be=k[6],Ie=k[7],ie=k[8],ge=k[9],Ce=k[10],Ee=k[11],u=k[12],f=k[13],h=k[14],q=B_(Be,Ce),b=q*Cv,q&&(H=Math.cos(-q),O=Math.sin(-q),se=re*H+ie*O,le=Q*H+ge*O,de=Be*H+Ce*O,ie=re*-O+ie*H,ge=Q*-O+ge*H,Ce=Be*-O+Ce*H,Ee=Ie*-O+Ee*H,re=se,Q=le,Be=de),q=B_(-Y,Ce),T=q*Cv,q&&(H=Math.cos(-q),O=Math.sin(-q),se=$*H-ie*O,le=ee*H-ge*O,de=Y*H-Ce*O,Ee=oe*O+Ee*H,$=se,ee=le,Y=de),q=B_(ee,$),g=q*Cv,q&&(H=Math.cos(q),O=Math.sin(q),se=$*H+ee*O,le=re*H+Q*O,ee=ee*H-$*O,Q=Q*H-re*O,$=se,re=le),b&&Math.abs(b)+Math.abs(g)>359.9&&(b=g=0,T=180-T),p=ha(Math.sqrt($*$+ee*ee+Y*Y)),m=ha(Math.sqrt(Q*Q+Be*Be)),q=B_(re,Q),C=Math.abs(q)>2e-4?q*Cv:0,P=Ee?1/(Ee<0?-Ee:Ee):0),n.svg&&(se=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Joe(J0(e,Po)),se&&e.setAttribute("transform",se))),Math.abs(C)>90&&Math.abs(C)<270&&(s?(p*=-1,C+=g<=0?180:-180,g+=g<=0?180:-180):(m*=-1,C+=C<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=f-((n.yPercent=f&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=h+o,n.scaleX=ha(p),n.scaleY=ha(m),n.rotation=ha(g)+a,n.rotationX=ha(b)+a,n.rotationY=ha(T)+a,n.skewX=C+a,n.skewY=R+a,n.transformPerspective=P+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[of]=wL(c)),n.xOffset=n.yOffset=0,n.force3D=nh.force3D,n.renderTransform=n.svg?v6e:Yoe?eae:y6e,n.uncache=0,n},wL=function(e){return(e=e.split(" "))[0]+" "+e[1]},eO=function(e,t,n){var r=mc(t);return ha(parseFloat(t)+parseFloat(n1(e,"x",n+"px",r)))+r},y6e=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,eae(e,t)},hv="0deg",FE="0px",dv=") ",eae=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,f=n.rotationX,h=n.skewX,p=n.skewY,m=n.scaleX,g=n.scaleY,b=n.transformPerspective,T=n.force3D,C=n.target,R=n.zOrigin,P="",I=T==="auto"&&e&&e!==1||T===!0;if(R&&(f!==hv||u!==hv)){var F=parseFloat(u)*P2,k=Math.sin(F),q=Math.cos(F),H;F=parseFloat(f)*P2,H=Math.cos(F),o=eO(C,o,k*H*-R),a=eO(C,a,-Math.sin(F)*-R),l=eO(C,l,q*H*-R+R)}b!==FE&&(P+="perspective("+b+dv),(r||s)&&(P+="translate("+r+"%, "+s+"%) "),(I||o!==FE||a!==FE||l!==FE)&&(P+=l!==FE||I?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+dv),c!==hv&&(P+="rotate("+c+dv),u!==hv&&(P+="rotateY("+u+dv),f!==hv&&(P+="rotateX("+f+dv),(h!==hv||p!==hv)&&(P+="skew("+h+", "+p+dv),(m!==1||g!==1)&&(P+="scale("+m+", "+g+dv),C.style[Po]=P||"translate(0, 0)"},v6e=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,f=n.scaleX,h=n.scaleY,p=n.target,m=n.xOrigin,g=n.yOrigin,b=n.xOffset,T=n.yOffset,C=n.forceCSS,R=parseFloat(o),P=parseFloat(a),I,F,k,q,H;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=P2,c*=P2,I=Math.cos(l)*f,F=Math.sin(l)*f,k=Math.sin(l-c)*-h,q=Math.cos(l-c)*h,c&&(u*=P2,H=Math.tan(c-u),H=Math.sqrt(1+H*H),k*=H,q*=H,u&&(H=Math.tan(u),H=Math.sqrt(1+H*H),I*=H,F*=H)),I=ha(I),F=ha(F),k=ha(k),q=ha(q)):(I=f,q=h,F=k=0),(R&&!~(o+"").indexOf("px")||P&&!~(a+"").indexOf("px"))&&(R=n1(p,"x",o,"px"),P=n1(p,"y",a,"px")),(m||g||b||T)&&(R=ha(R+m-(m*I+g*k)+b),P=ha(P+g-(m*F+g*q)+T)),(r||s)&&(H=p.getBBox(),R=ha(R+r/100*H.width),P=ha(P+s/100*H.height)),H="matrix("+I+","+F+","+k+","+q+","+R+","+P+")",p.setAttribute("transform",H),C&&(p.style[Po]=H)},x6e=function(e,t,n,r,s){var o=360,a=wl(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Cv:1),c=l-r,u=r+c+"deg",f,h;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),f==="cw"&&c<0?c=(c+o*lX)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*lX)%o-~~(c/o)*o)),e._pt=h=new sf(e._pt,t,n,r,c,i6e),h.e=u,h.u="deg",e._props.push(n),h},AX=function(e,t){for(var n in t)e[n]=t[n];return e},b6e=function(e,t,n){var r=AX({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,c,u,f,h,p,m;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Po]=t,a=RM(n,1),$x(n,Po),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Po],o[Po]=t,a=RM(n,1),o[Po]=c);for(l in sg)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(p=mc(c),m=mc(u),f=p!==m?n1(n,l,c,m):parseFloat(c),h=parseFloat(u),e._pt=new sf(e._pt,a,l,f,h-f,HU),e._pt.u=m||0,e._props.push(l));AX(a,r)};rf("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});EL[e>1?"border"+i:i]=function(a,l,c,u,f){var h,p;if(arguments.length<4)return h=o.map(function(m){return Rm(a,m,c)}),p=h.join(" "),p.split(h[0]).length===5?h[0]:p;h=(u+"").split(" "),p={},o.forEach(function(m,g){return p[m]=h[g]=h[g]||h[(g-1)/2|0]}),a.init(l,p,f)}});var tae={name:"css",register:qU,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,c,u,f,h,p,m,g,b,T,C,R,P,I,F,k,q;GG||qU(),this.styles=this.styles||Koe(e),q=this.styles.props,this.tween=n;for(g in t)if(g!=="autoRound"&&(u=t[g],!(Wf[g]&&Foe(g,t,n,r,e,s)))){if(p=typeof u,m=EL[g],p==="function"&&(u=u.call(n,r,e,s),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=EM(u)),m)m(this,e,g,u,n)&&(k=1);else if(g.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(g)+"").trim(),u+="",Wy.lastIndex=0,Wy.test(c)||(b=mc(c),T=mc(u)),T?b!==T&&(c=n1(e,g,c,T)+T):b&&(u+=b),this.add(a,"setProperty",c,u,r,s,0,0,g),o.push(g),q.push(g,0,a[g]);else if(p!=="undefined"){if(l&&g in l?(c=typeof l[g]=="function"?l[g].call(n,r,e,s):l[g],wl(c)&&~c.indexOf("random(")&&(c=EM(c)),mc(c+"")||c==="auto"||(c+=nh.units[g]||mc(Rm(e,g))||""),(c+"").charAt(1)==="="&&(c=Rm(e,g))):c=Rm(e,g),h=parseFloat(c),C=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),C&&(u=u.substr(2)),f=parseFloat(u),g in j0&&(g==="autoAlpha"&&(h===1&&Rm(e,"visibility")==="hidden"&&f&&(h=0),q.push("visibility",0,a.visibility),Fy(this,a,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),g!=="scale"&&g!=="transform"&&(g=j0[g],~g.indexOf(",")&&(g=g.split(",")[0]))),R=g in sg,R){if(this.styles.save(g),P||(I=e._gsap,I.renderTransform&&!t.parseTransform||RM(e,t.parseTransform),F=t.smoothOrigin!==!1&&I.smooth,P=this._pt=new sf(this._pt,a,Po,0,1,I.renderTransform,I,0,-1),P.dep=1),g==="scale")this._pt=new sf(this._pt,I,"scaleY",I.scaleY,(C?D2(I.scaleY,C+f):f)-I.scaleY||0,HU),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){q.push(of,0,a[of]),u=m6e(u),I.svg?$U(e,u,0,F,0,this):(T=parseFloat(u.split(" ")[2])||0,T!==I.zOrigin&&Fy(this,I,"zOrigin",I.zOrigin,T),Fy(this,a,g,wL(c),wL(u)));continue}else if(g==="svgOrigin"){$U(e,u,1,F,0,this);continue}else if(g in Zoe){x6e(this,I,g,h,C?D2(h,C+u):u);continue}else if(g==="smoothOrigin"){Fy(this,I,"smooth",I.smooth,u);continue}else if(g==="force3D"){I[g]=u;continue}else if(g==="transform"){b6e(this,u,e);continue}}else g in a||(g=wS(g)||g);if(R||(f||f===0)&&(h||h===0)&&!n6e.test(u)&&g in a)b=(c+"").substr((h+"").length),f||(f=0),T=mc(u)||(g in nh.units?nh.units[g]:b),b!==T&&(h=n1(e,g,c,T)),this._pt=new sf(this._pt,R?I:a,g,h,(C?D2(h,C+f):f)-h,!R&&(T==="px"||g==="zIndex")&&t.autoRound!==!1?s6e:HU),this._pt.u=T||0,b!==T&&T!=="%"&&(this._pt.b=c,this._pt.r=r6e);else if(g in a)A6e.call(this,e,g,c,C?C+u:u);else if(g in e)this.add(e,g,c||e[g],C?C+u:u,r,s);else if(g!=="parseTransform"){LG(g,u);continue}R||(g in a?q.push(g,0,a[g]):typeof e[g]=="function"?q.push(g,2,e[g]()):q.push(g,1,c||e[g])),o.push(g)}}k&&Voe(this)},render:function(e,t){if(t.tween._time||!zG())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Rm,aliases:j0,getSetter:function(e,t,n){var r=j0[t];return r&&r.indexOf(",")<0&&(t=r),t in sg&&t!==of&&(e._gsap.x||Rm(e,"x"))?n&&aX===n?t==="scale"?c6e:l6e:(aX=n||{})&&(t==="scale"?u6e:f6e):e.style&&!CG(e.style[t])?o6e:~t.indexOf("-")?a6e:UG(e,t)},core:{_removeProperty:$x,_getMatrix:VG}};df.utils.checkPrefix=wS;df.core.getStyleSaver=Koe;(function(i,e,t,n){var r=rf(i+","+e+","+t,function(s){sg[s]=1});rf(e,function(s){nh.units[s]="deg",Zoe[s]=1}),j0[r[13]]=i+","+e,rf(n,function(s){var o=s.split(":");j0[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");rf("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){nh.units[i]="px"});df.registerPlugin(tae);var qG=df.registerPlugin(tae)||df;qG.core.Tween;/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let mX=typeof document<"u"?X.useLayoutEffect:X.useEffect,gX=i=>i&&!Array.isArray(i)&&typeof i=="object",q5=[],_6e={},nae=qG;const $G=(i,e=q5)=>{let t=_6e;gX(i)?(t=i,i=null,e="dependencies"in t?t.dependencies:q5):gX(e)&&(t=e,e="dependencies"in t?t.dependencies:q5),i&&typeof i!="function"&&console.warn("First parameter must be a function or config object");const{scope:n,revertOnUpdate:r}=t,s=X.useRef(!1),o=X.useRef(nae.context(()=>{},n)),a=X.useRef(c=>o.current.add(null,c)),l=e&&e.length&&!r;return l&&mX(()=>(s.current=!0,()=>o.current.revert()),q5),mX(()=>{if(i&&o.current.add(i,n),!l||!s.current)return()=>o.current.revert()},e),{context:o.current,contextSafe:a.current}};$G.register=i=>{nae=i};$G.headless=!0;Up.preload("models/react.glb");Up.preload("models/cube.glb");function S6e({children:i,isMobile:e}){const t=X.useRef();return w3((n,r)=>{hW.damp3(n.camera.position,[0,0,30],.25,r),e||hW.dampE(t.current.rotation,[-n.pointer.y/3,-n.pointer.x/5,0],.25,r)}),ce.jsx(ce.Fragment,{children:ce.jsx("group",{ref:t,scale:1,children:i})})}function iae({name:i,isBeam:e=!1,continerClass:t}){return ce.jsxs("button",{className:`btn ${t}`,children:[e&&ce.jsxs("span",{className:"relative flex",children:[ce.jsx("span",{className:"btn-ping"}),ce.jsx("span",{className:"btn-ping_dot"})]}),i]})}function T6e(){jI({maxWidth:440});const i=jI({maxWidth:768});return jI({minWidth:768,maxWidth:1024}),ce.jsx("section",{className:"min-h-screen w-full flex flex-col relative",id:"home",children:ce.jsxs("div",{className:"w-full mx-auto flex flex-col sm:mt-36 mt-20 c-space gap-3 ",children:[ce.jsxs("p",{className:"sm:text-3xl text-2xl font-medium text-white text-center font-generalsans ",children:["Hi, I'm Iresh ",ce.jsx("span",{className:"waving-hand",children:""})]}),ce.jsx("p",{className:"hero_tag text-gray_gradient",children:"Building Products & Brands"}),ce.jsx("div",{className:"w-full h-full absolute inset-0",children:ce.jsx(G9,{className:"w-full h-full",children:ce.jsxs(X.Suspense,{fallback:ce.jsx(aG,{}),children:[ce.jsx(Awe,{makeDefault:!0,position:[0,0,30]}),ce.jsx(S6e,{isMobile:i,children:ce.jsx(PRe,{position:[-1,-9,-2],rotation:[-2.9,Math.PI,0],scale:-.1})}),ce.jsx("ambientLight",{intensity:1}),ce.jsx("directionalLight",{position:[10,10,10],intensity:10})]})})}),ce.jsx("div",{className:" absolute bottom-7 left-0 right-0 w-full z-10 c-space",children:ce.jsx("a",{href:"#about",className:"w-fit",children:ce.jsx(iae,{name:"Let's work together",isBeam:!0,continerClass:"sm:w-fit w-full sm:min-w-96 lg:w-3"})})})]})})}function E6e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function w6e(i,e,t){return e=B6e(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function yX(i,e){return R6e(i)||E6e(i,e)||rae(i,e)||P6e()}function M6e(i){return C6e(i)||D6e(i)||rae(i)||L6e()}function C6e(i){if(Array.isArray(i))return jU(i)}function R6e(i){if(Array.isArray(i))return i}function D6e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function rae(i,e){if(i){if(typeof i=="string")return jU(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jU(i,e)}}function jU(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function L6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N6e(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function B6e(i){var e=N6e(i,"string");return typeof e=="symbol"?e:String(e)}var I6e=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(M6e(Object.entries(e).filter(function(r){var s=yX(r,1),o=s[0];return!n.has(o)}).map(function(r){var s=yX(r,2),o=s[0],a=s[1];return w6e({},o,a)}))))};function WU(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function O6e(i){if(Array.isArray(i))return i}function F6e(i){if(Array.isArray(i))return WU(i)}function U6e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function k6e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function G6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H6e(i,e){return O6e(i)||k6e(i,e)||sae(i,e)||G6e()}function vX(i){return F6e(i)||U6e(i)||sae(i)||z6e()}function sae(i,e){if(i){if(typeof i=="string")return WU(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?WU(i,e):void 0}}function V6e(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.wrapperElementType,n=t===void 0?"div":t,r=e.nodeMapper,s=r===void 0?function(u){return u}:r,o=e.methodNames,a=o===void 0?[]:o,l=e.initPropNames,c=l===void 0?[]:l;return X.forwardRef(function(u,f){var h=X.useRef(),p=X.useMemo(function(){var b=Object.fromEntries(c.filter(function(T){return u.hasOwnProperty(T)}).map(function(T){return[T,u[T]]}));return i(b)},[]);xX(function(){p(s(h.current))},X.useLayoutEffect),xX(function(){return p._destructor instanceof Function?p._destructor:void 0});var m=X.useCallback(function(b){for(var T=arguments.length,C=new Array(T>1?T-1:0),R=1;R<T;R++)C[R-1]=arguments[R];return p[b]instanceof Function?p[b].apply(p,C):void 0},[p]),g=X.useRef({});return Object.keys(I6e(u,[].concat(vX(a),vX(c)))).filter(function(b){return g.current[b]!==u[b]}).forEach(function(b){return m(b,u[b])}),g.current=u,X.useImperativeHandle(f,function(){return Object.fromEntries(a.map(function(b){return[b,function(){for(var T=arguments.length,C=new Array(T),R=0;R<T;R++)C[R]=arguments[R];return m.apply(void 0,[b].concat(C))}]}))},[m]),Ne.createElement(n,{ref:h})})}function xX(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.useEffect,t=X.useRef(),n=X.useRef(!1),r=X.useRef(!1),s=X.useState(0),o=H6e(s,2);o[0];var a=o[1];n.current&&(r.current=!0),e(function(){return n.current||(t.current=i(),n.current=!0),a(function(l){return l+1}),function(){r.current&&t.current&&t.current()}},[])}class q6e extends Vi{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new at(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const I_=new he,bX=new rn,_X=new rn,SX=new he,TX=new he;class $6e{constructor(e={}){const t=this;let n,r,s,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:n,height:r}},this.render=function(m,g){m.matrixWorldAutoUpdate===!0&&m.updateMatrixWorld(),g.parent===null&&g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),bX.copy(g.matrixWorldInverse),_X.multiplyMatrices(g.projectionMatrix,bX),u(m,m,g),p(m)},this.setSize=function(m,g){n=m,r=g,s=n/2,o=r/2,l.style.width=m+"px",l.style.height=g+"px"};function c(m){m.isCSS2DObject&&(m.element.style.display="none");for(let g=0,b=m.children.length;g<b;g++)c(m.children[g])}function u(m,g,b){if(m.visible===!1){c(m);return}if(m.isCSS2DObject){I_.setFromMatrixPosition(m.matrixWorld),I_.applyMatrix4(_X);const T=I_.z>=-1&&I_.z<=1&&m.layers.test(b.layers)===!0,C=m.element;C.style.display=T===!0?"":"none",T===!0&&(m.onBeforeRender(t,g,b),C.style.transform="translate("+-100*m.center.x+"%,"+-100*m.center.y+"%)translate("+(I_.x*s+s)+"px,"+(-I_.y*o+o)+"px)",C.parentNode!==l&&l.appendChild(C),m.onAfterRender(t,g,b));const R={distanceToCameraSquared:f(b,m)};a.objects.set(m,R)}for(let T=0,C=m.children.length;T<C;T++)u(m.children[T],g,b)}function f(m,g){return SX.setFromMatrixPosition(m.matrixWorld),TX.setFromMatrixPosition(g.matrixWorld),SX.distanceToSquared(TX)}function h(m){const g=[];return m.traverseVisible(function(b){b.isCSS2DObject&&g.push(b)}),g}function p(m){const g=h(m).sort(function(T,C){if(T.renderOrder!==C.renderOrder)return C.renderOrder-T.renderOrder;const R=a.objects.get(T).distanceToCameraSquared,P=a.objects.get(C).distanceToCameraSquared;return R-P}),b=g.length;for(let T=0,C=g.length;T<C;T++)g[T].element.style.zIndex=b-T}}}function KU(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var j6e=typeof global=="object"&&global&&global.Object===Object&&global,W6e=typeof self=="object"&&self&&self.Object===Object&&self,oae=j6e||W6e||Function("return this")(),tO=function(){return oae.Date.now()},K6e=/\s/;function Y6e(i){for(var e=i.length;e--&&K6e.test(i.charAt(e)););return e}var X6e=/^\s+/;function Q6e(i){return i&&i.slice(0,Y6e(i)+1).replace(X6e,"")}var ML=oae.Symbol,aae=Object.prototype,Z6e=aae.hasOwnProperty,J6e=aae.toString,UE=ML?ML.toStringTag:void 0;function eIe(i){var e=Z6e.call(i,UE),t=i[UE];try{i[UE]=void 0;var n=!0}catch{}var r=J6e.call(i);return n&&(e?i[UE]=t:delete i[UE]),r}var tIe=Object.prototype,nIe=tIe.toString;function iIe(i){return nIe.call(i)}var rIe="[object Null]",sIe="[object Undefined]",EX=ML?ML.toStringTag:void 0;function oIe(i){return i==null?i===void 0?sIe:rIe:EX&&EX in Object(i)?eIe(i):iIe(i)}function aIe(i){return i!=null&&typeof i=="object"}var lIe="[object Symbol]";function cIe(i){return typeof i=="symbol"||aIe(i)&&oIe(i)==lIe}var wX=NaN,uIe=/^[-+]0x[0-9a-f]+$/i,fIe=/^0b[01]+$/i,hIe=/^0o[0-7]+$/i,dIe=parseInt;function MX(i){if(typeof i=="number")return i;if(cIe(i))return wX;if(KU(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=KU(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Q6e(i);var t=fIe.test(i);return t||hIe.test(i)?dIe(i.slice(2),t?2:8):uIe.test(i)?wX:+i}var pIe="Expected a function",AIe=Math.max,mIe=Math.min;function gIe(i,e,t){var n,r,s,o,a,l,c=0,u=!1,f=!1,h=!0;if(typeof i!="function")throw new TypeError(pIe);e=MX(e)||0,KU(t)&&(u=!!t.leading,f="maxWait"in t,s=f?AIe(MX(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function p(F){var k=n,q=r;return n=r=void 0,c=F,o=i.apply(q,k),o}function m(F){return c=F,a=setTimeout(T,e),u?p(F):o}function g(F){var k=F-l,q=F-c,H=e-k;return f?mIe(H,s-q):H}function b(F){var k=F-l,q=F-c;return l===void 0||k>=e||k<0||f&&q>=s}function T(){var F=tO();if(b(F))return C(F);a=setTimeout(T,g(F))}function C(F){return a=void 0,h&&n?p(F):(n=r=void 0,o)}function R(){a!==void 0&&clearTimeout(a),c=0,n=l=r=a=void 0}function P(){return a===void 0?o:C(tO())}function I(){var F=tO(),k=b(F);if(n=arguments,r=this,l=F,k){if(a===void 0)return m(l);if(f)return clearTimeout(a),a=setTimeout(T,e),p(l)}return a===void 0&&(a=setTimeout(T,e)),o}return I.cancel=R,I.flush=P,I}function CX(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function yIe(i){if(Array.isArray(i))return i}function vIe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function xIe(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function bIe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function _Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SIe(i,e){return yIe(i)||bIe(i,e)||TIe(i,e)||_Ie()}function TIe(i,e){if(i){if(typeof i=="string")return CX(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CX(i,e):void 0}}var EIe=xIe(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,o=s===void 0?!0:s,a=t.onChange,l=a===void 0?function(c,u){}:a;vIe(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=o,this.onChange=l});function il(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,o=s===void 0?{}:s,a=i.aliases,l=a===void 0?{}:a,c=i.init,u=c===void 0?function(){}:c,f=i.update,h=f===void 0?function(){}:f,p=Object.keys(r).map(function(m){return new EIe(m,r[m])});return function m(){for(var g=arguments.length,b=new Array(g),T=0;T<g;T++)b[T]=arguments[T];var C=!!(this instanceof m&&this.constructor),R=C?b.shift():void 0,P=b[0],I=P===void 0?{}:P,F=Object.assign({},t instanceof Function?t(I):t,{initialised:!1}),k={};function q($){return H($,I),O(),q}var H=function(ee,Y){u.call(q,ee,F,Y),F.initialised=!0},O=gIe(function(){F.initialised&&(h.call(q,F,k),k={})},1);return p.forEach(function($){q[$.name]=ee($);function ee(Y){var oe=Y.name,re=Y.triggerUpdate,Q=re===void 0?!1:re,se=Y.onChange,le=se===void 0?function(ge,Ce){}:se,de=Y.defaultVal,ie=de===void 0?null:de;return function(ge){var Ce=F[oe];if(!arguments.length)return Ce;var Ie=ge===void 0?ie:ge;return F[oe]=Ie,le.call(q,Ie,F,Ce),!k.hasOwnProperty(oe)&&(k[oe]=Ce),Q&&O(),q}}}),Object.keys(o).forEach(function($){q[$]=function(){for(var ee,Y=arguments.length,oe=new Array(Y),re=0;re<Y;re++)oe[re]=arguments[re];return(ee=o[$]).call.apply(ee,[q,F].concat(oe))}}),Object.entries(l).forEach(function($){var ee=SIe($,2),Y=ee[0],oe=ee[1];return q[Y]=q[oe]}),q.resetProps=function(){return p.forEach(function($){q[$.name]($.defaultVal)}),q},q.resetProps(),F._rerender=O,C&&R&&q(R),q}}var ka=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-ka.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?ka.Bounce.In(i*2)*.5:ka.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),xw=function(){return performance.now()},QP=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=xw()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),YU={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=YU.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i}}},lae=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),XU=new QP,wc=function(){function i(e,t){t===void 0&&(t=XU),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ka.Linear.None,this._interpolationFunction=YU.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=lae.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=xw()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var o in n){var a=e[o],l=Array.isArray(a),c=l?"array":typeof a,u=!l&&Array.isArray(n[o]);if(!(c==="undefined"||c==="function")){if(u){var f=n[o];if(f.length===0)continue;for(var h=[a],p=0,m=f.length;p<m;p+=1){var g=this._handleRelativeValue(a,f[p]);if(isNaN(g)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(g)}u&&(n[o]=h)}if((c==="object"||l)&&a&&!u){t[o]=l?[]:{};var b=a;for(var T in b)t[o][T]=b[T];r[o]=l?[]:{};var f=n[o];if(!this._isDynamic){var C={};for(var T in f)C[T]=f[T];n[o]=f=C}this._setupProperties(b,t[o],f,r[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),u?r[o]=n[o].slice().reverse():r[o]=t[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=xw()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=xw()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=XU),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=ka.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=YU.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=xw()),t===void 0&&(t=!0),this._isPaused)return!0;var s,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(n._duration===0||a>c)return 1;var b=Math.trunc(a/l),T=a-b*l,C=Math.min(T/n._duration,1);return C===0&&a===n._duration?1:C},f=u(),h=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||a>=this._duration)if(this._repeat>0){var p=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=p);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*p,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var m=0,g=this._chainedTweens.length;m<g;m++)this._chainedTweens[m].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],l=Array.isArray(e[s]),c=Array.isArray(a),u=!l&&c;u?e[s]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[s],o,a,r):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i}();lae.nextId;var pA=XU;pA.getAll.bind(pA);pA.removeAll.bind(pA);pA.add.bind(pA);pA.remove.bind(pA);pA.update.bind(pA);function wIe(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return cae(this.cover(e,t,n),e,t,n,i)}function cae(i,e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var s,o=i._root,a={data:r},l=i._x0,c=i._y0,u=i._z0,f=i._x1,h=i._y1,p=i._z1,m,g,b,T,C,R,P,I,F,k,q;if(!o)return i._root=a,i;for(;o.length;)if((P=e>=(m=(l+f)/2))?l=m:f=m,(I=t>=(g=(c+h)/2))?c=g:h=g,(F=n>=(b=(u+p)/2))?u=b:p=b,s=o,!(o=o[k=F<<2|I<<1|P]))return s[k]=a,i;if(T=+i._x.call(null,o.data),C=+i._y.call(null,o.data),R=+i._z.call(null,o.data),e===T&&t===C&&n===R)return a.next=o,s?s[k]=a:i._root=a,i;do s=s?s[k]=new Array(8):i._root=new Array(8),(P=e>=(m=(l+f)/2))?l=m:f=m,(I=t>=(g=(c+h)/2))?c=g:h=g,(F=n>=(b=(u+p)/2))?u=b:p=b;while((k=F<<2|I<<1|P)===(q=(R>=b)<<2|(C>=g)<<1|T>=m));return s[q]=o,s[k]=a,i}function MIe(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),r=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let f=0,h,p,m,g;f<e;++f)isNaN(p=+this._x.call(null,h=i[f]))||isNaN(m=+this._y.call(null,h))||isNaN(g=+this._z.call(null,h))||(t[f]=p,n[f]=m,r[f]=g,p<s&&(s=p),p>l&&(l=p),m<o&&(o=m),m>c&&(c=m),g<a&&(a=g),g>u&&(u=g));if(s>l||o>c||a>u)return this;this.cover(s,o,a).cover(l,c,u);for(let f=0;f<e;++f)cae(this,t[f],n[f],r[f],i[f]);return this}function CIe(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(n))o=(n=Math.floor(i))+1,a=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var c=o-n||1,u=this._root,f,h;n>i||i>=o||r>e||e>=a||s>t||t>=l;)switch(h=(t<s)<<2|(e<r)<<1|i<n,f=new Array(8),f[h]=u,u=f,c*=2,h){case 0:o=n+c,a=r+c,l=s+c;break;case 1:n=o-c,a=r+c,l=s+c;break;case 2:o=n+c,r=a-c,l=s+c;break;case 3:n=o-c,r=a-c,l=s+c;break;case 4:o=n+c,a=r+c,s=l-c;break;case 5:n=o-c,a=r+c,s=l-c;break;case 6:o=n+c,r=a-c,s=l-c;break;case 7:n=o-c,r=a-c,s=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function RIe(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function DIe(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Ds(i,e,t,n,r,s,o){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=r,this.y1=s,this.z1=o}function LIe(i,e,t,n){var r,s=this._x0,o=this._y0,a=this._z0,l,c,u,f,h,p,m=this._x1,g=this._y1,b=this._z1,T=[],C=this._root,R,P;for(C&&T.push(new Ds(C,s,o,a,m,g,b)),n==null?n=1/0:(s=i-n,o=e-n,a=t-n,m=i+n,g=e+n,b=t+n,n*=n);R=T.pop();)if(!(!(C=R.node)||(l=R.x0)>m||(c=R.y0)>g||(u=R.z0)>b||(f=R.x1)<s||(h=R.y1)<o||(p=R.z1)<a))if(C.length){var I=(l+f)/2,F=(c+h)/2,k=(u+p)/2;T.push(new Ds(C[7],I,F,k,f,h,p),new Ds(C[6],l,F,k,I,h,p),new Ds(C[5],I,c,k,f,F,p),new Ds(C[4],l,c,k,I,F,p),new Ds(C[3],I,F,u,f,h,k),new Ds(C[2],l,F,u,I,h,k),new Ds(C[1],I,c,u,f,F,k),new Ds(C[0],l,c,u,I,F,k)),(P=(t>=k)<<2|(e>=F)<<1|i>=I)&&(R=T[T.length-1],T[T.length-1]=T[T.length-1-P],T[T.length-1-P]=R)}else{var q=i-+this._x.call(null,C.data),H=e-+this._y.call(null,C.data),O=t-+this._z.call(null,C.data),$=q*q+H*H+O*O;if($<n){var ee=Math.sqrt(n=$);s=i-ee,o=e-ee,a=t-ee,m=i+ee,g=e+ee,b=t+ee,r=C.data}}return r}const PIe=(i,e,t,n,r,s)=>Math.sqrt((i-n)**2+(e-r)**2+(t-s)**2);function NIe(i,e,t,n){const r=[],s=i-n,o=e-n,a=t-n,l=i+n,c=e+n,u=t+n;return this.visit((f,h,p,m,g,b,T)=>{if(!f.length)do{const C=f.data;PIe(i,e,t,this._x(C),this._y(C),this._z(C))<=n&&r.push(C)}while(f=f.next);return h>l||p>c||m>u||g<s||b<o||T<a}),r}function BIe(i){if(isNaN(h=+this._x.call(null,i))||isNaN(p=+this._y.call(null,i))||isNaN(m=+this._z.call(null,i)))return this;var e,t=this._root,n,r,s,o=this._x0,a=this._y0,l=this._z0,c=this._x1,u=this._y1,f=this._z1,h,p,m,g,b,T,C,R,P,I,F;if(!t)return this;if(t.length)for(;;){if((C=h>=(g=(o+c)/2))?o=g:c=g,(R=p>=(b=(a+u)/2))?a=b:u=b,(P=m>=(T=(l+f)/2))?l=T:f=T,e=t,!(t=t[I=P<<2|R<<1|C]))return this;if(!t.length)break;(e[I+1&7]||e[I+2&7]||e[I+3&7]||e[I+4&7]||e[I+5&7]||e[I+6&7]||e[I+7&7])&&(n=e,F=I)}for(;t.data!==i;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[I]=s:delete e[I],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[F]=t:this._root=t),this):(this._root=s,this)}function IIe(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function OIe(){return this._root}function FIe(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function UIe(i){var e=[],t,n=this._root,r,s,o,a,l,c,u;for(n&&e.push(new Ds(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,u=t.z1)&&n.length){var f=(s+l)/2,h=(o+c)/2,p=(a+u)/2;(r=n[7])&&e.push(new Ds(r,f,h,p,l,c,u)),(r=n[6])&&e.push(new Ds(r,s,h,p,f,c,u)),(r=n[5])&&e.push(new Ds(r,f,o,p,l,h,u)),(r=n[4])&&e.push(new Ds(r,s,o,p,f,h,u)),(r=n[3])&&e.push(new Ds(r,f,h,a,l,c,p)),(r=n[2])&&e.push(new Ds(r,s,h,a,f,c,p)),(r=n[1])&&e.push(new Ds(r,f,o,a,l,h,p)),(r=n[0])&&e.push(new Ds(r,s,o,a,f,h,p))}return this}function kIe(i){var e=[],t=[],n;for(this._root&&e.push(new Ds(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var r=n.node;if(r.length){var s,o=n.x0,a=n.y0,l=n.z0,c=n.x1,u=n.y1,f=n.z1,h=(o+c)/2,p=(a+u)/2,m=(l+f)/2;(s=r[0])&&e.push(new Ds(s,o,a,l,h,p,m)),(s=r[1])&&e.push(new Ds(s,h,a,l,c,p,m)),(s=r[2])&&e.push(new Ds(s,o,p,l,h,u,m)),(s=r[3])&&e.push(new Ds(s,h,p,l,c,u,m)),(s=r[4])&&e.push(new Ds(s,o,a,m,h,p,f)),(s=r[5])&&e.push(new Ds(s,h,a,m,c,p,f)),(s=r[6])&&e.push(new Ds(s,o,p,m,h,u,f)),(s=r[7])&&e.push(new Ds(s,h,p,m,c,u,f))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function GIe(i){return i[0]}function zIe(i){return arguments.length?(this._x=i,this):this._x}function HIe(i){return i[1]}function VIe(i){return arguments.length?(this._y=i,this):this._y}function qIe(i){return i[2]}function $Ie(i){return arguments.length?(this._z=i,this):this._z}function uae(i,e,t,n){var r=new jG(e??GIe,t??HIe,n??qIe,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function jG(i,e,t,n,r,s,o,a,l){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function RX(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var Kl=uae.prototype=jG.prototype;Kl.copy=function(){var i=new jG(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=RX(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(n=e.source[r])&&(n.length?t.push({source:n,target:e.target[r]=new Array(8)}):e.target[r]=RX(n));return i};Kl.add=wIe;Kl.addAll=MIe;Kl.cover=CIe;Kl.data=RIe;Kl.extent=DIe;Kl.find=LIe;Kl.findAllWithinRadius=NIe;Kl.remove=BIe;Kl.removeAll=IIe;Kl.root=OIe;Kl.size=FIe;Kl.visit=UIe;Kl.visitAfter=kIe;Kl.x=zIe;Kl.y=VIe;Kl.z=$Ie;function fD(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function jIe(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function fae(i){let e,t,n;i.length!==2?(e=fD,t=(a,l)=>fD(i(a),l),n=(a,l)=>i(a)-l):(e=i===fD||i===jIe?i:WIe,t=i,n=i);function r(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;t(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;t(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=r(a,l,c,u-1);return f>c&&n(a[f-1],l)>-n(a[f],l)?f-1:f}return{left:r,center:o,right:s}}function WIe(){return 0}function KIe(i){return i===null?NaN:+i}const YIe=fae(fD),hae=YIe.right;fae(KIe).center;function CL(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class Km{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(n=o,r=e[--t],o=n+r,s=r-(o-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=o+r,r==n-o&&(o=n))}return o}}const XIe=Math.sqrt(50),QIe=Math.sqrt(10),ZIe=Math.sqrt(2);function RL(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),o=s>=XIe?10:s>=QIe?5:s>=ZIe?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(i*c),l=Math.round(e*c),a/c<i&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(i/c),l=Math.round(e/c),a*c<i&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?RL(i,e,t*2):[a,l,c]}function JIe(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,o]=n?RL(e,i,t):RL(i,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(n)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}function QU(i,e,t){return e=+e,i=+i,t=+t,RL(i,e,t)[2]}function eOe(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?QU(e,i,t):QU(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function tOe(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function nOe(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*iOe(i){for(const e of i)yield*e}function DM(i){return Array.from(iOe(i))}function y2(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function dae(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function WG(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function pae(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function G3(){}var LM=.7,DL=1/LM,N2="\\s*([+-]?\\d+)\\s*",PM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rOe=/^#([0-9a-f]{3,8})$/,sOe=new RegExp(`^rgb\\(${N2},${N2},${N2}\\)$`),oOe=new RegExp(`^rgb\\(${eA},${eA},${eA}\\)$`),aOe=new RegExp(`^rgba\\(${N2},${N2},${N2},${PM}\\)$`),lOe=new RegExp(`^rgba\\(${eA},${eA},${eA},${PM}\\)$`),cOe=new RegExp(`^hsl\\(${PM},${eA},${eA}\\)$`),uOe=new RegExp(`^hsla\\(${PM},${eA},${eA},${PM}\\)$`),DX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WG(G3,jx,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:LX,formatHex:LX,formatHex8:fOe,formatHsl:hOe,formatRgb:PX,toString:PX});function LX(){return this.rgb().formatHex()}function fOe(){return this.rgb().formatHex8()}function hOe(){return Aae(this).formatHsl()}function PX(){return this.rgb().formatRgb()}function jx(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=rOe.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?NX(e):t===3?new Zu(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?$5(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?$5(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=sOe.exec(i))?new Zu(e[1],e[2],e[3],1):(e=oOe.exec(i))?new Zu(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=aOe.exec(i))?$5(e[1],e[2],e[3],e[4]):(e=lOe.exec(i))?$5(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cOe.exec(i))?OX(e[1],e[2]/100,e[3]/100,1):(e=uOe.exec(i))?OX(e[1],e[2]/100,e[3]/100,e[4]):DX.hasOwnProperty(i)?NX(DX[i]):i==="transparent"?new Zu(NaN,NaN,NaN,0):null}function NX(i){return new Zu(i>>16&255,i>>8&255,i&255,1)}function $5(i,e,t,n){return n<=0&&(i=e=t=NaN),new Zu(i,e,t,n)}function dOe(i){return i instanceof G3||(i=jx(i)),i?(i=i.rgb(),new Zu(i.r,i.g,i.b,i.opacity)):new Zu}function ZU(i,e,t,n){return arguments.length===1?dOe(i):new Zu(i,e,t,n??1)}function Zu(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}WG(Zu,ZU,pae(G3,{brighter(i){return i=i==null?DL:Math.pow(DL,i),new Zu(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?LM:Math.pow(LM,i),new Zu(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Zu(dx(this.r),dx(this.g),dx(this.b),LL(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BX,formatHex:BX,formatHex8:pOe,formatRgb:IX,toString:IX}));function BX(){return`#${Yv(this.r)}${Yv(this.g)}${Yv(this.b)}`}function pOe(){return`#${Yv(this.r)}${Yv(this.g)}${Yv(this.b)}${Yv((isNaN(this.opacity)?1:this.opacity)*255)}`}function IX(){const i=LL(this.opacity);return`${i===1?"rgb(":"rgba("}${dx(this.r)}, ${dx(this.g)}, ${dx(this.b)}${i===1?")":`, ${i})`}`}function LL(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function dx(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Yv(i){return i=dx(i),(i<16?"0":"")+i.toString(16)}function OX(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Tp(i,e,t,n)}function Aae(i){if(i instanceof Tp)return new Tp(i.h,i.s,i.l,i.opacity);if(i instanceof G3||(i=jx(i)),!i)return new Tp;if(i instanceof Tp)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-n)/a+(t<n)*6:t===s?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Tp(o,a,l,i.opacity)}function AOe(i,e,t,n){return arguments.length===1?Aae(i):new Tp(i,e,t,n??1)}function Tp(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}WG(Tp,AOe,pae(G3,{brighter(i){return i=i==null?DL:Math.pow(DL,i),new Tp(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?LM:Math.pow(LM,i),new Tp(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new Zu(nO(i>=240?i-240:i+120,r,n),nO(i,r,n),nO(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new Tp(FX(this.h),j5(this.s),j5(this.l),LL(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=LL(this.opacity);return`${i===1?"hsl(":"hsla("}${FX(this.h)}, ${j5(this.s)*100}%, ${j5(this.l)*100}%${i===1?")":`, ${i})`}`}}));function FX(i){return i=(i||0)%360,i<0?i+360:i}function j5(i){return Math.max(0,Math.min(1,i||0))}function nO(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const KG=i=>()=>i;function mOe(i,e){return function(t){return i+t*e}}function gOe(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function yOe(i){return(i=+i)==1?mae:function(e,t){return t-e?gOe(e,t,i):KG(isNaN(e)?t:e)}}function mae(i,e){var t=e-i;return t?mOe(i,t):KG(isNaN(i)?e:i)}const UX=function i(e){var t=yOe(e);function n(r,s){var o=t((r=ZU(r)).r,(s=ZU(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=mae(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return n.gamma=i,n}(1);function gae(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function yae(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function vOe(i,e){return(yae(e)?gae:vae)(i,e)}function vae(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),o;for(o=0;o<n;++o)r[o]=YG(i[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<n;++o)s[o]=r[o](a);return s}}function xOe(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function NM(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function bOe(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=YG(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var JU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iO=new RegExp(JU.source,"g");function _Oe(i){return function(){return i}}function SOe(i){return function(e){return i(e)+""}}function TOe(i,e){var t=JU.lastIndex=iO.lastIndex=0,n,r,s,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=JU.exec(i))&&(r=iO.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:NM(n,r)})),t=iO.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?SOe(l[0].x):_Oe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function YG(i,e){var t=typeof e,n;return e==null||t==="boolean"?KG(e):(t==="number"?NM:t==="string"?(n=jx(e))?(e=n,UX):TOe:e instanceof jx?UX:e instanceof Date?xOe:yae(e)?gae:Array.isArray(e)?vae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?bOe:NM)(i,e)}function EOe(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function wOe(i){return function(){return i}}function MOe(i){return+i}var kX=[0,1];function v2(i){return i}function ek(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:wOe(isNaN(e)?NaN:.5)}function COe(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function ROe(i,e,t){var n=i[0],r=i[1],s=e[0],o=e[1];return r<n?(n=ek(r,n),s=t(o,s)):(n=ek(n,r),s=t(s,o)),function(a){return s(n(a))}}function DOe(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=ek(i[o],i[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=hae(i,a,1,n)-1;return s[l](r[l](a))}}function LOe(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function POe(){var i=kX,e=kX,t=YG,n,r,s,o=v2,a,l,c;function u(){var h=Math.min(i.length,e.length);return o!==v2&&(o=COe(i[0],i[h-1])),a=h>2?DOe:ROe,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(i.map(n),e,t)))(n(o(h)))}return f.invert=function(h){return o(r((c||(c=a(e,i.map(n),NM)))(h)))},f.domain=function(h){return arguments.length?(i=Array.from(h,MOe),u()):i.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),t=EOe,u()},f.clamp=function(h){return arguments.length?(o=h?!0:v2,u()):o!==v2},f.interpolate=function(h){return arguments.length?(t=h,u()):t},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,r=p,u()}}function NOe(){return POe()(v2,v2)}function BOe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function PL(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function MS(i){return i=PL(Math.abs(i)),i?i[1]:NaN}function IOe(i,e){return function(t,n){for(var r=t.length,s=[],o=0,a=i[0],l=0;r>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return s.reverse().join(e)}}function OOe(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var FOe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function NL(i){if(!(e=FOe.exec(i)))throw new Error("invalid format: "+i);var e;return new XG({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}NL.prototype=XG.prototype;function XG(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}XG.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UOe(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var xae;function kOe(i,e){var t=PL(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(xae=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+PL(i,Math.max(0,e+s-1))[0]}function GX(i,e){var t=PL(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const zX={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:BOe,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>GX(i*100,e),r:GX,s:kOe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function HX(i){return i}var VX=Array.prototype.map,qX=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GOe(i){var e=i.grouping===void 0||i.thousands===void 0?HX:IOe(VX.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?HX:OOe(VX.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(f){f=NL(f);var h=f.fill,p=f.align,m=f.sign,g=f.symbol,b=f.zero,T=f.width,C=f.comma,R=f.precision,P=f.trim,I=f.type;I==="n"?(C=!0,I="g"):zX[I]||(R===void 0&&(R=12),P=!0,I="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var F=g==="$"?t:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",k=g==="$"?n:/[%p]/.test(I)?o:"",q=zX[I],H=/[defgprs%]/.test(I);R=R===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function O($){var ee=F,Y=k,oe,re,Q;if(I==="c")Y=q($)+Y,$="";else{$=+$;var se=$<0||1/$<0;if($=isNaN($)?l:q(Math.abs($),R),P&&($=UOe($)),se&&+$==0&&m!=="+"&&(se=!1),ee=(se?m==="("?m:a:m==="-"||m==="("?"":m)+ee,Y=(I==="s"?qX[8+xae/3]:"")+Y+(se&&m==="("?")":""),H){for(oe=-1,re=$.length;++oe<re;)if(Q=$.charCodeAt(oe),48>Q||Q>57){Y=(Q===46?r+$.slice(oe+1):$.slice(oe))+Y,$=$.slice(0,oe);break}}}C&&!b&&($=e($,1/0));var le=ee.length+$.length+Y.length,de=le<T?new Array(T-le+1).join(h):"";switch(C&&b&&($=e(de+$,de.length?T-Y.length:1/0),de=""),p){case"<":$=ee+$+Y+de;break;case"=":$=ee+de+$+Y;break;case"^":$=de.slice(0,le=de.length>>1)+ee+$+Y+de.slice(le);break;default:$=de+ee+$+Y;break}return s($)}return O.toString=function(){return f+""},O}function u(f,h){var p=c((f=NL(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(MS(h)/3)))*3,g=Math.pow(10,-m),b=qX[8+m/3];return function(T){return p(g*T)+b}}return{format:c,formatPrefix:u}}var W5,bae,_ae;zOe({thousands:",",grouping:[3],currency:["$",""]});function zOe(i){return W5=GOe(i),bae=W5.format,_ae=W5.formatPrefix,W5}function HOe(i){return Math.max(0,-MS(Math.abs(i)))}function VOe(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(MS(e)/3)))*3-MS(Math.abs(i)))}function qOe(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,MS(e)-MS(i))+1}function $Oe(i,e,t,n){var r=eOe(i,e,t),s;switch(n=NL(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=VOe(r,o))&&(n.precision=s),_ae(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=qOe(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=HOe(r))&&(n.precision=s-(n.type==="%")*2);break}}return bae(n)}function Sae(i){var e=i.domain;return i.ticks=function(t){var n=e();return JIe(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return $Oe(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,o=n[r],a=n[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=r,r=s,s=c);u-- >0;){if(c=QU(o,a,t),c===l)return n[r]=o,n[s]=a,e(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function og(){var i=NOe();return i.copy=function(){return LOe(i,og())},dae.apply(i,arguments),Sae(i)}function Tae(){var i=0,e=1,t=1,n=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[hae(n,l,0,t)]:s}function a(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return o}return o.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,a()):[i,e]},o.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[i,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Tae().domain([i,e]).range(r).unknown(s)},dae.apply(Sae(o),arguments)}var vr=1e-6,tk=1e-12,Nr=Math.PI,Ju=Nr/2,BL=Nr/4,ch=Nr*2,Zo=180/Nr,Li=Nr/180,Ss=Math.abs,QG=Math.atan,Sd=Math.atan2,Gi=Math.cos,K5=Math.ceil,jOe=Math.exp,nk=Math.hypot,WOe=Math.log,Ei=Math.sin,KOe=Math.sign||function(i){return i>0?1:i<0?-1:0},ag=Math.sqrt,YOe=Math.tan;function XOe(i){return i>1?0:i<-1?Nr:Math.acos(i)}function lg(i){return i>1?Ju:i<-1?-Ju:Math.asin(i)}function $X(i){return(i=Ei(i/2))*i}function gc(){}function IL(i,e){i&&WX.hasOwnProperty(i.type)&&WX[i.type](i,e)}var jX={Feature:function(i,e){IL(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)IL(t[n].geometry,e)}},WX={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){ik(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)ik(t[n],e,0)},Polygon:function(i,e){KX(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)KX(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)IL(t[n],e)}};function ik(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function KX(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)ik(i[t],e,1);e.polygonEnd()}function ZP(i,e){i&&jX.hasOwnProperty(i.type)?jX[i.type](i,e):IL(i,e)}var OL=new Km,YX=new Km,Eae,wae,rk,sk,ok,cg={point:gc,lineStart:gc,lineEnd:gc,polygonStart:function(){OL=new Km,cg.lineStart=QOe,cg.lineEnd=ZOe},polygonEnd:function(){var i=+OL;YX.add(i<0?ch+i:i),this.lineStart=this.lineEnd=this.point=gc},sphere:function(){YX.add(ch)}};function QOe(){cg.point=JOe}function ZOe(){Mae(Eae,wae)}function JOe(i,e){cg.point=Mae,Eae=i,wae=e,i*=Li,e*=Li,rk=i,sk=Gi(e=e/2+BL),ok=Ei(e)}function Mae(i,e){i*=Li,e*=Li,e=e/2+BL;var t=i-rk,n=t>=0?1:-1,r=n*t,s=Gi(e),o=Ei(e),a=ok*o,l=sk*s+a*Gi(r),c=a*n*Ei(r);OL.add(Sd(c,l)),rk=i,sk=s,ok=o}function FL(i){return[Sd(i[1],i[0]),lg(i[2])]}function Wx(i){var e=i[0],t=i[1],n=Gi(t);return[n*Gi(e),n*Ei(e),Ei(t)]}function Y5(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function CS(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function rO(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function X5(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function UL(i){var e=ag(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var wo,Wu,Xo,Xf,Rv,Cae,Rae,B2,Ww,wy,ug,Dm={point:ak,lineStart:XX,lineEnd:QX,polygonStart:function(){Dm.point=Lae,Dm.lineStart=eFe,Dm.lineEnd=tFe,Ww=new Km,cg.polygonStart()},polygonEnd:function(){cg.polygonEnd(),Dm.point=ak,Dm.lineStart=XX,Dm.lineEnd=QX,OL<0?(wo=-(Xo=180),Wu=-(Xf=90)):Ww>vr?Xf=90:Ww<-1e-6&&(Wu=-90),ug[0]=wo,ug[1]=Xo},sphere:function(){wo=-(Xo=180),Wu=-(Xf=90)}};function ak(i,e){wy.push(ug=[wo=i,Xo=i]),e<Wu&&(Wu=e),e>Xf&&(Xf=e)}function Dae(i,e){var t=Wx([i*Li,e*Li]);if(B2){var n=CS(B2,t),r=[n[1],-n[0],0],s=CS(r,n);UL(s),s=FL(s);var o=i-Rv,a=o>0?1:-1,l=s[0]*Zo*a,c,u=Ss(o)>180;u^(a*Rv<l&&l<a*i)?(c=s[1]*Zo,c>Xf&&(Xf=c)):(l=(l+360)%360-180,u^(a*Rv<l&&l<a*i)?(c=-s[1]*Zo,c<Wu&&(Wu=c)):(e<Wu&&(Wu=e),e>Xf&&(Xf=e))),u?i<Rv?$f(wo,i)>$f(wo,Xo)&&(Xo=i):$f(i,Xo)>$f(wo,Xo)&&(wo=i):Xo>=wo?(i<wo&&(wo=i),i>Xo&&(Xo=i)):i>Rv?$f(wo,i)>$f(wo,Xo)&&(Xo=i):$f(i,Xo)>$f(wo,Xo)&&(wo=i)}else wy.push(ug=[wo=i,Xo=i]);e<Wu&&(Wu=e),e>Xf&&(Xf=e),B2=t,Rv=i}function XX(){Dm.point=Dae}function QX(){ug[0]=wo,ug[1]=Xo,Dm.point=ak,B2=null}function Lae(i,e){if(B2){var t=i-Rv;Ww.add(Ss(t)>180?t+(t>0?360:-360):t)}else Cae=i,Rae=e;cg.point(i,e),Dae(i,e)}function eFe(){cg.lineStart()}function tFe(){Lae(Cae,Rae),cg.lineEnd(),Ss(Ww)>vr&&(wo=-(Xo=180)),ug[0]=wo,ug[1]=Xo,B2=null}function $f(i,e){return(e-=i)<0?e+360:e}function nFe(i,e){return i[0]-e[0]}function ZX(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function Pae(i){var e,t,n,r,s,o,a;if(Xf=Xo=-(wo=Wu=1/0),wy=[],ZP(i,Dm),t=wy.length){for(wy.sort(nFe),e=1,n=wy[0],s=[n];e<t;++e)r=wy[e],ZX(n,r[0])||ZX(n,r[1])?($f(n[0],r[1])>$f(n[0],n[1])&&(n[1]=r[1]),$f(r[0],n[1])>$f(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(o=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(a=$f(n[1],r[0]))>o&&(o=a,wo=r[0],Xo=n[1])}return wy=ug=null,wo===1/0||Wu===1/0?[[NaN,NaN],[NaN,NaN]]:[[wo,Wu],[Xo,Xf]]}var bw,kL,GL,zL,HL,VL,qL,$L,lk,ck,uk,Nae,Bae,ru,su,ou,wp={sphere:gc,point:ZG,lineStart:JX,lineEnd:eQ,polygonStart:function(){wp.lineStart=sFe,wp.lineEnd=oFe},polygonEnd:function(){wp.lineStart=JX,wp.lineEnd=eQ}};function ZG(i,e){i*=Li,e*=Li;var t=Gi(e);z3(t*Gi(i),t*Ei(i),Ei(e))}function z3(i,e,t){++bw,GL+=(i-GL)/bw,zL+=(e-zL)/bw,HL+=(t-HL)/bw}function JX(){wp.point=iFe}function iFe(i,e){i*=Li,e*=Li;var t=Gi(e);ru=t*Gi(i),su=t*Ei(i),ou=Ei(e),wp.point=rFe,z3(ru,su,ou)}function rFe(i,e){i*=Li,e*=Li;var t=Gi(e),n=t*Gi(i),r=t*Ei(i),s=Ei(e),o=Sd(ag((o=su*s-ou*r)*o+(o=ou*n-ru*s)*o+(o=ru*r-su*n)*o),ru*n+su*r+ou*s);kL+=o,VL+=o*(ru+(ru=n)),qL+=o*(su+(su=r)),$L+=o*(ou+(ou=s)),z3(ru,su,ou)}function eQ(){wp.point=ZG}function sFe(){wp.point=aFe}function oFe(){Iae(Nae,Bae),wp.point=ZG}function aFe(i,e){Nae=i,Bae=e,i*=Li,e*=Li,wp.point=Iae;var t=Gi(e);ru=t*Gi(i),su=t*Ei(i),ou=Ei(e),z3(ru,su,ou)}function Iae(i,e){i*=Li,e*=Li;var t=Gi(e),n=t*Gi(i),r=t*Ei(i),s=Ei(e),o=su*s-ou*r,a=ou*n-ru*s,l=ru*r-su*n,c=nk(o,a,l),u=lg(c),f=c&&-u/c;lk.add(f*o),ck.add(f*a),uk.add(f*l),kL+=u,VL+=u*(ru+(ru=n)),qL+=u*(su+(su=r)),$L+=u*(ou+(ou=s)),z3(ru,su,ou)}function tQ(i){bw=kL=GL=zL=HL=VL=qL=$L=0,lk=new Km,ck=new Km,uk=new Km,ZP(i,wp);var e=+lk,t=+ck,n=+uk,r=nk(e,t,n);return r<tk&&(e=VL,t=qL,n=$L,kL<vr&&(e=GL,t=zL,n=HL),r=nk(e,t,n),r<tk)?[NaN,NaN]:[Sd(t,e)*Zo,lg(n/r)*Zo]}function fk(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function hk(i,e){return Ss(i)>Nr&&(i-=Math.round(i/ch)*ch),[i,e]}hk.invert=hk;function Oae(i,e,t){return(i%=ch)?e||t?fk(iQ(i),rQ(e,t)):iQ(i):e||t?rQ(e,t):hk}function nQ(i){return function(e,t){return e+=i,Ss(e)>Nr&&(e-=Math.round(e/ch)*ch),[e,t]}}function iQ(i){var e=nQ(i);return e.invert=nQ(-i),e}function rQ(i,e){var t=Gi(i),n=Ei(i),r=Gi(e),s=Ei(e);function o(a,l){var c=Gi(l),u=Gi(a)*c,f=Ei(a)*c,h=Ei(l),p=h*t+u*n;return[Sd(f*r-p*s,u*t-h*n),lg(p*r+f*s)]}return o.invert=function(a,l){var c=Gi(l),u=Gi(a)*c,f=Ei(a)*c,h=Ei(l),p=h*r-f*s;return[Sd(f*r+h*s,u*t+p*n),lg(p*t-u*n)]},o}function lFe(i){i=Oae(i[0]*Li,i[1]*Li,i.length>2?i[2]*Li:0);function e(t){return t=i(t[0]*Li,t[1]*Li),t[0]*=Zo,t[1]*=Zo,t}return e.invert=function(t){return t=i.invert(t[0]*Li,t[1]*Li),t[0]*=Zo,t[1]*=Zo,t},e}function cFe(i,e,t,n,r,s){if(t){var o=Gi(e),a=Ei(e),l=n*t;r==null?(r=e+n*ch,s=e-l/2):(r=sQ(o,r),s=sQ(o,s),(n>0?r<s:r>s)&&(r+=n*ch));for(var c,u=r;n>0?u>s:u<s;u-=l)c=FL([o,-a*Gi(u),-a*Ei(u)]),i.point(c[0],c[1])}}function sQ(i,e){e=Wx(e),e[0]-=i,UL(e);var t=XOe(-e[1]);return((-e[2]<0?-t:t)+ch-vr)%ch}function Fae(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:gc,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function hD(i,e){return Ss(i[0]-e[0])<vr&&Ss(i[1]-e[1])<vr}function Q5(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function Uae(i,e,t,n,r){var s=[],o=[],a,l;if(i.forEach(function(m){if(!((g=m.length-1)<=0)){var g,b=m[0],T=m[g],C;if(hD(b,T)){if(!b[2]&&!T[2]){for(r.lineStart(),a=0;a<g;++a)r.point((b=m[a])[0],b[1]);r.lineEnd();return}T[0]+=2*vr}s.push(C=new Q5(b,m,null,!0)),o.push(C.o=new Q5(b,null,C,!1)),s.push(C=new Q5(T,m,null,!1)),o.push(C.o=new Q5(T,null,C,!0))}}),!!s.length){for(o.sort(e),oQ(s),oQ(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var c=s[0],u,f;;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,l=u.length;a<l;++a)r.point((f=u[a])[0],f[1]);else n(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,a=u.length-1;a>=0;--a)r.point((f=u[a])[0],f[1]);else n(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function oQ(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function sO(i){return Ss(i[0])<=Nr?i[0]:KOe(i[0])*((Ss(i[0])+Nr)%ch-Nr)}function kae(i,e){var t=sO(e),n=e[1],r=Ei(n),s=[Ei(t),-Gi(t),0],o=0,a=0,l=new Km;r===1?n=Ju+vr:r===-1&&(n=-Ju-vr);for(var c=0,u=i.length;c<u;++c)if(h=(f=i[c]).length)for(var f,h,p=f[h-1],m=sO(p),g=p[1]/2+BL,b=Ei(g),T=Gi(g),C=0;C<h;++C,m=P,b=F,T=k,p=R){var R=f[C],P=sO(R),I=R[1]/2+BL,F=Ei(I),k=Gi(I),q=P-m,H=q>=0?1:-1,O=H*q,$=O>Nr,ee=b*F;if(l.add(Sd(ee*H*Ei(O),T*k+ee*Gi(O))),o+=$?q+H*ch:q,$^m>=t^P>=t){var Y=CS(Wx(p),Wx(R));UL(Y);var oe=CS(s,Y);UL(oe);var re=($^q>=0?-1:1)*lg(oe[2]);(n>re||n===re&&(Y[0]||Y[1]))&&(a+=$^q>=0?1:-1)}}return(o<-1e-6||o<vr&&l<-1e-12)^a&1}function Gae(i,e,t,n){return function(r){var s=e(r),o=Fae(),a=e(o),l=!1,c,u,f,h={point:p,lineStart:g,lineEnd:b,polygonStart:function(){h.point=T,h.lineStart=C,h.lineEnd=R,u=[],c=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=b,u=DM(u);var P=kae(c,n);u.length?(l||(r.polygonStart(),l=!0),Uae(u,fFe,P,t,r)):P&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(P,I){i(P,I)&&r.point(P,I)}function m(P,I){s.point(P,I)}function g(){h.point=m,s.lineStart()}function b(){h.point=p,s.lineEnd()}function T(P,I){f.push([P,I]),a.point(P,I)}function C(){a.lineStart(),f=[]}function R(){T(f[0][0],f[0][1]),a.lineEnd();var P=a.clean(),I=o.result(),F,k=I.length,q,H,O;if(f.pop(),c.push(f),f=null,!!k){if(P&1){if(H=I[0],(q=H.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),F=0;F<q;++F)r.point((O=H[F])[0],O[1]);r.lineEnd()}return}k>1&&P&2&&I.push(I.pop().concat(I.shift())),u.push(I.filter(uFe))}}return h}}function uFe(i){return i.length>1}function fFe(i,e){return((i=i.x)[0]<0?i[1]-Ju-vr:Ju-i[1])-((e=e.x)[0]<0?e[1]-Ju-vr:Ju-e[1])}const aQ=Gae(function(){return!0},hFe,pFe,[-Nr,-Ju]);function hFe(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,o){var a=s>0?Nr:-Nr,l=Ss(s-e);Ss(l-Nr)<vr?(i.point(e,t=(t+o)/2>0?Ju:-Ju),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),i.point(s,t),r=0):n!==a&&l>=Nr&&(Ss(e-n)<vr&&(e-=n*vr),Ss(s-a)<vr&&(s-=a*vr),t=dFe(e,t,s,o),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),r=0),i.point(e=s,t=o),n=a},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function dFe(i,e,t,n){var r,s,o=Ei(i-t);return Ss(o)>vr?QG((Ei(e)*(s=Gi(n))*Ei(t)-Ei(n)*(r=Gi(e))*Ei(i))/(r*s*o)):(e+n)/2}function pFe(i,e,t,n){var r;if(i==null)r=t*Ju,n.point(-Nr,r),n.point(0,r),n.point(Nr,r),n.point(Nr,0),n.point(Nr,-r),n.point(0,-r),n.point(-Nr,-r),n.point(-Nr,0),n.point(-Nr,r);else if(Ss(i[0]-e[0])>vr){var s=i[0]<e[0]?Nr:-Nr;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function AFe(i){var e=Gi(i),t=2*Li,n=e>0,r=Ss(e)>vr;function s(u,f,h,p){cFe(p,i,t,h,u,f)}function o(u,f){return Gi(u)*Gi(f)>e}function a(u){var f,h,p,m,g;return{lineStart:function(){m=p=!1,g=1},point:function(b,T){var C=[b,T],R,P=o(b,T),I=n?P?0:c(b,T):P?c(b+(b<0?Nr:-Nr),T):0;if(!f&&(m=p=P)&&u.lineStart(),P!==p&&(R=l(f,C),(!R||hD(f,R)||hD(C,R))&&(C[2]=1)),P!==p)g=0,P?(u.lineStart(),R=l(C,f),u.point(R[0],R[1])):(R=l(f,C),u.point(R[0],R[1],2),u.lineEnd()),f=R;else if(r&&f&&n^P){var F;!(I&h)&&(F=l(C,f,!0))&&(g=0,n?(u.lineStart(),u.point(F[0][0],F[0][1]),u.point(F[1][0],F[1][1]),u.lineEnd()):(u.point(F[1][0],F[1][1]),u.lineEnd(),u.lineStart(),u.point(F[0][0],F[0][1],3)))}P&&(!f||!hD(f,C))&&u.point(C[0],C[1]),f=C,p=P,h=I},lineEnd:function(){p&&u.lineEnd(),f=null},clean:function(){return g|(m&&p)<<1}}}function l(u,f,h){var p=Wx(u),m=Wx(f),g=[1,0,0],b=CS(p,m),T=Y5(b,b),C=b[0],R=T-C*C;if(!R)return!h&&u;var P=e*T/R,I=-e*C/R,F=CS(g,b),k=X5(g,P),q=X5(b,I);rO(k,q);var H=F,O=Y5(k,H),$=Y5(H,H),ee=O*O-$*(Y5(k,k)-1);if(!(ee<0)){var Y=ag(ee),oe=X5(H,(-O-Y)/$);if(rO(oe,k),oe=FL(oe),!h)return oe;var re=u[0],Q=f[0],se=u[1],le=f[1],de;Q<re&&(de=re,re=Q,Q=de);var ie=Q-re,ge=Ss(ie-Nr)<vr,Ce=ge||ie<vr;if(!ge&&le<se&&(de=se,se=le,le=de),Ce?ge?se+le>0^oe[1]<(Ss(oe[0]-re)<vr?se:le):se<=oe[1]&&oe[1]<=le:ie>Nr^(re<=oe[0]&&oe[0]<=Q)){var Ie=X5(H,(-O+Y)/$);return rO(Ie,k),[oe,FL(Ie)]}}}function c(u,f){var h=n?i:Nr-i,p=0;return u<-h?p|=1:u>h&&(p|=2),f<-h?p|=4:f>h&&(p|=8),p}return Gae(o,a,s,n?[0,-i]:[-Nr,i-Nr])}function mFe(i,e,t,n,r,s){var o=i[0],a=i[1],l=e[0],c=e[1],u=0,f=1,h=l-o,p=c-a,m;if(m=t-o,!(!h&&m>0)){if(m/=h,h<0){if(m<u)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>u&&(u=m)}if(m=r-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>u&&(u=m)}else if(h>0){if(m<u)return;m<f&&(f=m)}if(m=n-a,!(!p&&m>0)){if(m/=p,p<0){if(m<u)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>u&&(u=m)}if(m=s-a,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>u&&(u=m)}else if(p>0){if(m<u)return;m<f&&(f=m)}return u>0&&(i[0]=o+u*h,i[1]=a+u*p),f<1&&(e[0]=o+f*h,e[1]=a+f*p),!0}}}}}var Z5=1e9,J5=-1e9;function gFe(i,e,t,n){function r(c,u){return i<=c&&c<=t&&e<=u&&u<=n}function s(c,u,f,h){var p=0,m=0;if(c==null||(p=o(c,f))!==(m=o(u,f))||l(c,u)<0^f>0)do h.point(p===0||p===3?i:t,p>1?n:e);while((p=(p+f+4)%4)!==m);else h.point(u[0],u[1])}function o(c,u){return Ss(c[0]-i)<vr?u>0?0:3:Ss(c[0]-t)<vr?u>0?2:1:Ss(c[1]-e)<vr?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=Fae(),h,p,m,g,b,T,C,R,P,I,F,k={point:q,lineStart:ee,lineEnd:Y,polygonStart:O,polygonEnd:$};function q(re,Q){r(re,Q)&&u.point(re,Q)}function H(){for(var re=0,Q=0,se=p.length;Q<se;++Q)for(var le=p[Q],de=1,ie=le.length,ge=le[0],Ce,Ie,Ee=ge[0],Be=ge[1];de<ie;++de)Ce=Ee,Ie=Be,ge=le[de],Ee=ge[0],Be=ge[1],Ie<=n?Be>n&&(Ee-Ce)*(n-Ie)>(Be-Ie)*(i-Ce)&&++re:Be<=n&&(Ee-Ce)*(n-Ie)<(Be-Ie)*(i-Ce)&&--re;return re}function O(){u=f,h=[],p=[],F=!0}function $(){var re=H(),Q=F&&re,se=(h=DM(h)).length;(Q||se)&&(c.polygonStart(),Q&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),se&&Uae(h,a,re,s,c),c.polygonEnd()),u=c,h=p=m=null}function ee(){k.point=oe,p&&p.push(m=[]),I=!0,P=!1,C=R=NaN}function Y(){h&&(oe(g,b),T&&P&&f.rejoin(),h.push(f.result())),k.point=q,P&&u.lineEnd()}function oe(re,Q){var se=r(re,Q);if(p&&m.push([re,Q]),I)g=re,b=Q,T=se,I=!1,se&&(u.lineStart(),u.point(re,Q));else if(se&&P)u.point(re,Q);else{var le=[C=Math.max(J5,Math.min(Z5,C)),R=Math.max(J5,Math.min(Z5,R))],de=[re=Math.max(J5,Math.min(Z5,re)),Q=Math.max(J5,Math.min(Z5,Q))];mFe(le,de,i,e,t,n)?(P||(u.lineStart(),u.point(le[0],le[1])),u.point(de[0],de[1]),se||u.lineEnd(),F=!1):se&&(u.lineStart(),u.point(re,Q),F=!1)}C=re,R=Q,P=se}return k}}var dk,pk,dD,pD,RS={sphere:gc,point:gc,lineStart:yFe,lineEnd:gc,polygonStart:gc,polygonEnd:gc};function yFe(){RS.point=xFe,RS.lineEnd=vFe}function vFe(){RS.point=RS.lineEnd=gc}function xFe(i,e){i*=Li,e*=Li,pk=i,dD=Ei(e),pD=Gi(e),RS.point=bFe}function bFe(i,e){i*=Li,e*=Li;var t=Ei(e),n=Gi(e),r=Ss(i-pk),s=Gi(r),o=Ei(r),a=n*o,l=pD*t-dD*n*s,c=dD*t+pD*n*s;dk.add(Sd(ag(a*a+l*l),c)),pk=i,dD=t,pD=n}function _Fe(i){return dk=new Km,ZP(i,RS),+dk}var Ak=[null,null],SFe={type:"LineString",coordinates:Ak};function i1(i,e){return Ak[0]=i,Ak[1]=e,_Fe(SFe)}var lQ={Feature:function(i,e){return jL(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(jL(t[n].geometry,e))return!0;return!1}},cQ={Sphere:function(){return!0},Point:function(i,e){return uQ(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(uQ(t[n],e))return!0;return!1},LineString:function(i,e){return fQ(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(fQ(t[n],e))return!0;return!1},Polygon:function(i,e){return hQ(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(hQ(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(jL(t[n],e))return!0;return!1}};function jL(i,e){return i&&cQ.hasOwnProperty(i.type)?cQ[i.type](i,e):!1}function uQ(i,e){return i1(i,e)===0}function fQ(i,e){for(var t,n,r,s=0,o=i.length;s<o;s++){if(n=i1(i[s],e),n===0||s>0&&(r=i1(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<tk*r))return!0;t=n}return!1}function hQ(i,e){return!!kae(i.map(TFe),zae(e))}function TFe(i){return i=i.map(zae),i.pop(),i}function zae(i){return[i[0]*Li,i[1]*Li]}function EFe(i,e){return(i&&lQ.hasOwnProperty(i.type)?lQ[i.type]:jL)(i,e)}function dQ(i,e,t){var n=y2(i,e-vr,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function pQ(i,e,t){var n=y2(i,e-vr,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function wFe(){var i,e,t,n,r,s,o,a,l=10,c=l,u=90,f=360,h,p,m,g,b=2.5;function T(){return{type:"MultiLineString",coordinates:C()}}function C(){return y2(K5(n/u)*u,t,u).map(m).concat(y2(K5(a/f)*f,o,f).map(g)).concat(y2(K5(e/l)*l,i,l).filter(function(R){return Ss(R%u)>vr}).map(h)).concat(y2(K5(s/c)*c,r,c).filter(function(R){return Ss(R%f)>vr}).map(p))}return T.lines=function(){return C().map(function(R){return{type:"LineString",coordinates:R}})},T.outline=function(){return{type:"Polygon",coordinates:[m(n).concat(g(o).slice(1),m(t).reverse().slice(1),g(a).reverse().slice(1))]}},T.extent=function(R){return arguments.length?T.extentMajor(R).extentMinor(R):T.extentMinor()},T.extentMajor=function(R){return arguments.length?(n=+R[0][0],t=+R[1][0],a=+R[0][1],o=+R[1][1],n>t&&(R=n,n=t,t=R),a>o&&(R=a,a=o,o=R),T.precision(b)):[[n,a],[t,o]]},T.extentMinor=function(R){return arguments.length?(e=+R[0][0],i=+R[1][0],s=+R[0][1],r=+R[1][1],e>i&&(R=e,e=i,i=R),s>r&&(R=s,s=r,r=R),T.precision(b)):[[e,s],[i,r]]},T.step=function(R){return arguments.length?T.stepMajor(R).stepMinor(R):T.stepMinor()},T.stepMajor=function(R){return arguments.length?(u=+R[0],f=+R[1],T):[u,f]},T.stepMinor=function(R){return arguments.length?(l=+R[0],c=+R[1],T):[l,c]},T.precision=function(R){return arguments.length?(b=+R,h=dQ(s,r,90),p=pQ(e,i,b),m=dQ(a,o,90),g=pQ(n,t,b),T):b},T.extentMajor([[-180,-90+vr],[180,90-vr]]).extentMinor([[-180,-80-vr],[180,80+vr]])}function MFe(){return wFe()()}function JG(i,e){var t=i[0]*Li,n=i[1]*Li,r=e[0]*Li,s=e[1]*Li,o=Gi(n),a=Ei(n),l=Gi(s),c=Ei(s),u=o*Gi(t),f=o*Ei(t),h=l*Gi(r),p=l*Ei(r),m=2*lg(ag($X(s-n)+o*l*$X(r-t))),g=Ei(m),b=m?function(T){var C=Ei(T*=m)/g,R=Ei(m-T)/g,P=R*u+C*h,I=R*f+C*p,F=R*a+C*c;return[Sd(I,P)*Zo,Sd(F,ag(P*P+I*I))*Zo]}:function(){return[t*Zo,n*Zo]};return b.distance=m,b}const AQ=i=>i;var DS=1/0,WL=DS,BM=-DS,KL=BM,mQ={point:CFe,lineStart:gc,lineEnd:gc,polygonStart:gc,polygonEnd:gc,result:function(){var i=[[DS,WL],[BM,KL]];return BM=KL=-(WL=DS=1/0),i}};function CFe(i,e){i<DS&&(DS=i),i>BM&&(BM=i),e<WL&&(WL=e),e>KL&&(KL=e)}function ez(i){return function(e){var t=new mk;for(var n in i)t[n]=i[n];return t.stream=e,t}}function mk(){}mk.prototype={constructor:mk,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tz(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),ZP(t,i.stream(mQ)),e(mQ.result()),n!=null&&i.clipExtent(n),i}function Hae(i,e,t){return tz(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;i.scale(150*o).translate([a,l])},t)}function RFe(i,e,t){return Hae(i,[[0,0],e],t)}function DFe(i,e,t){return tz(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),o=(r-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];i.scale(150*s).translate([o,a])},t)}function LFe(i,e,t){return tz(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([o,a])},t)}var gQ=16,PFe=Gi(30*Li);function yQ(i,e){return+e?BFe(i,e):NFe(i)}function NFe(i){return ez({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function BFe(i,e){function t(n,r,s,o,a,l,c,u,f,h,p,m,g,b){var T=c-n,C=u-r,R=T*T+C*C;if(R>4*e&&g--){var P=o+h,I=a+p,F=l+m,k=ag(P*P+I*I+F*F),q=lg(F/=k),H=Ss(Ss(F)-1)<vr||Ss(s-f)<vr?(s+f)/2:Sd(I,P),O=i(H,q),$=O[0],ee=O[1],Y=$-n,oe=ee-r,re=C*Y-T*oe;(re*re/R>e||Ss((T*Y+C*oe)/R-.5)>.3||o*h+a*p+l*m<PFe)&&(t(n,r,s,o,a,l,$,ee,H,P/=k,I/=k,F,g,b),b.point($,ee),t($,ee,H,P,I,F,c,u,f,h,p,m,g,b))}}return function(n){var r,s,o,a,l,c,u,f,h,p,m,g,b={point:T,lineStart:C,lineEnd:P,polygonStart:function(){n.polygonStart(),b.lineStart=I},polygonEnd:function(){n.polygonEnd(),b.lineStart=C}};function T(q,H){q=i(q,H),n.point(q[0],q[1])}function C(){f=NaN,b.point=R,n.lineStart()}function R(q,H){var O=Wx([q,H]),$=i(q,H);t(f,h,u,p,m,g,f=$[0],h=$[1],u=q,p=O[0],m=O[1],g=O[2],gQ,n),n.point(f,h)}function P(){b.point=T,n.lineEnd()}function I(){C(),b.point=F,b.lineEnd=k}function F(q,H){R(r=q,H),s=f,o=h,a=p,l=m,c=g,b.point=R}function k(){t(f,h,u,p,m,g,s,o,r,a,l,c,gQ,n),b.lineEnd=P,P()}return b}}var IFe=ez({point:function(i,e){this.stream.point(i*Li,e*Li)}});function OFe(i){return ez({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function FFe(i,e,t,n,r){function s(o,a){return o*=n,a*=r,[e+i*o,t-i*a]}return s.invert=function(o,a){return[(o-e)/i*n,(t-a)/i*r]},s}function vQ(i,e,t,n,r,s){if(!s)return FFe(i,e,t,n,r);var o=Gi(s),a=Ei(s),l=o*i,c=a*i,u=o/i,f=a/i,h=(a*t-o*e)/i,p=(a*e+o*t)/i;function m(g,b){return g*=n,b*=r,[l*g-c*b+e,t-c*g-l*b]}return m.invert=function(g,b){return[n*(u*g-f*b+h),r*(p-f*g-u*b)]},m}function UFe(i){return kFe(function(){return i})()}function kFe(i){var e,t=150,n=480,r=250,s=0,o=0,a=0,l=0,c=0,u,f=0,h=1,p=1,m=null,g=aQ,b=null,T,C,R,P=AQ,I=.5,F,k,q,H,O;function $(re){return q(re[0]*Li,re[1]*Li)}function ee(re){return re=q.invert(re[0],re[1]),re&&[re[0]*Zo,re[1]*Zo]}$.stream=function(re){return H&&O===re?H:H=IFe(OFe(u)(g(F(P(O=re)))))},$.preclip=function(re){return arguments.length?(g=re,m=void 0,oe()):g},$.postclip=function(re){return arguments.length?(P=re,b=T=C=R=null,oe()):P},$.clipAngle=function(re){return arguments.length?(g=+re?AFe(m=re*Li):(m=null,aQ),oe()):m*Zo},$.clipExtent=function(re){return arguments.length?(P=re==null?(b=T=C=R=null,AQ):gFe(b=+re[0][0],T=+re[0][1],C=+re[1][0],R=+re[1][1]),oe()):b==null?null:[[b,T],[C,R]]},$.scale=function(re){return arguments.length?(t=+re,Y()):t},$.translate=function(re){return arguments.length?(n=+re[0],r=+re[1],Y()):[n,r]},$.center=function(re){return arguments.length?(s=re[0]%360*Li,o=re[1]%360*Li,Y()):[s*Zo,o*Zo]},$.rotate=function(re){return arguments.length?(a=re[0]%360*Li,l=re[1]%360*Li,c=re.length>2?re[2]%360*Li:0,Y()):[a*Zo,l*Zo,c*Zo]},$.angle=function(re){return arguments.length?(f=re%360*Li,Y()):f*Zo},$.reflectX=function(re){return arguments.length?(h=re?-1:1,Y()):h<0},$.reflectY=function(re){return arguments.length?(p=re?-1:1,Y()):p<0},$.precision=function(re){return arguments.length?(F=yQ(k,I=re*re),oe()):ag(I)},$.fitExtent=function(re,Q){return Hae($,re,Q)},$.fitSize=function(re,Q){return RFe($,re,Q)},$.fitWidth=function(re,Q){return DFe($,re,Q)},$.fitHeight=function(re,Q){return LFe($,re,Q)};function Y(){var re=vQ(t,0,0,h,p,f).apply(null,e(s,o)),Q=vQ(t,n-re[0],r-re[1],h,p,f);return u=Oae(a,l,c),k=fk(e,Q),q=fk(u,k),F=yQ(k,I),oe()}function oe(){return H=O=null,$}return function(){return e=i.apply(this,arguments),$.invert=e.invert&&ee,Y()}}function GFe(i){return function(e,t){var n=ag(e*e+t*t),r=i(n),s=Ei(r),o=Gi(r);return[Sd(e*s,n*o),lg(n&&t*s/n)]}}function nz(i,e){return[i,WOe(YOe((Ju+e)/2))]}nz.invert=function(i,e){return[i,2*QG(jOe(e))-Ju]};function Vae(i,e){var t=Gi(e),n=1+Gi(i)*t;return[t*Ei(i)/n,Ei(e)/n]}Vae.invert=GFe(function(i){return 2*QG(i)});function zFe(){return UFe(Vae).scale(250).clipAngle(142)}function gk(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function HFe(i){if(Array.isArray(i))return i}function VFe(i){if(Array.isArray(i))return gk(i)}function Kw(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function qFe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function $Fe(i,e,t){return e=YL(e),tUe(i,$ae()?Reflect.construct(e,[],YL(i).constructor):e.apply(i,t))}function qae(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jFe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function fr(i,e){return i.get(Kw(i,e))}function my(i,e,t){qae(i,e),e.set(i,t)}function gy(i,e,t){return i.set(Kw(i,e),t),t}function WFe(i,e){qae(i,e),e.add(i)}function KFe(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Wae(n.key),n)}}function YFe(i,e,t){return KFe(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function O_(i,e,t){return(e=Wae(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function YL(i){return YL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},YL(i)}function XFe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&yk(i,e)}function $ae(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ae=function(){return!!i})()}function QFe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ZFe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function JFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tUe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qFe(i)}function yk(i,e){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},yk(i,e)}function AD(i,e){return HFe(i)||ZFe(i,e)||Kae(i,e)||JFe()}function jae(i){return VFe(i)||QFe(i)||Kae(i)||eUe()}function nUe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Wae(i){var e=nUe(i,"string");return typeof e=="symbol"?e:e+""}function Kae(i,e){if(i){if(typeof i=="string")return gk(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gk(i,e):void 0}}var Yae=function(e){e instanceof Array?e.forEach(Yae):(e.map&&e.map.dispose(),e.dispose())},Xae=function(e){e.geometry&&e.geometry.dispose(),e.material&&Yae(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(Xae)},xQ=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),Xae(t)}};function Qae(i,e,t){var n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(r),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(r)}}function iUe(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),r}}function pv(i){return i*Math.PI/180}var Zae=function(e){return 1-(nz(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},oO=function(e){return Math.max(0,Math.min(1,Zae(e)))},bQ=function(e){return .5-nz.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},rUe=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=og().domain([1,0]).range([t,n]).clamp(!0),s=og().domain([oO(t),oO(n)]).range([1,0]).clamp(!0),o=function(f){return s(oO(r(f)))},a=e.array,l=0,c=a.length;l<c;l+=2)a[l+1]=o(a[l+1]);e.needsUpdate=!0},_Q=function(e,t,n,r){var s=Math.pow(2,e),o=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),a=(90-r)/180;t&&(a=Math.max(0,Math.min(1,Zae(a))));var l=Math.floor(a*s);return[o,l]},vk=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=[],l=Math.pow(2,e),c=360/l,u=180/l,f=s===void 0?l-1:s,h=o===void 0?l-1:o,p=n,m=Math.min(l-1,f);p<=m;p++)for(var g=r,b=Math.min(l-1,h);g<=b;g++){var T=g,C=u;if(t){T=g===0?g:bQ(g/l)*l;var R=g+1===l?g+1:bQ((g+1)/l)*l;C=(R-T)*180/l}var P=-180+(p+.5)*c,I=90-(T*180/l+C/2),F=C;a.push({x:p,y:g,lng:P,lat:I,latLen:F})}return a},sUe=6,oUe=7,aUe=3,lUe=90,O0=new WeakMap,Ry=new WeakMap,aO=new WeakMap,e4=new WeakMap,Jh=new WeakMap,XL=new WeakMap,I2=new WeakMap,Av=new WeakMap,t4=new WeakSet,cUe=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.tileUrl,o=r.minLevel,a=o===void 0?0:o,l=r.maxLevel,c=l===void 0?17:l,u=r.mercatorProjection,f=u===void 0?!0:u;return jFe(this,e),n=$Fe(this,e),WFe(n,t4),my(n,O0,void 0),my(n,Ry,void 0),my(n,aO,void 0),my(n,e4,void 0),my(n,Jh,{}),my(n,XL,void 0),my(n,I2,void 0),my(n,Av,void 0),O_(n,"minLevel",void 0),O_(n,"maxLevel",void 0),O_(n,"thresholds",jae(new Array(30)).map(function(h,p){return 8/Math.pow(2,p)})),O_(n,"curvatureResolution",5),O_(n,"tileMargin",0),O_(n,"clearTiles",function(){Object.values(fr(Jh,n)).forEach(function(h){h.forEach(function(p){p.obj&&(n.remove(p.obj),xQ(p.obj),delete p.obj)})}),gy(Jh,n,{})}),gy(O0,n,t),n.tileUrl=s,gy(Ry,n,f),n.minLevel=a,n.maxLevel=c,n.level=0,n.add(gy(Av,n,new zi(new Ah(fr(O0,n)*.99,180,90),new Tl({color:0})))),fr(Av,n).visible=!1,fr(Av,n).material.polygonOffset=!0,fr(Av,n).material.polygonOffsetUnits=3,fr(Av,n).material.polygonOffsetFactor=1,n}return XFe(e,i),YFe(e,[{key:"tileUrl",get:function(){return fr(aO,this)},set:function(n){gy(aO,this,n),this.updatePov(fr(I2,this))}},{key:"level",get:function(){return fr(e4,this)},set:function(n){var r=this;fr(Jh,this)[n]||Kw(t4,this,uUe).call(this,n);var s=fr(e4,this);if(gy(e4,this,n),!(n===s||s===void 0)){if(fr(Av,this).visible=n>0,fr(Jh,this)[n].forEach(function(a){return a.obj&&(a.obj.material.depthWrite=!0)}),s<n&&fr(Jh,this)[s].forEach(function(a){return a.obj&&(a.obj.material.depthWrite=!1)}),s>n)for(var o=n+1;o<=s;o++)fr(Jh,this)[o]&&fr(Jh,this)[o].forEach(function(a){a.obj&&(r.remove(a.obj),xQ(a.obj),delete a.obj)});Kw(t4,this,SQ).call(this)}}},{key:"updatePov",value:function(n){var r=this;if(!(!n||!(n instanceof ib))){gy(I2,this,n);var s;if(gy(XL,this,function(u){if(!u.hullPnts){var f=360/Math.pow(2,r.level),h=u.lng,p=u.lat,m=u.latLen,g=h-f/2,b=h+f/2,T=p-m/2,C=p+m/2;u.hullPnts=[[p,h],[T,g],[C,g],[T,b],[C,b]].map(function(R){var P=AD(R,2),I=P[0],F=P[1];return Qae(I,F,fr(O0,r))}).map(function(R){var P=R.x,I=R.y,F=R.z;return new he(P,I,F)})}return s||(s=new ab,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new rn().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),u.hullPnts.some(function(R){return s.containsPoint(R.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl){var o=n.position.clone(),a=o.distanceTo(this.getWorldPosition(new he)),l=(a-fr(O0,this))/fr(O0,this),c=this.thresholds.findIndex(function(u){return u&&u<=l});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,c<0?this.thresholds.length:c)),Kw(t4,this,SQ).call(this)}}}}])}(da);function uUe(i){var e=this;if(i>oUe){fr(Jh,this)[i]=[];return}var t=fr(Jh,this)[i]=vk(i,fr(Ry,this));t.forEach(function(n){return n.centroid=Qae(n.lat,n.lng,fr(O0,e))}),t.octree=uae().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function SQ(){var i=this;if(!(!this.tileUrl||this.level===void 0||!fr(Jh,this).hasOwnProperty(this.level))&&!(!fr(XL,this)&&this.level>sUe)){var e=fr(Jh,this)[this.level];if(fr(I2,this)){var t=this.worldToLocal(fr(I2,this).position.clone());if(e.octree){var n,r=this.worldToLocal(fr(I2,this).position.clone()),s=(r.length()-fr(O0,this))*aUe;e=(n=e.octree).findAllWithinRadius.apply(n,jae(r).concat([s]))}else{var o=iUe(t),a=(o.r/fr(O0,this)-1)*lUe,l=a/Math.cos(pv(o.lat)),c=[o.lng-l,o.lng+l],u=[o.lat+a,o.lat-a],f=_Q(this.level,fr(Ry,this),c[0],u[0]),h=AD(f,2),p=h[0],m=h[1],g=_Q(this.level,fr(Ry,this),c[1],u[1]),b=AD(g,2),T=b[0],C=b[1];!e.record&&(e.record={});var R=e.record;if(!R.hasOwnProperty("".concat(Math.round((p+T)/2),"_").concat(Math.round((m+C)/2))))e=vk(this.level,fr(Ry,this),p,m,T,C).map(function(q){var H="".concat(q.x,"_").concat(q.y);return R.hasOwnProperty(H)?R[H]:(R[H]=q,e.push(q),q)});else{for(var P=[],I=p;I<=T;I++)for(var F=m;F<=C;F++){var k="".concat(I,"_").concat(F);R.hasOwnProperty(k)||(R[k]=vk(this.level,fr(Ry,this),I,F,I,F)[0],e.push(R[k])),P.push(R[k])}e=P}}}e.filter(function(q){return!q.obj}).filter(fr(XL,this)||function(){return!0}).forEach(function(q){var H=q.x,O=q.y,$=q.lng,ee=q.lat,Y=q.latLen,oe=360/Math.pow(2,i.level);if(!q.obj){var re=oe*(1-i.tileMargin),Q=Y*(1-i.tileMargin),se=pv($),le=pv(-ee),de=new zi(new Ah(fr(O0,i),Math.ceil(re/i.curvatureResolution),Math.ceil(Q/i.curvatureResolution),pv(90-re/2)+se,pv(re),pv(90-Q/2)+le,pv(Q)),new Pd);if(fr(Ry,i)){var ie=[ee+Y/2,ee-Y/2].map(function(Ee){return .5-Ee/180}),ge=AD(ie,2),Ce=ge[0],Ie=ge[1];rUe(de.geometry.attributes.uv,Ce,Ie)}q.obj=de}q.loading||(q.loading=!0,new mg().load(i.tileUrl(H,O,i.level),function(Ee){var Be=q.obj;Be&&(Ee.colorSpace=kn,Be.material.map=Ee,Be.material.color=null,Be.material.needsUpdate=!0,i.add(Be)),q.loading=!1}))})}}function fUe(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=Jae(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c;if(n&&(s=mUe(i,e,s,t)),i.length>80*t){a=1/0,l=1/0;let u=-1/0,f=-1/0;for(let h=t;h<r;h+=t){const p=i[h],m=i[h+1];p<a&&(a=p),m<l&&(l=m),p>u&&(u=p),m>f&&(f=m)}c=Math.max(u-a,f-l),c=c!==0?32767/c:0}return IM(s,o,t,a,l,c,0),o}function Jae(i,e,t,n,r){let s;if(r===MUe(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=TQ(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=TQ(o/n|0,i[o],i[o+1],s);return s&&LS(s,s.next)&&(FM(s),s=s.next),s}function Kx(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(LS(t,t.next)||No(t.prev,t,t.next)===0)){if(FM(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function IM(i,e,t,n,r,s,o){if(!i)return;!o&&s&&bUe(i,n,r,s);let a=i;for(;i.prev!==i.next;){const l=i.prev,c=i.next;if(s?dUe(i,n,r,s):hUe(i)){e.push(l.i,i.i,c.i),FM(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=pUe(Kx(i),e),IM(i,e,t,n,r,s,2)):o===2&&AUe(i,e,t,n,r,s):IM(Kx(i),e,t,n,r,s,1);break}}}function hUe(i){const e=i.prev,t=i,n=i.next;if(No(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,u=Math.min(r,s,o),f=Math.min(a,l,c),h=Math.max(r,s,o),p=Math.max(a,l,c);let m=n.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=f&&m.y<=p&&_w(r,a,s,l,o,c,m.x,m.y)&&No(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function dUe(i,e,t,n){const r=i.prev,s=i,o=i.next;if(No(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,h=o.y,p=Math.min(a,l,c),m=Math.min(u,f,h),g=Math.max(a,l,c),b=Math.max(u,f,h),T=xk(p,m,e,t,n),C=xk(g,b,e,t,n);let R=i.prevZ,P=i.nextZ;for(;R&&R.z>=T&&P&&P.z<=C;){if(R.x>=p&&R.x<=g&&R.y>=m&&R.y<=b&&R!==r&&R!==o&&_w(a,u,l,f,c,h,R.x,R.y)&&No(R.prev,R,R.next)>=0||(R=R.prevZ,P.x>=p&&P.x<=g&&P.y>=m&&P.y<=b&&P!==r&&P!==o&&_w(a,u,l,f,c,h,P.x,P.y)&&No(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;R&&R.z>=T;){if(R.x>=p&&R.x<=g&&R.y>=m&&R.y<=b&&R!==r&&R!==o&&_w(a,u,l,f,c,h,R.x,R.y)&&No(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;P&&P.z<=C;){if(P.x>=p&&P.x<=g&&P.y>=m&&P.y<=b&&P!==r&&P!==o&&_w(a,u,l,f,c,h,P.x,P.y)&&No(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function pUe(i,e){let t=i;do{const n=t.prev,r=t.next.next;!LS(n,r)&&tle(n,t,t.next,r)&&OM(n,r)&&OM(r,n)&&(e.push(n.i,t.i,r.i),FM(t),FM(t.next),t=i=r),t=t.next}while(t!==i);return Kx(t)}function AUe(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&TUe(o,a)){let l=nle(o,a);o=Kx(o,o.next),l=Kx(l,l.next),IM(o,e,t,n,r,s,0),IM(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function mUe(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=Jae(i,a,l,n,!1);c===c.next&&(c.steiner=!0),r.push(SUe(c))}r.sort(gUe);for(let s=0;s<r.length;s++)t=yUe(r[s],t);return t}function gUe(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function yUe(i,e){const t=vUe(i,e);if(!t)return e;const n=nle(t,i);return Kx(n,n.next),Kx(t,t.next)}function vUe(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(LS(i,t))return t;do{if(LS(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=n&&f>s&&(s=f,o=t.x<t.next.x?t:t.next,f===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0;t=o;do{if(n>=t.x&&t.x>=l&&n!==t.x&&ele(r<c?n:s,r,l,c,r<c?s:n,r,t.x,t.y)){const f=Math.abs(r-t.y)/(n-t.x);OM(t,i)&&(f<u||f===u&&(t.x>o.x||t.x===o.x&&xUe(o,t)))&&(o=t,u=f)}t=t.next}while(t!==a);return o}function xUe(i,e){return No(i.prev,i,e.prev)<0&&No(e.next,i,i.next)<0}function bUe(i,e,t,n){let r=i;do r.z===0&&(r.z=xk(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,_Ue(r)}function _Ue(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,a=0;for(let c=0;c<t&&(a++,o=o.nextZ,!!o);c++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function xk(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function SUe(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function ele(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function _w(i,e,t,n,r,s,o,a){return!(i===o&&e===a)&&ele(i,e,t,n,r,s,o,a)}function TUe(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!EUe(i,e)&&(OM(i,e)&&OM(e,i)&&wUe(i,e)&&(No(i.prev,i,e.prev)||No(i,e.prev,e))||LS(i,e)&&No(i.prev,i,i.next)>0&&No(e.prev,e,e.next)>0)}function No(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function LS(i,e){return i.x===e.x&&i.y===e.y}function tle(i,e,t,n){const r=i4(No(i,e,t)),s=i4(No(i,e,n)),o=i4(No(t,n,i)),a=i4(No(t,n,e));return!!(r!==s&&o!==a||r===0&&n4(i,t,e)||s===0&&n4(i,n,e)||o===0&&n4(t,i,n)||a===0&&n4(t,e,n))}function n4(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function i4(i){return i>0?1:i<0?-1:0}function EUe(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&tle(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function OM(i,e){return No(i.prev,i,i.next)<0?No(i,e,i.next)>=0&&No(i,i.prev,e)>=0:No(i,e,i.prev)<0||No(i,i.next,e)<0}function wUe(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function nle(i,e){const t=bk(i.i,i.x,i.y),n=bk(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function TQ(i,e,t,n){const r=bk(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function FM(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function bk(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function MUe(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}function QL(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const o of i){for(const a of o)for(let l=0;l<n;l++)e.push(a[l]);s&&(r+=s,t.push(r)),s=o.length}return{vertices:e,holes:t,dimensions:n}}function _k(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function CUe(i){if(Array.isArray(i))return i}function RUe(i){if(Array.isArray(i))return _k(i)}function DUe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function LUe(i,e,t){return e=ZL(e),GUe(i,ile()?Reflect.construct(e,[],ZL(i).constructor):e.apply(i,t))}function PUe(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function NUe(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function BUe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=iz(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function ZL(i){return ZL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZL(i)}function IUe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Sk(i,e)}function ile(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ile=function(){return!!i})()}function OUe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function FUe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function UUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GUe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DUe(i)}function Sk(i,e){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Sk(i,e)}function kE(i,e){return CUe(i)||FUe(i,e)||iz(i,e)||UUe()}function zUe(i){return RUe(i)||OUe(i)||iz(i)||kUe()}function iz(i,e){if(i){if(typeof i=="string")return _k(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_k(i,e):void 0}}var EQ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var o=i1(s,r)*180/Math.PI;if(o>t)for(var a=JG(r,s),l=r.length>2||s.length>2?NM(r[2]||0,s[2]||0):null,c=l?function(h){return[].concat(zUe(a(h)),[l(h)])}:a,u=1/Math.ceil(o/t),f=u;f<1;)n.push(c(f)),f+=u}n.push(r=s)}),n},Tk=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:qn,Float32BufferAttribute:Cn},HUe=new Tk.BufferGeometry().setAttribute?"setAttribute":"addAttribute",rle=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;PUe(this,e),n=LUe(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var o=({Point:u,MultiPoint:f,LineString:h,MultiLineString:p,Polygon:m,MultiPolygon:g}[t.type]||function(){return[]})(t.coordinates,r),a=[],l=[],c=0;o.forEach(function(b){var T=a.length;GE({indices:a,vertices:l},b),n.addGroup(T,a.length-T,c++)}),a.length&&n.setIndex(a),l.length&&n[HUe]("position",new Tk.Float32BufferAttribute(l,3));function u(b,T){var C=lO(b[1],b[0],T+(b[2]||0)),R=[];return[{vertices:C,indices:R}]}function f(b,T){var C={vertices:[],indices:[]};return b.map(function(R){return u(R,T)}).forEach(function(R){var P=kE(R,1),I=P[0];GE(C,I)}),[C]}function h(b,T){for(var C=EQ(b,s).map(function(q){var H=kE(q,3),O=H[0],$=H[1],ee=H[2],Y=ee===void 0?0:ee;return lO($,O,T+Y)}),R=QL([C]),P=R.vertices,I=Math.round(P.length/3),F=[],k=1;k<I;k++)F.push(k-1,k);return[{vertices:P,indices:F}]}function p(b,T){var C={vertices:[],indices:[]};return b.map(function(R){return h(R,T)}).forEach(function(R){var P=kE(R,1),I=P[0];GE(C,I)}),[C]}function m(b,T){for(var C=b.map(function(re){return EQ(re,s).map(function(Q){var se=kE(Q,3),le=se[0],de=se[1],ie=se[2],ge=ie===void 0?0:ie;return lO(de,le,T+ge)})}),R=QL(C),P=R.vertices,I=R.holes,F=I[0]||1/0,k=P.slice(0,F*3),q=P.slice(F*3),H=new Set(I),O=Math.round(P.length/3),$=[],ee=[],Y=1;Y<O;Y++)H.has(Y)||(Y<F?$.push(Y-1,Y):ee.push(Y-1-F,Y-F));var oe=[{indices:$,vertices:k}];return I.length&&oe.push({indices:ee,vertices:q}),oe}function g(b,T){var C={vertices:[],indices:[]},R={vertices:[],indices:[]};b.map(function(I){return m(I,T)}).forEach(function(I){var F=kE(I,2),k=F[0],q=F[1];GE(C,k),q&&GE(R,q)});var P=[C];return R.vertices.length&&P.push(R),P}return n}return IUe(e,i),NUe(e)}(Tk.BufferGeometry);function GE(i,e){var t=Math.round(i.vertices.length/3);wQ(i.vertices,e.vertices),wQ(i.indices,e.indices.map(function(n){return n+t}))}function wQ(i,e){var t=BUe(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function lO(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function VUe(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(o){if(o.normalized||o.isInterleavedBufferAttribute){const a=new Float32Array(o.count*o.itemSize);for(let l=0,c=0;l<o.count;l++)a[c++]=o.getX(l),a[c++]=o.getY(l),o.itemSize>2&&(a[c++]=o.getZ(l));return a}return o.array instanceof Float32Array?o.array:new Float32Array(o.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let o=3;o<s.length;o+=4)s[o]*=-1;return r.setAttribute("tangent",new qi(s,4)),i!==r&&i.copy(r),i}function qUe(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},o={},a=i[0].morphTargetsRelative,l=new qn;let c=0;for(let u=0;u<i.length;++u){const f=i[u];let h=0;if(t!==(f.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const p in f.attributes){if(!n.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;s[p]===void 0&&(s[p]=[]),s[p].push(f.attributes[p]),h++}if(h!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(a!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const p in f.morphAttributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;o[p]===void 0&&(o[p]=[]),o[p].push(f.morphAttributes[p])}if(e){let p;if(t)p=f.index.count;else if(f.attributes.position!==void 0)p=f.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,p,u),c+=p}}if(t){let u=0;const f=[];for(let h=0;h<i.length;++h){const p=i[h].index;for(let m=0;m<p.count;++m)f.push(p.getX(m)+u);u+=i[h].attributes.position.count}l.setIndex(f)}for(const u in s){const f=Ek(s[u]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,f)}for(const u in o){const f=o[u][0].length;if(f===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let h=0;h<f;++h){const p=[];for(let g=0;g<o[u].length;++g)p.push(o[u][g][h]);const m=Ek(p);if(!m)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(m)}}return l}function Ek(i){let e,t,n,r=-1,s=0;for(let c=0;c<i.length;++c){const u=i[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=u.itemSize),t!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=u.normalized),n!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=u.gpuType),r!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=u.count*t}const o=new e(s),a=new qi(o,t,n);let l=0;for(let c=0;c<i.length;++c){const u=i[c];if(u.isInterleavedBufferAttribute){const f=l/t;for(let h=0,p=u.count;h<p;h++)for(let m=0;m<t;m++){const g=u.getComponent(h,m);a.setComponent(h+f,m,g)}}else o.set(u.array,l);l+=u.count*t}return r!==void 0&&(a.gpuType=r),a}function $Ue(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?JL(i):i.isInstancedBufferAttribute?new bd().copy(i):new qi().copy(i)}function jUe(i){let e,t=0,n=0;for(let c=0,u=i.length;c<u;++c){const f=i[c];if(e===void 0&&(e=f.array.constructor),e!==f.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=f.array.length,n+=f.itemSize}const r=new ob(new e(t),n);let s=0;const o=[],a=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let c=0,u=i.length;c<u;c++){const f=i[c],h=f.itemSize,p=f.count,m=new vc(r,h,s,f.normalized);o.push(m),s+=h;for(let g=0;g<p;g++)for(let b=0;b<h;b++)m[l[b]](g,f[a[b]](g))}return o}function JL(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let o;i.isInstancedInterleavedBufferAttribute?o=new bd(s,n,r,i.meshPerAttribute):o=new qi(s,n,r);for(let a=0;a<t;a++)o.setX(a,i.getX(a)),n>=2&&o.setY(a,i.getY(a)),n>=3&&o.setZ(a,i.getZ(a)),n>=4&&o.setW(a,i.getW(a));return o}function WUe(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,JL(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,JL(s)),t[r]=n.get(s))}}function KUe(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function YUe(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let o=0;const a=Object.keys(i.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"];for(let C=0,R=a.length;C<R;C++){const P=a[C],I=i.attributes[P];l[P]=new I.constructor(new I.array.constructor(I.count*I.itemSize),I.itemSize,I.normalized);const F=i.morphAttributes[P];F&&(c[P]||(c[P]=[]),F.forEach((k,q)=>{const H=new k.array.constructor(k.count*k.itemSize);c[P][q]=new k.constructor(H,k.itemSize,k.normalized)}))}const p=e*.5,m=Math.log10(1/e),g=Math.pow(10,m),b=p*g;for(let C=0;C<s;C++){const R=n?n.getX(C):C;let P="";for(let I=0,F=a.length;I<F;I++){const k=a[I],q=i.getAttribute(k),H=q.itemSize;for(let O=0;O<H;O++)P+=`${~~(q[f[O]](R)*g+b)},`}if(P in t)u.push(t[P]);else{for(let I=0,F=a.length;I<F;I++){const k=a[I],q=i.getAttribute(k),H=i.morphAttributes[k],O=q.itemSize,$=l[k],ee=c[k];for(let Y=0;Y<O;Y++){const oe=f[Y],re=h[Y];if($[re](o,q[oe](R)),H)for(let Q=0,se=H.length;Q<se;Q++)ee[Q][re](o,H[Q][oe](R))}}t[P]=o,u.push(o),o++}}const T=i.clone();for(const C in i.attributes){const R=l[C];if(T.setAttribute(C,new R.constructor(R.array.slice(0,o*R.itemSize),R.itemSize,R.normalized)),C in c)for(let P=0;P<c[C].length;P++){const I=c[C][P];T.morphAttributes[C][P]=new I.constructor(I.array.slice(0,o*I.itemSize),I.itemSize,I.normalized)}}return T.setIndex(u),T}function XUe(i,e){if(e===W7)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===lS||e===oP){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===lS)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function QUe(i){const e=new he,t=new he,n=new he,r=new he,s=new he,o=new he,a=new he,l=new he,c=new he;function u(de,ie,ge,Ce,Ie,Ee,Be,qe){e.fromBufferAttribute(ie,Ie),t.fromBufferAttribute(ie,Ee),n.fromBufferAttribute(ie,Be);const it=de.morphTargetInfluences;if(ge&&it){a.set(0,0,0),l.set(0,0,0),c.set(0,0,0);for(let et=0,Ht=ge.length;et<Ht;et++){const _t=it[et],$t=ge[et];_t!==0&&(r.fromBufferAttribute($t,Ie),s.fromBufferAttribute($t,Ee),o.fromBufferAttribute($t,Be),Ce?(a.addScaledVector(r,_t),l.addScaledVector(s,_t),c.addScaledVector(o,_t)):(a.addScaledVector(r.sub(e),_t),l.addScaledVector(s.sub(t),_t),c.addScaledVector(o.sub(n),_t)))}e.add(a),t.add(l),n.add(c)}de.isSkinnedMesh&&(de.applyBoneTransform(Ie,e),de.applyBoneTransform(Ee,t),de.applyBoneTransform(Be,n)),qe[Ie*3+0]=e.x,qe[Ie*3+1]=e.y,qe[Ie*3+2]=e.z,qe[Ee*3+0]=t.x,qe[Ee*3+1]=t.y,qe[Ee*3+2]=t.z,qe[Be*3+0]=n.x,qe[Be*3+1]=n.y,qe[Be*3+2]=n.z}const f=i.geometry,h=i.material;let p,m,g;const b=f.index,T=f.attributes.position,C=f.morphAttributes.position,R=f.morphTargetsRelative,P=f.attributes.normal,I=f.morphAttributes.position,F=f.groups,k=f.drawRange;let q,H,O,$,ee,Y,oe;const re=new Float32Array(T.count*T.itemSize),Q=new Float32Array(P.count*P.itemSize);if(b!==null)if(Array.isArray(h))for(q=0,O=F.length;q<O;q++)for(ee=F[q],Y=Math.max(ee.start,k.start),oe=Math.min(ee.start+ee.count,k.start+k.count),H=Y,$=oe;H<$;H+=3)p=b.getX(H),m=b.getX(H+1),g=b.getX(H+2),u(i,T,C,R,p,m,g,re),u(i,P,I,R,p,m,g,Q);else for(Y=Math.max(0,k.start),oe=Math.min(b.count,k.start+k.count),q=Y,O=oe;q<O;q+=3)p=b.getX(q),m=b.getX(q+1),g=b.getX(q+2),u(i,T,C,R,p,m,g,re),u(i,P,I,R,p,m,g,Q);else if(Array.isArray(h))for(q=0,O=F.length;q<O;q++)for(ee=F[q],Y=Math.max(ee.start,k.start),oe=Math.min(ee.start+ee.count,k.start+k.count),H=Y,$=oe;H<$;H+=3)p=H,m=H+1,g=H+2,u(i,T,C,R,p,m,g,re),u(i,P,I,R,p,m,g,Q);else for(Y=Math.max(0,k.start),oe=Math.min(T.count,k.start+k.count),q=Y,O=oe;q<O;q+=3)p=q,m=q+1,g=q+2,u(i,T,C,R,p,m,g,re),u(i,P,I,R,p,m,g,Q);const se=new Cn(re,3),le=new Cn(Q,3);return{positionAttribute:T,normalAttribute:P,morphedPositionAttribute:se,morphedNormalAttribute:le}}function ZUe(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((o,a)=>o.materialIndex!==a.materialIndex?o.materialIndex-a.materialIndex:o.start-a.start),i.getIndex()===null){const o=i.getAttribute("position"),a=[];for(let l=0;l<o.count;l+=3)a.push(l,l+1,l+2);i.setIndex(a)}const t=i.getIndex(),n=[];for(let o=0;o<e.length;o++){const a=e[o],l=a.start,c=l+a.count;for(let u=l;u<c;u++)n.push(t.getX(u))}i.dispose(),i.setIndex(n);let r=0;for(let o=0;o<e.length;o++){const a=e[o];a.start=r,r+=a.count}let s=e[0];i.groups=[s];for(let o=1;o<e.length;o++){const a=e[o];s.materialIndex===a.materialIndex?s.count+=a.count:(s=a,i.groups.push(s))}return i}function JUe(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new he,new he,new he],s=new he,o=new he,a=new he,l=new he;function c(g){const b=~~(g.x*n),T=~~(g.y*n),C=~~(g.z*n);return`${b},${T},${C}`}const u=i.index?i.toNonIndexed():i,f=u.attributes.position,h={};for(let g=0,b=f.count/3;g<b;g++){const T=3*g,C=r[0].fromBufferAttribute(f,T+0),R=r[1].fromBufferAttribute(f,T+1),P=r[2].fromBufferAttribute(f,T+2);s.subVectors(P,R),o.subVectors(C,R);const I=new he().crossVectors(s,o).normalize();for(let F=0;F<3;F++){const k=r[F],q=c(k);q in h||(h[q]=[]),h[q].push(I)}}const p=new Float32Array(f.count*3),m=new qi(p,3,!1);for(let g=0,b=f.count/3;g<b;g++){const T=3*g,C=r[0].fromBufferAttribute(f,T+0),R=r[1].fromBufferAttribute(f,T+1),P=r[2].fromBufferAttribute(f,T+2);s.subVectors(P,R),o.subVectors(C,R),a.crossVectors(s,o).normalize();for(let I=0;I<3;I++){const F=r[I],k=c(F),q=h[k];l.set(0,0,0);for(let H=0,O=q.length;H<O;H++){const $=q[H];a.dot($)>t&&l.add($)}l.normalize(),m.setXYZ(T+I,l.x,l.y,l.z)}}return u.setAttribute("normal",m),u}const rz=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:VUe,computeMorphedAttributes:QUe,deepCloneAttribute:$Ue,deinterleaveAttribute:JL,deinterleaveGeometry:WUe,estimateBytesUsed:KUe,interleaveAttributes:jUe,mergeAttributes:Ek,mergeGeometries:qUe,mergeGroups:ZUe,mergeVertices:YUe,toCreasedNormals:JUe,toTrianglesDrawMode:XUe},Symbol.toStringTag,{value:"Module"}));var Kt=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};function e8(i){"@babel/helpers - typeof";return e8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e8(i)}var eke=/^\s+/,tke=/\s+$/;function Qn(i,e){if(i=i||"",e=e||{},i instanceof Qn)return i;if(!(this instanceof Qn))return new Qn(i,e);var t=nke(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Qn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,o,a;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=sle(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=CQ(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=CQ(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=MQ(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=MQ(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return RQ(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return oke(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(uo(this._r,255)*100)+"%",g:Math.round(uo(this._g,255)*100)+"%",b:Math.round(uo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(uo(this._r,255)*100)+"%, "+Math.round(uo(this._g,255)*100)+"%, "+Math.round(uo(this._b,255)*100)+"%)":"rgba("+Math.round(uo(this._r,255)*100)+"%, "+Math.round(uo(this._g,255)*100)+"%, "+Math.round(uo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:yke[RQ(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+DQ(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=Qn(e);n="#"+DQ(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Qn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(uke,arguments)},brighten:function(){return this._applyModification(fke,arguments)},darken:function(){return this._applyModification(hke,arguments)},desaturate:function(){return this._applyModification(ake,arguments)},saturate:function(){return this._applyModification(lke,arguments)},greyscale:function(){return this._applyModification(cke,arguments)},spin:function(){return this._applyModification(dke,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(mke,arguments)},complement:function(){return this._applyCombination(pke,arguments)},monochromatic:function(){return this._applyCombination(gke,arguments)},splitcomplement:function(){return this._applyCombination(Ake,arguments)},triad:function(){return this._applyCombination(LQ,[3])},tetrad:function(){return this._applyCombination(LQ,[4])}};Qn.fromRatio=function(i,e){if(e8(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=Sw(i[n]));i=t}return Qn(i,e)};function nke(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,o=!1,a=!1;return typeof i=="string"&&(i=_ke(i)),e8(i)=="object"&&(bm(i.r)&&bm(i.g)&&bm(i.b)?(e=ike(i.r,i.g,i.b),o=!0,a=String(i.r).substr(-1)==="%"?"prgb":"rgb"):bm(i.h)&&bm(i.s)&&bm(i.v)?(n=Sw(i.s),r=Sw(i.v),e=ske(i.h,n,r),o=!0,a="hsv"):bm(i.h)&&bm(i.s)&&bm(i.l)&&(n=Sw(i.s),s=Sw(i.l),e=rke(i.h,n,s),o=!0,a="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=sle(t),{ok:o,format:i.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function ike(i,e,t){return{r:uo(i,255)*255,g:uo(e,255)*255,b:uo(t,255)*255}}function MQ(i,e,t){i=uo(i,255),e=uo(e,255),t=uo(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=(n+r)/2;if(n==r)s=o=0;else{var l=n-r;switch(o=a>.5?l/(2-n-r):l/(n+r),n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function rke(i,e,t){var n,r,s;i=uo(i,360),e=uo(e,100),t=uo(t,100);function o(c,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(u-c)*6*f:f<1/2?u:f<2/3?c+(u-c)*(2/3-f)*6:c}if(e===0)n=r=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;n=o(l,a,i+1/3),r=o(l,a,i),s=o(l,a,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function CQ(i,e,t){i=uo(i,255),e=uo(e,255),t=uo(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=n,l=n-r;if(o=n===0?0:l/n,n==r)s=0;else{switch(n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function ske(i,e,t){i=uo(i,360)*6,e=uo(e,100),t=uo(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=n%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],f=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:f*255}}function RQ(i,e,t,n){var r=[Mp(Math.round(i).toString(16)),Mp(Math.round(e).toString(16)),Mp(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function oke(i,e,t,n,r){var s=[Mp(Math.round(i).toString(16)),Mp(Math.round(e).toString(16)),Mp(Math.round(t).toString(16)),Mp(ole(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function DQ(i,e,t,n){var r=[Mp(ole(n)),Mp(Math.round(i).toString(16)),Mp(Math.round(e).toString(16)),Mp(Math.round(t).toString(16))];return r.join("")}Qn.equals=function(i,e){return!i||!e?!1:Qn(i).toRgbString()==Qn(e).toRgbString()};Qn.random=function(){return Qn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function ake(i,e){e=e===0?0:e||10;var t=Qn(i).toHsl();return t.s-=e/100,t.s=JP(t.s),Qn(t)}function lke(i,e){e=e===0?0:e||10;var t=Qn(i).toHsl();return t.s+=e/100,t.s=JP(t.s),Qn(t)}function cke(i){return Qn(i).desaturate(100)}function uke(i,e){e=e===0?0:e||10;var t=Qn(i).toHsl();return t.l+=e/100,t.l=JP(t.l),Qn(t)}function fke(i,e){e=e===0?0:e||10;var t=Qn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Qn(t)}function hke(i,e){e=e===0?0:e||10;var t=Qn(i).toHsl();return t.l-=e/100,t.l=JP(t.l),Qn(t)}function dke(i,e){var t=Qn(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Qn(t)}function pke(i){var e=Qn(i).toHsl();return e.h=(e.h+180)%360,Qn(e)}function LQ(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Qn(i).toHsl(),n=[Qn(i)],r=360/e,s=1;s<e;s++)n.push(Qn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function Ake(i){var e=Qn(i).toHsl(),t=e.h;return[Qn(i),Qn({h:(t+72)%360,s:e.s,l:e.l}),Qn({h:(t+216)%360,s:e.s,l:e.l})]}function mke(i,e,t){e=e||6,t=t||30;var n=Qn(i).toHsl(),r=360/t,s=[Qn(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(Qn(n));return s}function gke(i,e){e=e||6;for(var t=Qn(i).toHsv(),n=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(Qn({h:n,s:r,v:s})),s=(s+a)%1;return o}Qn.mix=function(i,e,t){t=t===0?0:t||50;var n=Qn(i).toRgb(),r=Qn(e).toRgb(),s=t/100,o={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return Qn(o)};Qn.readability=function(i,e){var t=Qn(i),n=Qn(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};Qn.isReadable=function(i,e,t){var n=Qn.readability(i,e),r,s;switch(s=!1,r=Ske(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};Qn.mostReadable=function(i,e,t){var n=null,r=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var c=0;c<e.length;c++)s=Qn.readability(i,e[c]),s>r&&(r=s,n=Qn(e[c]));return Qn.isReadable(i,n,{level:a,size:l})||!o?n:(t.includeFallbackColors=!1,Qn.mostReadable(i,["#fff","#000"],t))};var wk=Qn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},yke=Qn.hexNames=vke(wk);function vke(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function sle(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function uo(i,e){xke(i)&&(i="100%");var t=bke(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function JP(i){return Math.min(1,Math.max(0,i))}function qf(i){return parseInt(i,16)}function xke(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function bke(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Mp(i){return i.length==1?"0"+i:""+i}function Sw(i){return i<=1&&(i=i*100+"%"),i}function ole(i){return Math.round(parseFloat(i)*255).toString(16)}function PQ(i){return qf(i)/255}var bp=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function bm(i){return!!bp.CSS_UNIT.exec(i)}function _ke(i){i=i.replace(eke,"").replace(tke,"").toLowerCase();var e=!1;if(wk[i])i=wk[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=bp.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=bp.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=bp.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=bp.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=bp.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=bp.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=bp.hex8.exec(i))?{r:qf(t[1]),g:qf(t[2]),b:qf(t[3]),a:PQ(t[4]),format:e?"name":"hex8"}:(t=bp.hex6.exec(i))?{r:qf(t[1]),g:qf(t[2]),b:qf(t[3]),format:e?"name":"hex"}:(t=bp.hex4.exec(i))?{r:qf(t[1]+""+t[1]),g:qf(t[2]+""+t[2]),b:qf(t[3]+""+t[3]),a:PQ(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=bp.hex3.exec(i))?{r:qf(t[1]+""+t[1]),g:qf(t[2]+""+t[2]),b:qf(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Ske(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function Mk(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Tke(i){if(Array.isArray(i))return i}function Eke(i){if(Array.isArray(i))return Mk(i)}function ale(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function wke(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mke(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function cc(i,e){return i.get(ale(i,e))}function F_(i,e,t){wke(i,e),e.set(i,t)}function r4(i,e,t){return i.set(ale(i,e),t),t}function Cke(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Fke(n.key),n)}}function Rke(i,e,t){return e&&Cke(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Dke(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Lke(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function Pke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bke(i,e){return Tke(i)||Lke(i,e)||lle(i,e)||Pke()}function Ike(i){return Eke(i)||Dke(i)||lle(i)||Nke()}function Oke(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function Fke(i){var e=Oke(i,"string");return typeof e=="symbol"?e:e+""}function lle(i,e){if(i){if(typeof i=="string")return Mk(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Mk(i,e):void 0}}var U_=new WeakMap,zE=new WeakMap,k_=new WeakMap,cO=new WeakMap,uO=new WeakMap,fO=new WeakMap,Uke=function(){function i(){Mke(this,i),F_(this,U_,new Map),F_(this,zE,new Map),F_(this,k_,function(e){return e}),F_(this,cO,function(){return{}}),F_(this,uO,function(){}),F_(this,fO,function(){})}return Rke(i,[{key:"getObj",value:function(t){return cc(U_,this).get(cc(k_,this).call(this,t))}},{key:"getData",value:function(t){return cc(zE,this).get(t)}},{key:"entries",value:function(){return Ike(cc(zE,this).entries()).map(function(t){var n=Bke(t,2),r=n[0],s=n[1];return[s,r]})}},{key:"id",value:function(t){return r4(k_,this,Kt(t)),this}},{key:"onCreateObj",value:function(t){return r4(cO,this,t),this}},{key:"onUpdateObj",value:function(t){return r4(uO,this,t),this}},{key:"onRemoveObj",value:function(t){return r4(fO,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!cc(U_,n).has(cc(k_,n).call(n,s))}).forEach(function(s){var o=cc(cO,n).call(n,s);cc(U_,n).set(cc(k_,n).call(n,s),o),cc(zE,n).set(o,s)});var r=new Map(t.map(function(s){return[cc(k_,n).call(n,s),s]}));return cc(U_,this).forEach(function(s,o){r.has(o)?cc(uO,n).call(n,s,r.get(o)):(cc(fO,n).call(n,s,o),cc(U_,n).delete(o),cc(zE,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}(),mD={exports:{}},kke=mD.exports,NQ;function Gke(){return NQ||(NQ=1,function(i,e){(function(t,n){i.exports=n()})(kke,function(){return function(t){function n(s){if(r[s])return r[s].exports;var o=r[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){var s=r(1),o=function(){function a(l,c,u){l===void 0&&(l=NaN),c===void 0&&(c=NaN),u===void 0&&(u=!1),this._minFPS=c,this._maxFPS=l,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,u||this.resume()}return a.prototype.updateOnce=function(l){l(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},a.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},a.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(a.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timeScale",{get:function(){return this._timeScale},set:function(l){this._timeScale!==l&&(this._timeScale=l)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),a.prototype.animateOnce=function(){var l=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return l.onFrame()})},a.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},a.prototype.update=function(l,c){c===void 0&&(c=!0),this._currentTick++,this._currentTime+=l,this._tickDeltaTime=l,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),c&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.getTimer=function(){return Date.now()},a}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},function(t,n,r){(function(s,o){t.exports=o()})(this,function(){return function(s){function o(l){if(a[l])return a[l].exports;var c=a[l]={exports:{},id:l,loaded:!1};return s[l].call(c.exports,c,c.exports,o),c.loaded=!0,c.exports}var a={};return o.m=s,o.c=a,o.p="",o(0)}([function(s,o){var a=function(){function l(){this.functions=[]}return l.prototype.add=function(c){return this.functions.indexOf(c)===-1&&(this.functions.push(c),!0)},l.prototype.remove=function(c){var u=this.functions.indexOf(c);return u>-1&&(this.functions.splice(u,1),!0)},l.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},l.prototype.dispatch=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var f=this.functions.concat();f.forEach(function(h){h.apply(void 0,c)})},Object.defineProperty(l.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),l}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=a}])})}])})}(mD)),mD.exports}var zke=Gke();const PS=Ag(zke),Ym=11102230246251565e-32,uc=134217729,Hke=(3+8*Ym)*Ym;function hO(i,e,t,n,r){let s,o,a,l,c=e[0],u=n[0],f=0,h=0;u>c==u>-c?(s=c,c=e[++f]):(s=u,u=n[++h]);let p=0;if(f<i&&h<t)for(u>c==u>-c?(o=c+s,a=s-(o-c),c=e[++f]):(o=u+s,a=s-(o-u),u=n[++h]),s=o,a!==0&&(r[p++]=a);f<i&&h<t;)u>c==u>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=e[++f]):(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=n[++h]),s=o,a!==0&&(r[p++]=a);for(;f<i;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=e[++f],s=o,a!==0&&(r[p++]=a);for(;h<t;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=n[++h],s=o,a!==0&&(r[p++]=a);return(s!==0||p===0)&&(r[p++]=s),p}function Vke(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function H3(i){return new Float64Array(i)}const qke=(3+16*Ym)*Ym,$ke=(2+12*Ym)*Ym,jke=(9+64*Ym)*Ym*Ym,G_=H3(4),BQ=H3(8),IQ=H3(12),OQ=H3(16),Xc=H3(4);function Wke(i,e,t,n,r,s,o){let a,l,c,u,f,h,p,m,g,b,T,C,R,P,I,F,k,q;const H=i-r,O=t-r,$=e-s,ee=n-s;P=H*ee,h=uc*H,p=h-(h-H),m=H-p,h=uc*ee,g=h-(h-ee),b=ee-g,I=m*b-(P-p*g-m*g-p*b),F=$*O,h=uc*$,p=h-(h-$),m=$-p,h=uc*O,g=h-(h-O),b=O-g,k=m*b-(F-p*g-m*g-p*b),T=I-k,f=I-T,G_[0]=I-(T+f)+(f-k),C=P+T,f=C-P,R=P-(C-f)+(T-f),T=R-F,f=R-T,G_[1]=R-(T+f)+(f-F),q=C+T,f=q-C,G_[2]=C-(q-f)+(T-f),G_[3]=q;let Y=Vke(4,G_),oe=$ke*o;if(Y>=oe||-Y>=oe||(f=i-H,a=i-(H+f)+(f-r),f=t-O,c=t-(O+f)+(f-r),f=e-$,l=e-($+f)+(f-s),f=n-ee,u=n-(ee+f)+(f-s),a===0&&l===0&&c===0&&u===0)||(oe=jke*o+Hke*Math.abs(Y),Y+=H*u+ee*a-($*c+O*l),Y>=oe||-Y>=oe))return Y;P=a*ee,h=uc*a,p=h-(h-a),m=a-p,h=uc*ee,g=h-(h-ee),b=ee-g,I=m*b-(P-p*g-m*g-p*b),F=l*O,h=uc*l,p=h-(h-l),m=l-p,h=uc*O,g=h-(h-O),b=O-g,k=m*b-(F-p*g-m*g-p*b),T=I-k,f=I-T,Xc[0]=I-(T+f)+(f-k),C=P+T,f=C-P,R=P-(C-f)+(T-f),T=R-F,f=R-T,Xc[1]=R-(T+f)+(f-F),q=C+T,f=q-C,Xc[2]=C-(q-f)+(T-f),Xc[3]=q;const re=hO(4,G_,4,Xc,BQ);P=H*u,h=uc*H,p=h-(h-H),m=H-p,h=uc*u,g=h-(h-u),b=u-g,I=m*b-(P-p*g-m*g-p*b),F=$*c,h=uc*$,p=h-(h-$),m=$-p,h=uc*c,g=h-(h-c),b=c-g,k=m*b-(F-p*g-m*g-p*b),T=I-k,f=I-T,Xc[0]=I-(T+f)+(f-k),C=P+T,f=C-P,R=P-(C-f)+(T-f),T=R-F,f=R-T,Xc[1]=R-(T+f)+(f-F),q=C+T,f=q-C,Xc[2]=C-(q-f)+(T-f),Xc[3]=q;const Q=hO(re,BQ,4,Xc,IQ);P=a*u,h=uc*a,p=h-(h-a),m=a-p,h=uc*u,g=h-(h-u),b=u-g,I=m*b-(P-p*g-m*g-p*b),F=l*c,h=uc*l,p=h-(h-l),m=l-p,h=uc*c,g=h-(h-c),b=c-g,k=m*b-(F-p*g-m*g-p*b),T=I-k,f=I-T,Xc[0]=I-(T+f)+(f-k),C=P+T,f=C-P,R=P-(C-f)+(T-f),T=R-F,f=R-T,Xc[1]=R-(T+f)+(f-F),q=C+T,f=q-C,Xc[2]=C-(q-f)+(T-f),Xc[3]=q;const se=hO(Q,IQ,4,Xc,OQ);return OQ[se-1]}function Tw(i,e,t,n,r,s){const o=(e-s)*(t-r),a=(i-r)*(n-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=qke*c?l:-Wke(i,e,t,n,r,s,c)}const FQ=Math.pow(2,-52),s4=new Uint32Array(512);class UM{static from(e,t=Zke,n=Jke){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=t(a),s[2*o+1]=n(a)}return new UM(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let H=0;H<o;H++){const O=e[2*H],$=e[2*H+1];O<a&&(a=O),$<l&&(l=$),O>c&&(c=O),$>u&&(u=$),this._ids[H]=H}const f=(a+c)/2,h=(l+u)/2;let p,m,g;for(let H=0,O=1/0;H<o;H++){const $=dO(f,h,e[2*H],e[2*H+1]);$<O&&(p=H,O=$)}const b=e[2*p],T=e[2*p+1];for(let H=0,O=1/0;H<o;H++){if(H===p)continue;const $=dO(b,T,e[2*H],e[2*H+1]);$<O&&$>0&&(m=H,O=$)}let C=e[2*m],R=e[2*m+1],P=1/0;for(let H=0;H<o;H++){if(H===p||H===m)continue;const O=Xke(b,T,C,R,e[2*H],e[2*H+1]);O<P&&(g=H,P=O)}let I=e[2*g],F=e[2*g+1];if(P===1/0){for(let $=0;$<o;$++)this._dists[$]=e[2*$]-e[0]||e[2*$+1]-e[1];x2(this._ids,this._dists,0,o-1);const H=new Uint32Array(o);let O=0;for(let $=0,ee=-1/0;$<o;$++){const Y=this._ids[$],oe=this._dists[Y];oe>ee&&(H[O++]=Y,ee=oe)}this.hull=H.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Tw(b,T,C,R,I,F)<0){const H=m,O=C,$=R;m=g,C=I,R=F,g=H,I=O,F=$}const k=Qke(b,T,C,R,I,F);this._cx=k.x,this._cy=k.y;for(let H=0;H<o;H++)this._dists[H]=dO(e[2*H],e[2*H+1],k.x,k.y);x2(this._ids,this._dists,0,o-1),this._hullStart=p;let q=3;n[p]=t[g]=m,n[m]=t[p]=g,n[g]=t[m]=p,r[p]=0,r[m]=1,r[g]=2,s.fill(-1),s[this._hashKey(b,T)]=p,s[this._hashKey(C,R)]=m,s[this._hashKey(I,F)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let H=0,O,$;H<this._ids.length;H++){const ee=this._ids[H],Y=e[2*ee],oe=e[2*ee+1];if(H>0&&Math.abs(Y-O)<=FQ&&Math.abs(oe-$)<=FQ||(O=Y,$=oe,ee===p||ee===m||ee===g))continue;let re=0;for(let ie=0,ge=this._hashKey(Y,oe);ie<this._hashSize&&(re=s[(ge+ie)%this._hashSize],!(re!==-1&&re!==n[re]));ie++);re=t[re];let Q=re,se;for(;se=n[Q],Tw(Y,oe,e[2*Q],e[2*Q+1],e[2*se],e[2*se+1])>=0;)if(Q=se,Q===re){Q=-1;break}if(Q===-1)continue;let le=this._addTriangle(Q,ee,n[Q],-1,-1,r[Q]);r[ee]=this._legalize(le+2),r[Q]=le,q++;let de=n[Q];for(;se=n[de],Tw(Y,oe,e[2*de],e[2*de+1],e[2*se],e[2*se+1])<0;)le=this._addTriangle(de,ee,se,r[ee],-1,r[de]),r[ee]=this._legalize(le+2),n[de]=de,q--,de=se;if(Q===re)for(;se=t[Q],Tw(Y,oe,e[2*se],e[2*se+1],e[2*Q],e[2*Q+1])<0;)le=this._addTriangle(se,ee,Q,-1,r[Q],r[se]),this._legalize(le+2),r[se]=le,n[Q]=Q,q--,Q=se;this._hullStart=t[ee]=Q,n[Q]=t[de]=ee,n[ee]=de,s[this._hashKey(Y,oe)]=ee,s[this._hashKey(e[2*Q],e[2*Q+1])]=Q}this.hull=new Uint32Array(q);for(let H=0,O=this._hullStart;H<q;H++)this.hull[H]=O,O=n[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(Kke(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,o=0;for(;;){const a=n[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=s4[--s];continue}const c=a-a%3,u=l+(e+1)%3,f=c+(a+2)%3,h=t[o],p=t[e],m=t[u],g=t[f];if(Yke(r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*m],r[2*m+1],r[2*g],r[2*g+1])){t[e]=g,t[a]=h;const T=n[f];if(T===-1){let R=this._hullStart;do{if(this._hullTri[R]===f){this._hullTri[R]=e;break}R=this._hullPrev[R]}while(R!==this._hullStart)}this._link(e,T),this._link(a,n[o]),this._link(o,f);const C=c+(a+1)%3;s<s4.length&&(s4[s++]=C)}else{if(s===0)break;e=s4[--s]}}return o}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Kke(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function dO(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function Yke(i,e,t,n,r,s,o,a){const l=i-o,c=e-a,u=t-o,f=n-a,h=r-o,p=s-a,m=l*l+c*c,g=u*u+f*f,b=h*h+p*p;return l*(f*b-g*p)-c*(u*b-g*h)+m*(u*p-f*h)<0}function Xke(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,c=s-e,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),p=(c*u-a*f)*h,m=(o*f-l*u)*h;return p*p+m*m}function Qke(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,c=s-e,u=o*o+a*a,f=l*l+c*c,h=.5/(o*c-a*l),p=i+(c*u-a*f)*h,m=e+(o*f-l*u)*h;return{x:p,y:m}}function x2(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],o=e[s];let a=r-1;for(;a>=t&&e[i[a]]>o;)i[a+1]=i[a--];i[a+1]=s}else{const r=t+n>>1;let s=t+1,o=n;HE(i,r,s),e[i[t]]>e[i[n]]&&HE(i,t,n),e[i[s]]>e[i[n]]&&HE(i,s,n),e[i[t]]>e[i[s]]&&HE(i,t,s);const a=i[s],l=e[a];for(;;){do s++;while(e[i[s]]<l);do o--;while(e[i[o]]>l);if(o<s)break;HE(i,s,o)}i[t+1]=i[o],i[o]=a,n-s+1>=o-t?(x2(i,e,s,n),x2(i,e,t,o-1)):(x2(i,e,t,o-1),x2(i,e,s,n))}}function HE(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function Zke(i){return i[0]}function Jke(i){return i[1]}function e7e(i,e){var t,n,r=0,s,o,a,l,c,u,f,h=i[0],p=i[1],m=e.length;for(t=0;t<m;t++){n=0;var g=e[t],b=g.length-1;if(u=g[0],u[0]!==g[b][0]&&u[1]!==g[b][1])throw new Error("First and last coordinates in a ring must be the same");for(o=u[0]-h,a=u[1]-p,n;n<b;n++){if(f=g[n+1],l=f[0]-h,c=f[1]-p,a===0&&c===0){if(l<=0&&o>=0||o<=0&&l>=0)return 0}else if(c>=0&&a<=0||c<=0&&a>=0){if(s=Tw(o,l,a,c,0,0),s===0)return 0;(s>0&&c>0&&a<=0||s<0&&c<=0&&a>0)&&r++}u=f,a=c,o=l}}return r%2!==0}function t7e(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function n7e(i){return i.type==="Feature"?i.geometry:i}function i7e(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=t7e(i),r=n7e(e),s=r.type,o=e.bbox;let a=r.coordinates;if(o&&r7e(n,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var c=0;c<a.length;++c){const u=e7e(n,a[c]);if(u===0)return!t.ignoreBoundary;u&&(l=!0)}return l}function r7e(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var s7e=i7e;const UQ=1e-6;class Xv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>UQ||Math.abs(this._y1-s)>UQ)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Ck{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class o7e{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let g=0,b=0,T=n.length,C,R;g<T;g+=3,b+=2){const P=n[g]*2,I=n[g+1]*2,F=n[g+2]*2,k=e[P],q=e[P+1],H=e[I],O=e[I+1],$=e[F],ee=e[F+1],Y=H-k,oe=O-q,re=$-k,Q=ee-q,se=(Y*Q-oe*re)*2;if(Math.abs(se)<1e-9){if(s===void 0){s=o=0;for(const de of t)s+=e[de*2],o+=e[de*2+1];s/=t.length,o/=t.length}const le=1e9*Math.sign((s-k)*Q-(o-q)*re);C=(k+$)/2-le*Q,R=(q+ee)/2+le*re}else{const le=1/se,de=Y*Y+oe*oe,ie=re*re+Q*Q;C=k+(Q*de-oe*ie)*le,R=q+(Y*ie-re*de)*le}a[b]=C,a[b+1]=R}let l=t[t.length-1],c,u=l*4,f,h=e[2*l],p,m=e[2*l+1];r.fill(0);for(let g=0;g<t.length;++g)l=t[g],c=u,f=h,p=m,u=l*4,h=e[2*l],m=e[2*l+1],r[c+2]=r[u]=p-m,r[c+3]=r[u+1]=h-f}render(e){const t=e==null?e=new Xv:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let u=0,f=n.length;u<f;++u){const h=n[u];if(h<u)continue;const p=Math.floor(u/3)*2,m=Math.floor(h/3)*2,g=o[p],b=o[p+1],T=o[m],C=o[m+1];this._renderSegment(g,b,T,C,e)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(r[c]/3)*2,h=o[f],p=o[f+1],m=l*4,g=this._project(h,p,a[m+2],a[m+3]);g&&this._renderSegment(h,p,g[0],g[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Xv:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new Xv:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new Ck;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let o;const a=this._regioncode(e,t),l=this._regioncode(n,r);a===0&&l===0?(s.moveTo(e,t),s.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,o=t.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(t[s]===r[a]&&t[s+1]===r[a+1]&&t[(s+2)%o]===r[(a+l-2)%l]&&t[(s+3)%o]===r[(a+l-1)%l]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,o=n[e];if(o===-1)return null;const a=[];let l=o;do{const c=Math.floor(l/3);if(a.push(t[c*2],t[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,o,a=t[n-2],l=t[n-1],c,u=this._regioncode(a,l),f,h=0;for(let p=0;p<n;p+=2)if(s=a,o=l,a=t[p],l=t[p+1],c=u,u=this._regioncode(a,l),c===0&&u===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let m,g,b,T,C;if(c===0){if((m=this._clipSegment(s,o,a,l,c,u))===null)continue;[g,b,T,C]=m}else{if((m=this._clipSegment(a,l,s,o,u,c))===null)continue;[T,C,g,b]=m,f=h,h=this._edgecode(g,b),f&&h&&this._edge(e,f,h,r,r.length),r?r.push(g,b):r=[g,b]}f=h,h=this._edgecode(T,C),f&&h&&this._edge(e,f,h,r,r.length),r?r.push(T,C):r=[T,C]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(e,f,h,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,o){const a=s<o;for(a&&([e,t,n,r,s,o]=[n,r,e,t,o,s]);;){if(s===0&&o===0)return a?[n,r,e,t]:[e,t,n,r];if(s&o)return null;let l,c,u=s||o;u&8?(l=e+(n-e)*(this.ymax-t)/(r-t),c=this.ymax):u&4?(l=e+(n-e)*(this.ymin-t)/(r-t),c=this.ymin):u&2?(c=t+(r-t)*(this.xmax-e)/(n-e),l=this.xmax):(c=t+(r-t)*(this.xmin-e)/(n-e),l=this.xmin),s?(e=l,t=c,s=this._regioncode(e,t)):(n=l,r=c,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,o){let a=Array.from(t),l;if((l=this._project(a[0],a[1],n,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let c=0,u=a.length,f,h=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)f=h,h=this._edgecode(a[c],a[c+1]),f&&h&&(c=this._edge(e,f,h,a,c),u=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,t,n,r,s){for(;t!==n;){let o,a;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(e,t,n,r){let s=1/0,o,a,l;if(r<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/r)<s&&(l=this.ymin,a=e+(s=o)*n)}else if(r>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/r)<s&&(l=this.ymax,a=e+(s=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<s&&(a=this.xmax,l=t+(s=o)*r)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<s&&(a=this.xmin,l=t+(s=o)*r)}return[a,l]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const a7e=2*Math.PI,z_=Math.pow;function l7e(i){return i[0]}function c7e(i){return i[1]}function u7e(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],o=2*e[n+2];if((t[o]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[o+1]-t[r+1])>1e-10)return!1}return!0}function f7e(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class sz{static from(e,t=l7e,n=c7e,r){return new sz("length"in e?h7e(e,t,n,r):Float64Array.from(d7e(e,t,n,r)))}constructor(e){this._delaunator=new UM(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&u7e(e)){this.collinear=Int32Array.from({length:t.length/2},(h,p)=>p).sort((h,p)=>t[2*h]-t[2*p]||t[2*h+1]-t[2*p+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[t[2*l],t[2*l+1],t[2*c],t[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,p=t.length/2;h<p;++h){const m=f7e(t[2*h],t[2*h+1],f);t[2*h]=m[0],t[2*h+1]=m[1]}this._delaunator=new UM(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=n.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(n[l]===-1||o[u]===-1)&&(o[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new o7e(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(e);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=t[e];if(l===-1)return;let c=l,u=-1;do{if(yield u=o[c],c=c%3===2?c-2:c+1,o[c]!==e)return;if(c=s[c],c===-1){const f=n[(r[e]+1)%n.length];f!==u&&(yield f);return}}while(c!==l)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:c}=this;if(r[e]===-1||!c.length)return(e+1)%(c.length>>1);let u=e,f=z_(t-c[e*2],2)+z_(n-c[e*2+1],2);const h=r[e];let p=h;do{let m=l[p];const g=z_(t-c[m*2],2)+z_(n-c[m*2+1],2);if(g<f&&(f=g,u=m),p=p%3===2?p-2:p+1,l[p]!==e)break;if(p=a[p],p===-1){if(p=s[(o[e]+1)%s.length],p!==m&&z_(t-c[p*2],2)+z_(n-c[p*2+1],2)<f)return p;break}}while(p!==h);return u}render(e){const t=e==null?e=new Xv:void 0,{points:n,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const c=s[o]*2,u=s[l]*2;e.moveTo(n[c],n[c+1]),e.lineTo(n[u],n[u+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new Xv:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+t,l),e.arc(a,l,t,0,a7e)}return n&&n.value()}renderHull(e){const t=e==null?e=new Xv:void 0,{hull:n,points:r}=this,s=n[0]*2,o=n.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*n[a];e.lineTo(r[l],r[l+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Ck;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new Xv:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[l],r[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Ck;return this.renderTriangle(e,t),t.value()}}function h7e(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=i[o];s[o*2]=e.call(n,a,o,i),s[o*2+1]=t.call(n,a,o,i)}return s}function*d7e(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const oz=Math.PI,kQ=oz/2,GQ=180/oz,zQ=oz/180,p7e=Math.atan2,HQ=Math.cos,A7e=Math.max,m7e=Math.min,VQ=Math.sin,g7e=Math.sign||function(i){return i>0?1:i<0?-1:0},cle=Math.sqrt;function y7e(i){return i>1?kQ:i<-1?-kQ:Math.asin(i)}function ule(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function jf(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function t8(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function n8(i){var e=cle(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function az(i){return[p7e(i[1],i[0])*GQ,y7e(A7e(-1,m7e(1,i[2])))*GQ]}function tA(i){const e=i[0]*zQ,t=i[1]*zQ,n=HQ(t);return[n*HQ(e),n*VQ(e),VQ(t)]}function lz(i){return i=i.map(e=>tA(e)),ule(i[0],jf(i[2],i[1]))}function v7e(i){const e=b7e(i),t=S7e(e),n=_7e(t,i),r=E7e(t,i.length),s=x7e(r,i),o=T7e(t,i),{polygons:a,centers:l}=w7e(o,t,i),c=M7e(a),u=R7e(t,i),f=C7e(n,t);return{delaunay:e,edges:n,triangles:t,centers:l,neighbors:r,polygons:a,mesh:c,hull:u,urquhart:f,find:s}}function x7e(i,e){function t(n,r){let s=n[0]-r[0],o=n[1]-r[1],a=n[2]-r[2];return s*s+o*o+a*a}return function(r,s,o){o===void 0&&(o=0);let a,l,c=o;const u=tA([r,s]);do a=o,o=null,l=t(u,tA(e[a])),i[a].forEach(f=>{let h=t(u,tA(e[f]));if(h<l){l=h,o=f,c=f;return}});while(o!==null);return c}}function b7e(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=lFe(i[e]),n=zFe().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let f=0,h=i.length;f<h;f++){let p=i[f][0]**2+i[f][1]**2;!isFinite(p)||p>1e32?r.push(f):p>s&&(s=p)}const o=1e6*cle(s);r.forEach(f=>i[f]=[o,0]),i.push([0,o]),i.push([-o,0]),i.push([0,-o]);const a=sz.from(i);a.projection=n;const{triangles:l,halfedges:c,inedges:u}=a;for(let f=0,h=c.length;f<h;f++)if(c[f]<0){const p=f%3==2?f-2:f+1,m=f%3==0?f+2:f-1,g=c[p],b=c[m];c[g]=b,c[b]=g,c[p]=c[m]=-1,l[f]=l[p]=l[m]=e,u[l[g]]=g%3==0?g+2:g-1,u[l[b]]=b%3==0?b+2:b-1,f+=2-f%3}else l[f]>i.length-3-1&&(l[f]=e);return a}function _7e(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(lz(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add(CL([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function S7e(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],o=e[3*n+1],a=e[3*n+2];s!==o&&o!==a&&t.push([s,a,o])}return t}function T7e(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(tA),r=t8(t8(jf(n[1],n[0]),jf(n[2],n[1])),jf(n[0],n[2]));return az(n8(r))})}function E7e(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],o=n[(r+1)%3];t[s]=t[s]||[],t[s].push(o)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function w7e(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const a=tA(t[0]),l=tA(t[1]),c=n8(t8(a,l)),u=n8(jf(a,l)),f=jf(c,u),h=[c,jf(c,f),jf(jf(c,f),f),jf(jf(jf(c,f),f),f)].map(az).map(o);return n.push(h),n.push(h.slice().reverse()),{polygons:n,centers:r}}}e.forEach((a,l)=>{for(let c=0;c<3;c++){const u=a[c],f=a[(c+1)%3],h=a[(c+2)%3];n[u]=n[u]||[],n[u].push([f,h,l,[u,f,h]])}});const s=n.map(a=>{const l=[a[0][2]];let c=a[0][1];for(let u=1;u<a.length;u++)for(let f=0;f<a.length;f++)if(a[f][0]==c){c=a[f][1],l.push(a[f][2]);break}if(l.length>2)return l;if(l.length==2){const u=qQ(t[a[0][3][0]],t[a[0][3][1]],r[l[0]]),f=qQ(t[a[0][3][2]],t[a[0][3][0]],r[l[0]]),h=o(u),p=o(f);return[l[0],p,l[1],h]}});function o(a){let l=-1;return r.slice(e.length,1/0).forEach((c,u)=>{c[0]===a[0]&&c[1]===a[1]&&(l=u+e.length)}),l<0&&(l=r.length,r.push(a)),l}return{polygons:s,centers:r}}function qQ(i,e,t){i=tA(i),e=tA(e),t=tA(t);const n=g7e(ule(jf(e,i),t));return az(n8(t8(i,e)).map(r=>n*r))}function M7e(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function C7e(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,o)=>{const a=s.join("-");n.set(a,t[o]),r.set(a,!0)}),e.forEach(s=>{let o=0,a=-1;for(let l=0;l<3;l++){let c=CL([s[l],s[(l+1)%3]]).join("-");n.get(c)>o&&(o=n.get(c),a=c)}r.set(a,!1)}),i.map(s=>r.get(s.join("-")))}}function R7e(i,e){const t=new Set,n=[];i.map(a=>{if(!(lz(a.map(l=>e[l>e.length?0:l]))>1e-12))for(let l=0;l<3;l++){let c=[a[l],a[(l+1)%3]],u=`${c[0]}-${c[1]}`;t.has(u)?t.delete(u):t.add(`${c[1]}-${c[0]}`)}});const r=new Map;let s;if(t.forEach(a=>{a=a.split("-").map(Number),r.set(a[0],a[1]),s=a[0]}),s===void 0)return n;let o=s;do{n.push(o);let a=r.get(o);r.set(o,-1),o=a}while(o>-1&&o!==s);return n}function D7e(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=v7e(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return tQ(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return tQ(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(o=>e.delaunay.centers[o])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>lz(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>i1(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,o)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[o],urquhart:!!r[o]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const o of r)if(o)for(let a=o.length,l=o[a-1],c=o[0],u=0;u<a;l=c,c=o[++u])c>l&&s.push([n[l],n[c]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||i1([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function Rk(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function L7e(i){if(Array.isArray(i))return i}function P7e(i){if(Array.isArray(i))return Rk(i)}function N7e(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function B7e(i,e,t){return e=i8(e),H7e(i,fle()?Reflect.construct(e,[],i8(i).constructor):e.apply(i,t))}function I7e(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function O7e(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function i8(i){return i8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i8(i)}function F7e(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Dk(i,e)}function fle(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fle=function(){return!!i})()}function U7e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function k7e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function G7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H7e(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N7e(i)}function Dk(i,e){return Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Dk(i,e)}function F0(i,e){return L7e(i)||k7e(i,e)||hle(i,e)||G7e()}function pO(i){return P7e(i)||U7e(i)||hle(i)||z7e()}function hle(i,e){if(i){if(typeof i=="string")return Rk(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Rk(i,e):void 0}}function V7e(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=q7e(i,n),s=DM(r),o=$7e(i,n),a=[].concat(pO(s),pO(o)),l={type:"Polygon",coordinates:i},c=Pae(l),u=F0(c,2),f=F0(u[0],2),h=f[0],p=f[1],m=F0(u[1],2),g=m[0],b=m[1],T=h>g||b>=89||p<=-89,C=[];if(T){var R=D7e(a).triangles(),P=new Map(a.map(function(se,le){var de=F0(se,2),ie=de[0],ge=de[1];return["".concat(ie,"-").concat(ge),le]}));R.features.forEach(function(se){var le,de=se.geometry.coordinates[0].slice(0,3).reverse(),ie=[];if(de.forEach(function(Ce){var Ie=F0(Ce,2),Ee=Ie[0],Be=Ie[1],qe="".concat(Ee,"-").concat(Be);P.has(qe)&&ie.push(P.get(qe))}),ie.length===3){if(ie.some(function(Ce){return Ce<s.length})){var ge=se.properties.circumcenter;if(!Lk(ge,l,T))return}(le=C).push.apply(le,ie)}})}else if(o.length)for(var H=UM.from(a),O=function(le){var de,ie=[2,1,0].map(function(Ie){return H.triangles[le+Ie]}),ge=ie.map(function(Ie){return a[Ie]});if(ie.some(function(Ie){return Ie<s.length})){var Ce=[0,1].map(function(Ie){return nOe(ge,function(Ee){return Ee[Ie]})});if(!Lk(Ce,l,T))return 1}(de=C).push.apply(de,pO(ie))},$=0,ee=H.triangles.length;$<ee;$+=3)O($);else{var I=QL(r),F=I.vertices,k=I.holes,q=k===void 0?[]:k;C=fUe(F,q,2)}var Y=og(CL(a,function(se){return se[0]}),[0,1]),oe=og(CL(a,function(se){return se[1]}),[0,1]),re=a.map(function(se){var le=F0(se,2),de=le[0],ie=le[1];return[Y(de),oe(ie)]}),Q={points:a,indices:C,uvs:re};return{contour:r,triangles:Q}}function q7e(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var o=i1(s,r)*180/Math.PI;if(o>e)for(var a=JG(r,s),l=1/Math.ceil(o/e),c=l;c<1;)n.push(a(c)),c+=l}n.push(r=s)}),n})}function $7e(i,e){var t={type:"Polygon",coordinates:i},n=Pae(t),r=F0(n,2),s=F0(r[0],2),o=s[0],a=s[1],l=F0(r[1],2),c=l[0],u=l[1];if(Math.min(Math.abs(c-o),Math.abs(u-a))<e)return[];var f=o>c||u>=89||a<=-89;return j7e(e,{minLng:o,maxLng:c,minLat:a,maxLat:u}).filter(function(h){return Lk(h,t,f)})}function j7e(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,o=Math.round(Math.pow(360/i,2)/Math.PI),a=(1+Math.sqrt(5))/2,l=function(T){return T/a*360%360-180},c=function(T){return Math.acos(2*T/o-1)/Math.PI*180-90},u=function(T){return o*(Math.cos((T+90)*Math.PI/180)+1)/2},f=[s!==void 0?Math.ceil(u(s)):0,r!==void 0?Math.floor(u(r)):o-1],h=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(b){return b<=n}:n===void 0?function(b){return b>=t}:n>=t?function(b){return b>=t&&b<=n}:function(b){return b>=t||b<=n},p=[],m=f[0];m<=f[1];m++){var g=l(m);h(g)&&p.push([g,c(m)])}return p}function Lk(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?EFe(e,i):s7e(i,e)}var gD=window.THREE?window.THREE:{BufferGeometry:qn,Float32BufferAttribute:Cn},$Q=new gD.BufferGeometry().setAttribute?"setAttribute":"addAttribute",cz=function(i){function e(t,n,r,s,o,a,l){var c;I7e(this,e),c=B7e(this,e),c.type="ConicPolygonGeometry",c.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:r,closedBottom:s,closedTop:o,includeSides:a,curvatureResolution:l},n=n||0,r=r||1,s=s!==void 0?s:!0,o=o!==void 0?o:!0,a=a!==void 0?a:!0,l=l||5;var u=V7e(t,{resolution:l}),f=u.contour,h=u.triangles,p=DM(h.uvs),m=[],g=[],b=[],T=0,C=function(k){var q=Math.round(m.length/3),H=b.length;m=m.concat(k.vertices),g=g.concat(k.uvs),b=b.concat(q?k.indices.map(function(O){return O+q}):k.indices),c.addGroup(H,b.length-H,T++)};a&&C(P()),s&&C(I(n,!1)),o&&C(I(r,!0)),c.setIndex(b),c[$Q]("position",new gD.Float32BufferAttribute(m,3)),c[$Q]("uv",new gD.Float32BufferAttribute(g,2)),c.computeVertexNormals();function R(F,k){var q=typeof k=="function"?k:function(){return k},H=F.map(function(O){return O.map(function($){var ee=F0($,2),Y=ee[0],oe=ee[1];return W7e(oe,Y,q(Y,oe))})});return QL(H)}function P(){for(var F=R(f,n),k=F.vertices,q=F.holes,H=R(f,r),O=H.vertices,$=DM([O,k]),ee=Math.round(O.length/3),Y=new Set(q),oe=0,re=[],Q=0;Q<ee;Q++){var se=Q+1;if(se===ee)se=oe;else if(Y.has(se)){var le=se;se=oe,oe=le}re.push(Q,Q+ee,se+ee),re.push(se+ee,se,Q)}for(var de=[],ie=1;ie>=0;ie--)for(var ge=0;ge<ee;ge+=1)de.push(ge/(ee-1),ie);return{indices:re,vertices:$,uvs:de}}function I(F){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:k?h.indices:h.indices.slice().reverse(),vertices:R([h.points],F).vertices,uvs:p}}return c}return F7e(e,i),O7e(e)}(gD.BufferGeometry);function W7e(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function Pk(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function K7e(i){if(Array.isArray(i))return i}function Y7e(i){if(Array.isArray(i))return Pk(i)}function X7e(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Q7e(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function Z7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e9e(i,e){if(i==null)return{};var t,n,r=t9e(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function t9e(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function n9e(i,e){return K7e(i)||Q7e(i,e)||dle(i,e)||Z7e()}function i9e(i){return Y7e(i)||X7e(i)||dle(i)||J7e()}function r9e(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function s9e(i){var e=r9e(i,"string");return typeof e=="symbol"?e:e+""}function dle(i,e){if(i){if(typeof i=="string")return Pk(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pk(i,e):void 0}}var o9e=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=i.reduce(function(a,l){var c=a,u=l;return r.forEach(function(f,h){var p=f.keyAccessor,m=f.isProp,g;if(m){var b=u,T=b[p],C=e9e(b,[p].map(s9e));g=T,u=C}else g=p(u,h);h+1<r.length?(c.hasOwnProperty(g)||(c[g]={}),c=c[g]):t?(c.hasOwnProperty(g)||(c[g]=[]),c[g].push(u)):c[g]=u}),a},{});t instanceof Function&&function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===r.length?Object.keys(l).forEach(function(u){return l[u]=t(l[u])}):Object.values(l).forEach(function(u){return a(u,c+1)})}(s);var o=s;return n&&(o=[],function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===r.length?o.push({keys:c,vals:l}):Object.entries(l).forEach(function(u){var f=n9e(u,2),h=f[0],p=f[1];return a(p,[].concat(i9e(c),[h]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o},yr=function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(dt){return e.locateFile?e.locateFile(dt,r):r+dt}var o;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",o=function(Ut,hn,In){var S=new XMLHttpRequest;S.open("GET",Ut,!0),S.responseType="arraybuffer",S.onload=function(){if(S.status==200||S.status==0&&S.response){hn(S.response);return}var Kn=Fe(Ut);if(Kn){hn(Kn.buffer);return}In()},S.onerror=In,S.send(null)};var a=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var c=0,u=function(dt){c=dt},f=function(){return c},h=8;function p(dt,Ut,hn,In){switch(hn=hn||"i8",hn.charAt(hn.length-1)==="*"&&(hn="i32"),hn){case"i1":ee[dt>>0]=Ut;break;case"i8":ee[dt>>0]=Ut;break;case"i16":oe[dt>>1]=Ut;break;case"i32":re[dt>>2]=Ut;break;case"i64":Tt=[Ut>>>0,(Ve=Ut,+ut(Ve)>=1?Ve>0?(ft(+Jt(Ve/4294967296),4294967295)|0)>>>0:~~+we((Ve-+(~~Ve>>>0))/4294967296)>>>0:0)],re[dt>>2]=Tt[0],re[dt+4>>2]=Tt[1];break;case"float":Q[dt>>2]=Ut;break;case"double":se[dt>>3]=Ut;break;default:Qr("invalid type for setValue: "+hn)}}function m(dt,Ut,hn){switch(Ut=Ut||"i8",Ut.charAt(Ut.length-1)==="*"&&(Ut="i32"),Ut){case"i1":return ee[dt>>0];case"i8":return ee[dt>>0];case"i16":return oe[dt>>1];case"i32":return re[dt>>2];case"i64":return re[dt>>2];case"float":return Q[dt>>2];case"double":return se[dt>>3];default:Qr("invalid type for getValue: "+Ut)}return null}var g=!1;function b(dt,Ut){dt||Qr("Assertion failed: "+Ut)}function T(dt){var Ut=e["_"+dt];return b(Ut,"Cannot call unknown function "+dt+", make sure it is exported"),Ut}function C(dt,Ut,hn,In,S){var ve={string:function(xi){var Xs=0;if(xi!=null&&xi!==0){var vu=(xi.length<<2)+1;Xs=At(vu),q(xi,Xs,vu)}return Xs},array:function(xi){var Xs=At(xi.length);return H(xi,Xs),Xs}};function Kn(xi){return Ut==="string"?F(xi):Ut==="boolean"?!!xi:xi}var ni=T(dt),zn=[],si=0;if(In)for(var Bi=0;Bi<In.length;Bi++){var Pc=ve[hn[Bi]];Pc?(si===0&&(si=vn()),zn[Bi]=Pc(In[Bi])):zn[Bi]=In[Bi]}var pr=ni.apply(null,zn);return pr=Kn(pr),si!==0&&Lt(si),pr}function R(dt,Ut,hn,In){hn=hn||[];var S=hn.every(function(Kn){return Kn==="number"}),ve=Ut!=="string";return ve&&S&&!In?T(dt):function(){return C(dt,Ut,hn,arguments)}}var P=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function I(dt,Ut,hn){for(var In=Ut+hn,S=Ut;dt[S]&&!(S>=In);)++S;if(S-Ut>16&&dt.subarray&&P)return P.decode(dt.subarray(Ut,S));for(var ve="";Ut<S;){var Kn=dt[Ut++];if(!(Kn&128)){ve+=String.fromCharCode(Kn);continue}var ni=dt[Ut++]&63;if((Kn&224)==192){ve+=String.fromCharCode((Kn&31)<<6|ni);continue}var zn=dt[Ut++]&63;if((Kn&240)==224?Kn=(Kn&15)<<12|ni<<6|zn:Kn=(Kn&7)<<18|ni<<12|zn<<6|dt[Ut++]&63,Kn<65536)ve+=String.fromCharCode(Kn);else{var si=Kn-65536;ve+=String.fromCharCode(55296|si>>10,56320|si&1023)}}return ve}function F(dt,Ut){return dt?I(Y,dt,Ut):""}function k(dt,Ut,hn,In){if(!(In>0))return 0;for(var S=hn,ve=hn+In-1,Kn=0;Kn<dt.length;++Kn){var ni=dt.charCodeAt(Kn);if(ni>=55296&&ni<=57343){var zn=dt.charCodeAt(++Kn);ni=65536+((ni&1023)<<10)|zn&1023}if(ni<=127){if(hn>=ve)break;Ut[hn++]=ni}else if(ni<=2047){if(hn+1>=ve)break;Ut[hn++]=192|ni>>6,Ut[hn++]=128|ni&63}else if(ni<=65535){if(hn+2>=ve)break;Ut[hn++]=224|ni>>12,Ut[hn++]=128|ni>>6&63,Ut[hn++]=128|ni&63}else{if(hn+3>=ve)break;Ut[hn++]=240|ni>>18,Ut[hn++]=128|ni>>12&63,Ut[hn++]=128|ni>>6&63,Ut[hn++]=128|ni&63}}return Ut[hn]=0,hn-S}function q(dt,Ut,hn){return k(dt,Y,Ut,hn)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function H(dt,Ut){ee.set(dt,Ut)}function O(dt,Ut){return dt%Ut>0&&(dt+=Ut-dt%Ut),dt}var $,ee,Y,oe,re,Q,se;function le(dt){$=dt,e.HEAP8=ee=new Int8Array(dt),e.HEAP16=oe=new Int16Array(dt),e.HEAP32=re=new Int32Array(dt),e.HEAPU8=Y=new Uint8Array(dt),e.HEAPU16=new Uint16Array(dt),e.HEAPU32=new Uint32Array(dt),e.HEAPF32=Q=new Float32Array(dt),e.HEAPF64=se=new Float64Array(dt)}var de=5267040,ie=24128,ge=e.TOTAL_MEMORY||33554432;e.buffer?$=e.buffer:$=new ArrayBuffer(ge),ge=$.byteLength,le($),re[ie>>2]=de;function Ce(dt){for(;dt.length>0;){var Ut=dt.shift();if(typeof Ut=="function"){Ut();continue}var hn=Ut.func;typeof hn=="number"?Ut.arg===void 0?e.dynCall_v(hn):e.dynCall_vi(hn,Ut.arg):hn(Ut.arg===void 0?null:Ut.arg)}}var Ie=[],Ee=[],Be=[],qe=[];function it(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)$t(e.preRun.shift());Ce(Ie)}function et(){Ce(Ee)}function Ht(){Ce(Be)}function _t(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)mt(e.postRun.shift());Ce(qe)}function $t(dt){Ie.unshift(dt)}function mt(dt){qe.unshift(dt)}var ut=Math.abs,we=Math.ceil,Jt=Math.floor,ft=Math.min,Dt=0,Rt=null;function yn(dt){Dt++,e.monitorRunDependencies&&e.monitorRunDependencies(Dt)}function Gt(dt){if(Dt--,e.monitorRunDependencies&&e.monitorRunDependencies(Dt),Dt==0&&Rt){var Ut=Rt;Rt=null,Ut()}}e.preloadedImages={},e.preloadedAudios={};var Se=null,fe="data:application/octet-stream;base64,";function Pe(dt){return String.prototype.startsWith?dt.startsWith(fe):dt.indexOf(fe)===0}var Ve,Tt;Se="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var bt=24144;function sn(dt,Ut,hn,In){Qr("Assertion failed: "+F(dt)+", at: "+[Ut?F(Ut):"unknown filename",hn,In?F(In):"unknown function"])}function on(){return ee.length}function mn(dt,Ut,hn){Y.set(Y.subarray(Ut,Ut+hn),dt)}function ai(dt){return e.___errno_location&&(re[e.___errno_location()>>2]=dt),dt}function Vt(dt){Qr("OOM")}function _n(dt){try{var Ut=new ArrayBuffer(dt);return Ut.byteLength!=dt?void 0:(new Int8Array(Ut).set(ee),tn(Ut),le(Ut),1)}catch{}}function En(dt){var Ut=on(),hn=16777216,In=2147483648-hn;if(dt>In)return!1;for(var S=16777216,ve=Math.max(Ut,S);ve<dt;)ve<=536870912?ve=O(2*ve,hn):ve=Math.min(O((3*ve+2147483648)/4,hn),In);var Kn=_n(ve);return!!Kn}var pn=typeof atob=="function"?atob:function(dt){var Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hn="",In,S,ve,Kn,ni,zn,si,Bi=0;dt=dt.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Kn=Ut.indexOf(dt.charAt(Bi++)),ni=Ut.indexOf(dt.charAt(Bi++)),zn=Ut.indexOf(dt.charAt(Bi++)),si=Ut.indexOf(dt.charAt(Bi++)),In=Kn<<2|ni>>4,S=(ni&15)<<4|zn>>2,ve=(zn&3)<<6|si,hn=hn+String.fromCharCode(In),zn!==64&&(hn=hn+String.fromCharCode(S)),si!==64&&(hn=hn+String.fromCharCode(ve));while(Bi<dt.length);return hn};function Sn(dt){try{for(var Ut=pn(dt),hn=new Uint8Array(Ut.length),In=0;In<Ut.length;++In)hn[In]=Ut.charCodeAt(In);return hn}catch{throw new Error("Converting base64 string to bytes failed.")}}function Fe(dt){if(Pe(dt))return Sn(dt.slice(fe.length))}var xt={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},dn={b:u,c:f,d:sn,e:ai,f:on,g:mn,h:En,i:Vt,o:bt,p:ie},Te=function(dt,Ut,hn){"almost asm";var In=new dt.Int8Array(hn),S=new dt.Int32Array(hn);new dt.Uint8Array(hn),new dt.Float32Array(hn);var ve=new dt.Float64Array(hn),Kn=Ut.o|0,ni=Ut.p|0,zn=dt.Math.floor,si=dt.Math.abs,Bi=dt.Math.sqrt,Pc=dt.Math.pow,pr=dt.Math.cos,xi=dt.Math.sin,Xs=dt.Math.tan,vu=dt.Math.acos,Nc=dt.Math.asin,ye=dt.Math.atan,Ge=dt.Math.atan2,lt=dt.Math.ceil,Je=dt.Math.imul,Ye=dt.Math.min,Xt=dt.Math.max,fn=dt.Math.clz32,zt=Ut.b,Ae=Ut.c,en=Ut.d,li=Ut.e,Hn=Ut.f,Zi=Ut.g,Ji=Ut.h,Zr=Ut.i,me=24160;function gi(x){return In=new Int8Array(x),S=new Int32Array(x),ve=new Float64Array(x),hn=x,!0}function Yn(x){x=x|0;var v=0;return v=me,me=me+x|0,me=me+15&-16,v|0}function Qs(){return me|0}function er(x){x=x|0,me=x}function Va(x,v){x=x|0,me=x}function Rl(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;return(x|0)<0?(v=2,v|0):(x|0)>13780509?(v=wf(15,v)|0,v|0):(E=((x|0)<0)<<31>>31,L=go(x|0,E|0,3,0)|0,M=Ae()|0,E=Ti(x|0,E|0,1,0)|0,E=go(L|0,M|0,E|0,Ae()|0)|0,E=Ti(E|0,Ae()|0,1,0)|0,x=Ae()|0,S[v>>2]=E,S[v+4>>2]=x,v=0,v|0)}function ra(x,v,E,M){return x=x|0,v=v|0,E=E|0,M=M|0,Zs(x,v,E,M,0)|0}function Zs(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0;if(K=me,me=me+16|0,U=K,!(Tr(x,v,E,M,L)|0))return M=0,me=K,M|0;do if((E|0)>=0){if((E|0)>13780509){if(B=wf(15,U)|0,B|0)break;V=U,U=S[V>>2]|0,V=S[V+4>>2]|0}else B=((E|0)<0)<<31>>31,te=go(E|0,B|0,3,0)|0,V=Ae()|0,B=Ti(E|0,B|0,1,0)|0,B=go(te|0,V|0,B|0,Ae()|0)|0,B=Ti(B|0,Ae()|0,1,0)|0,V=Ae()|0,S[U>>2]=B,S[U+4>>2]=V,U=B;if(ro(M|0,0,U<<3|0)|0,L|0){ro(L|0,0,U<<2|0)|0,B=ps(x,v,E,M,L,U,V,0)|0;break}B=sa(U,4)|0,B?(te=ps(x,v,E,M,B,U,V,0)|0,ii(B),B=te):B=13}else B=2;while(!1);return te=B,me=K,te|0}function Tr(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0;if(Ke=me,me=me+16|0,ke=Ke,Re=Ke+8|0,Le=ke,S[Le>>2]=x,S[Le+4>>2]=v,(E|0)<0)return Re=2,me=Ke,Re|0;if(B=M,S[B>>2]=x,S[B+4>>2]=v,B=(L|0)!=0,B&&(S[L>>2]=0),wr(x,v)|0)return Re=9,me=Ke,Re|0;S[Re>>2]=0;e:do if((E|0)>=1)if(B)for(ue=1,te=0,_e=0,Le=1,B=x;;){if(!(te|_e)){if(B=lr(B,v,4,Re,ke)|0,B|0)break e;if(v=ke,B=S[v>>2]|0,v=S[v+4>>2]|0,wr(B,v)|0){B=9;break e}}if(B=lr(B,v,S[22384+(_e<<2)>>2]|0,Re,ke)|0,B|0)break e;if(v=ke,B=S[v>>2]|0,v=S[v+4>>2]|0,x=M+(ue<<3)|0,S[x>>2]=B,S[x+4>>2]=v,S[L+(ue<<2)>>2]=Le,x=te+1|0,U=(x|0)==(Le|0),V=_e+1|0,K=(V|0)==6,wr(B,v)|0){B=9;break e}if(Le=Le+(K&U&1)|0,(Le|0)>(E|0)){B=0;break}else ue=ue+1|0,te=U?0:x,_e=U?K?0:V:_e}else for(ue=1,te=0,_e=0,Le=1,B=x;;){if(!(te|_e)){if(B=lr(B,v,4,Re,ke)|0,B|0)break e;if(v=ke,B=S[v>>2]|0,v=S[v+4>>2]|0,wr(B,v)|0){B=9;break e}}if(B=lr(B,v,S[22384+(_e<<2)>>2]|0,Re,ke)|0,B|0)break e;if(v=ke,B=S[v>>2]|0,v=S[v+4>>2]|0,x=M+(ue<<3)|0,S[x>>2]=B,S[x+4>>2]=v,x=te+1|0,U=(x|0)==(Le|0),V=_e+1|0,K=(V|0)==6,wr(B,v)|0){B=9;break e}if(Le=Le+(K&U&1)|0,(Le|0)>(E|0)){B=0;break}else ue=ue+1|0,te=U?0:x,_e=U?K?0:V:_e}else B=0;while(!1);return Re=B,me=Ke,Re|0}function ps(x,v,E,M,L,B,U,V){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,B=B|0,U=U|0,V=V|0;var K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0;if(Ke=me,me=me+16|0,ke=Ke+8|0,Re=Ke,K=Xd(x|0,v|0,B|0,U|0)|0,ue=Ae()|0,_e=M+(K<<3)|0,Et=_e,gt=S[Et>>2]|0,Et=S[Et+4>>2]|0,te=(gt|0)==(x|0)&(Et|0)==(v|0),!((gt|0)==0&(Et|0)==0|te))do K=Ti(K|0,ue|0,1,0)|0,K=YA(K|0,Ae()|0,B|0,U|0)|0,ue=Ae()|0,_e=M+(K<<3)|0,gt=_e,Et=S[gt>>2]|0,gt=S[gt+4>>2]|0,te=(Et|0)==(x|0)&(gt|0)==(v|0);while(!((Et|0)==0&(gt|0)==0|te));if(K=L+(K<<2)|0,te&&(S[K>>2]|0)<=(V|0)||(gt=_e,S[gt>>2]=x,S[gt+4>>2]=v,S[K>>2]=V,(V|0)>=(E|0)))return gt=0,me=Ke,gt|0;switch(te=V+1|0,S[ke>>2]=0,K=lr(x,v,2,ke,Re)|0,K|0){case 9:{Le=9;break}case 0:{K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K||(Le=9);break}}e:do if((Le|0)==9){switch(S[ke>>2]=0,K=lr(x,v,3,ke,Re)|0,K|0){case 9:break;case 0:{if(K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K|0)break e;break}default:break e}switch(S[ke>>2]=0,K=lr(x,v,1,ke,Re)|0,K|0){case 9:break;case 0:{if(K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K|0)break e;break}default:break e}switch(S[ke>>2]=0,K=lr(x,v,5,ke,Re)|0,K|0){case 9:break;case 0:{if(K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K|0)break e;break}default:break e}switch(S[ke>>2]=0,K=lr(x,v,4,ke,Re)|0,K|0){case 9:break;case 0:{if(K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K|0)break e;break}default:break e}switch(S[ke>>2]=0,K=lr(x,v,6,ke,Re)|0,K|0){case 9:break;case 0:{if(K=Re,K=ps(S[K>>2]|0,S[K+4>>2]|0,E,M,L,B,U,te)|0,K|0)break e;break}default:break e}return gt=0,me=Ke,gt|0}while(!1);return gt=K,me=Ke,gt|0}function lr(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0;if(E>>>0>6)return L=1,L|0;if(_e=(S[M>>2]|0)%6|0,S[M>>2]=_e,(_e|0)>0){B=0;do E=kd(E)|0,B=B+1|0;while((B|0)<(S[M>>2]|0))}if(_e=jt(x|0,v|0,45)|0,Ae()|0,ue=_e&127,ue>>>0>121)return L=5,L|0;K=mo(x,v)|0,B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15;e:do if(!B)te=8;else{for(;;){if(U=(15-B|0)*3|0,V=jt(x|0,v|0,U|0)|0,Ae()|0,V=V&7,(V|0)==7){v=5;break}if(Re=(qa(B)|0)==0,B=B+-1|0,Le=un(7,0,U|0)|0,v=v&~(Ae()|0),ke=un(S[(Re?432:16)+(V*28|0)+(E<<2)>>2]|0,0,U|0)|0,U=Ae()|0,E=S[(Re?640:224)+(V*28|0)+(E<<2)>>2]|0,x=ke|x&~Le,v=U|v,!E){E=0;break e}if(!B){te=8;break e}}return v|0}while(!1);(te|0)==8&&(Re=S[848+(ue*28|0)+(E<<2)>>2]|0,ke=un(Re|0,0,45)|0,x=ke|x,v=Ae()|0|v&-1040385,E=S[4272+(ue*28|0)+(E<<2)>>2]|0,(Re&127|0)==127&&(Re=un(S[848+(ue*28|0)+20>>2]|0,0,45)|0,v=Ae()|0|v&-1040385,E=S[4272+(ue*28|0)+20>>2]|0,x=Sh(Re|x,v)|0,v=Ae()|0,S[M>>2]=(S[M>>2]|0)+1)),V=jt(x|0,v|0,45)|0,Ae()|0,V=V&127;e:do if(Er(V)|0){t:do if((mo(x,v)|0)==1){if((ue|0)!=(V|0))if(xh(V,S[7696+(ue*28|0)>>2]|0)|0){x=Xp(x,v)|0,U=1,v=Ae()|0;break}else en(23313,22416,436,22424);switch(K|0){case 3:{x=Sh(x,v)|0,v=Ae()|0,S[M>>2]=(S[M>>2]|0)+1,U=0;break t}case 5:{x=Xp(x,v)|0,v=Ae()|0,S[M>>2]=(S[M>>2]|0)+5,U=0;break t}case 0:return Re=9,Re|0;default:return Re=1,Re|0}}else U=0;while(!1);if((E|0)>0){B=0;do x=Tf(x,v)|0,v=Ae()|0,B=B+1|0;while((B|0)!=(E|0))}if((ue|0)!=(V|0)){if(!(Sg(V)|0)){if((U|0)!=0|(mo(x,v)|0)!=5)break;S[M>>2]=(S[M>>2]|0)+1;break}switch(_e&127){case 8:case 118:break e}(mo(x,v)|0)!=3&&(S[M>>2]=(S[M>>2]|0)+1)}}else if((E|0)>0){B=0;do x=Sh(x,v)|0,v=Ae()|0,B=B+1|0;while((B|0)!=(E|0))}while(!1);return S[M>>2]=((S[M>>2]|0)+E|0)%6|0,Re=L,S[Re>>2]=x,S[Re+4>>2]=v,Re=0,Re|0}function As(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0;for(V=me,me=me+16|0,B=V,U=V+8|0,L=(wr(x,v)|0)==0,L=L?1:2;;){if(S[U>>2]=0,te=(lr(x,v,L,U,B)|0)==0,K=B,te&((S[K>>2]|0)==(E|0)?(S[K+4>>2]|0)==(M|0):0)){x=4;break}if(L=L+1|0,L>>>0>=7){L=7,x=4;break}}return(x|0)==4?(me=V,L|0):0}function Uo(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0;if(Re=me,me=me+16|0,Le=Re,ke=Re+8|0,_e=Le,S[_e>>2]=x,S[_e+4>>2]=v,!E)return ke=M,S[ke>>2]=x,S[ke+4>>2]=v,ke=0,me=Re,ke|0;S[ke>>2]=0;e:do if(wr(x,v)|0)x=9;else{if(B=(E|0)>0,B){L=0,_e=x;do{if(x=lr(_e,v,4,ke,Le)|0,x|0)break e;if(v=Le,_e=S[v>>2]|0,v=S[v+4>>2]|0,L=L+1|0,wr(_e,v)|0){x=9;break e}}while((L|0)<(E|0));if(ue=M,S[ue>>2]=_e,S[ue+4>>2]=v,ue=E+-1|0,B){te=0,x=1;do{if(L=22384+(te<<2)|0,(te|0)==5)for(U=S[L>>2]|0,B=0,L=x;;){if(x=Le,x=lr(S[x>>2]|0,S[x+4>>2]|0,U,ke,Le)|0,x|0)break e;if((B|0)!=(ue|0))if(K=Le,V=S[K>>2]|0,K=S[K+4>>2]|0,x=M+(L<<3)|0,S[x>>2]=V,S[x+4>>2]=K,!(wr(V,K)|0))x=L+1|0;else{x=9;break e}else x=L;if(B=B+1|0,(B|0)>=(E|0))break;L=x}else for(U=Le,K=S[L>>2]|0,V=0,L=x,B=S[U>>2]|0,U=S[U+4>>2]|0;;){if(x=lr(B,U,K,ke,Le)|0,x|0)break e;if(U=Le,B=S[U>>2]|0,U=S[U+4>>2]|0,x=M+(L<<3)|0,S[x>>2]=B,S[x+4>>2]=U,x=L+1|0,wr(B,U)|0){x=9;break e}if(V=V+1|0,(V|0)>=(E|0))break;L=x}te=te+1|0}while(te>>>0<6);x=Le,U=_e,L=S[x>>2]|0,B=v,x=S[x+4>>2]|0}else U=_e,L=_e,B=v,x=v}else U=M,S[U>>2]=x,S[U+4>>2]=v,U=x,L=x,B=v,x=v;x=(U|0)==(L|0)&(B|0)==(x|0)?0:9}while(!1);return ke=x,me=Re,ke|0}function Bc(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0;if(V=me,me=me+48|0,L=V+16|0,B=V+8|0,U=V,E|0)return U=15,me=V,U|0;if(te=x,K=S[te+4>>2]|0,E=B,S[E>>2]=S[te>>2],S[E+4>>2]=K,i0(B,L),v=Od(L,v,U)|0,!v){if(E=S[B>>2]|0,B=S[x+8>>2]|0,(B|0)>0){L=S[x+12>>2]|0,v=0;do E=(S[L+(v<<3)>>2]|0)+E|0,v=v+1|0;while((v|0)<(B|0))}v=U,L=S[v>>2]|0,v=S[v+4>>2]|0,B=((E|0)<0)<<31>>31,(v|0)<(B|0)|(v|0)==(B|0)&L>>>0<E>>>0?(v=U,S[v>>2]=E,S[v+4>>2]=B,v=B):E=L,K=Ti(E|0,v|0,12,0)|0,te=Ae()|0,v=U,S[v>>2]=K,S[v+4>>2]=te,v=M,S[v>>2]=K,S[v+4>>2]=te,v=0}return te=v,me=V,te|0}function Sa(x,v,E,M,L,B,U){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,B=B|0,U=U|0;var V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0,Un=0,Xn=0,bn=0,oi=0,Zn=0,fi=0,tr=0,Jn=0,zr=0,nr=0,Ih=0;if(tr=me,me=me+64|0,bn=tr+48|0,oi=tr+32|0,Zn=tr+24|0,gn=tr+8|0,Tn=tr,K=S[x>>2]|0,(K|0)<=0)return fi=0,me=tr,fi|0;for(an=x+4|0,kt=bn+8|0,Un=oi+8|0,Xn=gn+8|0,V=0,rt=0;;){te=S[an>>2]|0,ot=te+(rt<<4)|0,S[bn>>2]=S[ot>>2],S[bn+4>>2]=S[ot+4>>2],S[bn+8>>2]=S[ot+8>>2],S[bn+12>>2]=S[ot+12>>2],(rt|0)==(K+-1|0)?(S[oi>>2]=S[te>>2],S[oi+4>>2]=S[te+4>>2],S[oi+8>>2]=S[te+8>>2],S[oi+12>>2]=S[te+12>>2]):(ot=te+(rt+1<<4)|0,S[oi>>2]=S[ot>>2],S[oi+4>>2]=S[ot+4>>2],S[oi+8>>2]=S[ot+8>>2],S[oi+12>>2]=S[ot+12>>2]),K=bf(bn,oi,M,Zn)|0;e:do if(K)te=0,V=K;else if(te=Zn,K=S[te>>2]|0,te=S[te+4>>2]|0,(te|0)>0|(te|0)==0&K>>>0>0){gt=0,ot=0;t:for(;;){if(Ih=+ve[bn>>3],Et=bi(K|0,te|0,gt|0,ot|0)|0,nr=+(Et>>>0)+4294967296*+(Ae()|0),Jn=+(K>>>0)+4294967296*+(te|0),zr=+(gt>>>0)+4294967296*+(ot|0),ve[gn>>3]=Ih*nr/Jn+ +ve[oi>>3]*zr/Jn,ve[Xn>>3]=+ve[kt>>3]*nr/Jn+ +ve[Un>>3]*zr/Jn,K=Vd(gn,M,Tn)|0,K|0){V=K;break}Et=Tn,Ke=S[Et>>2]|0,Et=S[Et+4>>2]|0,Le=Xd(Ke|0,Et|0,v|0,E|0)|0,ue=Ae()|0,K=U+(Le<<3)|0,_e=K,te=S[_e>>2]|0,_e=S[_e+4>>2]|0;n:do if((te|0)==0&(_e|0)==0)je=K,fi=16;else for(ke=0,Re=0;;){if((ke|0)>(E|0)|(ke|0)==(E|0)&Re>>>0>v>>>0){V=1;break t}if((te|0)==(Ke|0)&(_e|0)==(Et|0))break n;if(K=Ti(Le|0,ue|0,1,0)|0,Le=YA(K|0,Ae()|0,v|0,E|0)|0,ue=Ae()|0,Re=Ti(Re|0,ke|0,1,0)|0,ke=Ae()|0,K=U+(Le<<3)|0,_e=K,te=S[_e>>2]|0,_e=S[_e+4>>2]|0,(te|0)==0&(_e|0)==0){je=K,fi=16;break}}while(!1);if((fi|0)==16&&(fi=0,!((Ke|0)==0&(Et|0)==0))&&(Re=je,S[Re>>2]=Ke,S[Re+4>>2]=Et,Re=B+(S[L>>2]<<3)|0,S[Re>>2]=Ke,S[Re+4>>2]=Et,Re=L,Re=Ti(S[Re>>2]|0,S[Re+4>>2]|0,1,0)|0,Ke=Ae()|0,Et=L,S[Et>>2]=Re,S[Et+4>>2]=Ke),gt=Ti(gt|0,ot|0,1,0)|0,ot=Ae()|0,te=Zn,K=S[te>>2]|0,te=S[te+4>>2]|0,!((te|0)>(ot|0)|(te|0)==(ot|0)&K>>>0>gt>>>0)){te=1;break e}}te=0}else te=1;while(!1);if(rt=rt+1|0,!te){fi=21;break}if(K=S[x>>2]|0,(rt|0)>=(K|0)){V=0,fi=21;break}}return(fi|0)==21?(me=tr,V|0):0}function _g(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0,Un=0,Xn=0,bn=0,oi=0,Zn=0,fi=0,tr=0,Jn=0,zr=0,nr=0;if(nr=me,me=me+112|0,fi=nr+80|0,K=nr+72|0,tr=nr,Jn=nr+56|0,E|0)return zr=15,me=nr,zr|0;if(te=x+8|0,zr=kc((S[te>>2]<<5)+32|0)|0,!zr)return zr=13,me=nr,zr|0;if(Ch(x,zr),oi=x,Zn=S[oi+4>>2]|0,E=K,S[E>>2]=S[oi>>2],S[E+4>>2]=Zn,i0(K,fi),E=Od(fi,v,tr)|0,E)oi=0,Zn=0;else{if(E=S[K>>2]|0,B=S[te>>2]|0,(B|0)>0){U=S[x+12>>2]|0,L=0;do E=(S[U+(L<<3)>>2]|0)+E|0,L=L+1|0;while((L|0)!=(B|0));L=E}else L=E;E=tr,B=S[E>>2]|0,E=S[E+4>>2]|0,U=((L|0)<0)<<31>>31,(E|0)<(U|0)|(E|0)==(U|0)&B>>>0<L>>>0?(E=tr,S[E>>2]=L,S[E+4>>2]=U,E=U):L=B,oi=Ti(L|0,E|0,12,0)|0,Zn=Ae()|0,E=tr,S[E>>2]=oi,S[E+4>>2]=Zn,E=0}if(E|0)return ii(zr),zr=E,me=nr,zr|0;if(L=sa(oi,8)|0,!L)return ii(zr),zr=13,me=nr,zr|0;if(V=sa(oi,8)|0,!V)return ii(zr),ii(L),zr=13,me=nr,zr|0;Xn=fi,S[Xn>>2]=0,S[Xn+4>>2]=0,Xn=x,bn=S[Xn+4>>2]|0,E=K,S[E>>2]=S[Xn>>2],S[E+4>>2]=bn,E=Sa(K,oi,Zn,v,fi,L,V)|0;e:do if(E)ii(L),ii(V),ii(zr);else{t:do if((S[te>>2]|0)>0){for(U=x+12|0,B=0;E=Sa((S[U>>2]|0)+(B<<3)|0,oi,Zn,v,fi,L,V)|0,B=B+1|0,!(E|0);)if((B|0)>=(S[te>>2]|0))break t;ii(L),ii(V),ii(zr);break e}while(!1);(Zn|0)>0|(Zn|0)==0&oi>>>0>0&&ro(V|0,0,oi<<3|0)|0,bn=fi,Xn=S[bn+4>>2]|0;t:do if((Xn|0)>0|(Xn|0)==0&(S[bn>>2]|0)>>>0>0){an=L,kt=V,Un=L,Xn=V,bn=L,E=L,je=L,gn=V,Tn=V,L=V;n:for(;;){for(Et=0,gt=0,ot=0,rt=0,B=0,U=0;;){V=tr,K=V+56|0;do S[V>>2]=0,V=V+4|0;while((V|0)<(K|0));if(v=an+(Et<<3)|0,te=S[v>>2]|0,v=S[v+4>>2]|0,Tr(te,v,1,tr,0)|0){V=tr,K=V+56|0;do S[V>>2]=0,V=V+4|0;while((V|0)<(K|0));V=sa(7,4)|0,V|0&&(ps(te,v,1,tr,V,7,0,0)|0,ii(V))}for(Ke=0;;){Re=tr+(Ke<<3)|0,ke=S[Re>>2]|0,Re=S[Re+4>>2]|0;i:do if((ke|0)==0&(Re|0)==0)V=B,K=U;else{if(ue=Xd(ke|0,Re|0,oi|0,Zn|0)|0,te=Ae()|0,V=M+(ue<<3)|0,v=V,K=S[v>>2]|0,v=S[v+4>>2]|0,!((K|0)==0&(v|0)==0)){_e=0,Le=0;do{if((_e|0)>(Zn|0)|(_e|0)==(Zn|0)&Le>>>0>oi>>>0)break n;if((K|0)==(ke|0)&(v|0)==(Re|0)){V=B,K=U;break i}V=Ti(ue|0,te|0,1,0)|0,ue=YA(V|0,Ae()|0,oi|0,Zn|0)|0,te=Ae()|0,Le=Ti(Le|0,_e|0,1,0)|0,_e=Ae()|0,V=M+(ue<<3)|0,v=V,K=S[v>>2]|0,v=S[v+4>>2]|0}while(!((K|0)==0&(v|0)==0))}(ke|0)==0&(Re|0)==0?(V=B,K=U):(Qp(ke,Re,Jn)|0,kg(x,zr,Jn)|0&&(Le=Ti(B|0,U|0,1,0)|0,U=Ae()|0,_e=V,S[_e>>2]=ke,S[_e+4>>2]=Re,B=kt+(B<<3)|0,S[B>>2]=ke,S[B+4>>2]=Re,B=Le),V=B,K=U)}while(!1);if(Ke=Ke+1|0,Ke>>>0>=7)break;B=V,U=K}if(Et=Ti(Et|0,gt|0,1,0)|0,gt=Ae()|0,ot=Ti(ot|0,rt|0,1,0)|0,rt=Ae()|0,U=fi,B=S[U>>2]|0,U=S[U+4>>2]|0,(rt|0)<(U|0)|(rt|0)==(U|0)&ot>>>0<B>>>0)B=V,U=K;else break}if((U|0)>0|(U|0)==0&B>>>0>0){B=0,U=0;do rt=an+(B<<3)|0,S[rt>>2]=0,S[rt+4>>2]=0,B=Ti(B|0,U|0,1,0)|0,U=Ae()|0,rt=fi,ot=S[rt+4>>2]|0;while((U|0)<(ot|0)|((U|0)==(ot|0)?B>>>0<(S[rt>>2]|0)>>>0:0))}if(rt=fi,S[rt>>2]=V,S[rt+4>>2]=K,(K|0)>0|(K|0)==0&V>>>0>0)Ke=L,Et=Tn,gt=bn,ot=gn,rt=kt,L=je,Tn=E,gn=Un,je=Ke,E=Et,bn=Xn,Xn=gt,Un=ot,kt=an,an=rt;else break t}ii(Un),ii(Xn),ii(zr),E=1;break e}else E=V;while(!1);ii(zr),ii(L),ii(E),E=0}while(!1);return zr=E,me=nr,zr|0}function PA(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(ue=me,me=me+176|0,K=ue,(v|0)<1)return r0(E,0,0),te=0,me=ue,te|0;for(V=x,V=jt(S[V>>2]|0,S[V+4>>2]|0,52)|0,Ae()|0,r0(E,(v|0)>6?v:6,V&15),V=0;M=x+(V<<3)|0,M=zA(S[M>>2]|0,S[M+4>>2]|0,K)|0,!(M|0);){if(M=S[K>>2]|0,(M|0)>0){U=0;do B=K+8+(U<<4)|0,U=U+1|0,M=K+8+(((U|0)%(M|0)|0)<<4)|0,L=o0(E,M,B)|0,L?I1(E,L)|0:s0(E,B,M)|0,M=S[K>>2]|0;while((U|0)<(M|0))}if(V=V+1|0,(V|0)>=(v|0)){M=0,te=13;break}}return(te|0)==13?(me=ue,M|0):(Lh(E),te=M,me=ue,te|0)}function x1(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;if(B=me,me=me+32|0,M=B,L=B+16|0,x=PA(x,v,L)|0,x|0)return E=x,me=B,E|0;if(S[E>>2]=0,S[E+4>>2]=0,S[E+8>>2]=0,x=B1(L)|0,x|0)do{v=t0(E)|0;do Mh(v,x)|0,U=x+16|0,S[M>>2]=S[U>>2],S[M+4>>2]=S[U+4>>2],S[M+8>>2]=S[U+8>>2],S[M+12>>2]=S[U+12>>2],I1(L,x)|0,x=wu(L,M)|0;while(x|0);x=B1(L)|0}while(x|0);return Lh(L),x=Ug(E)|0,x?(VA(E),U=x,me=B,U|0):(U=0,me=B,U|0)}function Er(x){return x=x|0,x>>>0>121?(x=0,x|0):(x=S[7696+(x*28|0)+16>>2]|0,x|0)}function Sg(x){return x=x|0,(x|0)==4|(x|0)==117|0}function b1(x){return x=x|0,S[11120+((S[x>>2]|0)*216|0)+((S[x+4>>2]|0)*72|0)+((S[x+8>>2]|0)*24|0)+(S[x+12>>2]<<3)>>2]|0}function NA(x){return x=x|0,S[11120+((S[x>>2]|0)*216|0)+((S[x+4>>2]|0)*72|0)+((S[x+8>>2]|0)*24|0)+(S[x+12>>2]<<3)+4>>2]|0}function Tg(x,v){x=x|0,v=v|0,x=7696+(x*28|0)|0,S[v>>2]=S[x>>2],S[v+4>>2]=S[x+4>>2],S[v+8>>2]=S[x+8>>2],S[v+12>>2]=S[x+12>>2]}function BA(x,v){x=x|0,v=v|0;var E=0,M=0;if(v>>>0>20)return v=-1,v|0;do if((S[11120+(v*216|0)>>2]|0)!=(x|0))if((S[11120+(v*216|0)+8>>2]|0)!=(x|0))if((S[11120+(v*216|0)+16>>2]|0)!=(x|0))if((S[11120+(v*216|0)+24>>2]|0)!=(x|0))if((S[11120+(v*216|0)+32>>2]|0)!=(x|0))if((S[11120+(v*216|0)+40>>2]|0)!=(x|0))if((S[11120+(v*216|0)+48>>2]|0)!=(x|0))if((S[11120+(v*216|0)+56>>2]|0)!=(x|0))if((S[11120+(v*216|0)+64>>2]|0)!=(x|0))if((S[11120+(v*216|0)+72>>2]|0)!=(x|0))if((S[11120+(v*216|0)+80>>2]|0)!=(x|0))if((S[11120+(v*216|0)+88>>2]|0)!=(x|0))if((S[11120+(v*216|0)+96>>2]|0)!=(x|0))if((S[11120+(v*216|0)+104>>2]|0)!=(x|0))if((S[11120+(v*216|0)+112>>2]|0)!=(x|0))if((S[11120+(v*216|0)+120>>2]|0)!=(x|0))if((S[11120+(v*216|0)+128>>2]|0)!=(x|0))if((S[11120+(v*216|0)+136>>2]|0)==(x|0))x=2,E=1,M=2;else{if((S[11120+(v*216|0)+144>>2]|0)==(x|0)){x=0,E=2,M=0;break}if((S[11120+(v*216|0)+152>>2]|0)==(x|0)){x=0,E=2,M=1;break}if((S[11120+(v*216|0)+160>>2]|0)==(x|0)){x=0,E=2,M=2;break}if((S[11120+(v*216|0)+168>>2]|0)==(x|0)){x=1,E=2,M=0;break}if((S[11120+(v*216|0)+176>>2]|0)==(x|0)){x=1,E=2,M=1;break}if((S[11120+(v*216|0)+184>>2]|0)==(x|0)){x=1,E=2,M=2;break}if((S[11120+(v*216|0)+192>>2]|0)==(x|0)){x=2,E=2,M=0;break}if((S[11120+(v*216|0)+200>>2]|0)==(x|0)){x=2,E=2,M=1;break}if((S[11120+(v*216|0)+208>>2]|0)==(x|0)){x=2,E=2,M=2;break}else x=-1;return x|0}else x=2,E=1,M=1;else x=2,E=1,M=0;else x=1,E=1,M=2;else x=1,E=1,M=1;else x=1,E=1,M=0;else x=0,E=1,M=2;else x=0,E=1,M=1;else x=0,E=1,M=0;else x=2,E=0,M=2;else x=2,E=0,M=1;else x=2,E=0,M=0;else x=1,E=0,M=2;else x=1,E=0,M=1;else x=1,E=0,M=0;else x=0,E=0,M=2;else x=0,E=0,M=1;else x=0,E=0,M=0;while(!1);return v=S[11120+(v*216|0)+(E*72|0)+(x*24|0)+(M<<3)+4>>2]|0,v|0}function xh(x,v){return x=x|0,v=v|0,(S[7696+(x*28|0)+20>>2]|0)==(v|0)?(v=1,v|0):(v=(S[7696+(x*28|0)+24>>2]|0)==(v|0),v|0)}function xf(x,v){return x=x|0,v=v|0,S[848+(x*28|0)+(v<<2)>>2]|0}function zp(x,v){return x=x|0,v=v|0,(S[848+(x*28|0)>>2]|0)==(v|0)?(v=0,v|0):(S[848+(x*28|0)+4>>2]|0)==(v|0)?(v=1,v|0):(S[848+(x*28|0)+8>>2]|0)==(v|0)?(v=2,v|0):(S[848+(x*28|0)+12>>2]|0)==(v|0)?(v=3,v|0):(S[848+(x*28|0)+16>>2]|0)==(v|0)?(v=4,v|0):(S[848+(x*28|0)+20>>2]|0)==(v|0)?(v=5,v|0):((S[848+(x*28|0)+24>>2]|0)==(v|0)?6:7)|0}function Eg(){return 122}function _1(x){x=x|0;var v=0,E=0,M=0;v=0;do un(v|0,0,45)|0,M=Ae()|0|134225919,E=x+(v<<3)|0,S[E>>2]=-1,S[E+4>>2]=M,v=v+1|0;while((v|0)!=122);return 0}function Id(x){return x=x|0,+ve[x+16>>3]<+ve[x+24>>3]|0}function Hp(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;return E=+ve[v>>3],!(E>=+ve[x+8>>3])||!(E<=+ve[x>>3])?(v=0,v|0):(M=+ve[x+16>>3],E=+ve[x+24>>3],L=+ve[v+8>>3],v=L>=E,x=L<=M&1,M<E?v&&(x=1):v||(x=0),v=(x|0)!=0,v|0)}function Od(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0;Re=me,me=me+288|0,ue=Re+264|0,_e=Re+96|0,te=Re,V=te,K=V+96|0;do S[V>>2]=0,V=V+4|0;while((V|0)<(K|0));return v=Ng(v,te)|0,v|0?(ke=v,me=Re,ke|0):(K=te,te=S[K>>2]|0,K=S[K+4>>2]|0,Qp(te,K,ue)|0,zA(te,K,_e)|0,U=+$d(ue,_e+8|0),ve[ue>>3]=+ve[x>>3],K=ue+8|0,ve[K>>3]=+ve[x+16>>3],ve[_e>>3]=+ve[x+8>>3],te=_e+8|0,ve[te>>3]=+ve[x+24>>3],L=+$d(ue,_e),Et=+ve[K>>3]-+ve[te>>3],B=+si(+Et),Ke=+ve[ue>>3]-+ve[_e>>3],M=+si(+Ke),!(Et==0|Ke==0)&&(Et=+Nh(+B,+M),Et=+lt(+(L*L/+Cu(+(Et/+Cu(+B,+M)),3)/(U*(U*2.59807621135)*.8))),ve[Kn>>3]=Et,Le=~~Et>>>0,ke=+si(Et)>=1?Et>0?~~+Ye(+zn(Et/4294967296),4294967295)>>>0:~~+lt((Et-+(~~Et>>>0))/4294967296)>>>0:0,(S[Kn+4>>2]&2146435072|0)!=2146435072)?(_e=(Le|0)==0&(ke|0)==0,v=E,S[v>>2]=_e?1:Le,S[v+4>>2]=_e?0:ke,v=0):v=1,ke=v,me=Re,ke|0)}function bf(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0;te=me,me=me+288|0,U=te+264|0,V=te+96|0,K=te,L=K,B=L+96|0;do S[L>>2]=0,L=L+4|0;while((L|0)<(B|0));return E=Ng(E,K)|0,E|0?(M=E,me=te,M|0):(E=K,L=S[E>>2]|0,E=S[E+4>>2]|0,Qp(L,E,U)|0,zA(L,E,V)|0,ue=+$d(U,V+8|0),ue=+lt(+(+$d(x,v)/(ue*2))),ve[Kn>>3]=ue,E=~~ue>>>0,L=+si(ue)>=1?ue>0?~~+Ye(+zn(ue/4294967296),4294967295)>>>0:~~+lt((ue-+(~~ue>>>0))/4294967296)>>>0:0,(S[Kn+4>>2]&2146435072|0)==2146435072?(M=1,me=te,M|0):(K=(E|0)==0&(L|0)==0,S[M>>2]=K?1:E,S[M+4>>2]=K?0:L,M=0,me=te,M|0))}function S1(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0,S[x>>2]=v,S[x+4>>2]=E,S[x+8>>2]=M}function wg(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0;_e=v+8|0,S[_e>>2]=0,K=+ve[x>>3],U=+si(+K),te=+ve[x+8>>3],V=+si(+te)/.8660254037844386,U=U+V*.5,E=~~U,x=~~V,U=U-+(E|0),V=V-+(x|0);do if(U<.5)if(U<.3333333333333333)if(S[v>>2]=E,V<(U+1)*.5){S[v+4>>2]=x;break}else{x=x+1|0,S[v+4>>2]=x;break}else if(Le=1-U,x=(!(V<Le)&1)+x|0,S[v+4>>2]=x,Le<=V&V<U*2){E=E+1|0,S[v>>2]=E;break}else{S[v>>2]=E;break}else{if(!(U<.6666666666666666))if(E=E+1|0,S[v>>2]=E,V<U*.5){S[v+4>>2]=x;break}else{x=x+1|0,S[v+4>>2]=x;break}if(V<1-U){if(S[v+4>>2]=x,U*2+-1<V){S[v>>2]=E;break}}else x=x+1|0,S[v+4>>2]=x;E=E+1|0,S[v>>2]=E}while(!1);do if(K<0)if(x&1){ue=(x+1|0)/2|0,ue=bi(E|0,((E|0)<0)<<31>>31|0,ue|0,((ue|0)<0)<<31>>31|0)|0,E=~~(+(E|0)-((+(ue>>>0)+4294967296*+(Ae()|0))*2+1)),S[v>>2]=E;break}else{ue=(x|0)/2|0,ue=bi(E|0,((E|0)<0)<<31>>31|0,ue|0,((ue|0)<0)<<31>>31|0)|0,E=~~(+(E|0)-(+(ue>>>0)+4294967296*+(Ae()|0))*2),S[v>>2]=E;break}while(!1);ue=v+4|0,te<0&&(E=E-((x<<1|1|0)/2|0)|0,S[v>>2]=E,x=0-x|0,S[ue>>2]=x),M=x-E|0,(E|0)<0?(L=0-E|0,S[ue>>2]=M,S[_e>>2]=L,S[v>>2]=0,x=M,E=0):L=0,(x|0)<0&&(E=E-x|0,S[v>>2]=E,L=L-x|0,S[_e>>2]=L,S[ue>>2]=0,x=0),B=E-L|0,M=x-L|0,(L|0)<0&&(S[v>>2]=B,S[ue>>2]=M,S[_e>>2]=0,x=M,E=B,L=0),M=(x|0)<(E|0)?x:E,M=(L|0)<(M|0)?L:M,!((M|0)<=0)&&(S[v>>2]=E-M,S[ue>>2]=x-M,S[_e>>2]=L-M)}function ko(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0;v=S[x>>2]|0,U=x+4|0,E=S[U>>2]|0,(v|0)<0&&(E=E-v|0,S[U>>2]=E,B=x+8|0,S[B>>2]=(S[B>>2]|0)-v,S[x>>2]=0,v=0),(E|0)<0?(v=v-E|0,S[x>>2]=v,B=x+8|0,L=(S[B>>2]|0)-E|0,S[B>>2]=L,S[U>>2]=0,E=0):(L=x+8|0,B=L,L=S[L>>2]|0),(L|0)<0&&(v=v-L|0,S[x>>2]=v,E=E-L|0,S[U>>2]=E,S[B>>2]=0,L=0),M=(E|0)<(v|0)?E:v,M=(L|0)<(M|0)?L:M,!((M|0)<=0)&&(S[x>>2]=v-M,S[U>>2]=E-M,S[B>>2]=L-M)}function sl(x,v){x=x|0,v=v|0;var E=0,M=0;M=S[x+8>>2]|0,E=+((S[x+4>>2]|0)-M|0),ve[v>>3]=+((S[x>>2]|0)-M|0)-E*.5,ve[v+8>>3]=E*.8660254037844386}function Js(x,v,E){x=x|0,v=v|0,E=E|0,S[E>>2]=(S[v>>2]|0)+(S[x>>2]|0),S[E+4>>2]=(S[v+4>>2]|0)+(S[x+4>>2]|0),S[E+8>>2]=(S[v+8>>2]|0)+(S[x+8>>2]|0)}function Fd(x,v,E){x=x|0,v=v|0,E=E|0,S[E>>2]=(S[x>>2]|0)-(S[v>>2]|0),S[E+4>>2]=(S[x+4>>2]|0)-(S[v+4>>2]|0),S[E+8>>2]=(S[x+8>>2]|0)-(S[v+8>>2]|0)}function Ta(x,v){x=x|0,v=v|0;var E=0,M=0;E=Je(S[x>>2]|0,v)|0,S[x>>2]=E,E=x+4|0,M=Je(S[E>>2]|0,v)|0,S[E>>2]=M,x=x+8|0,v=Je(S[x>>2]|0,v)|0,S[x>>2]=v}function Ic(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;U=S[x>>2]|0,V=(U|0)<0,M=(S[x+4>>2]|0)-(V?U:0)|0,B=(M|0)<0,L=(B?0-M|0:0)+((S[x+8>>2]|0)-(V?U:0))|0,E=(L|0)<0,x=E?0:L,v=(B?0:M)-(E?L:0)|0,L=(V?0:U)-(B?M:0)-(E?L:0)|0,E=(v|0)<(L|0)?v:L,E=(x|0)<(E|0)?x:E,M=(E|0)>0,x=x-(M?E:0)|0,v=v-(M?E:0)|0;e:do switch(L-(M?E:0)|0){case 0:switch(v|0){case 0:return V=x|0?(x|0)==1?1:7:0,V|0;case 1:return V=x|0?(x|0)==1?3:7:2,V|0;default:break e}case 1:switch(v|0){case 0:return V=x|0?(x|0)==1?5:7:4,V|0;case 1:{if(!x)x=6;else break e;return x|0}default:break e}}while(!1);return V=7,V|0}function Vp(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;U=x+8|0,L=S[U>>2]|0,B=(S[x>>2]|0)-L|0,V=x+4|0,L=(S[V>>2]|0)-L|0;do if(B>>>0>715827881|L>>>0>715827881){if(E=(B|0)>0,E){if((2147483647-B|0)<(B|0)||(2147483647-(B<<1)|0)<(B|0))return V=1,V|0}else if((-2147483648-B|0)>(B|0)||(-2147483648-(B<<1)|0)>(B|0))return V=1,V|0;if(v=B*3|0,(L|0)>0){if((2147483647-L|0)<(L|0))return V=1,V|0}else if((-2147483648-L|0)>(L|0))return V=1,V|0;if(M=L<<1,(B|0)>-1){if((v|-2147483648|0)>=(L|0))return V=1,V|0}else if((v^-2147483648|0)<(L|0))return V=1,V|0;if(E){if((2147483647-B|0)<(M|0))v=1;else{E=M;break}return v|0}else{if((-2147483648-B|0)>(M|0))v=1;else{E=M;break}return v|0}}else E=L<<1,v=B*3|0;while(!1);M=Uc(+(v-L|0)/7)|0,S[x>>2]=M,L=Uc(+(E+B|0)/7)|0,S[V>>2]=L,S[U>>2]=0,E=(L|0)<(M|0),v=E?M:L,E=E?L:M;do if((E|0)<0){if((v|0)>0){if((v|-2147483648|0)<(E|0)&((E|0)!=-2147483648&(2147483647-v|0)>=(E|0)))break;en(23313,22444,355,22455)}if((E|0)==-2147483648|(-2147483648-v|0)>(E|0)&&en(23313,22444,355,22455),(v|0)>-1){if((v|-2147483648|0)<(E|0))break;en(23313,22444,355,22455)}else{if((v^-2147483648|0)>=(E|0))break;en(23313,22444,355,22455)}}while(!1);return v=L-M|0,(M|0)<0?(E=0-M|0,S[V>>2]=v,S[U>>2]=E,S[x>>2]=0,M=0):(v=L,E=0),(v|0)<0&&(M=M-v|0,S[x>>2]=M,E=E-v|0,S[U>>2]=E,S[V>>2]=0,v=0),B=M-E|0,L=v-E|0,(E|0)<0?(S[x>>2]=B,S[V>>2]=L,S[U>>2]=0,v=L,L=B,E=0):L=M,M=(v|0)<(L|0)?v:L,M=(E|0)<(M|0)?E:M,(M|0)<=0?(V=0,V|0):(S[x>>2]=L-M,S[V>>2]=v-M,S[U>>2]=E-M,V=0,V|0)}function qp(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;U=x+8|0,L=S[U>>2]|0,B=(S[x>>2]|0)-L|0,V=x+4|0,L=(S[V>>2]|0)-L|0;do if(B>>>0>715827881|L>>>0>715827881){if(E=(B|0)>0,E){if((2147483647-B|0)<(B|0))return V=1,V|0}else if((-2147483648-B|0)>(B|0))return V=1,V|0;if(v=B<<1,(L|0)>0){if((2147483647-L|0)<(L|0)||(2147483647-(L<<1)|0)<(L|0))return V=1,V|0}else if((-2147483648-L|0)>(L|0)||(-2147483648-(L<<1)|0)>(L|0))return V=1,V|0;if(M=L*3|0,E){if((2147483647-v|0)<(L|0))return V=1,V|0}else if((-2147483648-v|0)>(L|0))return V=1,V|0;if((L|0)>-1){if((M|-2147483648|0)<(B|0)){E=M;break}else v=1;return v|0}else{if((M^-2147483648|0)<(B|0))v=1;else{E=M;break}return v|0}}else E=L*3|0,v=B<<1;while(!1);M=Uc(+(v+L|0)/7)|0,S[x>>2]=M,L=Uc(+(E-B|0)/7)|0,S[V>>2]=L,S[U>>2]=0,E=(L|0)<(M|0),v=E?M:L,E=E?L:M;do if((E|0)<0){if((v|0)>0){if((v|-2147483648|0)<(E|0)&((E|0)!=-2147483648&(2147483647-v|0)>=(E|0)))break;en(23313,22444,404,22469)}if((E|0)==-2147483648|(-2147483648-v|0)>(E|0)&&en(23313,22444,404,22469),(v|0)>-1){if((v|-2147483648|0)<(E|0))break;en(23313,22444,404,22469)}else{if((v^-2147483648|0)>=(E|0))break;en(23313,22444,404,22469)}}while(!1);return v=L-M|0,(M|0)<0?(E=0-M|0,S[V>>2]=v,S[U>>2]=E,S[x>>2]=0,M=0):(v=L,E=0),(v|0)<0&&(M=M-v|0,S[x>>2]=M,E=E-v|0,S[U>>2]=E,S[V>>2]=0,v=0),B=M-E|0,L=v-E|0,(E|0)<0?(S[x>>2]=B,S[V>>2]=L,S[U>>2]=0,v=L,L=B,E=0):L=M,M=(v|0)<(L|0)?v:L,M=(E|0)<(M|0)?E:M,(M|0)<=0?(V=0,V|0):(S[x>>2]=L-M,S[V>>2]=v-M,S[U>>2]=E-M,V=0,V|0)}function bb(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;U=x+8|0,E=S[U>>2]|0,v=(S[x>>2]|0)-E|0,V=x+4|0,E=(S[V>>2]|0)-E|0,M=Uc(+((v*3|0)-E|0)/7)|0,S[x>>2]=M,v=Uc(+((E<<1)+v|0)/7)|0,S[V>>2]=v,S[U>>2]=0,E=v-M|0,(M|0)<0?(B=0-M|0,S[V>>2]=E,S[U>>2]=B,S[x>>2]=0,v=E,M=0,E=B):E=0,(v|0)<0&&(M=M-v|0,S[x>>2]=M,E=E-v|0,S[U>>2]=E,S[V>>2]=0,v=0),B=M-E|0,L=v-E|0,(E|0)<0?(S[x>>2]=B,S[V>>2]=L,S[U>>2]=0,v=L,L=B,E=0):L=M,M=(v|0)<(L|0)?v:L,M=(E|0)<(M|0)?E:M,!((M|0)<=0)&&(S[x>>2]=L-M,S[V>>2]=v-M,S[U>>2]=E-M)}function xu(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;U=x+8|0,E=S[U>>2]|0,v=(S[x>>2]|0)-E|0,V=x+4|0,E=(S[V>>2]|0)-E|0,M=Uc(+((v<<1)+E|0)/7)|0,S[x>>2]=M,v=Uc(+((E*3|0)-v|0)/7)|0,S[V>>2]=v,S[U>>2]=0,E=v-M|0,(M|0)<0?(B=0-M|0,S[V>>2]=E,S[U>>2]=B,S[x>>2]=0,v=E,M=0,E=B):E=0,(v|0)<0&&(M=M-v|0,S[x>>2]=M,E=E-v|0,S[U>>2]=E,S[V>>2]=0,v=0),B=M-E|0,L=v-E|0,(E|0)<0?(S[x>>2]=B,S[V>>2]=L,S[U>>2]=0,v=L,L=B,E=0):L=M,M=(v|0)<(L|0)?v:L,M=(E|0)<(M|0)?E:M,!((M|0)<=0)&&(S[x>>2]=L-M,S[V>>2]=v-M,S[U>>2]=E-M)}function _f(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;v=S[x>>2]|0,U=x+4|0,E=S[U>>2]|0,V=x+8|0,M=S[V>>2]|0,L=E+(v*3|0)|0,S[x>>2]=L,E=M+(E*3|0)|0,S[U>>2]=E,v=(M*3|0)+v|0,S[V>>2]=v,M=E-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=M,S[V>>2]=v,S[x>>2]=0,E=M,M=0):M=L,(E|0)<0&&(M=M-E|0,S[x>>2]=M,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=M-v|0,L=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=L,S[V>>2]=0,M=B,v=0):L=E,E=(L|0)<(M|0)?L:M,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=M-E,S[U>>2]=L-E,S[V>>2]=v-E)}function Ql(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;L=S[x>>2]|0,U=x+4|0,v=S[U>>2]|0,V=x+8|0,E=S[V>>2]|0,M=(v*3|0)+L|0,L=E+(L*3|0)|0,S[x>>2]=L,S[U>>2]=M,v=(E*3|0)+v|0,S[V>>2]=v,E=M-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=E,S[V>>2]=v,S[x>>2]=0,L=0):E=M,(E|0)<0&&(L=L-E|0,S[x>>2]=L,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=L-v|0,M=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=M,S[V>>2]=0,L=B,v=0):M=E,E=(M|0)<(L|0)?M:L,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=L-E,S[U>>2]=M-E,S[V>>2]=v-E)}function Ud(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0;(v+-1|0)>>>0>=6||(L=(S[15440+(v*12|0)>>2]|0)+(S[x>>2]|0)|0,S[x>>2]=L,V=x+4|0,M=(S[15440+(v*12|0)+4>>2]|0)+(S[V>>2]|0)|0,S[V>>2]=M,U=x+8|0,v=(S[15440+(v*12|0)+8>>2]|0)+(S[U>>2]|0)|0,S[U>>2]=v,E=M-L|0,(L|0)<0?(v=v-L|0,S[V>>2]=E,S[U>>2]=v,S[x>>2]=0,M=0):(E=M,M=L),(E|0)<0&&(M=M-E|0,S[x>>2]=M,v=v-E|0,S[U>>2]=v,S[V>>2]=0,E=0),B=M-v|0,L=E-v|0,(v|0)<0?(S[x>>2]=B,S[V>>2]=L,S[U>>2]=0,M=B,v=0):L=E,E=(L|0)<(M|0)?L:M,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=M-E,S[V>>2]=L-E,S[U>>2]=v-E))}function Mg(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;L=S[x>>2]|0,U=x+4|0,v=S[U>>2]|0,V=x+8|0,E=S[V>>2]|0,M=v+L|0,L=E+L|0,S[x>>2]=L,S[U>>2]=M,v=E+v|0,S[V>>2]=v,E=M-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=E,S[V>>2]=v,S[x>>2]=0,M=0):(E=M,M=L),(E|0)<0&&(M=M-E|0,S[x>>2]=M,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=M-v|0,L=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=L,S[V>>2]=0,M=B,v=0):L=E,E=(L|0)<(M|0)?L:M,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=M-E,S[U>>2]=L-E,S[V>>2]=v-E)}function IA(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;v=S[x>>2]|0,U=x+4|0,M=S[U>>2]|0,V=x+8|0,E=S[V>>2]|0,L=M+v|0,S[x>>2]=L,M=E+M|0,S[U>>2]=M,v=E+v|0,S[V>>2]=v,E=M-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=E,S[V>>2]=v,S[x>>2]=0,M=0):(E=M,M=L),(E|0)<0&&(M=M-E|0,S[x>>2]=M,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=M-v|0,L=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=L,S[V>>2]=0,M=B,v=0):L=E,E=(L|0)<(M|0)?L:M,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=M-E,S[U>>2]=L-E,S[V>>2]=v-E)}function kd(x){switch(x=x|0,x|0){case 1:{x=5;break}case 5:{x=4;break}case 4:{x=6;break}case 6:{x=2;break}case 2:{x=3;break}case 3:{x=1;break}}return x|0}function ms(x){switch(x=x|0,x|0){case 1:{x=3;break}case 3:{x=2;break}case 2:{x=6;break}case 6:{x=4;break}case 4:{x=5;break}case 5:{x=1;break}}return x|0}function OA(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;v=S[x>>2]|0,U=x+4|0,E=S[U>>2]|0,V=x+8|0,M=S[V>>2]|0,L=E+(v<<1)|0,S[x>>2]=L,E=M+(E<<1)|0,S[U>>2]=E,v=(M<<1)+v|0,S[V>>2]=v,M=E-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=M,S[V>>2]=v,S[x>>2]=0,E=M,M=0):M=L,(E|0)<0&&(M=M-E|0,S[x>>2]=M,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=M-v|0,L=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=L,S[V>>2]=0,M=B,v=0):L=E,E=(L|0)<(M|0)?L:M,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=M-E,S[U>>2]=L-E,S[V>>2]=v-E)}function T1(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;L=S[x>>2]|0,U=x+4|0,v=S[U>>2]|0,V=x+8|0,E=S[V>>2]|0,M=(v<<1)+L|0,L=E+(L<<1)|0,S[x>>2]=L,S[U>>2]=M,v=(E<<1)+v|0,S[V>>2]=v,E=M-L|0,(L|0)<0?(v=v-L|0,S[U>>2]=E,S[V>>2]=v,S[x>>2]=0,L=0):E=M,(E|0)<0&&(L=L-E|0,S[x>>2]=L,v=v-E|0,S[V>>2]=v,S[U>>2]=0,E=0),B=L-v|0,M=E-v|0,(v|0)<0?(S[x>>2]=B,S[U>>2]=M,S[V>>2]=0,L=B,v=0):M=E,E=(M|0)<(L|0)?M:L,E=(v|0)<(E|0)?v:E,!((E|0)<=0)&&(S[x>>2]=L-E,S[U>>2]=M-E,S[V>>2]=v-E)}function Cg(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0;return U=(S[x>>2]|0)-(S[v>>2]|0)|0,V=(U|0)<0,M=(S[x+4>>2]|0)-(S[v+4>>2]|0)-(V?U:0)|0,B=(M|0)<0,L=(V?0-U|0:0)+(S[x+8>>2]|0)-(S[v+8>>2]|0)+(B?0-M|0:0)|0,x=(L|0)<0,v=x?0:L,E=(B?0:M)-(x?L:0)|0,L=(V?0:U)-(B?M:0)-(x?L:0)|0,x=(E|0)<(L|0)?E:L,x=(v|0)<(x|0)?v:x,M=(x|0)>0,v=v-(M?x:0)|0,E=E-(M?x:0)|0,x=L-(M?x:0)|0,x=(x|0)>-1?x:0-x|0,E=(E|0)>-1?E:0-E|0,v=(v|0)>-1?v:0-v|0,v=(E|0)>(v|0)?E:v,((x|0)>(v|0)?x:v)|0}function _b(x,v){x=x|0,v=v|0;var E=0;E=S[x+8>>2]|0,S[v>>2]=(S[x>>2]|0)-E,S[v+4>>2]=(S[x+4>>2]|0)-E}function Sb(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0;M=S[x>>2]|0,S[v>>2]=M,L=S[x+4>>2]|0,U=v+4|0,S[U>>2]=L,V=v+8|0,S[V>>2]=0,E=(L|0)<(M|0),x=E?M:L,E=E?L:M;do if((E|0)<0){if((x|0)>0){if((x|-2147483648|0)<(E|0)&((E|0)!=-2147483648&(2147483647-x|0)>=(E|0)))break;return x=1,x|0}if((E|0)==-2147483648|(-2147483648-x|0)>(E|0))return v=1,v|0;if((x|0)>-1){if((x|-2147483648|0)<(E|0))break;return x=1,x|0}else{if((x^-2147483648|0)<(E|0))x=1;else break;return x|0}}while(!1);return x=L-M|0,(M|0)<0?(E=0-M|0,S[U>>2]=x,S[V>>2]=E,S[v>>2]=0,M=0):(x=L,E=0),(x|0)<0&&(M=M-x|0,S[v>>2]=M,E=E-x|0,S[V>>2]=E,S[U>>2]=0,x=0),B=M-E|0,L=x-E|0,(E|0)<0?(S[v>>2]=B,S[U>>2]=L,S[V>>2]=0,x=L,L=B,E=0):L=M,M=(x|0)<(L|0)?x:L,M=(E|0)<(M|0)?E:M,(M|0)<=0?(v=0,v|0):(S[v>>2]=L-M,S[U>>2]=x-M,S[V>>2]=E-M,v=0,v|0)}function $p(x){x=x|0;var v=0,E=0,M=0,L=0;v=x+8|0,L=S[v>>2]|0,E=L-(S[x>>2]|0)|0,S[x>>2]=E,M=x+4|0,x=(S[M>>2]|0)-L|0,S[M>>2]=x,S[v>>2]=0-(x+E)}function Rg(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;E=S[x>>2]|0,v=0-E|0,S[x>>2]=v,U=x+8|0,S[U>>2]=0,V=x+4|0,M=S[V>>2]|0,L=M+E|0,(E|0)>0?(S[V>>2]=L,S[U>>2]=E,S[x>>2]=0,v=0,M=L):E=0,(M|0)<0?(B=v-M|0,S[x>>2]=B,E=E-M|0,S[U>>2]=E,S[V>>2]=0,L=B-E|0,v=0-E|0,(E|0)<0?(S[x>>2]=L,S[V>>2]=v,S[U>>2]=0,M=v,E=0):(M=0,L=B)):L=v,v=(M|0)<(L|0)?M:L,v=(E|0)<(v|0)?E:v,!((v|0)<=0)&&(S[x>>2]=L-v,S[V>>2]=M-v,S[U>>2]=E-v)}function Tb(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0;if(_e=me,me=me+64|0,ue=_e,V=_e+56|0,!(!0&(v&2013265920|0)==134217728&(!0&(M&2013265920|0)==134217728)))return L=5,me=_e,L|0;if((x|0)==(E|0)&(v|0)==(M|0))return S[L>>2]=0,L=0,me=_e,L|0;if(U=jt(x|0,v|0,52)|0,Ae()|0,U=U&15,te=jt(E|0,M|0,52)|0,Ae()|0,(U|0)!=(te&15|0))return L=12,me=_e,L|0;if(B=U+-1|0,U>>>0>1){bu(x,v,B,ue)|0,bu(E,M,B,V)|0,te=ue,K=S[te>>2]|0,te=S[te+4>>2]|0;e:do if((K|0)==(S[V>>2]|0)&&(te|0)==(S[V+4>>2]|0)){U=(U^15)*3|0,B=jt(x|0,v|0,U|0)|0,Ae()|0,B=B&7,U=jt(E|0,M|0,U|0)|0,Ae()|0,U=U&7;do if((B|0)==0|(U|0)==0)S[L>>2]=1,B=0;else if((B|0)==7)B=5;else{if((B|0)==1|(U|0)==1&&wr(K,te)|0){B=5;break}if((S[15536+(B<<2)>>2]|0)!=(U|0)&&(S[15568+(B<<2)>>2]|0)!=(U|0))break e;S[L>>2]=1,B=0}while(!1);return L=B,me=_e,L|0}while(!1)}B=ue,U=B+56|0;do S[B>>2]=0,B=B+4|0;while((B|0)<(U|0));return ra(x,v,1,ue)|0,v=ue,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0))&&(v=ue+8|0,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0)))&&(v=ue+16|0,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0)))&&(v=ue+24|0,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0)))&&(v=ue+32|0,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0)))&&(v=ue+40|0,!((S[v>>2]|0)==(E|0)&&(S[v+4>>2]|0)==(M|0)))?(B=ue+48|0,B=((S[B>>2]|0)==(E|0)?(S[B+4>>2]|0)==(M|0):0)&1):B=1,S[L>>2]=B,L=0,me=_e,L|0}function Eb(x,v,E,M,L){return x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,E=As(x,v,E,M)|0,(E|0)==7?(L=11,L|0):(M=un(E|0,0,56)|0,v=v&-2130706433|(Ae()|0)|268435456,S[L>>2]=x|M,S[L+4>>2]=v,L=0,L|0)}function wb(x,v,E){return x=x|0,v=v|0,E=E|0,!0&(v&2013265920|0)==268435456?(S[E>>2]=x,S[E+4>>2]=v&-2130706433|134217728,E=0,E|0):(E=6,E|0)}function E1(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;return L=me,me=me+16|0,M=L,S[M>>2]=0,!0&(v&2013265920|0)==268435456?(B=jt(x|0,v|0,56)|0,Ae()|0,M=lr(x,v&-2130706433|134217728,B&7,M,E)|0,me=L,M|0):(M=6,me=L,M|0)}function FA(x,v){x=x|0,v=v|0;var E=0;switch(E=jt(x|0,v|0,56)|0,Ae()|0,E&7){case 0:case 7:return E=0,E|0}return E=v&-2130706433|134217728,!(!0&(v&2013265920|0)==268435456)||!0&(v&117440512|0)==16777216&(wr(x,E)|0)!=0?(E=0,E|0):(E=Hd(x,E)|0,E|0)}function Mb(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;return L=me,me=me+16|0,M=L,!0&(v&2013265920|0)==268435456?(B=v&-2130706433|134217728,U=E,S[U>>2]=x,S[U+4>>2]=B,S[M>>2]=0,v=jt(x|0,v|0,56)|0,Ae()|0,M=lr(x,B,v&7,M,E+8|0)|0,me=L,M|0):(M=6,me=L,M|0)}function w1(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0;return L=(wr(x,v)|0)==0,v=v&-2130706433,M=E,S[M>>2]=L?x:0,S[M+4>>2]=L?v|285212672:0,M=E+8|0,S[M>>2]=x,S[M+4>>2]=v|301989888,M=E+16|0,S[M>>2]=x,S[M+4>>2]=v|318767104,M=E+24|0,S[M>>2]=x,S[M+4>>2]=v|335544320,M=E+32|0,S[M>>2]=x,S[M+4>>2]=v|352321536,E=E+40|0,S[E>>2]=x,S[E+4>>2]=v|369098752,0}function jp(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;return U=me,me=me+16|0,L=U,B=v&-2130706433|134217728,!0&(v&2013265920|0)==268435456?(M=jt(x|0,v|0,56)|0,Ae()|0,M=Dh(x,B,M&7)|0,(M|0)==-1?(S[E>>2]=0,B=6,me=U,B|0):(Lr(x,B,L)|0&&en(23313,22484,282,22499),v=jt(x|0,v|0,52)|0,Ae()|0,v=v&15,wr(x,B)|0?UA(L,v,M,2,E):Oc(L,v,M,2,E),B=0,me=U,B|0)):(B=6,me=U,B|0)}function Dg(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0;M=me,me=me+16|0,L=M,Cb(x,v,E,L),wg(L,E+4|0),me=M}function Cb(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0;if(V=me,me=me+16|0,K=V,M1(x,E,K),B=+vu(+(1-+ve[K>>3]*.5)),B<1e-16){S[M>>2]=0,S[M+4>>2]=0,S[M+8>>2]=0,S[M+12>>2]=0,me=V;return}if(K=S[E>>2]|0,L=+ve[15920+(K*24|0)>>3],L=+qd(L-+qd(+jd(15600+(K<<4)|0,x))),qa(v)|0?U=+qd(L+-.3334731722518321):U=L,L=+Xs(+B)/.381966011250105,(v|0)>0){x=0;do L=L*2.6457513110645907,x=x+1|0;while((x|0)!=(v|0))}B=+pr(+U)*L,ve[M>>3]=B,U=+xi(+U)*L,ve[M+8>>3]=U,me=V}function M1(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;if(B=me,me=me+32|0,L=B,WA(x,L),S[v>>2]=0,ve[E>>3]=5,M=+Is(16400,L),M<+ve[E>>3]&&(S[v>>2]=0,ve[E>>3]=M),M=+Is(16424,L),M<+ve[E>>3]&&(S[v>>2]=1,ve[E>>3]=M),M=+Is(16448,L),M<+ve[E>>3]&&(S[v>>2]=2,ve[E>>3]=M),M=+Is(16472,L),M<+ve[E>>3]&&(S[v>>2]=3,ve[E>>3]=M),M=+Is(16496,L),M<+ve[E>>3]&&(S[v>>2]=4,ve[E>>3]=M),M=+Is(16520,L),M<+ve[E>>3]&&(S[v>>2]=5,ve[E>>3]=M),M=+Is(16544,L),M<+ve[E>>3]&&(S[v>>2]=6,ve[E>>3]=M),M=+Is(16568,L),M<+ve[E>>3]&&(S[v>>2]=7,ve[E>>3]=M),M=+Is(16592,L),M<+ve[E>>3]&&(S[v>>2]=8,ve[E>>3]=M),M=+Is(16616,L),M<+ve[E>>3]&&(S[v>>2]=9,ve[E>>3]=M),M=+Is(16640,L),M<+ve[E>>3]&&(S[v>>2]=10,ve[E>>3]=M),M=+Is(16664,L),M<+ve[E>>3]&&(S[v>>2]=11,ve[E>>3]=M),M=+Is(16688,L),M<+ve[E>>3]&&(S[v>>2]=12,ve[E>>3]=M),M=+Is(16712,L),M<+ve[E>>3]&&(S[v>>2]=13,ve[E>>3]=M),M=+Is(16736,L),M<+ve[E>>3]&&(S[v>>2]=14,ve[E>>3]=M),M=+Is(16760,L),M<+ve[E>>3]&&(S[v>>2]=15,ve[E>>3]=M),M=+Is(16784,L),M<+ve[E>>3]&&(S[v>>2]=16,ve[E>>3]=M),M=+Is(16808,L),M<+ve[E>>3]&&(S[v>>2]=17,ve[E>>3]=M),M=+Is(16832,L),M<+ve[E>>3]&&(S[v>>2]=18,ve[E>>3]=M),M=+Is(16856,L),!(M<+ve[E>>3])){me=B;return}S[v>>2]=19,ve[E>>3]=M,me=B}function Wp(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0;if(B=+Tu(x),B<1e-16){v=15600+(v<<4)|0,S[L>>2]=S[v>>2],S[L+4>>2]=S[v+4>>2],S[L+8>>2]=S[v+8>>2],S[L+12>>2]=S[v+12>>2];return}if(U=+Ge(+ +ve[x+8>>3],+ +ve[x>>3]),(E|0)>0){x=0;do B=B/2.6457513110645907,x=x+1|0;while((x|0)!=(E|0))}M?(B=B/3,E=(qa(E)|0)==0,B=+ye(+((E?B:B/2.6457513110645907)*.381966011250105))):(B=+ye(+(B*.381966011250105)),qa(E)|0&&(U=+qd(U+.3334731722518321))),L1(15600+(v<<4)|0,+qd(+ve[15920+(v*24|0)>>3]-U),B,L)}function Sf(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0;M=me,me=me+16|0,L=M,sl(x+4|0,L),Wp(L,S[x>>2]|0,v,0,E),me=M}function UA(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0,Un=0,Xn=0,bn=0,oi=0,Zn=0,fi=0,tr=0,Jn=0;if(fi=me,me=me+272|0,B=fi+256|0,ot=fi+240|0,bn=fi,oi=fi+224|0,Zn=fi+208|0,rt=fi+176|0,je=fi+160|0,gn=fi+192|0,Tn=fi+144|0,an=fi+128|0,kt=fi+112|0,Un=fi+96|0,Xn=fi+80|0,S[B>>2]=v,S[ot>>2]=S[x>>2],S[ot+4>>2]=S[x+4>>2],S[ot+8>>2]=S[x+8>>2],S[ot+12>>2]=S[x+12>>2],Rb(ot,B,bn),S[L>>2]=0,ot=M+E+((M|0)==5&1)|0,(ot|0)<=(E|0)){me=fi;return}K=S[B>>2]|0,te=oi+4|0,ue=rt+4|0,_e=E+5|0,Le=16880+(K<<2)|0,ke=16960+(K<<2)|0,Re=an+8|0,Ke=kt+8|0,Et=Un+8|0,gt=Zn+4|0,V=E;e:for(;;){U=bn+(((V|0)%5|0)<<4)|0,S[Zn>>2]=S[U>>2],S[Zn+4>>2]=S[U+4>>2],S[Zn+8>>2]=S[U+8>>2],S[Zn+12>>2]=S[U+12>>2];do;while((Gd(Zn,K,0,1)|0)==2);if((V|0)>(E|0)&(qa(v)|0)!=0){if(S[rt>>2]=S[Zn>>2],S[rt+4>>2]=S[Zn+4>>2],S[rt+8>>2]=S[Zn+8>>2],S[rt+12>>2]=S[Zn+12>>2],sl(te,je),M=S[rt>>2]|0,B=S[17040+(M*80|0)+(S[oi>>2]<<2)>>2]|0,S[rt>>2]=S[18640+(M*80|0)+(B*20|0)>>2],U=S[18640+(M*80|0)+(B*20|0)+16>>2]|0,(U|0)>0){x=0;do Mg(ue),x=x+1|0;while((x|0)<(U|0))}switch(U=18640+(M*80|0)+(B*20|0)+4|0,S[gn>>2]=S[U>>2],S[gn+4>>2]=S[U+4>>2],S[gn+8>>2]=S[U+8>>2],Ta(gn,(S[Le>>2]|0)*3|0),Js(ue,gn,ue),ko(ue),sl(ue,Tn),tr=+(S[ke>>2]|0),ve[an>>3]=tr*3,ve[Re>>3]=0,Jn=tr*-1.5,ve[kt>>3]=Jn,ve[Ke>>3]=tr*2.598076211353316,ve[Un>>3]=Jn,ve[Et>>3]=tr*-2.598076211353316,S[17040+((S[rt>>2]|0)*80|0)+(S[Zn>>2]<<2)>>2]|0){case 1:{x=kt,M=an;break}case 3:{x=Un,M=kt;break}case 2:{x=an,M=Un;break}default:{x=12;break e}}Eu(je,Tn,M,x,Xn),Wp(Xn,S[rt>>2]|0,K,1,L+8+(S[L>>2]<<4)|0),S[L>>2]=(S[L>>2]|0)+1}if((V|0)<(_e|0)&&(sl(gt,rt),Wp(rt,S[Zn>>2]|0,K,1,L+8+(S[L>>2]<<4)|0),S[L>>2]=(S[L>>2]|0)+1),S[oi>>2]=S[Zn>>2],S[oi+4>>2]=S[Zn+4>>2],S[oi+8>>2]=S[Zn+8>>2],S[oi+12>>2]=S[Zn+12>>2],V=V+1|0,(V|0)>=(ot|0)){x=3;break}}if((x|0)==3){me=fi;return}else(x|0)==12&&en(22522,22569,571,22579)}function Rb(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0;K=me,me=me+128|0,M=K+64|0,L=K,B=M,U=20240,V=B+60|0;do S[B>>2]=S[U>>2],B=B+4|0,U=U+4|0;while((B|0)<(V|0));B=L,U=20304,V=B+60|0;do S[B>>2]=S[U>>2],B=B+4|0,U=U+4|0;while((B|0)<(V|0));V=(qa(S[v>>2]|0)|0)==0,M=V?M:L,L=x+4|0,OA(L),T1(L),qa(S[v>>2]|0)|0&&(Ql(L),S[v>>2]=(S[v>>2]|0)+1),S[E>>2]=S[x>>2],v=E+4|0,Js(L,M,v),ko(v),S[E+16>>2]=S[x>>2],v=E+20|0,Js(L,M+12|0,v),ko(v),S[E+32>>2]=S[x>>2],v=E+36|0,Js(L,M+24|0,v),ko(v),S[E+48>>2]=S[x>>2],v=E+52|0,Js(L,M+36|0,v),ko(v),S[E+64>>2]=S[x>>2],E=E+68|0,Js(L,M+48|0,E),ko(E),me=K}function Gd(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0;if(Re=me,me=me+32|0,Le=Re+12|0,V=Re,ke=x+4|0,_e=S[16960+(v<<2)>>2]|0,ue=(M|0)!=0,_e=ue?_e*3|0:_e,L=S[ke>>2]|0,te=x+8|0,U=S[te>>2]|0,ue){if(B=x+12|0,M=S[B>>2]|0,L=U+L+M|0,(L|0)==(_e|0))return ke=1,me=Re,ke|0;K=B}else K=x+12|0,M=S[K>>2]|0,L=U+L+M|0;if((L|0)<=(_e|0))return ke=0,me=Re,ke|0;do if((M|0)>0){if(M=S[x>>2]|0,(U|0)>0){B=18640+(M*80|0)+60|0,M=x;break}M=18640+(M*80|0)+40|0,E?(S1(Le,_e,0,0),Fd(ke,Le,V),IA(V),Js(V,Le,ke),B=M,M=x):(B=M,M=x)}else B=18640+((S[x>>2]|0)*80|0)+20|0,M=x;while(!1);if(S[M>>2]=S[B>>2],L=B+16|0,(S[L>>2]|0)>0){M=0;do Mg(ke),M=M+1|0;while((M|0)<(S[L>>2]|0))}return x=B+4|0,S[Le>>2]=S[x>>2],S[Le+4>>2]=S[x+4>>2],S[Le+8>>2]=S[x+8>>2],v=S[16880+(v<<2)>>2]|0,Ta(Le,ue?v*3|0:v),Js(ke,Le,ke),ko(ke),ue?M=((S[te>>2]|0)+(S[ke>>2]|0)+(S[K>>2]|0)|0)==(_e|0)?1:2:M=2,ke=M,me=Re,ke|0}function bh(x,v){x=x|0,v=v|0;var E=0;do E=Gd(x,v,0,1)|0;while((E|0)==2);return E|0}function Oc(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0,Un=0,Xn=0,bn=0;if(Un=me,me=me+240|0,B=Un+224|0,gn=Un+208|0,Tn=Un,an=Un+192|0,kt=Un+176|0,Et=Un+160|0,gt=Un+144|0,ot=Un+128|0,rt=Un+112|0,je=Un+96|0,S[B>>2]=v,S[gn>>2]=S[x>>2],S[gn+4>>2]=S[x+4>>2],S[gn+8>>2]=S[x+8>>2],S[gn+12>>2]=S[x+12>>2],Kp(gn,B,Tn),S[L>>2]=0,Ke=M+E+((M|0)==6&1)|0,(Ke|0)<=(E|0)){me=Un;return}K=S[B>>2]|0,te=E+6|0,ue=16960+(K<<2)|0,_e=gt+8|0,Le=ot+8|0,ke=rt+8|0,Re=an+4|0,U=0,V=E,M=-1;e:for(;;){if(B=(V|0)%6|0,x=Tn+(B<<4)|0,S[an>>2]=S[x>>2],S[an+4>>2]=S[x+4>>2],S[an+8>>2]=S[x+8>>2],S[an+12>>2]=S[x+12>>2],x=U,U=Gd(an,K,0,1)|0,(V|0)>(E|0)&(qa(v)|0)!=0&&(x|0)!=1&&(S[an>>2]|0)!=(M|0)){switch(sl(Tn+(((B+5|0)%6|0)<<4)+4|0,kt),sl(Tn+(B<<4)+4|0,Et),Xn=+(S[ue>>2]|0),ve[gt>>3]=Xn*3,ve[_e>>3]=0,bn=Xn*-1.5,ve[ot>>3]=bn,ve[Le>>3]=Xn*2.598076211353316,ve[rt>>3]=bn,ve[ke>>3]=Xn*-2.598076211353316,B=S[gn>>2]|0,S[17040+(B*80|0)+(((M|0)==(B|0)?S[an>>2]|0:M)<<2)>>2]|0){case 1:{x=ot,M=gt;break}case 3:{x=rt,M=ot;break}case 2:{x=gt,M=rt;break}default:{x=8;break e}}Eu(kt,Et,M,x,je),!(Ma(kt,je)|0)&&!(Ma(Et,je)|0)&&(Wp(je,S[gn>>2]|0,K,1,L+8+(S[L>>2]<<4)|0),S[L>>2]=(S[L>>2]|0)+1)}if((V|0)<(te|0)&&(sl(Re,kt),Wp(kt,S[an>>2]|0,K,1,L+8+(S[L>>2]<<4)|0),S[L>>2]=(S[L>>2]|0)+1),V=V+1|0,(V|0)>=(Ke|0)){x=3;break}else M=S[an>>2]|0}if((x|0)==3){me=Un;return}else(x|0)==8&&en(22606,22569,736,22651)}function Kp(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0;K=me,me=me+160|0,M=K+80|0,L=K,B=M,U=20368,V=B+72|0;do S[B>>2]=S[U>>2],B=B+4|0,U=U+4|0;while((B|0)<(V|0));B=L,U=20448,V=B+72|0;do S[B>>2]=S[U>>2],B=B+4|0,U=U+4|0;while((B|0)<(V|0));V=(qa(S[v>>2]|0)|0)==0,M=V?M:L,L=x+4|0,OA(L),T1(L),qa(S[v>>2]|0)|0&&(Ql(L),S[v>>2]=(S[v>>2]|0)+1),S[E>>2]=S[x>>2],v=E+4|0,Js(L,M,v),ko(v),S[E+16>>2]=S[x>>2],v=E+20|0,Js(L,M+12|0,v),ko(v),S[E+32>>2]=S[x>>2],v=E+36|0,Js(L,M+24|0,v),ko(v),S[E+48>>2]=S[x>>2],v=E+52|0,Js(L,M+36|0,v),ko(v),S[E+64>>2]=S[x>>2],v=E+68|0,Js(L,M+48|0,v),ko(v),S[E+80>>2]=S[x>>2],E=E+84|0,Js(L,M+60|0,E),ko(E),me=K}function zd(x,v){return x=x|0,v=v|0,v=jt(x|0,v|0,52)|0,Ae()|0,v&15|0}function Yp(x,v){return x=x|0,v=v|0,v=jt(x|0,v|0,45)|0,Ae()|0,v&127|0}function Hd(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0;if(!(!0&(v&-16777216|0)==134217728)||(U=jt(x|0,v|0,45)|0,Ae()|0,U=U&127,U>>>0>121))return v=0,v|0;E=jt(x|0,v|0,52)|0,Ae()|0,E=E&15;do if(E|0){for(L=1,M=0;;){if(B=jt(x|0,v|0,(15-L|0)*3|0)|0,Ae()|0,B=B&7,(B|0)!=0&(M^1))if((B|0)==1&(Er(U)|0)!=0){V=0,M=13;break}else M=1;if((B|0)==7){V=0,M=13;break}if(L>>>0<E>>>0)L=L+1|0;else{M=9;break}}if((M|0)==9){if((E|0)==15)V=1;else break;return V|0}else if((M|0)==13)return V|0}while(!1);for(;;){if(V=jt(x|0,v|0,(14-E|0)*3|0)|0,Ae()|0,!((V&7|0)==7&!0)){V=0,M=13;break}if(E>>>0<14)E=E+1|0;else{V=1,M=13;break}}return(M|0)==13?V|0:0}function bu(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0;if(B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15,E>>>0>15)return M=4,M|0;if((B|0)<(E|0))return M=12,M|0;if((B|0)==(E|0))return S[M>>2]=x,S[M+4>>2]=v,M=0,M|0;if(L=un(E|0,0,52)|0,L=L|x,x=Ae()|0|v&-15728641,(B|0)>(E|0))do v=un(7,0,(14-E|0)*3|0)|0,E=E+1|0,L=v|L,x=Ae()|0|x;while((E|0)<(B|0));return S[M>>2]=L,S[M+4>>2]=x,M=0,M|0}function eo(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0;if(B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15,!((E|0)<16&(B|0)<=(E|0)))return M=4,M|0;L=E-B|0,E=jt(x|0,v|0,45)|0,Ae()|0;e:do if(!(Er(E&127)|0))E=Ea(7,0,L,((L|0)<0)<<31>>31)|0,L=Ae()|0;else{t:do if(B|0){for(E=1;U=un(7,0,(15-E|0)*3|0)|0,!!((U&x|0)==0&((Ae()|0)&v|0)==0);)if(E>>>0<B>>>0)E=E+1|0;else break t;E=Ea(7,0,L,((L|0)<0)<<31>>31)|0,L=Ae()|0;break e}while(!1);E=Ea(7,0,L,((L|0)<0)<<31>>31)|0,E=go(E|0,Ae()|0,5,0)|0,E=Ti(E|0,Ae()|0,-5,-1)|0,E=Gc(E|0,Ae()|0,6,0)|0,E=Ti(E|0,Ae()|0,1,0)|0,L=Ae()|0}while(!1);return U=M,S[U>>2]=E,S[U+4>>2]=L,U=0,U|0}function wr(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;if(L=jt(x|0,v|0,45)|0,Ae()|0,!(Er(L&127)|0))return L=0,L|0;L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15;e:do if(!L)E=0;else for(M=1;;){if(E=jt(x|0,v|0,(15-M|0)*3|0)|0,Ae()|0,E=E&7,E|0)break e;if(M>>>0<L>>>0)M=M+1|0;else{E=0;break}}while(!1);return L=(E|0)==0&1,L|0}function C1(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0;if(U=me,me=me+16|0,B=U,$a(B,x,v,E),v=B,x=S[v>>2]|0,v=S[v+4>>2]|0,(x|0)==0&(v|0)==0)return me=U,0;L=0,E=0;do V=M+(L<<3)|0,S[V>>2]=x,S[V+4>>2]=v,L=Ti(L|0,E|0,1,0)|0,E=Ae()|0,Bg(B),V=B,x=S[V>>2]|0,v=S[V+4>>2]|0;while(!((x|0)==0&(v|0)==0));return me=U,0}function _h(x,v,E,M){return x=x|0,v=v|0,E=E|0,M=M|0,(M|0)<(E|0)?(E=v,M=x,zt(E|0),M|0):(E=un(-1,-1,((M-E|0)*3|0)+3|0)|0,M=un(~E|0,~(Ae()|0)|0,(15-M|0)*3|0)|0,E=~(Ae()|0)&v,M=~M&x,zt(E|0),M|0)}function kA(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0;return L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15,(E|0)<16&(L|0)<=(E|0)?((L|0)<(E|0)&&(L=un(-1,-1,((E+-1-L|0)*3|0)+3|0)|0,L=un(~L|0,~(Ae()|0)|0,(15-E|0)*3|0)|0,v=~(Ae()|0)&v,x=~L&x),L=un(E|0,0,52)|0,E=v&-15728641|(Ae()|0),S[M>>2]=x|L,S[M+4>>2]=E,M=0,M|0):(M=4,M|0)}function R1(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0;if((E|0)==0&(M|0)==0)return an=0,an|0;if(L=x,B=S[L>>2]|0,L=S[L+4>>2]|0,!0&(L&15728640|0)==0){if(!((M|0)>0|(M|0)==0&E>>>0>0)||(an=v,S[an>>2]=B,S[an+4>>2]=L,(E|0)==1&(M|0)==0))return an=0,an|0;L=1;do gn=x+(L<<3)|0,Tn=S[gn+4>>2]|0,an=v+(L<<3)|0,S[an>>2]=S[gn>>2],S[an+4>>2]=Tn,L=L+1|0;while(0<(M|0)|(M|0)==0&L>>>0<E>>>0);return L=0,L|0}if(je=E<<3,Tn=kc(je)|0,!Tn)return an=13,an|0;if(Bh(Tn|0,x|0,je|0)|0,gn=sa(E,8)|0,!gn)return ii(Tn),an=13,an|0;e:do if(E|0){t:for(;;){L=Tn,gt=S[L>>2]|0,L=S[L+4>>2]|0,ot=jt(gt|0,L|0,52)|0,Ae()|0,ot=ot&15,rt=ot+-1|0,Et=(E|0)>0;n:do if((ot|0)!=0&Et){if(ke=((E|0)<0)<<31>>31,Re=un(rt|0,0,52)|0,Ke=Ae()|0,rt>>>0>15){if(!((gt|0)==0&(L|0)==0)){an=17;break t}for(B=0;;){if(B=B+1|0,(B|0)>=(E|0))break n;if(M=Tn+(B<<3)|0,Ke=S[M>>2]|0,M=S[M+4>>2]|0,!((Ke|0)==0&(M|0)==0)){L=M,an=17;break t}}}for(B=0,x=gt,M=L;;){if(!((x|0)==0&(M|0)==0)){if(!(!0&(M&117440512|0)==0)){an=22;break t}if(V=jt(x|0,M|0,52)|0,Ae()|0,V=V&15,(V|0)<(rt|0)){L=12,an=28;break t}if((V|0)!=(rt|0)&&(x=x|Re,M=M&-15728641|Ke,V>>>0>=ot>>>0)){U=rt;do Le=un(7,0,(14-U|0)*3|0)|0,U=U+1|0,x=Le|x,M=Ae()|0|M;while(U>>>0<V>>>0)}if(U=Xd(x|0,M|0,E|0,ke|0)|0,Ae()|0,te=gn+(U<<3)|0,V=te,K=S[V>>2]|0,V=S[V+4>>2]|0,(K|0)==0&(V|0)==0)U=te;else for(Le=0;;){if((Le|0)>(E|0)){an=32;break t}if((K|0)==(x|0)&(V&-117440513|0)==(M|0)){ue=jt(K|0,V|0,56)|0,Ae()|0,ue=ue&7,_e=ue+1|0,kt=jt(K|0,V|0,45)|0,Ae()|0;i:do if(!(Er(kt&127)|0))V=7;else{if(K=jt(K|0,V|0,52)|0,Ae()|0,K=K&15,!K){V=6;break}for(V=1;;){if(kt=un(7,0,(15-V|0)*3|0)|0,!((kt&x|0)==0&((Ae()|0)&M|0)==0)){V=7;break i}if(V>>>0<K>>>0)V=V+1|0;else{V=6;break}}}while(!1);if((ue+2|0)>>>0>V>>>0){an=42;break t}kt=un(_e|0,0,56)|0,M=Ae()|0|M&-117440513,_e=te,S[_e>>2]=0,S[_e+4>>2]=0,x=kt|x}else U=(U+1|0)%(E|0)|0;if(te=gn+(U<<3)|0,V=te,K=S[V>>2]|0,V=S[V+4>>2]|0,(K|0)==0&(V|0)==0){U=te;break}else Le=Le+1|0}kt=U,S[kt>>2]=x,S[kt+4>>2]=M}if(B=B+1|0,(B|0)>=(E|0))break n;M=Tn+(B<<3)|0,x=S[M>>2]|0,M=S[M+4>>2]|0}}while(!1);if((E+5|0)>>>0<11){an=85;break}if(Ke=sa((E|0)/6|0,8)|0,!Ke){an=49;break}n:do if(Et){Le=0,_e=0;do{if(V=gn+(Le<<3)|0,M=V,B=S[M>>2]|0,M=S[M+4>>2]|0,!((B|0)==0&(M|0)==0)){K=jt(B|0,M|0,56)|0,Ae()|0,K=K&7,x=K+1|0,te=M&-117440513,kt=jt(B|0,M|0,45)|0,Ae()|0;i:do if(Er(kt&127)|0){if(ue=jt(B|0,M|0,52)|0,Ae()|0,ue=ue&15,ue|0)for(U=1;;){if(kt=un(7,0,(15-U|0)*3|0)|0,!((B&kt|0)==0&(te&(Ae()|0)|0)==0))break i;if(U>>>0<ue>>>0)U=U+1|0;else break}M=un(x|0,0,56)|0,B=M|B,M=Ae()|0|te,x=V,S[x>>2]=B,S[x+4>>2]=M,x=K+2|0}while(!1);(x|0)==7&&(kt=Ke+(_e<<3)|0,S[kt>>2]=B,S[kt+4>>2]=M&-117440513,_e=_e+1|0)}Le=Le+1|0}while((Le|0)!=(E|0));if(Et){if(Le=((E|0)<0)<<31>>31,ke=un(rt|0,0,52)|0,Re=Ae()|0,rt>>>0>15){if(!((gt|0)==0&(L|0)==0)){L=4,an=84;break t}for(L=0;;){if(L=L+1|0,(L|0)>=(E|0)){B=0,L=_e;break n}if(kt=Tn+(L<<3)|0,!((S[kt>>2]|0)==0&(S[kt+4>>2]|0)==0)){L=4,an=84;break t}}}for(ue=0,B=0,te=gt;;){do if(!((te|0)==0&(L|0)==0)){if(V=jt(te|0,L|0,52)|0,Ae()|0,V=V&15,(V|0)<(rt|0)){L=12,an=84;break t}do if((V|0)==(rt|0))M=te,V=L;else{if(M=te|ke,x=L&-15728641|Re,V>>>0<ot>>>0){V=x;break}U=rt;do kt=un(7,0,(14-U|0)*3|0)|0,U=U+1|0,M=kt|M,x=Ae()|0|x;while(U>>>0<V>>>0);V=x}while(!1);for(U=Xd(M|0,V|0,E|0,Le|0)|0,Ae()|0,x=0;;){if((x|0)>(E|0)){an=77;break t}if(kt=gn+(U<<3)|0,K=S[kt+4>>2]|0,(K&-117440513|0)==(V|0)&&(S[kt>>2]|0)==(M|0)){an=79;break}if(U=(U+1|0)%(E|0)|0,kt=gn+(U<<3)|0,(S[kt>>2]|0)==(M|0)&&(S[kt+4>>2]|0)==(V|0))break;x=x+1|0}if((an|0)==79&&(an=0,!0&(K&117440512|0)==100663296))break;kt=v+(B<<3)|0,S[kt>>2]=te,S[kt+4>>2]=L,B=B+1|0}while(!1);if(L=ue+1|0,(L|0)>=(E|0)){L=_e;break n}kt=Tn+(L<<3)|0,ue=L,te=S[kt>>2]|0,L=S[kt+4>>2]|0}}else B=0,L=_e}else B=0,L=0;while(!1);if(ro(gn|0,0,je|0)|0,Bh(Tn|0,Ke|0,L<<3|0)|0,ii(Ke),L)v=v+(B<<3)|0,E=L;else break e}if((an|0)==17)!0&(L&117440512|0)==0?(L=4,an=28):an=22;else if((an|0)==32)en(23313,22674,362,22684);else{if((an|0)==42)return ii(Tn),ii(gn),kt=10,kt|0;if((an|0)==49)return ii(Tn),ii(gn),kt=13,kt|0;if((an|0)==77)en(23313,22674,462,22684);else{if((an|0)==84)return ii(Ke),ii(Tn),ii(gn),kt=L,kt|0;if((an|0)==85){Bh(v|0,Tn|0,E<<3|0)|0;break}}}if((an|0)==22)return ii(Tn),ii(gn),kt=5,kt|0;if((an|0)==28)return ii(Tn),ii(gn),kt=L,kt|0}while(!1);return ii(Tn),ii(gn),kt=0,kt|0}function Lg(x,v,E,M,L,B,U){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,B=B|0,U=U|0;var V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0;if(Ke=me,me=me+16|0,Re=Ke,!((E|0)>0|(E|0)==0&v>>>0>0))return Re=0,me=Ke,Re|0;if((U|0)>=16)return Re=12,me=Ke,Re|0;Le=0,ke=0,_e=0,V=0;e:for(;;){if(te=x+(Le<<3)|0,K=S[te>>2]|0,te=S[te+4>>2]|0,ue=jt(K|0,te|0,52)|0,Ae()|0,(ue&15|0)>(U|0)){V=12,K=11;break}if($a(Re,K,te,U),ue=Re,te=S[ue>>2]|0,ue=S[ue+4>>2]|0,(te|0)==0&(ue|0)==0)K=_e;else{K=_e;do{if(!((V|0)<(B|0)|(V|0)==(B|0)&K>>>0<L>>>0)){K=10;break e}_e=M+(K<<3)|0,S[_e>>2]=te,S[_e+4>>2]=ue,K=Ti(K|0,V|0,1,0)|0,V=Ae()|0,Bg(Re),_e=Re,te=S[_e>>2]|0,ue=S[_e+4>>2]|0}while(!((te|0)==0&(ue|0)==0))}if(Le=Ti(Le|0,ke|0,1,0)|0,ke=Ae()|0,(ke|0)<(E|0)|(ke|0)==(E|0)&Le>>>0<v>>>0)_e=K;else{V=0,K=11;break}}return(K|0)==10?(Re=14,me=Ke,Re|0):(K|0)==11?(me=Ke,V|0):0}function D1(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0;Le=me,me=me+16|0,_e=Le;e:do if((E|0)>0|(E|0)==0&v>>>0>0){for(te=0,U=0,B=0,ue=0;;){if(K=x+(te<<3)|0,V=S[K>>2]|0,K=S[K+4>>2]|0,!((V|0)==0&(K|0)==0)&&(K=(eo(V,K,M,_e)|0)==0,V=_e,U=Ti(S[V>>2]|0,S[V+4>>2]|0,U|0,B|0)|0,B=Ae()|0,!K)){B=12;break}if(te=Ti(te|0,ue|0,1,0)|0,ue=Ae()|0,!((ue|0)<(E|0)|(ue|0)==(E|0)&te>>>0<v>>>0))break e}return me=Le,B|0}else U=0,B=0;while(!1);return S[L>>2]=U,S[L+4>>2]=B,L=0,me=Le,L|0}function ol(x,v){return x=x|0,v=v|0,v=jt(x|0,v|0,52)|0,Ae()|0,v&1|0}function mo(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;if(L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15,!L)return L=0,L|0;for(M=1;;){if(E=jt(x|0,v|0,(15-M|0)*3|0)|0,Ae()|0,E=E&7,E|0){M=5;break}if(M>>>0<L>>>0)M=M+1|0;else{E=0,M=5;break}}return(M|0)==5?E|0:0}function Tf(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0;if(K=jt(x|0,v|0,52)|0,Ae()|0,K=K&15,!K)return V=v,K=x,zt(V|0),K|0;for(V=1,E=0;;){B=(15-V|0)*3|0,M=un(7,0,B|0)|0,L=Ae()|0,U=jt(x|0,v|0,B|0)|0,Ae()|0,B=un(kd(U&7)|0,0,B|0)|0,U=Ae()|0,x=B|x&~M,v=U|v&~L;e:do if(!E)if((B&M|0)==0&(U&L|0)==0)E=0;else if(M=jt(x|0,v|0,52)|0,Ae()|0,M=M&15,!M)E=1;else{E=1;t:for(;;){switch(U=jt(x|0,v|0,(15-E|0)*3|0)|0,Ae()|0,U&7){case 1:break t;case 0:break;default:{E=1;break e}}if(E>>>0<M>>>0)E=E+1|0;else{E=1;break e}}for(E=1;;)if(U=(15-E|0)*3|0,L=jt(x|0,v|0,U|0)|0,Ae()|0,B=un(7,0,U|0)|0,v=v&~(Ae()|0),U=un(kd(L&7)|0,0,U|0)|0,x=x&~B|U,v=v|(Ae()|0),E>>>0<M>>>0)E=E+1|0;else{E=1;break}}while(!1);if(V>>>0<K>>>0)V=V+1|0;else break}return zt(v|0),x|0}function Sh(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0;if(M=jt(x|0,v|0,52)|0,Ae()|0,M=M&15,!M)return E=v,M=x,zt(E|0),M|0;for(E=1;B=(15-E|0)*3|0,U=jt(x|0,v|0,B|0)|0,Ae()|0,L=un(7,0,B|0)|0,v=v&~(Ae()|0),B=un(kd(U&7)|0,0,B|0)|0,x=B|x&~L,v=Ae()|0|v,E>>>0<M>>>0;)E=E+1|0;return zt(v|0),x|0}function GA(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0;if(K=jt(x|0,v|0,52)|0,Ae()|0,K=K&15,!K)return V=v,K=x,zt(V|0),K|0;for(V=1,E=0;;){B=(15-V|0)*3|0,M=un(7,0,B|0)|0,L=Ae()|0,U=jt(x|0,v|0,B|0)|0,Ae()|0,B=un(ms(U&7)|0,0,B|0)|0,U=Ae()|0,x=B|x&~M,v=U|v&~L;e:do if(!E)if((B&M|0)==0&(U&L|0)==0)E=0;else if(M=jt(x|0,v|0,52)|0,Ae()|0,M=M&15,!M)E=1;else{E=1;t:for(;;){switch(U=jt(x|0,v|0,(15-E|0)*3|0)|0,Ae()|0,U&7){case 1:break t;case 0:break;default:{E=1;break e}}if(E>>>0<M>>>0)E=E+1|0;else{E=1;break e}}for(E=1;;)if(L=(15-E|0)*3|0,B=un(7,0,L|0)|0,U=v&~(Ae()|0),v=jt(x|0,v|0,L|0)|0,Ae()|0,v=un(ms(v&7)|0,0,L|0)|0,x=x&~B|v,v=U|(Ae()|0),E>>>0<M>>>0)E=E+1|0;else{E=1;break}}while(!1);if(V>>>0<K>>>0)V=V+1|0;else break}return zt(v|0),x|0}function Xp(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0;if(M=jt(x|0,v|0,52)|0,Ae()|0,M=M&15,!M)return E=v,M=x,zt(E|0),M|0;for(E=1;U=(15-E|0)*3|0,B=un(7,0,U|0)|0,L=v&~(Ae()|0),v=jt(x|0,v|0,U|0)|0,Ae()|0,v=un(ms(v&7)|0,0,U|0)|0,x=v|x&~B,v=Ae()|0|L,E>>>0<M>>>0;)E=E+1|0;return zt(v|0),x|0}function Pg(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(K=me,me=me+64|0,V=K+40|0,M=K+24|0,L=K+12|0,B=K,un(v|0,0,52)|0,E=Ae()|0|134225919,!v)return(S[x+4>>2]|0)>2||(S[x+8>>2]|0)>2||(S[x+12>>2]|0)>2?(U=0,V=0,zt(U|0),me=K,V|0):(un(b1(x)|0,0,45)|0,U=Ae()|0|E,V=-1,zt(U|0),me=K,V|0);if(S[V>>2]=S[x>>2],S[V+4>>2]=S[x+4>>2],S[V+8>>2]=S[x+8>>2],S[V+12>>2]=S[x+12>>2],U=V+4|0,(v|0)>0)for(x=-1;S[M>>2]=S[U>>2],S[M+4>>2]=S[U+4>>2],S[M+8>>2]=S[U+8>>2],v&1?(bb(U),S[L>>2]=S[U>>2],S[L+4>>2]=S[U+4>>2],S[L+8>>2]=S[U+8>>2],_f(L)):(xu(U),S[L>>2]=S[U>>2],S[L+4>>2]=S[U+4>>2],S[L+8>>2]=S[U+8>>2],Ql(L)),Fd(M,L,B),ko(B),ue=(15-v|0)*3|0,te=un(7,0,ue|0)|0,E=E&~(Ae()|0),ue=un(Ic(B)|0,0,ue|0)|0,x=ue|x&~te,E=Ae()|0|E,(v|0)>1;)v=v+-1|0;else x=-1;e:do if((S[U>>2]|0)<=2&&(S[V+8>>2]|0)<=2&&(S[V+12>>2]|0)<=2){if(M=b1(V)|0,v=un(M|0,0,45)|0,v=v|x,x=Ae()|0|E&-1040385,B=NA(V)|0,!(Er(M)|0)){if((B|0)<=0)break;for(L=0;;){if(M=jt(v|0,x|0,52)|0,Ae()|0,M=M&15,M)for(E=1;ue=(15-E|0)*3|0,V=jt(v|0,x|0,ue|0)|0,Ae()|0,te=un(7,0,ue|0)|0,x=x&~(Ae()|0),ue=un(kd(V&7)|0,0,ue|0)|0,v=v&~te|ue,x=x|(Ae()|0),E>>>0<M>>>0;)E=E+1|0;if(L=L+1|0,(L|0)==(B|0))break e}}L=jt(v|0,x|0,52)|0,Ae()|0,L=L&15;t:do if(L){E=1;n:for(;;){switch(ue=jt(v|0,x|0,(15-E|0)*3|0)|0,Ae()|0,ue&7){case 1:break n;case 0:break;default:break t}if(E>>>0<L>>>0)E=E+1|0;else break t}if(xh(M,S[V>>2]|0)|0)for(E=1;V=(15-E|0)*3|0,te=un(7,0,V|0)|0,ue=x&~(Ae()|0),x=jt(v|0,x|0,V|0)|0,Ae()|0,x=un(ms(x&7)|0,0,V|0)|0,v=v&~te|x,x=ue|(Ae()|0),E>>>0<L>>>0;)E=E+1|0;else for(E=1;ue=(15-E|0)*3|0,V=jt(v|0,x|0,ue|0)|0,Ae()|0,te=un(7,0,ue|0)|0,x=x&~(Ae()|0),ue=un(kd(V&7)|0,0,ue|0)|0,v=v&~te|ue,x=x|(Ae()|0),E>>>0<L>>>0;)E=E+1|0}while(!1);if((B|0)>0){E=0;do v=Tf(v,x)|0,x=Ae()|0,E=E+1|0;while((E|0)!=(B|0))}}else v=0,x=0;while(!1);return te=x,ue=v,zt(te|0),me=K,ue|0}function qa(x){return x=x|0,(x|0)%2|0|0}function Vd(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0;return L=me,me=me+16|0,M=L,v>>>0>15?(M=4,me=L,M|0):(S[x+4>>2]&2146435072|0)==2146435072||(S[x+8+4>>2]&2146435072|0)==2146435072?(M=3,me=L,M|0):(Dg(x,v,M),v=Pg(M,v)|0,M=Ae()|0,S[E>>2]=v,S[E+4>>2]=M,(v|0)==0&(M|0)==0&&en(23313,22674,786,22697),M=0,me=L,M|0)}function Th(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;if(L=E+4|0,B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15,U=jt(x|0,v|0,45)|0,Ae()|0,M=(B|0)==0,Er(U&127)|0){if(M)return U=1,U|0;M=1}else{if(M)return U=0,U|0;!(S[L>>2]|0)&&!(S[E+8>>2]|0)?M=(S[E+12>>2]|0)!=0&1:M=1}for(E=1;E&1?_f(L):Ql(L),U=jt(x|0,v|0,(15-E|0)*3|0)|0,Ae()|0,Ud(L,U&7),E>>>0<B>>>0;)E=E+1|0;return M|0}function Lr(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(ue=me,me=me+16|0,K=ue,te=jt(x|0,v|0,45)|0,Ae()|0,te=te&127,te>>>0>121)return S[E>>2]=0,S[E+4>>2]=0,S[E+8>>2]=0,S[E+12>>2]=0,te=5,me=ue,te|0;e:do if(Er(te)|0&&(B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15,(B|0)!=0)){M=1;t:for(;;){switch(V=jt(x|0,v|0,(15-M|0)*3|0)|0,Ae()|0,V&7){case 5:break t;case 0:break;default:{M=v;break e}}if(M>>>0<B>>>0)M=M+1|0;else{M=v;break e}}for(L=1,M=v;v=(15-L|0)*3|0,U=un(7,0,v|0)|0,V=M&~(Ae()|0),M=jt(x|0,M|0,v|0)|0,Ae()|0,M=un(ms(M&7)|0,0,v|0)|0,x=x&~U|M,M=V|(Ae()|0),L>>>0<B>>>0;)L=L+1|0}else M=v;while(!1);if(V=7696+(te*28|0)|0,S[E>>2]=S[V>>2],S[E+4>>2]=S[V+4>>2],S[E+8>>2]=S[V+8>>2],S[E+12>>2]=S[V+12>>2],!(Th(x,M,E)|0))return te=0,me=ue,te|0;if(U=E+4|0,S[K>>2]=S[U>>2],S[K+4>>2]=S[U+4>>2],S[K+8>>2]=S[U+8>>2],B=jt(x|0,M|0,52)|0,Ae()|0,V=B&15,B&1?(Ql(U),B=V+1|0):B=V,!(Er(te)|0))M=0;else{e:do if(!V)M=0;else for(v=1;;){if(L=jt(x|0,M|0,(15-v|0)*3|0)|0,Ae()|0,L=L&7,L|0){M=L;break e}if(v>>>0<V>>>0)v=v+1|0;else{M=0;break}}while(!1);M=(M|0)==4&1}if(!(Gd(E,B,M,0)|0))(B|0)!=(V|0)&&(S[U>>2]=S[K>>2],S[U+4>>2]=S[K+4>>2],S[U+8>>2]=S[K+8>>2]);else{if(Er(te)|0)do;while(Gd(E,B,0,0)|0);(B|0)!=(V|0)&&xu(U)}return te=0,me=ue,te|0}function Qp(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;return B=me,me=me+16|0,M=B,L=Lr(x,v,M)|0,L|0?(me=B,L|0):(L=jt(x|0,v|0,52)|0,Ae()|0,Sf(M,L&15,E),L=0,me=B,L|0)}function zA(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0;if(U=me,me=me+16|0,B=U,M=Lr(x,v,B)|0,M|0)return B=M,me=U,B|0;M=jt(x|0,v|0,45)|0,Ae()|0,M=(Er(M&127)|0)==0,L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15;e:do if(!M){if(L|0)for(M=1;;){if(V=un(7,0,(15-M|0)*3|0)|0,!((V&x|0)==0&((Ae()|0)&v|0)==0))break e;if(M>>>0<L>>>0)M=M+1|0;else break}return UA(B,L,0,5,E),V=0,me=U,V|0}while(!1);return Oc(B,L,0,6,E),V=0,me=U,V|0}function Db(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;if(L=jt(x|0,v|0,45)|0,Ae()|0,!(Er(L&127)|0))return L=2,S[E>>2]=L,0;if(L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15,!L)return L=5,S[E>>2]=L,0;for(M=1;;){if(B=un(7,0,(15-M|0)*3|0)|0,!((B&x|0)==0&((Ae()|0)&v|0)==0)){M=2,x=6;break}if(M>>>0<L>>>0)M=M+1|0;else{M=5,x=6;break}}return(x|0)==6&&(S[E>>2]=M),0}function Zp(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0;_e=me,me=me+128|0,te=_e+112|0,B=_e+96|0,ue=_e,L=jt(x|0,v|0,52)|0,Ae()|0,V=L&15,S[te>>2]=V,U=jt(x|0,v|0,45)|0,Ae()|0,U=U&127;e:do if(Er(U)|0){if(V|0)for(M=1;;){if(K=un(7,0,(15-M|0)*3|0)|0,!((K&x|0)==0&((Ae()|0)&v|0)==0)){L=0;break e}if(M>>>0<V>>>0)M=M+1|0;else break}if(L&1)L=1;else return K=un(V+1|0,0,52)|0,ue=Ae()|0|v&-15728641,te=un(7,0,(14-V|0)*3|0)|0,ue=Zp((K|x)&~te,ue&~(Ae()|0),E)|0,me=_e,ue|0}else L=0;while(!1);if(M=Lr(x,v,B)|0,!M){L?(Rb(B,te,ue),K=5):(Kp(B,te,ue),K=6);e:do if(Er(U)|0)if(!V)x=5;else for(M=1;;){if(U=un(7,0,(15-M|0)*3|0)|0,!((U&x|0)==0&((Ae()|0)&v|0)==0)){x=2;break e}if(M>>>0<V>>>0)M=M+1|0;else{x=5;break}}else x=2;while(!1);ro(E|0,-1,x<<2|0)|0;e:do if(L)for(B=0;;){if(U=ue+(B<<4)|0,bh(U,S[te>>2]|0)|0,U=S[U>>2]|0,V=S[E>>2]|0,(V|0)==-1|(V|0)==(U|0))M=E;else{L=0;do{if(L=L+1|0,L>>>0>=x>>>0){M=1;break e}M=E+(L<<2)|0,V=S[M>>2]|0}while(!((V|0)==-1|(V|0)==(U|0)))}if(S[M>>2]=U,B=B+1|0,B>>>0>=K>>>0){M=0;break}}else for(B=0;;){if(U=ue+(B<<4)|0,Gd(U,S[te>>2]|0,0,1)|0,U=S[U>>2]|0,V=S[E>>2]|0,(V|0)==-1|(V|0)==(U|0))M=E;else{L=0;do{if(L=L+1|0,L>>>0>=x>>>0){M=1;break e}M=E+(L<<2)|0,V=S[M>>2]|0}while(!((V|0)==-1|(V|0)==(U|0)))}if(S[M>>2]=U,B=B+1|0,B>>>0>=K>>>0){M=0;break}}while(!1)}return ue=M,me=_e,ue|0}function Eh(){return 12}function Ng(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0;if(x>>>0>15)return V=4,V|0;if(un(x|0,0,52)|0,V=Ae()|0|134225919,!x){E=0,M=0;do Er(M)|0&&(un(M|0,0,45)|0,U=V|(Ae()|0),x=v+(E<<3)|0,S[x>>2]=-1,S[x+4>>2]=U,E=E+1|0),M=M+1|0;while((M|0)!=122);return E=0,E|0}E=0,U=0;do{if(Er(U)|0){for(un(U|0,0,45)|0,M=1,L=-1,B=V|(Ae()|0);K=un(7,0,(15-M|0)*3|0)|0,L=L&~K,B=B&~(Ae()|0),(M|0)!=(x|0);)M=M+1|0;K=v+(E<<3)|0,S[K>>2]=L,S[K+4>>2]=B,E=E+1|0}U=U+1|0}while((U|0)!=122);return E=0,E|0}function al(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0;if(ot=me,me=me+16|0,Et=ot,gt=jt(x|0,v|0,52)|0,Ae()|0,gt=gt&15,E>>>0>15)return gt=4,me=ot,gt|0;if((gt|0)<(E|0))return gt=12,me=ot,gt|0;if((gt|0)!=(E|0))if(B=un(E|0,0,52)|0,B=B|x,V=Ae()|0|v&-15728641,(gt|0)>(E|0)){K=E;do Ke=un(7,0,(14-K|0)*3|0)|0,K=K+1|0,B=Ke|B,V=Ae()|0|V;while((K|0)<(gt|0));Ke=B}else Ke=B;else Ke=x,V=v;Re=jt(Ke|0,V|0,45)|0,Ae()|0;e:do if(Er(Re&127)|0){if(K=jt(Ke|0,V|0,52)|0,Ae()|0,K=K&15,K|0)for(B=1;;){if(Re=un(7,0,(15-B|0)*3|0)|0,!((Re&Ke|0)==0&((Ae()|0)&V|0)==0)){te=33;break e}if(B>>>0<K>>>0)B=B+1|0;else break}if(Re=M,S[Re>>2]=0,S[Re+4>>2]=0,(gt|0)>(E|0)){for(Re=v&-15728641,ke=gt;;){if(Le=ke,ke=ke+-1|0,ke>>>0>15|(gt|0)<(ke|0)){te=19;break}if((gt|0)!=(ke|0))if(B=un(ke|0,0,52)|0,B=B|x,K=Ae()|0|Re,(gt|0)<(Le|0))_e=B;else{te=ke;do _e=un(7,0,(14-te|0)*3|0)|0,te=te+1|0,B=_e|B,K=Ae()|0|K;while((te|0)<(gt|0));_e=B}else _e=x,K=v;if(ue=jt(_e|0,K|0,45)|0,Ae()|0,!(Er(ue&127)|0))B=0;else{ue=jt(_e|0,K|0,52)|0,Ae()|0,ue=ue&15;t:do if(!ue)B=0;else for(te=1;;){if(B=jt(_e|0,K|0,(15-te|0)*3|0)|0,Ae()|0,B=B&7,B|0)break t;if(te>>>0<ue>>>0)te=te+1|0;else{B=0;break}}while(!1);B=(B|0)==0&1}if(K=jt(x|0,v|0,(15-Le|0)*3|0)|0,Ae()|0,K=K&7,(K|0)==7){L=5,te=42;break}if(B=(B|0)!=0,(K|0)==1&B){L=5,te=42;break}if(_e=K+(((K|0)!=0&B)<<31>>31)|0,_e|0&&(te=gt-Le|0,te=Ea(7,0,te,((te|0)<0)<<31>>31)|0,ue=Ae()|0,B?(B=go(te|0,ue|0,5,0)|0,B=Ti(B|0,Ae()|0,-5,-1)|0,B=Gc(B|0,Ae()|0,6,0)|0,B=Ti(B|0,Ae()|0,1,0)|0,K=Ae()|0):(B=te,K=ue),Le=_e+-1|0,Le=go(te|0,ue|0,Le|0,((Le|0)<0)<<31>>31|0)|0,Le=Ti(B|0,K|0,Le|0,Ae()|0)|0,_e=Ae()|0,ue=M,ue=Ti(Le|0,_e|0,S[ue>>2]|0,S[ue+4>>2]|0)|0,_e=Ae()|0,Le=M,S[Le>>2]=ue,S[Le+4>>2]=_e),(ke|0)<=(E|0)){te=37;break}}if((te|0)==19)en(23313,22674,1099,22710);else if((te|0)==37){U=M,L=S[U+4>>2]|0,U=S[U>>2]|0;break}else if((te|0)==42)return me=ot,L|0}else L=0,U=0}else te=33;while(!1);e:do if((te|0)==33)if(Re=M,S[Re>>2]=0,S[Re+4>>2]=0,(gt|0)>(E|0)){for(B=gt;;){if(L=jt(x|0,v|0,(15-B|0)*3|0)|0,Ae()|0,L=L&7,(L|0)==7){L=5;break}if(U=gt-B|0,U=Ea(7,0,U,((U|0)<0)<<31>>31)|0,L=go(U|0,Ae()|0,L|0,0)|0,U=Ae()|0,Re=M,U=Ti(S[Re>>2]|0,S[Re+4>>2]|0,L|0,U|0)|0,L=Ae()|0,Re=M,S[Re>>2]=U,S[Re+4>>2]=L,B=B+-1|0,(B|0)<=(E|0))break e}return me=ot,L|0}else L=0,U=0;while(!1);return eo(Ke,V,gt,Et)|0&&en(23313,22674,1063,22725),gt=Et,Et=S[gt+4>>2]|0,((L|0)>-1|(L|0)==-1&U>>>0>4294967295)&((Et|0)>(L|0)|((Et|0)==(L|0)?(S[gt>>2]|0)>>>0>U>>>0:0))?(gt=0,me=ot,gt|0):(en(23313,22674,1139,22710),0)}function Fc(x,v,E,M,L,B){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,B=B|0;var U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0;if(_e=me,me=me+16|0,U=_e,L>>>0>15)return B=4,me=_e,B|0;if(V=jt(E|0,M|0,52)|0,Ae()|0,V=V&15,(V|0)>(L|0))return B=12,me=_e,B|0;if(eo(E,M,L,U)|0&&en(23313,22674,1063,22725),ue=U,te=S[ue+4>>2]|0,!(((v|0)>-1|(v|0)==-1&x>>>0>4294967295)&((te|0)>(v|0)|((te|0)==(v|0)?(S[ue>>2]|0)>>>0>x>>>0:0))))return B=2,me=_e,B|0;ue=L-V|0,L=un(L|0,0,52)|0,K=Ae()|0|M&-15728641,te=B,S[te>>2]=L|E,S[te+4>>2]=K,te=jt(E|0,M|0,45)|0,Ae()|0;e:do if(Er(te&127)|0){if(V|0)for(U=1;;){if(te=un(7,0,(15-U|0)*3|0)|0,!((te&E|0)==0&((Ae()|0)&M|0)==0))break e;if(U>>>0<V>>>0)U=U+1|0;else break}if((ue|0)<1)return B=0,me=_e,B|0;for(te=V^15,M=-1,K=1,U=1;;){V=ue-K|0,V=Ea(7,0,V,((V|0)<0)<<31>>31)|0,E=Ae()|0;do if(U)if(U=go(V|0,E|0,5,0)|0,U=Ti(U|0,Ae()|0,-5,-1)|0,U=Gc(U|0,Ae()|0,6,0)|0,L=Ae()|0,(v|0)>(L|0)|(v|0)==(L|0)&x>>>0>U>>>0){v=Ti(x|0,v|0,-1,-1)|0,v=bi(v|0,Ae()|0,U|0,L|0)|0,U=Ae()|0,Le=B,Re=S[Le>>2]|0,Le=S[Le+4>>2]|0,Ke=(te+M|0)*3|0,ke=un(7,0,Ke|0)|0,Le=Le&~(Ae()|0),M=Gc(v|0,U|0,V|0,E|0)|0,x=Ae()|0,L=Ti(M|0,x|0,2,0)|0,Ke=un(L|0,Ae()|0,Ke|0)|0,Le=Ae()|0|Le,L=B,S[L>>2]=Ke|Re&~ke,S[L+4>>2]=Le,x=go(M|0,x|0,V|0,E|0)|0,x=bi(v|0,U|0,x|0,Ae()|0)|0,U=0,v=Ae()|0;break}else{Ke=B,ke=S[Ke>>2]|0,Ke=S[Ke+4>>2]|0,Re=un(7,0,(te+M|0)*3|0)|0,Ke=Ke&~(Ae()|0),U=B,S[U>>2]=ke&~Re,S[U+4>>2]=Ke,U=1;break}else ke=B,L=S[ke>>2]|0,ke=S[ke+4>>2]|0,M=(te+M|0)*3|0,Le=un(7,0,M|0)|0,ke=ke&~(Ae()|0),Ke=Gc(x|0,v|0,V|0,E|0)|0,U=Ae()|0,M=un(Ke|0,U|0,M|0)|0,ke=Ae()|0|ke,Re=B,S[Re>>2]=M|L&~Le,S[Re+4>>2]=ke,U=go(Ke|0,U|0,V|0,E|0)|0,x=bi(x|0,v|0,U|0,Ae()|0)|0,U=0,v=Ae()|0;while(!1);if((ue|0)>(K|0))M=~K,K=K+1|0;else{v=0;break}}return me=_e,v|0}while(!1);if((ue|0)<1)return Ke=0,me=_e,Ke|0;for(L=V^15,U=1;;)if(Re=ue-U|0,Re=Ea(7,0,Re,((Re|0)<0)<<31>>31)|0,Ke=Ae()|0,K=B,E=S[K>>2]|0,K=S[K+4>>2]|0,V=(L-U|0)*3|0,M=un(7,0,V|0)|0,K=K&~(Ae()|0),Le=Gc(x|0,v|0,Re|0,Ke|0)|0,ke=Ae()|0,V=un(Le|0,ke|0,V|0)|0,K=Ae()|0|K,te=B,S[te>>2]=V|E&~M,S[te+4>>2]=K,Ke=go(Le|0,ke|0,Re|0,Ke|0)|0,x=bi(x|0,v|0,Ke|0,Ae()|0)|0,v=Ae()|0,(ue|0)<=(U|0)){v=0;break}else U=U+1|0;return me=_e,v|0}function $a(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0;L=jt(v|0,E|0,52)|0,Ae()|0,L=L&15,(v|0)==0&(E|0)==0|((M|0)>15|(L|0)>(M|0))?(M=-1,L=-1,v=0,E=0):(B=_h(v,E,L+1|0,M)|0,E=(Ae()|0)&-15728641,v=un(M|0,0,52)|0,v=B|v,E=E|(Ae()|0),B=(wr(v,E)|0)==0,M=B?-1:M),B=x,S[B>>2]=v,S[B+4>>2]=E,S[x+8>>2]=L,S[x+12>>2]=M}function Bg(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0;if(E=x,v=S[E>>2]|0,E=S[E+4>>2]|0,!((v|0)==0&(E|0)==0)&&(M=jt(v|0,E|0,52)|0,Ae()|0,M=M&15,V=un(1,0,(M^15)*3|0)|0,v=Ti(V|0,Ae()|0,v|0,E|0)|0,E=Ae()|0,V=x,S[V>>2]=v,S[V+4>>2]=E,V=x+8|0,U=S[V>>2]|0,!((M|0)<(U|0)))){for(K=x+12|0,B=M;;){if((B|0)==(U|0)){M=5;break}if(te=(B|0)==(S[K>>2]|0),L=(15-B|0)*3|0,M=jt(v|0,E|0,L|0)|0,Ae()|0,M=M&7,te&((M|0)==1&!0)){M=7;break}if(!((M|0)==7&!0)){M=10;break}if(te=un(1,0,L|0)|0,v=Ti(v|0,E|0,te|0,Ae()|0)|0,E=Ae()|0,te=x,S[te>>2]=v,S[te+4>>2]=E,(B|0)>(U|0))B=B+-1|0;else{M=10;break}}if((M|0)==5){te=x,S[te>>2]=0,S[te+4>>2]=0,S[V>>2]=-1,S[K>>2]=-1;return}else if((M|0)==7){U=un(1,0,L|0)|0,U=Ti(v|0,E|0,U|0,Ae()|0)|0,V=Ae()|0,te=x,S[te>>2]=U,S[te+4>>2]=V,S[K>>2]=B+-1;return}else if((M|0)==10)return}}function qd(x){x=+x;var v=0;return v=x<0?x+6.283185307179586:x,+(x>=6.283185307179586?v+-6.283185307179586:v)}function wh(x,v){return x=x|0,v=v|0,+si(+(+ve[x>>3]-+ve[v>>3]))<17453292519943298e-27?(v=+si(+(+ve[x+8>>3]-+ve[v+8>>3]))<17453292519943298e-27,v|0):(v=0,v|0)}function HA(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;return L=+ve[v>>3],M=+ve[x>>3],B=+xi(+((L-M)*.5)),E=+xi(+((+ve[v+8>>3]-+ve[x+8>>3])*.5)),E=B*B+E*(+pr(+L)*+pr(+M)*E),+(+Ge(+ +Bi(+E),+ +Bi(+(1-E)))*2)}function $d(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;return L=+ve[v>>3],M=+ve[x>>3],B=+xi(+((L-M)*.5)),E=+xi(+((+ve[v+8>>3]-+ve[x+8>>3])*.5)),E=B*B+E*(+pr(+L)*+pr(+M)*E),+(+Ge(+ +Bi(+E),+ +Bi(+(1-E)))*2*6371.007180918475)}function Ig(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;return L=+ve[v>>3],M=+ve[x>>3],B=+xi(+((L-M)*.5)),E=+xi(+((+ve[v+8>>3]-+ve[x+8>>3])*.5)),E=B*B+E*(+pr(+L)*+pr(+M)*E),+(+Ge(+ +Bi(+E),+ +Bi(+(1-E)))*2*6371.007180918475*1e3)}function jd(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0;return B=+ve[v>>3],M=+pr(+B),L=+ve[v+8>>3]-+ve[x+8>>3],U=M*+xi(+L),E=+ve[x>>3],+ +Ge(+U,+(+xi(+B)*+pr(+E)-+pr(+L)*(M*+xi(+E))))}function L1(x,v,E,M){x=x|0,v=+v,E=+E,M=M|0;var L=0,B=0,U=0,V=0;if(E<1e-16){S[M>>2]=S[x>>2],S[M+4>>2]=S[x+4>>2],S[M+8>>2]=S[x+8>>2],S[M+12>>2]=S[x+12>>2];return}B=v<0?v+6.283185307179586:v,B=v>=6.283185307179586?B+-6.283185307179586:B;do if(B<1e-16)v=+ve[x>>3]+E,ve[M>>3]=v,L=M;else{if(L=+si(+(B+-3.141592653589793))<1e-16,v=+ve[x>>3],L){v=v-E,ve[M>>3]=v,L=M;break}if(U=+pr(+E),E=+xi(+E),v=U*+xi(+v)+ +pr(+B)*(E*+pr(+v)),v=v>1?1:v,v=+Nc(+(v<-1?-1:v)),ve[M>>3]=v,+si(+(v+-1.5707963267948966))<1e-16){ve[M>>3]=1.5707963267948966,ve[M+8>>3]=0;return}if(+si(+(v+1.5707963267948966))<1e-16){ve[M>>3]=-1.5707963267948966,ve[M+8>>3]=0;return}if(V=+pr(+v),B=E*+xi(+B)/V,E=+ve[x>>3],v=(U-+xi(+v)*+xi(+E))/+pr(+E)/V,U=B>1?1:B,v=v>1?1:v,v=+ve[x+8>>3]+ +Ge(+(U<-1?-1:U),+(v<-1?-1:v)),v>3.141592653589793)do v=v+-6.283185307179586;while(v>3.141592653589793);if(v<-3.141592653589793)do v=v+6.283185307179586;while(v<-3.141592653589793);ve[M+8>>3]=v;return}while(!1);if(+si(+(v+-1.5707963267948966))<1e-16){ve[L>>3]=1.5707963267948966,ve[M+8>>3]=0;return}if(+si(+(v+1.5707963267948966))<1e-16){ve[L>>3]=-1.5707963267948966,ve[M+8>>3]=0;return}if(v=+ve[x+8>>3],v>3.141592653589793)do v=v+-6.283185307179586;while(v>3.141592653589793);if(v<-3.141592653589793)do v=v+6.283185307179586;while(v<-3.141592653589793);ve[M+8>>3]=v}function Jp(x,v){return x=x|0,v=v|0,x>>>0>15?(v=4,v|0):(ve[v>>3]=+ve[20528+(x<<3)>>3],v=0,v|0)}function Og(x,v){return x=x|0,v=v|0,x>>>0>15?(v=4,v|0):(ve[v>>3]=+ve[20656+(x<<3)>>3],v=0,v|0)}function Zl(x,v){return x=x|0,v=v|0,x>>>0>15?(v=4,v|0):(ve[v>>3]=+ve[20784+(x<<3)>>3],v=0,v|0)}function Ef(x,v){return x=x|0,v=v|0,x>>>0>15?(v=4,v|0):(ve[v>>3]=+ve[20912+(x<<3)>>3],v=0,v|0)}function wf(x,v){x=x|0,v=v|0;var E=0;return x>>>0>15?(v=4,v|0):(E=Ea(7,0,x,((x|0)<0)<<31>>31)|0,E=go(E|0,Ae()|0,120,0)|0,x=Ae()|0,S[v>>2]=E|2,S[v+4>>2]=x,v=0,v|0)}function Fg(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0;return Le=+ve[v>>3],ue=+ve[x>>3],K=+xi(+((Le-ue)*.5)),B=+ve[v+8>>3],te=+ve[x+8>>3],U=+xi(+((B-te)*.5)),V=+pr(+ue),_e=+pr(+Le),U=K*K+U*(_e*V*U),U=+Ge(+ +Bi(+U),+ +Bi(+(1-U)))*2,K=+ve[E>>3],Le=+xi(+((K-Le)*.5)),M=+ve[E+8>>3],B=+xi(+((M-B)*.5)),L=+pr(+K),B=Le*Le+B*(_e*L*B),B=+Ge(+ +Bi(+B),+ +Bi(+(1-B)))*2,K=+xi(+((ue-K)*.5)),M=+xi(+((te-M)*.5)),M=K*K+M*(V*L*M),M=+Ge(+ +Bi(+M),+ +Bi(+(1-M)))*2,L=(U+B+M)*.5,+(+ye(+ +Bi(+(+Xs(+(L*.5))*+Xs(+((L-U)*.5))*+Xs(+((L-B)*.5))*+Xs(+((L-M)*.5)))))*4)}function e0(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0;if(V=me,me=me+192|0,B=V+168|0,U=V,L=Qp(x,v,B)|0,L|0)return E=L,me=V,E|0;if(zA(x,v,U)|0&&en(23313,22742,386,22751),v=S[U>>2]|0,(v|0)>0){if(M=+Fg(U+8|0,U+8+(((v|0)!=1&1)<<4)|0,B)+0,(v|0)!=1){x=1;do L=x,x=x+1|0,M=M+ +Fg(U+8+(L<<4)|0,U+8+(((x|0)%(v|0)|0)<<4)|0,B);while((x|0)<(v|0))}}else M=0;return ve[E>>3]=M,E=0,me=V,E|0}function to(x,v,E){return x=x|0,v=v|0,E=E|0,x=e0(x,v,E)|0,x|0||(ve[E>>3]=+ve[E>>3]*6371.007180918475*6371.007180918475),x|0}function P1(x,v,E){return x=x|0,v=v|0,E=E|0,x=e0(x,v,E)|0,x|0||(ve[E>>3]=+ve[E>>3]*6371.007180918475*6371.007180918475*1e3*1e3),x|0}function ll(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(V=me,me=me+176|0,U=V,x=jp(x,v,U)|0,x|0)return U=x,me=V,U|0;if(ve[E>>3]=0,x=S[U>>2]|0,(x|0)<=1)return U=0,me=V,U|0;v=x+-1|0,x=0,M=+ve[U+8>>3],L=+ve[U+16>>3],B=0;do x=x+1|0,te=M,M=+ve[U+8+(x<<4)>>3],ue=+xi(+((M-te)*.5)),K=L,L=+ve[U+8+(x<<4)+8>>3],K=+xi(+((L-K)*.5)),K=ue*ue+K*(+pr(+M)*+pr(+te)*K),B=B+ +Ge(+ +Bi(+K),+ +Bi(+(1-K)))*2;while((x|0)<(v|0));return ve[E>>3]=B,U=0,me=V,U|0}function N1(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(V=me,me=me+176|0,U=V,x=jp(x,v,U)|0,x|0)return U=x,B=+ve[E>>3],B=B*6371.007180918475,ve[E>>3]=B,me=V,U|0;if(ve[E>>3]=0,x=S[U>>2]|0,(x|0)<=1)return U=0,B=0,B=B*6371.007180918475,ve[E>>3]=B,me=V,U|0;v=x+-1|0,x=0,M=+ve[U+8>>3],L=+ve[U+16>>3],B=0;do x=x+1|0,te=M,M=+ve[U+8+(x<<4)>>3],ue=+xi(+((M-te)*.5)),K=L,L=+ve[U+8+(x<<4)+8>>3],K=+xi(+((L-K)*.5)),K=ue*ue+K*(+pr(+te)*+pr(+M)*K),B=B+ +Ge(+ +Bi(+K),+ +Bi(+(1-K)))*2;while((x|0)!=(v|0));return ve[E>>3]=B,U=0,ue=B,ue=ue*6371.007180918475,ve[E>>3]=ue,me=V,U|0}function Mf(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(V=me,me=me+176|0,U=V,x=jp(x,v,U)|0,x|0)return U=x,B=+ve[E>>3],B=B*6371.007180918475,B=B*1e3,ve[E>>3]=B,me=V,U|0;if(ve[E>>3]=0,x=S[U>>2]|0,(x|0)<=1)return U=0,B=0,B=B*6371.007180918475,B=B*1e3,ve[E>>3]=B,me=V,U|0;v=x+-1|0,x=0,M=+ve[U+8>>3],L=+ve[U+16>>3],B=0;do x=x+1|0,te=M,M=+ve[U+8+(x<<4)>>3],ue=+xi(+((M-te)*.5)),K=L,L=+ve[U+8+(x<<4)+8>>3],K=+xi(+((L-K)*.5)),K=ue*ue+K*(+pr(+te)*+pr(+M)*K),B=B+ +Ge(+ +Bi(+K),+ +Bi(+(1-K)))*2;while((x|0)!=(v|0));return ve[E>>3]=B,U=0,ue=B,ue=ue*6371.007180918475,ue=ue*1e3,ve[E>>3]=ue,me=V,U|0}function t0(x){x=x|0;var v=0,E=0,M=0;return v=sa(1,12)|0,v||en(22832,22787,49,22845),E=x+4|0,M=S[E>>2]|0,M|0?(M=M+8|0,S[M>>2]=v,S[E>>2]=v,v|0):(S[x>>2]|0&&en(22862,22787,61,22885),M=x,S[M>>2]=v,S[E>>2]=v,v|0)}function Mh(x,v){x=x|0,v=v|0;var E=0,M=0;return M=kc(24)|0,M||en(22899,22787,78,22913),S[M>>2]=S[v>>2],S[M+4>>2]=S[v+4>>2],S[M+8>>2]=S[v+8>>2],S[M+12>>2]=S[v+12>>2],S[M+16>>2]=0,v=x+4|0,E=S[v>>2]|0,E|0?(S[E+16>>2]=M,S[v>>2]=M,M|0):(S[x>>2]|0&&en(22928,22787,82,22913),S[x>>2]=M,S[v>>2]=M,M|0)}function VA(x){x=x|0;var v=0,E=0,M=0,L=0;if(x)for(M=1;;){if(v=S[x>>2]|0,v|0)do{if(E=S[v>>2]|0,E|0)do L=E,E=S[E+16>>2]|0,ii(L);while(E|0);L=v,v=S[v+8>>2]|0,ii(L)}while(v|0);if(v=x,x=S[x+8>>2]|0,M||ii(v),x)M=0;else break}}function Ug(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0,Un=0,Xn=0,bn=0,oi=0,Zn=0,fi=0,tr=0,Jn=0;if(L=x+8|0,S[L>>2]|0)return Jn=1,Jn|0;if(M=S[x>>2]|0,!M)return Jn=0,Jn|0;v=M,E=0;do E=E+1|0,v=S[v+8>>2]|0;while(v|0);if(E>>>0<2)return Jn=0,Jn|0;fi=kc(E<<2)|0,fi||en(22948,22787,317,22967),Zn=kc(E<<5)|0,Zn||en(22989,22787,321,22967),S[x>>2]=0,Tn=x+4|0,S[Tn>>2]=0,S[L>>2]=0,E=0,oi=0,gn=0,_e=0;e:for(;;){if(ue=S[M>>2]|0,ue){B=0,U=ue;do{if(K=+ve[U+8>>3],v=U,U=S[U+16>>2]|0,te=(U|0)==0,L=te?ue:U,V=+ve[L+8>>3],+si(+(K-V))>3.141592653589793){Jn=14;break}B=B+(V-K)*(+ve[v>>3]+ +ve[L>>3])}while(!te);if((Jn|0)==14){Jn=0,B=0,v=ue;do je=+ve[v+8>>3],bn=v+16|0,Xn=S[bn>>2]|0,Xn=Xn|0?Xn:ue,rt=+ve[Xn+8>>3],B=B+(+ve[v>>3]+ +ve[Xn>>3])*((rt<0?rt+6.283185307179586:rt)-(je<0?je+6.283185307179586:je)),v=S[(v|0?bn:M)>>2]|0;while(v|0)}B>0?(S[fi+(oi<<2)>>2]=M,oi=oi+1|0,L=gn,v=_e):Jn=19}else Jn=19;if((Jn|0)==19){Jn=0;do if(E){if(v=E+8|0,S[v>>2]|0){Jn=21;break e}if(E=sa(1,12)|0,!E){Jn=23;break e}S[v>>2]=E,L=E+4|0,U=E,v=_e}else if(_e){L=Tn,U=_e+8|0,v=M,E=x;break}else if(S[x>>2]|0){Jn=27;break e}else{L=Tn,U=x,v=M,E=x;break}while(!1);if(S[U>>2]=M,S[L>>2]=M,U=Zn+(gn<<5)|0,te=S[M>>2]|0,te){for(ue=Zn+(gn<<5)+8|0,ve[ue>>3]=17976931348623157e292,_e=Zn+(gn<<5)+24|0,ve[_e>>3]=17976931348623157e292,ve[U>>3]=-17976931348623157e292,Le=Zn+(gn<<5)+16|0,ve[Le>>3]=-17976931348623157e292,gt=17976931348623157e292,ot=-17976931348623157e292,L=0,ke=te,K=17976931348623157e292,Ke=17976931348623157e292,Et=-17976931348623157e292,V=-17976931348623157e292;B=+ve[ke>>3],je=+ve[ke+8>>3],ke=S[ke+16>>2]|0,Re=(ke|0)==0,rt=+ve[(Re?te:ke)+8>>3],B<K&&(ve[ue>>3]=B,K=B),je<Ke&&(ve[_e>>3]=je,Ke=je),B>Et?ve[U>>3]=B:B=Et,je>V&&(ve[Le>>3]=je,V=je),gt=je>0&je<gt?je:gt,ot=je<0&je>ot?je:ot,L=L|+si(+(je-rt))>3.141592653589793,!Re;)Et=B;L&&(ve[Le>>3]=ot,ve[_e>>3]=gt)}else S[U>>2]=0,S[U+4>>2]=0,S[U+8>>2]=0,S[U+12>>2]=0,S[U+16>>2]=0,S[U+20>>2]=0,S[U+24>>2]=0,S[U+28>>2]=0;L=gn+1|0}if(bn=M+8|0,M=S[bn>>2]|0,S[bn>>2]=0,M)gn=L,_e=v;else{Jn=45;break}}if((Jn|0)==21)en(22765,22787,35,22799);else if((Jn|0)==23)en(22819,22787,37,22799);else if((Jn|0)==27)en(22862,22787,61,22885);else if((Jn|0)==45){e:do if((oi|0)>0){for(bn=(L|0)==0,Un=L<<2,Xn=(x|0)==0,kt=0,v=0;;){if(an=S[fi+(kt<<2)>>2]|0,bn)Jn=73;else{if(gn=kc(Un)|0,!gn){Jn=50;break}if(Tn=kc(Un)|0,!Tn){Jn=52;break}t:do if(Xn)E=0;else{for(L=0,E=0,U=x;M=Zn+(L<<5)|0,_u(S[U>>2]|0,M,S[an>>2]|0)|0?(S[gn+(E<<2)>>2]=U,S[Tn+(E<<2)>>2]=M,Re=E+1|0):Re=E,U=S[U+8>>2]|0,U;)L=L+1|0,E=Re;if((Re|0)>0)if(M=S[gn>>2]|0,(Re|0)==1)E=M;else for(Le=0,ke=-1,E=M,_e=M;;){for(te=S[_e>>2]|0,M=0,U=0;L=S[S[gn+(U<<2)>>2]>>2]|0,(L|0)==(te|0)?ue=M:ue=M+((_u(L,S[Tn+(U<<2)>>2]|0,S[te>>2]|0)|0)&1)|0,U=U+1|0,(U|0)!=(Re|0);)M=ue;if(L=(ue|0)>(ke|0),E=L?_e:E,M=Le+1|0,(M|0)==(Re|0))break t;Le=M,ke=L?ue:ke,_e=S[gn+(M<<2)>>2]|0}else E=0}while(!1);if(ii(gn),ii(Tn),E){if(L=E+4|0,M=S[L>>2]|0,M)E=M+8|0;else if(S[E>>2]|0){Jn=70;break}S[E>>2]=an,S[L>>2]=an}else Jn=73}if((Jn|0)==73){if(Jn=0,v=S[an>>2]|0,v|0)do Tn=v,v=S[v+16>>2]|0,ii(Tn);while(v|0);ii(an),v=1}if(kt=kt+1|0,(kt|0)>=(oi|0)){tr=v;break e}}(Jn|0)==50?en(23004,22787,249,23023):(Jn|0)==52?en(23042,22787,252,23023):(Jn|0)==70&&en(22862,22787,61,22885)}else tr=0;while(!1);return ii(fi),ii(Zn),Jn=tr,Jn|0}return 0}function _u(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0;if(!(Hp(v,E)|0)||(v=Id(v)|0,M=+ve[E>>3],L=+ve[E+8>>3],L=v&L<0?L+6.283185307179586:L,x=S[x>>2]|0,!x))return x=0,x|0;if(v){v=0,te=L,E=x;e:for(;;){for(;U=+ve[E>>3],L=+ve[E+8>>3],E=E+16|0,ue=S[E>>2]|0,ue=ue|0?ue:x,B=+ve[ue>>3],V=+ve[ue+8>>3],U>B?(K=U,U=V):(K=B,B=U,U=L,L=V),M=M==B|M==K?M+2220446049250313e-31:M,!!(M<B|M>K);)if(E=S[E>>2]|0,!E){E=22;break e}if(V=U<0?U+6.283185307179586:U,U=L<0?L+6.283185307179586:L,te=V==te|U==te?te+-2220446049250313e-31:te,K=V+(U-V)*((M-B)/(K-B)),(K<0?K+6.283185307179586:K)>te&&(v=v^1),E=S[E>>2]|0,!E){E=22;break}}if((E|0)==22)return v|0}else{v=0,te=L,E=x;e:for(;;){for(;U=+ve[E>>3],L=+ve[E+8>>3],E=E+16|0,ue=S[E>>2]|0,ue=ue|0?ue:x,B=+ve[ue>>3],V=+ve[ue+8>>3],U>B?(K=U,U=V):(K=B,B=U,U=L,L=V),M=M==B|M==K?M+2220446049250313e-31:M,!!(M<B|M>K);)if(E=S[E>>2]|0,!E){E=22;break e}if(te=U==te|L==te?te+-2220446049250313e-31:te,U+(L-U)*((M-B)/(K-B))>te&&(v=v^1),E=S[E>>2]|0,!E){E=22;break}}if((E|0)==22)return v|0}return 0}function no(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0;if(ot=me,me=me+32|0,gt=ot+16|0,Et=ot,B=jt(x|0,v|0,52)|0,Ae()|0,B=B&15,ke=jt(E|0,M|0,52)|0,Ae()|0,(B|0)!=(ke&15|0))return gt=12,me=ot,gt|0;if(te=jt(x|0,v|0,45)|0,Ae()|0,te=te&127,ue=jt(E|0,M|0,45)|0,Ae()|0,ue=ue&127,te>>>0>121|ue>>>0>121)return gt=5,me=ot,gt|0;if(ke=(te|0)!=(ue|0),ke){if(V=zp(te,ue)|0,(V|0)==7)return gt=1,me=ot,gt|0;K=zp(ue,te)|0,(K|0)==7?en(23066,23090,161,23100):(Re=V,U=K)}else Re=0,U=0;_e=Er(te)|0,Le=Er(ue)|0,S[gt>>2]=0,S[gt+4>>2]=0,S[gt+8>>2]=0,S[gt+12>>2]=0;do if(Re){if(ue=S[4272+(te*28|0)+(Re<<2)>>2]|0,V=(ue|0)>0,Le)if(V){te=0,K=E,V=M;do K=GA(K,V)|0,V=Ae()|0,U=ms(U)|0,(U|0)==1&&(U=ms(1)|0),te=te+1|0;while((te|0)!=(ue|0));ue=U,te=K,K=V}else ue=U,te=E,K=M;else if(V){te=0,K=E,V=M;do K=Xp(K,V)|0,V=Ae()|0,U=ms(U)|0,te=te+1|0;while((te|0)!=(ue|0));ue=U,te=K,K=V}else ue=U,te=E,K=M;if(Th(te,K,gt)|0,ke||en(23115,23090,191,23100),V=(_e|0)!=0,U=(Le|0)!=0,V&U&&en(23142,23090,192,23100),V){if(U=mo(x,v)|0,(U|0)==7){B=5;break}if(In[21872+(U*7|0)+Re>>0]|0){B=1;break}K=S[21040+(U*28|0)+(Re<<2)>>2]|0,te=K}else if(U){if(U=mo(te,K)|0,(U|0)==7){B=5;break}if(In[21872+(U*7|0)+ue>>0]|0){B=1;break}te=0,K=S[21040+(ue*28|0)+(U<<2)>>2]|0}else te=0,K=0;if((te|K|0)<0)B=5;else{if((K|0)>0){V=gt+4|0,U=0;do IA(V),U=U+1|0;while((U|0)!=(K|0))}if(S[Et>>2]=0,S[Et+4>>2]=0,S[Et+8>>2]=0,Ud(Et,Re),B|0)for(;qa(B)|0?_f(Et):Ql(Et),(B|0)>1;)B=B+-1|0;if((te|0)>0){B=0;do IA(Et),B=B+1|0;while((B|0)!=(te|0))}Ke=gt+4|0,Js(Ke,Et,Ke),ko(Ke),Ke=51}}else if(Th(E,M,gt)|0,(_e|0)!=0&(Le|0)!=0)if((ue|0)!=(te|0)&&en(23173,23090,261,23100),U=mo(x,v)|0,B=mo(E,M)|0,(U|0)==7|(B|0)==7)B=5;else if(In[21872+(U*7|0)+B>>0]|0)B=1;else if(U=S[21040+(U*28|0)+(B<<2)>>2]|0,(U|0)>0){V=gt+4|0,B=0;do IA(V),B=B+1|0;while((B|0)!=(U|0));Ke=51}else Ke=51;else Ke=51;while(!1);return(Ke|0)==51&&(B=gt+4|0,S[L>>2]=S[B>>2],S[L+4>>2]=S[B+4>>2],S[L+8>>2]=S[B+8>>2],B=0),gt=B,me=ot,gt|0}function Go(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0;if(Ke=me,me=me+48|0,te=Ke+36|0,U=Ke+24|0,V=Ke+12|0,K=Ke,L=jt(x|0,v|0,52)|0,Ae()|0,L=L&15,Le=jt(x|0,v|0,45)|0,Ae()|0,Le=Le&127,Le>>>0>121)return M=5,me=Ke,M|0;if(ue=Er(Le)|0,un(L|0,0,52)|0,Et=Ae()|0|134225919,B=M,S[B>>2]=-1,S[B+4>>2]=Et,!L)return L=Ic(E)|0,(L|0)==7||(L=xf(Le,L)|0,(L|0)==127)?(Et=1,me=Ke,Et|0):(ke=un(L|0,0,45)|0,Re=Ae()|0,Le=M,Re=S[Le+4>>2]&-1040385|Re,Et=M,S[Et>>2]=S[Le>>2]|ke,S[Et+4>>2]=Re,Et=0,me=Ke,Et|0);for(S[te>>2]=S[E>>2],S[te+4>>2]=S[E+4>>2],S[te+8>>2]=S[E+8>>2],E=L;;){if(B=E,E=E+-1|0,S[U>>2]=S[te>>2],S[U+4>>2]=S[te+4>>2],S[U+8>>2]=S[te+8>>2],qa(B)|0){if(L=Vp(te)|0,L|0){E=13;break}S[V>>2]=S[te>>2],S[V+4>>2]=S[te+4>>2],S[V+8>>2]=S[te+8>>2],_f(V)}else{if(L=qp(te)|0,L|0){E=13;break}S[V>>2]=S[te>>2],S[V+4>>2]=S[te+4>>2],S[V+8>>2]=S[te+8>>2],Ql(V)}if(Fd(U,V,K),ko(K),L=M,ot=S[L>>2]|0,L=S[L+4>>2]|0,rt=(15-B|0)*3|0,gt=un(7,0,rt|0)|0,L=L&~(Ae()|0),rt=un(Ic(K)|0,0,rt|0)|0,L=Ae()|0|L,Et=M,S[Et>>2]=rt|ot&~gt,S[Et+4>>2]=L,(B|0)<=1){E=14;break}}e:do if((E|0)!=13&&(E|0)==14)if((S[te>>2]|0)<=1&&(S[te+4>>2]|0)<=1&&(S[te+8>>2]|0)<=1){E=Ic(te)|0,L=xf(Le,E)|0,(L|0)==127?K=0:K=Er(L)|0;t:do if(E){if(ue){if(L=mo(x,v)|0,(L|0)==7){L=5;break e}if(B=S[21248+(L*28|0)+(E<<2)>>2]|0,(B|0)>0){L=E,E=0;do L=kd(L)|0,E=E+1|0;while((E|0)!=(B|0))}else L=E;if((L|0)==1){L=9;break e}E=xf(Le,L)|0,(E|0)==127&&en(23200,23090,411,23230),Er(E)|0?en(23245,23090,412,23230):(Re=E,ke=B,_e=L)}else Re=L,ke=0,_e=E;if(V=S[4272+(Le*28|0)+(_e<<2)>>2]|0,(V|0)<=-1&&en(23276,23090,419,23230),!K){if((ke|0)<0){L=5;break e}if(ke|0){B=M,L=0,E=S[B>>2]|0,B=S[B+4>>2]|0;do E=Sh(E,B)|0,B=Ae()|0,rt=M,S[rt>>2]=E,S[rt+4>>2]=B,L=L+1|0;while((L|0)<(ke|0))}if((V|0)<=0){L=Re,E=58;break}for(B=M,L=0,E=S[B>>2]|0,B=S[B+4>>2]|0;;)if(E=Sh(E,B)|0,B=Ae()|0,rt=M,S[rt>>2]=E,S[rt+4>>2]=B,L=L+1|0,(L|0)==(V|0)){L=Re,E=58;break t}}if(U=zp(Re,Le)|0,(U|0)==7&&en(23066,23090,428,23230),L=M,E=S[L>>2]|0,L=S[L+4>>2]|0,(V|0)>0){B=0;do E=Sh(E,L)|0,L=Ae()|0,rt=M,S[rt>>2]=E,S[rt+4>>2]=L,B=B+1|0;while((B|0)!=(V|0))}if(L=mo(E,L)|0,(L|0)==7&&en(23313,23090,440,23230),E=Sg(Re)|0,E=S[(E?21664:21456)+(U*28|0)+(L<<2)>>2]|0,(E|0)<0&&en(23313,23090,454,23230),!E)L=Re,E=58;else{U=M,L=0,B=S[U>>2]|0,U=S[U+4>>2]|0;do B=Tf(B,U)|0,U=Ae()|0,rt=M,S[rt>>2]=B,S[rt+4>>2]=U,L=L+1|0;while((L|0)<(E|0));L=Re,E=58}}else if((ue|0)!=0&(K|0)!=0){if(E=mo(x,v)|0,B=M,B=mo(S[B>>2]|0,S[B+4>>2]|0)|0,(E|0)==7|(B|0)==7){L=5;break e}if(B=S[21248+(E*28|0)+(B<<2)>>2]|0,(B|0)<0){L=5;break e}if(!B)E=59;else{V=M,E=0,U=S[V>>2]|0,V=S[V+4>>2]|0;do U=Sh(U,V)|0,V=Ae()|0,rt=M,S[rt>>2]=U,S[rt+4>>2]=V,E=E+1|0;while((E|0)<(B|0));E=58}}else E=58;while(!1);if((E|0)==58&&K&&(E=59),(E|0)==59&&(rt=M,(mo(S[rt>>2]|0,S[rt+4>>2]|0)|0)==1)){L=9;break}rt=M,gt=S[rt>>2]|0,rt=S[rt+4>>2]&-1040385,ot=un(L|0,0,45)|0,rt=rt|(Ae()|0),L=M,S[L>>2]=gt|ot,S[L+4>>2]=rt,L=0}else L=1;while(!1);return rt=L,me=Ke,rt|0}function Su(x,v,E,M,L,B){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0,B=B|0;var U=0,V=0;return V=me,me=me+16|0,U=V,L?x=15:(x=no(x,v,E,M,U)|0,x||(_b(U,B),x=0)),me=V,x|0}function Cf(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0;return U=me,me=me+16|0,B=U,M?E=15:(E=Sb(E,B)|0,E||(E=Go(x,v,B,L)|0)),me=U,E|0}function qA(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0;return K=me,me=me+32|0,U=K+12|0,V=K,B=no(x,v,x,v,U)|0,B|0?(V=B,me=K,V|0):(x=no(x,v,E,M,V)|0,x|0?(V=x,me=K,V|0):(U=Cg(U,V)|0,V=L,S[V>>2]=U,S[V+4>>2]=((U|0)<0)<<31>>31,V=0,me=K,V|0))}function $A(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0;return K=me,me=me+32|0,U=K+12|0,V=K,B=no(x,v,x,v,U)|0,!B&&(B=no(x,v,E,M,V)|0,!B)?(M=Cg(U,V)|0,M=Ti(M|0,((M|0)<0)<<31>>31|0,1,0)|0,U=Ae()|0,V=L,S[V>>2]=M,S[V+4>>2]=U,V=0,me=K,V|0):(V=B,me=K,V|0)}function Wd(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0,kt=0;if(an=me,me=me+48|0,U=an+24|0,V=an+12|0,Tn=an,B=no(x,v,x,v,U)|0,!B&&(B=no(x,v,E,M,V)|0,!B)){je=Cg(U,V)|0,gn=((je|0)<0)<<31>>31,S[U>>2]=0,S[U+4>>2]=0,S[U+8>>2]=0,S[V>>2]=0,S[V+4>>2]=0,S[V+8>>2]=0,no(x,v,x,v,U)|0&&en(23313,23090,691,23299),no(x,v,E,M,V)|0&&en(23313,23090,696,23299),$p(U),$p(V),je?(_e=S[U>>2]|0,Re=+(je|0),gt=U+4|0,Le=S[gt>>2]|0,ot=U+8|0,ke=S[ot>>2]|0,rt=U,M=_e,B=Le,E=ke,Ke=+((S[V>>2]|0)-_e|0)/Re,Et=+((S[V+4>>2]|0)-Le|0)/Re,Re=+((S[V+8>>2]|0)-ke|0)/Re):(B=U+4|0,E=U+8|0,gt=B,ot=E,rt=U,M=S[U>>2]|0,B=S[B>>2]|0,E=S[E>>2]|0,Ke=0,Et=0,Re=0),S[Tn>>2]=M,ke=Tn+4|0,S[ke>>2]=B,Le=Tn+8|0,S[Le>>2]=E;e:do if((je|0)<0)B=0;else for(ue=0,_e=0,B=M;;){te=+(_e>>>0)+4294967296*+(ue|0),kt=Ke*te+ +(B|0),K=Et*te+ +(S[gt>>2]|0),te=Re*te+ +(S[ot>>2]|0),E=~~+Qd(+kt),U=~~+Qd(+K),B=~~+Qd(+te),kt=+si(+(+(E|0)-kt)),K=+si(+(+(U|0)-K)),te=+si(+(+(B|0)-te));do if(kt>K&kt>te)E=0-(U+B)|0,M=U;else if(V=0-E|0,K>te){M=V-B|0;break}else{M=U,B=V-U|0;break}while(!1);if(S[Tn>>2]=E,S[ke>>2]=M,S[Le>>2]=B,Rg(Tn),B=Go(x,v,Tn,L+(_e<<3)|0)|0,B|0)break e;if(!((ue|0)<(gn|0)|(ue|0)==(gn|0)&_e>>>0<je>>>0)){B=0;break e}B=Ti(_e|0,ue|0,1,0)|0,V=Ae()|0,ue=V,_e=B,B=S[rt>>2]|0}while(!1);return Tn=B,me=an,Tn|0}return Tn=B,me=an,Tn|0}function Ea(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0;if((E|0)==0&(M|0)==0)return L=0,B=1,zt(L|0),B|0;B=x,L=v,x=1,v=0;do U=(E&1|0)==0&!0,x=go((U?1:B)|0,(U?0:L)|0,x|0,v|0)|0,v=Ae()|0,E=Mu(E|0,M|0,1)|0,M=Ae()|0,B=go(B|0,L|0,B|0,L|0)|0,L=Ae()|0;while(!((E|0)==0&(M|0)==0));return zt(v|0),x|0}function n0(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0;if(!(Hp(v,E)|0)||(v=Id(v)|0,M=+ve[E>>3],L=+ve[E+8>>3],L=v&L<0?L+6.283185307179586:L,Le=S[x>>2]|0,(Le|0)<=0))return Le=0,Le|0;if(_e=S[x+4>>2]|0,v){v=0,ue=L,E=-1,x=0;e:for(;;){for(te=x;U=+ve[_e+(te<<4)>>3],L=+ve[_e+(te<<4)+8>>3],x=(E+2|0)%(Le|0)|0,B=+ve[_e+(x<<4)>>3],V=+ve[_e+(x<<4)+8>>3],U>B?(K=U,U=V):(K=B,B=U,U=L,L=V),M=M==B|M==K?M+2220446049250313e-31:M,!!(M<B|M>K);)if(E=te+1|0,(E|0)>=(Le|0)){E=22;break e}else x=te,te=E,E=x;if(V=U<0?U+6.283185307179586:U,U=L<0?L+6.283185307179586:L,ue=V==ue|U==ue?ue+-2220446049250313e-31:ue,K=V+(U-V)*((M-B)/(K-B)),(K<0?K+6.283185307179586:K)>ue&&(v=v^1),x=te+1|0,(x|0)>=(Le|0)){E=22;break}else E=te}if((E|0)==22)return v|0}else{v=0,ue=L,E=-1,x=0;e:for(;;){for(te=x;U=+ve[_e+(te<<4)>>3],L=+ve[_e+(te<<4)+8>>3],x=(E+2|0)%(Le|0)|0,B=+ve[_e+(x<<4)>>3],V=+ve[_e+(x<<4)+8>>3],U>B?(K=U,U=V):(K=B,B=U,U=L,L=V),M=M==B|M==K?M+2220446049250313e-31:M,!!(M<B|M>K);)if(E=te+1|0,(E|0)>=(Le|0)){E=22;break e}else x=te,te=E,E=x;if(ue=U==ue|L==ue?ue+-2220446049250313e-31:ue,U+(L-U)*((M-B)/(K-B))>ue&&(v=v^1),x=te+1|0,(x|0)>=(Le|0)){E=22;break}else E=te}if((E|0)==22)return v|0}return 0}function i0(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0;if(Re=S[x>>2]|0,!Re){S[v>>2]=0,S[v+4>>2]=0,S[v+8>>2]=0,S[v+12>>2]=0,S[v+16>>2]=0,S[v+20>>2]=0,S[v+24>>2]=0,S[v+28>>2]=0;return}if(Ke=v+8|0,ve[Ke>>3]=17976931348623157e292,Et=v+24|0,ve[Et>>3]=17976931348623157e292,ve[v>>3]=-17976931348623157e292,gt=v+16|0,ve[gt>>3]=-17976931348623157e292,!((Re|0)<=0)){for(Le=S[x+4>>2]|0,te=17976931348623157e292,ue=-17976931348623157e292,_e=0,x=-1,B=17976931348623157e292,U=17976931348623157e292,K=-17976931348623157e292,M=-17976931348623157e292,ke=0;E=+ve[Le+(ke<<4)>>3],V=+ve[Le+(ke<<4)+8>>3],x=x+2|0,L=+ve[Le+(((x|0)==(Re|0)?0:x)<<4)+8>>3],E<B&&(ve[Ke>>3]=E,B=E),V<U&&(ve[Et>>3]=V,U=V),E>K?ve[v>>3]=E:E=K,V>M&&(ve[gt>>3]=V,M=V),te=V>0&V<te?V:te,ue=V<0&V>ue?V:ue,_e=_e|+si(+(V-L))>3.141592653589793,x=ke+1|0,(x|0)!=(Re|0);)ot=ke,K=E,ke=x,x=ot;_e&&(ve[gt>>3]=ue,ve[Et>>3]=te)}}function Ch(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0,Tn=0,an=0;if(Re=S[x>>2]|0,Re){if(Ke=v+8|0,ve[Ke>>3]=17976931348623157e292,Et=v+24|0,ve[Et>>3]=17976931348623157e292,ve[v>>3]=-17976931348623157e292,gt=v+16|0,ve[gt>>3]=-17976931348623157e292,(Re|0)>0){for(L=S[x+4>>2]|0,Le=17976931348623157e292,ke=-17976931348623157e292,M=0,E=-1,K=17976931348623157e292,te=17976931348623157e292,_e=-17976931348623157e292,U=-17976931348623157e292,ot=0;B=+ve[L+(ot<<4)>>3],ue=+ve[L+(ot<<4)+8>>3],Tn=E+2|0,V=+ve[L+(((Tn|0)==(Re|0)?0:Tn)<<4)+8>>3],B<K&&(ve[Ke>>3]=B,K=B),ue<te&&(ve[Et>>3]=ue,te=ue),B>_e?ve[v>>3]=B:B=_e,ue>U&&(ve[gt>>3]=ue,U=ue),Le=ue>0&ue<Le?ue:Le,ke=ue<0&ue>ke?ue:ke,M=M|+si(+(ue-V))>3.141592653589793,E=ot+1|0,(E|0)!=(Re|0);)Tn=ot,_e=B,ot=E,E=Tn;M&&(ve[gt>>3]=ke,ve[Et>>3]=Le)}}else S[v>>2]=0,S[v+4>>2]=0,S[v+8>>2]=0,S[v+12>>2]=0,S[v+16>>2]=0,S[v+20>>2]=0,S[v+24>>2]=0,S[v+28>>2]=0;if(Tn=x+8|0,E=S[Tn>>2]|0,!((E|0)<=0)){gn=x+12|0,je=0;do if(L=S[gn>>2]|0,M=je,je=je+1|0,Et=v+(je<<5)|0,gt=S[L+(M<<3)>>2]|0,gt){if(ot=v+(je<<5)+8|0,ve[ot>>3]=17976931348623157e292,x=v+(je<<5)+24|0,ve[x>>3]=17976931348623157e292,ve[Et>>3]=-17976931348623157e292,rt=v+(je<<5)+16|0,ve[rt>>3]=-17976931348623157e292,(gt|0)>0){for(Re=S[L+(M<<3)+4>>2]|0,Le=17976931348623157e292,ke=-17976931348623157e292,L=0,M=-1,Ke=0,K=17976931348623157e292,te=17976931348623157e292,ue=-17976931348623157e292,U=-17976931348623157e292;B=+ve[Re+(Ke<<4)>>3],_e=+ve[Re+(Ke<<4)+8>>3],M=M+2|0,V=+ve[Re+(((M|0)==(gt|0)?0:M)<<4)+8>>3],B<K&&(ve[ot>>3]=B,K=B),_e<te&&(ve[x>>3]=_e,te=_e),B>ue?ve[Et>>3]=B:B=ue,_e>U&&(ve[rt>>3]=_e,U=_e),Le=_e>0&_e<Le?_e:Le,ke=_e<0&_e>ke?_e:ke,L=L|+si(+(_e-V))>3.141592653589793,M=Ke+1|0,(M|0)!=(gt|0);)an=Ke,Ke=M,ue=B,M=an;L&&(ve[rt>>3]=ke,ve[x>>3]=Le)}}else S[Et>>2]=0,S[Et+4>>2]=0,S[Et+8>>2]=0,S[Et+12>>2]=0,S[Et+16>>2]=0,S[Et+20>>2]=0,S[Et+24>>2]=0,S[Et+28>>2]=0,E=S[Tn>>2]|0;while((je|0)<(E|0))}}function kg(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;if(!(n0(x,v,E)|0))return L=0,L|0;if(L=x+8|0,(S[L>>2]|0)<=0)return L=1,L|0;for(M=x+12|0,x=0;;){if(B=x,x=x+1|0,n0((S[M>>2]|0)+(B<<3)|0,v+(x<<5)|0,E)|0){x=0,M=6;break}if((x|0)>=(S[L>>2]|0)){x=1,M=6;break}}return(M|0)==6?x|0:0}function cl(){return 8}function Kd(){return 16}function Rh(){return 168}function wa(){return 8}function jA(){return 16}function Jr(){return 12}function Dl(){return 8}function Rf(x){return x=x|0,+(+((S[x>>2]|0)>>>0)+4294967296*+(S[x+4>>2]|0))}function Tu(x){x=x|0;var v=0,E=0;return E=+ve[x>>3],v=+ve[x+8>>3],+ +Bi(+(E*E+v*v))}function Eu(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0;te=+ve[x>>3],K=+ve[v>>3]-te,V=+ve[x+8>>3],U=+ve[v+8>>3]-V,_e=+ve[E>>3],B=+ve[M>>3]-_e,Le=+ve[E+8>>3],ue=+ve[M+8>>3]-Le,B=(B*(V-Le)-(te-_e)*ue)/(K*ue-U*B),ve[L>>3]=te+K*B,ve[L+8>>3]=V+U*B}function Ma(x,v){return x=x|0,v=v|0,+si(+(+ve[x>>3]-+ve[v>>3]))<11920928955078125e-23?(v=+si(+(+ve[x+8>>3]-+ve[v+8>>3]))<11920928955078125e-23,v|0):(v=0,v|0)}function Is(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;return L=+ve[x>>3]-+ve[v>>3],M=+ve[x+8>>3]-+ve[v+8>>3],E=+ve[x+16>>3]-+ve[v+16>>3],+(L*L+M*M+E*E)}function WA(x,v){x=x|0,v=v|0;var E=0,M=0,L=0;E=+ve[x>>3],M=+pr(+E),E=+xi(+E),ve[v+16>>3]=E,E=+ve[x+8>>3],L=M*+pr(+E),ve[v>>3]=L,E=M*+xi(+E),ve[v+8>>3]=E}function Dh(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;if(B=me,me=me+16|0,L=B,M=wr(x,v)|0,(E+-1|0)>>>0>5||(M=(M|0)!=0,(E|0)==1&M))return L=-1,me=B,L|0;do if(io(x,v,L)|0)M=-1;else if(M){M=((S[21936+(E<<2)>>2]|0)+5-(S[L>>2]|0)|0)%5|0;break}else{M=((S[21968+(E<<2)>>2]|0)+6-(S[L>>2]|0)|0)%6|0;break}while(!1);return L=M,me=B,L|0}function io(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0,te=0;if(te=me,me=me+32|0,U=te+16|0,V=te,M=Lr(x,v,U)|0,M|0)return E=M,me=te,E|0;B=Yp(x,v)|0,K=mo(x,v)|0,Tg(B,V),M=BA(B,S[U>>2]|0)|0;e:do if(Er(B)|0){do switch(B|0){case 4:{x=0;break}case 14:{x=1;break}case 24:{x=2;break}case 38:{x=3;break}case 49:{x=4;break}case 58:{x=5;break}case 63:{x=6;break}case 72:{x=7;break}case 83:{x=8;break}case 97:{x=9;break}case 107:{x=10;break}case 117:{x=11;break}default:{M=1;break e}}while(!1);if(L=S[22e3+(x*24|0)+8>>2]|0,v=S[22e3+(x*24|0)+16>>2]|0,x=S[U>>2]|0,(x|0)!=(S[V>>2]|0)&&(V=Sg(B)|0,x=S[U>>2]|0,V|(x|0)==(v|0)&&(M=(M+1|0)%6|0)),(K|0)==3&(x|0)==(v|0)){M=(M+5|0)%6|0,L=22;break}(K|0)==5&(x|0)==(L|0)&&(M=(M+1|0)%6|0),L=22}else L=22;while(!1);return(L|0)==22&&(S[E>>2]=M,M=0),E=M,me=te,E|0}function Pr(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0;if(rt=me,me=me+32|0,ot=rt+24|0,Et=rt+20|0,Re=rt+8|0,ke=rt+16|0,Le=rt,K=(wr(x,v)|0)==0,K=K?6:5,ue=jt(x|0,v|0,52)|0,Ae()|0,ue=ue&15,K>>>0<=E>>>0)return M=2,me=rt,M|0;_e=(ue|0)==0,!_e&&(Ke=un(7,0,(ue^15)*3|0)|0,(Ke&x|0)==0&((Ae()|0)&v|0)==0)?L=E:B=4;e:do if((B|0)==4){if(L=(wr(x,v)|0)!=0,((L?4:5)|0)<(E|0)||io(x,v,ot)|0||(B=(S[ot>>2]|0)+E|0,L?L=22288+(((B|0)%5|0)<<2)|0:L=22320+(((B|0)%6|0)<<2)|0,Ke=S[L>>2]|0,(Ke|0)==7))return M=1,me=rt,M|0;S[Et>>2]=0,L=lr(x,v,Ke,Et,Re)|0;do if(!L){if(V=Re,te=S[V>>2]|0,V=S[V+4>>2]|0,U=V>>>0<v>>>0|(V|0)==(v|0)&te>>>0<x>>>0,B=U?te:x,U=U?V:v,!_e&&(_e=un(7,0,(ue^15)*3|0)|0,(te&_e|0)==0&(V&(Ae()|0)|0)==0))L=E;else{if(V=(E+-1+K|0)%(K|0)|0,L=wr(x,v)|0,(V|0)<0&&en(23313,23315,245,23324),K=(L|0)!=0,((K?4:5)|0)<(V|0)&&en(23313,23315,245,23324),io(x,v,ot)|0&&en(23313,23315,245,23324),L=(S[ot>>2]|0)+V|0,K?L=22288+(((L|0)%5|0)<<2)|0:L=22320+(((L|0)%6|0)<<2)|0,V=S[L>>2]|0,(V|0)==7&&en(23313,23315,245,23324),S[ke>>2]=0,L=lr(x,v,V,ke,Le)|0,L|0)break;te=Le,K=S[te>>2]|0,te=S[te+4>>2]|0;do if(te>>>0<U>>>0|(te|0)==(U|0)&K>>>0<B>>>0){if(wr(K,te)|0?B=As(K,te,x,v)|0:B=S[22384+((((S[ke>>2]|0)+(S[22352+(V<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,L=wr(K,te)|0,(B+-1|0)>>>0>5){L=-1,B=K,U=te;break}if(L=(L|0)!=0,(B|0)==1&L){L=-1,B=K,U=te;break}do if(io(K,te,ot)|0)L=-1;else if(L){L=((S[21936+(B<<2)>>2]|0)+5-(S[ot>>2]|0)|0)%5|0;break}else{L=((S[21968+(B<<2)>>2]|0)+6-(S[ot>>2]|0)|0)%6|0;break}while(!1);B=K,U=te}else L=E;while(!1);V=Re,te=S[V>>2]|0,V=S[V+4>>2]|0}if((B|0)==(te|0)&(U|0)==(V|0)){if(K=(wr(te,V)|0)!=0,K?x=As(te,V,x,v)|0:x=S[22384+((((S[Et>>2]|0)+(S[22352+(Ke<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,L=wr(te,V)|0,(x+-1|0)>>>0<=5&&(gt=(L|0)!=0,!((x|0)==1&gt)))do if(io(te,V,ot)|0)L=-1;else if(gt){L=((S[21936+(x<<2)>>2]|0)+5-(S[ot>>2]|0)|0)%5|0;break}else{L=((S[21968+(x<<2)>>2]|0)+6-(S[ot>>2]|0)|0)%6|0;break}while(!1);else L=-1;L=L+1|0,L=(L|0)==6|K&(L|0)==5?0:L}v=U,x=B;break e}while(!1);return M=L,me=rt,M|0}while(!1);return gt=un(L|0,0,56)|0,ot=Ae()|0|v&-2130706433|536870912,S[M>>2]=gt|x,S[M+4>>2]=ot,M=0,me=rt,M|0}function Ar(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;return B=(wr(x,v)|0)==0,M=Pr(x,v,0,E)|0,L=(M|0)==0,B?!L||(M=Pr(x,v,1,E+8|0)|0,M|0)||(M=Pr(x,v,2,E+16|0)|0,M|0)||(M=Pr(x,v,3,E+24|0)|0,M|0)||(M=Pr(x,v,4,E+32|0)|0,M)?(B=M,B|0):Pr(x,v,5,E+40|0)|0:!L||(M=Pr(x,v,1,E+8|0)|0,M|0)||(M=Pr(x,v,2,E+16|0)|0,M|0)||(M=Pr(x,v,3,E+24|0)|0,M|0)||(M=Pr(x,v,4,E+32|0)|0,M|0)?(B=M,B|0):(B=E+40|0,S[B>>2]=0,S[B+4>>2]=0,B=0,B|0)}function Jl(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0,V=0,K=0;return K=me,me=me+192|0,L=K,B=K+168|0,U=jt(x|0,v|0,56)|0,Ae()|0,U=U&7,V=v&-2130706433|134217728,M=Lr(x,V,B)|0,M|0?(V=M,me=K,V|0):(v=jt(x|0,v|0,52)|0,Ae()|0,v=v&15,wr(x,V)|0?UA(B,v,U,1,L):Oc(B,v,U,1,L),V=L+8|0,S[E>>2]=S[V>>2],S[E+4>>2]=S[V+4>>2],S[E+8>>2]=S[V+8>>2],S[E+12>>2]=S[V+12>>2],V=0,me=K,V|0)}function ec(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;return L=me,me=me+16|0,E=L,!(!0&(v&2013265920|0)==536870912)||(M=v&-2130706433|134217728,!(Hd(x,M)|0))?(M=0,me=L,M|0):(B=jt(x|0,v|0,56)|0,Ae()|0,B=(Pr(x,M,B&7,E)|0)==0,M=E,M=B&((S[M>>2]|0)==(x|0)?(S[M+4>>2]|0)==(v|0):0)&1,me=L,M|0)}function r0(x,v,E){x=x|0,v=v|0,E=E|0;var M=0;(v|0)>0?(M=sa(v,4)|0,S[x>>2]=M,M||en(23337,23360,40,23374)):S[x>>2]=0,S[x+4>>2]=v,S[x+8>>2]=0,S[x+12>>2]=E}function Lh(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0;L=x+4|0,B=x+12|0,U=x+8|0;e:for(;;){for(E=S[L>>2]|0,v=0;;){if((v|0)>=(E|0))break e;if(M=S[x>>2]|0,V=S[M+(v<<2)>>2]|0,!V)v=v+1|0;else break}v=M+(~~(+si(+(+Pc(10,+ +(15-(S[B>>2]|0)|0))*(+ve[V>>3]+ +ve[V+8>>3])))%+(E|0))>>>0<<2)|0,E=S[v>>2]|0;t:do if(E|0){if(M=V+32|0,(E|0)==(V|0))S[v>>2]=S[M>>2];else{if(E=E+32|0,v=S[E>>2]|0,!v)break;for(;(v|0)!=(V|0);)if(E=v+32|0,v=S[E>>2]|0,!v)break t;S[E>>2]=S[M>>2]}ii(V),S[U>>2]=(S[U>>2]|0)+-1}while(!1)}ii(S[x>>2]|0)}function B1(x){x=x|0;var v=0,E=0,M=0;for(M=S[x+4>>2]|0,E=0;;){if((E|0)>=(M|0)){v=0,E=4;break}if(v=S[(S[x>>2]|0)+(E<<2)>>2]|0,!v)E=E+1|0;else{E=4;break}}return(E|0)==4?v|0:0}function I1(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;if(E=~~(+si(+(+Pc(10,+ +(15-(S[x+12>>2]|0)|0))*(+ve[v>>3]+ +ve[v+8>>3])))%+(S[x+4>>2]|0))>>>0,E=(S[x>>2]|0)+(E<<2)|0,M=S[E>>2]|0,!M)return B=1,B|0;B=v+32|0;do if((M|0)!=(v|0)){if(E=S[M+32>>2]|0,!E)return B=1,B|0;for(L=E;;){if((L|0)==(v|0)){L=8;break}if(E=S[L+32>>2]|0,E)M=L,L=E;else{E=1,L=10;break}}if((L|0)==8){S[M+32>>2]=S[B>>2];break}else if((L|0)==10)return E|0}else S[E>>2]=S[B>>2];while(!1);return ii(v),B=x+8|0,S[B>>2]=(S[B>>2]|0)+-1,B=0,B|0}function s0(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;B=kc(40)|0,B||en(23390,23360,98,23403),S[B>>2]=S[v>>2],S[B+4>>2]=S[v+4>>2],S[B+8>>2]=S[v+8>>2],S[B+12>>2]=S[v+12>>2],L=B+16|0,S[L>>2]=S[E>>2],S[L+4>>2]=S[E+4>>2],S[L+8>>2]=S[E+8>>2],S[L+12>>2]=S[E+12>>2],S[B+32>>2]=0,L=~~(+si(+(+Pc(10,+ +(15-(S[x+12>>2]|0)|0))*(+ve[v>>3]+ +ve[v+8>>3])))%+(S[x+4>>2]|0))>>>0,L=(S[x>>2]|0)+(L<<2)|0,M=S[L>>2]|0;do if(!M)S[L>>2]=B;else{for(;!(wh(M,v)|0&&wh(M+16|0,E)|0);)if(L=S[M+32>>2]|0,M=L|0?L:M,!(S[M+32>>2]|0)){U=10;break}if((U|0)==10){S[M+32>>2]=B;break}return ii(B),U=M,U|0}while(!1);return U=x+8|0,S[U>>2]=(S[U>>2]|0)+1,U=B,U|0}function o0(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0;if(L=~~(+si(+(+Pc(10,+ +(15-(S[x+12>>2]|0)|0))*(+ve[v>>3]+ +ve[v+8>>3])))%+(S[x+4>>2]|0))>>>0,L=S[(S[x>>2]|0)+(L<<2)>>2]|0,!L)return E=0,E|0;if(!E){for(x=L;;){if(wh(x,v)|0){M=10;break}if(x=S[x+32>>2]|0,!x){x=0,M=10;break}}if((M|0)==10)return x|0}for(x=L;;){if(wh(x,v)|0&&wh(x+16|0,E)|0){M=10;break}if(x=S[x+32>>2]|0,!x){x=0,M=10;break}}return(M|0)==10?x|0:0}function wu(x,v){x=x|0,v=v|0;var E=0;if(E=~~(+si(+(+Pc(10,+ +(15-(S[x+12>>2]|0)|0))*(+ve[v>>3]+ +ve[v+8>>3])))%+(S[x+4>>2]|0))>>>0,x=S[(S[x>>2]|0)+(E<<2)>>2]|0,!x)return E=0,E|0;for(;;){if(wh(x,v)|0){v=5;break}if(x=S[x+32>>2]|0,!x){x=0,v=5;break}}return(v|0)==5?x|0:0}function Ph(){return 23424}function O1(x){return x=+x,+ +zc(+x)}function Uc(x){return x=+x,~~+O1(x)|0}function kc(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0,Ke=0,Et=0,gt=0,ot=0,rt=0,je=0,gn=0;gn=me,me=me+16|0,Le=gn;do if(x>>>0<245){if(te=x>>>0<11?16:x+11&-8,x=te>>>3,_e=S[5857]|0,E=_e>>>x,E&3|0)return v=(E&1^1)+x|0,x=23468+(v<<1<<2)|0,E=x+8|0,M=S[E>>2]|0,L=M+8|0,B=S[L>>2]|0,(B|0)==(x|0)?S[5857]=_e&~(1<<v):(S[B+12>>2]=x,S[E>>2]=B),je=v<<3,S[M+4>>2]=je|3,je=M+je+4|0,S[je>>2]=S[je>>2]|1,je=L,me=gn,je|0;if(ue=S[5859]|0,te>>>0>ue>>>0){if(E|0)return v=2<<x,v=E<<x&(v|0-v),v=(v&0-v)+-1|0,V=v>>>12&16,v=v>>>V,E=v>>>5&8,v=v>>>E,B=v>>>2&4,v=v>>>B,x=v>>>1&2,v=v>>>x,M=v>>>1&1,M=(E|V|B|x|M)+(v>>>M)|0,v=23468+(M<<1<<2)|0,x=v+8|0,B=S[x>>2]|0,V=B+8|0,E=S[V>>2]|0,(E|0)==(v|0)?(x=_e&~(1<<M),S[5857]=x):(S[E+12>>2]=v,S[x>>2]=E,x=_e),je=M<<3,U=je-te|0,S[B+4>>2]=te|3,L=B+te|0,S[L+4>>2]=U|1,S[B+je>>2]=U,ue|0&&(M=S[5862]|0,v=ue>>>3,E=23468+(v<<1<<2)|0,v=1<<v,x&v?(x=E+8|0,v=S[x>>2]|0):(S[5857]=x|v,v=E,x=E+8|0),S[x>>2]=M,S[v+12>>2]=M,S[M+8>>2]=v,S[M+12>>2]=E),S[5859]=U,S[5862]=L,je=V,me=gn,je|0;if(B=S[5858]|0,B){for(E=(B&0-B)+-1|0,L=E>>>12&16,E=E>>>L,M=E>>>5&8,E=E>>>M,U=E>>>2&4,E=E>>>U,V=E>>>1&2,E=E>>>V,K=E>>>1&1,K=S[23732+((M|L|U|V|K)+(E>>>K)<<2)>>2]|0,E=K,V=K,K=(S[K+4>>2]&-8)-te|0;x=S[E+16>>2]|0,!(!x&&(x=S[E+20>>2]|0,!x));)U=(S[x+4>>2]&-8)-te|0,L=U>>>0<K>>>0,E=x,V=L?x:V,K=L?U:K;if(U=V+te|0,U>>>0>V>>>0){L=S[V+24>>2]|0,v=S[V+12>>2]|0;do if((v|0)==(V|0)){if(x=V+20|0,v=S[x>>2]|0,!v&&(x=V+16|0,v=S[x>>2]|0,!v)){E=0;break}for(;;)if(M=v+20|0,E=S[M>>2]|0,E)v=E,x=M;else if(M=v+16|0,E=S[M>>2]|0,E)v=E,x=M;else break;S[x>>2]=0,E=v}else E=S[V+8>>2]|0,S[E+12>>2]=v,S[v+8>>2]=E,E=v;while(!1);do if(L|0){if(v=S[V+28>>2]|0,x=23732+(v<<2)|0,(V|0)==(S[x>>2]|0)){if(S[x>>2]=E,!E){S[5858]=B&~(1<<v);break}}else if(je=L+16|0,S[((S[je>>2]|0)==(V|0)?je:L+20|0)>>2]=E,!E)break;S[E+24>>2]=L,v=S[V+16>>2]|0,v|0&&(S[E+16>>2]=v,S[v+24>>2]=E),v=S[V+20>>2]|0,v|0&&(S[E+20>>2]=v,S[v+24>>2]=E)}while(!1);return K>>>0<16?(je=K+te|0,S[V+4>>2]=je|3,je=V+je+4|0,S[je>>2]=S[je>>2]|1):(S[V+4>>2]=te|3,S[U+4>>2]=K|1,S[U+K>>2]=K,ue|0&&(M=S[5862]|0,v=ue>>>3,E=23468+(v<<1<<2)|0,v=1<<v,v&_e?(x=E+8|0,v=S[x>>2]|0):(S[5857]=v|_e,v=E,x=E+8|0),S[x>>2]=M,S[v+12>>2]=M,S[M+8>>2]=v,S[M+12>>2]=E),S[5859]=K,S[5862]=U),je=V+8|0,me=gn,je|0}else _e=te}else _e=te}else _e=te}else if(x>>>0<=4294967231)if(x=x+11|0,te=x&-8,M=S[5858]|0,M){L=0-te|0,x=x>>>8,x?te>>>0>16777215?K=31:(_e=(x+1048320|0)>>>16&8,Ke=x<<_e,V=(Ke+520192|0)>>>16&4,Ke=Ke<<V,K=(Ke+245760|0)>>>16&2,K=14-(V|_e|K)+(Ke<<K>>>15)|0,K=te>>>(K+7|0)&1|K<<1):K=0,E=S[23732+(K<<2)>>2]|0;e:do if(!E)E=0,x=0,Ke=61;else for(x=0,V=te<<((K|0)==31?0:25-(K>>>1)|0),B=0;;){if(U=(S[E+4>>2]&-8)-te|0,U>>>0<L>>>0)if(U)x=E,L=U;else{x=E,L=0,Ke=65;break e}if(Ke=S[E+20>>2]|0,E=S[E+16+(V>>>31<<2)>>2]|0,B=(Ke|0)==0|(Ke|0)==(E|0)?B:Ke,E)V=V<<1;else{E=B,Ke=61;break}}while(!1);if((Ke|0)==61){if((E|0)==0&(x|0)==0){if(x=2<<K,x=(x|0-x)&M,!x){_e=te;break}_e=(x&0-x)+-1|0,U=_e>>>12&16,_e=_e>>>U,B=_e>>>5&8,_e=_e>>>B,V=_e>>>2&4,_e=_e>>>V,K=_e>>>1&2,_e=_e>>>K,E=_e>>>1&1,x=0,E=S[23732+((B|U|V|K|E)+(_e>>>E)<<2)>>2]|0}E?Ke=65:(V=x,U=L)}if((Ke|0)==65)for(B=E;;)if(_e=(S[B+4>>2]&-8)-te|0,E=_e>>>0<L>>>0,L=E?_e:L,x=E?B:x,E=S[B+16>>2]|0,E||(E=S[B+20>>2]|0),E)B=E;else{V=x,U=L;break}if(V|0&&U>>>0<((S[5859]|0)-te|0)>>>0&&(ue=V+te|0,ue>>>0>V>>>0)){B=S[V+24>>2]|0,v=S[V+12>>2]|0;do if((v|0)==(V|0)){if(x=V+20|0,v=S[x>>2]|0,!v&&(x=V+16|0,v=S[x>>2]|0,!v)){v=0;break}for(;;)if(L=v+20|0,E=S[L>>2]|0,E)v=E,x=L;else if(L=v+16|0,E=S[L>>2]|0,E)v=E,x=L;else break;S[x>>2]=0}else je=S[V+8>>2]|0,S[je+12>>2]=v,S[v+8>>2]=je;while(!1);do if(B){if(x=S[V+28>>2]|0,E=23732+(x<<2)|0,(V|0)==(S[E>>2]|0)){if(S[E>>2]=v,!v){M=M&~(1<<x),S[5858]=M;break}}else if(je=B+16|0,S[((S[je>>2]|0)==(V|0)?je:B+20|0)>>2]=v,!v)break;S[v+24>>2]=B,x=S[V+16>>2]|0,x|0&&(S[v+16>>2]=x,S[x+24>>2]=v),x=S[V+20>>2]|0,x&&(S[v+20>>2]=x,S[x+24>>2]=v)}while(!1);e:do if(U>>>0<16)je=U+te|0,S[V+4>>2]=je|3,je=V+je+4|0,S[je>>2]=S[je>>2]|1;else{if(S[V+4>>2]=te|3,S[ue+4>>2]=U|1,S[ue+U>>2]=U,v=U>>>3,U>>>0<256){E=23468+(v<<1<<2)|0,x=S[5857]|0,v=1<<v,x&v?(x=E+8|0,v=S[x>>2]|0):(S[5857]=x|v,v=E,x=E+8|0),S[x>>2]=ue,S[v+12>>2]=ue,S[ue+8>>2]=v,S[ue+12>>2]=E;break}if(v=U>>>8,v?U>>>0>16777215?E=31:(rt=(v+1048320|0)>>>16&8,je=v<<rt,ot=(je+520192|0)>>>16&4,je=je<<ot,E=(je+245760|0)>>>16&2,E=14-(ot|rt|E)+(je<<E>>>15)|0,E=U>>>(E+7|0)&1|E<<1):E=0,v=23732+(E<<2)|0,S[ue+28>>2]=E,x=ue+16|0,S[x+4>>2]=0,S[x>>2]=0,x=1<<E,!(M&x)){S[5858]=M|x,S[v>>2]=ue,S[ue+24>>2]=v,S[ue+12>>2]=ue,S[ue+8>>2]=ue;break}v=S[v>>2]|0;t:do if((S[v+4>>2]&-8|0)!=(U|0)){for(M=U<<((E|0)==31?0:25-(E>>>1)|0);E=v+16+(M>>>31<<2)|0,x=S[E>>2]|0,!!x;)if((S[x+4>>2]&-8|0)==(U|0)){v=x;break t}else M=M<<1,v=x;S[E>>2]=ue,S[ue+24>>2]=v,S[ue+12>>2]=ue,S[ue+8>>2]=ue;break e}while(!1);rt=v+8|0,je=S[rt>>2]|0,S[je+12>>2]=ue,S[rt>>2]=ue,S[ue+8>>2]=je,S[ue+12>>2]=v,S[ue+24>>2]=0}while(!1);return je=V+8|0,me=gn,je|0}else _e=te}else _e=te;else _e=-1;while(!1);if(E=S[5859]|0,E>>>0>=_e>>>0)return v=E-_e|0,x=S[5862]|0,v>>>0>15?(je=x+_e|0,S[5862]=je,S[5859]=v,S[je+4>>2]=v|1,S[x+E>>2]=v,S[x+4>>2]=_e|3):(S[5859]=0,S[5862]=0,S[x+4>>2]=E|3,je=x+E+4|0,S[je>>2]=S[je>>2]|1),je=x+8|0,me=gn,je|0;if(U=S[5860]|0,U>>>0>_e>>>0)return ot=U-_e|0,S[5860]=ot,je=S[5863]|0,rt=je+_e|0,S[5863]=rt,S[rt+4>>2]=ot|1,S[je+4>>2]=_e|3,je=je+8|0,me=gn,je|0;if(S[5975]|0?x=S[5977]|0:(S[5977]=4096,S[5976]=4096,S[5978]=-1,S[5979]=-1,S[5980]=0,S[5968]=0,S[5975]=Le&-16^1431655768,x=4096),V=_e+48|0,K=_e+47|0,B=x+K|0,L=0-x|0,te=B&L,te>>>0<=_e>>>0||(x=S[5967]|0,x|0&&(ue=S[5965]|0,Le=ue+te|0,Le>>>0<=ue>>>0|Le>>>0>x>>>0)))return je=0,me=gn,je|0;e:do if(S[5968]&4)v=0,Ke=143;else{E=S[5863]|0;t:do if(E){for(M=23876;Le=S[M>>2]|0,!(Le>>>0<=E>>>0&&(Le+(S[M+4>>2]|0)|0)>>>0>E>>>0);)if(x=S[M+8>>2]|0,x)M=x;else{Ke=128;break t}if(v=B-U&L,v>>>0<2147483647)if(x=Ca(v|0)|0,(x|0)==((S[M>>2]|0)+(S[M+4>>2]|0)|0)){if((x|0)!=-1){U=v,B=x,Ke=145;break e}}else M=x,Ke=136;else v=0}else Ke=128;while(!1);do if((Ke|0)==128)if(E=Ca(0)|0,(E|0)!=-1&&(v=E,ke=S[5976]|0,Re=ke+-1|0,v=(Re&v|0?(Re+v&0-ke)-v|0:0)+te|0,ke=S[5965]|0,Re=v+ke|0,v>>>0>_e>>>0&v>>>0<2147483647)){if(Le=S[5967]|0,Le|0&&Re>>>0<=ke>>>0|Re>>>0>Le>>>0){v=0;break}if(x=Ca(v|0)|0,(x|0)==(E|0)){U=v,B=E,Ke=145;break e}else M=x,Ke=136}else v=0;while(!1);do if((Ke|0)==136){if(E=0-v|0,!(V>>>0>v>>>0&(v>>>0<2147483647&(M|0)!=-1)))if((M|0)==-1){v=0;break}else{U=v,B=M,Ke=145;break e}if(x=S[5977]|0,x=K-v+x&0-x,x>>>0>=2147483647){U=v,B=M,Ke=145;break e}if((Ca(x|0)|0)==-1){Ca(E|0)|0,v=0;break}else{U=x+v|0,B=M,Ke=145;break e}}while(!1);S[5968]=S[5968]|4,Ke=143}while(!1);if((Ke|0)==143&&te>>>0<2147483647&&(ot=Ca(te|0)|0,Re=Ca(0)|0,Et=Re-ot|0,gt=Et>>>0>(_e+40|0)>>>0,!((ot|0)==-1|gt^1|ot>>>0<Re>>>0&((ot|0)!=-1&(Re|0)!=-1)^1))&&(U=gt?Et:v,B=ot,Ke=145),(Ke|0)==145){v=(S[5965]|0)+U|0,S[5965]=v,v>>>0>(S[5966]|0)>>>0&&(S[5966]=v),K=S[5863]|0;e:do if(K){for(v=23876;;){if(x=S[v>>2]|0,E=S[v+4>>2]|0,(B|0)==(x+E|0)){Ke=154;break}if(M=S[v+8>>2]|0,M)v=M;else break}if((Ke|0)==154&&(rt=v+4|0,(S[v+12>>2]&8|0)==0)&&B>>>0>K>>>0&x>>>0<=K>>>0){S[rt>>2]=E+U,je=(S[5860]|0)+U|0,ot=K+8|0,ot=ot&7|0?0-ot&7:0,rt=K+ot|0,ot=je-ot|0,S[5863]=rt,S[5860]=ot,S[rt+4>>2]=ot|1,S[K+je+4>>2]=40,S[5864]=S[5979];break}for(B>>>0<(S[5861]|0)>>>0&&(S[5861]=B),E=B+U|0,v=23876;;){if((S[v>>2]|0)==(E|0)){Ke=162;break}if(x=S[v+8>>2]|0,x)v=x;else break}if((Ke|0)==162&&!(S[v+12>>2]&8|0)){S[v>>2]=B,ue=v+4|0,S[ue>>2]=(S[ue>>2]|0)+U,ue=B+8|0,ue=B+(ue&7|0?0-ue&7:0)|0,v=E+8|0,v=E+(v&7|0?0-v&7:0)|0,te=ue+_e|0,V=v-ue-_e|0,S[ue+4>>2]=_e|3;t:do if((K|0)==(v|0))je=(S[5860]|0)+V|0,S[5860]=je,S[5863]=te,S[te+4>>2]=je|1;else{if((S[5862]|0)==(v|0)){je=(S[5859]|0)+V|0,S[5859]=je,S[5862]=te,S[te+4>>2]=je|1,S[te+je>>2]=je;break}if(x=S[v+4>>2]|0,(x&3|0)==1){U=x&-8,M=x>>>3;n:do if(x>>>0<256)if(x=S[v+8>>2]|0,E=S[v+12>>2]|0,(E|0)==(x|0)){S[5857]=S[5857]&~(1<<M);break}else{S[x+12>>2]=E,S[E+8>>2]=x;break}else{B=S[v+24>>2]|0,x=S[v+12>>2]|0;do if((x|0)==(v|0)){if(E=v+16|0,M=E+4|0,x=S[M>>2]|0,x)E=M;else if(x=S[E>>2]|0,!x){x=0;break}for(;;)if(L=x+20|0,M=S[L>>2]|0,M)x=M,E=L;else if(L=x+16|0,M=S[L>>2]|0,M)x=M,E=L;else break;S[E>>2]=0}else je=S[v+8>>2]|0,S[je+12>>2]=x,S[x+8>>2]=je;while(!1);if(!B)break;E=S[v+28>>2]|0,M=23732+(E<<2)|0;do if((S[M>>2]|0)!=(v|0)){if(je=B+16|0,S[((S[je>>2]|0)==(v|0)?je:B+20|0)>>2]=x,!x)break n}else{if(S[M>>2]=x,x|0)break;S[5858]=S[5858]&~(1<<E);break n}while(!1);if(S[x+24>>2]=B,E=v+16|0,M=S[E>>2]|0,M|0&&(S[x+16>>2]=M,S[M+24>>2]=x),E=S[E+4>>2]|0,!E)break;S[x+20>>2]=E,S[E+24>>2]=x}while(!1);v=v+U|0,L=U+V|0}else L=V;if(v=v+4|0,S[v>>2]=S[v>>2]&-2,S[te+4>>2]=L|1,S[te+L>>2]=L,v=L>>>3,L>>>0<256){E=23468+(v<<1<<2)|0,x=S[5857]|0,v=1<<v,x&v?(x=E+8|0,v=S[x>>2]|0):(S[5857]=x|v,v=E,x=E+8|0),S[x>>2]=te,S[v+12>>2]=te,S[te+8>>2]=v,S[te+12>>2]=E;break}v=L>>>8;do if(!v)M=0;else{if(L>>>0>16777215){M=31;break}rt=(v+1048320|0)>>>16&8,je=v<<rt,ot=(je+520192|0)>>>16&4,je=je<<ot,M=(je+245760|0)>>>16&2,M=14-(ot|rt|M)+(je<<M>>>15)|0,M=L>>>(M+7|0)&1|M<<1}while(!1);if(v=23732+(M<<2)|0,S[te+28>>2]=M,x=te+16|0,S[x+4>>2]=0,S[x>>2]=0,x=S[5858]|0,E=1<<M,!(x&E)){S[5858]=x|E,S[v>>2]=te,S[te+24>>2]=v,S[te+12>>2]=te,S[te+8>>2]=te;break}v=S[v>>2]|0;n:do if((S[v+4>>2]&-8|0)!=(L|0)){for(M=L<<((M|0)==31?0:25-(M>>>1)|0);E=v+16+(M>>>31<<2)|0,x=S[E>>2]|0,!!x;)if((S[x+4>>2]&-8|0)==(L|0)){v=x;break n}else M=M<<1,v=x;S[E>>2]=te,S[te+24>>2]=v,S[te+12>>2]=te,S[te+8>>2]=te;break t}while(!1);rt=v+8|0,je=S[rt>>2]|0,S[je+12>>2]=te,S[rt>>2]=te,S[te+8>>2]=je,S[te+12>>2]=v,S[te+24>>2]=0}while(!1);return je=ue+8|0,me=gn,je|0}for(v=23876;x=S[v>>2]|0,!(x>>>0<=K>>>0&&(je=x+(S[v+4>>2]|0)|0,je>>>0>K>>>0));)v=S[v+8>>2]|0;L=je+-47|0,x=L+8|0,x=L+(x&7|0?0-x&7:0)|0,L=K+16|0,x=x>>>0<L>>>0?K:x,v=x+8|0,E=U+-40|0,ot=B+8|0,ot=ot&7|0?0-ot&7:0,rt=B+ot|0,ot=E-ot|0,S[5863]=rt,S[5860]=ot,S[rt+4>>2]=ot|1,S[B+E+4>>2]=40,S[5864]=S[5979],E=x+4|0,S[E>>2]=27,S[v>>2]=S[5969],S[v+4>>2]=S[5970],S[v+8>>2]=S[5971],S[v+12>>2]=S[5972],S[5969]=B,S[5970]=U,S[5972]=0,S[5971]=v,v=x+24|0;do rt=v,v=v+4|0,S[v>>2]=7;while((rt+8|0)>>>0<je>>>0);if((x|0)!=(K|0)){if(B=x-K|0,S[E>>2]=S[E>>2]&-2,S[K+4>>2]=B|1,S[x>>2]=B,v=B>>>3,B>>>0<256){E=23468+(v<<1<<2)|0,x=S[5857]|0,v=1<<v,x&v?(x=E+8|0,v=S[x>>2]|0):(S[5857]=x|v,v=E,x=E+8|0),S[x>>2]=K,S[v+12>>2]=K,S[K+8>>2]=v,S[K+12>>2]=E;break}if(v=B>>>8,v?B>>>0>16777215?M=31:(rt=(v+1048320|0)>>>16&8,je=v<<rt,ot=(je+520192|0)>>>16&4,je=je<<ot,M=(je+245760|0)>>>16&2,M=14-(ot|rt|M)+(je<<M>>>15)|0,M=B>>>(M+7|0)&1|M<<1):M=0,E=23732+(M<<2)|0,S[K+28>>2]=M,S[K+20>>2]=0,S[L>>2]=0,v=S[5858]|0,x=1<<M,!(v&x)){S[5858]=v|x,S[E>>2]=K,S[K+24>>2]=E,S[K+12>>2]=K,S[K+8>>2]=K;break}v=S[E>>2]|0;t:do if((S[v+4>>2]&-8|0)!=(B|0)){for(M=B<<((M|0)==31?0:25-(M>>>1)|0);E=v+16+(M>>>31<<2)|0,x=S[E>>2]|0,!!x;)if((S[x+4>>2]&-8|0)==(B|0)){v=x;break t}else M=M<<1,v=x;S[E>>2]=K,S[K+24>>2]=v,S[K+12>>2]=K,S[K+8>>2]=K;break e}while(!1);rt=v+8|0,je=S[rt>>2]|0,S[je+12>>2]=K,S[rt>>2]=K,S[K+8>>2]=je,S[K+12>>2]=v,S[K+24>>2]=0}}else je=S[5861]|0,(je|0)==0|B>>>0<je>>>0&&(S[5861]=B),S[5969]=B,S[5970]=U,S[5972]=0,S[5866]=S[5975],S[5865]=-1,S[5870]=23468,S[5869]=23468,S[5872]=23476,S[5871]=23476,S[5874]=23484,S[5873]=23484,S[5876]=23492,S[5875]=23492,S[5878]=23500,S[5877]=23500,S[5880]=23508,S[5879]=23508,S[5882]=23516,S[5881]=23516,S[5884]=23524,S[5883]=23524,S[5886]=23532,S[5885]=23532,S[5888]=23540,S[5887]=23540,S[5890]=23548,S[5889]=23548,S[5892]=23556,S[5891]=23556,S[5894]=23564,S[5893]=23564,S[5896]=23572,S[5895]=23572,S[5898]=23580,S[5897]=23580,S[5900]=23588,S[5899]=23588,S[5902]=23596,S[5901]=23596,S[5904]=23604,S[5903]=23604,S[5906]=23612,S[5905]=23612,S[5908]=23620,S[5907]=23620,S[5910]=23628,S[5909]=23628,S[5912]=23636,S[5911]=23636,S[5914]=23644,S[5913]=23644,S[5916]=23652,S[5915]=23652,S[5918]=23660,S[5917]=23660,S[5920]=23668,S[5919]=23668,S[5922]=23676,S[5921]=23676,S[5924]=23684,S[5923]=23684,S[5926]=23692,S[5925]=23692,S[5928]=23700,S[5927]=23700,S[5930]=23708,S[5929]=23708,S[5932]=23716,S[5931]=23716,je=U+-40|0,ot=B+8|0,ot=ot&7|0?0-ot&7:0,rt=B+ot|0,ot=je-ot|0,S[5863]=rt,S[5860]=ot,S[rt+4>>2]=ot|1,S[B+je+4>>2]=40,S[5864]=S[5979];while(!1);if(v=S[5860]|0,v>>>0>_e>>>0)return ot=v-_e|0,S[5860]=ot,je=S[5863]|0,rt=je+_e|0,S[5863]=rt,S[rt+4>>2]=ot|1,S[je+4>>2]=_e|3,je=je+8|0,me=gn,je|0}return je=Ph()|0,S[je>>2]=12,je=0,me=gn,je|0}function ii(x){x=x|0;var v=0,E=0,M=0,L=0,B=0,U=0,V=0,K=0;if(x){E=x+-8|0,L=S[5861]|0,x=S[x+-4>>2]|0,v=x&-8,K=E+v|0;do if(x&1)V=E,U=E;else{if(M=S[E>>2]|0,!(x&3)||(U=E+(0-M)|0,B=M+v|0,U>>>0<L>>>0))return;if((S[5862]|0)==(U|0)){if(x=K+4|0,v=S[x>>2]|0,(v&3|0)!=3){V=U,v=B;break}S[5859]=B,S[x>>2]=v&-2,S[U+4>>2]=B|1,S[U+B>>2]=B;return}if(E=M>>>3,M>>>0<256)if(x=S[U+8>>2]|0,v=S[U+12>>2]|0,(v|0)==(x|0)){S[5857]=S[5857]&~(1<<E),V=U,v=B;break}else{S[x+12>>2]=v,S[v+8>>2]=x,V=U,v=B;break}L=S[U+24>>2]|0,x=S[U+12>>2]|0;do if((x|0)==(U|0)){if(v=U+16|0,E=v+4|0,x=S[E>>2]|0,x)v=E;else if(x=S[v>>2]|0,!x){x=0;break}for(;;)if(M=x+20|0,E=S[M>>2]|0,E)x=E,v=M;else if(M=x+16|0,E=S[M>>2]|0,E)x=E,v=M;else break;S[v>>2]=0}else V=S[U+8>>2]|0,S[V+12>>2]=x,S[x+8>>2]=V;while(!1);if(L){if(v=S[U+28>>2]|0,E=23732+(v<<2)|0,(S[E>>2]|0)==(U|0)){if(S[E>>2]=x,!x){S[5858]=S[5858]&~(1<<v),V=U,v=B;break}}else if(V=L+16|0,S[((S[V>>2]|0)==(U|0)?V:L+20|0)>>2]=x,!x){V=U,v=B;break}S[x+24>>2]=L,v=U+16|0,E=S[v>>2]|0,E|0&&(S[x+16>>2]=E,S[E+24>>2]=x),v=S[v+4>>2]|0,v?(S[x+20>>2]=v,S[v+24>>2]=x,V=U,v=B):(V=U,v=B)}else V=U,v=B}while(!1);if(!(U>>>0>=K>>>0)&&(x=K+4|0,M=S[x>>2]|0,!!(M&1))){if(M&2)S[x>>2]=M&-2,S[V+4>>2]=v|1,S[U+v>>2]=v,L=v;else{if((S[5863]|0)==(K|0)){if(K=(S[5860]|0)+v|0,S[5860]=K,S[5863]=V,S[V+4>>2]=K|1,(V|0)!=(S[5862]|0))return;S[5862]=0,S[5859]=0;return}if((S[5862]|0)==(K|0)){K=(S[5859]|0)+v|0,S[5859]=K,S[5862]=U,S[V+4>>2]=K|1,S[U+K>>2]=K;return}L=(M&-8)+v|0,E=M>>>3;do if(M>>>0<256)if(v=S[K+8>>2]|0,x=S[K+12>>2]|0,(x|0)==(v|0)){S[5857]=S[5857]&~(1<<E);break}else{S[v+12>>2]=x,S[x+8>>2]=v;break}else{B=S[K+24>>2]|0,x=S[K+12>>2]|0;do if((x|0)==(K|0)){if(v=K+16|0,E=v+4|0,x=S[E>>2]|0,x)v=E;else if(x=S[v>>2]|0,!x){E=0;break}for(;;)if(M=x+20|0,E=S[M>>2]|0,E)x=E,v=M;else if(M=x+16|0,E=S[M>>2]|0,E)x=E,v=M;else break;S[v>>2]=0,E=x}else E=S[K+8>>2]|0,S[E+12>>2]=x,S[x+8>>2]=E,E=x;while(!1);if(B|0){if(x=S[K+28>>2]|0,v=23732+(x<<2)|0,(S[v>>2]|0)==(K|0)){if(S[v>>2]=E,!E){S[5858]=S[5858]&~(1<<x);break}}else if(M=B+16|0,S[((S[M>>2]|0)==(K|0)?M:B+20|0)>>2]=E,!E)break;S[E+24>>2]=B,x=K+16|0,v=S[x>>2]|0,v|0&&(S[E+16>>2]=v,S[v+24>>2]=E),x=S[x+4>>2]|0,x|0&&(S[E+20>>2]=x,S[x+24>>2]=E)}}while(!1);if(S[V+4>>2]=L|1,S[U+L>>2]=L,(V|0)==(S[5862]|0)){S[5859]=L;return}}if(x=L>>>3,L>>>0<256){E=23468+(x<<1<<2)|0,v=S[5857]|0,x=1<<x,v&x?(v=E+8|0,x=S[v>>2]|0):(S[5857]=v|x,x=E,v=E+8|0),S[v>>2]=V,S[x+12>>2]=V,S[V+8>>2]=x,S[V+12>>2]=E;return}x=L>>>8,x?L>>>0>16777215?M=31:(U=(x+1048320|0)>>>16&8,K=x<<U,B=(K+520192|0)>>>16&4,K=K<<B,M=(K+245760|0)>>>16&2,M=14-(B|U|M)+(K<<M>>>15)|0,M=L>>>(M+7|0)&1|M<<1):M=0,x=23732+(M<<2)|0,S[V+28>>2]=M,S[V+20>>2]=0,S[V+16>>2]=0,v=S[5858]|0,E=1<<M;e:do if(!(v&E))S[5858]=v|E,S[x>>2]=V,S[V+24>>2]=x,S[V+12>>2]=V,S[V+8>>2]=V;else{x=S[x>>2]|0;t:do if((S[x+4>>2]&-8|0)!=(L|0)){for(M=L<<((M|0)==31?0:25-(M>>>1)|0);E=x+16+(M>>>31<<2)|0,v=S[E>>2]|0,!!v;)if((S[v+4>>2]&-8|0)==(L|0)){x=v;break t}else M=M<<1,x=v;S[E>>2]=V,S[V+24>>2]=x,S[V+12>>2]=V,S[V+8>>2]=V;break e}while(!1);U=x+8|0,K=S[U>>2]|0,S[K+12>>2]=V,S[U>>2]=V,S[V+8>>2]=K,S[V+12>>2]=x,S[V+24>>2]=0}while(!1);if(K=(S[5865]|0)+-1|0,S[5865]=K,!(K|0)){for(x=23884;x=S[x>>2]|0,x;)x=x+8|0;S[5865]=-1}}}}function sa(x,v){x=x|0,v=v|0;var E=0;return x?(E=Je(v,x)|0,(v|x)>>>0>65535&&(E=((E>>>0)/(x>>>0)|0|0)==(v|0)?E:-1)):E=0,x=kc(E)|0,!x||!(S[x+-4>>2]&3)||ro(x|0,0,E|0)|0,x|0}function Ti(x,v,E,M){return x=x|0,v=v|0,E=E|0,M=M|0,E=x+E>>>0,zt(v+M+(E>>>0<x>>>0|0)>>>0|0),E|0|0}function bi(x,v,E,M){return x=x|0,v=v|0,E=E|0,M=M|0,M=v-M-(E>>>0>x>>>0|0)>>>0,zt(M|0),x-E>>>0|0|0}function Df(x){return x=x|0,(x?31-(fn(x^x-1)|0)|0:32)|0}function Yd(x,v,E,M,L){x=x|0,v=v|0,E=E|0,M=M|0,L=L|0;var B=0,U=0,V=0,K=0,te=0,ue=0,_e=0,Le=0,ke=0,Re=0;if(ue=x,K=v,te=K,U=E,Le=M,V=Le,!te)return B=(L|0)!=0,V?B?(S[L>>2]=x|0,S[L+4>>2]=v&0,Le=0,L=0,zt(Le|0),L|0):(Le=0,L=0,zt(Le|0),L|0):(B&&(S[L>>2]=(ue>>>0)%(U>>>0),S[L+4>>2]=0),Le=0,L=(ue>>>0)/(U>>>0)>>>0,zt(Le|0),L|0);B=(V|0)==0;do if(U){if(!B){if(B=(fn(V|0)|0)-(fn(te|0)|0)|0,B>>>0<=31){_e=B+1|0,V=31-B|0,v=B-31>>31,U=_e,x=ue>>>(_e>>>0)&v|te<<V,v=te>>>(_e>>>0)&v,B=0,V=ue<<V;break}return L?(S[L>>2]=x|0,S[L+4>>2]=K|v&0,Le=0,L=0,zt(Le|0),L|0):(Le=0,L=0,zt(Le|0),L|0)}if(B=U-1|0,B&U|0){V=(fn(U|0)|0)+33-(fn(te|0)|0)|0,Re=64-V|0,_e=32-V|0,K=_e>>31,ke=V-32|0,v=ke>>31,U=V,x=_e-1>>31&te>>>(ke>>>0)|(te<<_e|ue>>>(V>>>0))&v,v=v&te>>>(V>>>0),B=ue<<Re&K,V=(te<<Re|ue>>>(ke>>>0))&K|ue<<_e&V-33>>31;break}return L|0&&(S[L>>2]=B&ue,S[L+4>>2]=0),(U|0)==1?(ke=K|v&0,Re=x|0|0,zt(ke|0),Re|0):(Re=Df(U|0)|0,ke=te>>>(Re>>>0)|0,Re=te<<32-Re|ue>>>(Re>>>0)|0,zt(ke|0),Re|0)}else{if(B)return L|0&&(S[L>>2]=(te>>>0)%(U>>>0),S[L+4>>2]=0),ke=0,Re=(te>>>0)/(U>>>0)>>>0,zt(ke|0),Re|0;if(!ue)return L|0&&(S[L>>2]=0,S[L+4>>2]=(te>>>0)%(V>>>0)),ke=0,Re=(te>>>0)/(V>>>0)>>>0,zt(ke|0),Re|0;if(B=V-1|0,!(B&V))return L|0&&(S[L>>2]=x|0,S[L+4>>2]=B&te|v&0),ke=0,Re=te>>>((Df(V|0)|0)>>>0),zt(ke|0),Re|0;if(B=(fn(V|0)|0)-(fn(te|0)|0)|0,B>>>0<=30){v=B+1|0,V=31-B|0,U=v,x=te<<V|ue>>>(v>>>0),v=te>>>(v>>>0),B=0,V=ue<<V;break}return L?(S[L>>2]=x|0,S[L+4>>2]=K|v&0,ke=0,Re=0,zt(ke|0),Re|0):(ke=0,Re=0,zt(ke|0),Re|0)}while(!1);if(!U)te=V,K=0,V=0;else{_e=E|0|0,ue=Le|M&0,te=Ti(_e|0,ue|0,-1,-1)|0,E=Ae()|0,K=V,V=0;do M=K,K=B>>>31|K<<1,B=V|B<<1,M=x<<1|M>>>31|0,Le=x>>>31|v<<1|0,bi(te|0,E|0,M|0,Le|0)|0,Re=Ae()|0,ke=Re>>31|((Re|0)<0?-1:0)<<1,V=ke&1,x=bi(M|0,Le|0,ke&_e|0,(((Re|0)<0?-1:0)>>31|((Re|0)<0?-1:0)<<1)&ue|0)|0,v=Ae()|0,U=U-1|0;while(U|0);te=K,K=0}return U=0,L|0&&(S[L>>2]=x,S[L+4>>2]=v),ke=(B|0)>>>31|(te|U)<<1|(U<<1|B>>>31)&0|K,Re=(B<<1|0)&-2|V,zt(ke|0),Re|0}function Gc(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0;return te=v>>31|((v|0)<0?-1:0)<<1,K=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,B=M>>31|((M|0)<0?-1:0)<<1,L=((M|0)<0?-1:0)>>31|((M|0)<0?-1:0)<<1,V=bi(te^x|0,K^v|0,te|0,K|0)|0,U=Ae()|0,x=B^te,v=L^K,bi((Yd(V,U,bi(B^E|0,L^M|0,B|0,L|0)|0,Ae()|0,0)|0)^x|0,(Ae()|0)^v|0,x|0,v|0)|0}function KA(x,v){x=x|0,v=v|0;var E=0,M=0,L=0,B=0;return B=x&65535,L=v&65535,E=Je(L,B)|0,M=x>>>16,x=(E>>>16)+(Je(L,M)|0)|0,L=v>>>16,v=Je(L,B)|0,zt((x>>>16)+(Je(L,M)|0)+(((x&65535)+v|0)>>>16)|0),x+v<<16|E&65535|0|0}function go(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0;return L=x,B=E,E=KA(L,B)|0,x=Ae()|0,zt((Je(v,B)|0)+(Je(M,L)|0)+x|x&0|0),E|0|0|0}function YA(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0,U=0,V=0,K=0,te=0;return L=me,me=me+16|0,V=L|0,U=v>>31|((v|0)<0?-1:0)<<1,B=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,te=M>>31|((M|0)<0?-1:0)<<1,K=((M|0)<0?-1:0)>>31|((M|0)<0?-1:0)<<1,x=bi(U^x|0,B^v|0,U|0,B|0)|0,v=Ae()|0,Yd(x,v,bi(te^E|0,K^M|0,te|0,K|0)|0,Ae()|0,V)|0,M=bi(S[V>>2]^U|0,S[V+4>>2]^B|0,U|0,B|0)|0,E=Ae()|0,me=L,zt(E|0),M|0}function Xd(x,v,E,M){x=x|0,v=v|0,E=E|0,M=M|0;var L=0,B=0;return B=me,me=me+16|0,L=B|0,Yd(x,v,E,M,L)|0,me=B,zt(S[L+4>>2]|0),S[L>>2]|0|0}function Mu(x,v,E){return x=x|0,v=v|0,E=E|0,(E|0)<32?(zt(v>>E|0),x>>>E|(v&(1<<E)-1)<<32-E):(zt(((v|0)<0?-1:0)|0),v>>E-32|0)}function jt(x,v,E){return x=x|0,v=v|0,E=E|0,(E|0)<32?(zt(v>>>E|0),x>>>E|(v&(1<<E)-1)<<32-E):(zt(0),v>>>E-32|0)}function un(x,v,E){return x=x|0,v=v|0,E=E|0,(E|0)<32?(zt(v<<E|(x&(1<<E)-1<<32-E)>>>32-E|0),x<<E):(zt(x<<E-32|0),0)}function Nh(x,v){return x=+x,v=+v,x!=x?+v:v!=v?+x:+Xt(+x,+v)}function Cu(x,v){return x=+x,v=+v,x!=x?+v:v!=v?+x:+Ye(+x,+v)}function Qd(x){return x=+x,x>=0?+zn(x+.5):+lt(x-.5)}function Bh(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0;if((E|0)>=8192)return Zi(x|0,v|0,E|0)|0,x|0;if(B=x|0,L=x+E|0,(x&3)==(v&3)){for(;x&3;){if(!E)return B|0;In[x>>0]=In[v>>0]|0,x=x+1|0,v=v+1|0,E=E-1|0}for(E=L&-4|0,M=E-64|0;(x|0)<=(M|0);)S[x>>2]=S[v>>2],S[x+4>>2]=S[v+4>>2],S[x+8>>2]=S[v+8>>2],S[x+12>>2]=S[v+12>>2],S[x+16>>2]=S[v+16>>2],S[x+20>>2]=S[v+20>>2],S[x+24>>2]=S[v+24>>2],S[x+28>>2]=S[v+28>>2],S[x+32>>2]=S[v+32>>2],S[x+36>>2]=S[v+36>>2],S[x+40>>2]=S[v+40>>2],S[x+44>>2]=S[v+44>>2],S[x+48>>2]=S[v+48>>2],S[x+52>>2]=S[v+52>>2],S[x+56>>2]=S[v+56>>2],S[x+60>>2]=S[v+60>>2],x=x+64|0,v=v+64|0;for(;(x|0)<(E|0);)S[x>>2]=S[v>>2],x=x+4|0,v=v+4|0}else for(E=L-4|0;(x|0)<(E|0);)In[x>>0]=In[v>>0]|0,In[x+1>>0]=In[v+1>>0]|0,In[x+2>>0]=In[v+2>>0]|0,In[x+3>>0]=In[v+3>>0]|0,x=x+4|0,v=v+4|0;for(;(x|0)<(L|0);)In[x>>0]=In[v>>0]|0,x=x+1|0,v=v+1|0;return B|0}function ro(x,v,E){x=x|0,v=v|0,E=E|0;var M=0,L=0,B=0,U=0;if(B=x+E|0,v=v&255,(E|0)>=67){for(;x&3;)In[x>>0]=v,x=x+1|0;for(M=B&-4|0,U=v|v<<8|v<<16|v<<24,L=M-64|0;(x|0)<=(L|0);)S[x>>2]=U,S[x+4>>2]=U,S[x+8>>2]=U,S[x+12>>2]=U,S[x+16>>2]=U,S[x+20>>2]=U,S[x+24>>2]=U,S[x+28>>2]=U,S[x+32>>2]=U,S[x+36>>2]=U,S[x+40>>2]=U,S[x+44>>2]=U,S[x+48>>2]=U,S[x+52>>2]=U,S[x+56>>2]=U,S[x+60>>2]=U,x=x+64|0;for(;(x|0)<(M|0);)S[x>>2]=U,x=x+4|0}for(;(x|0)<(B|0);)In[x>>0]=v,x=x+1|0;return B-E|0}function zc(x){return x=+x,x>=0?+zn(x+.5):+lt(x-.5)}function Ca(x){x=x|0;var v=0,E=0,M=0;return M=Hn()|0,E=S[ni>>2]|0,v=E+x|0,(x|0)>0&(v|0)<(E|0)|(v|0)<0?(Zr(v|0)|0,li(12),-1):(v|0)>(M|0)&&!(Ji(v|0)|0)?(li(12),-1):(S[ni>>2]=v,E|0)}return{___divdi3:Gc,___muldi3:go,___remdi3:YA,___uremdi3:Xd,_areNeighborCells:Tb,_bitshift64Ashr:Mu,_bitshift64Lshr:jt,_bitshift64Shl:un,_calloc:sa,_cellAreaKm2:to,_cellAreaM2:P1,_cellAreaRads2:e0,_cellToBoundary:zA,_cellToCenterChild:kA,_cellToChildPos:al,_cellToChildren:C1,_cellToChildrenSize:eo,_cellToLatLng:Qp,_cellToLocalIj:Su,_cellToParent:bu,_cellToVertex:Pr,_cellToVertexes:Ar,_cellsToDirectedEdge:Eb,_cellsToLinkedMultiPolygon:x1,_childPosToCell:Fc,_compactCells:R1,_destroyLinkedMultiPolygon:VA,_directedEdgeToBoundary:jp,_directedEdgeToCells:Mb,_edgeLengthKm:N1,_edgeLengthM:Mf,_edgeLengthRads:ll,_emscripten_replace_memory:gi,_free:ii,_getBaseCellNumber:Yp,_getDirectedEdgeDestination:E1,_getDirectedEdgeOrigin:wb,_getHexagonAreaAvgKm2:Jp,_getHexagonAreaAvgM2:Og,_getHexagonEdgeLengthAvgKm:Zl,_getHexagonEdgeLengthAvgM:Ef,_getIcosahedronFaces:Zp,_getNumCells:wf,_getPentagons:Ng,_getRes0Cells:_1,_getResolution:zd,_greatCircleDistanceKm:$d,_greatCircleDistanceM:Ig,_greatCircleDistanceRads:HA,_gridDisk:ra,_gridDiskDistances:Zs,_gridDistance:qA,_gridPathCells:Wd,_gridPathCellsSize:$A,_gridRingUnsafe:Uo,_i64Add:Ti,_i64Subtract:bi,_isPentagon:wr,_isResClassIII:ol,_isValidCell:Hd,_isValidDirectedEdge:FA,_isValidVertex:ec,_latLngToCell:Vd,_llvm_maxnum_f64:Nh,_llvm_minnum_f64:Cu,_llvm_round_f64:Qd,_localIjToCell:Cf,_malloc:kc,_maxFaceCount:Db,_maxGridDiskSize:Rl,_maxPolygonToCellsSize:Bc,_memcpy:Bh,_memset:ro,_originToDirectedEdges:w1,_pentagonCount:Eh,_polygonToCells:_g,_readInt64AsDoubleFromPointer:Rf,_res0CellCount:Eg,_round:zc,_sbrk:Ca,_sizeOfCellBoundary:Rh,_sizeOfCoordIJ:Dl,_sizeOfGeoLoop:wa,_sizeOfGeoPolygon:jA,_sizeOfH3Index:cl,_sizeOfLatLng:Kd,_sizeOfLinkedGeoPolygon:Jr,_uncompactCells:Lg,_uncompactCellsSize:D1,_vertexToLatLng:Jl,establishStackSpace:Va,stackAlloc:Yn,stackRestore:er,stackSave:Qs}}(xt,dn,$);e.___divdi3=Te.___divdi3,e.___muldi3=Te.___muldi3,e.___remdi3=Te.___remdi3,e.___uremdi3=Te.___uremdi3,e._areNeighborCells=Te._areNeighborCells,e._bitshift64Ashr=Te._bitshift64Ashr,e._bitshift64Lshr=Te._bitshift64Lshr,e._bitshift64Shl=Te._bitshift64Shl,e._calloc=Te._calloc,e._cellAreaKm2=Te._cellAreaKm2,e._cellAreaM2=Te._cellAreaM2,e._cellAreaRads2=Te._cellAreaRads2,e._cellToBoundary=Te._cellToBoundary,e._cellToCenterChild=Te._cellToCenterChild,e._cellToChildPos=Te._cellToChildPos,e._cellToChildren=Te._cellToChildren,e._cellToChildrenSize=Te._cellToChildrenSize,e._cellToLatLng=Te._cellToLatLng,e._cellToLocalIj=Te._cellToLocalIj,e._cellToParent=Te._cellToParent,e._cellToVertex=Te._cellToVertex,e._cellToVertexes=Te._cellToVertexes,e._cellsToDirectedEdge=Te._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Te._cellsToLinkedMultiPolygon,e._childPosToCell=Te._childPosToCell,e._compactCells=Te._compactCells,e._destroyLinkedMultiPolygon=Te._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Te._directedEdgeToBoundary,e._directedEdgeToCells=Te._directedEdgeToCells,e._edgeLengthKm=Te._edgeLengthKm,e._edgeLengthM=Te._edgeLengthM,e._edgeLengthRads=Te._edgeLengthRads;var tn=e._emscripten_replace_memory=Te._emscripten_replace_memory;e._free=Te._free,e._getBaseCellNumber=Te._getBaseCellNumber,e._getDirectedEdgeDestination=Te._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Te._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Te._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Te._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Te._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Te._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Te._getIcosahedronFaces,e._getNumCells=Te._getNumCells,e._getPentagons=Te._getPentagons,e._getRes0Cells=Te._getRes0Cells,e._getResolution=Te._getResolution,e._greatCircleDistanceKm=Te._greatCircleDistanceKm,e._greatCircleDistanceM=Te._greatCircleDistanceM,e._greatCircleDistanceRads=Te._greatCircleDistanceRads,e._gridDisk=Te._gridDisk,e._gridDiskDistances=Te._gridDiskDistances,e._gridDistance=Te._gridDistance,e._gridPathCells=Te._gridPathCells,e._gridPathCellsSize=Te._gridPathCellsSize,e._gridRingUnsafe=Te._gridRingUnsafe,e._i64Add=Te._i64Add,e._i64Subtract=Te._i64Subtract,e._isPentagon=Te._isPentagon,e._isResClassIII=Te._isResClassIII,e._isValidCell=Te._isValidCell,e._isValidDirectedEdge=Te._isValidDirectedEdge,e._isValidVertex=Te._isValidVertex,e._latLngToCell=Te._latLngToCell,e._llvm_maxnum_f64=Te._llvm_maxnum_f64,e._llvm_minnum_f64=Te._llvm_minnum_f64,e._llvm_round_f64=Te._llvm_round_f64,e._localIjToCell=Te._localIjToCell,e._malloc=Te._malloc,e._maxFaceCount=Te._maxFaceCount,e._maxGridDiskSize=Te._maxGridDiskSize,e._maxPolygonToCellsSize=Te._maxPolygonToCellsSize,e._memcpy=Te._memcpy,e._memset=Te._memset,e._originToDirectedEdges=Te._originToDirectedEdges,e._pentagonCount=Te._pentagonCount,e._polygonToCells=Te._polygonToCells,e._readInt64AsDoubleFromPointer=Te._readInt64AsDoubleFromPointer,e._res0CellCount=Te._res0CellCount,e._round=Te._round,e._sbrk=Te._sbrk,e._sizeOfCellBoundary=Te._sizeOfCellBoundary,e._sizeOfCoordIJ=Te._sizeOfCoordIJ,e._sizeOfGeoLoop=Te._sizeOfGeoLoop,e._sizeOfGeoPolygon=Te._sizeOfGeoPolygon,e._sizeOfH3Index=Te._sizeOfH3Index,e._sizeOfLatLng=Te._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Te._sizeOfLinkedGeoPolygon,e._uncompactCells=Te._uncompactCells,e._uncompactCellsSize=Te._uncompactCellsSize,e._vertexToLatLng=Te._vertexToLatLng,e.establishStackSpace=Te.establishStackSpace;var At=e.stackAlloc=Te.stackAlloc,Lt=e.stackRestore=Te.stackRestore,vn=e.stackSave=Te.stackSave;if(e.asm=Te,e.cwrap=R,e.setValue=p,e.getValue=m,Se){Pe(Se)||(Se=s(Se));{yn();var xn=function(dt){dt.byteLength&&(dt=new Uint8Array(dt)),Y.set(dt,h),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Gt()},Nn=function(){o(Se,xn,function(){throw"could not load memory initializer "+Se})},Fi=Fe(Se);if(Fi)xn(Fi.buffer);else if(e.memoryInitializerRequest){var Dn=function(){var dt=e.memoryInitializerRequest,Ut=dt.response;if(dt.status!==200&&dt.status!==0){var hn=Fe(e.memoryInitializerRequestURL);if(hn)Ut=hn.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+dt.status+", retrying "+Se),Nn();return}}xn(Ut)};e.memoryInitializerRequest.response?setTimeout(Dn,0):e.memoryInitializerRequest.addEventListener("load",Dn)}else Nn()}}var Gn;Rt=function dt(){Gn||Gr(),Gn||(Rt=dt)};function Gr(dt){if(Dt>0||(it(),Dt>0))return;function Ut(){Gn||(Gn=!0,!g&&(et(),Ht(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),_t()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),Ut()},1)):Ut()}e.run=Gr;function Qr(dt){throw e.onAbort&&e.onAbort(dt),dt+="",a(dt),l(dt),g=!0,"abort("+dt+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Qr,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Gr(),i}(typeof yr=="object"?yr:{}),$i="number",_i=$i,VE=$i,wi=$i,Mi=$i,fc=$i,Fn=$i,a9e=[["sizeOfH3Index",$i],["sizeOfLatLng",$i],["sizeOfCellBoundary",$i],["sizeOfGeoLoop",$i],["sizeOfGeoPolygon",$i],["sizeOfLinkedGeoPolygon",$i],["sizeOfCoordIJ",$i],["readInt64AsDoubleFromPointer",$i],["isValidCell",VE,[wi,Mi]],["latLngToCell",_i,[$i,$i,fc,Fn]],["cellToLatLng",_i,[wi,Mi,Fn]],["cellToBoundary",_i,[wi,Mi,Fn]],["maxGridDiskSize",_i,[$i,Fn]],["gridDisk",_i,[wi,Mi,$i,Fn]],["gridDiskDistances",_i,[wi,Mi,$i,Fn,Fn]],["gridRingUnsafe",_i,[wi,Mi,$i,Fn]],["maxPolygonToCellsSize",_i,[Fn,fc,$i,Fn]],["polygonToCells",_i,[Fn,fc,$i,Fn]],["cellsToLinkedMultiPolygon",_i,[Fn,$i,Fn]],["destroyLinkedMultiPolygon",null,[Fn]],["compactCells",_i,[Fn,Fn,$i,$i]],["uncompactCells",_i,[Fn,$i,$i,Fn,$i,fc]],["uncompactCellsSize",_i,[Fn,$i,$i,fc,Fn]],["isPentagon",VE,[wi,Mi]],["isResClassIII",VE,[wi,Mi]],["getBaseCellNumber",$i,[wi,Mi]],["getResolution",$i,[wi,Mi]],["maxFaceCount",_i,[wi,Mi,Fn]],["getIcosahedronFaces",_i,[wi,Mi,Fn]],["cellToParent",_i,[wi,Mi,fc,Fn]],["cellToChildren",_i,[wi,Mi,fc,Fn]],["cellToCenterChild",_i,[wi,Mi,fc,Fn]],["cellToChildrenSize",_i,[wi,Mi,fc,Fn]],["cellToChildPos",_i,[wi,Mi,fc,Fn]],["childPosToCell",_i,[$i,$i,wi,Mi,fc,Fn]],["areNeighborCells",_i,[wi,Mi,wi,Mi,Fn]],["cellsToDirectedEdge",_i,[wi,Mi,wi,Mi,Fn]],["getDirectedEdgeOrigin",_i,[wi,Mi,Fn]],["getDirectedEdgeDestination",_i,[wi,Mi,Fn]],["isValidDirectedEdge",VE,[wi,Mi]],["directedEdgeToCells",_i,[wi,Mi,Fn]],["originToDirectedEdges",_i,[wi,Mi,Fn]],["directedEdgeToBoundary",_i,[wi,Mi,Fn]],["gridDistance",_i,[wi,Mi,wi,Mi,Fn]],["gridPathCells",_i,[wi,Mi,wi,Mi,Fn]],["gridPathCellsSize",_i,[wi,Mi,wi,Mi,Fn]],["cellToLocalIj",_i,[wi,Mi,wi,Mi,$i,Fn]],["localIjToCell",_i,[wi,Mi,Fn,$i,Fn]],["getHexagonAreaAvgM2",_i,[fc,Fn]],["getHexagonAreaAvgKm2",_i,[fc,Fn]],["getHexagonEdgeLengthAvgM",_i,[fc,Fn]],["getHexagonEdgeLengthAvgKm",_i,[fc,Fn]],["greatCircleDistanceM",$i,[Fn,Fn]],["greatCircleDistanceKm",$i,[Fn,Fn]],["greatCircleDistanceRads",$i,[Fn,Fn]],["cellAreaM2",_i,[wi,Mi,Fn]],["cellAreaKm2",_i,[wi,Mi,Fn]],["cellAreaRads2",_i,[wi,Mi,Fn]],["edgeLengthM",_i,[wi,Mi,Fn]],["edgeLengthKm",_i,[wi,Mi,Fn]],["edgeLengthRads",_i,[wi,Mi,Fn]],["getNumCells",_i,[fc,Fn]],["getRes0Cells",_i,[Fn]],["res0CellCount",$i],["getPentagons",_i,[$i,Fn]],["pentagonCount",$i],["cellToVertex",_i,[wi,Mi,$i,Fn]],["cellToVertexes",_i,[wi,Mi,Fn]],["vertexToLatLng",_i,[wi,Mi,Fn]],["isValidVertex",VE,[wi,Mi]]],l9e=0,c9e=1,u9e=2,f9e=3,ple=4,h9e=5,d9e=6,p9e=7,A9e=8,m9e=9,g9e=10,y9e=11,v9e=12,x9e=13,b9e=14,_9e=15,Yl={};Yl[l9e]="Success";Yl[c9e]="The operation failed but a more specific error is not available";Yl[u9e]="Argument was outside of acceptable range";Yl[f9e]="Latitude or longitude arguments were outside of acceptable range";Yl[ple]="Resolution argument was outside of acceptable range";Yl[h9e]="Cell argument was not valid";Yl[d9e]="Directed edge argument was not valid";Yl[p9e]="Undirected edge argument was not valid";Yl[A9e]="Vertex argument was not valid";Yl[m9e]="Pentagon distortion was encountered";Yl[g9e]="Duplicate input";Yl[y9e]="Cell arguments were not neighbors";Yl[v9e]="Cell arguments had incompatible resolutions";Yl[x9e]="Memory allocation failed";Yl[b9e]="Bounds of provided memory were insufficient";Yl[_9e]="Mode or flags argument was not valid";var S9e=1e3,Ale=1001,mle=1002,eN={};eN[S9e]="Unknown unit";eN[Ale]="Array length out of bounds";eN[mle]="Got unexpected null value for H3 index";var T9e="Unknown error";function gle(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||T9e)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function yle(i,e){var t=arguments.length===2?{value:e}:{};return gle(Yl,i,t)}function vle(i,e){var t=arguments.length===2?{value:e}:{};return gle(eN,i,t)}function kM(i){if(i!==0)throw yle(i)}var pf={};a9e.forEach(function(e){pf[e[0]]=yr.cwrap.apply(yr,e)});var b2=16,GM=4,NS=8,E9e=8,r8=pf.sizeOfH3Index(),uz=pf.sizeOfLatLng(),w9e=pf.sizeOfCellBoundary(),M9e=pf.sizeOfGeoPolygon(),Yw=pf.sizeOfGeoLoop();pf.sizeOfLinkedGeoPolygon();pf.sizeOfCoordIJ();function C9e(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw yle(ple,i);return i}function R9e(i){if(!i)throw vle(mle);return i}var D9e=Math.pow(2,32)-1;function L9e(i){if(i>D9e)throw vle(Ale,i);return i}var P9e=/[^0-9a-fA-F]/;function xle(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||P9e.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),b2),t=parseInt(i.substring(i.length-8),b2);return[t,e]}function jQ(i){if(i>=0)return i.toString(b2);i=i&2147483647;var e=ble(8,i.toString(b2)),t=(parseInt(e[0],b2)+8).toString(b2);return e=t+e.substring(1),e}function N9e(i,e){return jQ(e)+ble(8,jQ(i))}function ble(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function WQ(i,e,t){for(var n=i.length,r=yr._calloc(n,uz),s=t?1:0,o=t?0:1,a=0;a<n*2;a+=2)yr.HEAPF64.set([i[a/2][s],i[a/2][o]].map(Ele),r/NS+a);return yr.HEAPU32.set([n,r],e/GM),e}function B9e(i,e){var t=i.length-1,n=yr._calloc(M9e),r=0,s=r+Yw,o=s+GM;WQ(i[0],n+r,e);var a;if(t>0){a=yr._calloc(t,Yw);for(var l=0;l<t;l++)WQ(i[l+1],a+Yw*l,e)}return yr.setValue(n+s,t,"i32"),yr.setValue(n+o,a,"i32"),n}function I9e(i){var e=0,t=e+Yw,n=t+GM,r=GM;yr._free(yr.getValue(i+e+r,"i8*"));var s=yr.getValue(i+t,"i32");if(s>0){for(var o=yr.getValue(i+n,"i32"),a=0;a<s;a++)yr._free(yr.getValue(o+Yw*a+r,"i8*"));yr._free(o)}yr._free(i)}function _le(i,e){e===void 0&&(e=0);var t=yr.getValue(i+r8*e,"i32"),n=yr.getValue(i+r8*e+GM,"i32");return n?N9e(t,n):null}function O9e(i){return pf.readInt64AsDoubleFromPointer(i)}function F9e(i,e){for(var t=[],n=0;n<e;n++){var r=_le(i,n);r!==null&&t.push(r)}return t}function s8(i){return H9e(yr.getValue(i,"double"))}function U9e(i){return[s8(i),s8(i+NS)]}function k9e(i){return[s8(i+NS),s8(i)]}function G9e(i,e,t){for(var n=yr.getValue(i,"i32"),r=i+NS,s=[],o=k9e,a=0;a<n*2;a+=2)s.push(o(r+NS*a));return s.push(s[0]),s}function z9e(i,e,t){var n=yr._malloc(uz);yr.HEAPF64.set([i,e].map(Ele),n/NS);var r=yr._malloc(r8);try{return kM(pf.latLngToCell(n,t,r)),R9e(_le(r))}finally{yr._free(r),yr._free(n)}}function Sle(i){var e=yr._malloc(uz),t=xle(i),n=t[0],r=t[1];try{return kM(pf.cellToLatLng(n,r,e)),U9e(e)}finally{yr._free(e)}}function Tle(i,e){var t=yr._malloc(w9e),n=xle(i),r=n[0],s=n[1];try{return kM(pf.cellToBoundary(r,s,t)),G9e(t,e,e)}finally{yr._free(t)}}function KQ(i,e,t){if(C9e(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=B9e(n,t),s=yr._malloc(E9e);try{kM(pf.maxPolygonToCellsSize(r,e,0,s));var o=L9e(O9e(s)),a=yr._calloc(o,r8);try{return kM(pf.polygonToCells(r,e,0,a)),F9e(a,o)}finally{yr._free(a)}}finally{yr._free(s),I9e(r)}}function Ele(i){return i*Math.PI/180}function H9e(i){return i*180/Math.PI}function V9e(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q9e=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class $9e{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=q9e,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:r,object:s}=e;if(t={material:this.getMaterialData(r),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:o,height:a}=e.context;t.bufferWidth=o,t.bufferHeight=a}this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const r=e[n];t[n]={version:r.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e){const{object:t,material:n,geometry:r}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(t.matrixWorld)!==!0)return s.worldMatrix.copy(t.matrixWorld),!1;const o=s.material;for(const g in o){const b=o[g],T=n[g];if(b.equals!==void 0){if(b.equals(T)===!1)return b.copy(T),!1}else if(T.isTexture===!0){if(b.id!==T.id||b.version!==T.version)return b.id=T.id,b.version=T.version,!1}else if(b!==T)return o[g]=T,!1}if(o.transmission>0){const{width:g,height:b}=e.context;if(s.bufferWidth!==g||s.bufferHeight!==b)return s.bufferWidth=g,s.bufferHeight=b,!1}const a=s.geometry,l=r.attributes,c=a.attributes,u=Object.keys(c),f=Object.keys(l);if(a.id!==r.id)return a.id=r.id,!1;if(u.length!==f.length)return s.geometry.attributes=this.getAttributesData(l),!1;for(const g of u){const b=c[g],T=l[g];if(T===void 0)return delete c[g],!1;if(b.version!==T.version)return b.version=T.version,!1}const h=r.index,p=a.indexVersion,m=h?h.version:null;if(p!==m)return a.indexVersion=m,!1;if(a.drawRange.start!==r.drawRange.start||a.drawRange.count!==r.drawRange.count)return a.drawRange.start=r.drawRange.start,a.drawRange.count=r.drawRange.count,!1;if(s.morphTargetInfluences){let g=!1;for(let b=0;b<s.morphTargetInfluences.length;b++)s.morphTargetInfluences[b]!==t.morphTargetInfluences[b]&&(g=!0);if(g)return!0}return s.center&&s.center.equals(t.center)===!1?(s.center.copy(t.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return r||s?!1:this.equals(e)!==!0}}function zM(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const wle=i=>zM(i),tN=i=>zM(i),HM=(...i)=>zM(i);function Mle(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:r}of o8(i))t.push(zM(n.slice(0,-4)),r.getCacheKey(e));return zM(t)}function*o8(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(typeof n=="object")for(const r in n){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}const j9e=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),YQ=new WeakMap;function Cle(i){return j9e.get(i)}function a8(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function fz(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function Uy(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function Rle(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Qt(...e):t==="vec2"?new at(...e):t==="vec3"?new he(...e):t==="vec4"?new Ln(...e):t==="mat2"?new T3(...e):t==="mat3"?new Si(...e):t==="mat4"?new rn(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?Ple(e[0]):null}function Dle(i){let e=YQ.get(i);return e===void 0&&(e={},YQ.set(i,e)),e}function Lle(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function Ple(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const Nk={VERTEX:"vertex",FRAGMENT:"fragment"},Pi={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},W9e={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},_c={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},Nle=["fragment","vertex"],Bk=["setup","analyze","generate"],Ik=[...Nle,"compute"],db=["x","y","z","w"];let K9e=0;class ti extends hh{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Pi.NONE,this.updateBeforeType=Pi.NONE,this.updateAfterType=Pi.NONE,this.uuid=_l.generateUUID(),this.version=0,this.global=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:K9e++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Pi.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Pi.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Pi.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of o8(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=HM(Mle(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return t.outputNode||null}analyze(e){if(e.increaseUsage(this)===1){const n=e.getNodeProperties(this);for(const r of Object.values(n))r&&r.isNode===!0&&r.build(e)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);let r=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){o.initialized=!0;const a=this.setup(e),l=a&&a.isNode===!0;for(const c of Object.values(o))c&&c.isNode===!0&&c.build(e);l&&a.build(e),o.outputNode=a}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const a=this.getNodeType(e),l=e.getDataFromNode(this);r=l.snippet,r===void 0?(r=this.generate(e)||"",l.snippet=r):l.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),r=e.format(r,a,t)}else r=this.generate(e,t)||"";return e.removeChain(this),e.addSequentialNode(this),r}getSerializeChildren(){return o8(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:o}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=o.toJSON(e.meta).uuid):n[r]=o.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const o=e.inputNodes[n][s];r[s]=t[o]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(r){const a=o(e.textures),l=o(e.images),c=o(e.nodes);a.length>0&&(s.textures=a),l.length>0&&(s.images=l),c.length>0&&(s.nodes=c)}return s}}class pb extends ti{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.node.build(e),n=this.indexNode.build(e,"uint");return`${t}[ ${n} ]`}}class Ble extends ti{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class ia extends ti{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,r),a=e.getVarFromNode(this,null,r),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`,this),s.snippet=o,s.propertyName=l,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class Y9e extends ia{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=this.nodes,s=e.getComponentType(n),o=[];for(const l of r){let c=l.build(e);const u=e.getComponentType(l.getNodeType(e));u!==s&&(c=e.format(c,u,s)),o.push(c)}const a=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(a,n,t)}}const X9e=db.join("");class Ok extends ti{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(db.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let o=null;this.getVectorLength()>=r&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,o);this.components.length===r&&this.components===X9e.slice(0,this.components.length)?s=e.format(l,o,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Q9e extends ia{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),o=e.getComponentType(r.getNodeType(e)),a=e.getTypeFromLength(n.length,o),l=r.build(e,a),c=t.build(e,s),u=e.getTypeLength(s),f=[];for(let h=0;h<u;h++){const p=db[h];p===n[0]?(f.push(l),h+=n.length-1):f.push(c+"."+p)}return`${e.getType(s)}( ${f.join(", ")} )`}}class Z9e extends ia{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),o=e.getVarFromNode(this),a=e.getPropertyName(o);e.addLineFlowCode(a+" = "+s,this);const l=e.getTypeLength(r),c=[];let u=0;for(let f=0;f<l;f++){const h=db[f];h===t[u]?(c.push("1.0 - "+(a+"."+h)),u++):c.push(a+"."+h)}return`${e.getType(r)}( ${c.join(", ")} )`}}class hz extends ti{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Uy(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Uy(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Lle(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?Rle(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const XQ=/float|u?int/;class Gp extends hz{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return XQ.test(n)&&XQ.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class J9e extends ti{static get type(){return"MemberNode"}constructor(e,t){super(),this.node=e,this.property=t,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let BS=null;const _2=new Map;function Ct(i,e){if(_2.has(i)){console.warn(`Redefinition of method chaining ${i}`);return}if(typeof e!="function")throw new Error(`Node element ${i} is not a function`);_2.set(i,e)}const Ile=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),QQ=i=>Ile(i).split("").sort().join(""),Ole={setup(i,e){const t=e.shift();return i(V3(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>(BS.assign(t,...n),t);if(_2.has(e)){const n=_2.get(e);return i.isStackNode?(...r)=>t.add(n(...r)):(...r)=>n(t,...r)}else{if(e==="self")return i;if(e.endsWith("Assign")&&_2.has(e.slice(0,e.length-6))){const n=_2.get(e.slice(0,e.length-6));return i.isStackNode?(...r)=>t.assign(r[0],n(...r)):(...r)=>t.assign(n(t,...r))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=Ile(e),It(new Ok(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=QQ(e.slice(3).toLowerCase()),n=>It(new Q9e(i,e,n));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=QQ(e.slice(4).toLowerCase()),()=>It(new Z9e(It(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),It(new Ok(i,e));if(/^\d+$/.test(e)===!0)return It(new pb(t,new Gp(Number(e),"uint")));if(/^get$/.test(e)===!0)return n=>It(new J9e(t,n))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},AO=new WeakMap,ZQ=new WeakMap,eGe=function(i,e=null){const t=Uy(i);if(t==="node"){let n=AO.get(i);return n===void 0&&(n=new Proxy(i,Ole),AO.set(i,n),AO.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return It(Fk(i,e));if(t==="shader")return Xe(i)}return i},tGe=function(i,e=null){for(const t in i)i[t]=It(i[t],e);return i},nGe=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=It(i[n],e);return i},iGe=function(i,e=null,t=null,n=null){const r=s=>It(n!==null?Object.assign(s,n):s);return e===null?(...s)=>r(new i(...px(s))):t!==null?(t=It(t),(...s)=>r(new i(e,...px(s),t))):(...s)=>r(new i(e,...px(s)))},rGe=function(i,...e){return It(new i(...px(e)))};class sGe extends ti{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,inputNodes:n}=this,r=e.getNodeProperties(t);if(r.onceOutput)return r.onceOutput;let s=null;if(t.layout){let o=ZQ.get(e.constructor);o===void 0&&(o=new WeakMap,ZQ.set(e.constructor,o));let a=o.get(t);a===void 0&&(a=It(e.buildFunctionNode(t)),o.set(t,a)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(a),s=It(a.call(n))}else{const o=t.jsFunc,a=n!==null||o.length>1?o(n||[],e):o(e);s=It(a)}return t.once&&(r.onceOutput=s),s}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class oGe extends ti{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return V3(e),It(new sGe(this,e))}setup(){return this.call()}}const aGe=[!1,!0],lGe=[0,1,2,3],cGe=[-1,-2],Fle=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],dz=new Map;for(const i of aGe)dz.set(i,new Gp(i));const pz=new Map;for(const i of lGe)pz.set(i,new Gp(i,"uint"));const Az=new Map([...pz].map(i=>new Gp(i.value,"int")));for(const i of cGe)Az.set(i,new Gp(i,"int"));const nN=new Map([...Az].map(i=>new Gp(i.value)));for(const i of Fle)nN.set(i,new Gp(i));for(const i of Fle)nN.set(-i,new Gp(-i));const iN={bool:dz,uint:pz,ints:Az,float:nN},JQ=new Map([...dz,...nN]),Fk=(i,e)=>JQ.has(i)?JQ.get(i):i.isNode===!0?i:new Gp(i,e),uGe=i=>{try{return i.getNodeType()}catch{return}},Ha=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>typeof r!="object"))&&(t=[Rle(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return It(e.get(t[0]));if(t.length===1){const r=Fk(t[0],i);return uGe(r)===i?It(r):It(new Ble(r,i))}const n=t.map(r=>Fk(r));return It(new Y9e(n,i))}},VM=i=>typeof i=="object"&&i!==null?i.value:i,Ule=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function Xw(i,e){return new Proxy(new oGe(i,e),Ole)}const It=(i,e=null)=>eGe(i,e),V3=(i,e=null)=>new tGe(i,e),px=(i,e=null)=>new nGe(i,e),Pt=(...i)=>new iGe(...i),An=(...i)=>new rGe(...i),Xe=(i,e)=>{const t=new Xw(i,e),n=(...r)=>{let s;return V3(r),r[0]&&r[0].isNode?s=[...r]:s=r[0],t.call(s)};return n.shaderNode=t,n.setLayout=r=>(t.setLayout(r),n),n.once=()=>(t.once=!0,n),n},fGe=(...i)=>(console.warn("TSL.ShaderNode: tslFn() has been renamed to Fn()."),Xe(...i));Ct("toGlobal",i=>(i.global=!0,i));const qM=i=>{BS=i},mz=()=>BS,Hi=(...i)=>BS.If(...i);function kle(i){return BS&&BS.add(i),i}Ct("append",kle);const Gle=new Ha("color"),Me=new Ha("float",iN.float),Oe=new Ha("int",iN.ints),Mn=new Ha("uint",iN.uint),fg=new Ha("bool",iN.bool),qt=new Ha("vec2"),Xa=new Ha("ivec2"),zle=new Ha("uvec2"),Hle=new Ha("bvec2"),He=new Ha("vec3"),Vle=new Ha("ivec3"),mT=new Ha("uvec3"),gz=new Ha("bvec3"),Vn=new Ha("vec4"),qle=new Ha("ivec4"),$le=new Ha("uvec4"),jle=new Ha("bvec4"),rN=new Ha("mat2"),Mc=new Ha("mat3"),Ax=new Ha("mat4"),hGe=(i="")=>It(new Gp(i,"string")),dGe=i=>It(new Gp(i,"ArrayBuffer"));Ct("toColor",Gle);Ct("toFloat",Me);Ct("toInt",Oe);Ct("toUint",Mn);Ct("toBool",fg);Ct("toVec2",qt);Ct("toIVec2",Xa);Ct("toUVec2",zle);Ct("toBVec2",Hle);Ct("toVec3",He);Ct("toIVec3",Vle);Ct("toUVec3",mT);Ct("toBVec3",gz);Ct("toVec4",Vn);Ct("toIVec4",qle);Ct("toUVec4",$le);Ct("toBVec4",jle);Ct("toMat2",rN);Ct("toMat3",Mc);Ct("toMat4",Ax);const Wle=Pt(pb),Kle=(i,e)=>It(new Ble(It(i),e)),pGe=(i,e)=>It(new Ok(It(i),e));Ct("element",Wle);Ct("convert",Kle);class eZ extends ia{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const Yle=(...i)=>{let e;if(i.length===1){const t=i[0];e=new eZ(null,t.length,t)}else{const t=i[0],n=i[1];e=new eZ(t,n)}return It(e)};Ct("toArray",(i,e)=>Yle(Array(e).fill(i)));class Xle extends ti{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const Qle=i=>new Xle(i),sN=(i,e=0)=>new Xle(i,!0,e),Zle=sN("frame"),ri=sN("render"),yz=Qle("object");class q3 extends hz{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=yz}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(r=>{const s=e(r,n);s!==void 0&&(this.value=s)},t)}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,n,t)}}const Wn=(i,e)=>{const t=Ule(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return It(new q3(n,t))};class Xr extends ti{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Jle=(i,e)=>It(new Xr(i,e)),$M=(i,e)=>It(new Xr(i,e,!0)),Fr=An(Xr,"vec4","DiffuseColor"),Uk=An(Xr,"vec3","EmissiveColor"),z0=An(Xr,"float","Roughness"),jM=An(Xr,"float","Metalness"),l8=An(Xr,"float","Clearcoat"),WM=An(Xr,"float","ClearcoatRoughness"),Qv=An(Xr,"vec3","Sheen"),oN=An(Xr,"float","SheenRoughness"),aN=An(Xr,"float","Iridescence"),vz=An(Xr,"float","IridescenceIOR"),xz=An(Xr,"float","IridescenceThickness"),c8=An(Xr,"float","AlphaT"),My=An(Xr,"float","Anisotropy"),Qw=An(Xr,"vec3","AnisotropyT"),mx=An(Xr,"vec3","AnisotropyB"),$u=An(Xr,"color","SpecularColor"),KM=An(Xr,"float","SpecularF90"),u8=An(Xr,"float","Shininess"),YM=An(Xr,"vec4","Output"),yD=An(Xr,"float","dashSize"),kk=An(Xr,"float","gapSize"),AGe=An(Xr,"float","pointWidth"),Zw=An(Xr,"float","IOR"),f8=An(Xr,"float","Transmission"),bz=An(Xr,"float","Thickness"),_z=An(Xr,"float","AttenuationDistance"),Sz=An(Xr,"color","AttenuationColor"),Tz=An(Xr,"float","Dispersion");class mGe extends ia{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return db.join("").slice(0,n)!==t.components}return!1}generate(e,t){const{targetNode:n,sourceNode:r}=this,s=this.needsSplitAssign(e),o=n.getNodeType(e),a=n.context({assign:!0}).build(e),l=r.build(e,o),c=r.getNodeType(e),u=e.getDataFromNode(this);let f;if(u.initialized===!0)t!=="void"&&(f=a);else if(s){const h=e.getVarFromNode(this,null,o),p=e.getPropertyName(h);e.addLineFlowCode(`${p} = ${l}`,this);const m=n.node.context({assign:!0}).build(e);for(let g=0;g<n.components.length;g++){const b=n.components[g];e.addLineFlowCode(`${m}.${b} = ${p}[ ${g} ]`,this)}t!=="void"&&(f=a)}else f=`${a} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(f,this),t!=="void"&&(f=a));return u.initialized=!0,e.format(f,o,t)}}const ece=Pt(mGe);Ct("assign",ece);class gGe extends ia{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters,o=(l,c)=>{const u=c.type,f=u==="pointer";let h;return f?h="&"+l.build(e):h=l.build(e,u),h};if(Array.isArray(s))for(let l=0;l<s.length;l++)t.push(o(s[l],r[l]));else for(const l of r){const c=s[l.name];if(c!==void 0)t.push(o(c,l));else throw new Error(`FunctionCallNode: Input '${l.name}' not found in FunctionNode.`)}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const tce=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?px(e):V3(e[0]),It(new gGe(It(i),e)));Ct("call",tce);class Ao extends ia{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new Ao(e,t,n);for(let o=0;o<r.length-1;o++)s=new Ao(e,s,r[o]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getNodeType(e,t){const n=this.op,r=this.aNode,s=this.bNode,o=r.getNodeType(e),a=typeof s<"u"?s.getNodeType(e):null;if(o==="void"||a==="void")return"void";if(n==="%")return o;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(o);if(n==="!"||n==="=="||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="<"||n===">"||n==="<="||n===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else{if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o);if(e.isMatrix(a))return o}else if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a)}return e.getTypeLength(a)>e.getTypeLength(o)?a:o}}generate(e,t){const n=this.op,r=this.aNode,s=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=r.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="?e.isVector(a)?l=a:a!==l&&(a=l="float"):n===">>"||n==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(a):e.isMatrix(l)||(a=l=o):e.isMatrix(l)?a==="float"?a="float":e.isVector(a)?a=e.getVectorFromMatrix(l):a=l=o:a=l=o):a=l=o;const c=r.build(e,a),u=typeof s<"u"?s.build(e,l):null,f=e.getTypeLength(t),h=e.getFunctionOperator(n);if(t!=="void")return n==="<"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} < ${u} )`,o,t):n==="<="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} <= ${u} )`,o,t):n===">"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} > ${u} )`,o,t):n===">="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} >= ${u} )`,o,t):n==="!"||n==="~"?e.format(`(${n}${c})`,a,t):h?e.format(`${h}( ${c}, ${u} )`,o,t):e.isMatrix(a)&&l==="float"?e.format(`( ${u} ${n} ${c} )`,o,t):a==="float"&&e.isMatrix(l)?e.format(`${c} ${n} ${u}`,o,t):e.format(`( ${c} ${n} ${u} )`,o,t);if(a!=="void")return h?e.format(`${h}( ${c}, ${u} )`,o,t):e.isMatrix(a)&&l==="float"?e.format(`${u} ${n} ${c}`,o,t):e.format(`${c} ${n} ${u}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const ya=Pt(Ao,"+"),xr=Pt(Ao,"-"),Ni=Pt(Ao,"*"),Bp=Pt(Ao,"/"),Ez=Pt(Ao,"%"),nce=Pt(Ao,"=="),ice=Pt(Ao,"!="),rce=Pt(Ao,"<"),wz=Pt(Ao,">"),sce=Pt(Ao,"<="),oce=Pt(Ao,">="),ace=Pt(Ao,"&&"),lce=Pt(Ao,"||"),cce=Pt(Ao,"!"),uce=Pt(Ao,"^^"),fce=Pt(Ao,"&"),hce=Pt(Ao,"~"),dce=Pt(Ao,"|"),pce=Pt(Ao,"^"),Ace=Pt(Ao,"<<"),mce=Pt(Ao,">>");Ct("add",ya);Ct("sub",xr);Ct("mul",Ni);Ct("div",Bp);Ct("modInt",Ez);Ct("equal",nce);Ct("notEqual",ice);Ct("lessThan",rce);Ct("greaterThan",wz);Ct("lessThanEqual",sce);Ct("greaterThanEqual",oce);Ct("and",ace);Ct("or",lce);Ct("not",cce);Ct("xor",uce);Ct("bitAnd",fce);Ct("bitNot",hce);Ct("bitOr",dce);Ct("bitXor",pce);Ct("shiftLeft",Ace);Ct("shiftRight",mce);const gce=(...i)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),Ez(...i));Ct("remainder",gce);class Qe extends ia{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){super(),this.method=e,this.aNode=t,this.bNode=n,this.cNode=r,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(n)?0:e.getTypeLength(n),a=e.isMatrix(r)?0:e.getTypeLength(r);return s>o&&s>a?t:o>a?n:a>s?r:t}getNodeType(e){const t=this.method;return t===Qe.LENGTH||t===Qe.DISTANCE||t===Qe.DOT?"float":t===Qe.CROSS?"vec3":t===Qe.ALL?"bool":t===Qe.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===Qe.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){let n=this.method;const r=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.coordinateSystem;if(n===Qe.TRANSFORM_DIRECTION){let u=o,f=a;e.isMatrix(u.getNodeType(e))?f=Vn(He(f),0):u=Vn(He(u),0);const h=Ni(u,f).xyz;return hg(h).build(e,t)}else{if(n===Qe.NEGATE)return e.format("( - "+o.build(e,s)+" )",r,t);if(n===Qe.ONE_MINUS)return xr(1,o).build(e,t);if(n===Qe.RECIPROCAL)return Bp(1,o).build(e,t);if(n===Qe.DIFFERENCE)return Ls(xr(o,a)).build(e,t);{const u=[];return n===Qe.CROSS||n===Qe.MOD?u.push(o.build(e,r),a.build(e,r)):c===yc&&n===Qe.STEP?u.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s),a.build(e,s)):c===yc&&(n===Qe.MIN||n===Qe.MAX)||n===Qe.MOD?u.push(o.build(e,s),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s)):n===Qe.REFRACT?u.push(o.build(e,s),a.build(e,s),l.build(e,"float")):n===Qe.MIX?u.push(o.build(e,s),a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):(c===Pp&&n===Qe.ATAN&&a!==null&&(n="atan2"),u.push(o.build(e,s)),a!==null&&u.push(a.build(e,s)),l!==null&&u.push(l.build(e,s))),e.format(`${e.getMethod(n,r)}( ${u.join(", ")} )`,r,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Qe.ALL="all";Qe.ANY="any";Qe.RADIANS="radians";Qe.DEGREES="degrees";Qe.EXP="exp";Qe.EXP2="exp2";Qe.LOG="log";Qe.LOG2="log2";Qe.SQRT="sqrt";Qe.INVERSE_SQRT="inversesqrt";Qe.FLOOR="floor";Qe.CEIL="ceil";Qe.NORMALIZE="normalize";Qe.FRACT="fract";Qe.SIN="sin";Qe.COS="cos";Qe.TAN="tan";Qe.ASIN="asin";Qe.ACOS="acos";Qe.ATAN="atan";Qe.ABS="abs";Qe.SIGN="sign";Qe.LENGTH="length";Qe.NEGATE="negate";Qe.ONE_MINUS="oneMinus";Qe.DFDX="dFdx";Qe.DFDY="dFdy";Qe.ROUND="round";Qe.RECIPROCAL="reciprocal";Qe.TRUNC="trunc";Qe.FWIDTH="fwidth";Qe.TRANSPOSE="transpose";Qe.BITCAST="bitcast";Qe.EQUALS="equals";Qe.MIN="min";Qe.MAX="max";Qe.MOD="mod";Qe.STEP="step";Qe.REFLECT="reflect";Qe.DISTANCE="distance";Qe.DIFFERENCE="difference";Qe.DOT="dot";Qe.CROSS="cross";Qe.POW="pow";Qe.TRANSFORM_DIRECTION="transformDirection";Qe.MIX="mix";Qe.CLAMP="clamp";Qe.REFRACT="refract";Qe.SMOOTHSTEP="smoothstep";Qe.FACEFORWARD="faceforward";const yce=Me(1e-6),yGe=Me(1e6),h8=Me(Math.PI),vGe=Me(Math.PI*2),Mz=Pt(Qe,Qe.ALL),vce=Pt(Qe,Qe.ANY),xce=Pt(Qe,Qe.RADIANS),bce=Pt(Qe,Qe.DEGREES),Cz=Pt(Qe,Qe.EXP),IS=Pt(Qe,Qe.EXP2),lN=Pt(Qe,Qe.LOG),nA=Pt(Qe,Qe.LOG2),CA=Pt(Qe,Qe.SQRT),Rz=Pt(Qe,Qe.INVERSE_SQRT),iA=Pt(Qe,Qe.FLOOR),cN=Pt(Qe,Qe.CEIL),hg=Pt(Qe,Qe.NORMALIZE),vg=Pt(Qe,Qe.FRACT),Qf=Pt(Qe,Qe.SIN),Lm=Pt(Qe,Qe.COS),_ce=Pt(Qe,Qe.TAN),Sce=Pt(Qe,Qe.ASIN),Tce=Pt(Qe,Qe.ACOS),Dz=Pt(Qe,Qe.ATAN),Ls=Pt(Qe,Qe.ABS),XM=Pt(Qe,Qe.SIGN),Xm=Pt(Qe,Qe.LENGTH),Ece=Pt(Qe,Qe.NEGATE),wce=Pt(Qe,Qe.ONE_MINUS),Lz=Pt(Qe,Qe.DFDX),Pz=Pt(Qe,Qe.DFDY),Mce=Pt(Qe,Qe.ROUND),Cce=Pt(Qe,Qe.RECIPROCAL),Nz=Pt(Qe,Qe.TRUNC),Rce=Pt(Qe,Qe.FWIDTH),Dce=Pt(Qe,Qe.TRANSPOSE),xGe=Pt(Qe,Qe.BITCAST),Lce=Pt(Qe,Qe.EQUALS),Af=Pt(Qe,Qe.MIN),na=Pt(Qe,Qe.MAX),Bz=Pt(Qe,Qe.MOD),uN=Pt(Qe,Qe.STEP),Pce=Pt(Qe,Qe.REFLECT),Nce=Pt(Qe,Qe.DISTANCE),Bce=Pt(Qe,Qe.DIFFERENCE),d1=Pt(Qe,Qe.DOT),fN=Pt(Qe,Qe.CROSS),Cp=Pt(Qe,Qe.POW),Iz=Pt(Qe,Qe.POW,2),Ice=Pt(Qe,Qe.POW,3),Oce=Pt(Qe,Qe.POW,4),Fce=Pt(Qe,Qe.TRANSFORM_DIRECTION),Uce=i=>Ni(XM(i),Cp(Ls(i),1/3)),Oz=i=>d1(i,i),Kr=Pt(Qe,Qe.MIX),AA=(i,e=0,t=1)=>It(new Qe(Qe.CLAMP,It(i),It(e),It(t))),kce=i=>AA(i),Fz=Pt(Qe,Qe.REFRACT),mA=Pt(Qe,Qe.SMOOTHSTEP),Uz=Pt(Qe,Qe.FACEFORWARD),Gce=Xe(([i])=>{const n=43758.5453,r=d1(i.xy,qt(12.9898,78.233)),s=Bz(r,h8);return vg(Qf(s).mul(n))}),zce=(i,e,t)=>Kr(e,t,i),Hce=(i,e,t)=>mA(e,t,i),Vce=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),Dz(i,e)),bGe=Uz,_Ge=Rz;Ct("all",Mz);Ct("any",vce);Ct("equals",Lce);Ct("radians",xce);Ct("degrees",bce);Ct("exp",Cz);Ct("exp2",IS);Ct("log",lN);Ct("log2",nA);Ct("sqrt",CA);Ct("inverseSqrt",Rz);Ct("floor",iA);Ct("ceil",cN);Ct("normalize",hg);Ct("fract",vg);Ct("sin",Qf);Ct("cos",Lm);Ct("tan",_ce);Ct("asin",Sce);Ct("acos",Tce);Ct("atan",Dz);Ct("abs",Ls);Ct("sign",XM);Ct("length",Xm);Ct("lengthSq",Oz);Ct("negate",Ece);Ct("oneMinus",wce);Ct("dFdx",Lz);Ct("dFdy",Pz);Ct("round",Mce);Ct("reciprocal",Cce);Ct("trunc",Nz);Ct("fwidth",Rce);Ct("atan2",Vce);Ct("min",Af);Ct("max",na);Ct("mod",Bz);Ct("step",uN);Ct("reflect",Pce);Ct("distance",Nce);Ct("dot",d1);Ct("cross",fN);Ct("pow",Cp);Ct("pow2",Iz);Ct("pow3",Ice);Ct("pow4",Oce);Ct("transformDirection",Fce);Ct("mix",zce);Ct("clamp",AA);Ct("refract",Fz);Ct("smoothstep",Hce);Ct("faceForward",Uz);Ct("difference",Bce);Ct("saturate",kce);Ct("cbrt",Uce);Ct("transpose",Dce);Ct("rand",Gce);class SGe extends ti{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return this.setup(e),this.getNodeType(e);const r=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(r))return s}return r}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=n.context({nodeBlock:n}),o.elseNode=r?r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:o,elseNode:a}=e.getNodeProperties(this),l=t!=="void",c=l?Jle(n).build(e):"";r.nodeProperty=c;const u=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${u} ) {

`).addFlowTab();let f=o.build(e,n);if(f&&(l?f=c+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let h=a.build(e,n);h&&(l?h=c+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,n,t)}}const ql=Pt(SGe);Ct("select",ql);const qce=(...i)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),ql(...i));Ct("cond",qce);class $ce extends ti{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const n=this.node.build(e);return e.setContext(t),n}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const hN=Pt($ce),jce=(i,e)=>hN(i,{label:e});Ct("context",hN);Ct("label",jce);class vD extends ti{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n}getHash(e){return this.name||super.getHash(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:n,readOnly:r}=this,{renderer:s}=e,o=s.backend.isWebGPUBackend===!0;let a=!1,l=!1;r&&(a=e.isDeterministic(t),l=o?r:a);const c=e.getVectorType(this.getNodeType(e)),u=t.build(e,c),f=e.getVarFromNode(this,n,c,void 0,l),h=e.getPropertyName(f);let p=h;if(l)if(o)p=a?`const ${h}`:`let ${h}`;else{const m=e.getArrayCount(t);p=`const ${e.getVar(f.type,h,m)}`}return e.addLineFlowCode(`${p} = ${u}`,this),h}}const kz=Pt(vD),Wce=(i,e=null)=>kz(i,e).append(),Kce=(i,e=null)=>kz(i,e,!0).append();Ct("toVar",Wce);Ct("toConst",Kce);const Yce=i=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),kz(i));Ct("temp",Yce);class TGe extends ti{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e);t.varying=n=e.getVaryingFromNode(this,r,s),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),n=this.setupVarying(e),r=e.shaderStage==="fragment"&&t.reassignPosition===!0&&e.context.needsPositionReassign;if(t.propertyName===void 0||r){const s=this.getNodeType(e),o=e.getPropertyName(n,Nk.VERTEX);e.flowNodeFromShaderStage(Nk.VERTEX,this.node,s,o),t.propertyName=o,r?t.reassignPosition=!1:t.reassignPosition===void 0&&e.context.isPositionNodeInput&&(t.reassignPosition=!0)}return e.getPropertyName(n)}}const Dc=Pt(TGe),Xce=i=>Dc(i);Ct("toVarying",Dc);Ct("toVertexStage",Xce);Ct("varying",(...i)=>(console.warn("TSL.VaryingNode: .varying() has been renamed to .toVarying()."),Dc(...i)));Ct("vertexStage",(...i)=>(console.warn("TSL.VaryingNode: .vertexStage() has been renamed to .toVertexStage()."),Dc(...i)));const Qce=Xe(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return Kr(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),Zce=Xe(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return Kr(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),$3="WorkingColorSpace",Gz="OutputColorSpace";class j3 extends ia{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===$3?Oi.workingColorSpace:t===Gz?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target);let s=t;return Oi.enabled===!1||n===r||!n||!r||(Oi.getTransfer(n)===$r&&(s=Vn(Qce(s.rgb),s.a)),Oi.getPrimaries(n)!==Oi.getPrimaries(r)&&(s=Vn(Mc(Oi._getMatrix(new Si,n,r)).mul(s.rgb),s.a)),Oi.getTransfer(r)===$r&&(s=Vn(Zce(s.rgb),s.a))),s}}const Jce=i=>It(new j3(It(i),$3,Gz)),eue=i=>It(new j3(It(i),Gz,$3)),tue=(i,e)=>It(new j3(It(i),$3,e)),zz=(i,e)=>It(new j3(It(i),e,$3)),EGe=(i,e,t)=>It(new j3(It(i),e,t));Ct("toOutputColorSpace",Jce);Ct("toWorkingColorSpace",eue);Ct("workingToColorSpace",tue);Ct("colorSpaceToWorking",zz);let wGe=class extends pb{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class nue extends ti{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=Pi.OBJECT}setGroup(e){return this.group=e,this}element(e){return It(new wGe(this,It(e)))}setNodeType(e){const t=Wn(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const MGe=(i,e,t)=>It(new nue(i,e,t));class CGe extends nue{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(ri)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const iue=(i,e,t=null)=>It(new CGe(i,e,t));class RGe extends ia{static get type(){return"ToneMappingNode"}constructor(e,t=sue,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return HM(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===Sc)return t;let r=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?r=Vn(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const rue=(i,e,t)=>It(new RGe(i,It(e),It(t))),sue=iue("toneMappingExposure","float");Ct("toneMapping",(i,e,t)=>rue(e,t,i));class DGe extends hz{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=cS,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,o=this.bufferOffset,a=n.isInterleavedBuffer===!0?n:new ob(n,s),l=new vc(a,r,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=Dc(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const W3=(i,e=null,t=0,n=0)=>It(new DGe(i,e,t,n)),oue=(i,e=null,t=0,n=0)=>W3(i,e,t,n).setUsage(Hv),d8=(i,e=null,t=0,n=0)=>W3(i,e,t,n).setInstanced(!0),Gk=(i,e=null,t=0,n=0)=>oue(i,e,t,n).setInstanced(!0);Ct("toAttribute",i=>W3(i.value));class LGe extends ti{static get type(){return"ComputeNode"}constructor(e,t,n=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=n,this.dispatchCount=0,this.version=1,this.name="",this.updateBeforeType=Pi.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}label(e){return this.name=e,this}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let n=t[0];for(let r=1;r<t.length;r++)n*=t[r];this.dispatchCount=Math.ceil(e/n)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const n=this.computeNode.build(e,"void");n!==""&&e.addLineFlowCode(n,this)}}}const aue=(i,e,t)=>It(new LGe(It(i),e,t));Ct("compute",aue);class PGe extends ti{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const r=this.node.getNodeType(e);return e.setCache(t),r}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const Jw=(i,e)=>It(new PGe(It(i),e));Ct("cache",Jw);class NGe extends ti{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const lue=Pt(NGe);Ct("bypass",lue);class cue extends ti{static get type(){return"RemapNode"}constructor(e,t,n,r=Me(0),s=Me(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(n.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(r)).add(r)}}const uue=Pt(cue,null,null,{doClamp:!1}),fue=Pt(cue);Ct("remap",uue);Ct("remapClamp",fue);class xD extends ti{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(`( ${r} )`,n,t)}}const r1=Pt(xD),hue=i=>(i?ql(i,r1("discard")):r1("discard")).append(),BGe=()=>r1("return").append();Ct("discard",hue);class IGe extends ia{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Sc,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Yu;return n!==Sc&&(t=t.toneMapping(n)),r!==Yu&&r!==Oi.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const due=(i,e=null,t=null)=>It(new IGe(It(i),e,t));Ct("renderOutput",due);function OGe(i){console.warn("THREE.TSLBase: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class pue extends ti{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,n):Dc(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const gA=(i,e)=>It(new pue(i,e)),Ys=(i=0)=>gA("uv"+(i>0?i:""),"vec2");class FGe extends ti{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const Ky=Pt(FGe);class UGe extends q3{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Pi.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const Aue=Pt(UGe);class yA extends q3{static get type(){return"TextureNode"}constructor(e,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Pi.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Gs?"uvec4":this.value.type===Za?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Ys(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Wn(this.value.matrix)),this._matrixUniform.mul(He(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Pi.RENDER:Pi.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Oe(Ky(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,r,s,o,a,l){const c=this.value;let u;return r?u=e.generateTextureLevel(c,t,n,r,o):s?u=e.generateTextureBias(c,t,n,s,o):l?u=e.generateTextureGrad(c,t,n,l,o):a?u=e.generateTextureCompare(c,t,n,a,o):this.sampler===!1?u=e.generateTextureLoad(c,t,n,o):u=e.generateTexture(c,t,n,o),u}generate(e,t){const n=this.value,r=e.getNodeProperties(this),s=super.generate(e,"property");if(t==="sampler")return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:u,levelNode:f,biasNode:h,compareNode:p,depthNode:m,gradNode:g}=r,b=this.generateUV(e,u),T=f?f.build(e,"float"):null,C=h?h.build(e,"float"):null,R=m?m.build(e,"int"):null,P=p?p.build(e,"float"):null,I=g?[g[0].build(e,"vec2"),g[1].build(e,"vec2")]:null,F=e.getVarFromNode(this);a=e.getPropertyName(F);const k=this.generateSnippet(e,s,b,T,C,R,P,I);e.addLineFlowCode(`${a} = ${k}`,this),o.snippet=k,o.propertyName=a}let l=a;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(l=zz(r1(l,c),n.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=It(e),t.referenceNode=this.getSelf(),It(t)}blur(e){const t=this.clone();return t.biasNode=It(e).mul(Aue(t)),t.referenceNode=this.getSelf(),It(t)}level(e){const t=this.clone();return t.levelNode=It(e),t.referenceNode=this.getSelf(),It(t)}size(e){return Ky(this,e)}bias(e){const t=this.clone();return t.biasNode=It(e),t.referenceNode=this.getSelf(),It(t)}compare(e){const t=this.clone();return t.compareNode=It(e),t.referenceNode=this.getSelf(),It(t)}grad(e,t){const n=this.clone();return n.gradNode=[It(e),It(t)],n.referenceNode=this.getSelf(),It(n)}depth(e){const t=this.clone();return t.depthNode=It(e),t.referenceNode=this.getSelf(),It(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const dr=Pt(yA),Qo=(...i)=>dr(...i).setSampler(!1),kGe=i=>(i.isNode===!0?i:dr(i)).convert("sampler");class Hz extends q3{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const K3=(i,e,t)=>It(new Hz(i,e,t));class GGe extends pb{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),r=this.node.getPaddedType();return e.format(t,r,n)}}class mue extends Hz{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?Uy(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=Pi.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let r=0;r<e.length;r++){const s=r*4;t[s]=e[r]}else if(n==="color")for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.r,t[s+1]=o.g,t[s+2]=o.b||0}else if(n==="mat2")for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+3]=o.elements[3]}else if(n==="mat3")for(let r=0;r<e.length;r++){const s=r*16,o=e[r];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+4]=o.elements[3],t[s+5]=o.elements[4],t[s+6]=o.elements[5],t[s+8]=o.elements[6],t[s+9]=o.elements[7],t[s+10]=o.elements[8],t[s+15]=1}else if(n==="mat4")for(let r=0;r<e.length;r++){const s=r*16,o=e[r];for(let a=0;a<o.elements.length;a++)t[s+a]=o.elements[a]}else for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.x,t[s+1]=o.y,t[s+2]=o.z||0,t[s+3]=o.w||0}}setup(e){const t=this.array.length,n=this.elementType;let r=Float32Array;const s=this.paddedType,o=e.getTypeLength(s);return n.charAt(0)==="i"&&(r=Int32Array),n.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*o),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return It(new GGe(this,It(e)))}}const Ep=(i,e)=>It(new mue(i,e)),zGe=(i,e)=>(console.warn("TSL.UniformArrayNode: uniforms() has been renamed to uniformArray()."),It(new mue(i,e))),Vz=Wn(0,"uint").setGroup(sN("cameraIndex")).toVarying("v_cameraIndex"),Dy=Wn("float").label("cameraNear").setGroup(ri).onRenderUpdate(({camera:i})=>i.near),Ly=Wn("float").label("cameraFar").setGroup(ri).onRenderUpdate(({camera:i})=>i.far),Ab=Xe(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrix);e=Ep(t).setGroup(ri).label("cameraProjectionMatrices").element(Vz).toVar("cameraProjectionMatrix")}else e=Wn("mat4").label("cameraProjectionMatrix").setGroup(ri).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),HGe=Wn("mat4").label("cameraProjectionMatrixInverse").setGroup(ri).onRenderUpdate(({camera:i})=>i.projectionMatrixInverse),yf=Xe(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorldInverse);e=Ep(t).setGroup(ri).label("cameraViewMatrices").element(Vz).toVar("cameraViewMatrix")}else e=Wn("mat4").label("cameraViewMatrix").setGroup(ri).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),VGe=Wn("mat4").label("cameraWorldMatrix").setGroup(ri).onRenderUpdate(({camera:i})=>i.matrixWorld),qGe=Wn("mat3").label("cameraNormalMatrix").setGroup(ri).onRenderUpdate(({camera:i})=>i.normalMatrix),gue=Wn(new he).label("cameraPosition").setGroup(ri).onRenderUpdate(({camera:i},e)=>e.value.setFromMatrixPosition(i.matrixWorld));class Or extends ti{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Pi.OBJECT,this._uniformNode=new q3(null)}getNodeType(){const e=this.scope;if(e===Or.WORLD_MATRIX)return"mat4";if(e===Or.POSITION||e===Or.VIEW_POSITION||e===Or.DIRECTION||e===Or.SCALE)return"vec3"}update(e){const t=this.object3d,n=this._uniformNode,r=this.scope;if(r===Or.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===Or.POSITION)n.value=n.value||new he,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===Or.SCALE)n.value=n.value||new he,n.value.setFromMatrixScale(t.matrixWorld);else if(r===Or.DIRECTION)n.value=n.value||new he,t.getWorldDirection(n.value);else if(r===Or.VIEW_POSITION){const s=e.camera;n.value=n.value||new he,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const t=this.scope;return t===Or.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(t===Or.POSITION||t===Or.VIEW_POSITION||t===Or.DIRECTION||t===Or.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Or.WORLD_MATRIX="worldMatrix";Or.POSITION="position";Or.SCALE="scale";Or.VIEW_POSITION="viewPosition";Or.DIRECTION="direction";const $Ge=Pt(Or,Or.DIRECTION),jGe=Pt(Or,Or.WORLD_MATRIX),yue=Pt(Or,Or.POSITION),WGe=Pt(Or,Or.SCALE),KGe=Pt(Or,Or.VIEW_POSITION);class vA extends Or{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const YGe=An(vA,vA.DIRECTION),dd=An(vA,vA.WORLD_MATRIX),XGe=An(vA,vA.POSITION),QGe=An(vA,vA.SCALE),ZGe=An(vA,vA.VIEW_POSITION),vue=Wn(new Si).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),JGe=Wn(new rn).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),mb=Xe(i=>i.renderer.nodes.modelViewMatrix||xue).once()().toVar("modelViewMatrix"),xue=yf.mul(dd),eze=Xe(i=>(i.context.isHighPrecisionModelViewMatrix=!0,Wn("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),tze=Xe(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return Wn("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),Y3=gA("position","vec3"),Bo=Y3.toVarying("positionLocal"),p8=Y3.toVarying("positionPrevious"),Qm=dd.mul(Bo).xyz.toVarying("v_positionWorld").context({needsPositionReassign:!0}),qz=Bo.transformDirection(dd).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection").context({needsPositionReassign:!0}),ea=Xe(i=>i.context.setupPositionView(),"vec3").once()().toVarying("v_positionView").context({needsPositionReassign:!0}),$s=ea.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class nze extends ti{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:n}=e;return t.coordinateSystem===yc&&n.side===Bs?"false":e.getFrontFacing()}}const bue=An(nze),X3=Me(bue).mul(2).sub(1),dN=gA("normal","vec3"),mf=Xe(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),He(0,1,0)):dN,"vec3").once()().toVar("normalLocal"),_ue=ea.dFdx().cross(ea.dFdy()).normalize().toVar("normalFlat"),Td=Xe(i=>{let e;return i.material.flatShading===!0?e=_ue:e=Dc($z(mf),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),pN=Dc(Td.transformDirection(yf),"v_normalWorld").normalize().toVar("normalWorld"),Jo=Xe(i=>i.context.setupNormal().context({getUV:null}),"vec3").once()().mul(X3).toVar("transformedNormalView"),AN=Jo.transformDirection(yf).toVar("transformedNormalWorld"),S2=Xe(i=>i.context.setupClearcoatNormal().context({getUV:null}),"vec3").once()().mul(X3).toVar("transformedClearcoatNormalView"),Sue=Xe(([i,e=dd])=>{const t=Mc(e),n=i.div(He(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),$z=Xe(([i],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=vue.mul(i);return yf.transformDirection(n)}),Tue=Wn(0).onReference(({material:i})=>i).onRenderUpdate(({material:i})=>i.refractionRatio),Eue=$s.negate().reflect(Jo),wue=$s.negate().refract(Jo,Tue),Mue=Eue.transformDirection(yf).toVar("reflectVector"),Cue=wue.transformDirection(yf).toVar("reflectVector");class ize extends yA{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===pu?Mue:e.mapping===uf?Cue:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),He(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.renderer.coordinateSystem===Pp||!n.isRenderTargetTexture?He(t.x.negate(),t.yz):t}generateUV(e,t){return t.build(e,"vec3")}}const OS=Pt(ize);class rze extends pb{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class mN extends ti{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=Pi.OBJECT}element(e){return It(new rze(this,It(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=K3(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Ep(null,e):e==="texture"?t=dr(null):e==="cubeTexture"?t=OS(null):t=Wn(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const os=(i,e,t)=>It(new mN(i,e,t)),zk=(i,e,t,n)=>It(new mN(i,e,n,t));class sze extends mN{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Im=(i,e,t=null)=>It(new sze(i,e,t)),gN=Xe(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),gA("tangent","vec4")))(),Q3=gN.xyz.toVar("tangentLocal"),Z3=mb.mul(Vn(Q3,0)).xyz.toVarying("v_tangentView").normalize().toVar("tangentView"),Rue=Z3.transformDirection(yf).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),jz=Z3.toVar("transformedTangentView"),oze=jz.transformDirection(yf).normalize().toVar("transformedTangentWorld"),J3=i=>i.mul(gN.w).xyz,aze=Dc(J3(dN.cross(gN)),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),lze=Dc(J3(mf.cross(Q3)),"v_bitangentLocal").normalize().toVar("bitangentLocal"),Due=Dc(J3(Td.cross(Z3)),"v_bitangentView").normalize().toVar("bitangentView"),cze=Dc(J3(pN.cross(Rue)),"v_bitangentWorld").normalize().toVar("bitangentWorld"),Lue=J3(Jo.cross(jz)).normalize().toVar("transformedBitangentView"),uze=Lue.transformDirection(yf).normalize().toVar("transformedBitangentWorld"),Zv=Mc(Z3,Due,Td),Pue=$s.mul(Zv),fze=(i,e)=>i.sub(Pue.mul(e)),Nue=(()=>{let i=mx.cross($s);return i=i.cross(mx).normalize(),i=Kr(i,Jo,My.mul(z0.oneMinus()).oneMinus().pow2().pow2()).normalize(),i})(),hze=Xe(i=>{const{eye_pos:e,surf_norm:t,mapN:n,uv:r}=i,s=e.dFdx(),o=e.dFdy(),a=r.dFdx(),l=r.dFdy(),c=t,u=o.cross(c),f=c.cross(s),h=u.mul(a.x).add(f.mul(l.x)),p=u.mul(a.y).add(f.mul(l.y)),m=h.dot(h).max(p.dot(p)),g=X3.mul(m.inverseSqrt());return ya(h.mul(n.x,g),p.mul(n.y,g),c.mul(n.z)).normalize()});class dze extends ia{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=cA}setup(e){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);n!==null&&(r=He(r.xy.mul(n),r.z));let s=null;return t===K7?s=$z(r):t===cA&&(e.hasGeometryAttribute("tangent")===!0?s=Zv.mul(r).normalize():s=hze({eye_pos:ea,surf_norm:Td,mapN:r,uv:Ys()})),s}}const Hk=Pt(dze),pze=Xe(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||Ys()),forceUVContext:!0}),n=Me(t(r=>r));return qt(Me(t(r=>r.add(r.dFdx()))).sub(n),Me(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),Aze=Xe(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,a=s.cross(o),l=o.cross(r),c=r.dot(a).mul(X3),u=c.sign().mul(n.x.mul(a).add(n.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class mze extends ia{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=pze({textureNode:this.textureNode,bumpScale:e});return Aze({surf_pos:ea,surf_norm:Td,dHdxy:t})}}const Bue=Pt(mze),tZ=new Map;class Mt extends ti{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=tZ.get(e);return n===void 0&&(n=Im(e,t),tZ.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===Mt.COLOR){const s=t.color!==void 0?this.getColor(n):He();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===Mt.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===Mt.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=Me(1);else if(n===Mt.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s}else if(n===Mt.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===Mt.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===Mt.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===Mt.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=o.mul(this.getTexture(n)):r=o}else if(n===Mt.NORMAL)t.normalMap?(r=Hk(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=Bue(this.getTexture("bump").r,this.getFloat("bumpScale")):r=Td;else if(n===Mt.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Mt.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Mt.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=Hk(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=Td;else if(n===Mt.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===Mt.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===Mt.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=rN(o2.x,o2.y,o2.y.negate(),o2.x).mul(s.rg.mul(2).sub(qt(1)).normalize().mul(s.b))}else r=o2;else if(n===Mt.IRIDESCENCE_THICKNESS){const s=os("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=os("0","float",t.iridescenceThicknessRange);r=s.sub(o).mul(this.getTexture(n).g).add(o)}else r=s}else if(n===Mt.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===Mt.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===Mt.IOR)r=this.getFloat(n);else if(n===Mt.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===Mt.AO)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}Mt.ALPHA_TEST="alphaTest";Mt.COLOR="color";Mt.OPACITY="opacity";Mt.SHININESS="shininess";Mt.SPECULAR="specular";Mt.SPECULAR_STRENGTH="specularStrength";Mt.SPECULAR_INTENSITY="specularIntensity";Mt.SPECULAR_COLOR="specularColor";Mt.REFLECTIVITY="reflectivity";Mt.ROUGHNESS="roughness";Mt.METALNESS="metalness";Mt.NORMAL="normal";Mt.CLEARCOAT="clearcoat";Mt.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Mt.CLEARCOAT_NORMAL="clearcoatNormal";Mt.EMISSIVE="emissive";Mt.ROTATION="rotation";Mt.SHEEN="sheen";Mt.SHEEN_ROUGHNESS="sheenRoughness";Mt.ANISOTROPY="anisotropy";Mt.IRIDESCENCE="iridescence";Mt.IRIDESCENCE_IOR="iridescenceIOR";Mt.IRIDESCENCE_THICKNESS="iridescenceThickness";Mt.IOR="ior";Mt.TRANSMISSION="transmission";Mt.THICKNESS="thickness";Mt.ATTENUATION_DISTANCE="attenuationDistance";Mt.ATTENUATION_COLOR="attenuationColor";Mt.LINE_SCALE="scale";Mt.LINE_DASH_SIZE="dashSize";Mt.LINE_GAP_SIZE="gapSize";Mt.LINE_WIDTH="linewidth";Mt.LINE_DASH_OFFSET="dashOffset";Mt.POINT_SIZE="size";Mt.DISPERSION="dispersion";Mt.LIGHT_MAP="light";Mt.AO="ao";const Iue=An(Mt,Mt.ALPHA_TEST),Oue=An(Mt,Mt.COLOR),Fue=An(Mt,Mt.SHININESS),Uue=An(Mt,Mt.EMISSIVE),Wz=An(Mt,Mt.OPACITY),kue=An(Mt,Mt.SPECULAR),Vk=An(Mt,Mt.SPECULAR_INTENSITY),Gue=An(Mt,Mt.SPECULAR_COLOR),eM=An(Mt,Mt.SPECULAR_STRENGTH),bD=An(Mt,Mt.REFLECTIVITY),zue=An(Mt,Mt.ROUGHNESS),Hue=An(Mt,Mt.METALNESS),Vue=An(Mt,Mt.NORMAL),que=An(Mt,Mt.CLEARCOAT),$ue=An(Mt,Mt.CLEARCOAT_ROUGHNESS),jue=An(Mt,Mt.CLEARCOAT_NORMAL),Wue=An(Mt,Mt.ROTATION),Kue=An(Mt,Mt.SHEEN),Yue=An(Mt,Mt.SHEEN_ROUGHNESS),Xue=An(Mt,Mt.ANISOTROPY),Que=An(Mt,Mt.IRIDESCENCE),Zue=An(Mt,Mt.IRIDESCENCE_IOR),Jue=An(Mt,Mt.IRIDESCENCE_THICKNESS),efe=An(Mt,Mt.TRANSMISSION),tfe=An(Mt,Mt.THICKNESS),nfe=An(Mt,Mt.IOR),ife=An(Mt,Mt.ATTENUATION_DISTANCE),rfe=An(Mt,Mt.ATTENUATION_COLOR),sfe=An(Mt,Mt.LINE_SCALE),ofe=An(Mt,Mt.LINE_DASH_SIZE),afe=An(Mt,Mt.LINE_GAP_SIZE),gze=An(Mt,Mt.LINE_WIDTH),lfe=An(Mt,Mt.LINE_DASH_OFFSET),cfe=An(Mt,Mt.POINT_SIZE),ufe=An(Mt,Mt.DISPERSION),Kz=An(Mt,Mt.LIGHT_MAP),ffe=An(Mt,Mt.AO),o2=Wn(new at).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),Yz=Xe(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class js extends ti{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===js.VERTEX)r=e.getVertexIndex();else if(n===js.INSTANCE)r=e.getInstanceIndex();else if(n===js.DRAW)r=e.getDrawIndex();else if(n===js.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===js.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===js.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=Dc(this).build(e,t),s}}js.VERTEX="vertex";js.INSTANCE="instance";js.SUBGROUP="subgroup";js.INVOCATION_LOCAL="invocationLocal";js.INVOCATION_SUBGROUP="invocationSubgroup";js.DRAW="draw";const hfe=An(js,js.VERTEX),eC=An(js,js.INSTANCE),yze=An(js,js.SUBGROUP),vze=An(js,js.INVOCATION_SUBGROUP),xze=An(js,js.INVOCATION_LOCAL),dfe=An(js,js.DRAW);class pfe extends ti{static get type(){return"InstanceNode"}constructor(e,t,n){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Pi.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:t,instanceMatrix:n,instanceColor:r}=this;let{instanceMatrixNode:s,instanceColorNode:o}=this;if(s===null){if(t<=1e3)s=K3(n.array,"mat4",Math.max(t,1)).element(eC);else{const l=new AM(n.array,16,1);this.buffer=l;const c=n.usage===Hv?Gk:d8,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];s=Ax(...u)}this.instanceMatrixNode=s}if(r&&o===null){const l=new bd(r.array,3),c=r.usage===Hv?Gk:d8;this.bufferColor=l,o=He(c(l,"vec3",3,0)),this.instanceColorNode=o}const a=s.mul(Bo).xyz;if(Bo.assign(a),e.hasGeometryAttribute("normal")){const l=Sue(mf,s);mf.assign(l)}this.instanceColorNode!==null&&$M("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Hv&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Hv&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const bze=Pt(pfe);class _ze extends pfe{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:r}=e;super(t,n,r),this.instancedMesh=e}}const Afe=Pt(_ze);class Sze extends ti{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=eC:this.batchingIdNode=dfe);const n=Xe(([m])=>{const g=Oe(Ky(Qo(this.batchMesh._indirectTexture),0)),b=Oe(m).modInt(g),T=Oe(m).div(g);return Qo(this.batchMesh._indirectTexture,Xa(b,T)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Oe(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=Ky(Qo(r),0),o=Me(n).mul(4).toInt().toVar(),a=o.modInt(s),l=o.div(Oe(s)),c=Ax(Qo(r,Xa(a,l)),Qo(r,Xa(a.add(1),l)),Qo(r,Xa(a.add(2),l)),Qo(r,Xa(a.add(3),l))),u=this.batchMesh._colorsTexture;if(u!==null){const g=Xe(([b])=>{const T=Ky(Qo(u),0).x,C=b,R=C.modInt(T),P=C.div(T);return Qo(u,Xa(R,P)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);$M("vec3","vBatchColor").assign(g)}const f=Mc(c);Bo.assign(c.mul(Bo));const h=mf.div(He(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),p=f.mul(h).xyz;mf.assign(p),e.hasGeometryAttribute("tangent")&&Q3.mulAssign(f)}}const mfe=Pt(Sze),nZ=new WeakMap;class gfe extends ti{static get type(){return"SkinningNode"}constructor(e,t=!1){super("void"),this.skinnedMesh=e,this.useReference=t,this.updateType=Pi.OBJECT,this.skinIndexNode=gA("skinIndex","uvec4"),this.skinWeightNode=gA("skinWeight","vec4");let n,r,s;t?(n=os("bindMatrix","mat4"),r=os("bindMatrixInverse","mat4"),s=zk("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(n=Wn(e.bindMatrix,"mat4"),r=Wn(e.bindMatrixInverse,"mat4"),s=K3(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=n,this.bindMatrixInverseNode=r,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=Bo){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),c=e.element(n.z),u=e.element(n.w),f=s.mul(t),h=ya(a.mul(r.x).mul(f),l.mul(r.y).mul(f),c.mul(r.z).mul(f),u.mul(r.w).mul(f));return o.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=mf){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),c=e.element(n.z),u=e.element(n.w);let f=ya(r.x.mul(a),r.y.mul(l),r.z.mul(c),r.w.mul(u));return f=o.mul(f).mul(s),f.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=zk("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,p8)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||Dle(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&p8.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(Bo.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();mf.assign(n),e.hasGeometryAttribute("tangent")&&Q3.assign(n)}}generate(e,t){if(t!=="void")return Bo.build(e,t)}update(e){const n=(this.useReference?e.object:this.skinnedMesh).skeleton;nZ.get(n)!==e.frameId&&(nZ.set(n,e.frameId),this.previousBoneMatricesNode!==null&&n.previousBoneMatrices.set(n.boneMatrices),n.update())}}const Tze=i=>It(new gfe(i)),yfe=i=>It(new gfe(i,!0));class Eze extends ti{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let s=0,o=this.params.length-1;s<o;s++){const a=this.params[s],l=a.isNode!==!0&&a.name||this.getVarName(s),c=a.isNode!==!0&&a.type||"int";n[l]=r1(l,c)}const r=e.addStack();return t.returnsNode=this.params[this.params.length-1](n,r,e),t.stackNode=r,e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let a=0,l=n.length-1;a<l;a++){const c=n[a];let u=null,f=null,h=null,p=null,m=null,g=null;c.isNode?(p="int",h=this.getVarName(a),u="0",f=c.build(e,p),m="<"):(p=c.type||"int",h=c.name||this.getVarName(a),u=c.start,f=c.end,m=c.condition,g=c.update,typeof u=="number"?u=e.generateConst(p,u):u&&u.isNode&&(u=u.build(e,p)),typeof f=="number"?f=e.generateConst(p,f):f&&f.isNode&&(f=f.build(e,p)),u!==void 0&&f===void 0?(u=u+" - 1",f="0",m=">="):f!==void 0&&u===void 0&&(u="0",m="<"),m===void 0&&(Number(u)>Number(f)?m=">=":m="<"));const b={start:u,end:f},T=b.start,C=b.end;let R="",P="",I="";g||(p==="int"||p==="uint"?m.includes("<")?g="++":g="--":m.includes("<")?g="+= 1.":g="-= 1."),R+=e.getVar(p,h)+" = "+T,P+=h+" "+m+" "+C,I+=h+" "+g;const F=`for ( ${R}; ${P}; ${I} )`;e.addFlowCode((a===0?`
`:"")+e.tab+F+` {

`).addFlowTab()}const s=r.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,l=this.params.length-1;a<l;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const Yr=(...i)=>It(new Eze(px(i,"int"))).append(),wze=()=>r1("continue").append(),vfe=()=>r1("break").append(),Mze=(...i)=>(console.warn("TSL.LoopNode: loop() has been renamed to Loop()."),Yr(...i)),mO=new WeakMap,Vf=new Ln,iZ=Xe(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const o=Oe(hfe).mul(t).add(s),a=o.div(n),l=o.sub(a.mul(n));return Qo(i,Xa(l,a)).depth(r).mul(e)});function Cze(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let o=mO.get(i);if(o===void 0||o.count!==s){let C=function(){b.dispose(),mO.delete(i),i.removeEventListener("dispose",C)};var a=C;o!==void 0&&o.texture.dispose();const l=i.morphAttributes.position||[],c=i.morphAttributes.normal||[],u=i.morphAttributes.color||[];let f=0;e===!0&&(f=1),t===!0&&(f=2),n===!0&&(f=3);let h=i.attributes.position.count*f,p=1;const m=4096;h>m&&(p=Math.ceil(h/m),h=m);const g=new Float32Array(h*p*4*s),b=new JS(g,h,p,s);b.type=Ns,b.needsUpdate=!0;const T=f*4;for(let R=0;R<s;R++){const P=l[R],I=c[R],F=u[R],k=h*p*4*R;for(let q=0;q<P.count;q++){const H=q*T;e===!0&&(Vf.fromBufferAttribute(P,q),g[k+H+0]=Vf.x,g[k+H+1]=Vf.y,g[k+H+2]=Vf.z,g[k+H+3]=0),t===!0&&(Vf.fromBufferAttribute(I,q),g[k+H+4]=Vf.x,g[k+H+5]=Vf.y,g[k+H+6]=Vf.z,g[k+H+7]=0),n===!0&&(Vf.fromBufferAttribute(F,q),g[k+H+8]=Vf.x,g[k+H+9]=Vf.y,g[k+H+10]=Vf.z,g[k+H+11]=F.itemSize===4?Vf.w:1)}}o={count:s,texture:b,stride:f,size:new at(h,p)},mO.set(i,o),i.addEventListener("dispose",C)}return o}class Rze extends ti{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Wn(1),this.updateType=Pi.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:a,stride:l,size:c}=Cze(t);n===!0&&Bo.mulAssign(this.morphBaseInfluence),r===!0&&mf.mulAssign(this.morphBaseInfluence);const u=Oe(c.width);Yr(o,({i:f})=>{const h=Me(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?h.assign(Qo(this.mesh.morphTexture,Xa(Oe(f).add(1),Oe(eC))).r):h.assign(os("morphTargetInfluences","float").element(f).toVar()),n===!0&&Bo.addAssign(iZ({bufferMap:a,influence:h,stride:l,width:u,depth:f,offset:Oe(0)})),r===!0&&mf.addAssign(iZ({bufferMap:a,influence:h,stride:l,width:u,depth:f,offset:Oe(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const xfe=Pt(Rze);class gT extends ti{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class Dze extends gT{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class Lze extends $ce{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=He().toVar("directDiffuse"),r=He().toVar("directSpecular"),s=He().toVar("indirectDiffuse"),o=He().toVar("indirectSpecular"),a={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:o};return{radiance:He().toVar("radiance"),irradiance:He().toVar("irradiance"),iblIrradiance:He().toVar("iblIrradiance"),ambientOcclusion:Me(1).toVar("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const bfe=Pt(Lze);class Pze extends gT{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let qE,$E;class Ia extends ti{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Ia.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Pi.NONE;return(this.scope===Ia.SIZE||this.scope===Ia.VIEWPORT)&&(e=Pi.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===Ia.VIEWPORT?t!==null?$E.copy(t.viewport):(e.getViewport($E),$E.multiplyScalar(e.getPixelRatio())):t!==null?(qE.width=t.width,qE.height=t.height):e.getDrawingBufferSize(qE)}setup(){const e=this.scope;let t=null;return e===Ia.SIZE?t=Wn(qE||(qE=new at)):e===Ia.VIEWPORT?t=Wn($E||($E=new Ln)):t=qt(tC.div(QM)),t}generate(e){if(this.scope===Ia.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(QM).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}Ia.COORDINATE="coordinate";Ia.VIEWPORT="viewport";Ia.SIZE="size";Ia.UV="uv";const xA=An(Ia,Ia.UV),QM=An(Ia,Ia.SIZE),tC=An(Ia,Ia.COORDINATE),O2=An(Ia,Ia.VIEWPORT),_fe=O2.zw,Sfe=tC.sub(O2.xy),Nze=Sfe.div(_fe),Bze=Xe(()=>(console.warn('TSL.ViewportNode: "viewportResolution" is deprecated. Use "screenSize" instead.'),QM),"vec2").once()(),Ize=Xe(()=>(console.warn('TSL.ViewportNode: "viewportTopLeft" is deprecated. Use "screenUV" instead.'),xA),"vec2").once()(),Oze=Xe(()=>(console.warn('TSL.ViewportNode: "viewportBottomLeft" is deprecated. Use "screenUV.flipY()" instead.'),xA.flipY()),"vec2").once()(),jE=new at;class yN extends yA{static get type(){return"ViewportTextureNode"}constructor(e=xA,t=null,n=null){n===null&&(n=new r9,n.minFilter=Ja),super(n,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Pi.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(jE);const n=this.value;(n.image.width!==jE.width||n.image.height!==jE.height)&&(n.image.width=jE.width,n.image.height=jE.height,n.needsUpdate=!0);const r=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const Fze=Pt(yN),Xz=Pt(yN,null,null,{generateMipmaps:!0});let gO=null;class Uze extends yN{static get type(){return"ViewportDepthTextureNode"}constructor(e=xA,t=null){gO===null&&(gO=new Ld),super(e,t,gO)}}const Qz=Pt(Uze);class ef extends ti{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===ef.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===ef.DEPTH_BASE)n!==null&&(r=Efe().assign(n));else if(t===ef.DEPTH)e.isPerspectiveCamera?r=Tfe(ea.z,Dy,Ly):r=F2(ea.z,Dy,Ly);else if(t===ef.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=Zz(n,Dy,Ly);r=F2(s,Dy,Ly)}else r=n;else r=F2(ea.z,Dy,Ly);return r}}ef.DEPTH_BASE="depthBase";ef.DEPTH="depth";ef.LINEAR_DEPTH="linearDepth";const F2=(i,e,t)=>i.add(e).div(e.sub(t)),kze=(i,e,t)=>e.sub(t).mul(i).sub(e),Tfe=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),Zz=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),Jz=(i,e,t)=>{e=e.max(1e-6).toVar();const n=nA(i.negate().div(e)),r=nA(t.div(e));return n.div(r)},Gze=(i,e,t)=>{const n=i.mul(lN(t.div(e)));return Me(Math.E).pow(n).mul(e).negate()},Efe=Pt(ef,ef.DEPTH_BASE),eH=An(ef,ef.DEPTH),A8=Pt(ef,ef.LINEAR_DEPTH),zze=A8(Qz());eH.assign=i=>Efe(i);class Hze extends ti{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const Vze=Pt(Hze);class Ad extends ti{static get type(){return"ClippingNode"}constructor(e=Ad.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:r}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Ad.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,r):this.scope===Ad.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(n,r)}setupAlphaToCoverage(e,t){return Xe(()=>{const n=Me().toVar("distanceToPlane"),r=Me().toVar("distanceToGradient"),s=Me(1).toVar("clipOpacity"),o=t.length;if(this.hardwareClipping===!1&&o>0){const l=Ep(t);Yr(o,({i:c})=>{const u=l.element(c);n.assign(ea.dot(u.xyz).negate().add(u.w)),r.assign(n.fwidth().div(2)),s.mulAssign(mA(r.negate(),r,n))})}const a=e.length;if(a>0){const l=Ep(e),c=Me(1).toVar("intersectionClipOpacity");Yr(a,({i:u})=>{const f=l.element(u);n.assign(ea.dot(f.xyz).negate().add(f.w)),r.assign(n.fwidth().div(2)),c.mulAssign(mA(r.negate(),r,n).oneMinus())}),s.mulAssign(c.oneMinus())}Fr.a.mulAssign(s),Fr.a.equal(0).discard()})()}setupDefault(e,t){return Xe(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=Ep(t);Yr(n,({i:o})=>{const a=s.element(o);ea.dot(a.xyz).greaterThan(a.w).discard()})}const r=e.length;if(r>0){const s=Ep(e),o=fg(!0).toVar("clipped");Yr(r,({i:a})=>{const l=s.element(a);o.assign(ea.dot(l.xyz).greaterThan(l.w).and(o))}),o.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),Xe(()=>{const r=Ep(e),s=Vze(t.getClipDistance());Yr(n,({i:o})=>{const a=r.element(o),l=ea.dot(a.xyz).sub(a.w).negate();s.element(o).assign(l)})})()}}Ad.ALPHA_TO_COVERAGE="alphaToCoverage";Ad.DEFAULT="default";Ad.HARDWARE="hardware";const qze=()=>It(new Ad),$ze=()=>It(new Ad(Ad.ALPHA_TO_COVERAGE)),jze=()=>It(new Ad(Ad.HARDWARE)),Wze=.05,rZ=Xe(([i])=>vg(Ni(1e4,Qf(Ni(17,i.x).add(Ni(.1,i.y)))).mul(ya(.1,Ls(Qf(Ni(13,i.y).add(i.x))))))),sZ=Xe(([i])=>rZ(qt(rZ(i.xy),i.z))),Kze=Xe(([i])=>{const e=na(Xm(Lz(i.xyz)),Xm(Pz(i.xyz))),t=Me(1).div(Me(Wze).mul(e)).toVar("pixScale"),n=qt(IS(iA(nA(t))),IS(cN(nA(t)))),r=qt(sZ(iA(n.x.mul(i.xyz))),sZ(iA(n.y.mul(i.xyz)))),s=vg(nA(t)),o=ya(Ni(s.oneMinus(),r.x),Ni(s,r.y)),a=Af(s,s.oneMinus()),l=He(o.mul(o).div(Ni(2,a).mul(xr(1,a))),o.sub(Ni(.5,a)).div(xr(1,a)),xr(1,xr(1,o).mul(xr(1,o)).div(Ni(2,a).mul(xr(1,a))))),c=o.lessThan(a.oneMinus()).select(o.lessThan(a).select(l.x,l.y),l.z);return AA(c,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class va extends ga{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+Mle(this)}build(e){this.setup(e)}setupObserver(e){return new $9e(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const r=this.vertexNode||this.setupVertex(e);e.stack.outputNode=r,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let s;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const a=this.setupLighting(e);o!==null&&e.stack.add(o);const l=Vn(a,Fr.a).max(0);if(s=this.setupOutput(e,l),YM.assign(s),this.outputNode!==null&&(s=this.outputNode),n!==null){const c=t.getMRT(),u=this.mrtNode;c!==null?(s=c,u!==null&&(s=c.merge(u))):u!==null&&(s=u)}}else{let a=this.fragmentNode;a.isOutputStructNode!==!0&&(a=Vn(a)),s=this.setupOutput(e,a)}e.stack.outputNode=s,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let r=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=$ze():e.stack.add(qze())}return r}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(jze()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let r=this.depthNode;if(r===null){const s=t.getMRT();s&&s.has("depth")?r=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?r=Jz(ea.z,Dy,Ly):r=F2(ea.z,Dy,Ly))}r!==null&&eH.assign(r).append()}setupPositionView(){return mb.mul(Bo).xyz}setupModelViewProjection(){return Ab.mul(ea)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),Yz}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&xfe(t).append(),t.isSkinnedMesh===!0&&yfe(t).append(),this.displacementMap){const r=Im("displacementMap","texture"),s=Im("displacementScale","float"),o=Im("displacementBias","float");Bo.addAssign(mf.normalize().mul(r.x.mul(s).add(o)))}return t.isBatchedMesh&&mfe(t).append(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&Afe(t).append(),this.positionNode!==null&&Bo.assign(this.positionNode.context({isPositionNodeInput:!0})),Bo}setupDiffuseColor({object:e,geometry:t}){let n=this.colorNode?Vn(this.colorNode):Oue;this.vertexColors===!0&&t.hasAttribute("color")&&(n=Vn(n.xyz.mul(gA("color","vec3")),n.a)),e.instanceColor&&(n=$M("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=$M("vec3","vBatchColor").mul(n)),Fr.assign(n);const r=this.opacityNode?Me(this.opacityNode):Wz;if(Fr.a.assign(Fr.a.mul(r)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Me(this.alphaTestNode):Iue;Fr.a.lessThanEqual(s).discard()}this.alphaHash===!0&&Fr.a.lessThan(Kze(Bo)).discard(),this.transparent===!1&&this.blending===fu&&this.alphaToCoverage===!1&&Fr.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?He(0):Fr.rgb}setupNormal(){return this.normalNode?He(this.normalNode):Vue}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Im("envMap","cubeTexture"):Im("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Pze(Kz)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:ffe;t.push(new Dze(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(a&&a.getScope().hasLights){const c=this.setupLightingModel(e);l=bfe(a,c,n,r)}else n!==null&&(l=He(r!==null?Kr(l,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(Uk.assign(He(s||Uue)),l=l.add(Uk)),l}setupOutput(e,t){if(this.fog===!0){const n=e.fogNode;n&&(YM.assign(t),t=Vn(n))}return t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=ga.prototype.toJSON.call(this,e),r=o8(this);n.inputNodes={};for(const{property:o,childNode:a}of r)n.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(n.textures=o),a.length>0&&(n.images=a),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const Yze=new xa;class Xze extends va{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(Yze),this.setValues(e)}}const Qze=new v9;class Zze extends va{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(Qze),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?Me(this.offsetNode):lfe,t=this.dashScaleNode?Me(this.dashScaleNode):sfe,n=this.dashSizeNode?Me(this.dashSizeNode):ofe,r=this.gapSizeNode?Me(this.gapSizeNode):afe;yD.assign(n),kk.assign(r);const s=Dc(gA("lineDistance").mul(t));(e?s.add(e):s).mod(yD.add(kk)).greaterThan(yD).discard()}}let yO=null;class Jze extends yN{static get type(){return"ViewportSharedTextureNode"}constructor(e=xA,t=null){yO===null&&(yO=new r9),super(e,t,yO)}updateReference(){return this}}const eHe=Pt(Jze),wfe=i=>It(i).mul(.5).add(.5),tHe=i=>It(i).mul(2).sub(1),nHe=new A9;class iHe extends va{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(nHe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Me(this.opacityNode):Wz;Fr.assign(Vn(wfe(Jo),e))}}class rHe extends ia{static get type(){return"EquirectUVNode"}constructor(e=qz){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan(e.x).mul(1/(Math.PI*2)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return qt(t,n)}}const tH=Pt(rHe);class Mfe extends e9{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new MA(5,5,5),o=tH(qz),a=new va;a.colorNode=dr(t,o,0),a.side=Bs,a.blending=uu;const l=new zi(s,a),c=new sb;c.add(l),t.minFilter===Ja&&(t.minFilter=Ur);const u=new J7(1,10,this),f=e.getMRT();return e.setMRT(null),u.update(e,c),e.setMRT(f),t.minFilter=n,t.currentGenerateMipmaps=r,l.geometry.dispose(),l.material.dispose(),this}}const tM=new WeakMap;class sHe extends ia{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=OS();const t=new rb;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Pi.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const o=s.mapping;if(o===Lp||o===aA){if(tM.has(s)){const a=tM.get(s);oZ(a,s.mapping),this._cubeTexture=a}else{const a=s.image;if(oHe(a)){const l=new Mfe(a.height);l.fromEquirectangularTexture(t,s),oZ(l.texture,s.mapping),this._cubeTexture=l.texture,tM.set(s,l.texture),s.addEventListener("dispose",Cfe)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function oHe(i){return i==null?!1:i.height>0}function Cfe(i){const e=i.target;e.removeEventListener("dispose",Cfe);const t=tM.get(e);t!==void 0&&(tM.delete(e),t.dispose())}function oZ(i,e){e===Lp?i.mapping=pu:e===aA&&(i.mapping=uf)}const Rfe=Pt(sHe);class nH extends gT{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=Rfe(this.envNode)}}class aHe extends gT{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=Me(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class vN{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class Dfe extends vN{constructor(){super()}indirect(e,t,n){const r=e.ambientOcclusion,s=e.reflectedLight,o=n.context.irradianceLightMap;s.indirectDiffuse.assign(Vn(0)),o?s.indirectDiffuse.addAssign(o):s.indirectDiffuse.addAssign(Vn(1,1,1,0)),s.indirectDiffuse.mulAssign(r),s.indirectDiffuse.mulAssign(Fr.rgb)}finish(e,t,n){const r=n.material,s=e.outgoingLight,o=n.context.environment;if(o)switch(r.combine){case XS:s.rgb.assign(Kr(s.rgb,s.rgb.mul(o.rgb),eM.mul(bD)));break;case k7:s.rgb.assign(Kr(s.rgb,o.rgb,eM.mul(bD)));break;case G7:s.rgb.addAssign(o.rgb.mul(eM.mul(bD)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",r.combine);break}}}const lHe=new Tl;class cHe extends va{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(lHe),this.setValues(e)}setupNormal(){return Td}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new nH(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new aHe(Kz)),t}setupOutgoingLight(){return Fr.rgb}setupLightingModel(){return new Dfe}}const FS=Xe(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),Yx=Xe(i=>i.diffuseColor.mul(1/Math.PI)),uHe=()=>Me(.25),fHe=Xe(({dotNH:i})=>u8.mul(Me(.5)).add(1).mul(Me(1/Math.PI)).mul(i.pow(u8))),hHe=Xe(({lightDirection:i})=>{const e=i.add($s).normalize(),t=Jo.dot(e).clamp(),n=$s.dot(e).clamp(),r=FS({f0:$u,f90:1,dotVH:n}),s=uHe(),o=fHe({dotNH:t});return r.mul(s).mul(o)});class Lfe extends Dfe{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Jo.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(Yx({diffuseColor:Fr.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(hHe({lightDirection:e})).mul(eM))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:n}){n.indirectDiffuse.addAssign(t.mul(Yx({diffuseColor:Fr}))),n.indirectDiffuse.mulAssign(e)}}const dHe=new Pd;class pHe extends va{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(dHe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new nH(t):null}setupLightingModel(){return new Lfe(!1)}}const AHe=new ix;class mHe extends va{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(AHe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new nH(t):null}setupLightingModel(){return new Lfe}setupVariants(){const e=(this.shininessNode?Me(this.shininessNode):Fue).max(1e-4);u8.assign(e);const t=this.specularNode||kue;$u.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Pfe=Xe(i=>{if(i.geometry.hasAttribute("normal")===!1)return Me(0);const e=Td.dFdx().abs().max(Td.dFdy().abs());return e.x.max(e.y).max(e.z)}),iH=Xe(i=>{const{roughness:e}=i,t=Pfe();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),Nfe=Xe(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Bp(.5,r.add(s).max(yce))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),gHe=Xe(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:o,dotNL:a})=>{const l=a.mul(He(i.mul(t),e.mul(n),o).length()),c=o.mul(He(i.mul(r),e.mul(s),a).length());return Bp(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),Bfe=Xe(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),yHe=Me(1/Math.PI),vHe=Xe(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),o=He(e.mul(n),i.mul(r),s.mul(t)),a=o.dot(o),l=s.div(a);return yHe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),qk=Xe(i=>{const{lightDirection:e,f0:t,f90:n,roughness:r,f:s,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=i,l=i.normalView||Jo,c=r.pow2(),u=e.add($s).normalize(),f=l.dot(e).clamp(),h=l.dot($s).clamp(),p=l.dot(u).clamp(),m=$s.dot(u).clamp();let g=FS({f0:t,f90:n,dotVH:m}),b,T;if(VM(o)&&(g=aN.mix(g,s)),VM(a)){const C=Qw.dot(e),R=Qw.dot($s),P=Qw.dot(u),I=mx.dot(e),F=mx.dot($s),k=mx.dot(u);b=gHe({alphaT:c8,alphaB:c,dotTV:R,dotBV:F,dotTL:C,dotBL:I,dotNV:h,dotNL:f}),T=vHe({alphaT:c8,alphaB:c,dotNH:p,dotTH:P,dotBH:k})}else b=Nfe({alpha:c,dotNL:f,dotNV:h}),T=Bfe({alpha:c,dotNH:p});return g.mul(b).mul(T)}),rH=Xe(({roughness:i,dotNV:e})=>{const t=Vn(-1,-.0275,-.572,.022),n=Vn(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return qt(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),Ife=Xe(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=rH({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),Ofe=Xe(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(He(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),xHe=Xe(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=Me(1).div(t),s=e.pow2().oneMinus().max(.0078125);return Me(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),bHe=Xe(({dotNV:i,dotNL:e})=>Me(1).div(Me(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),_He=Xe(({lightDirection:i})=>{const e=i.add($s).normalize(),t=Jo.dot(i).clamp(),n=Jo.dot($s).clamp(),r=Jo.dot(e).clamp(),s=xHe({roughness:oN,dotNH:r}),o=bHe({dotNV:n,dotNL:t});return Qv.mul(s).mul(o)}),SHe=Xe(({N:i,V:e,roughness:t})=>{const s=.0078125,o=i.dot(e).saturate(),a=qt(t,o.oneMinus().sqrt());return a.assign(a.mul(.984375).add(s)),a}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),THe=Xe(({f:i})=>{const e=i.length();return na(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),o4=Xe(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),o=r.div(s),a=t.greaterThan(0).select(o,na(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return i.cross(e).mul(a)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),aZ=Xe(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:o,p3:a})=>{const l=s.sub(r).toVar(),c=a.sub(r).toVar(),u=l.cross(c),f=He().toVar();return Hi(u.dot(t.sub(r)).greaterThanEqual(0),()=>{const h=e.sub(i.mul(e.dot(i))).normalize(),p=i.cross(h).negate(),m=n.mul(Mc(h,p,i).transpose()).toVar(),g=m.mul(r.sub(t)).normalize().toVar(),b=m.mul(s.sub(t)).normalize().toVar(),T=m.mul(o.sub(t)).normalize().toVar(),C=m.mul(a.sub(t)).normalize().toVar(),R=He(0).toVar();R.addAssign(o4({v1:g,v2:b})),R.addAssign(o4({v1:b,v2:T})),R.addAssign(o4({v1:T,v2:C})),R.addAssign(o4({v1:C,v2:g})),f.assign(He(THe({f:R})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),xN=1/6,Ffe=i=>Ni(xN,Ni(i,Ni(i,i.negate().add(3)).sub(3)).add(1)),$k=i=>Ni(xN,Ni(i,Ni(i,Ni(3,i).sub(6))).add(4)),Ufe=i=>Ni(xN,Ni(i,Ni(i,Ni(-3,i).add(3)).add(3)).add(1)),jk=i=>Ni(xN,Cp(i,3)),lZ=i=>Ffe(i).add($k(i)),cZ=i=>Ufe(i).add(jk(i)),uZ=i=>ya(-1,$k(i).div(Ffe(i).add($k(i)))),fZ=i=>ya(1,jk(i).div(Ufe(i).add(jk(i)))),hZ=(i,e,t)=>{const n=i.uvNode,r=Ni(n,e.zw).add(.5),s=iA(r),o=vg(r),a=lZ(o.x),l=cZ(o.x),c=uZ(o.x),u=fZ(o.x),f=uZ(o.y),h=fZ(o.y),p=qt(s.x.add(c),s.y.add(f)).sub(.5).mul(e.xy),m=qt(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),g=qt(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),b=qt(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),T=lZ(o.y).mul(ya(a.mul(i.sample(p).level(t)),l.mul(i.sample(m).level(t)))),C=cZ(o.y).mul(ya(a.mul(i.sample(g).level(t)),l.mul(i.sample(b).level(t))));return T.add(C)},kfe=Xe(([i,e=Me(3)])=>{const t=qt(i.size(Oe(e))),n=qt(i.size(Oe(e.add(1)))),r=Bp(1,t),s=Bp(1,n),o=hZ(i,Vn(r,t),iA(e)),a=hZ(i,Vn(s,n),cN(e));return vg(e).mix(o,a)}),dZ=Xe(([i,e,t,n,r])=>{const s=He(Fz(e.negate(),hg(i),Bp(1,n))),o=He(Xm(r[0].xyz),Xm(r[1].xyz),Xm(r[2].xyz));return hg(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),EHe=Xe(([i,e])=>i.mul(AA(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),wHe=Xz(),MHe=Xz(),pZ=Xe(([i,e,t],{material:n})=>{const s=(n.side===Bs?wHe:MHe).sample(i),o=nA(QM.x).mul(EHe(e,t));return kfe(s,o)}),AZ=Xe(([i,e,t])=>(Hi(t.notEqual(0),()=>{const n=lN(e).negate().div(t);return Cz(n.negate().mul(i))}),He(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),CHe=Xe(([i,e,t,n,r,s,o,a,l,c,u,f,h,p,m])=>{let g,b;if(m){g=Vn().toVar(),b=He().toVar();const I=u.sub(1).mul(m.mul(.025)),F=He(u.sub(I),u,u.add(I));Yr({start:0,end:3},({i:k})=>{const q=F.element(k),H=dZ(i,e,f,q,a),O=o.add(H),$=c.mul(l.mul(Vn(O,1))),ee=qt($.xy.div($.w)).toVar();ee.addAssign(1),ee.divAssign(2),ee.assign(qt(ee.x,ee.y.oneMinus()));const Y=pZ(ee,t,q);g.element(k).assign(Y.element(k)),g.a.addAssign(Y.a),b.element(k).assign(n.element(k).mul(AZ(Xm(H),h,p).element(k)))}),g.a.divAssign(3)}else{const I=dZ(i,e,f,u,a),F=o.add(I),k=c.mul(l.mul(Vn(F,1))),q=qt(k.xy.div(k.w)).toVar();q.addAssign(1),q.divAssign(2),q.assign(qt(q.x,q.y.oneMinus())),g=pZ(q,t,u),b=n.mul(AZ(Xm(I),h,p))}const T=b.rgb.mul(g.rgb),C=i.dot(e).clamp(),R=He(Ife({dotNV:C,specularColor:r,specularF90:s,roughness:t})),P=b.r.add(b.g,b.b).div(3);return Vn(R.oneMinus().mul(T),g.a.oneMinus().mul(P).oneMinus())}),RHe=Mc(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),DHe=i=>{const e=i.sqrt();return He(1).add(e).div(He(1).sub(e))},mZ=(i,e)=>i.sub(e).div(i.add(e)).pow2(),LHe=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=He(54856e-17,44201e-17,52481e-17),r=He(1681e3,1795300,2208400),s=He(43278e5,93046e5,66121e5),o=Me(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=He(a.x.add(o),a.y,a.z).div(10685e-11),RHe.mul(a)},PHe=Xe(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=Kr(i,e,mA(0,.03,n)),a=i.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();Hi(a.lessThan(0),()=>He(1));const l=a.sqrt(),c=mZ(s,i),u=FS({f0:c,f90:1,dotVH:t}),f=u.oneMinus(),h=s.lessThan(i).select(Math.PI,0),p=Me(Math.PI).sub(h),m=DHe(r.clamp(0,.9999)),g=mZ(m,s.toVec3()),b=FS({f0:g,f90:1,dotVH:l}),T=He(m.x.lessThan(s).select(Math.PI,0),m.y.lessThan(s).select(Math.PI,0),m.z.lessThan(s).select(Math.PI,0)),C=s.mul(n,l,2),R=He(p).add(T),P=u.mul(b).clamp(1e-5,.9999),I=P.sqrt(),F=f.pow2().mul(b).div(He(1).sub(P)),q=u.add(F).toVar(),H=F.sub(f).toVar();return Yr({start:1,end:2,condition:"<=",name:"m"},({m:O})=>{H.mulAssign(I);const $=LHe(Me(O).mul(C),Me(O).mul(R)).mul(2);q.addAssign(H.mul($))}),q.max(He(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),NHe=Xe(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=ql(t.lessThan(.25),Me(-339.2).mul(r).add(Me(161.4).mul(t)).sub(25.9),Me(-8.48).mul(r).add(Me(14.3).mul(t)).sub(9.95)),o=ql(t.lessThan(.25),Me(44).mul(r).sub(Me(23.7).mul(t)).add(3.26),Me(1.97).mul(r).sub(Me(3.27).mul(t)).add(.72));return ql(t.lessThan(.25),0,Me(.1).mul(t).sub(.025)).add(s.mul(n).add(o).exp()).mul(1/Math.PI).saturate()}),vO=He(.04),xO=Me(1);class Gfe extends vN{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=He().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=He().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=He().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=He().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=He().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=Jo.dot($s).clamp();this.iridescenceFresnel=PHe({outsideIOR:Me(1),eta2:vz,cosTheta1:t,thinFilmThickness:xz,baseF0:$u}),this.iridescenceF0=Ofe({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=Qm,n=gue.sub(Qm).normalize(),r=AN;e.backdrop=CHe(r,n,z0,Fr,$u,KM,t,dd,yf,Ab,Zw,bz,Sz,_z,this.dispersion?Tz:null),e.backdropAlpha=f8,Fr.a.mulAssign(Kr(1,e.backdrop.a,f8))}}computeMultiscattering(e,t,n){const r=Jo.dot($s).clamp(),s=rH({roughness:z0,dotNV:r}),a=(this.iridescenceF0?aN.mix($u,this.iridescenceF0):$u).mul(s.x).add(n.mul(s.y)),c=s.x.add(s.y).oneMinus(),u=$u.add($u.oneMinus().mul(.047619)),f=a.mul(u).div(c.mul(u).oneMinus());e.addAssign(a),t.addAssign(f.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Jo.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(_He({lightDirection:e}))),this.clearcoat===!0){const a=S2.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(qk({lightDirection:e,f0:vO,f90:xO,roughness:WM,normalView:S2})))}n.directDiffuse.addAssign(s.mul(Yx({diffuseColor:Fr.rgb}))),n.directSpecular.addAssign(s.mul(qk({lightDirection:e,f0:$u,f90:1,roughness:z0,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:o,ltc_2:a}){const l=t.add(n).sub(r),c=t.sub(n).sub(r),u=t.sub(n).add(r),f=t.add(n).add(r),h=Jo,p=$s,m=ea.toVar(),g=SHe({N:h,V:p,roughness:z0}),b=o.sample(g).toVar(),T=a.sample(g).toVar(),C=Mc(He(b.x,0,b.y),He(0,1,0),He(b.z,0,b.w)).toVar(),R=$u.mul(T.x).add($u.oneMinus().mul(T.y)).toVar();s.directSpecular.addAssign(e.mul(R).mul(aZ({N:h,V:p,P:m,mInv:C,p0:l,p1:c,p2:u,p3:f}))),s.directDiffuse.addAssign(e.mul(Fr).mul(aZ({N:h,V:p,P:m,mInv:Mc(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:u,p3:f})))}indirect(e,t,n){this.indirectDiffuse(e,t,n),this.indirectSpecular(e,t,n),this.ambientOcclusion(e,t,n)}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(Yx({diffuseColor:Fr})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:n}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(t.mul(Qv,NHe({normal:Jo,viewDir:$s,roughness:oN}))),this.clearcoat===!0){const c=S2.dot($s).clamp(),u=Ife({dotNV:c,specularColor:vO,specularF90:xO,roughness:WM});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(u))}const r=He().toVar("singleScattering"),s=He().toVar("multiScattering"),o=t.mul(1/Math.PI);this.computeMultiscattering(r,s,KM);const a=r.add(s),l=Fr.mul(a.r.max(a.g).max(a.b).oneMinus());n.indirectSpecular.addAssign(e.mul(r)),n.indirectSpecular.addAssign(s.mul(o)),n.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const r=Jo.dot($s).clamp().add(e),s=z0.mul(-16).oneMinus().negate().exp2(),o=e.sub(r.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(o)}finish(e){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=S2.dot($s).clamp(),r=FS({dotVH:n,f0:vO,f90:xO}),s=t.mul(l8.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(l8));t.assign(s)}if(this.sheen===!0){const n=Qv.r.max(Qv.g).max(Qv.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const gZ=Me(1),Wk=Me(-2),a4=Me(.8),bO=Me(-1),l4=Me(.4),_O=Me(2),c4=Me(.305),SO=Me(3),yZ=Me(.21),BHe=Me(4),vZ=Me(4),IHe=Me(16),OHe=Xe(([i])=>{const e=He(Ls(i)).toVar(),t=Me(-1).toVar();return Hi(e.x.greaterThan(e.z),()=>{Hi(e.x.greaterThan(e.y),()=>{t.assign(ql(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(ql(i.y.greaterThan(0),1,4))})}).Else(()=>{Hi(e.z.greaterThan(e.y),()=>{t.assign(ql(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(ql(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),FHe=Xe(([i,e])=>{const t=qt().toVar();return Hi(e.equal(0),()=>{t.assign(qt(i.z,i.y).div(Ls(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(qt(i.x.negate(),i.z.negate()).div(Ls(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(qt(i.x.negate(),i.y).div(Ls(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(qt(i.z.negate(),i.y).div(Ls(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(qt(i.x.negate(),i.z).div(Ls(i.y)))}).Else(()=>{t.assign(qt(i.x,i.y).div(Ls(i.z)))}),Ni(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),UHe=Xe(([i])=>{const e=Me(0).toVar();return Hi(i.greaterThanEqual(a4),()=>{e.assign(gZ.sub(i).mul(bO.sub(Wk)).div(gZ.sub(a4)).add(Wk))}).ElseIf(i.greaterThanEqual(l4),()=>{e.assign(a4.sub(i).mul(_O.sub(bO)).div(a4.sub(l4)).add(bO))}).ElseIf(i.greaterThanEqual(c4),()=>{e.assign(l4.sub(i).mul(SO.sub(_O)).div(l4.sub(c4)).add(_O))}).ElseIf(i.greaterThanEqual(yZ),()=>{e.assign(c4.sub(i).mul(BHe.sub(SO)).div(c4.sub(yZ)).add(SO))}).Else(()=>{e.assign(Me(-2).mul(nA(Ni(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),zfe=Xe(([i,e])=>{const t=i.toVar();t.assign(Ni(2,t).sub(1));const n=He(t,1).toVar();return Hi(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),Hfe=Xe(([i,e,t,n,r,s])=>{const o=Me(t),a=He(e),l=AA(UHe(o),Wk,s),c=vg(l),u=iA(l),f=He(Kk(i,a,u,n,r,s)).toVar();return Hi(c.notEqual(0),()=>{const h=He(Kk(i,a,u.add(1),n,r,s)).toVar();f.assign(Kr(f,h,c))}),f}),Kk=Xe(([i,e,t,n,r,s])=>{const o=Me(t).toVar(),a=He(e),l=Me(OHe(a)).toVar(),c=Me(na(vZ.sub(o),0)).toVar();o.assign(na(o,vZ));const u=Me(IS(o)).toVar(),f=qt(FHe(a,l).mul(u.sub(2)).add(1)).toVar();return Hi(l.greaterThan(2),()=>{f.y.addAssign(u),l.subAssign(3)}),f.x.addAssign(l.mul(u)),f.x.addAssign(c.mul(Ni(3,IHe))),f.y.addAssign(Ni(4,IS(s).sub(u))),f.x.mulAssign(n),f.y.mulAssign(r),i.sample(f).grad(qt(),qt())}),TO=Xe(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=Lm(n),c=t.mul(l).add(r.cross(t).mul(Qf(n))).add(r.mul(r.dot(t).mul(l.oneMinus())));return Kk(i,c,e,s,o,a)}),Vfe=Xe(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f})=>{const h=He(ql(e,t,fN(t,n))).toVar();Hi(Mz(h.equals(He(0))),()=>{h.assign(He(n.z,0,n.x.negate()))}),h.assign(hg(h));const p=He().toVar();return p.addAssign(r.element(0).mul(TO({theta:0,axis:h,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f}))),Yr({start:Oe(1),end:i},({i:m})=>{Hi(m.greaterThanEqual(s),()=>{vfe()});const g=Me(o.mul(Me(m))).toVar();p.addAssign(r.element(m).mul(TO({theta:g.mul(-1),axis:h,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f}))),p.addAssign(r.element(m).mul(TO({theta:g,axis:h,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:f})))}),Vn(p,1)});let m8=null;const xZ=new WeakMap;function kHe(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function GHe(i){let e=xZ.get(i);if((e!==void 0?e.pmremVersion:-1)!==i.pmremVersion){const n=i.image;if(i.isCubeTexture)if(HHe(n))e=m8.fromCubemap(i,e);else return null;else if(VHe(n))e=m8.fromEquirectangular(i,e);else return null;e.pmremVersion=i.pmremVersion,xZ.set(i,e)}return e.texture}class zHe extends ia{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new cs;r.isRenderTargetTexture=!0,this._texture=dr(r),this._width=Wn(0),this._height=Wn(0),this._maxMip=Wn(0),this.updateBeforeType=Pi.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=kHe(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,n=this._value;t!==n.pmremVersion&&(n.isPMREMTexture===!0?e=n:e=GHe(n),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){m8===null&&(m8=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this));const n=this.value;e.renderer.coordinateSystem===yc&&n.isPMREMTexture!==!0&&n.isRenderTargetTexture===!0&&(t=He(t.x.negate(),t.yz)),t=He(t.x,t.y.negate(),t.z);let r=this.levelNode;return r===null&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),Hfe(this._texture,t,r,this._width,this._height,this._maxMip)}}function HHe(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function VHe(i){return i==null?!1:i.height>0}const sH=Pt(zHe),bZ=new WeakMap;class qHe extends gT{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const p=n.isTextureNode?n.value:t[n.property];let m=bZ.get(p);m===void 0&&(m=sH(p),bZ.set(p,m)),n=m}const s=t.envMap?os("envMapIntensity","float",e.material):os("environmentIntensity","float",e.scene),a=t.useAnisotropy===!0||t.anisotropy>0?Nue:Jo,l=n.context(_Z(z0,a)).mul(s),c=n.context($He(AN)).mul(Math.PI).mul(s),u=Jw(l),f=Jw(c);e.context.radiance.addAssign(u),e.context.iblIrradiance.addAssign(f);const h=e.context.lightingModel.clearcoatRadiance;if(h){const p=n.context(_Z(WM,S2)).mul(s),m=Jw(p);h.addAssign(m)}}}const _Z=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=$s.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(yf)),t),getTextureLevel:()=>i}},$He=i=>({getUV:()=>i,getTextureLevel:()=>Me(1)}),jHe=new rT;class qfe extends va{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(jHe),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new qHe(t):null}setupLightingModel(){return new Gfe}setupSpecular(){const e=Kr(He(.04),Fr.rgb,jM);$u.assign(e),KM.assign(1)}setupVariants(){const e=this.metalnessNode?Me(this.metalnessNode):Hue;jM.assign(e);let t=this.roughnessNode?Me(this.roughnessNode):zue;t=iH({roughness:t}),z0.assign(t),this.setupSpecular(),Fr.assign(Vn(Fr.rgb.mul(e.oneMinus()),Fr.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const WHe=new mh;class KHe extends qfe{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(WHe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Me(this.iorNode):nfe;Zw.assign(e),$u.assign(Kr(Af(Iz(Zw.sub(1).div(Zw.add(1))).mul(Gue),He(1)).mul(Vk),Fr.rgb,jM)),KM.assign(Kr(Vk,1,jM))}setupLightingModel(){return new Gfe(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?Me(this.clearcoatNode):que,n=this.clearcoatRoughnessNode?Me(this.clearcoatRoughnessNode):$ue;l8.assign(t),WM.assign(iH({roughness:n}))}if(this.useSheen){const t=this.sheenNode?He(this.sheenNode):Kue,n=this.sheenRoughnessNode?Me(this.sheenRoughnessNode):Yue;Qv.assign(t),oN.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?Me(this.iridescenceNode):Que,n=this.iridescenceIORNode?Me(this.iridescenceIORNode):Zue,r=this.iridescenceThicknessNode?Me(this.iridescenceThicknessNode):Jue;aN.assign(t),vz.assign(n),xz.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?qt(this.anisotropyNode):Xue).toVar();My.assign(t.length()),Hi(My.equal(0),()=>{t.assign(qt(1,0))}).Else(()=>{t.divAssign(qt(My)),My.assign(My.saturate())}),c8.assign(My.pow2().mix(z0.pow2(),1)),Qw.assign(Zv[0].mul(t.x).add(Zv[1].mul(t.y))),mx.assign(Zv[1].mul(t.x).sub(Zv[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?Me(this.transmissionNode):efe,n=this.thicknessNode?Me(this.thicknessNode):tfe,r=this.attenuationDistanceNode?Me(this.attenuationDistanceNode):ife,s=this.attenuationColorNode?He(this.attenuationColorNode):rfe;if(f8.assign(t),bz.assign(n),_z.assign(r),Sz.assign(s),this.useDispersion){const o=this.dispersionNode?Me(this.dispersionNode):ufe;Tz.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?He(this.clearcoatNormalNode):jue}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const YHe=Xe(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=qt(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=Im("gradientMap","texture").context({getUV:()=>r});return He(s.r)}else{const s=r.fwidth().mul(.5);return Kr(He(.7),He(1),mA(Me(.7).sub(s.x),Me(.7).add(s.x),r.x))}});class XHe extends vN{direct({lightDirection:e,lightColor:t,reflectedLight:n},r,s){const o=YHe({normal:dN,lightDirection:e,builder:s}).mul(t);n.directDiffuse.addAssign(o.mul(Yx({diffuseColor:Fr.rgb})))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:n}){n.indirectDiffuse.addAssign(t.mul(Yx({diffuseColor:Fr}))),n.indirectDiffuse.mulAssign(e)}}const QHe=new p9;class ZHe extends va{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(QHe),this.setValues(e)}setupLightingModel(){return new XHe}}class JHe extends ia{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=He($s.z,0,$s.x.negate()).normalize(),t=$s.cross(e);return qt(e.dot(Jo),t.dot(Jo)).mul(.495).add(.5)}}const $fe=An(JHe),eVe=new y9;class tVe extends va{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(eVe),this.setValues(e)}setupVariants(e){const t=$fe;let n;e.material.matcap?n=Im("matcap","texture").context({getUV:()=>t}):n=He(Kr(.2,.8,t.y)),Fr.rgb.mulAssign(n.rgb)}}class nVe extends ia{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return rN(s,o,o.negate(),s).mul(n)}else{const s=t,o=Ax(Vn(1,0,0,0),Vn(0,Lm(s.x),Qf(s.x).negate(),0),Vn(0,Qf(s.x),Lm(s.x),0),Vn(0,0,0,1)),a=Ax(Vn(Lm(s.y),0,Qf(s.y),0),Vn(0,1,0,0),Vn(Qf(s.y).negate(),0,Lm(s.y),0),Vn(0,0,0,1)),l=Ax(Vn(Lm(s.z),Qf(s.z).negate(),0,0),Vn(Qf(s.z),Lm(s.z),0,0),Vn(0,0,1,0),Vn(0,0,0,1));return o.mul(a).mul(l).mul(Vn(n,1)).xyz}}}const bN=Pt(nVe),iVe=new gP;class jfe extends va{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(iVe),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,r=this.sizeAttenuation,{positionNode:s,rotationNode:o,scaleNode:a}=this,l=mb.mul(He(s||0));let c=qt(dd[0].xyz.length(),dd[1].xyz.length());if(a!==null&&(c=c.mul(Me(a))),r===!1)if(n.isPerspectiveCamera)c=c.mul(l.z.negate());else{const p=Me(2).div(Ab.element(1).element(1));c=c.mul(p.mul(2))}let u=Y3.xy;if(t.center&&t.center.isVector2===!0){const p=MGe("center","vec2",t);u=u.sub(p.sub(.5))}u=u.mul(c);const f=Me(o||Wue),h=bN(u,f);return Vn(l.xy.add(h),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const rVe=new tT;class sVe extends jfe{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(rVe),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return mb.mul(He(e||Bo)).xyz}setupVertex(e){const t=super.setupVertex(e);if(e.material.isNodeMaterial!==!0)return t;const{rotationNode:n,scaleNode:r,sizeNode:s}=this,o=Y3.xy.toVar(),a=O2.z.div(O2.w);if(n&&n.isNode){const c=Me(n);o.assign(bN(o,c))}let l=s!==null?qt(s):cfe;return this.sizeAttenuation===!0&&(l=l.mul(l.div(ea.z.negate()))),r&&r.isNode&&(l=l.mul(qt(r))),o.mulAssign(l.mul(2)),o.assign(o.div(O2.z)),o.y.assign(o.y.mul(a)),o.assign(o.mul(t.w)),t.addAssign(Vn(o,0,0)),t}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}class oVe extends vN{constructor(){super(),this.shadowNode=Me(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){Fr.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Fr.rgb)}}const aVe=new d9;class lVe extends va{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(aVe),this.setValues(e)}setupLightingModel(){return new oVe}}const cVe=Xe(({texture:i,uv:e})=>{const n=He().toVar();return Hi(e.x.lessThan(1e-4),()=>{n.assign(He(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(He(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(He(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(He(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(He(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(He(0,0,-1))}).Else(()=>{const s=i.sample(e.add(He(-.01,0,0))).r.sub(i.sample(e.add(He(.01,0,0))).r),o=i.sample(e.add(He(0,-.01,0))).r.sub(i.sample(e.add(He(0,.01,0))).r),a=i.sample(e.add(He(0,0,-.01))).r.sub(i.sample(e.add(He(0,0,.01))).r);n.assign(He(s,o,a))}),n.normalize()});class uVe extends yA{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return He(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Oe(Ky(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}normal(e){return cVe({texture:this,uv:e})}}const fVe=Pt(uVe);class hVe{constructor(e,t){this.nodes=e,this.info=t,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class bA{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length-1;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let dVe=0;function pVe(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class AVe{constructor(e,t,n,r,s,o,a,l,c,u){this.id=dVe++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=r,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=c,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=u,this.clippingContextCacheKey=u!==null?u.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set;for(const s of e){const o=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(o===void 0)continue;n.push(o);const a=o.isInterleavedBufferAttribute?o.data:o;r.add(a)}return this.attributes=n,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),a=this.getIndex(),l=a!==null,c=n.isInstancedBufferGeometry?n.instanceCount:e.count>1?e.count:1;if(c===0)return null;if(o.instanceCount=c,e.isBatchedMesh===!0)return o;let u=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(u=2);let f=s.start*u,h=(s.start+s.count)*u;r!==null&&(f=Math.max(f,r.start*u),h=Math.min(h,(r.start+r.count)*u));const p=n.attributes.position;let m=1/0;l?m=a.count:p!=null&&(m=p.count),f=Math.max(f,0),h=Math.min(h,m);const g=h-f;return g<0||g===1/0?null:(o.vertexCount=g,o.firstVertex=f,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const r=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,o=r.length;s<o;s++){const a=r[s];t+=a.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let n=t.customProgramCacheKey();for(const r of pVe(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const s=t[r];let o;if(s!==null){const a=typeof s;a==="number"?o=s!==0?"1":"0":a==="object"?(o="{",s.isTexture&&(o+=s.mapping),o+="}"):o=String(s)}else o=String(s);n+=o+","}return n+=this.clippingContextCacheKey+",",e.geometry&&(n+=this.getGeometryCacheKey()),e.skeleton&&(n+=e.skeleton.bones.length+","),e.isBatchedMesh&&(n+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(n+=e._colorsTexture.uuid+",")),e.count>1&&(n+=e.uuid+","),n+=e.receiveShadow+",",wle(n)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=HM(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=HM(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const mv=[];class mVe{constructor(e,t,n,r,s,o){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,n,r,s,o,a,l){const c=this.getChainMap(l);mv[0]=e,mv[1]=t,mv[2]=o,mv[3]=s;let u=c.get(mv);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,o,a,l),c.set(mv,u)):(u.updateClipping(a),u.needsGeometryUpdate&&u.setGeometry(e.geometry),(u.version!==t.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,t,n,r,s,o,a,l)):u.version=t.version)),mv.length=0,u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new bA)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,o,a,l,c,u,f){const h=this.getChainMap(f),p=new AVe(e,t,n,r,s,o,a,l,c,u);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),h.delete(p.getChainArray())},p}}class p1{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const W0={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Py=16,gVe=211,yVe=212;class vVe extends p1{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==void 0&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===W0.VERTEX?this.backend.createAttribute(e):t===W0.INDEX?this.backend.createIndexAttribute(e):t===W0.STORAGE?this.backend.createStorageAttribute(e):t===W0.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===Hv)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function Wfe(i){return i.index!==null?i.index.version:i.attributes.position.version}function SZ(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],c=s[o+1],u=s[o+2];e.push(l,c,c,u,u,l)}}else{const s=n.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,c=o+1,u=o+2;e.push(l,c,c,u,u,l)}}const r=new(X7(e)?pP:m3)(e,1);return r.version=Wfe(i),r}class xVe extends p1{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,W0.STORAGE):this.updateAttribute(s,W0.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,W0.INDEX);const r=e.geometry.indirect;r!==null&&this.updateAttribute(r,W0.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=SZ(t),s.set(t,o)):o.version!==Wfe(t)&&(this.attributes.delete(o),o=SZ(t),s.set(t,o)),r=o}return r}}class bVe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Kfe{constructor(e){this.cacheKey=e,this.usedTimes=0}}class _Ve extends Kfe{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class SVe extends Kfe{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let TVe=0;class EO{constructor(e,t,n,r=null,s=null){this.id=TVe++,this.code=e,this.stage=t,this.name=n,this.transforms=r,this.attributes=s,this.usedTimes=0}}class EVe extends p1{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new EO(o.computeShader,"compute",e.name,o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,a),n.createProgram(a));const l=this._getComputeCacheKey(e,a);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,a,l,t)),c.usedTimes++,a.usedTimes++,r.version=e.version,r.pipeline=c}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState(),a=e.material?e.material.name:"";let l=this.programs.vertex.get(o.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new EO(o.vertexShader,"vertex",a),this.programs.vertex.set(o.vertexShader,l),n.createProgram(l));let c=this.programs.fragment.get(o.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new EO(o.fragmentShader,"fragment",a),this.programs.fragment.set(o.fragmentShader,c),n.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let f=this.caches.get(u);f===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),f=this._getRenderPipeline(e,l,c,u,t)):e.pipeline=f,f.usedTimes++,l.usedTimes++,c.usedTimes++,r.pipeline=f}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new SVe(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let o=this.caches.get(r);return o===void 0&&(o=new _Ve(r,t,n),this.caches.set(r,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class wVe extends p1{constructor(e,t,n,r,s,o){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,r=n.isIndirectStorageBufferAttribute?W0.INDIRECT:W0.STORAGE;this.attributes.update(n,r)}}_update(e,t){const{backend:n}=this;let r=!1,s=!0,o=0,a=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isUniformBuffer)l.update()&&n.updateBinding(l);else if(l.isSampler)l.update();else if(l.isSampledTexture){const c=this.textures.get(l.texture);l.needsBindingsUpdate(c.generation)&&(r=!0);const u=l.update(),f=l.texture;u&&this.textures.updateTexture(f);const h=n.get(f);if(h.externalTexture!==void 0||c.isDefaultTexture?s=!1:(o=o*10+f.id,a+=f.version),n.isWebGPUBackend===!0&&h.texture===void 0&&h.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",l,u,f,l.textureNode.value,r),this.textures.updateTexture(f),r=!0),f.isStorageTexture===!0){const p=this.get(f);l.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(f)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(f),p.needsMipmap=!1)}}}r===!0&&this.backend.updateBindings(e,t,s?o:0,a)}}function MVe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function TZ(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function EZ(i){return(i.transmission>0||i.transmissionNode)&&i.side===Do&&i.forceSinglePass===!1}class CVe{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,o,a){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:o,clippingContext:a},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.groupOrder=r,l.renderOrder=e.renderOrder,l.z=s,l.group=o,l.clippingContext=a),this.renderItemsIndex++,l}push(e,t,n,r,s,o,a){const l=this.getNextRenderItem(e,t,n,r,s,o,a);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(EZ(n)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,n,r,s,o,a){const l=this.getNextRenderItem(e,t,n,r,s,o,a);n.transparent===!0||n.transmission>0?(EZ(n)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||MVe),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||TZ),this.transparent.length>1&&this.transparent.sort(t||TZ)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const WE=[];class RVe{constructor(e){this.lighting=e,this.lists=new bA}get(e,t){const n=this.lists;WE[0]=e,WE[1]=t;let r=n.get(WE);return r===void 0&&(r=new CVe(this.lighting,e,t),n.set(WE,r)),WE.length=0,r}dispose(){this.lists=new bA}}let DVe=0;class LVe{constructor(){this.id=DVe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Ln,this.scissor=!1,this.scissorValue=new Ln,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return Yfe(this)}}function Yfe(i){const{textures:e,activeCubeFace:t}=i,n=[t];for(const r of e)n.push(r.id);return tN(n)}const KE=[],PVe=new sb,NVe=new ib;class BVe{constructor(){this.chainMaps={}}get(e,t,n=null){KE[0]=e,KE[1]=t;let r;if(n===null)r="default";else{const a=n.texture.format;r=`${n.textures.length}:${a}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(r);let o=s.get(KE);return o===void 0&&(o=new LVe,s.set(KE,o)),KE.length=0,n!==null&&(o.sampleCount=n.samples===0?1:n.samples),o}getForClear(e=null){return this.get(PVe,NVe,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new bA)}dispose(){this.chainMaps={}}}const IVe=new he;class OVe extends p1{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),o=e.textures,a=this.getSize(o[0]),l=a.width>>t,c=a.height>>t;let u=e.depthTexture||s[t];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let h=!1;u===void 0&&f&&(u=new Ld,u.format=e.stencilBuffer?vd:pd,u.type=e.stencilBuffer?yd:Gs,u.image.width=l,u.image.height=c,s[t]=u),(n.width!==a.width||a.height!==n.height)&&(h=!0,u&&(u.needsUpdate=!0,u.image.width=l,u.image.height=c)),n.width=a.width,n.height=a.height,n.textures=o,n.depthTexture=u||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(h=!0,u&&(u.needsUpdate=!0),n.sampleCount=r);const p={sampleCount:r};if(e.isXRRenderTarget!==!0){for(let m=0;m<o.length;m++){const g=o[m];h&&(g.needsUpdate=!0),this.updateTexture(g,p)}u&&this.updateTexture(u,p)}if(n.initialized!==!0){n.initialized=!0;const m=()=>{e.removeEventListener("dispose",m);for(let g=0;g<o.length;g++)this._destroyTexture(o[g]);u&&this._destroyTexture(u),this.delete(e)};e.addEventListener("dispose",m)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const c=this.renderer.getRenderTarget();c?e.type=c.texture.type:e.type=Aa}const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,r||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const u=e.image;if(u===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(u.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const h of e.images)f.push(h);t.images=f}else t.image=u;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}n.version=e.version}getSize(e,t=IVe){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.isCompressedTexture?e.mipmaps?r=e.mipmaps.length:r=1:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const t=e.mapping;return t===Lp||t===aA||t===pu||t===uf}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class oH extends Qt{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class Xfe extends Xr{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const FVe=(i,e)=>It(new Xfe(i,e));class UVe extends ti{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.outputNode?this.outputNode.getMemberType(e,t):"void"}add(e){return this.nodes.push(e),this}If(e,t){const n=new Xw(t);return this._currentCond=ql(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new Xw(t),r=ql(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new Xw(e),this}build(e,...t){const n=mz();qM(this);for(const r of this.nodes)r.build(e,"void");return qM(n),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const _D=Pt(UVe);function kVe(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class GVe extends ti{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=kVe(e),this.name=t,this.isStructLayoutNode=!0}getLength(){let e=0;for(const t of this.membersLayout)e+=fz(t.type);return e}getMemberType(e,t){const n=this.membersLayout.find(r=>r.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}generate(e){return this.getNodeType(e)}}class zVe extends ti{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structLayoutNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structLayoutNode.getNodeType(e)}getMemberType(e,t){return this.structLayoutNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,r=e.getPropertyName(t);return e.addLineFlowCode(`${r} = ${e.generateStruct(n,this.structLayoutNode.membersLayout,this.values)}`,this),t.name}}const HVe=(i,e=null)=>{const t=new GVe(i,e),n=(...r)=>{let s=null;if(r.length>0)if(r[0].isNode){s={};const o=Object.keys(i);for(let a=0;a<r.length;a++)s[o[a]]=r[a]}else s=r[0];return It(new zVe(t,s))};return n.layout=t,n.isStruct=!0,n};class Qfe extends ti{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,r=[];for(let s=0;s<n.length;s++){const o="m"+s,a=n[s].getNodeType(e);r.push({name:o,type:a,index:s})}t.membersLayout=r,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,r=t!==""?t+".":"";for(let s=0;s<n.length;s++){const o=n[s].build(e);e.addLineFlowCode(`${r}m${s} = ${o}`,this)}return t}}const VVe=Pt(Qfe);function Zfe(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class qVe extends Qfe{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return Jfe(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),r=[],s=n.textures;for(const o in t){const a=Zfe(s,o);r[a]=Vn(t[o])}return this.members=r,super.setup(e)}}const Jfe=Pt(qVe),$Ve=Xe(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),Yk=(i,e)=>Cp(Ni(4,i.mul(xr(1,i))),e),jVe=(i,e)=>i.lessThan(.5)?Yk(i.mul(2),e).div(2):xr(1,Yk(Ni(xr(1,i),2),e).div(2)),WVe=(i,e,t)=>Cp(Bp(Cp(i,e),ya(Cp(i,e),Cp(xr(1,i),t))),1/e),KVe=(i,e)=>Qf(h8.mul(e.mul(i).sub(1))).div(h8.mul(e.mul(i).sub(1))),Pm=Xe(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),YVe=Xe(([i])=>He(Pm(i.z.add(Pm(i.y.mul(1)))),Pm(i.z.add(Pm(i.x.mul(1)))),Pm(i.y.add(Pm(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),XVe=Xe(([i,e,t])=>{const n=He(i).toVar(),r=Me(1.4).toVar(),s=Me(0).toVar(),o=He(n).toVar();return Yr({start:Me(0),end:Me(3),type:"float",condition:"<="},()=>{const a=He(YVe(o.mul(2))).toVar();n.addAssign(a.add(t.mul(Me(.1).mul(e)))),o.mulAssign(1.8),r.mulAssign(1.5),n.mulAssign(1.2);const l=Me(Pm(n.z.add(Pm(n.x.add(Pm(n.y)))))).toVar();s.addAssign(l.div(r)),o.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class QVe extends ti{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let r=null,s=-1;for(const o of this.functionNodes){const l=o.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const c=l.inputs;if(t.length===c.length){let u=0;for(let f=0;f<t.length;f++){const h=t[f],p=c[f];h.getNodeType(e)===p.type?u++:u=0}u>s&&(r=o,s=u)}}this._candidateFnCall=n=r(...t)}return n}}const ZVe=Pt(QVe),Xl=i=>(...e)=>ZVe(i,...e),gb=Wn(0).setGroup(ri).onRenderUpdate(i=>i.time),ehe=Wn(0).setGroup(ri).onRenderUpdate(i=>i.deltaTime),JVe=Wn(0,"uint").setGroup(ri).onRenderUpdate(i=>i.frameId),eqe=(i=1)=>(console.warn('TSL: timerLocal() is deprecated. Use "time" instead.'),gb.mul(i)),tqe=(i=1)=>(console.warn('TSL: timerGlobal() is deprecated. Use "time" instead.'),gb.mul(i)),nqe=(i=1)=>(console.warn('TSL: timerDelta() is deprecated. Use "deltaTime" instead.'),ehe.mul(i)),iqe=(i=gb)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),rqe=(i=gb)=>i.fract().round(),sqe=(i=gb)=>i.add(.5).fract().mul(2).sub(1).abs(),oqe=(i=gb)=>i.fract(),aqe=Xe(([i,e,t=qt(.5)])=>bN(i.sub(t),e).add(t)),lqe=Xe(([i,e,t=qt(.5)])=>{const n=i.sub(t),r=n.dot(n),o=r.mul(r).mul(e);return i.add(n.mul(o))}),cqe=Xe(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=dd.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=dd;const r=yf.mul(n);return VM(e)&&(r[0][0]=dd[0].length(),r[0][1]=0,r[0][2]=0),VM(t)&&(r[1][0]=0,r[1][1]=dd[1].length(),r[1][2]=0),r[2][0]=0,r[2][1]=0,r[2][2]=1,Ab.mul(r).mul(Bo)}),uqe=Xe(([i=null])=>{const e=A8();return A8(Qz(i)).sub(e).lessThan(0).select(xA,i)});class fqe extends ti{static get type(){return"SpriteSheetUVNode"}constructor(e,t=Ys(),n=Me(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:r,height:s}=n,o=e.mod(r.mul(s)).floor(),a=o.mod(r),l=s.sub(o.add(1).div(r).ceil()),c=n.reciprocal(),u=qt(a,l);return t.add(u).mul(c)}}const hqe=Pt(fqe);class dqe extends ti{static get type(){return"TriplanarTexturesNode"}constructor(e,t=null,n=null,r=Me(1),s=Bo,o=mf){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=n,this.scaleNode=r,this.positionNode=s,this.normalNode=o}setup(){const{textureXNode:e,textureYNode:t,textureZNode:n,scaleNode:r,positionNode:s,normalNode:o}=this;let a=o.abs().normalize();a=a.div(a.dot(He(1)));const l=s.yz.mul(r),c=s.zx.mul(r),u=s.xy.mul(r),f=e.value,h=t!==null?t.value:f,p=n!==null?n.value:f,m=dr(f,l).mul(a.x),g=dr(h,c).mul(a.y),b=dr(p,u).mul(a.z);return ya(m,g,b)}}const the=Pt(dqe),pqe=(...i)=>the(...i),H_=new rd,gv=new he,V_=new he,wO=new he,YE=new rn,u4=new he(0,0,-1),T0=new Ln,XE=new he,f4=new he,QE=new Ln,h4=new at,g8=new Dd,Aqe=xA.flipX();g8.depthTexture=new Ld(1,1);let MO=!1;class aH extends yA{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||g8.texture,Aqe),this._reflectorBaseNode=e.reflector||new mqe(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=It(new aH({defaultTexture:g8.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e._reflectorBaseNode=this._reflectorBaseNode,e}}class mqe extends ti{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new Vi,resolution:r=1,generateMipmaps:s=!1,bounces:o=!0,depth:a=!1}=t;this.textureNode=e,this.target=n,this.resolution=r,this.generateMipmaps=s,this.bounces=o,this.depth=a,this.updateBeforeType=o?Pi.RENDER:Pi.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new WeakMap}_updateResolution(e,t){const n=this.resolution;t.getDrawingBufferSize(h4),e.setSize(Math.round(h4.width*n),Math.round(h4.height*n))}setup(e){return this._updateResolution(g8,e.renderer),super.setup(e)}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new Dd(0,0,{type:Fa}),this.generateMipmaps===!0&&(t.texture.minFilter=Qee,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new Ld),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&MO)return!1;MO=!0;const{scene:t,camera:n,renderer:r,material:s}=e,{target:o}=this,a=this.getVirtualCamera(n),l=this.getRenderTarget(a);if(r.getDrawingBufferSize(h4),this._updateResolution(l,r),V_.setFromMatrixPosition(o.matrixWorld),wO.setFromMatrixPosition(n.matrixWorld),YE.extractRotation(o.matrixWorld),gv.set(0,0,1),gv.applyMatrix4(YE),XE.subVectors(V_,wO),XE.dot(gv)>0)return;XE.reflect(gv).negate(),XE.add(V_),YE.extractRotation(n.matrixWorld),u4.set(0,0,-1),u4.applyMatrix4(YE),u4.add(wO),f4.subVectors(V_,u4),f4.reflect(gv).negate(),f4.add(V_),a.coordinateSystem=n.coordinateSystem,a.position.copy(XE),a.up.set(0,1,0),a.up.applyMatrix4(YE),a.up.reflect(gv),a.lookAt(f4),a.near=n.near,a.far=n.far,a.updateMatrixWorld(),a.projectionMatrix.copy(n.projectionMatrix),H_.setFromNormalAndCoplanarPoint(gv,V_),H_.applyMatrix4(a.matrixWorldInverse),T0.set(H_.normal.x,H_.normal.y,H_.normal.z,H_.constant);const c=a.projectionMatrix;QE.x=(Math.sign(T0.x)+c.elements[8])/c.elements[0],QE.y=(Math.sign(T0.y)+c.elements[9])/c.elements[5],QE.z=-1,QE.w=(1+c.elements[10])/c.elements[14],T0.multiplyScalar(1/T0.dot(QE));const u=0;c.elements[2]=T0.x,c.elements[6]=T0.y,c.elements[10]=r.coordinateSystem===Pp?T0.z-u:T0.z+1-u,c.elements[14]=T0.w,this.textureNode.value=l.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=l.depthTexture),s.visible=!1;const f=r.getRenderTarget(),h=r.getMRT(),p=r.autoClear;r.setMRT(null),r.setRenderTarget(l),r.autoClear=!0,r.render(t,a),r.setMRT(h),r.setRenderTarget(f),r.autoClear=p,s.visible=!0,MO=!1}}const gqe=i=>It(new aH(i)),CO=new du(-1,1,1,-1,0,1);class yqe extends qn{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Cn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Cn(t,2))}}const vqe=new yqe;class lH extends zi{constructor(e=null){super(vqe,e),this.camera=CO,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,CO)}render(e){e.render(this,CO)}}const xqe=new at;class bqe extends yA{static get type(){return"RTTNode"}constructor(e,t=null,n=null,r={type:Fa}){const s=new Dd(t,n,r);super(s.texture,Ys()),this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new lH(new va),this.updateBeforeType=Pi.RENDER}get autoSize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,r=t*this.pixelRatio;this.renderTarget.setSize(n,r),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoSize===!0){this.pixelRatio=e.getPixelRatio();const n=e.getSize(xqe);this.setSize(n.width,n.height)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new yA(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const nhe=(i,...e)=>It(new bqe(It(i),...e)),_qe=(i,...e)=>i.isTextureNode?i:i.isPassNode?i.getTextureNode():nhe(i,...e),a2=Xe(([i,e,t],n)=>{let r;n.renderer.coordinateSystem===Pp?(i=qt(i.x,i.y.oneMinus()).mul(2).sub(1),r=Vn(He(i,e),1)):r=Vn(He(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const s=Vn(t.mul(r));return s.xyz.div(s.w)}),Sqe=Xe(([i,e])=>{const t=e.mul(Vn(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return qt(n.x,n.y.oneMinus())}),Tqe=Xe(([i,e,t])=>{const n=Ky(Qo(e)),r=Xa(i.mul(n)).toVar(),s=Qo(e,r).toVar(),o=Qo(e,r.sub(Xa(2,0))).toVar(),a=Qo(e,r.sub(Xa(1,0))).toVar(),l=Qo(e,r.add(Xa(1,0))).toVar(),c=Qo(e,r.add(Xa(2,0))).toVar(),u=Qo(e,r.add(Xa(0,2))).toVar(),f=Qo(e,r.add(Xa(0,1))).toVar(),h=Qo(e,r.sub(Xa(0,1))).toVar(),p=Qo(e,r.sub(Xa(0,2))).toVar(),m=Ls(xr(Me(2).mul(a).sub(o),s)).toVar(),g=Ls(xr(Me(2).mul(l).sub(c),s)).toVar(),b=Ls(xr(Me(2).mul(f).sub(u),s)).toVar(),T=Ls(xr(Me(2).mul(h).sub(p),s)).toVar(),C=a2(i,s,t).toVar(),R=m.lessThan(g).select(C.sub(a2(i.sub(qt(Me(1).div(n.x),0)),a,t)),C.negate().add(a2(i.add(qt(Me(1).div(n.x),0)),l,t))),P=b.lessThan(T).select(C.sub(a2(i.add(qt(0,Me(1).div(n.y))),f,t)),C.negate().add(a2(i.sub(qt(0,Me(1).div(n.y))),h,t)));return hg(fN(R,P))});class SD extends bd{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageInstancedBufferAttribute=!0}}class Eqe extends qi{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageBufferAttribute=!0}}class wqe extends pb{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const r=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&r!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const Mqe=Pt(wqe);class Cqe extends Hz{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let r,s=null;t&&t.isStruct?(r="struct",s=t.layout):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(r=Cle(e.itemSize),n=e.count):r=t,super(e,r,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=_c.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return Mqe(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(_c.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=W3(this.value),this._varying=Dc(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),r=n.build(e);return e.registerTransform(r,t),r}}const _N=(i,e=null,t=0)=>It(new Cqe(i,e,t)),Rqe=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),_N(i,e,t).setPBO(!0)),Dqe=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=a8("float")):(t=fz(e),n=a8(e));const r=new Eqe(i,t,n);return _N(r,e,i)},Lqe=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=a8("float")):(t=fz(e),n=a8(e));const r=new SD(i,t,n);return _N(r,e,i)};class Pqe extends pue{static get type(){return"VertexColorNode"}constructor(e=0){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let r;return n===!0?r=super.generate(e):r=e.generateConst(this.nodeType,new Ln(1,1,1,1)),r}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const Nqe=i=>It(new Pqe(i));class Bqe extends ti{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const Iqe=An(Bqe),ZE=new Io,RO=new rn;class tf extends ti{static get type(){return"SceneNode"}constructor(e=tf.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===tf.BACKGROUND_BLURRINESS?r=os("backgroundBlurriness","float",n):t===tf.BACKGROUND_INTENSITY?r=os("backgroundIntensity","float",n):t===tf.BACKGROUND_ROTATION?r=Wn("mat4").label("backgroundRotation").setGroup(ri).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==u3?(ZE.copy(n.backgroundRotation),ZE.x*=-1,ZE.y*=-1,ZE.z*=-1,RO.makeRotationFromEuler(ZE)):RO.identity(),RO}):console.error("THREE.SceneNode: Unknown scope:",t),r}}tf.BACKGROUND_BLURRINESS="backgroundBlurriness";tf.BACKGROUND_INTENSITY="backgroundIntensity";tf.BACKGROUND_ROTATION="backgroundRotation";const ihe=An(tf,tf.BACKGROUND_BLURRINESS),Xk=An(tf,tf.BACKGROUND_INTENSITY),rhe=An(tf,tf.BACKGROUND_ROTATION);class Oqe extends yA{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=_c.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);t.storeNode=this.storeNode}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(_c.READ_WRITE)}toReadOnly(){return this.setAccess(_c.READ_ONLY)}toWriteOnly(){return this.setAccess(_c.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:r}=t,s=super.generate(e,"property"),o=n.build(e,"uvec2"),a=r.build(e,"vec4"),l=e.generateTextureStore(e,s,o,a);e.addLineFlowCode(l,this)}}const she=Pt(Oqe),Fqe=(i,e,t)=>{const n=she(i,e,t);return t!==null&&n.append(),n};class Uqe extends mN{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const kqe=(i,e,t)=>It(new Uqe(i,e,t)),wZ=new WeakMap;class Gqe extends ia{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=Pi.OBJECT,this.updateAfterType=Pi.OBJECT,this.previousModelWorldMatrix=Wn(new rn),this.previousProjectionMatrix=Wn(new rn).setGroup(ri),this.previousCameraViewMatrix=Wn(new rn)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const r=MZ(n);this.previousModelWorldMatrix.value.copy(r);const s=ohe(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new rn,s.previousCameraViewMatrix=new rn,s.currentProjectionMatrix=new rn,s.currentCameraViewMatrix=new rn,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){MZ(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?Ab:Wn(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(mb).mul(Bo),r=this.previousProjectionMatrix.mul(t).mul(p8),s=n.xy.div(n.w),o=r.xy.div(r.w);return xr(s,o)}}function ohe(i){let e=wZ.get(i);return e===void 0&&(e={},wZ.set(i,e)),e}function MZ(i,e=0){const t=ohe(i);let n=t[e];return n===void 0&&(t[e]=n=new rn),n}const zqe=An(Gqe),ahe=Xe(([i,e])=>Af(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),lhe=Xe(([i,e])=>Af(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),che=Xe(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),uhe=Xe(([i,e])=>Kr(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),uN(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Hqe=Xe(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return Vn(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),Vqe=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),ahe(i)),qqe=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),lhe(i)),$qe=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),che(i)),jqe=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),uhe(i)),Wqe=Xe(([i])=>cH(i.rgb)),Kqe=Xe(([i,e=Me(1)])=>e.mix(cH(i.rgb),i.rgb)),Yqe=Xe(([i,e=Me(1)])=>{const t=ya(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),r=n.sub(t).mul(e).mul(-3);return Kr(i.rgb,n,r)}),Xqe=Xe(([i,e=Me(1)])=>{const t=He(.57735,.57735,.57735),n=e.cos();return He(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(d1(t,i.rgb).mul(n.oneMinus())))))}),cH=(i,e=He(Oi.getLuminanceCoefficients(new he)))=>d1(i,e),Qqe=Xe(([i,e=He(1),t=He(0),n=He(1),r=Me(1),s=He(Oi.getLuminanceCoefficients(new he,hu))])=>{const o=i.rgb.dot(He(s)),a=na(i.rgb.mul(e).add(t),0).toVar(),l=a.pow(n).toVar();return Hi(a.r.greaterThan(0),()=>{a.r.assign(l.r)}),Hi(a.g.greaterThan(0),()=>{a.g.assign(l.g)}),Hi(a.b.greaterThan(0),()=>{a.b.assign(l.b)}),a.assign(o.add(a.sub(o).mul(r))),Vn(a.rgb,i.a)});class Zqe extends ia{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const Jqe=Pt(Zqe),e$e=new at;class fhe extends yA{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class CZ extends fhe{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class _A extends ia{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new Ld;s.isRenderTargetTexture=!0,s.name="depth";const o=new Dd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Fa,...r});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Wn(0),this._cameraFar=Wn(0),this._mrt=null,this.isPassNode=!0,this.updateBeforeType=Pi.FRAME}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=It(new CZ(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=It(new CZ(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=Zz(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=F2(s,n,r)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.texture.type=e.getColorBufferType(),this.scope===_A.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n,camera:r}=this;this._pixelRatio=t.getPixelRatio();const s=t.getSize(e$e);this.setSize(s.width,s.height);const o=t.getRenderTarget(),a=t.getMRT();this._cameraNear.value=r.near,this._cameraFar.value=r.far;for(const l in this._previousTextures)this.toggleTexture(l);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(o),t.setMRT(a)}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget.setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}_A.COLOR="color";_A.DEPTH="depth";const t$e=(i,e,t)=>It(new _A(_A.COLOR,i,e,t)),n$e=(i,e)=>It(new fhe(i,e)),i$e=(i,e,t)=>It(new _A(_A.DEPTH,i,e,t));class r$e extends _A{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,r,s){super(_A.COLOR,e,t),this.colorNode=n,this.thicknessNode=r,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((r,s,o,a,l,c,u,f)=>{if((l.isMeshToonMaterial||l.isMeshToonNodeMaterial)&&l.wireframe===!1){const h=this._getOutlineMaterial(l);t.renderObject(r,s,o,a,h,c,u,f)}t.renderObject(r,s,o,a,l,c,u,f)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new va;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Bs;const t=mf.negate(),n=Ab.mul(mb),r=Me(1),s=n.mul(Vn(Bo,1)),o=n.mul(Vn(Bo.add(t),1)),a=hg(s.sub(o));return e.vertexNode=s.add(a.mul(this.thicknessNode).mul(s.w).mul(r)),e.colorNode=Vn(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const s$e=(i,e,t=new Qt(0,0,0),n=.003,r=1)=>It(new r$e(i,e,It(t),It(n),It(r))),hhe=Xe(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),dhe=Xe(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),phe=Xe(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),o$e=Xe(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),Ahe=Xe(([i,e])=>{const t=Mc(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=Mc(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=o$e(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),a$e=Mc(He(1.6605,-.1246,-.0182),He(-.5876,1.1329,-.1006),He(-.0728,-.0083,1.1187)),l$e=Mc(He(.6274,.0691,.0164),He(.3293,.9195,.088),He(.0433,.0113,.8956)),c$e=Xe(([i])=>{const e=He(i).toVar(),t=He(e.mul(e)).toVar(),n=He(t.mul(t)).toVar();return Me(15.5).mul(n.mul(t)).sub(Ni(40.14,n.mul(e))).add(Ni(31.96,n).sub(Ni(6.868,t.mul(e))).add(Ni(.4298,t).add(Ni(.1191,e).sub(.00232))))}),mhe=Xe(([i,e])=>{const t=He(i).toVar(),n=Mc(He(.856627153315983,.137318972929847,.11189821299995),He(.0951212405381588,.761241990602591,.0767994186031903),He(.0482516061458583,.101439036467562,.811302368396859)),r=Mc(He(1.1271005818144368,-.1413297634984383,-.14132976349843826),He(-.11060664309660323,1.157823702216272,-.11060664309660294),He(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Me(-12.47393),o=Me(4.026069);return t.mulAssign(e),t.assign(l$e.mul(t)),t.assign(n.mul(t)),t.assign(na(t,1e-10)),t.assign(nA(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(AA(t,0,1)),t.assign(c$e(t)),t.assign(r.mul(t)),t.assign(Cp(na(He(0),t),He(2.2))),t.assign(a$e.mul(t)),t.assign(AA(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ghe=Xe(([i,e])=>{const t=Me(.76),n=Me(.15);i=i.mul(e);const r=Af(i.r,Af(i.g,i.b)),s=ql(r.lessThan(.08),r.sub(Ni(6.25,r.mul(r))),.04);i.subAssign(s);const o=na(i.r,na(i.g,i.b));Hi(o.lessThan(t),()=>i);const a=xr(1,t),l=xr(1,a.mul(a).div(o.add(a.sub(t))));i.mulAssign(l.div(o));const c=xr(1,Bp(1,n.mul(o.sub(l)).add(1)));return Kr(i,He(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Pa extends ti{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.code=e,this.includes=t,this.language=n}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const SN=Pt(Pa),u$e=(i,e)=>SN(i,e,"js"),f$e=(i,e)=>SN(i,e,"wgsl"),h$e=(i,e)=>SN(i,e,"glsl");class yhe extends Pa{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,o=e.getCodeFromNode(this,s);r!==""&&(o.name=r);const a=e.getPropertyName(o),l=this.getNodeFunction(e).getCode(a);return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,s,t)}}const vhe=(i,e=[],t="")=>{for(let s=0;s<e.length;s++){const o=e[s];typeof o=="function"&&(e[s]=o.functionNode)}const n=It(new yhe(i,e,t)),r=(...s)=>n.call(...s);return r.functionNode=n,r},d$e=(i,e)=>vhe(i,e,"glsl"),p$e=(i,e)=>vhe(i,e,"wgsl");class A$e extends ti{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new hh,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:Me()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=Lle(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=Ple(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const TD=Pt(A$e);class xhe extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const r=t(...n);return this.set(e,r),r}}}class m$e{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const ED=new xhe;class g$e extends ti{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new xhe,this._output=TD(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=TD(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=TD(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r(...t)}async callAsync(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r.constructor.name==="AsyncFunction"?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,u)=>this.setOutput(c,u),n=new m$e(this),r=ED.get("THREE"),s=ED.get("TSL"),o=this.getMethod(),a=[n,this._local,ED,e,t,r,s];this._object=o(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const u=c.id||c.name;c.inputType&&(this.getParameter(u)===void 0&&this.setParameter(u,null),this.getParameter(u).inputType=c.inputType),c.outputType&&(this.getOutput(u)===void 0&&this.setOutput(u,null),this.getOutput(u).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:Me()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),r="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",o=r+this.codeNode.code+s;return this._method=new Function(...e,o),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[wle(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return tN(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const y$e=Pt(g$e);function bhe(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||ea.z).negate()}const uH=Xe(([i,e],t)=>{const n=bhe(t);return mA(i,e,n)}),fH=Xe(([i],e)=>{const t=bhe(e);return i.mul(i,t,t).negate().exp().oneMinus()}),ZM=Xe(([i,e])=>Vn(e.toFloat().mix(YM.rgb,i.toVec3()),YM.a));function v$e(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),ZM(i,uH(e,t))}function x$e(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),ZM(i,fH(e))}let yv=null,vv=null;class b$e extends ti{static get type(){return"RangeNode"}constructor(e=Me(),t=Me()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Uy(this.minNode.value)),n=e.getTypeLength(Uy(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const r=this.minNode.value,s=this.maxNode.value,o=e.getTypeLength(Uy(r)),a=e.getTypeLength(Uy(s));yv=yv||new Ln,vv=vv||new Ln,yv.setScalar(0),vv.setScalar(0),o===1?yv.setScalar(r):r.isColor?yv.set(r.r,r.g,r.b,1):yv.set(r.x,r.y,r.z||0,r.w||0),a===1?vv.setScalar(s):s.isColor?vv.set(s.r,s.g,s.b,1):vv.set(s.x,s.y,s.z||0,s.w||0);const l=4,c=l*t.count,u=new Float32Array(c);for(let h=0;h<c;h++){const p=h%l,m=yv.getComponent(p),g=vv.getComponent(p);u[h]=_l.lerp(m,g,Math.random())}const f=this.getNodeType(e);if(t.count<=4096)n=K3(u,"vec4",t.count).element(eC).convert(f);else{const h=new bd(u,4);e.geometry.setAttribute("__range"+this.id,h),n=d8(h).convert(f)}}else n=Me(0);return n}}const _$e=Pt(b$e);class S$e extends ti{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),r=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,r,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(r))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const nC=(i,e)=>It(new S$e(i,e)),T$e=nC("numWorkgroups","uvec3"),E$e=nC("workgroupId","uvec3"),w$e=nC("globalId","uvec3"),M$e=nC("localId","uvec3"),C$e=nC("subgroupSize","uint");class R$e extends ti{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const hH=Pt(R$e),D$e=()=>hH("workgroup").append(),L$e=()=>hH("storage").append(),P$e=()=>hH("texture").append();class N$e extends pb{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const r=e.context.assign;if(n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class B$e extends ti{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e}label(e){return this.name=e,this}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return It(new N$e(this,e))}generate(e){return e.getScopedArray(this.name||`${this.scope}Array_${this.id}`,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const I$e=(i,e)=>It(new B$e("Workgroup",i,e));class rl extends ia{static get type(){return"AtomicFunctionNode"}constructor(e,t,n,r=null){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.storeNode=r}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,n=this.getNodeType(e),r=this.getInputType(e),s=this.pointerNode,o=this.valueNode,a=[];a.push(`&${s.build(e,r)}`),o!==null&&a.push(o.build(e,r));const l=`${e.getMethod(t,n)}( ${a.join(", ")} )`;if(this.storeNode!==null){const c=this.storeNode.build(e,r);e.addLineFlowCode(`${c} = ${l}`,this)}else e.addLineFlowCode(l,this)}}rl.ATOMIC_LOAD="atomicLoad";rl.ATOMIC_STORE="atomicStore";rl.ATOMIC_ADD="atomicAdd";rl.ATOMIC_SUB="atomicSub";rl.ATOMIC_MAX="atomicMax";rl.ATOMIC_MIN="atomicMin";rl.ATOMIC_AND="atomicAnd";rl.ATOMIC_OR="atomicOr";rl.ATOMIC_XOR="atomicXor";const O$e=Pt(rl),RA=(i,e,t,n=null)=>{const r=O$e(i,e,t,n);return r.append(),r},F$e=(i,e=null)=>RA(rl.ATOMIC_LOAD,i,null,e),U$e=(i,e,t=null)=>RA(rl.ATOMIC_STORE,i,e,t),k$e=(i,e,t=null)=>RA(rl.ATOMIC_ADD,i,e,t),G$e=(i,e,t=null)=>RA(rl.ATOMIC_SUB,i,e,t),z$e=(i,e,t=null)=>RA(rl.ATOMIC_MAX,i,e,t),H$e=(i,e,t=null)=>RA(rl.ATOMIC_MIN,i,e,t),V$e=(i,e,t=null)=>RA(rl.ATOMIC_AND,i,e,t),q$e=(i,e,t=null)=>RA(rl.ATOMIC_OR,i,e,t),$$e=(i,e,t=null)=>RA(rl.ATOMIC_XOR,i,e,t);let d4;function iC(i){d4=d4||new WeakMap;let e=d4.get(i);return e===void 0&&d4.set(i,e={}),e}function dH(i){const e=iC(i);return e.shadowMatrix||(e.shadowMatrix=Wn("mat4").setGroup(ri).onRenderUpdate(()=>(i.castShadow!==!0&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function _he(i){const e=iC(i);if(e.projectionUV===void 0){const t=dH(i).mul(Qm);e.projectionUV=t.xyz.div(t.w)}return e.projectionUV}function pH(i){const e=iC(i);return e.position||(e.position=Wn(new he).setGroup(ri).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function She(i){const e=iC(i);return e.targetPosition||(e.targetPosition=Wn(new he).setGroup(ri).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function TN(i){const e=iC(i);return e.viewPosition||(e.viewPosition=Wn(new he).setGroup(ri).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new he,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const AH=i=>yf.transformDirection(pH(i).sub(She(i))),j$e=i=>i.sort((e,t)=>e.id-t.id),W$e=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},DO=new WeakMap;class mH extends ti{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=He().toVar("totalDiffuse"),this.totalSpecularNode=He().toVar("totalSpecular"),this.outgoingLightNode=He().toVar("outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=[],t=this._lights;for(let n=0;n<t.length;n++)e.push(t[n].id);return tN(e)}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getSelf().getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getDataFromNode(this);for(const n of t.nodes)n.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=j$e(this._lights),s=e.renderer.library;for(const o of r)if(o.isNode)t.push(It(o));else{let a=null;if(n!==null&&(a=W$e(o.id,n)),a===null){const l=s.getLightNodeClass(o.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let c=null;DO.has(o)?c=DO.get(o):(c=It(new l(o)),DO.set(o,c)),t.push(c)}}this._lightNodes=t}setupLights(e,t){for(const n of t)n.build(e)}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const t=e.context,n=t.lightingModel;let r=this.outgoingLightNode;if(n){const{_lightNodes:s,totalDiffuseNode:o,totalSpecularNode:a}=this;t.outgoingLight=r;const l=e.addStack(),c=e.getDataFromNode(this);c.nodes=l.nodes,n.start(t,l,e),this.setupLights(e,s),n.indirect(t,l,e);const{backdrop:u,backdropAlpha:f}=t,{directDiffuse:h,directSpecular:p,indirectDiffuse:m,indirectSpecular:g}=t.reflectedLight;let b=h.add(m);u!==null&&(f!==null?b=He(f.mix(b,u)):b=He(u),t.material.transparent=!0),o.assign(b),a.assign(p.add(g)),r.assign(o.add(a)),n.finish(t,l,e),r=r.bypass(e.removeStack())}return r}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const K$e=(i=[])=>It(new mH).setLights(i);class Y$e extends ti{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=Pi.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({material:e}){gH.assign(e.shadowPositionNode||Qm)}dispose(){this.updateBeforeType=Pi.NONE}}const gH=He().toVar("shadowPositionWorld");function X$e(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new Qt),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function Q$e(i,e){return e=X$e(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function Z$e(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function J$e(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function eje(i,e){return e=J$e(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function tje(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function nje(i,e,t){return t=Q$e(i,t),t=eje(e,t),t}function ije(i,e,t){Z$e(i,t),tje(e,t)}const RZ=new WeakMap,rje=Xe(([i,e,t])=>{let n=Qm.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),sje=i=>{const e=i.shadow.camera,t=os("near","float",e).setGroup(ri),n=os("far","float",e).setGroup(ri),r=yue(i);return rje(r,t,n)},oje=i=>{let e=RZ.get(i);if(e===void 0){const t=i.isPointLight?sje(i):null;e=new va,e.colorNode=Vn(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,RZ.set(i,e)}return e},The=Xe(({depthTexture:i,shadowCoord:e})=>dr(i,e.xy).compare(e.z)),Ehe=Xe(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(g,b)=>dr(i,g).compare(b),r=os("mapSize","vec2",t).setGroup(ri),s=os("radius","float",t).setGroup(ri),o=qt(1).div(r),a=o.x.negate().mul(s),l=o.y.negate().mul(s),c=o.x.mul(s),u=o.y.mul(s),f=a.div(2),h=l.div(2),p=c.div(2),m=u.div(2);return ya(n(e.xy.add(qt(a,l)),e.z),n(e.xy.add(qt(0,l)),e.z),n(e.xy.add(qt(c,l)),e.z),n(e.xy.add(qt(f,h)),e.z),n(e.xy.add(qt(0,h)),e.z),n(e.xy.add(qt(p,h)),e.z),n(e.xy.add(qt(a,0)),e.z),n(e.xy.add(qt(f,0)),e.z),n(e.xy,e.z),n(e.xy.add(qt(p,0)),e.z),n(e.xy.add(qt(c,0)),e.z),n(e.xy.add(qt(f,m)),e.z),n(e.xy.add(qt(0,m)),e.z),n(e.xy.add(qt(p,m)),e.z),n(e.xy.add(qt(a,u)),e.z),n(e.xy.add(qt(0,u)),e.z),n(e.xy.add(qt(c,u)),e.z)).mul(1/17)}),whe=Xe(({depthTexture:i,shadowCoord:e,shadow:t})=>{const n=(u,f)=>dr(i,u).compare(f),r=os("mapSize","vec2",t).setGroup(ri),s=qt(1).div(r),o=s.x,a=s.y,l=e.xy,c=vg(l.mul(r).add(.5));return l.subAssign(c.mul(s)),ya(n(l,e.z),n(l.add(qt(o,0)),e.z),n(l.add(qt(0,a)),e.z),n(l.add(s),e.z),Kr(n(l.add(qt(o.negate(),0)),e.z),n(l.add(qt(o.mul(2),0)),e.z),c.x),Kr(n(l.add(qt(o.negate(),a)),e.z),n(l.add(qt(o.mul(2),a)),e.z),c.x),Kr(n(l.add(qt(0,a.negate())),e.z),n(l.add(qt(0,a.mul(2))),e.z),c.y),Kr(n(l.add(qt(o,a.negate())),e.z),n(l.add(qt(o,a.mul(2))),e.z),c.y),Kr(Kr(n(l.add(qt(o.negate(),a.negate())),e.z),n(l.add(qt(o.mul(2),a.negate())),e.z),c.x),Kr(n(l.add(qt(o.negate(),a.mul(2))),e.z),n(l.add(qt(o.mul(2),a.mul(2))),e.z),c.x),c.y)).mul(1/9)}),Mhe=Xe(({depthTexture:i,shadowCoord:e})=>{const t=Me(1).toVar(),n=dr(i).sample(e.xy).rg,r=uN(e.z,n.x);return Hi(r.notEqual(Me(1)),()=>{const s=e.z.sub(n.x),o=na(0,n.y.mul(n.y));let a=o.div(o.add(s.mul(s)));a=AA(xr(a,.3).div(.95-.3)),t.assign(AA(na(r,a)))}),t}),aje=Xe(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=Me(0).toVar(),s=Me(0).toVar(),o=i.lessThanEqual(Me(1)).select(Me(0),Me(2).div(i.sub(1))),a=i.lessThanEqual(Me(1)).select(Me(0),Me(-1));Yr({start:Oe(0),end:Oe(i),type:"int",condition:"<"},({i:c})=>{const u=a.add(Me(c).mul(o)),f=n.sample(ya(tC.xy,qt(0,u).mul(e)).div(t)).x;r.addAssign(f),s.addAssign(f.mul(f))}),r.divAssign(i),s.divAssign(i);const l=CA(s.sub(r.mul(r)));return qt(r,l)}),lje=Xe(({samples:i,radius:e,size:t,shadowPass:n})=>{const r=Me(0).toVar(),s=Me(0).toVar(),o=i.lessThanEqual(Me(1)).select(Me(0),Me(2).div(i.sub(1))),a=i.lessThanEqual(Me(1)).select(Me(0),Me(-1));Yr({start:Oe(0),end:Oe(i),type:"int",condition:"<"},({i:c})=>{const u=a.add(Me(c).mul(o)),f=n.sample(ya(tC.xy,qt(u,0).mul(e)).div(t));r.addAssign(f.x),s.addAssign(ya(f.y.mul(f.y),f.x.mul(f.x)))}),r.divAssign(i),s.divAssign(i);const l=CA(s.sub(r.mul(r)));return qt(r,l)}),cje=[The,Ehe,whe,Mhe];let LO;const p4=new lH;class Che extends Y$e{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:r,shadow:s}){const o=r.x.greaterThanEqual(0).and(r.x.lessThanEqual(1)).and(r.y.greaterThanEqual(0)).and(r.y.lessThanEqual(1)).and(r.z.lessThanEqual(1)),a=t({depthTexture:n,shadowCoord:r,shadow:s});return o.select(a,Me(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:r}=e,s=os("bias","float",n).setGroup(ri);let o=t,a;if(n.camera.isOrthographicCamera||r.logarithmicDepthBuffer!==!0)o=o.xyz.div(o.w),a=o.z,r.coordinateSystem===Pp&&(a=a.mul(2).sub(1));else{const l=o.w;o=o.xy.div(l);const c=os("near","float",n.camera).setGroup(ri),u=os("far","float",n.camera).setGroup(ri);a=Jz(l.negate(),c,u)}return o=He(o.x,o.y.oneMinus(),a.add(s)),o}getShadowFilterFn(e){return cje[e]}setupShadow(e){const{renderer:t}=e,{light:n,shadow:r}=this,s=t.shadowMap.type,o=new Ld(r.mapSize.width,r.mapSize.height);o.compareFunction=p3;const a=e.createRenderTarget(r.mapSize.width,r.mapSize.height);if(a.depthTexture=o,r.camera.updateProjectionMatrix(),s===eu){o.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Yy,type:Fa}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Yy,type:Fa});const T=dr(o),C=dr(this.vsmShadowMapVertical.texture),R=os("blurSamples","float",r).setGroup(ri),P=os("radius","float",r).setGroup(ri),I=os("mapSize","vec2",r).setGroup(ri);let F=this.vsmMaterialVertical||(this.vsmMaterialVertical=new va);F.fragmentNode=aje({samples:R,radius:P,size:I,shadowPass:T}).context(e.getSharedContext()),F.name="VSMVertical",F=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new va),F.fragmentNode=lje({samples:R,radius:P,size:I,shadowPass:C}).context(e.getSharedContext()),F.name="VSMHorizontal"}const l=os("intensity","float",r).setGroup(ri),c=os("normalBias","float",r).setGroup(ri),u=dH(n).mul(gH.add(AN.mul(c))),f=this.setupShadowCoord(e,u),h=r.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(h===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=s===eu?this.vsmShadowMapHorizontal.texture:o,m=this.setupShadowFilter(e,{filterFn:h,shadowTexture:a.texture,depthTexture:p,shadowCoord:f,shadow:r}),g=dr(a.texture,f),b=Kr(1,m.rgb.mix(g,1),l.mul(g.a)).toVar();return this.shadowMap=a,this.shadow.map=a,b}setup(e){if(e.renderer.shadowMap.enabled!==!1)return Xe(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:o}=e;t.updateMatrices(r),n.setSize(t.mapSize.width,t.mapSize.height),s.render(o,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:r}=this,{renderer:s,scene:o,camera:a}=e,l=s.shadowMap.type,c=t.depthTexture.version;this._depthVersionCached=c,r.camera.layers.mask=a.layers.mask;const u=s.getRenderObjectFunction(),f=s.getMRT(),h=f?f.has("velocity"):!1;LO=nje(s,o,LO),o.overrideMaterial=oje(n),s.setRenderObjectFunction((p,m,g,b,T,C,...R)=>{(p.castShadow===!0||p.receiveShadow&&l===eu)&&(h&&(Dle(p).useVelocity=!0),p.onBeforeShadow(s,p,a,r.camera,b,m.overrideMaterial,C),s.renderObject(p,m,g,b,T,C,...R),p.onAfterShadow(s,p,a,r.camera,b,m.overrideMaterial,C))}),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(u),n.isPointLight!==!0&&l===eu&&this.vsmPass(s),ije(s,o,LO)}vsmPass(e){const{shadow:t}=this;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),p4.material=this.vsmMaterialVertical,p4.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),p4.material=this.vsmMaterialHorizontal,p4.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;(t.needsUpdate||t.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const Rhe=(i,e)=>It(new Che(i,e));class yb extends gT{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Qt,this.colorNode=e&&e.colorNode||Wn(this.color).setGroup(ri),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=Pi.FRAME}customCacheKey(){return HM(this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadowNode(){return Rhe(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const r=this.light.shadow.shadowNode;let s;r!==void 0?s=It(r):s=this.setupShadowNode(e),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const yH=Xe(i=>{const{lightDistance:e,cutoffDistance:t,decayExponent:n}=i,r=e.pow(n).max(.01).reciprocal();return t.greaterThan(0).select(r.mul(e.div(t).pow4().oneMinus().clamp().pow2()),r)}),uje=new Qt,L0=Xe(([i,e])=>{const t=i.toVar(),n=Ls(t),r=Bp(1,na(n.x,na(n.y,n.z)));n.mulAssign(r),t.mulAssign(r.mul(e.mul(2).oneMinus()));const s=qt(t.xy).toVar(),a=e.mul(1.5).oneMinus();return Hi(n.z.greaterThanEqual(a),()=>{Hi(t.z.greaterThan(0),()=>{s.x.assign(xr(4,t.x))})}).ElseIf(n.x.greaterThanEqual(a),()=>{const l=XM(t.x);s.x.assign(t.z.mul(l).add(l.mul(2)))}).ElseIf(n.y.greaterThanEqual(a),()=>{const l=XM(t.y);s.x.assign(t.x.add(l.mul(2)).add(2)),s.y.assign(t.z.mul(l).sub(2))}),qt(.125,.25).mul(s).add(qt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),fje=Xe(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>dr(i,L0(e,n.y)).compare(t)),hje=Xe(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:r})=>{const s=os("radius","float",r).setGroup(ri),o=qt(-1,1).mul(s).mul(n.y);return dr(i,L0(e.add(o.xyy),n.y)).compare(t).add(dr(i,L0(e.add(o.yyy),n.y)).compare(t)).add(dr(i,L0(e.add(o.xyx),n.y)).compare(t)).add(dr(i,L0(e.add(o.yyx),n.y)).compare(t)).add(dr(i,L0(e,n.y)).compare(t)).add(dr(i,L0(e.add(o.xxy),n.y)).compare(t)).add(dr(i,L0(e.add(o.yxy),n.y)).compare(t)).add(dr(i,L0(e.add(o.xxx),n.y)).compare(t)).add(dr(i,L0(e.add(o.yxx),n.y)).compare(t)).mul(1/9)}),dje=Xe(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const r=t.xyz.toVar(),s=r.length(),o=Wn("float").setGroup(ri).onRenderUpdate(()=>n.camera.near),a=Wn("float").setGroup(ri).onRenderUpdate(()=>n.camera.far),l=os("bias","float",n).setGroup(ri),c=Wn(n.mapSize).setGroup(ri),u=Me(1).toVar();return Hi(s.sub(a).lessThanEqual(0).and(s.sub(o).greaterThanEqual(0)),()=>{const f=s.sub(o).div(a.sub(o)).toVar();f.addAssign(l);const h=r.normalize(),p=qt(1).div(c.mul(qt(4,2)));u.assign(i({depthTexture:e,bd3D:h,dp:f,texelSize:p,shadow:n}))}),u}),DZ=new Ln,q_=new at,JE=new at;class pje extends Che{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===O7?fje:hje}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:o}){return dje({filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:o})}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:o}=e,a=t.getFrameExtents();JE.copy(t.mapSize),JE.multiply(a),n.setSize(JE.width,JE.height),q_.copy(t.mapSize);const l=s.autoClear,c=s.getClearColor(uje),u=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const f=t.getViewportCount();for(let h=0;h<f;h++){const p=t.getViewport(h),m=q_.x*p.x,g=JE.y-q_.y-q_.y*p.y;DZ.set(m,g,q_.x*p.z,q_.y*p.w),n.viewport.copy(DZ),t.updateMatrices(r,h),s.render(o,t.camera)}s.autoClear=l,s.setClearColor(c,u)}}const Aje=(i,e)=>It(new pje(i,e)),Dhe=Xe(({color:i,lightViewPosition:e,cutoffDistance:t,decayExponent:n},r)=>{const s=r.context.lightingModel,o=e.sub(ea),a=o.normalize(),l=o.length(),c=yH({lightDistance:l,cutoffDistance:t,decayExponent:n}),u=i.mul(c),f=r.context.reflectedLight;s.direct({lightDirection:a,lightColor:u,reflectedLight:f},r.stack,r)});class mje extends yb{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Wn(0).setGroup(ri),this.decayExponentNode=Wn(2).setGroup(ri)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return Aje(this.light)}setup(e){super.setup(e),Dhe({color:this.colorNode,lightViewPosition:TN(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}const gje=Xe(([i=Ys()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),yje=Xe(([i=Ys()],{renderer:e,material:t})=>{const n=Me(1).toVar(),r=Oz(i.mul(2).sub(1));if(t.alphaToCoverage&&e.samples>1){const s=Me(r.fwidth()).toVar();n.assign(mA(s.oneMinus(),s.add(1),r).oneMinus())}else r.greaterThan(1).discard();return n}),nM=Xe(([i,e,t])=>{const n=Me(t).toVar(),r=Me(e).toVar(),s=fg(i).toVar();return ql(s,r,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),y8=Xe(([i,e])=>{const t=fg(e).toVar(),n=Me(i).toVar();return ql(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),pa=Xe(([i])=>{const e=Me(i).toVar();return Oe(iA(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),Ks=Xe(([i,e])=>{const t=Me(i).toVar();return e.assign(pa(t)),t.sub(Me(e))}),vje=Xe(([i,e,t,n,r,s])=>{const o=Me(s).toVar(),a=Me(r).toVar(),l=Me(n).toVar(),c=Me(t).toVar(),u=Me(e).toVar(),f=Me(i).toVar(),h=Me(xr(1,a)).toVar();return xr(1,o).mul(f.mul(h).add(u.mul(a))).add(o.mul(c.mul(h).add(l.mul(a))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),xje=Xe(([i,e,t,n,r,s])=>{const o=Me(s).toVar(),a=Me(r).toVar(),l=He(n).toVar(),c=He(t).toVar(),u=He(e).toVar(),f=He(i).toVar(),h=Me(xr(1,a)).toVar();return xr(1,o).mul(f.mul(h).add(u.mul(a))).add(o.mul(c.mul(h).add(l.mul(a))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),Lhe=Xl([vje,xje]),bje=Xe(([i,e,t,n,r,s,o,a,l,c,u])=>{const f=Me(u).toVar(),h=Me(c).toVar(),p=Me(l).toVar(),m=Me(a).toVar(),g=Me(o).toVar(),b=Me(s).toVar(),T=Me(r).toVar(),C=Me(n).toVar(),R=Me(t).toVar(),P=Me(e).toVar(),I=Me(i).toVar(),F=Me(xr(1,p)).toVar(),k=Me(xr(1,h)).toVar();return Me(xr(1,f)).toVar().mul(k.mul(I.mul(F).add(P.mul(p))).add(h.mul(R.mul(F).add(C.mul(p))))).add(f.mul(k.mul(T.mul(F).add(b.mul(p))).add(h.mul(g.mul(F).add(m.mul(p))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),_je=Xe(([i,e,t,n,r,s,o,a,l,c,u])=>{const f=Me(u).toVar(),h=Me(c).toVar(),p=Me(l).toVar(),m=He(a).toVar(),g=He(o).toVar(),b=He(s).toVar(),T=He(r).toVar(),C=He(n).toVar(),R=He(t).toVar(),P=He(e).toVar(),I=He(i).toVar(),F=Me(xr(1,p)).toVar(),k=Me(xr(1,h)).toVar();return Me(xr(1,f)).toVar().mul(k.mul(I.mul(F).add(P.mul(p))).add(h.mul(R.mul(F).add(C.mul(p))))).add(f.mul(k.mul(T.mul(F).add(b.mul(p))).add(h.mul(g.mul(F).add(m.mul(p))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),Phe=Xl([bje,_je]),Sje=Xe(([i,e,t])=>{const n=Me(t).toVar(),r=Me(e).toVar(),s=Mn(i).toVar(),o=Mn(s.bitAnd(Mn(7))).toVar(),a=Me(nM(o.lessThan(Mn(4)),r,n)).toVar(),l=Me(Ni(2,nM(o.lessThan(Mn(4)),n,r))).toVar();return y8(a,fg(o.bitAnd(Mn(1)))).add(y8(l,fg(o.bitAnd(Mn(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Tje=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Me(e).toVar(),a=Mn(i).toVar(),l=Mn(a.bitAnd(Mn(15))).toVar(),c=Me(nM(l.lessThan(Mn(8)),o,s)).toVar(),u=Me(nM(l.lessThan(Mn(4)),s,nM(l.equal(Mn(12)).or(l.equal(Mn(14))),o,r))).toVar();return y8(c,fg(l.bitAnd(Mn(1)))).add(y8(u,fg(l.bitAnd(Mn(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),xl=Xl([Sje,Tje]),Eje=Xe(([i,e,t])=>{const n=Me(t).toVar(),r=Me(e).toVar(),s=mT(i).toVar();return He(xl(s.x,r,n),xl(s.y,r,n),xl(s.z,r,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),wje=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Me(e).toVar(),a=mT(i).toVar();return He(xl(a.x,o,s,r),xl(a.y,o,s,r),xl(a.z,o,s,r))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),ed=Xl([Eje,wje]),Mje=Xe(([i])=>{const e=Me(i).toVar();return Ni(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Cje=Xe(([i])=>{const e=Me(i).toVar();return Ni(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Rje=Xe(([i])=>{const e=He(i).toVar();return Ni(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),Nhe=Xl([Mje,Rje]),Dje=Xe(([i])=>{const e=He(i).toVar();return Ni(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),Bhe=Xl([Cje,Dje]),Kf=Xe(([i,e])=>{const t=Oe(e).toVar(),n=Mn(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(Oe(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),Ihe=Xe(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(Kf(t,Oe(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Kf(i,Oe(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Kf(e,Oe(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(Kf(t,Oe(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(Kf(i,Oe(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(Kf(e,Oe(4))),e.addAssign(i)}),rC=Xe(([i,e,t])=>{const n=Mn(t).toVar(),r=Mn(e).toVar(),s=Mn(i).toVar();return n.bitXorAssign(r),n.subAssign(Kf(r,Oe(14))),s.bitXorAssign(n),s.subAssign(Kf(n,Oe(11))),r.bitXorAssign(s),r.subAssign(Kf(s,Oe(25))),n.bitXorAssign(r),n.subAssign(Kf(r,Oe(16))),s.bitXorAssign(n),s.subAssign(Kf(n,Oe(4))),r.bitXorAssign(s),r.subAssign(Kf(s,Oe(14))),n.bitXorAssign(r),n.subAssign(Kf(r,Oe(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),Ec=Xe(([i])=>{const e=Mn(i).toVar();return Me(e).div(Me(Mn(Oe(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),rA=Xe(([i])=>{const e=Me(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),Lje=Xe(([i])=>{const e=Oe(i).toVar(),t=Mn(Mn(1)).toVar(),n=Mn(Mn(Oe(3735928559)).add(t.shiftLeft(Mn(2))).add(Mn(13))).toVar();return rC(n.add(Mn(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Pje=Xe(([i,e])=>{const t=Oe(e).toVar(),n=Oe(i).toVar(),r=Mn(Mn(2)).toVar(),s=Mn().toVar(),o=Mn().toVar(),a=Mn().toVar();return s.assign(o.assign(a.assign(Mn(Oe(3735928559)).add(r.shiftLeft(Mn(2))).add(Mn(13))))),s.addAssign(Mn(n)),o.addAssign(Mn(t)),rC(s,o,a)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Nje=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Oe(e).toVar(),s=Oe(i).toVar(),o=Mn(Mn(3)).toVar(),a=Mn().toVar(),l=Mn().toVar(),c=Mn().toVar();return a.assign(l.assign(c.assign(Mn(Oe(3735928559)).add(o.shiftLeft(Mn(2))).add(Mn(13))))),a.addAssign(Mn(s)),l.addAssign(Mn(r)),c.addAssign(Mn(n)),rC(a,l,c)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Bje=Xe(([i,e,t,n])=>{const r=Oe(n).toVar(),s=Oe(t).toVar(),o=Oe(e).toVar(),a=Oe(i).toVar(),l=Mn(Mn(4)).toVar(),c=Mn().toVar(),u=Mn().toVar(),f=Mn().toVar();return c.assign(u.assign(f.assign(Mn(Oe(3735928559)).add(l.shiftLeft(Mn(2))).add(Mn(13))))),c.addAssign(Mn(a)),u.addAssign(Mn(o)),f.addAssign(Mn(s)),Ihe(c,u,f),c.addAssign(Mn(r)),rC(c,u,f)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),Ije=Xe(([i,e,t,n,r])=>{const s=Oe(r).toVar(),o=Oe(n).toVar(),a=Oe(t).toVar(),l=Oe(e).toVar(),c=Oe(i).toVar(),u=Mn(Mn(5)).toVar(),f=Mn().toVar(),h=Mn().toVar(),p=Mn().toVar();return f.assign(h.assign(p.assign(Mn(Oe(3735928559)).add(u.shiftLeft(Mn(2))).add(Mn(13))))),f.addAssign(Mn(c)),h.addAssign(Mn(l)),p.addAssign(Mn(a)),Ihe(f,h,p),f.addAssign(Mn(o)),h.addAssign(Mn(s)),rC(f,h,p)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),as=Xl([Lje,Pje,Nje,Bje,Ije]),Oje=Xe(([i,e])=>{const t=Oe(e).toVar(),n=Oe(i).toVar(),r=Mn(as(n,t)).toVar(),s=mT().toVar();return s.x.assign(r.bitAnd(Oe(255))),s.y.assign(r.shiftRight(Oe(8)).bitAnd(Oe(255))),s.z.assign(r.shiftRight(Oe(16)).bitAnd(Oe(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Fje=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Oe(e).toVar(),s=Oe(i).toVar(),o=Mn(as(s,r,n)).toVar(),a=mT().toVar();return a.x.assign(o.bitAnd(Oe(255))),a.y.assign(o.shiftRight(Oe(8)).bitAnd(Oe(255))),a.z.assign(o.shiftRight(Oe(16)).bitAnd(Oe(255))),a}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),td=Xl([Oje,Fje]),Uje=Xe(([i])=>{const e=qt(i).toVar(),t=Oe().toVar(),n=Oe().toVar(),r=Me(Ks(e.x,t)).toVar(),s=Me(Ks(e.y,n)).toVar(),o=Me(rA(r)).toVar(),a=Me(rA(s)).toVar(),l=Me(Lhe(xl(as(t,n),r,s),xl(as(t.add(Oe(1)),n),r.sub(1),s),xl(as(t,n.add(Oe(1))),r,s.sub(1)),xl(as(t.add(Oe(1)),n.add(Oe(1))),r.sub(1),s.sub(1)),o,a)).toVar();return Nhe(l)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),kje=Xe(([i])=>{const e=He(i).toVar(),t=Oe().toVar(),n=Oe().toVar(),r=Oe().toVar(),s=Me(Ks(e.x,t)).toVar(),o=Me(Ks(e.y,n)).toVar(),a=Me(Ks(e.z,r)).toVar(),l=Me(rA(s)).toVar(),c=Me(rA(o)).toVar(),u=Me(rA(a)).toVar(),f=Me(Phe(xl(as(t,n,r),s,o,a),xl(as(t.add(Oe(1)),n,r),s.sub(1),o,a),xl(as(t,n.add(Oe(1)),r),s,o.sub(1),a),xl(as(t.add(Oe(1)),n.add(Oe(1)),r),s.sub(1),o.sub(1),a),xl(as(t,n,r.add(Oe(1))),s,o,a.sub(1)),xl(as(t.add(Oe(1)),n,r.add(Oe(1))),s.sub(1),o,a.sub(1)),xl(as(t,n.add(Oe(1)),r.add(Oe(1))),s,o.sub(1),a.sub(1)),xl(as(t.add(Oe(1)),n.add(Oe(1)),r.add(Oe(1))),s.sub(1),o.sub(1),a.sub(1)),l,c,u)).toVar();return Bhe(f)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),vH=Xl([Uje,kje]),Gje=Xe(([i])=>{const e=qt(i).toVar(),t=Oe().toVar(),n=Oe().toVar(),r=Me(Ks(e.x,t)).toVar(),s=Me(Ks(e.y,n)).toVar(),o=Me(rA(r)).toVar(),a=Me(rA(s)).toVar(),l=He(Lhe(ed(td(t,n),r,s),ed(td(t.add(Oe(1)),n),r.sub(1),s),ed(td(t,n.add(Oe(1))),r,s.sub(1)),ed(td(t.add(Oe(1)),n.add(Oe(1))),r.sub(1),s.sub(1)),o,a)).toVar();return Nhe(l)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),zje=Xe(([i])=>{const e=He(i).toVar(),t=Oe().toVar(),n=Oe().toVar(),r=Oe().toVar(),s=Me(Ks(e.x,t)).toVar(),o=Me(Ks(e.y,n)).toVar(),a=Me(Ks(e.z,r)).toVar(),l=Me(rA(s)).toVar(),c=Me(rA(o)).toVar(),u=Me(rA(a)).toVar(),f=He(Phe(ed(td(t,n,r),s,o,a),ed(td(t.add(Oe(1)),n,r),s.sub(1),o,a),ed(td(t,n.add(Oe(1)),r),s,o.sub(1),a),ed(td(t.add(Oe(1)),n.add(Oe(1)),r),s.sub(1),o.sub(1),a),ed(td(t,n,r.add(Oe(1))),s,o,a.sub(1)),ed(td(t.add(Oe(1)),n,r.add(Oe(1))),s.sub(1),o,a.sub(1)),ed(td(t,n.add(Oe(1)),r.add(Oe(1))),s,o.sub(1),a.sub(1)),ed(td(t.add(Oe(1)),n.add(Oe(1)),r.add(Oe(1))),s.sub(1),o.sub(1),a.sub(1)),l,c,u)).toVar();return Bhe(f)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),xH=Xl([Gje,zje]),Hje=Xe(([i])=>{const e=Me(i).toVar(),t=Oe(pa(e)).toVar();return Ec(as(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Vje=Xe(([i])=>{const e=qt(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar();return Ec(as(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),qje=Xe(([i])=>{const e=He(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar(),r=Oe(pa(e.z)).toVar();return Ec(as(t,n,r))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),$je=Xe(([i])=>{const e=Vn(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar(),r=Oe(pa(e.z)).toVar(),s=Oe(pa(e.w)).toVar();return Ec(as(t,n,r,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),jje=Xl([Hje,Vje,qje,$je]),Wje=Xe(([i])=>{const e=Me(i).toVar(),t=Oe(pa(e)).toVar();return He(Ec(as(t,Oe(0))),Ec(as(t,Oe(1))),Ec(as(t,Oe(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),Kje=Xe(([i])=>{const e=qt(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar();return He(Ec(as(t,n,Oe(0))),Ec(as(t,n,Oe(1))),Ec(as(t,n,Oe(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Yje=Xe(([i])=>{const e=He(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar(),r=Oe(pa(e.z)).toVar();return He(Ec(as(t,n,r,Oe(0))),Ec(as(t,n,r,Oe(1))),Ec(as(t,n,r,Oe(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Xje=Xe(([i])=>{const e=Vn(i).toVar(),t=Oe(pa(e.x)).toVar(),n=Oe(pa(e.y)).toVar(),r=Oe(pa(e.z)).toVar(),s=Oe(pa(e.w)).toVar();return He(Ec(as(t,n,r,s,Oe(0))),Ec(as(t,n,r,s,Oe(1))),Ec(as(t,n,r,s,Oe(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),Ohe=Xl([Wje,Kje,Yje,Xje]),v8=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Oe(e).toVar(),a=He(i).toVar(),l=Me(0).toVar(),c=Me(1).toVar();return Yr(o,()=>{l.addAssign(c.mul(vH(a))),c.mulAssign(r),a.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Fhe=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Oe(e).toVar(),a=He(i).toVar(),l=He(0).toVar(),c=Me(1).toVar();return Yr(o,()=>{l.addAssign(c.mul(xH(a))),c.mulAssign(r),a.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Qje=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Oe(e).toVar(),a=He(i).toVar();return qt(v8(a,o,s,r),v8(a.add(He(Oe(19),Oe(193),Oe(17))),o,s,r))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Zje=Xe(([i,e,t,n])=>{const r=Me(n).toVar(),s=Me(t).toVar(),o=Oe(e).toVar(),a=He(i).toVar(),l=He(Fhe(a,o,s,r)).toVar(),c=Me(v8(a.add(He(Oe(19),Oe(193),Oe(17))),o,s,r)).toVar();return Vn(l,c)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Jje=Xe(([i,e,t,n,r,s,o])=>{const a=Oe(o).toVar(),l=Me(s).toVar(),c=Oe(r).toVar(),u=Oe(n).toVar(),f=Oe(t).toVar(),h=Oe(e).toVar(),p=qt(i).toVar(),m=He(Ohe(qt(h.add(u),f.add(c)))).toVar(),g=qt(m.x,m.y).toVar();g.subAssign(.5),g.mulAssign(l),g.addAssign(.5);const b=qt(qt(Me(h),Me(f)).add(g)).toVar(),T=qt(b.sub(p)).toVar();return Hi(a.equal(Oe(2)),()=>Ls(T.x).add(Ls(T.y))),Hi(a.equal(Oe(3)),()=>na(Ls(T.x),Ls(T.y))),d1(T,T)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),eWe=Xe(([i,e,t,n,r,s,o,a,l])=>{const c=Oe(l).toVar(),u=Me(a).toVar(),f=Oe(o).toVar(),h=Oe(s).toVar(),p=Oe(r).toVar(),m=Oe(n).toVar(),g=Oe(t).toVar(),b=Oe(e).toVar(),T=He(i).toVar(),C=He(Ohe(He(b.add(p),g.add(h),m.add(f)))).toVar();C.subAssign(.5),C.mulAssign(u),C.addAssign(.5);const R=He(He(Me(b),Me(g),Me(m)).add(C)).toVar(),P=He(R.sub(T)).toVar();return Hi(c.equal(Oe(2)),()=>Ls(P.x).add(Ls(P.y)).add(Ls(P.z))),Hi(c.equal(Oe(3)),()=>na(na(Ls(P.x),Ls(P.y)),Ls(P.z))),d1(P,P)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),yT=Xl([Jje,eWe]),tWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=qt(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=qt(Ks(s.x,o),Ks(s.y,a)).toVar(),c=Me(1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:u})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:f})=>{const h=Me(yT(l,u,f,o,a,r,n)).toVar();c.assign(Af(c,h))})}),Hi(n.equal(Oe(0)),()=>{c.assign(CA(c))}),c}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),nWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=qt(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=qt(Ks(s.x,o),Ks(s.y,a)).toVar(),c=qt(1e6,1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:u})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:f})=>{const h=Me(yT(l,u,f,o,a,r,n)).toVar();Hi(h.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(h)}).ElseIf(h.lessThan(c.y),()=>{c.y.assign(h)})})}),Hi(n.equal(Oe(0)),()=>{c.assign(CA(c))}),c}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),iWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=qt(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=qt(Ks(s.x,o),Ks(s.y,a)).toVar(),c=He(1e6,1e6,1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:u})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:f})=>{const h=Me(yT(l,u,f,o,a,r,n)).toVar();Hi(h.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(h)}).ElseIf(h.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(h)}).ElseIf(h.lessThan(c.z),()=>{c.z.assign(h)})})}),Hi(n.equal(Oe(0)),()=>{c.assign(CA(c))}),c}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),rWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=He(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=Oe().toVar(),c=He(Ks(s.x,o),Ks(s.y,a),Ks(s.z,l)).toVar(),u=Me(1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:f})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:h})=>{Yr({start:-1,end:Oe(1),name:"z",condition:"<="},({z:p})=>{const m=Me(yT(c,f,h,p,o,a,l,r,n)).toVar();u.assign(Af(u,m))})})}),Hi(n.equal(Oe(0)),()=>{u.assign(CA(u))}),u}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),sWe=Xl([tWe,rWe]),oWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=He(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=Oe().toVar(),c=He(Ks(s.x,o),Ks(s.y,a),Ks(s.z,l)).toVar(),u=qt(1e6,1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:f})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:h})=>{Yr({start:-1,end:Oe(1),name:"z",condition:"<="},({z:p})=>{const m=Me(yT(c,f,h,p,o,a,l,r,n)).toVar();Hi(m.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(m)}).ElseIf(m.lessThan(u.y),()=>{u.y.assign(m)})})})}),Hi(n.equal(Oe(0)),()=>{u.assign(CA(u))}),u}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),aWe=Xl([nWe,oWe]),lWe=Xe(([i,e,t])=>{const n=Oe(t).toVar(),r=Me(e).toVar(),s=He(i).toVar(),o=Oe().toVar(),a=Oe().toVar(),l=Oe().toVar(),c=He(Ks(s.x,o),Ks(s.y,a),Ks(s.z,l)).toVar(),u=He(1e6,1e6,1e6).toVar();return Yr({start:-1,end:Oe(1),name:"x",condition:"<="},({x:f})=>{Yr({start:-1,end:Oe(1),name:"y",condition:"<="},({y:h})=>{Yr({start:-1,end:Oe(1),name:"z",condition:"<="},({z:p})=>{const m=Me(yT(c,f,h,p,o,a,l,r,n)).toVar();Hi(m.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(m)}).ElseIf(m.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(m)}).ElseIf(m.lessThan(u.z),()=>{u.z.assign(m)})})})}),Hi(n.equal(Oe(0)),()=>{u.assign(CA(u))}),u}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),cWe=Xl([iWe,lWe]),uWe=Xe(([i])=>{const e=i.y,t=i.z,n=He().toVar();return Hi(e.lessThan(1e-4),()=>{n.assign(He(t,t,t))}).Else(()=>{let r=i.x;r=r.sub(iA(r)).mul(6).toVar();const s=Oe(Nz(r)),o=r.sub(Me(s)),a=t.mul(e.oneMinus()),l=t.mul(e.mul(o).oneMinus()),c=t.mul(e.mul(o.oneMinus()).oneMinus());Hi(s.equal(Oe(0)),()=>{n.assign(He(t,c,a))}).ElseIf(s.equal(Oe(1)),()=>{n.assign(He(l,t,a))}).ElseIf(s.equal(Oe(2)),()=>{n.assign(He(a,t,c))}).ElseIf(s.equal(Oe(3)),()=>{n.assign(He(a,l,t))}).ElseIf(s.equal(Oe(4)),()=>{n.assign(He(c,a,t))}).Else(()=>{n.assign(He(t,a,l))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),fWe=Xe(([i])=>{const e=He(i).toVar(),t=Me(e.x).toVar(),n=Me(e.y).toVar(),r=Me(e.z).toVar(),s=Me(Af(t,Af(n,r))).toVar(),o=Me(na(t,na(n,r))).toVar(),a=Me(o.sub(s)).toVar(),l=Me().toVar(),c=Me().toVar(),u=Me().toVar();return u.assign(o),Hi(o.greaterThan(0),()=>{c.assign(a.div(o))}).Else(()=>{c.assign(0)}),Hi(c.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{Hi(t.greaterThanEqual(o),()=>{l.assign(n.sub(r).div(a))}).ElseIf(n.greaterThanEqual(o),()=>{l.assign(ya(2,r.sub(t).div(a)))}).Else(()=>{l.assign(ya(4,t.sub(n).div(a)))}),l.mulAssign(1/6),Hi(l.lessThan(0),()=>{l.addAssign(1)})}),He(l,c,u)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),hWe=Xe(([i])=>{const e=He(i).toVar(),t=gz(wz(e,He(.04045))).toVar(),n=He(e.div(12.92)).toVar(),r=He(Cp(na(e.add(He(.055)),He(0)).div(1.055),He(2.4))).toVar();return Kr(n,r,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),Uhe=(i,e)=>{i=Me(i),e=Me(e);const t=qt(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return mA(i.sub(t),i.add(t),e)},khe=(i,e,t,n)=>Kr(i,e,t[n].clamp()),dWe=(i,e,t=Ys())=>khe(i,e,t,"x"),pWe=(i,e,t=Ys())=>khe(i,e,t,"y"),Ghe=(i,e,t,n,r)=>Kr(i,e,Uhe(t,n[r])),AWe=(i,e,t,n=Ys())=>Ghe(i,e,t,n,"x"),mWe=(i,e,t,n=Ys())=>Ghe(i,e,t,n,"y"),gWe=(i=1,e=0,t=Ys())=>t.mul(i).add(e),yWe=(i,e=1)=>(i=Me(i),i.abs().pow(e).mul(i.sign())),vWe=(i,e=1,t=.5)=>Me(i).sub(t).mul(e).add(t),xWe=(i=Ys(),e=1,t=0)=>vH(i.convert("vec2|vec3")).mul(e).add(t),bWe=(i=Ys(),e=1,t=0)=>xH(i.convert("vec2|vec3")).mul(e).add(t),_We=(i=Ys(),e=1,t=0)=>(i=i.convert("vec2|vec3"),Vn(xH(i),vH(i.add(qt(19,73)))).mul(e).add(t)),SWe=(i=Ys(),e=1)=>sWe(i.convert("vec2|vec3"),e,Oe(1)),TWe=(i=Ys(),e=1)=>aWe(i.convert("vec2|vec3"),e,Oe(1)),EWe=(i=Ys(),e=1)=>cWe(i.convert("vec2|vec3"),e,Oe(1)),wWe=(i=Ys())=>jje(i.convert("vec2|vec3")),MWe=(i=Ys(),e=3,t=2,n=.5,r=1)=>v8(i,Oe(e),t,n).mul(r),CWe=(i=Ys(),e=3,t=2,n=.5,r=1)=>Qje(i,Oe(e),t,n).mul(r),RWe=(i=Ys(),e=3,t=2,n=.5,r=1)=>Fhe(i,Oe(e),t,n).mul(r),DWe=(i=Ys(),e=3,t=2,n=.5,r=1)=>Zje(i,Oe(e),t,n).mul(r),LWe=Xe(([i,e,t])=>{const n=hg(i).toVar("nDir"),r=xr(Me(.5).mul(e.sub(t)),Qm).div(n).toVar("rbmax"),s=xr(Me(-.5).mul(e.sub(t)),Qm).div(n).toVar("rbmin"),o=He().toVar("rbminmax");o.x=n.x.greaterThan(Me(0)).select(r.x,s.x),o.y=n.y.greaterThan(Me(0)).select(r.y,s.y),o.z=n.z.greaterThan(Me(0)).select(r.z,s.z);const a=Af(Af(o.x,o.y),o.z).toVar("correction");return Qm.add(n.mul(a)).toVar("boxIntersection").sub(t)}),zhe=Xe(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(Ni(t,t).sub(Ni(n,n)))),s});var ne=Object.freeze({__proto__:null,BRDF_GGX:qk,BRDF_Lambert:Yx,BasicShadowFilter:The,Break:vfe,Const:Kce,Continue:wze,DFGApprox:rH,D_GGX:Bfe,Discard:hue,EPSILON:yce,F_Schlick:FS,Fn:Xe,INFINITY:yGe,If:Hi,Loop:Yr,NodeAccess:_c,NodeShaderStage:Nk,NodeType:W9e,NodeUpdateType:Pi,PCFShadowFilter:Ehe,PCFSoftShadowFilter:whe,PI:h8,PI2:vGe,Return:BGe,Schlick_to_F0:Ofe,ScriptableNodeResources:ED,ShaderNode:Xw,TBNViewMatrix:Zv,VSMShadowFilter:Mhe,V_GGX_SmithCorrelated:Nfe,Var:Wce,abs:Ls,acesFilmicToneMapping:Ahe,acos:Tce,add:ya,addMethodChaining:Ct,addNodeElement:OGe,agxToneMapping:mhe,all:Mz,alphaT:c8,and:ace,anisotropy:My,anisotropyB:mx,anisotropyT:Qw,any:vce,append:kle,array:Yle,arrayBuffer:dGe,asin:Sce,assign:ece,atan:Dz,atan2:Vce,atomicAdd:k$e,atomicAnd:V$e,atomicFunc:RA,atomicLoad:F$e,atomicMax:z$e,atomicMin:H$e,atomicOr:q$e,atomicStore:U$e,atomicSub:G$e,atomicXor:$$e,attenuationColor:Sz,attenuationDistance:_z,attribute:gA,attributeArray:Dqe,backgroundBlurriness:ihe,backgroundIntensity:Xk,backgroundRotation:rhe,batch:mfe,billboarding:cqe,bitAnd:fce,bitNot:hce,bitOr:dce,bitXor:pce,bitangentGeometry:aze,bitangentLocal:lze,bitangentView:Due,bitangentWorld:cze,bitcast:xGe,blendBurn:ahe,blendColor:Hqe,blendDodge:lhe,blendOverlay:uhe,blendScreen:che,blur:Vfe,bool:fg,buffer:K3,bufferAttribute:W3,bumpMap:Bue,burn:Vqe,bvec2:Hle,bvec3:gz,bvec4:jle,bypass:lue,cache:Jw,call:tce,cameraFar:Ly,cameraIndex:Vz,cameraNear:Dy,cameraNormalMatrix:qGe,cameraPosition:gue,cameraProjectionMatrix:Ab,cameraProjectionMatrixInverse:HGe,cameraViewMatrix:yf,cameraWorldMatrix:VGe,cbrt:Uce,cdl:Qqe,ceil:cN,checker:gje,cineonToneMapping:phe,clamp:AA,clearcoat:l8,clearcoatRoughness:WM,code:SN,color:Gle,colorSpaceToWorking:zz,colorToDirection:tHe,compute:aue,cond:qce,context:hN,convert:Kle,convertColorSpace:EGe,convertToTexture:_qe,cos:Lm,cross:fN,cubeTexture:OS,dFdx:Lz,dFdy:Pz,dashSize:yD,defaultBuildStages:Bk,defaultShaderStages:Nle,defined:VM,degrees:bce,deltaTime:ehe,densityFog:x$e,densityFogFactor:fH,depth:eH,depthPass:i$e,difference:Bce,diffuseColor:Fr,directPointLight:Dhe,directionToColor:wfe,dispersion:Tz,distance:Nce,div:Bp,dodge:qqe,dot:d1,drawIndex:dfe,dynamicBufferAttribute:oue,element:Wle,emissive:Uk,equal:nce,equals:Lce,equirectUV:tH,exp:Cz,exp2:IS,expression:r1,faceDirection:X3,faceForward:Uz,faceforward:bGe,float:Me,floor:iA,fog:ZM,fract:vg,frameGroup:Zle,frameId:JVe,frontFacing:bue,fwidth:Rce,gain:jVe,gapSize:kk,getConstNodeType:Ule,getCurrentStack:mz,getDirection:zfe,getDistanceAttenuation:yH,getGeometryRoughness:Pfe,getNormalFromDepth:Tqe,getParallaxCorrectNormal:LWe,getRoughness:iH,getScreenPosition:Sqe,getShIrradianceAt:zhe,getTextureIndex:Zfe,getViewPosition:a2,globalId:w$e,glsl:h$e,glslFn:d$e,grayscale:Wqe,greaterThan:wz,greaterThanEqual:oce,hash:$Ve,highpModelNormalViewMatrix:tze,highpModelViewMatrix:eze,hue:Xqe,instance:bze,instanceIndex:eC,instancedArray:Lqe,instancedBufferAttribute:d8,instancedDynamicBufferAttribute:Gk,instancedMesh:Afe,int:Oe,inverseSqrt:Rz,inversesqrt:_Ge,invocationLocalIndex:xze,invocationSubgroupIndex:vze,ior:Zw,iridescence:aN,iridescenceIOR:vz,iridescenceThickness:xz,ivec2:Xa,ivec3:Vle,ivec4:qle,js:u$e,label:jce,length:Xm,lengthSq:Oz,lessThan:rce,lessThanEqual:sce,lightPosition:pH,lightProjectionUV:_he,lightShadowMatrix:dH,lightTargetDirection:AH,lightTargetPosition:She,lightViewPosition:TN,lightingContext:bfe,lights:K$e,linearDepth:A8,linearToneMapping:hhe,localId:M$e,log:lN,log2:nA,logarithmicDepthToViewZ:Gze,loop:Mze,luminance:cH,mat2:rN,mat3:Mc,mat4:Ax,matcapUV:$fe,materialAO:ffe,materialAlphaTest:Iue,materialAnisotropy:Xue,materialAnisotropyVector:o2,materialAttenuationColor:rfe,materialAttenuationDistance:ife,materialClearcoat:que,materialClearcoatNormal:jue,materialClearcoatRoughness:$ue,materialColor:Oue,materialDispersion:ufe,materialEmissive:Uue,materialIOR:nfe,materialIridescence:Que,materialIridescenceIOR:Zue,materialIridescenceThickness:Jue,materialLightMap:Kz,materialLineDashOffset:lfe,materialLineDashSize:ofe,materialLineGapSize:afe,materialLineScale:sfe,materialLineWidth:gze,materialMetalness:Hue,materialNormal:Vue,materialOpacity:Wz,materialPointSize:cfe,materialReference:Im,materialReflectivity:bD,materialRefractionRatio:Tue,materialRotation:Wue,materialRoughness:zue,materialSheen:Kue,materialSheenRoughness:Yue,materialShininess:Fue,materialSpecular:kue,materialSpecularColor:Gue,materialSpecularIntensity:Vk,materialSpecularStrength:eM,materialThickness:tfe,materialTransmission:efe,max:na,maxMipLevel:Aue,mediumpModelViewMatrix:xue,metalness:jM,min:Af,mix:Kr,mixElement:zce,mod:Bz,modInt:Ez,modelDirection:YGe,modelNormalMatrix:vue,modelPosition:XGe,modelScale:QGe,modelViewMatrix:mb,modelViewPosition:ZGe,modelViewProjection:Yz,modelWorldMatrix:dd,modelWorldMatrixInverse:JGe,morphReference:xfe,mrt:Jfe,mul:Ni,mx_aastep:Uhe,mx_cell_noise_float:wWe,mx_contrast:vWe,mx_fractal_noise_float:MWe,mx_fractal_noise_vec2:CWe,mx_fractal_noise_vec3:RWe,mx_fractal_noise_vec4:DWe,mx_hsvtorgb:uWe,mx_noise_float:xWe,mx_noise_vec3:bWe,mx_noise_vec4:_We,mx_ramplr:dWe,mx_ramptb:pWe,mx_rgbtohsv:fWe,mx_safepower:yWe,mx_splitlr:AWe,mx_splittb:mWe,mx_srgb_texture_to_lin_rec709:hWe,mx_transform_uv:gWe,mx_worley_noise_float:SWe,mx_worley_noise_vec2:TWe,mx_worley_noise_vec3:EWe,negate:Ece,neutralToneMapping:ghe,nodeArray:px,nodeImmutable:An,nodeObject:It,nodeObjects:V3,nodeProxy:Pt,normalFlat:_ue,normalGeometry:dN,normalLocal:mf,normalMap:Hk,normalView:Td,normalWorld:pN,normalize:hg,not:cce,notEqual:ice,numWorkgroups:T$e,objectDirection:$Ge,objectGroup:yz,objectPosition:yue,objectScale:WGe,objectViewPosition:KGe,objectWorldMatrix:jGe,oneMinus:wce,or:lce,orthographicDepthToViewZ:kze,oscSawtooth:oqe,oscSine:iqe,oscSquare:rqe,oscTriangle:sqe,output:YM,outputStruct:VVe,overlay:jqe,overloadingFn:Xl,parabola:Yk,parallaxDirection:Pue,parallaxUV:fze,parameter:FVe,pass:t$e,passTexture:n$e,pcurve:WVe,perspectiveDepthToViewZ:Zz,pmremTexture:sH,pointUV:Iqe,pointWidth:AGe,positionGeometry:Y3,positionLocal:Bo,positionPrevious:p8,positionView:ea,positionViewDirection:$s,positionWorld:Qm,positionWorldDirection:qz,posterize:Jqe,pow:Cp,pow2:Iz,pow3:Ice,pow4:Oce,property:Jle,radians:xce,rand:Gce,range:_$e,rangeFog:v$e,rangeFogFactor:uH,reciprocal:Cce,reference:os,referenceBuffer:zk,reflect:Pce,reflectVector:Mue,reflectView:Eue,reflector:gqe,refract:Fz,refractVector:Cue,refractView:wue,reinhardToneMapping:dhe,remainder:gce,remap:uue,remapClamp:fue,renderGroup:ri,renderOutput:due,rendererReference:iue,rotate:bN,rotateUV:aqe,roughness:z0,round:Mce,rtt:nhe,sRGBTransferEOTF:Qce,sRGBTransferOETF:Zce,sampler:kGe,saturate:kce,saturation:Kqe,screen:$qe,screenCoordinate:tC,screenSize:QM,screenUV:xA,scriptable:y$e,scriptableValue:TD,select:ql,setCurrentStack:qM,shaderStages:Ik,shadow:Rhe,shadowPositionWorld:gH,shapeCircle:yje,sharedUniformGroup:sN,sheen:Qv,sheenRoughness:oN,shiftLeft:Ace,shiftRight:mce,shininess:u8,sign:XM,sin:Qf,sinc:KVe,skinning:Tze,skinningReference:yfe,smoothstep:mA,smoothstepElement:Hce,specularColor:$u,specularF90:KM,spherizeUV:lqe,split:pGe,spritesheetUV:hqe,sqrt:CA,stack:_D,step:uN,storage:_N,storageBarrier:L$e,storageObject:Rqe,storageTexture:she,string:hGe,struct:HVe,sub:xr,subgroupIndex:yze,subgroupSize:C$e,tan:_ce,tangentGeometry:gN,tangentLocal:Q3,tangentView:Z3,tangentWorld:Rue,temp:Yce,texture:dr,texture3D:fVe,textureBarrier:P$e,textureBicubic:kfe,textureCubeUV:Hfe,textureLoad:Qo,textureSize:Ky,textureStore:Fqe,thickness:bz,time:gb,timerDelta:nqe,timerGlobal:tqe,timerLocal:eqe,toOutputColorSpace:Jce,toWorkingColorSpace:eue,toneMapping:rue,toneMappingExposure:sue,toonOutlinePass:s$e,transformDirection:Fce,transformNormal:Sue,transformNormalToView:$z,transformedBentNormalView:Nue,transformedBitangentView:Lue,transformedBitangentWorld:uze,transformedClearcoatNormalView:S2,transformedNormalView:Jo,transformedNormalWorld:AN,transformedTangentView:jz,transformedTangentWorld:oze,transmission:f8,transpose:Dce,triNoise3D:XVe,triplanarTexture:pqe,triplanarTextures:the,trunc:Nz,tslFn:fGe,uint:Mn,uniform:Wn,uniformArray:Ep,uniformGroup:Qle,uniforms:zGe,userData:kqe,uv:Ys,uvec2:zle,uvec3:mT,uvec4:$le,varying:Dc,varyingProperty:$M,vec2:qt,vec3:He,vec4:Vn,vectorComponents:db,velocity:zqe,vertexColor:Nqe,vertexIndex:hfe,vertexStage:Xce,vibrance:Yqe,viewZToLogarithmicDepth:Jz,viewZToOrthographicDepth:F2,viewZToPerspectiveDepth:Tfe,viewport:O2,viewportBottomLeft:Oze,viewportCoordinate:Sfe,viewportDepthTexture:Qz,viewportLinearDepth:zze,viewportMipTexture:Xz,viewportResolution:Bze,viewportSafeUV:uqe,viewportSharedTexture:eHe,viewportSize:_fe,viewportTexture:Fze,viewportTopLeft:Ize,viewportUV:Nze,wgsl:f$e,wgslFn:p$e,workgroupArray:I$e,workgroupBarrier:D$e,workgroupId:E$e,workingToColorSpace:tue,xor:uce});const gp=new oH;class PWe extends p1{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)r._clearColor.getRGB(gp,hu),gp.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(gp,hu),gp.a=1,o=!0;else if(s.isNode===!0){const l=this.get(e),c=s;gp.copy(r._clearColor);let u=l.backgroundMesh;if(u===void 0){const h=hN(Vn(c).mul(Xk),{getUV:()=>rhe.mul(pN),getTextureLevel:()=>ihe});let p=Yz;p=p.setZ(p.w);const m=new va;m.name="Background.material",m.side=Bs,m.depthTest=!1,m.depthWrite=!1,m.fog=!1,m.lights=!1,m.vertexNode=p,m.colorNode=h,l.backgroundMeshNode=h,l.backgroundMesh=u=new zi(new Ah(1,32,32),m),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(g,b,T){this.matrixWorld.copyPosition(T.matrixWorld)}}const f=c.getCacheKey();l.backgroundCacheKey!==f&&(l.backgroundMeshNode.node=Vn(c).mul(Xk),l.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,l.backgroundCacheKey=f),t.unshift(u,u.geometry,u.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const a=r.xr.getEnvironmentBlendMode();if(a==="additive"?gp.set(0,0,0,1):a==="alpha-blend"&&gp.set(0,0,0,0),r.autoClear===!0||o===!0){const l=n.clearColorValue;l.r=gp.r,l.g=gp.g,l.b=gp.b,l.a=gp.a,(r.backend.isWebGLBackend===!0||r.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let NWe=0;class Qk{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=NWe++}}class BWe{constructor(e,t,n,r,s,o,a,l,c,u=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=u,this.nodeAttributes=r,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.updateAfterNodes=l,this.observer=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new Qk(t.name,[],t.index,t);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}class LZ{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class IWe{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class Hhe{constructor(e,t,n=!1,r=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=r}}class OWe extends Hhe{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}class FWe{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let UWe=0;class PO{constructor(e=null){this.id=UWe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class kWe{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class A1{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class GWe extends A1{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class zWe extends A1{constructor(e,t=new at){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class HWe extends A1{constructor(e,t=new he){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class VWe extends A1{constructor(e,t=new Ln){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class qWe extends A1{constructor(e,t=new Qt){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class $We extends A1{constructor(e,t=new T3){super(e,t),this.isMatrix2Uniform=!0,this.boundary=16,this.itemSize=4}}class jWe extends A1{constructor(e,t=new Si){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class WWe extends A1{constructor(e,t=new rn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class KWe extends GWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class YWe extends zWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class XWe extends HWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class QWe extends VWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class ZWe extends qWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class JWe extends $We{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class eKe extends jWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class tKe extends WWe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const T2=4,PZ=[.125,.215,.35,.446,.526,.582],Iv=20,NO=new du(-1,1,1,-1,0,1),nKe=new ls(90,1),NZ=new Qt;let BO=null,IO=0,OO=0;const Dv=(1+Math.sqrt(5))/2,$_=1/Dv,BZ=[new he(-Dv,$_,0),new he(Dv,$_,0),new he(-$_,0,Dv),new he($_,0,Dv),new he(0,Dv,-$_),new he(0,Dv,$_),new he(-1,1,-1),new he(1,1,-1),new he(-1,1,1),new he(1,1,1)],Vhe=new WeakMap,iKe=[3,1,5,0,4,2],FO=zfe(Ys(),gA("faceIndex")).normalize(),bH=He(FO.x,FO.y,FO.z);class rKe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,r=100,s=null){if(this._setSize(256),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const a=s||this._allocateTargets();return this.fromSceneAsync(e,t,n,r,a),a}BO=this._renderer.getRenderTarget(),IO=this._renderer.getActiveCubeFace(),OO=this._renderer.getActiveMipmapLevel();const o=s||this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}async fromSceneAsync(e,t=0,n=.1,r=100,s=null){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,r,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTargets();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTargets();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=OZ(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=FZ(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===pu||e.mapping===uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(BO,IO,OO),e.scissorTest=!1,A4(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),BO=this._renderer.getRenderTarget(),IO=this._renderer.getActiveCubeFace(),OO=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Fa,format:ho,colorSpace:hu},r=IZ(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=IZ(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=sKe(s)),this._blurMaterial=oKe(s,e,t)}return r}async _compileMaterial(e){const t=new zi(this._lodPlanes[0],e);await this._renderer.compile(t,NO)}_sceneToCubeUV(e,t,n,r){const s=nKe;s.near=t,s.far=n;const o=[1,1,1,1,-1,1],a=[1,-1,1,-1,1,-1],l=this._renderer,c=l.autoClear;l.getClearColor(NZ),l.autoClear=!1;let u=this._backgroundBox;if(u===null){const p=new Tl({name:"PMREM.Background",side:Bs,depthWrite:!1,depthTest:!1});u=new zi(new MA,p)}let f=!1;const h=e.background;h?h.isColor&&(u.material.color.copy(h),e.background=null,f=!0):(u.material.color.copy(NZ),f=!0),l.setRenderTarget(r),l.clear(),f&&l.render(u,s);for(let p=0;p<6;p++){const m=p%3;m===0?(s.up.set(0,o[p],0),s.lookAt(a[p],0,0)):m===1?(s.up.set(0,0,o[p]),s.lookAt(0,a[p],0)):(s.up.set(0,o[p],0),s.lookAt(0,0,a[p]));const g=this._cubeSize;A4(r,m*g,p>2?g:0,g,g),l.render(e,s)}l.autoClear=c,e.background=h}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===pu||e.mapping===uf;r?this._cubemapMaterial===null&&(this._cubemapMaterial=OZ(e)):this._equirectMaterial===null&&(this._equirectMaterial=FZ(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const a=this._cubeSize;A4(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,NO)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=BZ[(r-s-1)%BZ.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=this._lodMeshes[r];f.material=c;const h=Vhe.get(c),p=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Iv-1),g=s/m,b=isFinite(s)?1+Math.floor(u*g):Iv;b>Iv&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Iv}`);const T=[];let C=0;for(let k=0;k<Iv;++k){const q=k/g,H=Math.exp(-q*q/2);T.push(H),k===0?C+=H:k<b&&(C+=2*H)}for(let k=0;k<T.length;k++)T[k]=T[k]/C;e.texture.frame=(e.texture.frame||0)+1,h.envMap.value=e.texture,h.samples.value=b,h.weights.array=T,h.latitudinal.value=o==="latitudinal"?1:0,a&&(h.poleAxis.value=a);const{_lodMax:R}=this;h.dTheta.value=m,h.mipInt.value=R-n;const P=this._sizeLods[r],I=3*P*(r>R-T2?r-R+T2:0),F=4*(this._cubeSize-P);A4(t,I,F,3*P,2*P),l.setRenderTarget(t),l.render(f,NO)}}function sKe(i){const e=[],t=[],n=[],r=[];let s=i;const o=i-T2+1+PZ.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);t.push(l);let c=1/l;a>i-T2?c=PZ[a-i+T2-1]:a===0&&(c=0),n.push(c);const u=1/(l-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],m=6,g=6,b=3,T=2,C=1,R=new Float32Array(b*g*m),P=new Float32Array(T*g*m),I=new Float32Array(C*g*m);for(let k=0;k<m;k++){const q=k%3*2/3-1,H=k>2?0:-1,O=[q,H,0,q+2/3,H,0,q+2/3,H+1,0,q,H,0,q+2/3,H+1,0,q,H+1,0],$=iKe[k];R.set(O,b*g*$),P.set(p,T*g*$);const ee=[$,$,$,$,$,$];I.set(ee,C*g*$)}const F=new qn;F.setAttribute("position",new qi(R,b)),F.setAttribute("uv",new qi(P,T)),F.setAttribute("faceIndex",new qi(I,C)),e.push(F),r.push(new zi(F,null)),s>T2&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function IZ(i,e,t){const n=new Dd(i,e,t);return n.texture.mapping=eg,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function A4(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function _H(i){const e=new va;return e.depthTest=!1,e.depthWrite=!1,e.blending=uu,e.name=`PMREM_${i}`,e}function oKe(i,e,t){const n=Ep(new Array(Iv).fill(0)),r=Wn(new he(0,1,0)),s=Wn(0),o=Me(Iv),a=Wn(0),l=Wn(1),c=dr(null),u=Wn(0),f=Me(1/e),h=Me(1/t),p=Me(i),m={n:o,latitudinal:a,weights:n,poleAxis:r,outputDirection:bH,dTheta:s,samples:l,envMap:c,mipInt:u,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:p},g=_H("blur");return g.fragmentNode=Vfe({...m,latitudinal:a.equal(1)}),Vhe.set(g,m),g}function OZ(i){const e=_H("cubemap");return e.fragmentNode=OS(i,bH),e}function FZ(i){const e=_H("equirect");return e.fragmentNode=dr(i,tH(bH),0),e}const UZ=new WeakMap,aKe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),m4=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class qhe{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=_D(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new PO,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=UZ.get(this.renderer);return e===void 0&&(e=new bA,UZ.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new Dd(e,t,n)}createCubeRenderTarget(e,t){return new Mfe(e,t)}createPMREMGenerator(){return new rKe(this.renderer)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const a of t)r.push(a),s=s&&a.groupNode.shared!==!0;let o;return s?(o=n.get(r),o===void 0&&(o=new Qk(e,r,this.bindingsIndexes[e].group,r),n.set(r,o))):o=new Qk(e,r,this.bindingsIndexes[e].group,r),o}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of Ik)for(const s in n[r]){const o=n[r][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const r in t){const s=t[r],o=this._getBindGroup(r,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==Pi.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==Pi.NONE&&this.updateBeforeNodes.push(e.getSelf()),n!==Pi.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Ur||e.magFilter===Um||e.magFilter===cd||e.magFilter===Ja||e.minFilter===Ur||e.minFilter===Um||e.minFilter===cd||e.minFilter===Ja}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new PO(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let r=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const o=n?n[s]:null;o!==null?r+=o.build(this,e):r+=this.generateConst(e),s<t-1&&(r+=", ")}return r+=" )",r}generateStruct(e,t,n=null){const r=[];for(const s of t){const{name:o,type:a}=s;n&&n[o]&&n[o].isNode?r.push(n[o].build(this,a)):r.push(this.generateConst(a))}return e+"( "+r.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Qt:e==="vec2"?t=new at:e==="vec3"?t=new he:e==="vec4"&&(t=new Ln)),e==="float")return m4(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${m4(t.r)}, ${m4(t.g)}, ${m4(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=o=>this.generateConst(r,o);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new LZ(e,t);return n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===Za)return"int";if(t===Gs)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=Cle(e);const r=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),r+n}getTypeFromArray(e){return aKe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let o;return!(e instanceof Z7)&&s!==!0&&(o=this.getTypeFromArray(n)),this.getTypeFromLength(r,o)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=_D(this.stack),this.stacks.push(mz()||this.stack),qM(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,qM(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);return r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={}),r[t]}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new LZ("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeFromNode(e,t,n=null,r=this.shaderStage){const s=this.getDataFromNode(e,r);let o=s.structType;if(o===void 0){const a=this.structs.index++;n===null&&(n="StructType"+a),o=new kWe(n,t),this.structs[r].push(o),s.structType=o}return o}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new IWe(r||"nodeUniform"+a,t,e),this.uniforms[n].push(o),s.uniform=o}return o}getArrayCount(e){let t=null;return e.isArrayNode?t=e.count:e.isVarNode&&e.node.isArrayNode&&(t=e.node.count),t}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage,s=!1){const o=this.getDataFromNode(e,r);let a=o.variable;if(a===void 0){const l=s?"_const":"_var",c=this.vars[r]||(this.vars[r]=[]),u=this.vars[l]||(this.vars[l]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+u,this.vars[l]++);const f=this.getArrayCount(e);a=new Hhe(t,n,s,f),s||c.push(a),o.variable=a}return a}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this)){const r=this.getDataFromNode(e,"any");let s=r.varying;if(s===void 0){const o=this.varyings,a=o.length;t===null&&(t="nodeVarying"+a),s=new OWe(t,n),o.push(s),r.varying=s}return s}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const o=this.codes[n]||(this.codes[n]=[]),a=o.length;s=new FWe("nodeCode"+a,t),o.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(r.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const a of n)this.addLineFlowCode(a)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),o=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),o.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}buildFunctionNode(e){const t=new yhe,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let o=0;const a=Object.values(this);return{next:()=>({value:a[o],done:o++>=a.length})}}};for(const o of t.inputs)n[o.name]=new Xfe(o.type,o.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.cache,o=this.buildStage,a=this.stack,l={code:""};this.flow=l,this.vars={},this.cache=new PO,this.stack=_D();for(const c of Bk)this.setBuildStage(c),l.result=e.build(this,t);return l.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.cache=s,this.stack=a,this.setBuildStage(o),l}getFunctionOperator(){return null}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(t,n);return r!==null&&(o.code+=`${this.tab+r} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(s),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new va),r.build(this)}else this.addFlow("compute",e);for(const r of Bk){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of Ik){this.setShaderStage(s);const o=this.flowNodes[s];for(const a of o)r==="generate"?this.flowNode(a):a.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new KWe(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new YWe(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new XWe(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new QWe(e);if(t==="color")return new ZWe(e);if(t==="mat2")return new JWe(e);if(t==="mat3")return new eKe(e);if(t==="mat4")return new tKe(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:r===9&&s===4?`${this.getType(n)}(${e}[0].xy, ${e}[1].xy)`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),n):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${a1} - Node System
`}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}}class kZ{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===Pi.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===Pi.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===Pi.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===Pi.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===Pi.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===Pi.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===Pi.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===Pi.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===Pi.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class SH{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}SH.isNodeFunctionInput=!0;class lKe extends yb{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,n=this.colorNode,r=AH(this.light),s=e.context.reflectedLight;t.direct({lightDirection:r,lightColor:n,reflectedLight:s},e.stack,e)}}const UO=new rn,g4=new rn;let ew=null;class cKe extends yb{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Wn(new he).setGroup(ri),this.halfWidth=Wn(new he).setGroup(ri),this.updateType=Pi.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;g4.identity(),UO.copy(t.matrixWorld),UO.premultiply(n),g4.extractRotation(UO),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(g4),this.halfHeight.value.applyMatrix4(g4)}setup(e){super.setup(e);let t,n;e.isAvailable("float32Filterable")?(t=dr(ew.LTC_FLOAT_1),n=dr(ew.LTC_FLOAT_2)):(t=dr(ew.LTC_HALF_1),n=dr(ew.LTC_HALF_2));const{colorNode:r,light:s}=this,o=e.context.lightingModel,a=TN(s),l=e.context.reflectedLight;o.directRectArea({lightColor:r,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:l,ltc_1:t,ltc_2:n},e.stack,e)}static setLTC(e){ew=e}}class $he extends yb{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Wn(0).setGroup(ri),this.penumbraCosNode=Wn(0).setGroup(ri),this.cutoffDistanceNode=Wn(0).setGroup(ri),this.decayExponentNode=Wn(0).setGroup(ri)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:n}=this;return mA(t,n,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:n,cutoffDistanceNode:r,decayExponentNode:s,light:o}=this,a=TN(o).sub(ea),l=a.normalize(),c=l.dot(AH(o)),u=this.getSpotAttenuation(c),f=a.length(),h=yH({lightDistance:f,cutoffDistance:r,decayExponent:s});let p=n.mul(u).mul(h);if(o.map){const g=_he(o),b=dr(o.map,g.xy).onRenderUpdate(()=>o.map);p=g.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(b),p)}const m=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:p,reflectedLight:m},e.stack,e)}}class uKe extends $he{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const t=this.light.iesMap;let n=null;if(t&&t.isTexture===!0){const r=e.acos().mul(1/Math.PI);n=dr(t,qt(r,0),0).r}else n=super.getSpotAttenuation(e);return n}}class fKe extends yb{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class hKe extends yb{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=pH(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Wn(new Qt).setGroup(ri)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,o=Td.dot(r).mul(.5).add(.5),a=Kr(n,t,o);e.context.irradiance.addAssign(a)}}class dKe extends yb{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new he);this.lightProbe=Ep(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=zhe(pN,this.lightProbe);e.context.irradiance.addAssign(t)}}class jhe{parseFunction(){console.warn("Abstract function.")}}class TH{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}TH.isNodeFunction=!0;const pKe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,AKe=/[a-z_0-9]+/ig,GZ="#pragma main",mKe=i=>{i=i.trim();const e=i.indexOf(GZ),t=e!==-1?i.slice(e+GZ.length):i,n=t.match(pKe);if(n!==null&&n.length===5){const r=n[4],s=[];let o=null;for(;(o=AKe.exec(r))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const m=s[l][0]==="const";m===!0&&l++;let g=s[l][0];g==="in"||g==="out"||g==="inout"?l++:g="";const b=s[l++][0];let T=Number.parseInt(s[l][0]);Number.isNaN(T)===!1?l++:T=null;const C=s[l++][0];a.push(new SH(b,C,T,g,m))}const c=t.substring(n[0].length),u=n[3]!==void 0?n[3]:"",f=n[2],h=n[1]!==void 0?n[1]:"",p=e!==-1?i.slice(0,e):"";return{type:f,inputs:a,name:u,precision:h,inputsCode:r,blockCode:c,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class gKe extends TH{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:o,blockCode:a,headerCode:l}=mKe(e);super(t,n,r,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:o,precision:a}=this;let l=`${r} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+n}else t="";return t}}class yKe extends jhe{parseFunction(e){return new gKe(e)}}const zZ=new WeakMap,E0=[],j_=[];class vKe extends p1{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new kZ,this.nodeBuilderCache=new Map,this.callHashCache=new bA,this.groupsData=new bA,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===yz.name)return!0;if(n===ri.name){const s=this.get(e),o=this.nodeFrame.renderId;return s.renderId!==o?(s.renderId=o,!0):!1}if(n===Zle.name){const s=this.get(e),o=this.nodeFrame.frameId;return s.frameId!==o?(s.frameId=o,!0):!1}E0[0]=t,E0[1]=e;let r=this.groupsData.get(E0);return r===void 0&&this.groupsData.set(E0,r={}),E0.length=0,r.version!==t.version?(r.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,o.build(),n=this._createNodeBuilderState(o),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new BWe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){E0[0]=e,E0[1]=t;const n=this.renderer.info.calls,r=this.callHashCache.get(E0)||{};if(r.callId!==n){const s=this.getEnvironmentNode(e),o=this.getFogNode(e);t&&j_.push(t.getCacheKey(!0)),s&&j_.push(s.getCacheKey()),o&&j_.push(o.getCacheKey()),j_.push(this.renderer.shadowMap.enabled?1:0),r.callId=n,r.cacheKey=tN(j_),this.callHashCache.set(E0,r),j_.length=0}return E0.length=0,r.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===Lp||n.mapping===aA||n.mapping===eg){if(e.backgroundBlurriness>0||n.mapping===eg)return sH(n);{let o;return n.isCubeTexture===!0?o=OS(n):o=dr(n),Rfe(o)}}else{if(n.isTexture===!0)return dr(n,xA.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},r);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,r=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let o=s.get(t);return(o===void 0||r)&&(o=n(),s.set(t,o)),o}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const r=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=os("color","color",n).setGroup(ri),o=os("density","float",n).setGroup(ri);return ZM(s,fH(o))}else if(n.isFog){const s=os("color","color",n).setGroup(ri),o=os("near","float",n).setGroup(ri),a=os("far","float",n).setGroup(ri);return ZM(s,uH(o,a))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const r=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return OS(n);if(n.isTexture===!0)return dr(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=n,o.camera=r,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return zZ.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=dr(e,xA).renderOutput(t.toneMapping,t.currentColorSpace);return zZ.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new kZ,this.nodeBuilderCache=new Map,this.cacheLib={}}}const kO=new rd;class x8{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Si,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const r=e.length;for(let s=0;s<r;s++){kO.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=t[n+s],a=kO.normal;o.x=-a.x,o.y=-a.y,o.z=-a.z,o.w=kO.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const r=t.clippingPlanes,s=r.length;let o,a;if(this.clipIntersection?(o=this.intersectionPlanes,a=e.intersectionPlanes.length):(o=this.unionPlanes,a=e.unionPlanes.length),o.length!==a+s){o.length=a+s;for(let l=0;l<s;l++)o[a+l]=new Ln;n=!0}this.projectPlanes(r,o,a),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new x8(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class xKe{constructor(e,t){this.bundleGroup=e,this.camera=t}}const tw=[];class bKe{constructor(){this.bundles=new bA}get(e,t){const n=this.bundles;tw[0]=e,tw[1]=t;let r=n.get(tw);return r===void 0&&(r=new xKe(e,t),n.set(tw,r)),tw.length=0,r}dispose(){this.bundles=new bA}}class Whe{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const _Ke=new mH,nw=[];class SKe extends bA{constructor(){super()}createNode(e=[]){return new mH().setLights(e)}getNode(e,t){if(e.isQuadMesh)return _Ke;nw[0]=e,nw[1]=t;let n=this.get(nw);return n===void 0&&(n=this.createNode(),this.set(nw,n)),nw.length=0,n}}class HZ extends Dd{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this.hasExternalTextures=!1,this.autoAllocateDepthBuffer=!0}copy(e){return super.copy(e),this.hasExternalTextures=e.hasExternalTextures,this.autoAllocateDepthBuffer=e.autoAllocateDepthBuffer,this}}const VZ=new he,qZ=new he;class TKe extends hh{constructor(e){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new ls,this._cameraL.viewport=new Ln,this._cameraR=new ls,this._cameraR.viewport=new Ln,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new D9,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._currentRenderTarget=null,this._xrRenderTarget=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new at,this._onSessionEvent=MKe.bind(this),this._onSessionEnd=CKe.bind(this),this._onInputSourcesChange=RKe.bind(this),this._onAnimationFrame=DKe.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._useLayers=typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getFrame(){return this._xrFrame}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend,r=t.getContext();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(this._currentRenderTarget=t.getRenderTarget(),e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._useLayers===!0){let s=null,o=null,a=null;t.depth&&(a=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,s=t.stencil?vd:pd,o=t.stencil?yd:Gs);const l={colorFormat:r.RGBA8,depthFormat:a,scaleFactor:this._framebufferScaleFactor},c=new XRWebGLBinding(e,r),u=c.createProjectionLayer(l);this._glBinding=c,this._glProjLayer=u,e.updateRenderState({layers:[u]}),t.setPixelRatio(1),t.setSize(u.textureWidth,u.textureHeight,!1),this._xrRenderTarget=new HZ(u.textureWidth,u.textureHeight,{format:ho,type:Aa,colorSpace:t.outputColorSpace,depthTexture:new Ld(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,s),stencilBuffer:t.stencil,samples:t.samples}),this._xrRenderTarget.hasExternalTextures=!0}else{const s={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,r,s);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t.setSize(o.framebufferWidth,o.framebufferHeight,!1),this._xrRenderTarget=new HZ(o.framebufferWidth,o.framebufferHeight,{format:ho,type:Aa,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil})}this.setFoveation(this.getFoveation()),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,r=e.far,s=this._cameraXR,o=this._cameraL,a=this._cameraR;s.near=a.near=o.near=n,s.far=a.far=o.far=r,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),o.layers.mask=e.layers.mask|2,a.layers.mask=e.layers.mask|4,s.layers.mask=o.layers.mask|a.layers.mask;const l=e.parent,c=s.cameras;$Z(s,l);for(let u=0;u<c.length;u++)$Z(c[u],l);c.length===2?EKe(s,o,a):s.projectionMatrix.copy(o.projectionMatrix),wKe(e,s,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new Pw,this._controllers[e]=t),t}}function EKe(i,e,t){VZ.setFromMatrixPosition(e.matrixWorld),qZ.setFromMatrixPosition(t.matrixWorld);const n=VZ.distanceTo(qZ),r=e.projectionMatrix.elements,s=t.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],f=(s[8]+1)/s[0],h=o*u,p=o*f,m=n/(-u+f),g=m*-u;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(g),i.translateZ(m),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),r[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const b=o+m,T=a+m,C=h-g,R=p+(n-g),P=l*a/T*b,I=c*a/T*b;i.projectionMatrix.makePerspective(C,R,P,I,b,T),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function $Z(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function wKe(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=kx*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function MKe(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function CKe(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}this._currentDepthNear=null,this._currentDepthFar=null,e.backend.setXRTarget(null),e.setRenderTarget(this._currentRenderTarget),this._session=null,this._xrRenderTarget=null,this.isPresenting=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function RKe(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const r=i.removed[n],s=t.indexOf(r);s>=0&&(t[s]=null,e[s].disconnect(r))}for(let n=0;n<i.added.length;n++){const r=i.added[n];let s=t.indexOf(r);if(s===-1){for(let a=0;a<e.length;a++)if(a>=t.length){t.push(r),s=a;break}else if(t[a]===null){t[a]=r,s=a;break}if(s===-1)break}const o=e[s];o&&o.connect(r)}}function DKe(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,r=n.backend,s=this._glBaseLayer,o=this.getReferenceSpace(),a=e.getViewerPose(o);if(this._xrFrame=e,a!==null){const l=a.views;this._glBaseLayer!==null&&r.setXRTarget(s.framebuffer);let c=!1;l.length!==t.cameras.length&&(t.cameras.length=0,c=!0);for(let u=0;u<l.length;u++){const f=l[u];let h;if(this._useLayers===!0){const m=this._glBinding.getViewSubImage(this._glProjLayer,f);h=m.viewport,u===0&&r.setXRRenderTargetTextures(this._xrRenderTarget,m.colorTexture,this._glProjLayer.ignoreDepthValues?void 0:m.depthStencilTexture)}else h=s.getViewport(f);let p=this._cameras[u];p===void 0&&(p=new ls,p.layers.enable(u),p.viewport=new Ln,this._cameras[u]=p),p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.quaternion,p.scale),p.projectionMatrix.fromArray(f.projectionMatrix),p.projectionMatrixInverse.copy(p.projectionMatrix).invert(),p.viewport.set(h.x,h.y,h.width,h.height),u===0&&(t.matrix.copy(p.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),c===!0&&t.cameras.push(p)}n.setRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const c=this._controllerInputSources[l],u=this._controllers[l];c!==null&&u!==void 0&&u.update(c,e,o)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const jZ=new sb,y4=new at,GO=new Ln,zO=new ab,v4=new rn,yy=new Ln;class LKe{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:o=!1,antialias:a=!1,samples:l=0,getFallback:c=null,colorBufferType:u=Fa}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||a===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=kn,this.toneMapping=Sc,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.info=new bVe,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new Whe,this.lighting=new SKe,this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Ln(0,0,this._width,this._height),this._scissor=new Ln(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new lH(new va),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const f=this.alpha===!0?0:1;this._clearColor=new oH(0,0,0,f),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=u,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:c3},this.xr=new TKe(this),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(h,p,m)=>{await this.compileAsync(h,p);const g=this._renderLists.get(h,p),b=this._renderContexts.get(h,p,this._renderTarget),T=h.overrideMaterial||m.material,C=this._objects.get(m,T,h,p,g.lightsNode,b,b.clippingContext),{fragmentShader:R,vertexShader:P}=C.getNodeBuilderState();return{fragmentShader:R,vertexShader:P}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new vKe(this,n),this._animation=new hVe(this._nodes,this.info),this._attributes=new vVe(n),this._background=new PWe(this,this._nodes),this._geometries=new xVe(this._attributes,this.info),this._textures=new OVe(this,n,this.info),this._pipelines=new EVe(n,this._nodes),this._bindings=new wVe(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new mVe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new RVe(this.lighting),this._bundles=new bKe,this._renderContexts=new BVe,this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,o=this._currentRenderContext,a=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:jZ;n===null&&(n=e);const u=this._renderTarget,f=this._renderContexts.get(n,t,u),h=this._activeMipmapLevel,p=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,r.renderId++,r.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new x8),f.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,u);const m=this._renderLists.get(e,t);if(m.begin(),this._projectObject(e,t,0,m,f.clippingContext),n!==e&&n.traverseVisible(function(R){R.isLight&&R.layers.test(t.layers)&&m.pushLight(R)}),m.finish(),u!==null){this._textures.updateRenderTarget(u,h);const R=this._textures.get(u);f.textures=R.textures,f.depthTexture=R.depthTexture}else f.textures=null,f.depthTexture=null;this._background.update(c,m,f);const g=m.opaque,b=m.transparent,T=m.transparentDoublePass,C=m.lightsNode;this.opaque===!0&&g.length>0&&this._renderObjects(g,t,c,C),this.transparent===!0&&b.length>0&&this._renderTransparents(b,T,t,c,C),r.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=a,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:o}=e,a=this._currentRenderContext,l=this._bundles.get(r,s),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const u=r.version!==c.version,f=c.renderContexts.has(a)===!1||u;if(c.renderContexts.add(a),f){this.backend.beginBundle(a),(c.renderObjects===void 0||u)&&(c.renderObjects=[]),this._currentRenderBundle=l;const h=o.opaque;this.opaque===!0&&h.length>0&&this._renderObjects(h,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(a,l),c.version=r.version}else{const{renderObjects:h}=c;for(let p=0,m=h.length;p<m;p++){const g=h[p];this._nodes.needsRefresh(g)&&(this._nodes.updateBefore(g),this._nodes.updateForRender(g),this._bindings.updateForRender(g),this._nodes.updateAfter(g))}}this.backend.addBundle(a,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==Sc===!1&&t!==hu===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(y4),{depth:a,stencil:l}=this;let c=this._frameBufferTarget;return c===null&&(c=new Dd(s,o,{depthBuffer:a,stencilBuffer:l,type:this._colorBufferType,format:ho,colorSpace:hu,generateMipmaps:!1,minFilter:Ur,magFilter:Ur,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c),c.depthBuffer=a,c.stencilBuffer=l,c.setSize(s,o),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:jZ,u=this._renderTarget,f=this._activeCubeFace,h=this._activeMipmapLevel;let p;r!==null?(p=r,this.setRenderTarget(p)):p=u;const m=this._renderContexts.get(e,t,p);this._currentRenderContext=m,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const g=this.coordinateSystem,b=this.xr;if(t.coordinateSystem!==g&&b.isPresenting===!1&&(t.coordinateSystem=g,t.updateProjectionMatrix(),t.isArrayCamera))for(const ee of t.cameras)ee.coordinateSystem=g,ee.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),b.enabled===!0&&b.isPresenting===!0&&(b.cameraAutoUpdate===!0&&b.updateCamera(t),t=b.getCamera());let T=this._viewport,C=this._scissor,R=this._pixelRatio;p!==null&&(T=p.viewport,C=p.scissor,R=1),this.getDrawingBufferSize(y4),GO.set(0,0,y4.width,y4.height);const P=T.minDepth===void 0?0:T.minDepth,I=T.maxDepth===void 0?1:T.maxDepth;m.viewportValue.copy(T).multiplyScalar(R).floor(),m.viewportValue.width>>=h,m.viewportValue.height>>=h,m.viewportValue.minDepth=P,m.viewportValue.maxDepth=I,m.viewport=m.viewportValue.equals(GO)===!1,m.scissorValue.copy(C).multiplyScalar(R).floor(),m.scissor=this._scissorTest&&m.scissorValue.equals(GO)===!1,m.scissorValue.width>>=h,m.scissorValue.height>>=h,m.clippingContext||(m.clippingContext=new x8),m.clippingContext.updateGlobal(c,t),c.onBeforeRender(this,e,t,p),v4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),zO.setFromProjectionMatrix(v4,g);const F=this._renderLists.get(e,t);if(F.begin(),this._projectObject(e,t,0,F,m.clippingContext),F.finish(),this.sortObjects===!0&&F.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,h);const ee=this._textures.get(p);m.textures=ee.textures,m.depthTexture=ee.depthTexture,m.width=ee.width,m.height=ee.height,m.renderTarget=p,m.depth=p.depthBuffer,m.stencil=p.stencilBuffer}else m.textures=null,m.depthTexture=null,m.width=this.domElement.width,m.height=this.domElement.height,m.depth=this.depth,m.stencil=this.stencil;m.width>>=h,m.height>>=h,m.activeCubeFace=f,m.activeMipmapLevel=h,m.occlusionQueryCount=F.occlusionQueryCount,this._background.update(c,F,m),this.backend.beginRender(m);const{bundles:k,lightsNode:q,transparentDoublePass:H,transparent:O,opaque:$}=F;if(k.length>0&&this._renderBundles(k,c,q),this.opaque===!0&&$.length>0&&this._renderObjects($,t,c,q),this.transparent===!0&&O.length>0&&this._renderTransparents(O,H,t,c,q),this.backend.finishRender(m),s.renderId=o,this._currentRenderContext=a,this._currentRenderObjectFunction=l,r!==null){this.setRenderTarget(u,f,h);const ee=this._quad;this._nodes.hasOutputChange(p.texture)&&(ee.material.fragmentNode=this._nodes.getOutputNode(p.texture),ee.material.needsUpdate=!0),this._renderScene(ee,ee.camera,!1)}return c.onAfterRender(this,e,t,p),m}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,n=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,n,r),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null){this._textures.updateRenderTarget(r);const o=this._textures.get(r);s=this._renderContexts.getForClear(r),s.textures=o.textures,s.depthTexture=o.depthTexture,s.width=o.width,s.height=o.height,s.renderTarget=r,s.depth=r.depthBuffer,s.stencil=r.stencilBuffer}if(s.clearColorValue=this._clearColor,this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null){const o=this._quad;this._nodes.hasOutputChange(r.texture)&&(o.material.fragmentNode=this._nodes.getOutputNode(r.texture),o.material.needsUpdate=!0),this._renderScene(o,o.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?Sc:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?hu:this.outputColorSpace}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()}),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const t=this._nodes.nodeFrame,n=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const r=this.backend,s=this._pipelines,o=this._bindings,a=this._nodes,l=Array.isArray(e)?e:[e];if(l[0]===void 0||l[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");r.beginCompute(e);for(const c of l){if(s.has(c)===!1){const h=()=>{c.removeEventListener("dispose",h),s.delete(c),o.delete(c),a.delete(c)};c.addEventListener("dispose",h);const p=c.onInitFunction;p!==null&&p.call(c,{renderer:this})}a.updateForCompute(c),o.updateForCompute(c);const u=o.getForCompute(c),f=s.getForCompute(c,u);r.compute(e,c,u,f)}r.finishCompute(e),t.renderId=n}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=yy.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=yy.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=yy.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,r;n!==null?r=n.renderTarget:(r=this._renderTarget||this._getFrameBufferTarget(),r!==null&&(this._textures.updateRenderTarget(r),n=this._textures.get(r))),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s)}async readRenderTargetPixelsAsync(e,t,n,r,s,o=0,a=0){return this.backend.copyTextureToBuffer(e.textures[o],t,n,r,s,a)}_projectObject(e,t,n,r,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||zO.intersectsSprite(e)){this.sortObjects===!0&&yy.setFromMatrixPosition(e.matrixWorld).applyMatrix4(v4);const{geometry:l,material:c}=e;c.visible&&r.push(e,l,c,n,yy.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||zO.intersectsObject(e))){const{geometry:l,material:c}=e;if(this.sortObjects===!0&&(l.boundingSphere===null&&l.computeBoundingSphere(),yy.copy(l.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(v4)),Array.isArray(c)){const u=l.groups;for(let f=0,h=u.length;f<h;f++){const p=u[f],m=c[p.materialIndex];m&&m.visible&&r.push(e,l,m,n,yy.z,p,s)}}else c.visible&&r.push(e,l,c,n,yy.z,null,s)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=r;r=this._renderLists.get(e,t),r.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const a=e.children;for(let l=0,c=a.length;l<c;l++)this._projectObject(a[l],t,n,r,s)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderTransparents(e,t,n,r,s){if(t.length>0){for(const{material:o}of t)o.side=Bs;this._renderObjects(t,n,r,s,"backSide");for(const{material:o}of t)o.side=sh;this._renderObjects(e,n,r,s);for(const{material:o}of t)o.side=Do}else this._renderObjects(e,n,r,s)}_renderObjects(e,t,n,r,s=null){for(let o=0,a=e.length;o<a;o++){const{object:l,geometry:c,material:u,group:f,clippingContext:h}=e[o];this._currentRenderObjectFunction(l,n,t,c,u,f,r,h,s)}}renderObject(e,t,n,r,s,o,a,l=null,c=null){let u,f,h;if(e.onBeforeRender(this,t,n,r,s,o),t.overrideMaterial!==null){const p=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(u=p.positionNode,p.positionNode=s.positionNode),p.alphaTest=s.alphaTest,p.alphaMap=s.alphaMap,p.transparent=s.transparent||s.transmission>0,p.isShadowPassMaterial&&(p.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(h=p.depthNode,p.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(f=p.colorNode,p.colorNode=s.castShadowNode)),s=p}s.transparent===!0&&s.side===Do&&s.forceSinglePass===!1?(s.side=Bs,this._handleObjectFunction(e,s,t,n,a,o,l,"backSide"),s.side=sh,this._handleObjectFunction(e,s,t,n,a,o,l,c),s.side=Do):this._handleObjectFunction(e,s,t,n,a,o,l,c),u!==void 0&&(t.overrideMaterial.positionNode=u),h!==void 0&&(t.overrideMaterial.depthNode=h),f!==void 0&&(t.overrideMaterial.colorNode=f),e.onAfterRender(this,t,n,r,s,o)}_renderObjectDirect(e,t,n,r,s,o,a,l){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,a,l);c.drawRange=e.geometry.drawRange,c.group=o;const u=this._nodes.needsRefresh(c);u&&(this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c)),this._pipelines.updateForRender(c),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(c),c.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(c,this.info),u&&this._nodes.updateAfter(c)}_createObjectPipeline(e,t,n,r,s,o,a,l){const c=this._objects.get(e,t,n,r,s,this._currentRenderContext,a,l);c.drawRange=e.geometry.drawRange,c.group=o,this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class EH{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function PKe(i){return i+(Py-i%Py)%Py}class Khe extends EH{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return PKe(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class Yhe extends Khe{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let NKe=0;class Xhe extends Yhe{constructor(e,t){super("UniformBuffer_"+NKe++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class BKe extends Yhe{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,n=this.uniforms.length;t<n;t++){const r=this.uniforms[t],{boundary:s,itemSize:o}=r,a=e%Py,l=Py-a;a!==0&&l-s<0?e+=Py-a:a%s!==0&&(e+=a%s),r.offset=e/this.bytesPerElement,e+=o*this.bytesPerElement}return Math.ceil(e/Py)*Py}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s]!==r){const a=this._getBufferForType(o);a[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,a[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,a[s+2]=n[s+2]=r.z,a[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const o=this.buffer;o[s+0]=n[s+0]=r.r,o[s+1]=n[s+1]=r.g,o[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const o=this.buffer;o[s+0]=n[s+0]=r[0],o[s+1]=n[s+1]=r[1],o[s+2]=n[s+2]=r[2],o[s+4]=n[s+4]=r[3],o[s+5]=n[s+5]=r[4],o[s+6]=n[s+6]=r[5],o[s+8]=n[s+8]=r[6],o[s+9]=n[s+9]=r[7],o[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return OKe(n,r,s)===!1&&(this.buffer.set(r,s),IKe(n,r,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function IKe(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function OKe(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let FKe=0;class Qhe extends BKe{constructor(e,t){super(e),this.id=FKe++,this.groupNode=t,this.isNodeUniformsGroup=!0}}let UKe=0;class kKe extends EH{constructor(e,t){super(e),this.id=UKe++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class EN extends kKe{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Zhe extends EN{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledCubeTexture=!0}}class Jhe extends EN{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledTexture3D=!0}}const GKe={textureDimensions:"textureSize",equals:"equal"},zKe={low:"lowp",medium:"mediump",high:"highp"},WZ={swizzleAssign:!0,storageBuffer:!1},KZ=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class HKe extends qhe{constructor(e,t){super(e,t,new yKe),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]},this.useComparisonMethod=!0}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Yu}getMethod(e){return GKe[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let a=o?l1:eb;s===2?a=o?tb:Yy:s===3?a=o?Zee:ZS:s===4&&(a=o?nb:ho);const l={Float32Array:Ns,Uint8Array:Aa,Uint16Array:ud,Uint32Array:Gs,Int8Array:zy,Int16Array:Hy,Int32Array:Za,Uint8ClampedArray:Aa},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let u=Math.ceil(r/s/c);c*u*s<r&&u++;const f=c*u*s,h=new n.constructor(f);h.set(n,0),t.array=h;const p=new Rp(t.array,c,u,a,l[t.array.constructor.name]||Ns);p.needsUpdate=!0,p.isPBOTexture=!0;const m=new yA(p,null,null);m.setPrecision("high"),t.pboNode=m,t.pbo=m.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const u=this.renderer.backend.get(r);u.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label),o=this.getPropertyName(s);this.increaseUsage(n);const a=n.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const u=this.getVarFromNode(e);c=this.getPropertyName(u);const f=this.getDataFromNode(t);let h=f.propertySizeName;h===void 0&&(h=c+"Size",this.getVarFromNode(t,h,"uint"),this.addLineFlowCode(`${h} = uint( textureSize( ${o}, 0 ).x )`,e),f.propertySizeName=h);const{itemSize:p}=r,m="."+db.join("").slice(0,p),g=`ivec2(${a} % ${h}, ${a} / ${h})`,b=this.generateTextureLoad(null,o,g,null,"0");let T="vec4";r.pbo.type===Gs?T="uvec4":r.pbo.type===Za&&(T="ivec4"),this.addLineFlowCode(`${c} = ${T}(${b})${m}`,e),l.propertyName=c}return c}generateTextureLoad(e,t,n,r,s="0"){return r?`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${s} )`:`texelFetch( ${t}, ${n}, ${s} )`}generateTexture(e,t,n,r){return e.isDepthTexture?`texture( ${t}, ${n} ).x`:(r&&(n=`vec3( ${n}, ${r} )`),`texture( ${t}, ${n} )`)}generateTextureLevel(e,t,n,r){return`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r){return`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r){return`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name,r.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const o of t){let a=null,l=!1;if(o.type==="texture"){const u=o.node.value;let f="";u.isDataTexture===!0&&(u.type===Gs?f="u":u.type===Za&&(f="i")),u.compareFunction?a=`sampler2DShadow ${o.name};`:u.isDataArrayTexture===!0||u.isCompressedArrayTexture===!0?a=`${f}sampler2DArray ${o.name};`:a=`${f}sampler2D ${o.name};`}else if(o.type==="cubeTexture")a=`samplerCube ${o.name};`;else if(o.type==="texture3D")a=`sampler3D ${o.name};`;else if(o.type==="buffer"){const u=o.node,f=this.getType(u.bufferType),h=u.bufferCount,p=h>0?h:"";a=`${u.name} {
	${f} ${o.name}[${p}];
};
`}else a=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,l=!0;const c=o.node.precision;if(c!==null&&(a=zKe[c]+" "+a),l){a="	"+a;const u=o.groupNode.name;(r[u]||(r[u]=[])).push(a)}else a="uniform "+a,n.push(a)}let s="";for(const o in r){const a=r[o];s+=this._getGLSLUniformStruct(e+"_"+o,a.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==Za){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],r=[];for(const s of n)if(s.output)for(const o of s.members)r.push(`layout( location = ${o.index} ) out ${o.type} ${o.name};`);else{let o="struct "+s.name+` {
`;o+=this.getStructMembers(s),o+=`
};
`,t.push(o)}return r.length===0&&r.push("layout( location = 0 ) out vec4 fragColor;"),`
`+r.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=this.getType(r.type);if(r.needsInterpolation){const o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o} out ${s} ${r.name};
`}else t+=`${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=this.getType(r.type),o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${r.name};
`}}for(const r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=WZ[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const r=this.renderer.backend.extensions;r.has(n)&&(r.get(n),t=!0)}WZ[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);t+=`${r.varyingName} = ${s};
	`}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${KZ}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${KZ}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const a of r){const l=this.getFlowData(a),c=a.name;c&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${c}
	`),n+=`${l.code}
	`,a===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);let a=o.uniformGPU;if(a===void 0){const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,n);if(t==="texture")a=new EN(s.name,s.node,l),u.push(a);else if(t==="cubeTexture")a=new Zhe(s.name,s.node,l),u.push(a);else if(t==="texture3D")a=new Jhe(s.name,s.node,l),u.push(a);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const f=new Xhe(e,l);f.name=e.name,u.push(f),a=f}else{const f=this.uniformGroups[n]||(this.uniformGroups[n]={});let h=f[c];h===void 0&&(h=new Qhe(n+"_"+c,l),f[c]=h,u.push(h)),a=this.getNodeUniform(s,t),h.addUniform(a)}o.uniformGPU=a}return s}}let HO=null,W_=null;class ede{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null}}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){Sp("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){Sp(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return HO=HO||new at,this.renderer.getDrawingBufferSize(HO)}setScissorTest(){}getClearColor(){const e=this.renderer;return W_=W_||new oH,e.getClearColor(W_),W_.getRGB(W_,this.renderer.currentColorSpace),W_}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:Q7(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${a1} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let VKe=0;class qKe{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class $Ke{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,o=e.usage||r.STATIC_DRAW,a=e.isInterleavedBufferAttribute?e.data:e,l=n.get(a);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(r,t,s,o),l.bufferGPU=c,l.bufferType=t,l.version=a.version);let u;if(s instanceof Float32Array)u=r.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?u=r.HALF_FLOAT:u=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)u=r.SHORT;else if(s instanceof Uint32Array)u=r.UNSIGNED_INT;else if(s instanceof Int32Array)u=r.INT;else if(s instanceof Int8Array)u=r.BYTE;else if(s instanceof Uint8Array)u=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)u=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let f={bufferGPU:c,bufferType:t,type:u,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:u===r.INT||u===r.UNSIGNED_INT||e.gpuType===Za,id:VKe++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const h=this._createBuffer(r,t,s,o);f=new qKe(f,h)}n.set(e,f)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),a=o.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(a,o.bufferGPU),l.length===0)n.bufferSubData(a,0,r);else{for(let c=0,u=l.length;c<u;c++){const f=l[c];n.bufferSubData(a,f.start*r.BYTES_PER_ELEMENT,r,f.start,f.count)}s.clearUpdateRanges()}n.bindBuffer(a,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),o=e.array,a=o.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,a,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,a),await t.utils._clientWaitAsync();const c=new e.array.constructor(o.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,c),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let VO,iw;class jKe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;VO={[Ku]:e.FUNC_ADD,[V8]:e.FUNC_SUBTRACT,[q8]:e.FUNC_REVERSE_SUBTRACT},iw={[$8]:e.ZERO,[j8]:e.ONE,[W8]:e.SRC_COLOR,[V2]:e.SRC_ALPHA,[J8]:e.SRC_ALPHA_SATURATE,[Q8]:e.DST_COLOR,[Y8]:e.DST_ALPHA,[K8]:e.ONE_MINUS_SRC_COLOR,[q2]:e.ONE_MINUS_SRC_ALPHA,[Z8]:e.ONE_MINUS_DST_COLOR,[X8]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new Ln().fromArray(t),this.currentViewport=new Ln().fromArray(n),this._tempVec4=new Ln}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==B7?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===ND?t.cullFace(t.BACK):e===I7?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,o,a,l){const{gl:c}=this;if(e===uu){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==H8){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Ku||this.currentBlendEquationAlpha!==Ku)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Ku,this.currentBlendEquationAlpha=Ku),l)switch(e){case fu:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case xx:c.blendFunc(c.ONE,c.ONE);break;case bx:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case _x:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case fu:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case xx:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case bx:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case _x:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||n,a=a||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(VO[t],VO[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(iw[n],iw[r],iw[o],iw[a]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case $2:t.depthFunc(t.NEVER);break;case j2:t.depthFunc(t.ALWAYS);break;case W2:t.depthFunc(t.LESS);break;case Jm:t.depthFunc(t.LEQUAL);break;case K2:t.depthFunc(t.EQUAL);break;case Y2:t.depthFunc(t.GEQUAL);break;case X2:t.depthFunc(t.GREATER);break;case Q2:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentScissor.equals(s)===!1){const{gl:o}=this;o.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentViewport.equals(s)===!1){const{gl:o}=this;o.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:r}=this;e.side===Do?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let s=e.side===Bs;t&&(s=!s),this.setFlipSided(s),e.blending===fu&&e.transparent===!1?this.setBlending(uu):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const o=e.stencilWrite;if(this.setStencilTest(o),o&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let l=0;l<8;l++)l<n?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const o=e.textures;if(r.length!==o.length||r[0]!==n.COLOR_ATTACHMENT0){for(let a=0,l=o.length;a<l;a++)r[a]=n.COLOR_ATTACHMENT0+a;r.length=o.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:o,maxTextures:a}=this;n===void 0&&(s===null?n=r.TEXTURE0+a-1:n=s);let l=o[n];l===void 0&&(l={type:void 0,texture:void 0},o[n]=l),(l.type!==e||l.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class WKe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=Yu){const{gl:n,extensions:r}=this;let s;if(e===Aa)return n.UNSIGNED_BYTE;if(e===f3)return n.UNSIGNED_SHORT_4_4_4_4;if(e===h3)return n.UNSIGNED_SHORT_5_5_5_1;if(e===d3)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===zy)return n.BYTE;if(e===Hy)return n.SHORT;if(e===ud)return n.UNSIGNED_SHORT;if(e===Za)return n.INT;if(e===Gs)return n.UNSIGNED_INT;if(e===Ns)return n.FLOAT;if(e===Fa)return n.HALF_FLOAT;if(e===tP)return n.ALPHA;if(e===ZS)return n.RGB;if(e===ho)return n.RGBA;if(e===nP)return n.LUMINANCE;if(e===iP)return n.LUMINANCE_ALPHA;if(e===pd)return n.DEPTH_COMPONENT;if(e===vd)return n.DEPTH_STENCIL;if(e===eb)return n.RED;if(e===l1)return n.RED_INTEGER;if(e===Yy)return n.RG;if(e===tb)return n.RG_INTEGER;if(e===nb)return n.RGBA_INTEGER;if(e===Vy||e===km||e===Gm||e===zm)if(t===kn)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Vy)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===km)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Gm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===zm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Vy)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===km)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Gm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===zm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===Z2||e===J2||e===eS||e===tS)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===Z2)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===J2)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===eS)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===tS)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===nS||e===Sx||e===Tx)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===nS||e===Sx)return t===kn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===Tx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Ex||e===wx||e===Mx||e===Cx||e===Rx||e===Dx||e===Lx||e===Px||e===Nx||e===Bx||e===Ix||e===Ox||e===Fx||e===Ux)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Ex)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===wx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Mx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Cx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===Rx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===Dx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===Lx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Px)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Nx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Bx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Ix)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Ox)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Fx)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Ux)return t===kn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===qy)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===qy)return t===kn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===rP||e===iS||e===rS||e===sS)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===qy)return s.COMPRESSED_RED_RGTC1_EXT;if(e===iS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===rS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===sS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===yd?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),r();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let YZ=!1,x4,qO,XZ;class KKe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},YZ===!1&&(this._init(),YZ=!0)}_init(){const e=this.gl;x4={[ff]:e.REPEAT,[Sl]:e.CLAMP_TO_EDGE,[lA]:e.MIRRORED_REPEAT},qO={[Ps]:e.NEAREST,[QS]:e.NEAREST_MIPMAP_NEAREST,[cd]:e.NEAREST_MIPMAP_LINEAR,[Ur]:e.LINEAR,[Um]:e.LINEAR_MIPMAP_NEAREST,[Ja]:e.LINEAR_MIPMAP_LINEAR},XZ={[aP]:e.NEVER,[hP]:e.ALWAYS,[p3]:e.LESS,[A3]:e.LEQUAL,[lP]:e.EQUAL,[fP]:e.GEQUAL,[cP]:e.GREATER,[uP]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===o.RED&&(n===o.FLOAT&&(l=o.R32F),n===o.HALF_FLOAT&&(l=o.R16F),n===o.UNSIGNED_BYTE&&(l=o.R8),n===o.UNSIGNED_SHORT&&(l=o.R16),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RED_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.R8UI),n===o.UNSIGNED_SHORT&&(l=o.R16UI),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RG&&(n===o.FLOAT&&(l=o.RG32F),n===o.HALF_FLOAT&&(l=o.RG16F),n===o.UNSIGNED_BYTE&&(l=o.RG8),n===o.UNSIGNED_SHORT&&(l=o.RG16),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RG_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RG8UI),n===o.UNSIGNED_SHORT&&(l=o.RG16UI),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RGB&&(n===o.FLOAT&&(l=o.RGB32F),n===o.HALF_FLOAT&&(l=o.RGB16F),n===o.UNSIGNED_BYTE&&(l=o.RGB8),n===o.UNSIGNED_SHORT&&(l=o.RGB16),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I),n===o.UNSIGNED_BYTE&&(l=r===kn&&s===!1?o.SRGB8:o.RGB8),n===o.UNSIGNED_SHORT_5_6_5&&(l=o.RGB565),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGB4),n===o.UNSIGNED_INT_5_9_9_9_REV&&(l=o.RGB9_E5)),t===o.RGB_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGB8UI),n===o.UNSIGNED_SHORT&&(l=o.RGB16UI),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I)),t===o.RGBA&&(n===o.FLOAT&&(l=o.RGBA32F),n===o.HALF_FLOAT&&(l=o.RGBA16F),n===o.UNSIGNED_BYTE&&(l=o.RGBA8),n===o.UNSIGNED_SHORT&&(l=o.RGBA16),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I),n===o.UNSIGNED_BYTE&&(l=r===kn&&s===!1?o.SRGB8_ALPHA8:o.RGBA8),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)),t===o.RGBA_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGBA8UI),n===o.UNSIGNED_SHORT&&(l=o.RGBA16UI),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(n===o.UNSIGNED_SHORT&&(l=o.DEPTH_COMPONENT16),n===o.UNSIGNED_INT&&(l=o.DEPTH_COMPONENT24),n===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&n===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texParameteri(e,n.TEXTURE_WRAP_S,x4[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,x4[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&n.texParameteri(e,n.TEXTURE_WRAP_R,x4[t.wrapR]),n.texParameteri(e,n.TEXTURE_MAG_FILTER,qO[t.magFilter]);const o=t.mipmaps!==void 0&&t.mipmaps.length>0,a=t.minFilter===Ur&&o?Ja:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,qO[a]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,XZ[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Ps||t.minFilter!==cd&&t.minFilter!==Ja||t.type===Ns&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const l=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let o=r[s];o===void 0&&(o=t.createTexture(),n.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=o),n.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:o,height:a,depth:l}=t,c=r.utils.convert(e.format,e.colorSpace),u=r.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),h=n.createTexture(),p=this.getGLTextureType(e);r.state.bindTexture(p,h),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,f,o,a,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,f,o,a,l):e.isVideoTexture||n.texStorage2D(p,s,f,o,a),r.set(e,{textureGPU:h,glTextureType:p,glFormat:c,glType:u,glInternalFormat:f})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:o,glFormat:a,glType:l}=r.get(t),{width:c,height:u}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(o,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(o,0,0,0,c,u,a,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:c,glInternalFormat:u}=this.backend.get(e);if(e.isRenderTargetTexture||o===void 0)return;const f=h=>h.isDataTexture?h.image.data:typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(this.backend.state.bindTexture(a,o),this.setTextureParameters(a,e),e.isCompressedTexture){const h=e.mipmaps,p=t.image;for(let m=0;m<h.length;m++){const g=h[m];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,m,0,0,0,g.width,g.height,p.depth,l,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,m,0,0,0,g.width,g.height,p.depth,l,c,g.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,m,0,0,g.width,g.height,l,g.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=t.images;for(let p=0;p<6;p++){const m=f(h[p]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,r,s,l,c,m)}}else if(e.isDataArrayTexture){const h=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isData3DTexture){const h=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,l,c,h.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(a,0,u,l,c,t.image);else{const h=f(t.image);n.texSubImage2D(a,0,0,0,r,s,l,c,h)}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0){const{gl:o,backend:a}=this,{state:l}=this.backend,{textureGPU:c,glTextureType:u,glType:f,glFormat:h}=a.get(t);let p,m,g,b,T,C;n!==null?(p=n.max.x-n.min.x,m=n.max.y-n.min.y,g=n.min.x,b=n.min.y):(p=e.image.width,m=e.image.height,g=0,b=0),r!==null?(T=r.x,C=r.y):(T=0,C=0),l.bindTexture(u,c),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const R=o.getParameter(o.UNPACK_ROW_LENGTH),P=o.getParameter(o.UNPACK_IMAGE_HEIGHT),I=o.getParameter(o.UNPACK_SKIP_PIXELS),F=o.getParameter(o.UNPACK_SKIP_ROWS),k=o.getParameter(o.UNPACK_SKIP_IMAGES),q=e.isCompressedTexture?e.mipmaps[s]:e.image;if(o.pixelStorei(o.UNPACK_ROW_LENGTH,q.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,q.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,g),o.pixelStorei(o.UNPACK_SKIP_ROWS,b),e.isRenderTargetTexture||e.isDepthTexture){const H=a.get(e),O=a.get(t),$=a.get(H.renderTarget),ee=a.get(O.renderTarget),Y=$.framebuffers[H.cacheKey],oe=ee.framebuffers[O.cacheKey];l.bindFramebuffer(o.READ_FRAMEBUFFER,Y),l.bindFramebuffer(o.DRAW_FRAMEBUFFER,oe);let re=o.COLOR_BUFFER_BIT;e.isDepthTexture&&(re=o.DEPTH_BUFFER_BIT),o.blitFramebuffer(g,b,p,m,T,C,p,m,re,o.NEAREST),l.bindFramebuffer(o.READ_FRAMEBUFFER,null),l.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,s,T,C,p,m,h,f,q.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,s,T,C,q.width,q.height,h,q.data):o.texSubImage2D(o.TEXTURE_2D,s,T,C,p,m,h,f,q);o.pixelStorei(o.UNPACK_ROW_LENGTH,R),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,P),o.pixelStorei(o.UNPACK_SKIP_PIXELS,I),o.pixelStorei(o.UNPACK_SKIP_ROWS,F),o.pixelStorei(o.UNPACK_SKIP_IMAGES,k),s===0&&t.generateMipmaps&&o.generateMipmap(o.TEXTURE_2D),l.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:a,y:l,z:c,w:u}=n,f=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,h=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(f){const p=a!==0||l!==0;let m,g;if(e.isDepthTexture===!0?(m=r.DEPTH_BUFFER_BIT,g=r.DEPTH_ATTACHMENT,t.stencil&&(m|=r.STENCIL_BUFFER_BIT)):(m=r.COLOR_BUFFER_BIT,g=r.COLOR_ATTACHMENT0),p){const b=this.backend.get(t.renderTarget),T=b.framebuffers[t.getCacheKey()],C=b.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,T),s.bindFramebuffer(r.READ_FRAMEBUFFER,C);const R=h-l-u;r.blitFramebuffer(a,R,a+c,R+u,a,R,a+c,R+u,m,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,T),s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,R,c,u),s.unbindTexture()}else{const b=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,b),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,g,r.TEXTURE_2D,o,0),r.blitFramebuffer(0,0,c,u,0,0,c,u,m,r.NEAREST),r.deleteFramebuffer(b)}}else s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,h-u-l,c,u),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,r=!1){const{gl:s}=this,o=t.renderTarget,{depthTexture:a,depthBuffer:l,stencilBuffer:c,width:u,height:f}=o;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!c){let h=s.DEPTH_COMPONENT24;r===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,o.samples,h,u,f):n>0?(a&&a.isDepthTexture&&a.type===s.FLOAT&&(h=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,h,u,f)):s.renderbufferStorage(s.RENDERBUFFER,h,u,f),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&c&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,u,f):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,u,f),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,n,r,s,o){const{backend:a,gl:l}=this,{textureGPU:c,glFormat:u,glType:f}=this.backend.get(e),h=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,h);const p=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+o:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,p,c,0);const m=this._getTypedArrayType(f),g=this._getBytesPerTexel(f,u),T=r*s*g,C=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,C),l.bufferData(l.PIXEL_PACK_BUFFER,T,l.STREAM_READ),l.readPixels(t,n,r,s,u,f,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await a.utils._clientWaitAsync();const R=new m(T/m.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,C),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,R),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(h),R}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}class YKe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class XKe{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const QZ={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class QKe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:o,info:a,index:l}=this;l!==0?n.drawElements(r,t,o,e):n.drawArrays(r,e,t),a.update(s,t,r,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:o,index:a,object:l,info:c}=this;n!==0&&(a!==0?r.drawElementsInstanced(s,t,o,e,n):r.drawArraysInstanced(s,e,t,n),c.update(l,t,s,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:o,info:a}=this;if(n===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<n;c++)this.render(e[c],t[c]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(s,e,0,t,0,n);let c=0;for(let u=0;u<n;u++)c+=t[u];a.update(o,c,s,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:o,object:a,info:l}=this;if(n===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<n;u++)this.renderInstances(e[u],t[u],r[u]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,r,0,n):c.multiDrawArraysInstancedWEBGL(o,e,0,t,0,r,0,n);let u=0;for(let f=0;f<n;f++)u+=t[f]*r[f];l.update(a,u,o,1)}}}class tde{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class ZKe extends tde{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let r=0;r<this.maxQueries;r++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return Sp(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e.id,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(r){console.error("Error in beginQuery:",r),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[r,s]of this.queryStates)if(s==="ended"){const o=this.queries[r];e.push(this.resolveQuery(o))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((r,s)=>r+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,r=!1;const s=()=>{n&&(clearTimeout(n),n=null)},o=l=>{r||(r=!0,s(),t(l))},a=()=>{if(this.isDisposed){o(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){o(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(a,1);return}const u=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(u)/1e6)}catch(l){console.error("Error checking query:",l),t(this.lastValue)}};a()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class ZZ extends ede{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this.trackTimestamp=e.trackTimestamp===!0,this._currentContext=null,this._knownBindings=new WeakSet,this._xrFamebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:!1,alpha:!0,depth:!1,stencil:!1},r=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(o){o.preventDefault();const a={api:"WebGL",message:o.statusMessage||"Unknown reason",reason:null,originalEvent:o};e.onDeviceLost(a)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=r,this.extensions=new YKe(this),this.capabilities=new XKe(this),this.attributeUtils=new $Ke(this),this.textureUtils=new KKe(this),this.bufferRenderer=new QKe(this),this.state=new jKe(this),this.utils=new WKe(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return yc}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFamebuffer=e}setXRRenderTargetTextures(e,t,n=null){const r=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:r.RGBA8}),n!==null){const s=e.stencilBuffer?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),e.autoAllocateDepthBuffer=!1,this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided")}}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t]||(this.timestampQueryPool[t]=new ZKe(this.gl,t,2048));const n=this.timestampQueryPool[t];n.allocateQueriesForContext(e)!==null&&n.beginQuery(e)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t].endQuery(e)}getContext(){return this.gl}beginRender(e){const{state:t,gl:n}=this,r=this.get(e);if(this.initTimestampQuery(e),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):t.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),e.scissor){const{x:o,y:a,width:l,height:c}=e.scissorValue;t.scissor(o,e.height-c-a,l,c)}const s=e.occlusionQueryCount;s>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(s),r.occlusionQueryObjects=new Array(s),r.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext,o=e.occlusionQueryCount;o>0&&(o>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const a=e.textures;if(a!==null)for(let l=0;l<a.length;l++){const c=a[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const l=this.get(e.renderTarget),{samples:c}=e.renderTarget;if(c>0&&this._useMultisampledRTT(e.renderTarget)===!1){const u=l.framebuffers[e.getCacheKey()],f=t.COLOR_BUFFER_BIT,h=l.msaaFrameBuffer,p=e.textures;n.bindFramebuffer(t.READ_FRAMEBUFFER,h),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u);for(let m=0;m<p.length;m++)if(e.scissor){const{x:g,y:b,width:T,height:C}=e.scissorValue,R=e.height-C-b;t.blitFramebuffer(g,R,g+T,R+C,g,R,g+T,R+C,f,t.NEAREST),t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,g,R,T,C)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,f,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):n.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const a=()=>{let l=0;for(let c=0;c<n.length;c++){const u=n[c];u!==null&&o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(u,o.QUERY_RESULT)===0&&s.add(r[c]),n[c]=null,o.deleteQuery(u),l++)}l<n.length?requestAnimationFrame(a):t.occluded=s};a()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:r,width:s,height:o}=e.viewportValue;t.viewport(n,e.height-o-r,s,o)}setScissorTest(e){this.state.setScissorTest(e)}clear(e,t,n,r=null,s=!0){const{gl:o}=this;if(r===null){const l=this.getClearColor();l.r*=l.a,l.g*=l.a,l.b*=l.a,r={textures:null,clearColorValue:l}}let a=0;if(e&&(a|=o.COLOR_BUFFER_BIT),t&&(a|=o.DEPTH_BUFFER_BIT),n&&(a|=o.STENCIL_BUFFER_BIT),a!==0){let l;if(r.clearColorValue?l=r.clearColorValue:(l=this.getClearColor(),l.r*=l.a,l.g*=l.a,l.b*=l.a),t&&this.state.setDepthMask(!0),r.textures===null)o.clearColor(l.r,l.g,l.b,l.a),o.clear(a);else{if(s&&this._setFramebuffer(r),e)for(let c=0;c<r.textures.length;c++)o.clearBufferfv(o.COLOR,c,[l.r,l.g,l.b,l.a]);t&&n?o.clearBufferfi(o.DEPTH_STENCIL,0,1,0):t?o.clearBufferfv(o.DEPTH,0,[1]):n&&o.clearBufferiv(o.STENCIL,0,[0])}}}beginCompute(e){const{state:t,gl:n}=this;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,n,r){const{state:s,gl:o}=this;this.discard===!1&&(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:a,transformBuffers:l,attributes:c}=this.get(r),u=this._getVaoKey(null,c),f=this.vaoCache[u];f===void 0?this._createVao(null,c):o.bindVertexArray(f),s.useProgram(a),this._bindUniforms(n);const h=this._getTransformFeedback(l);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,h),o.beginTransformFeedback(o.POINTS),c[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,t.count):o.drawArrays(o.POINTS,0,t.count),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let p=0;p<l.length;p++){const m=l[p];m.pbo&&this.textureUtils.copyBufferToTexture(m.transformBuffer,m.pbo),m.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:t,pipeline:n,material:r,context:s,hardwareClippingPlanes:o}=e,{programGPU:a}=this.get(n),{gl:l,state:c}=this,u=this.get(s),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const h=t.isMesh&&t.matrixWorld.determinant()<0;c.setMaterial(r,h,o),c.useProgram(a);const p=this.get(e);let m=p.staticVao;if(m===void 0||p.geometryId!==e.geometry.id){const F=this._getVaoKey(e.getIndex(),e.getAttributes());if(m=this.vaoCache[F],m===void 0){let k;({vaoGPU:m,staticVao:k}=this._createVao(e.getIndex(),e.getAttributes())),k&&(p.staticVao=m,p.geometryId=e.geometry.id)}}l.bindVertexArray(m);const g=e.getIndex(),b=u.lastOcclusionObject;if(b!==t&&b!==void 0){if(b!==null&&b.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),t.occlusionTest===!0){const F=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,F),u.occlusionQueries[u.occlusionQueryIndex]=F,u.occlusionQueryObjects[u.occlusionQueryIndex]=t}u.lastOcclusionObject=t}const T=this.bufferRenderer;t.isPoints?T.mode=l.POINTS:t.isLineSegments?T.mode=l.LINES:t.isLine?T.mode=l.LINE_STRIP:t.isLineLoop?T.mode=l.LINE_LOOP:r.wireframe===!0?(c.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),T.mode=l.LINES):T.mode=l.TRIANGLES;const{vertexCount:C,instanceCount:R}=f;let{firstVertex:P}=f;if(T.object=t,g!==null){P*=g.array.BYTES_PER_ELEMENT;const F=this.get(g);T.index=g.count,T.type=F.type}else T.index=0;const I=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?T.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?T.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):Sp("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):R>1?T.renderInstances(P,C,R):T.render(P,C)};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const F=this.get(e.camera),k=e.camera.cameras,q=e.getBindingGroup("cameraIndex").bindings[0];if(F.indexesGPU===void 0||F.indexesGPU.length!==k.length){const $=new Uint32Array([0,0,0,0]),ee=[];for(let Y=0,oe=k.length;Y<oe;Y++){const re=l.createBuffer();$[0]=Y,l.bindBuffer(l.UNIFORM_BUFFER,re),l.bufferData(l.UNIFORM_BUFFER,$,l.STATIC_DRAW),ee.push(re)}F.indexesGPU=ee}const H=this.get(q),O=this.renderer.getPixelRatio();for(let $=0,ee=k.length;$<ee;$++){const Y=k[$];if(t.layers.test(Y.layers)){const oe=Y.viewport,re=oe.x*O,Q=oe.y*O,se=oe.width*O,le=oe.height*O;c.viewport(Math.floor(re),Math.floor(e.context.height-le-Q),Math.floor(se),Math.floor(le)),c.bindBufferBase(l.UNIFORM_BUFFER,H.index,F.indexesGPU[$]),I()}}}else I();l.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new HKe(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:o}=r,a=n.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU;if(n.attachShader(a,l),n.attachShader(a,c),n.linkProgram(a),this.set(r,{programGPU:a,fragmentShader:l,vertexShader:c}),t!==null&&this.parallel){const u=new Promise(f=>{const h=this.parallel,p=()=>{n.getProgramParameter(a,h.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),f()):requestAnimationFrame(p)};p()});t.push(u);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const l=a+1;r.push(`${l===t?">":" "} ${l}: ${n[a]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),a)}else return s}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,s=r.getProgramInfoLog(e).trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const o=this._getShaderErrors(r,n,"vertex"),a=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+o+`
`+a)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:o,fragmentShader:a,vertexShader:l}=s;r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,a,l),n.useProgram(o);const c=e.getBindings();this._setupBindings(c,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,a=r.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU,u=o.transforms,f=[],h=[];for(let b=0;b<u.length;b++){const T=u[b];f.push(T.varyingName),h.push(T.attributeNode)}r.attachShader(a,l),r.attachShader(a,c),r.transformFeedbackVaryings(a,f,r.SEPARATE_ATTRIBS),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,l,c),n.useProgram(a),this._setupBindings(t,a);const p=o.attributes,m=[],g=[];for(let b=0;b<p.length;b++){const T=p[b].node.attribute;m.push(T),this.has(T)||this.attributeUtils.createAttribute(T,r.ARRAY_BUFFER)}for(let b=0;b<h.length;b++){const T=h[b].attribute;this.has(T)||this.attributeUtils.createAttribute(T,r.ARRAY_BUFFER);const C=this.get(T);g.push(C)}this.set(e,{programGPU:a,transformBuffers:g,attributes:m})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,r=0;for(const s of t){this.set(s,{textures:r,uniformBuffers:n});for(const o of s.bindings)o.isUniformBuffer&&n++,o.isSampledTexture&&r++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let r=n.uniformBuffers,s=n.textures;for(const o of e.bindings)if(o.isUniformsGroup||o.isUniformBuffer){const a=o.buffer,l=t.createBuffer();t.bindBuffer(t.UNIFORM_BUFFER,l),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW),this.set(o,{index:r++,bufferGPU:l})}else if(o.isSampledTexture){const{textureGPU:a,glTextureType:l}=this.get(o.texture);this.set(o,{index:s++,textureGPU:a,glTextureType:l})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(QZ).filter(r=>QZ[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,r=null,s=0){this.textureUtils.copyTextureToTexture(e,t,n,r,s)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:a,depthBuffer:l,stencilBuffer:c}=s,u=s.isWebGLCubeRenderTarget===!0,f=s.isRenderTarget3D===!0,h=s.isRenderTargetArray===!0,p=s.isXRRenderTarget===!0,m=p===!0&&s.hasExternalTextures===!0;let g=o.msaaFrameBuffer,b=o.depthRenderbuffer;const T=this.extensions.get("WEBGL_multisampled_render_to_texture"),C=this._useMultisampledRTT(s),R=Yfe(e);let P;if(u?(o.cubeFramebuffers||(o.cubeFramebuffers={}),P=o.cubeFramebuffers[R]):p&&m===!1?P=this._xrFamebuffer:(o.framebuffers||(o.framebuffers={}),P=o.framebuffers[R]),P===void 0){P=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,P);const I=e.textures;if(u){o.cubeFramebuffers[R]=P;const{textureGPU:F}=this.get(I[0]),k=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+k,F,0)}else{o.framebuffers[R]=P;for(let F=0;F<I.length;F++){const k=I[F],q=this.get(k);q.renderTarget=e.renderTarget,q.cacheKey=R;const H=t.COLOR_ATTACHMENT0+F;if(f||h){const O=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,H,q.textureGPU,0,O)}else C?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,H,t.TEXTURE_2D,q.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,H,t.TEXTURE_2D,q.textureGPU,0)}n.drawBuffers(e,P)}if(s.isXRRenderTarget&&s.autoAllocateDepthBuffer===!0){const F=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(F,e,0,C),o.xrDepthRenderbuffer=F}else if(e.depthTexture!==null){const F=this.get(e.depthTexture),k=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;F.renderTarget=e.renderTarget,F.cacheKey=R,C?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,k,t.TEXTURE_2D,F.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,k,t.TEXTURE_2D,F.textureGPU,0)}}else if(p&&m){n.bindFramebuffer(t.FRAMEBUFFER,P);const I=this.get(e.textures[0]);C?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,I.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,I.textureGPU,0);const F=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s.autoAllocateDepthBuffer===!0){const k=o.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,k),t.framebufferRenderbuffer(t.FRAMEBUFFER,F,t.RENDERBUFFER,k)}else{const k=this.get(e.depthTexture);C?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,F,t.TEXTURE_2D,k.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,F,t.TEXTURE_2D,k.textureGPU,0)}}if(a>0&&C===!1){if(g===void 0){const I=[];g=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,g);const F=[],k=e.textures;for(let q=0;q<k.length;q++){if(F[q]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,F[q]),I.push(t.COLOR_ATTACHMENT0+q),l){const $=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;I.push($)}const H=e.textures[q],O=this.get(H);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,O.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+q,t.RENDERBUFFER,F[q])}if(o.msaaFrameBuffer=g,o.msaaRenderbuffers=F,b===void 0){b=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(b,e,a),o.depthRenderbuffer=b;const q=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;I.push(q)}o.invalidationArray=I}r=o.msaaFrameBuffer}else r=P}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e,t){let n="";if(e!==null){const r=this.get(e);n+=":"+r.id}for(let r=0;r<t.length;r++){const s=this.get(t[r]);n+=":"+s.id}return n}_createVao(e,t){const{gl:n}=this,r=n.createVertexArray();let s="",o=!0;if(n.bindVertexArray(r),e!==null){const a=this.get(e);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,a.bufferGPU),s+=":"+a.id}for(let a=0;a<t.length;a++){const l=t[a],c=this.get(l);s+=":"+c.id,n.bindBuffer(n.ARRAY_BUFFER,c.bufferGPU),n.enableVertexAttribArray(a),(l.isStorageBufferAttribute||l.isStorageInstancedBufferAttribute)&&(o=!1);let u,f;l.isInterleavedBufferAttribute===!0?(u=l.data.stride*c.bytesPerElement,f=l.offset*c.bytesPerElement):(u=0,f=0),c.isInteger?n.vertexAttribIPointer(a,l.itemSize,c.type,u,f):n.vertexAttribPointer(a,l.itemSize,c.type,l.normalized,u,f),l.isInstancedBufferAttribute&&!l.isInterleavedBufferAttribute?n.vertexAttribDivisor(a,l.meshPerAttribute):l.isInterleavedBufferAttribute&&l.data.isInstancedInterleavedBuffer&&n.vertexAttribDivisor(a,l.data.meshPerAttribute)}return n.bindBuffer(n.ARRAY_BUFFER,null),this.vaoCache[s]=r,{vaoGPU:r,staticVao:o}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const o=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const a=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,l,a)}else if(s.isSampledTexture){const l=n.getUniformLocation(t,s.name);n.uniform1i(l,a)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const o=this.get(s),a=o.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,a,o.bufferGPU):s.isSampledTexture&&n.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+a)}}_useMultisampledRTT(e){return e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e.autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const E2={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Ul={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},pc={Store:"store"},ca={Load:"load",Clear:"clear"},$O={CCW:"ccw"},jO={None:"none",Front:"front",Back:"back"},US={Uint16:"uint16",Uint32:"uint32"},ze={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},WO={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Ov={Linear:"linear",Nearest:"nearest"},Ii={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},xv={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},JZ={None:0,All:15},vy={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},KO={Storage:"storage",ReadOnlyStorage:"read-only-storage"},YO={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},K_={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},eJ={TwoD:"2d",ThreeD:"3d"},ju={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},JKe={All:"all"},b4={Vertex:"vertex",Instance:"instance"},Zk={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class eYe extends EH{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class tYe extends eYe{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class nYe extends Khe{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let iYe=0;class rYe extends nYe{constructor(e,t){super("StorageBuffer_"+iYe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:_c.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class sYe extends p1{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Ov.Linear}),this.flipYSampler=e.createSampler({minFilter:Ov.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:E2.TriangleStrip,stripIndexFormat:US.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:E2.TriangleStrip,stripIndexFormat:US.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(r),l=this.getFlipYPipeline(r),c=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ju.TwoD,baseArrayLayer:n}),f=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:ju.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(m,g,b)=>{const T=m.getBindGroupLayout(0),C=this.device.createBindGroup({layout:T,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:g}]}),R=h.beginRenderPass({colorAttachments:[{view:b,loadOp:ca.Clear,storeOp:pc.Store,clearValue:[0,0,0,0]}]});R.setPipeline(m),R.setBindGroup(0,C),R.draw(4,1,0,0),R.end()};p(a,u,f),p(l,f,u),this.device.queue.submit([h.finish()]),c.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ju.TwoD,baseArrayLayer:n});const a=[];for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:ju.TwoD,baseArrayLayer:n}),f={colorAttachments:[{view:u,loadOp:ca.Clear,storeOp:pc.Store,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[t.format]});h.setPipeline(r),h.setBindGroup(0,c),h.draw(4,1,0,0),a.push({renderBundles:[h.finish()],passDescriptor:f}),o=u}return a}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const oYe={[aP]:"never",[p3]:"less",[lP]:"equal",[A3]:"less-equal",[cP]:"greater",[fP]:"greater-equal",[hP]:"always",[uP]:"not-equal"},aYe=[0,1,3,2,4,5];class lYe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Ld,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===Ov.Linear&&s.minFilter===Ov.Linear&&s.mipmapFilter===Ov.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=oYe[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=Jk(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const c=this._getDimension(e),u=e.internalFormat||t.format||Jk(e,n.device);r.format=u;const{samples:f,primarySamples:h,isMSAA:p}=n.utils.getTextureSampleData(e);let m=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(m|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(m|=GPUTextureUsage.RENDER_ATTACHMENT);const g={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:h,dimension:c,format:u,usage:m};if(e.isVideoTexture){const b=e.source.data,T=new VideoFrame(b);g.size.width=T.displayWidth,g.size.height=T.displayHeight,T.close(),r.externalTexture=b}else{if(u===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);r.texture=n.device.createTexture(g)}if(p){const b=Object.assign({},g);b.label=b.label+"-msaa",b.sampleCount=f,r.msaaTexture=n.device.createTexture(b)}r.initialized=!0,r.textureDescriptorGPU=g}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),o=this.depthTexture,a=n.get(o).texture;let l,c;if(t?(l=vd,c=yd):e&&(l=pd,c=Gs),a!==void 0){if(o.image.width===r&&o.image.height===s&&o.format===l&&o.type===c)return a;this.destroyTexture(o)}return o.name="depthBuffer",o.format=l,o.type=c,o.image.width=r,o.image.height=s,this.createTexture(o,{width:r,height:s}),n.get(o).texture}updateTexture(e,t){const n=this.backend.get(e),{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,n.texture,r,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY);else if(e.isVideoTexture){const s=e.source.data;n.externalTexture=s}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,n,r,s,o){const a=this.backend.device,l=this.backend.get(e),c=l.texture,u=l.textureDescriptorGPU.format,f=this._getBytesPerTexel(u);let h=r*f;h=Math.ceil(h/256)*256;const p=a.createBuffer({size:r*s*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),m=a.createCommandEncoder();m.copyTextureToBuffer({texture:c,origin:{x:t,y:n,z:o}},{buffer:p,bytesPerRow:h},{width:r,height:s});const g=this._getTypedArrayType(u);a.queue.submit([m.finish()]),await p.mapAsync(GPUMapMode.READ);const b=p.getMappedRange();return new g(b)}_isEnvironmentTexture(e){const t=e.mapping;return t===Lp||t===aA||t===pu||t===uf}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new cs;n.minFilter=Ps,n.magFilter=Ps,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new rb;n.minFilter=Ps,n.magFilter=Ps,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,n,r){for(let s=0;s<6;s++){const o=e[s],a=r===!0?aYe[s]:s;o.isDataTexture?this._copyBufferToTexture(o.image,t,n,a,r):this._copyImageToTexture(o,t,n,a,r)}}_copyImageToTexture(e,t,n,r,s){this.backend.device.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},{width:e.width,height:e.height,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new sYe(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,o=0){const a=this.backend.device,l=e.data,c=this._getBytesPerTexel(n.format),u=e.width*c;a.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},l,{offset:e.width*e.height*c*o,bytesPerRow:u},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),o=n.size.depthOrArrayLayers>1;for(let a=0;a<e.length;a++){const l=e[a],c=l.width,u=l.height,f=o?n.size.depthOrArrayLayers:1,h=Math.ceil(c/s.width)*s.byteLength,p=h*Math.ceil(u/s.height);for(let m=0;m<f;m++)r.queue.writeTexture({texture:t,mipLevel:a,origin:{x:0,y:0,z:m}},l.data,{offset:m*p,bytesPerRow:h,rowsPerImage:Math.ceil(u/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(u/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ze.BC1RGBAUnorm||e===ze.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ze.BC2RGBAUnorm||e===ze.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ze.BC3RGBAUnorm||e===ze.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ze.BC4RUnorm||e===ze.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===ze.BC5RGUnorm||e===ze.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ze.BC6HRGBUFloat||e===ze.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ze.BC7RGBAUnorm||e===ze.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ze.ETC2RGB8Unorm||e===ze.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ze.ETC2RGB8A1Unorm||e===ze.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ze.ETC2RGBA8Unorm||e===ze.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ze.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ze.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ze.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ze.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ze.ASTC4x4Unorm||e===ze.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ze.ASTC5x4Unorm||e===ze.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ze.ASTC5x5Unorm||e===ze.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ze.ASTC6x5Unorm||e===ze.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ze.ASTC6x6Unorm||e===ze.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ze.ASTC8x5Unorm||e===ze.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ze.ASTC8x6Unorm||e===ze.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ze.ASTC8x8Unorm||e===ze.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ze.ASTC10x5Unorm||e===ze.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ze.ASTC10x6Unorm||e===ze.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ze.ASTC10x8Unorm||e===ze.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ze.ASTC10x10Unorm||e===ze.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ze.ASTC12x10Unorm||e===ze.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ze.ASTC12x12Unorm||e===ze.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=WO.ClampToEdge;return e===ff?t=WO.Repeat:e===lA&&(t=WO.MirrorRepeat),t}_convertFilterMode(e){let t=Ov.Linear;return(e===Ps||e===QS||e===cd)&&(t=Ov.Nearest),t}_getBytesPerTexel(e){if(e===ze.R8Unorm||e===ze.R8Snorm||e===ze.R8Uint||e===ze.R8Sint)return 1;if(e===ze.R16Uint||e===ze.R16Sint||e===ze.R16Float||e===ze.RG8Unorm||e===ze.RG8Snorm||e===ze.RG8Uint||e===ze.RG8Sint)return 2;if(e===ze.R32Uint||e===ze.R32Sint||e===ze.R32Float||e===ze.RG16Uint||e===ze.RG16Sint||e===ze.RG16Float||e===ze.RGBA8Unorm||e===ze.RGBA8UnormSRGB||e===ze.RGBA8Snorm||e===ze.RGBA8Uint||e===ze.RGBA8Sint||e===ze.BGRA8Unorm||e===ze.BGRA8UnormSRGB||e===ze.RGB9E5UFloat||e===ze.RGB10A2Unorm||e===ze.RG11B10UFloat||e===ze.Depth32Float||e===ze.Depth24Plus||e===ze.Depth24PlusStencil8||e===ze.Depth32FloatStencil8)return 4;if(e===ze.RG32Uint||e===ze.RG32Sint||e===ze.RG32Float||e===ze.RGBA16Uint||e===ze.RGBA16Sint||e===ze.RGBA16Float)return 8;if(e===ze.RGBA32Uint||e===ze.RGBA32Sint||e===ze.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ze.R8Uint)return Uint8Array;if(e===ze.R8Sint)return Int8Array;if(e===ze.R8Unorm)return Uint8Array;if(e===ze.R8Snorm)return Int8Array;if(e===ze.RG8Uint)return Uint8Array;if(e===ze.RG8Sint)return Int8Array;if(e===ze.RG8Unorm)return Uint8Array;if(e===ze.RG8Snorm)return Int8Array;if(e===ze.RGBA8Uint)return Uint8Array;if(e===ze.RGBA8Sint)return Int8Array;if(e===ze.RGBA8Unorm)return Uint8Array;if(e===ze.RGBA8Snorm)return Int8Array;if(e===ze.R16Uint)return Uint16Array;if(e===ze.R16Sint)return Int16Array;if(e===ze.RG16Uint)return Uint16Array;if(e===ze.RG16Sint)return Int16Array;if(e===ze.RGBA16Uint)return Uint16Array;if(e===ze.RGBA16Sint)return Int16Array;if(e===ze.R16Float||e===ze.RG16Float||e===ze.RGBA16Float)return Uint16Array;if(e===ze.R32Uint)return Uint32Array;if(e===ze.R32Sint)return Int32Array;if(e===ze.R32Float)return Float32Array;if(e===ze.RG32Uint)return Uint32Array;if(e===ze.RG32Sint)return Int32Array;if(e===ze.RG32Float)return Float32Array;if(e===ze.RGBA32Uint)return Uint32Array;if(e===ze.RGBA32Sint)return Int32Array;if(e===ze.RGBA32Float)return Float32Array;if(e===ze.BGRA8Unorm||e===ze.BGRA8UnormSRGB)return Uint8Array;if(e===ze.RGB10A2Unorm||e===ze.RGB9E5UFloat||e===ze.RG11B10UFloat)return Uint32Array;if(e===ze.Depth32Float)return Float32Array;if(e===ze.Depth24Plus||e===ze.Depth24PlusStencil8)return Uint32Array;if(e===ze.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=eJ.ThreeD:t=eJ.TwoD,t}}function Jk(i,e=null){const t=i.format,n=i.type,r=i.colorSpace;let s;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case km:s=r===kn?ze.BC1RGBAUnormSRGB:ze.BC1RGBAUnorm;break;case Gm:s=r===kn?ze.BC2RGBAUnormSRGB:ze.BC2RGBAUnorm;break;case zm:s=r===kn?ze.BC3RGBAUnormSRGB:ze.BC3RGBAUnorm;break;case Sx:s=r===kn?ze.ETC2RGB8UnormSRGB:ze.ETC2RGB8Unorm;break;case Tx:s=r===kn?ze.ETC2RGBA8UnormSRGB:ze.ETC2RGBA8Unorm;break;case Ex:s=r===kn?ze.ASTC4x4UnormSRGB:ze.ASTC4x4Unorm;break;case wx:s=r===kn?ze.ASTC5x4UnormSRGB:ze.ASTC5x4Unorm;break;case Mx:s=r===kn?ze.ASTC5x5UnormSRGB:ze.ASTC5x5Unorm;break;case Cx:s=r===kn?ze.ASTC6x5UnormSRGB:ze.ASTC6x5Unorm;break;case Rx:s=r===kn?ze.ASTC6x6UnormSRGB:ze.ASTC6x6Unorm;break;case Dx:s=r===kn?ze.ASTC8x5UnormSRGB:ze.ASTC8x5Unorm;break;case Lx:s=r===kn?ze.ASTC8x6UnormSRGB:ze.ASTC8x6Unorm;break;case Px:s=r===kn?ze.ASTC8x8UnormSRGB:ze.ASTC8x8Unorm;break;case Nx:s=r===kn?ze.ASTC10x5UnormSRGB:ze.ASTC10x5Unorm;break;case Bx:s=r===kn?ze.ASTC10x6UnormSRGB:ze.ASTC10x6Unorm;break;case Ix:s=r===kn?ze.ASTC10x8UnormSRGB:ze.ASTC10x8Unorm;break;case Ox:s=r===kn?ze.ASTC10x10UnormSRGB:ze.ASTC10x10Unorm;break;case Fx:s=r===kn?ze.ASTC12x10UnormSRGB:ze.ASTC12x10Unorm;break;case Ux:s=r===kn?ze.ASTC12x12UnormSRGB:ze.ASTC12x12Unorm;break;case ho:s=r===kn?ze.RGBA8UnormSRGB:ze.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case ho:switch(n){case zy:s=ze.RGBA8Snorm;break;case Hy:s=ze.RGBA16Sint;break;case ud:s=ze.RGBA16Uint;break;case Gs:s=ze.RGBA32Uint;break;case Za:s=ze.RGBA32Sint;break;case Aa:s=r===kn?ze.RGBA8UnormSRGB:ze.RGBA8Unorm;break;case Fa:s=ze.RGBA16Float;break;case Ns:s=ze.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case ZS:switch(n){case d3:s=ze.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case eb:switch(n){case zy:s=ze.R8Snorm;break;case Hy:s=ze.R16Sint;break;case ud:s=ze.R16Uint;break;case Gs:s=ze.R32Uint;break;case Za:s=ze.R32Sint;break;case Aa:s=ze.R8Unorm;break;case Fa:s=ze.R16Float;break;case Ns:s=ze.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case Yy:switch(n){case zy:s=ze.RG8Snorm;break;case Hy:s=ze.RG16Sint;break;case ud:s=ze.RG16Uint;break;case Gs:s=ze.RG32Uint;break;case Za:s=ze.RG32Sint;break;case Aa:s=ze.RG8Unorm;break;case Fa:s=ze.RG16Float;break;case Ns:s=ze.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case pd:switch(n){case ud:s=ze.Depth16Unorm;break;case Gs:s=ze.Depth24Plus;break;case Ns:s=ze.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case vd:switch(n){case yd:s=ze.Depth24PlusStencil8;break;case Ns:e&&e.features.has(Zk.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=ze.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case l1:switch(n){case Za:s=ze.R32Sint;break;case Gs:s=ze.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case tb:switch(n){case Za:s=ze.RG32Sint;break;case Gs:s=ze.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case nb:switch(n){case Za:s=ze.RGBA32Sint;break;case Gs:s=ze.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const cYe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,uYe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,tJ={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},fYe=i=>{i=i.trim();const e=i.match(cYe);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=uYe.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let u=0;u<n.length;u++){const{name:f,type:h}=n[u];let p=h;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=h.split("<")[0]),p=tJ[p]),s.push(new SH(p,f))}const o=i.substring(e[0].length),a=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:tJ[a]||a,inputs:s,name:l,inputsCode:t,blockCode:o,outputType:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class hYe extends TH{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:o,outputType:a}=fYe(e);super(t,n,r),this.inputsCode=s,this.blockCode=o,this.outputType=a}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class dYe extends jhe{parseFunction(e){return new hYe(e)}}const Y_=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},pYe={[_c.READ_ONLY]:"read",[_c.WRITE_ONLY]:"write",[_c.READ_WRITE]:"read_write"},nJ={[ff]:"repeat",[Sl]:"clamp",[lA]:"mirror"},_4={vertex:Y_?Y_.VERTEX:1,fragment:Y_?Y_.FRAGMENT:2,compute:Y_?Y_.COMPUTE:4},iJ={instance:!0,swizzleAssign:!1,storageBuffer:!0},AYe={"^^":"tsl_xor"},mYe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},rJ={},nd={tsl_xor:new Pa("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Pa("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Pa("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Pa("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Pa("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Pa("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Pa("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Pa("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Pa("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Pa("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Pa("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Pa("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Pa(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},Ew={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(nd.pow_float=new Pa("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),nd.pow_vec2=new Pa("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[nd.pow_float]),nd.pow_vec3=new Pa("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[nd.pow_float]),nd.pow_vec4=new Pa("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[nd.pow_float]),Ew.pow_float="tsl_pow_float",Ew.pow_vec2="tsl_pow_vec2",Ew.pow_vec3="tsl_pow_vec3",Ew.pow_vec4="tsl_pow_vec4");let nde="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(nde+=`diagnostic( off, derivative_uniformity );
`);class gYe extends qhe{constructor(e,t){super(e,t,new dYe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Yu}_generateTextureSample(e,t,n,r,s=this.shaderStage){return s==="fragment"?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n):this.generateTextureLod(e,t,n,r,"0")}_generateVideoSample(e,t,n=this.shaderStage){if(n==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${n} shader.`)}_generateTextureSampleLevel(e,t,n,r,s,o=this.shaderStage){return(o==="fragment"||o==="compute")&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,s,r)}generateWrapFunction(e){const t=`tsl_coord_${nJ[e.wrapS]}S_${nJ[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=rJ[t];if(n===void 0){const r=[],s=e.isData3DTexture?"vec3f":"vec2f";let o=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const a=(l,c)=>{l===ff?(r.push(nd.repeatWrapping_float),o+=`		tsl_repeatWrapping_float( coord.${c} )`):l===Sl?(r.push(nd.clampWrapping_float),o+=`		tsl_clampWrapping_float( coord.${c} )`):l===lA?(r.push(nd.mirrorWrapping_float),o+=`		tsl_mirrorWrapping_float( coord.${c} )`):(o+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};a(e.wrapS,"x"),o+=`,
`,a(e.wrapT,"y"),e.isData3DTexture&&(o+=`,
`,a(e.wrapR,"z")),o+=`
	);

}
`,rJ[t]=n=new Pa(o,r)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const r=this.getDataFromNode(e,this.shaderStage,this.globalCache);r.dimensionsSnippet===void 0&&(r.dimensionsSnippet={});let s=r.dimensionsSnippet[n];if(r.dimensionsSnippet[n]===void 0){let o,a;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),c=l>1;e.isData3DTexture?a="vec3<u32>":a="vec2<u32>",c||e.isVideoTexture||e.isStorageTexture?o=t:o=`${t}${n?`, u32( ${n} )`:""}`,s=new vD(new xD(`textureDimensions( ${o} )`,a)),r.dimensionsSnippet[n]=s,(e.isDataArrayTexture||e.isData3DTexture)&&(r.arrayLayerCount=new vD(new xD(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(r.cubeFaceCount=new vD(new xD("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,r="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,r);return`tsl_biquadraticTexture( ${t}, ${s}( ${n} ), ${o}, u32( ${r} ) )`}generateTextureLod(e,t,n,r,s="0u"){const o=this.generateWrapFunction(e),a=this.generateTextureDimension(e,t,s),l=e.isData3DTexture?"vec3":"vec2",c=`${l}<u32>(${o}(${n}) * ${l}<f32>(${a}))`;return this.generateTextureLoad(e,t,c,r,s)}generateTextureLoad(e,t,n,r,s="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${t}, ${n} )`:r?`textureLoad( ${t}, ${n}, ${r}, u32( ${s} ) )`:`textureLoad( ${t}, ${n}, u32( ${s} ) )`}generateTextureStore(e,t,n,r){return`textureStore( ${t}, ${n}, ${r} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===Ns||this.isSampleCompare(e)===!1&&e.minFilter===Ps&&e.magFilter===Ps||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,r,s=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,n,s):this.isUnfilterable(e)?o=this.generateTextureLod(e,t,n,r,"0",s):o=this._generateTextureSample(e,t,n,r,s),o}generateTextureGrad(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,n,r,s,o=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,n,o):a=this._generateTextureSampleLevel(e,t,n,r,s,o),a}generateTextureBias(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const t=AYe[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?_c.READ_ONLY:e.access}getStorageAccess(e,t){return pYe[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);if(o.uniformGPU===void 0){let a;const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let f=null;const h=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?f=new EN(s.name,s.node,l,h):t==="cubeTexture"?f=new Zhe(s.name,s.node,l,h):t==="texture3D"&&(f=new Jhe(s.name,s.node,l,h)),f.store=e.isStorageTextureNode===!0,f.setVisibility(_4[n]),(n==="fragment"||n==="compute")&&this.isUnfilterable(e.value)===!1&&f.store===!1){const p=new tYe(`${s.name}_sampler`,s.node,l);p.setVisibility(_4[n]),u.push(p,f),a=[p,f]}else u.push(f),a=[f]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const f=t==="buffer"?Xhe:rYe,h=new f(e,l);h.setVisibility(_4[n]),u.push(h),a=h,s.name=r||"NodeBuffer_"+s.id}else{const f=this.uniformGroups[n]||(this.uniformGroups[n]={});let h=f[c];h===void 0&&(h=new Qhe(c,l),h.setVisibility(_4[n]),f[c]=h,u.push(h)),a=this.getNodeUniform(s,t),h.addUniform(a)}o.uniformGPU=a}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:o}of n.values())t.push(`@builtin( ${r} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const a=this.getType(s);t.push(`var<${r}> ${n}: array< ${a}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,o=r.length;s<o;s++){const a=r[s],l=a.name,c=this.getType(a.type);t.push(`@location( ${s} ) ${l} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const r=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${r+n.name} : ${s}`)}return t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const r=[];for(const s of n){let o=`struct ${s.name} {
`;o+=this.getStructMembers(s),o+=`
};`,r.push(o)}t=`
`+r.join(`

`)+`
`}return t}getVar(e,t,n=null){let r=`var ${t} : `;return n!==null?r+=this.generateArrayDeclaration(e,n):r+=this.getType(e),r}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name,r.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let a=0;a<s.length;a++){const l=s[a];if(l.needsInterpolation){let c=`@location( ${a} )`;/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=" @interpolate( flat )"),t.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&o.includes(l)===!1&&o.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}isCustomStruct(e){return e.value.isStorageBufferAttribute&&e.node.structTypeNode!==null}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],o={};for(const l of t){const c=l.groupNode.name,u=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const f=l.node.value;(e==="fragment"||e==="compute")&&this.isUnfilterable(f)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler;`));let h,p="";const{primarySamples:m}=this.renderer.backend.utils.getTextureSampleData(f);if(m>1&&(p="_multisampled"),f.isCubeTexture===!0)h="texture_cube<f32>";else if(f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)h="texture_2d_array<f32>";else if(f.isDepthTexture===!0)h=`texture_depth${p}_2d`;else if(f.isVideoTexture===!0)h="texture_external";else if(f.isData3DTexture===!0)h="texture_3d<f32>";else if(l.node.isStorageTextureNode===!0){const g=Jk(f),b=this.getStorageAccess(l.node,e);h=`texture_storage_2d<${g}, ${b}>`}else{const g=this.getComponentTypeFromTexture(f).charAt(0);h=`texture${p}_2d<${g}32>`}n.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name} : ${h};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const f=l.node,h=this.getType(f.getNodeType(this)),p=f.bufferCount,m=p>0&&l.type==="buffer"?", "+p:"",g=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";if(this.isCustomStruct(l))r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var<${g}> ${l.name} : ${h};`);else{const T=`	value : array< ${f.isAtomic?`atomic<${h}>`:`${h}`}${m} >`;r.push(this._getWGSLStructBinding(l.name,T,g,u.binding++,u.group))}}else{const f=this.getType(this.getVectorType(l.type)),h=l.groupNode.name;(o[h]||(o[h]={index:u.binding++,id:u.group,snippets:[]})).snippets.push(`	${l.name} : ${f}`)}}for(const l in o){const c=o[l];s.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let a=n.join(`
`);return a+=r.join(`
`),a+=s.join(`
`),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],a=o.outputNode,l=a!==void 0&&a.isOutputStructNode===!0;for(const c of s){const u=this.getFlowData(c),f=c.name;if(f&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${f}
`),r+=`${u.code}
	`,c===o&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${u.result};`;else if(t==="fragment")if(l)n.returnType=a.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",r+=`return ${u.result};`;else{let h="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(h+=`,
	`+p),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",h),n.structs+=`
var<private> output : OutputStruct;`,r+=`output.color = ${u.result};

	return output;`}}}n.flow=r}this.shaderStage=null,this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getType(e){return mYe[e]||e}isAvailable(e){let t=iJ[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),iJ[e]=t),t}_getWGSLMethod(e){return nd[e]!==void 0&&this._include(e),Ew[e]}_include(e){const t=nd[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${nde}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x + globalId.y * numWorkgroups.x * u32(${t}) + globalId.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${o};`}}class yYe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=ze.Depth24PlusStencil8:e.depth&&(t=ze.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,o=s.getRenderTarget();t=o?o.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return E2.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return E2.LineList;if(e.isLine)return E2.LineStrip;if(e.isMesh)return E2.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Aa)return ze.BGRA8Unorm;if(e===Fa)return ze.RGBA16Float;throw new Error("Unsupported outputType")}}const vYe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),xYe=new Map([[Z7,["float16"]]]),bYe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class _Ye{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let o=s.buffer;if(o===void 0){const a=r.device;let l=n.array;if(e.normalized===!1){if(l.constructor===Int16Array)l=new Int32Array(l);else if(l.constructor===Uint16Array&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let u=0;u<l.length;u++)l[u]===65535&&(l[u]=4294967295)}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let u=0;u<n.count;u++)l.set(n.array.subarray(u*3,u*3+3),u*4);n.itemSize=4,n.array=l}const c=l.byteLength+(4-l.byteLength%4)%4;o=a.createBuffer({label:n.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t).buffer,o=t.array,a=this._isTypedArray(o),l=t.updateRanges;if(l.length===0)r.queue.writeBuffer(s,0,o,0);else{const c=a?1:o.BYTES_PER_ELEMENT;for(let u=0,f=l.length;u<f;u++){const h=l[u],p=h.start*c,m=h.count*c;r.queue.writeBuffer(s,0,o,p,m)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=n.get(a);if(l===void 0){let f,h;s.isInterleavedBufferAttribute===!0?(f=s.data.stride*o,h=s.data.isInstancedInterleavedBuffer?b4.Instance:b4.Vertex):(f=s.itemSize*o,h=s.isInstancedBufferAttribute?b4.Instance:b4.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(f=4),l={arrayStride:f,attributes:[],stepMode:h},n.set(a,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:r,offset:u,format:c})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,a=n.createBuffer({label:`${e.name}_readback`,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,a,0,o);const c=l.finish();n.queue.submit([c]),await a.mapAsync(GPUMapMode.READ);const u=a.getMappedRange(),f=new e.array.constructor(u.slice(0));return a.unmap(),f.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let o;if(t===1)o=bYe.get(r);else{const l=(xYe.get(s)||vYe.get(r))[n?1:0];if(l){const c=r.BYTES_PER_ELEMENT*t,f=Math.floor((c+3)/4)*4/r.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${l}x${f}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class SYe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,r=[];let s=0;for(const o of e.bindings){const a={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const l={};o.isStorageBuffer&&(o.visibility&4&&(o.access===_c.READ_WRITE||o.access===_c.WRITE_ONLY)?l.type=KO.Storage:l.type=KO.ReadOnlyStorage),a.buffer=l}else if(o.isSampler){const l={};o.texture.isDepthTexture&&o.texture.compareFunction!==null&&(l.type="comparison"),a.sampler=l}else if(o.isSampledTexture&&o.texture.isVideoTexture)a.externalTexture={};else if(o.isSampledTexture&&o.store){const l={};l.format=this.backend.get(o.texture).texture.format;const c=o.access;c===_c.READ_WRITE?l.access=YO.ReadWrite:c===_c.WRITE_ONLY?l.access=YO.WriteOnly:l.access=YO.ReadOnly,a.storageTexture=l}else if(o.isSampledTexture){const l={},{primarySamples:c}=t.utils.getTextureSampleData(o.texture);if(c>1&&(l.multisampled=!0,o.texture.isDepthTexture||(l.sampleType=K_.UnfilterableFloat)),o.texture.isDepthTexture)l.sampleType=K_.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const u=o.texture.type;u===Za?l.sampleType=K_.SInt:u===Gs?l.sampleType=K_.UInt:u===Ns&&(this.backend.hasFeature("float32-filterable")?l.sampleType=K_.Float:l.sampleType=K_.UnfilterableFloat)}o.isSampledCubeTexture?l.viewDimension=ju.Cube:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?l.viewDimension=ju.TwoDArray:o.isSampledTexture3D&&(l.viewDimension=ju.ThreeD),a.texture=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);r.push(a)}return n.createBindGroupLayout({entries:r})}createBindings(e,t,n,r=0){const{backend:s,bindGroupLayoutCache:o}=this,a=s.get(e);let l=o.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),o.set(e.bindingsReference,l));let c;n>0&&(a.groups===void 0&&(a.groups=[],a.versions=[]),a.versions[n]===r&&(c=a.groups[n])),c===void 0&&(c=this.createBindGroup(e,l),n>0&&(a.groups[n]=c,a.versions[n]=r)),a.group=c,a.layout=l}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroupIndex(e,t){const r=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,o=e[0],a=r.createBuffer({label:"bindingCameraIndex_"+o,size:16,usage:s});r.queue.writeBuffer(a,0,e,0);const l=[{binding:0,resource:{buffer:a}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+o,layout:t,entries:l})}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const o=[];for(const a of e.bindings){if(a.isUniformBuffer){const l=n.get(a);if(l.buffer===void 0){const c=a.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=r.createBuffer({label:"bindingBuffer_"+a.name,size:c,usage:u});l.buffer=f}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=n.get(a);if(l.buffer===void 0){const c=a.attribute;l.buffer=n.get(c).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=n.get(a.texture);o.push({binding:s,resource:l.sampler})}else if(a.isSampledTexture){const l=n.get(a.texture);let c;if(l.externalTexture!==void 0)c=r.importExternalTexture({source:l.externalTexture});else{const u=a.store?1:l.texture.mipLevelCount,f=`view-${l.texture.width}-${l.texture.height}-${u}`;if(c=l[f],c===void 0){const h=JKe.All;let p;a.isSampledCubeTexture?p=ju.Cube:a.isSampledTexture3D?p=ju.ThreeD:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?p=ju.TwoDArray:p=ju.TwoD,c=l[f]=l.texture.createView({aspect:h,dimension:p,mipLevelCount:u})}}o.push({binding:s,resource:c})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class TYe{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:o}=e,{vertexProgram:a,fragmentProgram:l}=o,c=this.backend,u=c.device,f=c.utils,h=c.get(o),p=[];for(const Y of e.getBindings()){const oe=c.get(Y);p.push(oe.layout)}const m=c.attributeUtils.createShaderVertexBuffers(e);let g;r.transparent===!0&&r.blending!==uu&&(g=this._getBlending(r));let b={};r.stencilWrite===!0&&(b={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const T=this._getColorWriteMask(r),C=[];if(e.context.textures!==null){const Y=e.context.textures;for(let oe=0;oe<Y.length;oe++){const re=f.getTextureFormatGPU(Y[oe]);C.push({format:re,blend:g,writeMask:T})}}else{const Y=f.getCurrentColorFormat(e.context);C.push({format:Y,blend:g,writeMask:T})}const R=c.get(a).module,P=c.get(l).module,I=this._getPrimitiveState(n,s,r),F=this._getDepthCompare(r),k=f.getCurrentDepthStencilFormat(e.context),q=this._getSampleCount(e.context),H={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},R,{buffers:m}),fragment:Object.assign({},P,{targets:C}),primitive:I,multisample:{count:q,alphaToCoverageEnabled:r.alphaToCoverage&&q>1},layout:u.createPipelineLayout({bindGroupLayouts:p})},O={},$=e.context.depth,ee=e.context.stencil;if(($===!0||ee===!0)&&($===!0&&(O.format=k,O.depthWriteEnabled=r.depthWrite,O.depthCompare=F),ee===!0&&(O.stencilFront=b,O.stencilBack={},O.stencilReadMask=r.stencilFuncMask,O.stencilWriteMask=r.stencilWriteMask),H.depthStencil=O),t===null)h.pipeline=u.createRenderPipeline(H);else{const Y=new Promise(oe=>{u.createRenderPipelineAsync(H).then(re=>{h.pipeline=re,oe()})});t.push(Y)}}createBundleEncoder(e){const t=this.backend,{utils:n,device:r}=t,s=n.getCurrentDepthStencilFormat(e),o=n.getCurrentColorFormat(e),a=this._getSampleCount(e),l={label:"renderBundleEncoder",colorFormats:[o],depthStencilFormat:s,sampleCount:a};return r.createRenderBundleEncoder(l)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,o=n.get(e),a=[];for(const l of t){const c=n.get(l);a.push(c.layout)}o.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:a})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,o=e.blendDst,a=e.blendEquation;if(r===H8){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:o,u=e.blendEquationAlpha!==null?e.blendEquationAlpha:a;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(u)}}else{const l=e.premultipliedAlpha,c=(u,f,h,p)=>{t={srcFactor:u,dstFactor:f,operation:xv.Add},n={srcFactor:h,dstFactor:p,operation:xv.Add}};if(l)switch(r){case fu:c(Ii.One,Ii.OneMinusSrcAlpha,Ii.One,Ii.OneMinusSrcAlpha);break;case xx:c(Ii.One,Ii.One,Ii.One,Ii.One);break;case bx:c(Ii.Zero,Ii.OneMinusSrc,Ii.Zero,Ii.One);break;case _x:c(Ii.Zero,Ii.Src,Ii.Zero,Ii.SrcAlpha);break}else switch(r){case fu:c(Ii.SrcAlpha,Ii.OneMinusSrcAlpha,Ii.One,Ii.OneMinusSrcAlpha);break;case xx:c(Ii.SrcAlpha,Ii.One,Ii.SrcAlpha,Ii.One);break;case bx:c(Ii.Zero,Ii.OneMinusSrc,Ii.Zero,Ii.One);break;case _x:c(Ii.Zero,Ii.Src,Ii.Zero,Ii.Src);break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case $8:t=Ii.Zero;break;case j8:t=Ii.One;break;case W8:t=Ii.Src;break;case K8:t=Ii.OneMinusSrc;break;case V2:t=Ii.SrcAlpha;break;case q2:t=Ii.OneMinusSrcAlpha;break;case Q8:t=Ii.Dst;break;case Z8:t=Ii.OneMinusDstColor;break;case Y8:t=Ii.DstAlpha;break;case X8:t=Ii.OneMinusDstAlpha;break;case J8:t=Ii.SrcAlphaSaturated;break;case gVe:t=Ii.Constant;break;case yVe:t=Ii.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case fte:t=Ul.Never;break;case OD:t=Ul.Always;break;case hte:t=Ul.Less;break;case pte:t=Ul.LessEqual;break;case dte:t=Ul.Equal;break;case gte:t=Ul.GreaterEqual;break;case Ate:t=Ul.Greater;break;case mte:t=Ul.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case Ty:t=vy.Keep;break;case rte:t=vy.Zero;break;case ste:t=vy.Replace;break;case ute:t=vy.Invert;break;case ote:t=vy.IncrementClamp;break;case ate:t=vy.DecrementClamp;break;case lte:t=vy.IncrementWrap;break;case cte:t=vy.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Ku:t=xv.Add;break;case V8:t=xv.Subtract;break;case q8:t=xv.ReverseSubtract;break;case F7:t=xv.Min;break;case U7:t=xv.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;switch(r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?US.Uint16:US.Uint32),n.side){case sh:r.frontFace=$O.CCW,r.cullMode=jO.Back;break;case Bs:r.frontFace=$O.CCW,r.cullMode=jO.Front;break;case Do:r.frontFace=$O.CCW,r.cullMode=jO.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side);break}return r}_getColorWriteMask(e){return e.colorWrite===!0?JZ.All:JZ.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Ul.Always;else{const n=e.depthFunc;switch(n){case $2:t=Ul.Never;break;case j2:t=Ul.Always;break;case W2:t=Ul.Less;break;case Jm:t=Ul.LessEqual;break;case K2:t=Ul.Equal;break;case Y2:t=Ul.GreaterEqual;break;case X2:t=Ul.Greater;break;case Q2:t=Ul.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class EYe extends tde{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const r=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return Sp(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e.id,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const r=this.device.createCommandEncoder();r.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),r.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=r.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const o=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let a=0;for(const[,l]of e){const c=o[l],u=o[l+1],f=Number(u-c)/1e6;a+=f}return this.resultBuffer.unmap(),this.lastValue=a,a}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class wYe extends ede{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new yYe(this),this.attributeUtils=new _Ye(this),this.bindingUtils=new SYe(this),this.pipelineUtils=new TYe(this),this.textureUtils=new lYe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const o={powerPreference:t.powerPreference},a=typeof navigator<"u"?await navigator.gpu.requestAdapter(o):null;if(a===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(Zk),c=[];for(const f of l)a.features.has(f)&&c.push(f);const u={requiredFeatures:c,requiredLimits:t.requiredLimits};n=await a.requestDevice(u)}else n=t.device;n.lost.then(o=>{const a={api:"WebGPU",message:o.message||"Unknown reason",reason:o.reason||null,originalEvent:o};e.onDeviceLost(a)});const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(Zk.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return Pp}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,r=this.get(n);let s=r.descriptors;if(s===void 0||r.width!==n.width||r.height!==n.height||r.dimensions!==n.dimensions||r.activeMipmapLevel!==n.activeMipmapLevel||r.activeCubeFace!==e.activeCubeFace||r.samples!==n.samples||r.loadOp!==t.loadOp){s={},r.descriptors=s;const l=()=>{n.removeEventListener("dispose",l),this.delete(n)};n.addEventListener("dispose",l)}const o=e.getCacheKey();let a=s[o];if(a===void 0){const l=e.textures,c=[];let u;for(let f=0;f<l.length;f++){const h=this.get(l[f]),p={label:`colorAttachment_${f}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:ju.TwoD};n.isRenderTarget3D?(u=e.activeCubeFace,p.baseArrayLayer=0,p.dimension=ju.ThreeD,p.depthOrArrayLayers=l[f].image.depth):n.isRenderTargetArray&&(p.dimension=ju.TwoDArray,p.depthOrArrayLayers=l[f].image.depth);const m=h.texture.createView(p);let g,b;h.msaaTexture!==void 0?(g=h.msaaTexture.createView(),b=m):(g=m,b=void 0),c.push({view:g,depthSlice:u,resolveTarget:b,loadOp:ca.Load,storeOp:pc.Store,...t})}if(a={colorAttachments:c},e.depth){const h={view:this.get(e.depthTexture).texture.createView()};a.depthStencilAttachment=h}s[o]=a,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=e.activeMipmapLevel,r.activeCubeFace=e.activeCubeFace,r.dimensions=n.dimensions,r.depthSlice=u,r.loadOp=c[0].loadOp}return a}beginRender(e){const t=this.get(e),n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e,{loadOp:ca.Load}),this.initTimestampQuery(e,o),o.occlusionQuerySet=s;const a=o.depthStencilAttachment;if(e.textures!==null){const u=o.colorAttachments;for(let f=0;f<u.length;f++){const h=u[f];e.clearColor?(h.clearValue=f===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=ca.Clear,h.storeOp=pc.Store):(h.loadOp=ca.Load,h.storeOp=pc.Store)}}else{const u=o.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=ca.Clear,u.storeOp=pc.Store):(u.loadOp=ca.Load,u.storeOp=pc.Store)}e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=ca.Clear,a.depthStoreOp=pc.Store):(a.depthLoadOp=ca.Load,a.depthStoreOp=pc.Store)),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=ca.Clear,a.stencilStoreOp=pc.Store):(a.stencilLoadOp=ca.Load,a.stencilStoreOp=pc.Store));const l=n.createCommandEncoder({label:"renderContext_"+e.id}),c=l.beginRenderPass(o);if(t.descriptor=o,t.encoder=l,t.currentPass=c,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:u,y:f,width:h,height:p}=e.scissorValue;c.setScissorRect(u,f,h,p)}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),n>0){const r=n*8;let s=this.occludedResolveCache.get(r);s===void 0&&(s=this.device.createBuffer({size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(r,s));const o=this.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,s,0),t.encoder.copyBufferToBuffer(s,0,o,0,r),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const r=e.textures;for(let s=0;s<r.length;s++){const o=r[s];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const o=n.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<r.length;l++)a[l]===BigInt(0)&&s.add(r[l]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(n,r,s,o,a,l)}clear(e,t,n,r=null){const s=this.device,o=this.renderer;let a=[],l,c,u,f;if(e){const m=this.getClearColor();if(this.renderer.alpha===!0){const g=m.a;c={r:m.r*g,g:m.g*g,b:m.b*g,a:g}}else c={r:m.r,g:m.g,b:m.b,a:m.a}}if(r===null){u=o.depth,f=o.stencil;const m=this._getDefaultRenderPassDescriptor();if(e){a=m.colorAttachments;const g=a[0];g.clearValue=c,g.loadOp=ca.Clear,g.storeOp=pc.Store}(u||f)&&(l=m.depthStencilAttachment)}else u=r.depth,f=r.stencil,e&&(a=this._getRenderPassDescriptor(r,{loadOp:ca.Clear,clearValue:c}).colorAttachments),(u||f)&&(l={view:this.get(r.depthTexture).texture.createView()});u&&(t?(l.depthLoadOp=ca.Clear,l.depthClearValue=o.getClearDepth(),l.depthStoreOp=pc.Store):(l.depthLoadOp=ca.Load,l.depthStoreOp=pc.Store)),f&&(n?(l.stencilLoadOp=ca.Clear,l.stencilClearValue=o.getClearStencil(),l.stencilStoreOp=pc.Store):(l.stencilLoadOp=ca.Load,l.stencilStoreOp=pc.Store));const h=s.createCommandEncoder({label:"clear"});h.beginRenderPass({colorAttachments:a,depthStencilAttachment:l}).end(),s.queue.submit([h.finish()])}beginCompute(e){const t=this.get(e),n={label:"computeGroup_"+e.id};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r){const{passEncoderGPU:s}=this.get(e),o=this.get(r).pipeline;s.setPipeline(o);for(let u=0,f=n.length;u<f;u++){const h=n[u],p=this.get(h);s.setBindGroup(u,p.group)}const a=this.device.limits.maxComputeWorkgroupsPerDimension,l=this.get(t);l.dispatchSize===void 0&&(l.dispatchSize={x:0,y:1,z:1});const{dispatchSize:c}=l;t.dispatchCount>a?(c.x=Math.min(t.dispatchCount,a),c.y=Math.ceil(t.dispatchCount/a)):c.x=t.dispatchCount,s.dispatchWorkgroups(c.x,c.y,c.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,context:r,pipeline:s}=e,o=e.getBindings(),a=this.get(r),l=this.get(s).pipeline,c=a.currentSets,u=a.currentPass,f=e.getDrawParameters();if(f===null)return;c.pipeline!==l&&(u.setPipeline(l),c.pipeline=l);const h=c.bindingGroups;for(let T=0,C=o.length;T<C;T++){const R=o[T],P=this.get(R);h[R.index]!==R.id&&(u.setBindGroup(R.index,P.group),h[R.index]=R.id)}const p=e.getIndex(),m=p!==null;if(m===!0&&c.index!==p){const T=this.get(p).buffer,C=p.array instanceof Uint16Array?US.Uint16:US.Uint32;u.setIndexBuffer(T,C),c.index=p}const g=e.getVertexBuffers();for(let T=0,C=g.length;T<C;T++){const R=g[T];if(c.attributes[T]!==R){const P=this.get(R).buffer;u.setVertexBuffer(T,P),c.attributes[T]=R}}if(a.occlusionQuerySet!==void 0){const T=a.lastOcclusionObject;T!==n&&(T!==null&&T.occlusionTest===!0&&(u.endOcclusionQuery(),a.occlusionQueryIndex++),n.occlusionTest===!0&&(u.beginOcclusionQuery(a.occlusionQueryIndex),a.occlusionQueryObjects[a.occlusionQueryIndex]=n),a.lastOcclusionObject=n)}const b=()=>{if(n.isBatchedMesh===!0){const T=n._multiDrawStarts,C=n._multiDrawCounts,R=n._multiDrawCount,P=n._multiDrawInstances;for(let I=0;I<R;I++){const F=P?P[I]:1,k=F>1?0:I;m===!0?u.drawIndexed(C[I],F,T[I]/p.array.BYTES_PER_ELEMENT,0,k):u.draw(C[I],F,T[I],k)}}else if(m===!0){const{vertexCount:T,instanceCount:C,firstVertex:R}=f,P=e.getIndirect();if(P!==null){const I=this.get(P).buffer;u.drawIndexedIndirect(I,0)}else u.drawIndexed(T,C,R,0,0);t.update(n,T,C)}else{const{vertexCount:T,instanceCount:C,firstVertex:R}=f,P=e.getIndirect();if(P!==null){const I=this.get(P).buffer;u.drawIndirect(I,0)}else u.draw(T,C,R,0);t.update(n,T,C)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const T=this.get(e.camera),C=e.camera.cameras,R=e.getBindingGroup("cameraIndex");if(T.indexesGPU===void 0||T.indexesGPU.length!==C.length){const I=this.get(R),F=[],k=new Uint32Array([0,0,0,0]);for(let q=0,H=C.length;q<H;q++){k[0]=q;const O=this.bindingUtils.createBindGroupIndex(k,I.layout);F.push(O)}T.indexesGPU=F}const P=this.renderer.getPixelRatio();for(let I=0,F=C.length;I<F;I++){const k=C[I];if(n.layers.test(k.layers)){const q=k.viewport;u.setViewport(Math.floor(q.x*P),Math.floor(q.y*P),Math.floor(q.width*P),Math.floor(q.height*P),r.viewportValue.minDepth,r.viewportValue.maxDepth),u.setBindGroup(R.index,T.indexesGPU[I]),b()}}}else b()}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(n,r);let f=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,t.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n]||(this.timestampQueryPool[n]=new EYe(this.device,n,2048));const r=this.timestampQueryPool[n],s=r.allocateQueriesForContext(e);t.timestampWrites={querySet:r.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new gYe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0){let o=0,a=0,l=0,c=0,u=0,f=0,h=e.image.width,p=e.image.height;n!==null&&(c=n.x,u=n.y,f=n.z||0,h=n.width,p=n.height),r!==null&&(o=r.x,a=r.y,l=r.z||0);const m=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),g=this.get(e).texture,b=this.get(t).texture;m.copyTextureToTexture({texture:g,mipLevel:s,origin:{x:c,y:u,z:f}},{texture:b,mipLevel:s,origin:{x:o,y:a,z:l}},[h,p,1]),this.device.queue.submit([m.finish()])}copyFramebufferToTexture(e,t,n){const r=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const o=this.get(e).texture;if(s.format!==o.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,o.format);return}let a;if(r.currentPass?(r.currentPass.end(),a=r.encoder):a=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),a.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:o},[n.z,n.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),r.currentPass){const{descriptor:l}=r;for(let c=0;c<l.colorAttachments.length;c++)l.colorAttachments[c].loadOp=ca.Load;if(t.depth&&(l.depthStencilAttachment.depthLoadOp=ca.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=ca.Load),r.currentPass=a.beginRenderPass(l),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:c,y:u,width:f,height:h}=t.scissorValue;r.currentPass.setScissorRect(c,u,f,h)}}else this.device.queue.submit([a.finish()])}}class MYe extends oT{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class CYe extends Whe{constructor(){super(),this.addMaterial(mHe,"MeshPhongMaterial"),this.addMaterial(qfe,"MeshStandardMaterial"),this.addMaterial(KHe,"MeshPhysicalMaterial"),this.addMaterial(ZHe,"MeshToonMaterial"),this.addMaterial(cHe,"MeshBasicMaterial"),this.addMaterial(pHe,"MeshLambertMaterial"),this.addMaterial(iHe,"MeshNormalMaterial"),this.addMaterial(tVe,"MeshMatcapMaterial"),this.addMaterial(Xze,"LineBasicMaterial"),this.addMaterial(Zze,"LineDashedMaterial"),this.addMaterial(sVe,"PointsMaterial"),this.addMaterial(jfe,"SpriteMaterial"),this.addMaterial(lVe,"ShadowMaterial"),this.addLight(mje,dS),this.addLight(lKe,aT),this.addLight(cKe,w9),this.addLight($he,oT),this.addLight(fKe,_3),this.addLight(hKe,T9),this.addLight(dKe,M9),this.addLight(uKe,MYe),this.addToneMapping(hhe,z7),this.addToneMapping(dhe,H7),this.addToneMapping(phe,V7),this.addToneMapping(Ahe,eP),this.addToneMapping(mhe,q7),this.addToneMapping(ghe,$7)}}class ide extends LKe{constructor(e={}){let t;e.forceWebGL?t=ZZ:(t=wYe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new ZZ(e)));const n=new t(e);super(n,e),this.library=new CYe,this.isWebGPURenderer=!0}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */ne.BRDF_GGX;ne.BRDF_Lambert;ne.BasicShadowFilter;ne.Break;ne.Continue;ne.DFGApprox;ne.D_GGX;ne.Discard;ne.EPSILON;ne.F_Schlick;const RYe=ne.Fn;ne.INFINITY;const DYe=ne.If,LYe=ne.Loop;ne.NodeShaderStage;ne.NodeType;ne.NodeUpdateType;ne.NodeAccess;ne.PCFShadowFilter;ne.PCFSoftShadowFilter;ne.PI;ne.PI2;ne.Return;ne.Schlick_to_F0;ne.ScriptableNodeResources;ne.ShaderNode;ne.TBNViewMatrix;ne.VSMShadowFilter;ne.V_GGX_SmithCorrelated;ne.abs;ne.acesFilmicToneMapping;ne.acos;ne.add;ne.addNodeElement;ne.agxToneMapping;ne.all;ne.alphaT;ne.and;ne.anisotropy;ne.anisotropyB;ne.anisotropyT;ne.any;ne.append;ne.array;ne.arrayBuffer;const PYe=ne.asin;ne.assign;ne.atan;ne.atan2;ne.atomicAdd;ne.atomicAnd;ne.atomicFunc;ne.atomicMax;ne.atomicMin;ne.atomicOr;ne.atomicStore;ne.atomicSub;ne.atomicXor;ne.atomicLoad;ne.attenuationColor;ne.attenuationDistance;ne.attribute;ne.attributeArray;ne.backgroundBlurriness;ne.backgroundIntensity;ne.backgroundRotation;ne.batch;ne.billboarding;ne.bitAnd;ne.bitNot;ne.bitOr;ne.bitXor;ne.bitangentGeometry;ne.bitangentLocal;ne.bitangentView;ne.bitangentWorld;ne.bitcast;ne.blendBurn;ne.blendColor;ne.blendDodge;ne.blendOverlay;ne.blendScreen;ne.blur;ne.bool;ne.buffer;ne.bufferAttribute;ne.bumpMap;ne.burn;ne.bvec2;ne.bvec3;ne.bvec4;ne.bypass;ne.cache;ne.call;ne.cameraFar;ne.cameraIndex;ne.cameraNear;ne.cameraNormalMatrix;ne.cameraPosition;ne.cameraProjectionMatrix;ne.cameraProjectionMatrixInverse;ne.cameraViewMatrix;ne.cameraWorldMatrix;ne.cbrt;ne.cdl;ne.ceil;ne.checker;ne.cineonToneMapping;ne.clamp;ne.clearcoat;ne.clearcoatRoughness;ne.code;ne.color;ne.colorSpaceToWorking;ne.colorToDirection;ne.compute;ne.cond;ne.Const;ne.context;ne.convert;ne.convertColorSpace;ne.convertToTexture;const NYe=ne.cos;ne.cross;ne.cubeTexture;ne.dFdx;ne.dFdy;ne.dashSize;ne.defaultBuildStages;ne.defaultShaderStages;ne.defined;ne.degrees;ne.deltaTime;ne.densityFog;ne.densityFogFactor;ne.depth;ne.depthPass;ne.difference;ne.diffuseColor;ne.directPointLight;ne.directionToColor;ne.dispersion;ne.distance;ne.div;ne.dodge;ne.dot;ne.drawIndex;ne.dynamicBufferAttribute;ne.element;ne.emissive;ne.equal;ne.equals;ne.equirectUV;const BYe=ne.exp;ne.exp2;ne.expression;ne.faceDirection;ne.faceForward;ne.faceforward;const IYe=ne.float;ne.floor;ne.fog;ne.fract;ne.frameGroup;ne.frameId;ne.frontFacing;ne.fwidth;ne.gain;ne.gapSize;ne.getConstNodeType;ne.getCurrentStack;ne.getDirection;ne.getDistanceAttenuation;ne.getGeometryRoughness;ne.getNormalFromDepth;ne.getParallaxCorrectNormal;ne.getRoughness;ne.getScreenPosition;ne.getShIrradianceAt;ne.getTextureIndex;ne.getViewPosition;ne.glsl;ne.glslFn;ne.grayscale;ne.greaterThan;ne.greaterThanEqual;ne.hash;ne.highpModelNormalViewMatrix;ne.highpModelViewMatrix;ne.hue;ne.instance;const OYe=ne.instanceIndex;ne.instancedArray;ne.instancedBufferAttribute;ne.instancedDynamicBufferAttribute;ne.instancedMesh;ne.int;ne.inverseSqrt;ne.inversesqrt;ne.invocationLocalIndex;ne.invocationSubgroupIndex;ne.ior;ne.iridescence;ne.iridescenceIOR;ne.iridescenceThickness;ne.ivec2;ne.ivec3;ne.ivec4;ne.js;ne.label;ne.length;ne.lengthSq;ne.lessThan;ne.lessThanEqual;ne.lightPosition;ne.lightTargetDirection;ne.lightTargetPosition;ne.lightViewPosition;ne.lightingContext;ne.lights;ne.linearDepth;ne.linearToneMapping;ne.localId;ne.globalId;ne.log;ne.log2;ne.logarithmicDepthToViewZ;ne.loop;ne.luminance;ne.mediumpModelViewMatrix;ne.mat2;ne.mat3;ne.mat4;ne.matcapUV;ne.materialAO;ne.materialAlphaTest;ne.materialAnisotropy;ne.materialAnisotropyVector;ne.materialAttenuationColor;ne.materialAttenuationDistance;ne.materialClearcoat;ne.materialClearcoatNormal;ne.materialClearcoatRoughness;ne.materialColor;ne.materialDispersion;ne.materialEmissive;ne.materialIOR;ne.materialIridescence;ne.materialIridescenceIOR;ne.materialIridescenceThickness;ne.materialLightMap;ne.materialLineDashOffset;ne.materialLineDashSize;ne.materialLineGapSize;ne.materialLineScale;ne.materialLineWidth;ne.materialMetalness;ne.materialNormal;ne.materialOpacity;ne.materialPointSize;ne.materialReference;ne.materialReflectivity;ne.materialRefractionRatio;ne.materialRotation;ne.materialRoughness;ne.materialSheen;ne.materialSheenRoughness;ne.materialShininess;ne.materialSpecular;ne.materialSpecularColor;ne.materialSpecularIntensity;ne.materialSpecularStrength;ne.materialThickness;ne.materialTransmission;ne.max;ne.maxMipLevel;ne.metalness;ne.min;ne.mix;ne.mixElement;ne.mod;ne.modInt;ne.modelDirection;ne.modelNormalMatrix;ne.modelPosition;ne.modelScale;ne.modelViewMatrix;ne.modelViewPosition;ne.modelViewProjection;ne.modelWorldMatrix;ne.modelWorldMatrixInverse;ne.morphReference;ne.mrt;ne.mul;ne.mx_aastep;ne.mx_cell_noise_float;ne.mx_contrast;ne.mx_fractal_noise_float;ne.mx_fractal_noise_vec2;ne.mx_fractal_noise_vec3;ne.mx_fractal_noise_vec4;ne.mx_hsvtorgb;ne.mx_noise_float;ne.mx_noise_vec3;ne.mx_noise_vec4;ne.mx_ramplr;ne.mx_ramptb;ne.mx_rgbtohsv;ne.mx_safepower;ne.mx_splitlr;ne.mx_splittb;ne.mx_srgb_texture_to_lin_rec709;ne.mx_transform_uv;ne.mx_worley_noise_float;ne.mx_worley_noise_vec2;ne.mx_worley_noise_vec3;const FYe=ne.negate;ne.neutralToneMapping;ne.nodeArray;ne.nodeImmutable;ne.nodeObject;ne.nodeObjects;ne.nodeProxy;ne.normalFlat;ne.normalGeometry;ne.normalLocal;ne.normalMap;ne.normalView;ne.normalWorld;ne.normalize;ne.not;ne.notEqual;ne.numWorkgroups;ne.objectDirection;ne.objectGroup;ne.objectPosition;ne.objectScale;ne.objectViewPosition;ne.objectWorldMatrix;ne.oneMinus;ne.or;ne.orthographicDepthToViewZ;ne.oscSawtooth;ne.oscSine;ne.oscSquare;ne.oscTriangle;ne.output;ne.outputStruct;ne.overlay;ne.overloadingFn;ne.parabola;ne.parallaxDirection;ne.parallaxUV;ne.parameter;ne.pass;ne.passTexture;ne.pcurve;ne.perspectiveDepthToViewZ;ne.pmremTexture;ne.pointUV;ne.pointWidth;ne.positionGeometry;ne.positionLocal;ne.positionPrevious;ne.positionView;ne.positionViewDirection;ne.positionWorld;ne.positionWorldDirection;ne.posterize;ne.pow;ne.pow2;ne.pow3;ne.pow4;ne.property;ne.radians;ne.rand;ne.range;ne.rangeFog;ne.rangeFogFactor;ne.reciprocal;ne.reference;ne.referenceBuffer;ne.reflect;ne.reflectVector;ne.reflectView;ne.reflector;ne.refract;ne.refractVector;ne.refractView;ne.reinhardToneMapping;ne.remainder;ne.remap;ne.remapClamp;ne.renderGroup;ne.renderOutput;ne.rendererReference;ne.rotate;ne.rotateUV;ne.roughness;ne.round;ne.rtt;ne.sRGBTransferEOTF;ne.sRGBTransferOETF;ne.sampler;ne.saturate;ne.saturation;ne.screen;ne.screenCoordinate;ne.screenSize;ne.screenUV;ne.scriptable;ne.scriptableValue;ne.select;ne.setCurrentStack;ne.shaderStages;ne.shadow;ne.shadowPositionWorld;ne.sharedUniformGroup;ne.shapeCircle;ne.sheen;ne.sheenRoughness;ne.shiftLeft;ne.shiftRight;ne.shininess;ne.sign;const UYe=ne.sin;ne.sinc;ne.skinning;ne.skinningReference;ne.smoothstep;ne.smoothstepElement;ne.specularColor;ne.specularF90;ne.spherizeUV;ne.split;ne.spritesheetUV;const kYe=ne.sqrt;ne.stack;ne.step;const GYe=ne.storage;ne.storageBarrier;ne.storageObject;ne.storageTexture;ne.string;ne.struct;ne.sub;ne.subgroupIndex;ne.subgroupSize;ne.tan;ne.tangentGeometry;ne.tangentLocal;ne.tangentView;ne.tangentWorld;ne.temp;ne.texture;ne.texture3D;ne.textureBarrier;ne.textureBicubic;ne.textureCubeUV;ne.textureLoad;ne.textureSize;ne.textureStore;ne.thickness;ne.threshold;ne.time;ne.timerDelta;ne.timerGlobal;ne.timerLocal;ne.toOutputColorSpace;ne.toWorkingColorSpace;ne.toneMapping;ne.toneMappingExposure;ne.toonOutlinePass;ne.transformDirection;ne.transformNormal;ne.transformNormalToView;ne.transformedBentNormalView;ne.transformedBitangentView;ne.transformedBitangentWorld;ne.transformedClearcoatNormalView;ne.transformedNormalView;ne.transformedNormalWorld;ne.transformedTangentView;ne.transformedTangentWorld;ne.transmission;ne.transpose;ne.tri;ne.tri3;ne.triNoise3D;ne.triplanarTexture;ne.triplanarTextures;ne.trunc;ne.tslFn;ne.uint;const zYe=ne.uniform;ne.uniformArray;ne.uniformGroup;ne.uniforms;ne.userData;ne.uv;ne.uvec2;ne.uvec3;ne.uvec4;ne.Var;ne.varying;ne.varyingProperty;ne.vec2;ne.vec3;ne.vec4;ne.vectorComponents;ne.velocity;ne.vertexColor;ne.vertexIndex;ne.vibrance;ne.viewZToLogarithmicDepth;ne.viewZToOrthographicDepth;ne.viewZToPerspectiveDepth;ne.viewport;ne.viewportBottomLeft;ne.viewportCoordinate;ne.viewportDepthTexture;ne.viewportLinearDepth;ne.viewportMipTexture;ne.viewportResolution;ne.viewportSafeUV;ne.viewportSharedTexture;ne.viewportSize;ne.viewportTexture;ne.viewportTopLeft;ne.viewportUV;ne.wgsl;ne.wgslFn;ne.workgroupArray;ne.workgroupBarrier;ne.workgroupId;ne.workingToColorSpace;ne.xor;const sJ=new ma,S4=new he;class rde extends C9{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Cn(e,3)),this.setAttribute("uv",new Cn(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new AM(t,6,1);return this.setAttribute("instanceStart",new vc(n,3,0)),this.setAttribute("instanceEnd",new vc(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new AM(t,6,1);return this.setAttribute("instanceColorStart",new vc(n,3,0)),this.setAttribute("instanceColorEnd",new vc(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new h9(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ma);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),sJ.setFromBufferAttribute(t),this.boundingBox.union(sJ))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ua),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)S4.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(S4)),S4.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(S4));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}wn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new at(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};nu.line={uniforms:g3.merge([wn.common,wn.fog,wn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class wH extends jl{constructor(e){super({type:"LineMaterial",uniforms:g3.clone(nu.line.uniforms),vertexShader:nu.line.vertexShader,fragmentShader:nu.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const XO=new Ln,oJ=new he,aJ=new he,kl=new Ln,Gl=new Ln,w0=new Ln,QO=new he,ZO=new rn,zl=new jte,lJ=new he,T4=new ma,E4=new Ua,M0=new Ln;let H0,gx;function cJ(i,e,t){return M0.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),M0.multiplyScalar(1/M0.w),M0.x=gx/t.width,M0.y=gx/t.height,M0.applyMatrix4(i.projectionMatrixInverse),M0.multiplyScalar(1/M0.w),Math.abs(Math.max(M0.x,M0.y))}function HYe(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,o=Math.min(n.instanceCount,r.count);for(let a=0,l=o;a<l;a++){zl.start.fromBufferAttribute(r,a),zl.end.fromBufferAttribute(s,a),zl.applyMatrix4(t);const c=new he,u=new he;H0.distanceSqToSegment(zl.start,zl.end,u,c),u.distanceTo(c)<gx*.5&&e.push({point:u,pointOnLine:c,distance:H0.origin.distanceTo(u),object:i,face:null,faceIndex:a,uv:null,uv1:null})}}function VYe(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,o=i.matrixWorld,a=i.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=Math.min(a.instanceCount,l.count),f=-e.near;H0.at(1,w0),w0.w=1,w0.applyMatrix4(e.matrixWorldInverse),w0.applyMatrix4(n),w0.multiplyScalar(1/w0.w),w0.x*=s.x/2,w0.y*=s.y/2,w0.z=0,QO.copy(w0),ZO.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,p=u;h<p;h++){if(kl.fromBufferAttribute(l,h),Gl.fromBufferAttribute(c,h),kl.w=1,Gl.w=1,kl.applyMatrix4(ZO),Gl.applyMatrix4(ZO),kl.z>f&&Gl.z>f)continue;if(kl.z>f){const R=kl.z-Gl.z,P=(kl.z-f)/R;kl.lerp(Gl,P)}else if(Gl.z>f){const R=Gl.z-kl.z,P=(Gl.z-f)/R;Gl.lerp(kl,P)}kl.applyMatrix4(n),Gl.applyMatrix4(n),kl.multiplyScalar(1/kl.w),Gl.multiplyScalar(1/Gl.w),kl.x*=s.x/2,kl.y*=s.y/2,Gl.x*=s.x/2,Gl.y*=s.y/2,zl.start.copy(kl),zl.start.z=0,zl.end.copy(Gl),zl.end.z=0;const g=zl.closestPointToPointParameter(QO,!0);zl.at(g,lJ);const b=_l.lerp(kl.z,Gl.z,g),T=b>=-1&&b<=1,C=QO.distanceTo(lJ)<gx*.5;if(T&&C){zl.start.fromBufferAttribute(l,h),zl.end.fromBufferAttribute(c,h),zl.start.applyMatrix4(o),zl.end.applyMatrix4(o);const R=new he,P=new he;H0.distanceSqToSegment(zl.start,zl.end,P,R),t.push({point:P,pointOnLine:R,distance:H0.origin.distanceTo(P),object:i,face:null,faceIndex:h,uv:null,uv1:null})}}}class qYe extends zi{constructor(e=new rde,t=new wH({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)oJ.fromBufferAttribute(t,o),aJ.fromBufferAttribute(n,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+oJ.distanceTo(aJ);const s=new AM(r,2,1);return e.setAttribute("instanceDistanceStart",new vc(s,1,0)),e.setAttribute("instanceDistanceEnd",new vc(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;H0=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;gx=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),E4.copy(a.boundingSphere).applyMatrix4(o);let c;if(n)c=gx*.5;else{const f=Math.max(r.near,E4.distanceToPoint(H0.origin));c=cJ(r,f,l.resolution)}if(E4.radius+=c,H0.intersectsSphere(E4)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),T4.copy(a.boundingBox).applyMatrix4(o);let u;if(n)u=gx*.5;else{const f=Math.max(r.near,T4.distanceToPoint(H0.origin));u=cJ(r,f,l.resolution)}T4.expandByScalar(u),H0.intersectsBox(T4)!==!1&&(n?HYe(this,t):VYe(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(XO),this.material.uniforms.resolution.value.set(XO.z,XO.w))}}class sde extends rde{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class $Ye extends qYe{constructor(e=new sde,t=new wH({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class uJ extends v3{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class jYe{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=WYe(e,t,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes());return n}}function WYe(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<n.length;c++){const u=n[c];if(u===`
`)a=0,l-=s;else{const f=KYe(u,r,a,l,t);a+=f.offsetX,o.push(f.path)}}return o}function KYe(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const o=new Yte;let a,l,c,u,f,h,p,m;if(s.o){const g=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let b=0,T=g.length;b<T;)switch(g[b++]){case"m":a=g[b++]*e+t,l=g[b++]*e+n,o.moveTo(a,l);break;case"l":a=g[b++]*e+t,l=g[b++]*e+n,o.lineTo(a,l);break;case"q":c=g[b++]*e+t,u=g[b++]*e+n,f=g[b++]*e+t,h=g[b++]*e+n,o.quadraticCurveTo(f,h,c,u);break;case"b":c=g[b++]*e+t,u=g[b++]*e+n,f=g[b++]*e+t,h=g[b++]*e+n,p=g[b++]*e+t,m=g[b++]*e+n,o.bezierCurveTo(f,h,p,m,c,u);break}}return{offsetX:s.ha*e,path:o}}function e7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function YYe(i){if(Array.isArray(i))return i}function XYe(i){if(Array.isArray(i))return e7(i)}function ode(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function QYe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fJ(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function ZYe(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){fJ(s,n,r,o,a,"next",l)}function a(l){fJ(s,n,r,o,a,"throw",l)}o(void 0)})}}function wN(i,e,t){return e=kS(e),aXe(i,CH()?Reflect.construct(e,t||[],kS(i).constructor):e.apply(i,t))}function JYe(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function MN(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function rw(i,e){return i.get(ode(i,e))}function JO(i,e,t){JYe(i,e),e.set(i,t)}function eF(i,e,t){return i.set(ode(i,e),t),t}function MH(i,e,t){if(CH())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function eXe(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,ade(n.key),n)}}function CN(i,e,t){return e&&eXe(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Cl(i,e,t){return(e=ade(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function t7(){return t7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=lXe(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},t7.apply(null,arguments)}function kS(i){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kS(i)}function RN(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&i7(i,e)}function CH(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!i})()}function tXe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function nXe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function iXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function ss(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hJ(Object(t),!0).forEach(function(n){Cl(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):hJ(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function sXe(i,e){if(i==null)return{};var t,n,r=oXe(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function oXe(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function aXe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QYe(i)}function n7(){n7=function(){return e};var i,e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(Q,se,le){Q[se]=le.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(Q,se,le){return Object.defineProperty(Q,se,{value:le,enumerable:!0,configurable:!0,writable:!0}),Q[se]}try{c({},"")}catch{c=function(se,le,de){return se[le]=de}}function u(Q,se,le,de){var ie=se&&se.prototype instanceof T?se:T,ge=Object.create(ie.prototype),Ce=new oe(de||[]);return r(ge,"_invoke",{value:O(Q,le,Ce)}),ge}function f(Q,se,le){try{return{type:"normal",arg:Q.call(se,le)}}catch(de){return{type:"throw",arg:de}}}e.wrap=u;var h="suspendedStart",p="suspendedYield",m="executing",g="completed",b={};function T(){}function C(){}function R(){}var P={};c(P,o,function(){return this});var I=Object.getPrototypeOf,F=I&&I(I(re([])));F&&F!==t&&n.call(F,o)&&(P=F);var k=R.prototype=T.prototype=Object.create(P);function q(Q){["next","throw","return"].forEach(function(se){c(Q,se,function(le){return this._invoke(se,le)})})}function H(Q,se){function le(ie,ge,Ce,Ie){var Ee=f(Q[ie],Q,ge);if(Ee.type!=="throw"){var Be=Ee.arg,qe=Be.value;return qe&&typeof qe=="object"&&n.call(qe,"__await")?se.resolve(qe.__await).then(function(it){le("next",it,Ce,Ie)},function(it){le("throw",it,Ce,Ie)}):se.resolve(qe).then(function(it){Be.value=it,Ce(Be)},function(it){return le("throw",it,Ce,Ie)})}Ie(Ee.arg)}var de;r(this,"_invoke",{value:function(ie,ge){function Ce(){return new se(function(Ie,Ee){le(ie,ge,Ie,Ee)})}return de=de?de.then(Ce,Ce):Ce()}})}function O(Q,se,le){var de=h;return function(ie,ge){if(de===m)throw Error("Generator is already running");if(de===g){if(ie==="throw")throw ge;return{value:i,done:!0}}for(le.method=ie,le.arg=ge;;){var Ce=le.delegate;if(Ce){var Ie=$(Ce,le);if(Ie){if(Ie===b)continue;return Ie}}if(le.method==="next")le.sent=le._sent=le.arg;else if(le.method==="throw"){if(de===h)throw de=g,le.arg;le.dispatchException(le.arg)}else le.method==="return"&&le.abrupt("return",le.arg);de=m;var Ee=f(Q,se,le);if(Ee.type==="normal"){if(de=le.done?g:p,Ee.arg===b)continue;return{value:Ee.arg,done:le.done}}Ee.type==="throw"&&(de=g,le.method="throw",le.arg=Ee.arg)}}}function $(Q,se){var le=se.method,de=Q.iterator[le];if(de===i)return se.delegate=null,le==="throw"&&Q.iterator.return&&(se.method="return",se.arg=i,$(Q,se),se.method==="throw")||le!=="return"&&(se.method="throw",se.arg=new TypeError("The iterator does not provide a '"+le+"' method")),b;var ie=f(de,Q.iterator,se.arg);if(ie.type==="throw")return se.method="throw",se.arg=ie.arg,se.delegate=null,b;var ge=ie.arg;return ge?ge.done?(se[Q.resultName]=ge.value,se.next=Q.nextLoc,se.method!=="return"&&(se.method="next",se.arg=i),se.delegate=null,b):ge:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,b)}function ee(Q){var se={tryLoc:Q[0]};1 in Q&&(se.catchLoc=Q[1]),2 in Q&&(se.finallyLoc=Q[2],se.afterLoc=Q[3]),this.tryEntries.push(se)}function Y(Q){var se=Q.completion||{};se.type="normal",delete se.arg,Q.completion=se}function oe(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(ee,this),this.reset(!0)}function re(Q){if(Q||Q===""){var se=Q[o];if(se)return se.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length)){var le=-1,de=function ie(){for(;++le<Q.length;)if(n.call(Q,le))return ie.value=Q[le],ie.done=!1,ie;return ie.value=i,ie.done=!0,ie};return de.next=de}}throw new TypeError(typeof Q+" is not iterable")}return C.prototype=R,r(k,"constructor",{value:R,configurable:!0}),r(R,"constructor",{value:C,configurable:!0}),C.displayName=c(R,l,"GeneratorFunction"),e.isGeneratorFunction=function(Q){var se=typeof Q=="function"&&Q.constructor;return!!se&&(se===C||(se.displayName||se.name)==="GeneratorFunction")},e.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,R):(Q.__proto__=R,c(Q,l,"GeneratorFunction")),Q.prototype=Object.create(k),Q},e.awrap=function(Q){return{__await:Q}},q(H.prototype),c(H.prototype,a,function(){return this}),e.AsyncIterator=H,e.async=function(Q,se,le,de,ie){ie===void 0&&(ie=Promise);var ge=new H(u(Q,se,le,de),ie);return e.isGeneratorFunction(se)?ge:ge.next().then(function(Ce){return Ce.done?Ce.value:ge.next()})},q(k),c(k,l,"Generator"),c(k,o,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),e.keys=function(Q){var se=Object(Q),le=[];for(var de in se)le.push(de);return le.reverse(),function ie(){for(;le.length;){var ge=le.pop();if(ge in se)return ie.value=ge,ie.done=!1,ie}return ie.done=!0,ie}},e.values=re,oe.prototype={constructor:oe,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(Y),!Q)for(var se in this)se.charAt(0)==="t"&&n.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=i)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var se=this;function le(Ee,Be){return ge.type="throw",ge.arg=Q,se.next=Ee,Be&&(se.method="next",se.arg=i),!!Be}for(var de=this.tryEntries.length-1;de>=0;--de){var ie=this.tryEntries[de],ge=ie.completion;if(ie.tryLoc==="root")return le("end");if(ie.tryLoc<=this.prev){var Ce=n.call(ie,"catchLoc"),Ie=n.call(ie,"finallyLoc");if(Ce&&Ie){if(this.prev<ie.catchLoc)return le(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return le(ie.finallyLoc)}else if(Ce){if(this.prev<ie.catchLoc)return le(ie.catchLoc,!0)}else{if(!Ie)throw Error("try statement without catch or finally");if(this.prev<ie.finallyLoc)return le(ie.finallyLoc)}}}},abrupt:function(Q,se){for(var le=this.tryEntries.length-1;le>=0;--le){var de=this.tryEntries[le];if(de.tryLoc<=this.prev&&n.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var ie=de;break}}ie&&(Q==="break"||Q==="continue")&&ie.tryLoc<=se&&se<=ie.finallyLoc&&(ie=null);var ge=ie?ie.completion:{};return ge.type=Q,ge.arg=se,ie?(this.method="next",this.next=ie.finallyLoc,b):this.complete(ge)},complete:function(Q,se){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&se&&(this.next=se),b},finish:function(Q){for(var se=this.tryEntries.length-1;se>=0;--se){var le=this.tryEntries[se];if(le.finallyLoc===Q)return this.complete(le.completion,le.afterLoc),Y(le),b}},catch:function(Q){for(var se=this.tryEntries.length-1;se>=0;--se){var le=this.tryEntries[se];if(le.tryLoc===Q){var de=le.completion;if(de.type==="throw"){var ie=de.arg;Y(le)}return ie}}throw Error("illegal catch attempt")},delegateYield:function(Q,se,le){return this.delegate={iterator:re(Q),resultName:se,nextLoc:le},this.method==="next"&&(this.arg=i),b}},e}function i7(i,e){return i7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},i7(i,e)}function Fo(i,e){return YYe(i)||nXe(i,e)||lde(i,e)||iXe()}function lXe(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=kS(i))!==null;);return i}function tF(i,e,t,n){var r=t7(kS(i.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function ds(i){return XYe(i)||tXe(i)||lde(i)||rXe()}function cXe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function ade(i){var e=cXe(i,"string");return typeof e=="symbol"?e:e+""}function lde(i,e){if(i){if(typeof i=="string")return e7(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?e7(i,e):void 0}}var cde=function(e){e instanceof Array?e.forEach(cde):(e.map&&e.map.dispose(),e.dispose())},RH=function(e){e.geometry&&e.geometry.dispose(),e.material&&cde(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(RH)},_s=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),RH(t)}};function gu(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[i][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[i],a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];var u=o[r].apply(o,l);return u===o?this:u}}}}var zs=100;function dJ(){return zs}function Ed(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=zs*(1+t),o=Math.sin(n);return{x:s*o*Math.cos(r),y:s*Math.cos(n),z:s*o*Math.sin(r)}}function ude(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),altitude:r/zs-1}}function Fv(i){return i*Math.PI/180}var JM=window.THREE?window.THREE:{BackSide:Bs,BufferAttribute:qi,Color:Qt,Mesh:zi,ShaderMaterial:jl},uXe=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,fXe=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function hXe(i,e,t,n){return new JM.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:uXe,fragmentShader:fXe,uniforms:{coefficient:{value:i},color:{value:new JM.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function dXe(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var o=i.attributes.normal.array[r],a=i.attributes.position.array[r];n[r]=a+o*e}return t.setAttribute("position",new JM.BufferAttribute(n,3)),t}var pXe=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.color,o=s===void 0?"gold":s,a=r.size,l=a===void 0?2:a,c=r.coefficient,u=c===void 0?.5:c,f=r.power,h=f===void 0?1:f,p=r.hollowRadius,m=p===void 0?0:p,g=r.backside,b=g===void 0?!0:g;MN(this,e),n=wN(this,e);var T=dXe(t,l),C=hXe(u,o,h,m);return b&&(C.side=JM.BackSide),n.geometry=T,n.material=C,n}return RN(e,i),CN(e)}(JM.Mesh),C0=window.THREE?window.THREE:{Color:Qt,Group:da,LineBasicMaterial:xa,LineSegments:dh,Mesh:zi,MeshPhongMaterial:ix,SphereGeometry:Ah,SRGBColorSpace:kn,TextureLoader:mg},fde=il({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){_s(e.globeObj),_s(e.tileEngine),_s(e.graticulesObj)}},stateInit:function(){var e=new C0.SphereGeometry(zs,75,75),t=new C0.MeshPhongMaterial({color:0}),n=new C0.Mesh(e,t);n.rotation.y=-Math.PI/2;var r=new cUe(zs),s=new C0.Group;s.__globeObjType="globe",s.add(n),s.add(r);var o=new C0.LineSegments(new rle(MFe(),zs,2),new C0.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:s,globeObj:n,graticulesObj:o,defaultGlobeMaterial:t,tileEngine:r}},init:function(e,t){_s(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new C0.TextureLoader().load(e.globeImageUrl,function(s){s.colorSpace=C0.SRGBColorSpace,n.map=s,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new C0.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new C0.TextureLoader().load(e.bumpImageUrl,function(s){n.bumpMap=s,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),_s(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var r=e.atmosphereObj=new pXe(e.globeObj.geometry,{color:e.atmosphereColor,size:zs*e.atmosphereAltitude,hollowRadius:zs,coefficient:.1,power:3.5});r.visible=!!e.showAtmosphere,r.__globeObjType="atmosphere",e.scene.add(r)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),SA=function(e){return isNaN(e)?parseInt(Qn(e).toHex(),16):e},Dp=function(e){return e&&isNaN(e)?jx(e).opacity:1},s1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,o=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(o){var a=o.slice(1),l=Fo(a,4),c=l[0],u=l[1],f=l[2],h=l[3];r=new Qt("rgb(".concat(+c,",").concat(+u,",").concat(+f,")")),s=Math.min(+h,1)}else r=new Qt(e);n&&r.convertLinearToSRGB();var p=r.toArray();return t?[].concat(ds(p),[s]):p};function AXe(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var pJ=window.THREE?window.THREE:{BufferAttribute:qi};function TA(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new pJ.BufferAttribute(new t(i),e);for(var n=new pJ.BufferAttribute(new t(i.length*e),e),r=0,s=i.length;r<s;r++)n.set(i[r],r*e);return n}function mXe(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}var nF=new WeakMap,w4=new WeakMap,M4=new WeakMap,vf=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,o=s===void 0?"__data":s,a=r.objBindAttr,l=a===void 0?"__threeObj":a,c=r.removeDelay,u=c===void 0?0:c;return MN(this,e),n=wN(this,e),Cl(n,"scene",void 0),JO(n,nF,void 0),JO(n,w4,void 0),JO(n,M4,void 0),n.scene=t,eF(nF,n,o),eF(w4,n,l),eF(M4,n,u),n.onRemoveObj(function(){}),n}return RN(e,i),CN(e,[{key:"onCreateObj",value:function(n){var r=this;return tF(e,"onCreateObj",this)([function(s){var o=n(s);return s[rw(w4,r)]=o,o[rw(nF,r)]=s,r.scene.add(o),o}]),this}},{key:"onRemoveObj",value:function(n){var r=this;return tF(e,"onRemoveObj",this)([function(s,o){var a=tF(e,"getData",r)([s]);n(s,o);var l=function(){r.scene.remove(s),_s(s),delete a[rw(w4,r)]};rw(M4,r)?setTimeout(l,rw(M4,r)):l()}]),this}}])}(Uke),yp=window.THREE?window.THREE:{BufferGeometry:qn,CylinderGeometry:lb,Matrix4:rn,Mesh:zi,MeshLambertMaterial:Pd,Object3D:Vi,Vector3:he},AJ=Object.assign({},rz),mJ=AJ.BufferGeometryUtils||AJ,hde=il({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=Kt(e.pointLat),r=Kt(e.pointLng),s=Kt(e.pointAltitude),o=Kt(e.pointRadius),a=Kt(e.pointColor),l=new yp.CylinderGeometry(1,1,1,e.pointResolution);l.applyMatrix4(new yp.Matrix4().makeRotationX(Math.PI/2)),l.applyMatrix4(new yp.Matrix4().makeTranslation(0,0,-.5));var c=2*Math.PI*zs/360,u={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&_s(e.scene),e.dataMapper.scene=e.pointsMerge?new yp.Object3D:e.scene,e.dataMapper.onCreateObj(p).onUpdateObj(m).digest(e.pointsData),e.pointsMerge){var f=e.pointsData.length?(mJ.mergeGeometries||mJ.mergeBufferGeometries)(e.pointsData.map(function(g){var b=e.dataMapper.getObj(g),T=b.geometry.clone();b.updateMatrix(),T.applyMatrix4(b.matrix);var C=s1(a(g));return T.setAttribute("color",TA(Array(T.getAttribute("position").count).fill(C),4)),T})):new yp.BufferGeometry,h=new yp.Mesh(f,new yp.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));h.__globeObjType="points",h.__data=e.pointsData,e.dataMapper.clear(),_s(e.scene),e.scene.add(h)}function p(){var g=new yp.Mesh(l);return g.__globeObjType="point",g}function m(g,b){var T=function(q){var H=g.__currentTargetD=q,O=H.r,$=H.alt,ee=H.lat,Y=H.lng;Object.assign(g.position,Ed(ee,Y));var oe=e.pointsMerge?new yp.Vector3(0,0,0):e.scene.localToWorld(new yp.Vector3(0,0,0));g.lookAt(oe),g.scale.x=g.scale.y=Math.min(30,O)*c,g.scale.z=Math.max($*zs,.1)},C={alt:+s(b),r:+o(b),lat:+n(b),lng:+r(b)},R=g.__currentTargetD||Object.assign({},C,{alt:-.001});if(Object.keys(C).some(function(k){return R[k]!==C[k]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?T(C):e.tweenGroup.add(new wc(R).to(C,e.pointsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(T).start())),!e.pointsMerge){var P=a(b),I=P?Dp(P):0,F=!!I;g.visible=F,F&&(u.hasOwnProperty(P)||(u[P]=new yp.MeshLambertMaterial({color:SA(P),transparent:I<1,opacity:I})),g.material=u[P])}}}}),dde=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
    }
  `}},r7=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},gXe=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},DH=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},yXe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r){return r};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(r){n(r),t(r.uniforms)}}},vXe=["stroke"],vp=window.THREE?window.THREE:{BufferGeometry:qn,CubicBezierCurve3:a9,Curve:ph,Group:da,Line:oh,Mesh:zi,NormalBlending:fu,ShaderMaterial:jl,TubeGeometry:b3,Vector3:he},xXe=PS.default||PS,pde=il({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new xXe,sharedMaterial:new vp.ShaderMaterial(ss(ss({},dde()),{},{transparent:!0,blending:vp.NormalBlending}))}},init:function(e,t){_s(e),t.scene=e,t.dataMapper=new vf(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new vp.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var o=Fo(s,2),a=o[1];return a}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],a=o.__dashAnimateStep*r,l=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=l+a})})},update:function(e){var t=Kt(e.arcStartLat),n=Kt(e.arcStartLng),r=Kt(e.arcEndLat),s=Kt(e.arcEndLng),o=Kt(e.arcAltitude),a=Kt(e.arcAltitudeAutoScale),l=Kt(e.arcStroke),c=Kt(e.arcColor),u=Kt(e.arcDashLength),f=Kt(e.arcDashGap),h=Kt(e.arcDashInitialGap),p=Kt(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(T,C){var R=l(C),P=R!=null;if(!T.children.length||P!==(T.children[0].type==="Mesh")){_s(T);var I=P?new vp.Mesh:new vp.Line(new vp.BufferGeometry);I.material=e.sharedMaterial.clone(),T.add(I)}var F=T.children[0];Object.assign(F.material.uniforms,{dashSize:{value:u(C)},gapSize:{value:f(C)},dashOffset:{value:h(C)}});var k=p(C);F.__dashAnimateStep=k>0?1e3/k:0;var q=g(c(C),e.arcCurveResolution,P?e.arcCircularResolution+1:1),H=b(e.arcCurveResolution,P?e.arcCircularResolution+1:1,!0);F.geometry.setAttribute("color",q),F.geometry.setAttribute("relDistance",H);var O=function(oe){var re=T.__currentTargetD=oe,Q=re.stroke,se=sXe(re,vXe),le=m(se);P?(F.geometry&&F.geometry.dispose(),F.geometry=new vp.TubeGeometry(le,e.arcCurveResolution,Q/2,e.arcCircularResolution),F.geometry.setAttribute("color",q),F.geometry.setAttribute("relDistance",H)):F.geometry.setFromPoints(le.getPoints(e.arcCurveResolution))},$={stroke:R,alt:o(C),altAutoScale:+a(C),startLat:+t(C),startLng:+n(C),endLat:+r(C),endLng:+s(C)},ee=T.__currentTargetD||Object.assign({},$,{altAutoScale:-.001});Object.keys($).some(function(Y){return ee[Y]!==$[Y]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?O($):e.tweenGroup.add(new wc(ee).to($,e.arcsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(O).start()))}).digest(e.arcsData);function m(T){var C=T.alt,R=T.altAutoScale,P=T.startLat,I=T.startLng,F=T.endLat,k=T.endLng,q=function(ge){var Ce=Fo(ge,3),Ie=Ce[0],Ee=Ce[1],Be=Ce[2],qe=Ed(Ee,Ie,Be),it=qe.x,et=qe.y,Ht=qe.z;return new vp.Vector3(it,et,Ht)},H=[I,P],O=[k,F],$=C;if($==null&&($=i1(H,O)/2*R),$){var ee=JG(H,O),Y=[.25,.75].map(function(ie){return[].concat(ds(ee(ie)),[$*1.5])}),oe=Fo(Y,2),re=oe[0],Q=oe[1],se=MH(vp.CubicBezierCurve3,ds([H,re,Q,O].map(q)));return se}else{var le=.001;return de.apply(void 0,ds([[].concat(H,[le]),[].concat(O,[le])].map(q)))}function de(ie,ge){var Ce=ie.angleTo(ge),Ie=Ce===0?function(){return ie.clone()}:function(Be){return new vp.Vector3().addVectors(ie.clone().multiplyScalar(Math.sin((1-Be)*Ce)),ge.clone().multiplyScalar(Math.sin(Be*Ce))).divideScalar(Math.sin(Ce))},Ee=new vp.Curve;return Ee.getPoint=Ie,Ee}}function g(T,C){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=C+1,I;if(T instanceof Array||T instanceof Function){var F=T instanceof Array?og().domain(T.map(function(Y,oe){return oe/(T.length-1)})).range(T):T;I=function(oe){return s1(F(oe),!0,!0)}}else{var k=s1(T,!0,!0);I=function(){return k}}for(var q=[],H=0,O=P;H<O;H++)for(var $=I(H/(O-1)),ee=0;ee<R;ee++)q.push($);return TA(q,4)}function b(T){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=T+1,I=[],F=0,k=P;F<k;F++)for(var q=F/(k-1),H=0;H<C;H++)I.push(q);return R&&I.reverse(),TA(I,1)}}}),xy=window.THREE?window.THREE:{BufferGeometry:qn,DoubleSide:Do,Mesh:zi,MeshLambertMaterial:Pd,Object3D:Vi},gJ=Object.assign({},rz),yJ=gJ.BufferGeometryUtils||gJ,Ade=il({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=Kt(e.hexBinPointLat),r=Kt(e.hexBinPointLng),s=Kt(e.hexBinPointWeight),o=Kt(e.hexAltitude),a=Kt(e.hexTopColor),l=Kt(e.hexSideColor),c=Kt(e.hexMargin),u=o9e(e.hexBinPointsData.map(function(C){return ss(ss({},C),{},{h3Idx:z9e(n(C),r(C),e.hexBinResolution)})}),"h3Idx"),f=Object.entries(u).map(function(C){var R=Fo(C,2),P=R[0],I=R[1];return{h3Idx:P,points:I,sumWeight:I.reduce(function(F,k){return F+ +s(k)},0)}}),h={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&_s(e.scene),e.dataMapper.scene=e.hexBinMerge?new xy.Object3D:e.scene,e.dataMapper.id(function(C){return C.h3Idx}).onCreateObj(b).onUpdateObj(T).digest(f),e.hexBinMerge){var p=f.length?(yJ.mergeGeometries||yJ.mergeBufferGeometries)(f.map(function(C){var R=e.dataMapper.getObj(C),P=R.geometry.toNonIndexed();R.updateMatrix(),P.applyMatrix4(R.matrix);var I=s1(a(C)),F=s1(l(C)),k=P.getAttribute("position").count,q=P.groups[0].count;return P.setAttribute("color",TA(ds(new Array(k)).map(function(H,O){return O>=q?I:F}),4)),P})):new xy.BufferGeometry,m=new xy.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:xy.DoubleSide});m.onBeforeCompile=function(C){m.userData.shader=r7(C)};var g=new xy.Mesh(p,m);g.__globeObjType="hexBinPoints",g.__data=f,e.dataMapper.clear(),_s(e.scene),e.scene.add(g)}function b(C){var R=new xy.Mesh;R.__hexCenter=Sle(C.h3Idx),R.__hexGeoJson=Tle(C.h3Idx,!0).reverse();var P=R.__hexCenter[1];return R.__hexGeoJson.forEach(function(I){var F=I[0];Math.abs(P-F)>170&&(I[0]+=P>F?360:-360)}),R.__globeObjType="hexbin",R}function T(C,R){var P=function(se,le,de){return se-(se-le)*de},I=Math.max(0,Math.min(1,+c(R))),F=Fo(C.__hexCenter,2),k=F[0],q=F[1],H=I===0?C.__hexGeoJson:C.__hexGeoJson.map(function(Q){var se=Fo(Q,2),le=se[0],de=se[1];return[[le,q],[de,k]].map(function(ie){var ge=Fo(ie,2),Ce=ge[0],Ie=ge[1];return P(Ce,Ie,I)})}),O=e.hexTopCurvatureResolution;C.geometry&&C.geometry.dispose(),C.geometry=new cz([H],0,zs,!1,!0,!0,O);var $={alt:+o(R)},ee=function(se){var le=C.__currentTargetD=se,de=le.alt;C.scale.x=C.scale.y=C.scale.z=1+de;var ie=zs/(de+1);C.geometry.setAttribute("surfaceRadius",TA(Array(C.geometry.getAttribute("position").count).fill(ie),1))},Y=C.__currentTargetD||Object.assign({},$,{alt:-.001});if(Object.keys($).some(function(Q){return Y[Q]!==$[Q]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?ee($):e.tweenGroup.add(new wc(Y).to($,e.hexTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(ee).start())),!e.hexBinMerge){var oe=l(R),re=a(R);[oe,re].forEach(function(Q){if(!h.hasOwnProperty(Q)){var se=Dp(Q);h[Q]=DH(new xy.MeshLambertMaterial({color:SA(Q),transparent:se<1,opacity:se,side:xy.DoubleSide}),r7)}}),C.material=[oe,re].map(function(Q){return h[Q]})}}}}),sw=function(e){return e*Math.PI/180},bXe=function(){var i=ZYe(n7().mark(function e(t){var n,r,s,o,a,l,c,u,f,h,p,m,g,b,T,C,R,P,I,F,k,q,H,O,$,ee,Y,oe,re,Q,se,le,de,ie,ge,Ce,Ie,Ee,Be,qe=arguments;return n7().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return n=qe.length>1&&qe[1]!==void 0?qe[1]:[],r=qe.length>2&&qe[2]!==void 0?qe[2]:{},s=r.lngAccessor,o=s===void 0?function(Ht){return Ht[0]}:s,a=r.latAccessor,l=a===void 0?function(Ht){return Ht[1]}:a,c=r.weightAccessor,u=c===void 0?function(){return 1}:c,f=r.bandwidth,h=4,p=RYe,m=DYe,g=zYe,b=GYe,T=IYe,C=OYe,R=LYe,P=kYe,I=UYe,F=NYe,k=PYe,q=BYe,H=FYe,O=b(new SD(new Float32Array(t.flat().map(sw)),2),"vec2",t.length),$=b(new SD(new Float32Array(n.map(function(Ht){return[sw(o(Ht)),sw(l(Ht)),u(Ht)]}).flat()),3),"vec3",n.length),ee=new SD(t.length,1),Y=b(ee,"float",t.length),oe=T(Math.PI),re=P(oe.mul(2)),Q=function(_t){return _t.mul(_t)},se=function(_t){return Q(I(_t.div(2)))},le=function(_t,$t){var mt=T(_t[1]),ut=T($t[1]),we=T(_t[0]),Jt=T($t[0]);return T(2).mul(k(P(se(ut.sub(mt)).add(F(mt).mul(F(ut)).mul(se(Jt.sub(we)))))))},de=function(_t,$t){return q(H(Q(_t.div($t)).div(2))).div($t.mul(re))},ie=g(sw(f)),ge=g(sw(f*h)),Ce=g(n.length),Ie=p(function(){var Ht=O.element(C),_t=Y.element(C);_t.assign(0),R(Ce,function($t){var mt=$t.i,ut=$.element(mt),we=ut.z;m(we,function(){var Jt=le(ut.xy,Ht.xy);m(Jt&&Jt.lessThan(ge),function(){_t.addAssign(de(Jt,ie).mul(we))})})})}),Ee=Ie().compute(t.length),Be=new ide,et.next=22,Be.computeAsync(Ee);case 22:return et.t0=Array,et.t1=Float32Array,et.next=26,Be.getArrayBufferAsync(ee);case 26:return et.t2=et.sent,et.t3=new et.t1(et.t2),et.abrupt("return",et.t0.from.call(et.t0,et.t3));case 29:case"end":return et.stop()}},e)}));return function(t){return i.apply(this,arguments)}}(),C4=window.THREE?window.THREE:{Mesh:zi,MeshLambertMaterial:Pd,SphereGeometry:Ah},_Xe=3.5,SXe=.1,vJ=100,TXe=function(e){var t=jx(V9e(e));return t.opacity=Math.cbrt(e),t.formatRgb()},mde=il({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return TXe}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new C4.Mesh(new C4.SphereGeometry(zs),DH(new C4.MeshLambertMaterial({vertexColors:!0,transparent:!0}),gXe));return s.__globeObjType="heatmap",s})},update:function(e){var t=Kt(e.heatmapPoints),n=Kt(e.heatmapPointLat),r=Kt(e.heatmapPointLng),s=Kt(e.heatmapPointWeight),o=Kt(e.heatmapBandwidth),a=Kt(e.heatmapColorFn),l=Kt(e.heatmapColorSaturation),c=Kt(e.heatmapBaseAltitude),u=Kt(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(f,h){var p=o(h),m=a(h),g=l(h),b=c(h),T=u(h),C=t(h).map(function(k){var q=n(k),H=r(k),O=Ed(q,H),$=O.x,ee=O.y,Y=O.z;return{x:$,y:ee,z:Y,lat:q,lng:H,weight:s(k)}}),R=Math.max(SXe,p/_Xe),P=Math.ceil(360/(R||-1));f.geometry.parameters.widthSegments!==P&&(f.geometry.dispose(),f.geometry=new C4.SphereGeometry(zs,P,P/2));var I=mXe(f.geometry.getAttribute("position")),F=I.map(function(k){var q=Fo(k,3),H=q[0],O=q[1],$=q[2],ee=ude({x:H,y:O,z:$}),Y=ee.lng,oe=ee.lat;return[Y,oe]});bXe(F,C,{latAccessor:function(q){return q.lat},lngAccessor:function(q){return q.lng},weightAccessor:function(q){return q.weight},bandwidth:p}).then(function(k){var q=ds(new Array(vJ)).map(function(ee,Y){return s1(m(Y/(vJ-1)))}),H=function(Y){var oe=f.__currentTargetD=Y,re=oe.kdeVals,Q=oe.topAlt,se=oe.saturation,le=tOe(re.map(Math.abs))||1e-15,de=Tae([0,le/se],q);f.geometry.setAttribute("color",TA(re.map(function(ge){return de(Math.abs(ge))}),4));var ie=og([0,le],[zs*(1+b),zs*(1+(Q||b))]);f.geometry.setAttribute("r",TA(re.map(ie)))},O={kdeVals:k,topAlt:T,saturation:g},$=f.__currentTargetD||Object.assign({},O,{kdeVals:k.map(function(){return 0}),topAlt:T&&b,saturation:.5});$.kdeVals.length!==k.length&&($.kdeVals=k.slice()),Object.keys(O).some(function(ee){return $[ee]!==O[ee]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?H(O):e.tweenGroup.add(new wc($).to(O,e.heatmapsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(H).start()))})}).digest(e.heatmapsData)}}),by=window.THREE?window.THREE:{DoubleSide:Do,Group:da,LineBasicMaterial:xa,LineSegments:dh,Mesh:zi,MeshBasicMaterial:Tl},gde=il({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new by.Group;return s.__defaultSideMaterial=DH(new by.MeshBasicMaterial({side:by.DoubleSide,depthWrite:!0}),r7),s.__defaultCapMaterial=new by.MeshBasicMaterial({side:by.DoubleSide,depthWrite:!0}),s.add(new by.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new by.LineSegments(void 0,new by.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=Kt(e.polygonGeoJsonGeometry),n=Kt(e.polygonAltitude),r=Kt(e.polygonCapCurvatureResolution),s=Kt(e.polygonCapColor),o=Kt(e.polygonCapMaterial),a=Kt(e.polygonSideColor),l=Kt(e.polygonSideMaterial),c=Kt(e.polygonStrokeColor),u=[];e.polygonsData.forEach(function(f){var h={data:f,capColor:s(f),capMaterial:o(f),sideColor:a(f),sideMaterial:l(f),strokeColor:c(f),altitude:+n(f),capCurvatureResolution:+r(f)},p=t(f),m=f.__id||"".concat(Math.round(Math.random()*1e9));f.__id=m,p.type==="Polygon"?u.push(ss({id:"".concat(m,"_0"),coords:p.coordinates},h)):p.type==="MultiPolygon"?u.push.apply(u,ds(p.coordinates.map(function(g,b){return ss({id:"".concat(m,"_").concat(b),coords:g},h)}))):console.warn("Unsupported GeoJson geometry type: ".concat(p.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(f,h){var p=h.coords,m=h.capColor,g=h.capMaterial,b=h.sideColor,T=h.sideMaterial,C=h.strokeColor,R=h.altitude,P=h.capCurvatureResolution,I=Fo(f.children,2),F=I[0],k=I[1],q=!!C;if(k.visible=q,EXe(F.geometry.parameters||{},{polygonGeoJson:p,curvatureResolution:P})||(F.geometry&&F.geometry.dispose(),F.geometry=new cz(p,0,zs,!1,!0,!0,P)),q&&(!k.geometry.parameters||k.geometry.parameters.geoJson.coordinates!==p||k.geometry.parameters.resolution!==P)&&(k.geometry&&k.geometry.dispose(),k.geometry=new rle({type:"Polygon",coordinates:p},zs,P)),F.material[0]=T||f.__defaultSideMaterial,F.material[1]=g||f.__defaultCapMaterial,[!T&&b,!g&&m].forEach(function(oe,re){if(oe){var Q=F.material[re],se=Dp(oe);Q.color.set(SA(oe)),Q.transparent=se<1,Q.opacity=se}}),q){var H=k.material,O=Dp(C);H.color.set(SA(C)),H.transparent=O<1,H.opacity=O}var $={alt:R},ee=function(re){var Q=f.__currentTargetD=re,se=Q.alt;F.scale.x=F.scale.y=F.scale.z=1+se,q&&(k.scale.x=k.scale.y=k.scale.z=1+se+1e-4),yXe(f.__defaultSideMaterial,function(le){return le.surfaceRadius.value=zs/(se+1)})},Y=f.__currentTargetD||Object.assign({},$,{alt:-.001});Object.keys($).some(function(oe){return Y[oe]!==$[oe]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||Y.alt===$.alt?ee($):e.tweenGroup.add(new wc(Y).to($,e.polygonsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(ee).start()))}).digest(u)}});function EXe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=Fo(n,2),s=r[0],o=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],o)})}var X_=window.THREE?window.THREE:{BufferGeometry:qn,DoubleSide:Do,Mesh:zi,MeshLambertMaterial:Pd,Vector3:he},xJ=Object.assign({},rz),bJ=xJ.BufferGeometryUtils||xJ,yde=il({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new X_.Mesh(void 0,new X_.MeshLambertMaterial({side:X_.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=Kt(e.hexPolygonGeoJsonGeometry),n=Kt(e.hexPolygonColor),r=Kt(e.hexPolygonAltitude),s=Kt(e.hexPolygonResolution),o=Kt(e.hexPolygonMargin),a=Kt(e.hexPolygonUseDots),l=Kt(e.hexPolygonCurvatureResolution),c=Kt(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(u,f){var h=t(f),p=s(f),m=r(f),g=Math.max(0,Math.min(1,+o(f))),b=a(f),T=l(f),C=c(f),R=n(f),P=Dp(R);u.material.color.set(SA(R)),u.material.transparent=P<1,u.material.opacity=P;var I={alt:m,margin:g,curvatureResolution:T},F={geoJson:h,h3Res:p},k=u.__currentTargetD||Object.assign({},I,{alt:-.001}),q=u.__currentMemD||F;if(Object.keys(I).some(function(ee){return k[ee]!==I[ee]})||Object.keys(F).some(function(ee){return q[ee]!==F[ee]})){u.__currentMemD=F;var H=[];h.type==="Polygon"?KQ(h.coordinates,p,!0).forEach(function(ee){return H.push(ee)}):h.type==="MultiPolygon"?h.coordinates.forEach(function(ee){return KQ(ee,p,!0).forEach(function(Y){return H.push(Y)})}):console.warn("Unsupported GeoJson geometry type: ".concat(h.type,". Skipping geometry..."));var O=H.map(function(ee){var Y=Sle(ee),oe=Tle(ee,!0).reverse(),re=Y[1];return oe.forEach(function(Q){var se=Q[0];Math.abs(re-se)>170&&(Q[0]+=re>se?360:-360)}),{h3Idx:ee,hexCenter:Y,hexGeoJson:oe}}),$=function(Y){var oe=u.__currentTargetD=Y,re=oe.alt,Q=oe.margin,se=oe.curvatureResolution;u.geometry&&u.geometry.dispose(),u.geometry=O.length?(bJ.mergeGeometries||bJ.mergeBufferGeometries)(O.map(function(le){var de=Fo(le.hexCenter,2),ie=de[0],ge=de[1];if(b){var Ce=Ed(ie,ge,re),Ie=Ed(le.hexGeoJson[0][1],le.hexGeoJson[0][0],re),Ee=.85*(1-Q)*new X_.Vector3(Ce.x,Ce.y,Ce.z).distanceTo(new X_.Vector3(Ie.x,Ie.y,Ie.z)),Be=new nT(Ee,C);return Be.rotateX(Fv(-ie)),Be.rotateY(Fv(ge)),Be.translate(Ce.x,Ce.y,Ce.z),Be}else{var qe=function(Ht,_t,$t){return Ht-(Ht-_t)*$t},it=Q===0?le.hexGeoJson:le.hexGeoJson.map(function(et){var Ht=Fo(et,2),_t=Ht[0],$t=Ht[1];return[[_t,ge],[$t,ie]].map(function(mt){var ut=Fo(mt,2),we=ut[0],Jt=ut[1];return qe(we,Jt,Q)})});return new cz([it],zs,zs*(1+re),!1,!0,!1,se)}})):new X_.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?$(I):e.tweenGroup.add(new wc(k).to(I,e.hexPolygonsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate($).start())}}).digest(e.hexPolygonsData)}}),wXe=window.THREE?window.THREE:{Vector3:he};function MXe(i,e){var t=function(o,a){var l=o[o.length-1];return[].concat(ds(o),ds(Array(a-o.length).fill(l)))},n=Math.max(i.length,e.length),r=vOe.apply(void 0,ds([i,e].map(function(s){return s.map(function(o){var a=o.x,l=o.y,c=o.z;return[a,l,c]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(o){var a=Fo(o,3),l=a[0],c=a[1],u=a[2];return new wXe.Vector3(l,c,u)})}}var bv=window.THREE?window.THREE:{BufferGeometry:qn,Color:Qt,Group:da,Line:oh,NormalBlending:fu,ShaderMaterial:jl,Vector3:he},CXe=PS.default||PS,vde=il({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new CXe,sharedMaterial:new bv.ShaderMaterial(ss(ss({},dde()),{},{transparent:!0,blending:bv.NormalBlending}))}},init:function(e,t){_s(e),t.scene=e,t.dataMapper=new vf(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new bv.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var o=Fo(s,2),a=o[1];return a}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],a=o.__dashAnimateStep*r;if(o.type==="Line"){var l=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=l+a}else if(o.type==="Line2"){for(var c=o.material.dashOffset-a,u=o.material.dashSize+o.material.gapSize;c<=-u;)c+=u;o.material.dashOffset=c}})})},update:function(e){var t=Kt(e.pathPoints),n=Kt(e.pathPointLat),r=Kt(e.pathPointLng),s=Kt(e.pathPointAlt),o=Kt(e.pathStroke),a=Kt(e.pathColor),l=Kt(e.pathDashLength),c=Kt(e.pathDashGap),u=Kt(e.pathDashInitialGap),f=Kt(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(b,T){var C=o(T),R=C!=null;if(!b.children.length||R===(b.children[0].type==="Line")){_s(b);var P=R?new $Ye(new sde,new wH):new bv.Line(new bv.BufferGeometry,e.sharedMaterial.clone());b.add(P)}var I=b.children[0],F=p(t(T),n,r,s,e.pathResolution),k=f(T);if(I.__dashAnimateStep=k>0?1e3/k:0,R){I.material.resolution=e.rendererSize;{var O=l(T),$=c(T),ee=u(T);I.material.dashed=$>0,I.material.dashed?I.material.defines.USE_DASH="":delete I.material.defines.USE_DASH,I.material.dashed&&(I.material.dashScale=1/h(F),I.material.dashSize=O,I.material.gapSize=$,I.material.dashOffset=-ee)}{var Y=a(T);if(Y instanceof Array){var oe=m(a(T),F.length-1,1,!1);I.geometry.setColors(oe.array),I.material.vertexColors=!0}else{var re=Y,Q=Dp(re);I.material.color=new bv.Color(SA(re)),I.material.transparent=Q<1,I.material.opacity=Q,I.material.vertexColors=!1}}I.material.needsUpdate=!0}else{Object.assign(I.material.uniforms,{dashSize:{value:l(T)},gapSize:{value:c(T)},dashOffset:{value:u(T)}});var q=m(a(T),F.length),H=g(F.length,1,!0);I.geometry.setAttribute("color",q),I.geometry.setAttribute("relDistance",H)}var se=MXe(b.__currentTargetD&&b.__currentTargetD.points||[F[0]],F),le=function(Ce){var Ie=b.__currentTargetD=Ce,Ee=Ie.stroke,Be=Ie.interpolK,qe=b.__currentTargetD.points=se(Be);if(R){var it;I.geometry.setPositions((it=[]).concat.apply(it,ds(qe.map(function(et){var Ht=et.x,_t=et.y,$t=et.z;return[Ht,_t,$t]})))),I.material.linewidth=Ee,I.material.dashed&&I.computeLineDistances()}else I.geometry.setFromPoints(qe),I.geometry.computeBoundingSphere()},de={stroke:C,interpolK:1},ie=Object.assign({},b.__currentTargetD||de,{interpolK:0});Object.keys(de).some(function(ge){return ie[ge]!==de[ge]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?le(de):e.tweenGroup.add(new wc(ie).to(de,e.pathTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(le).start()))}).digest(e.pathsData);function h(b){var T=0,C;return b.forEach(function(R){C&&(T+=C.distanceTo(R)),C=R}),T}function p(b,T,C,R,P){var I=function(H,O,$){for(var ee=[],Y=1;Y<=$;Y++)ee.push(H+(O-H)*Y/($+1));return ee},F=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,$=[],ee=null;return H.forEach(function(Y){if(ee){for(;Math.abs(ee[1]-Y[1])>180;)ee[1]+=360*(ee[1]<Y[1]?1:-1);var oe=Math.sqrt(Math.pow(Y[0]-ee[0],2)+Math.pow(Y[1]-ee[1],2));if(oe>O)for(var re=Math.floor(oe/O),Q=I(ee[0],Y[0],re),se=I(ee[1],Y[1],re),le=I(ee[2],Y[2],re),de=0,ie=Q.length;de<ie;de++)$.push([Q[de],se[de],le[de]])}$.push(ee=Y)}),$},k=function(H){var O=Fo(H,3),$=O[0],ee=O[1],Y=O[2],oe=Ed($,ee,Y),re=oe.x,Q=oe.y,se=oe.z;return new bv.Vector3(re,Q,se)};return F(b.map(function(q){return[T(q),C(q),R(q)]}),P).map(k)}function m(b,T){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,P=T+1,I;if(b instanceof Array||b instanceof Function){var F=b instanceof Array?og().domain(b.map(function(Y,oe){return oe/(b.length-1)})).range(b):b;I=function(oe){return s1(F(oe),R,!0)}}else{var k=s1(b,R,!0);I=function(){return k}}for(var q=[],H=0,O=P;H<O;H++)for(var $=I(H/(O-1)),ee=0;ee<C;ee++)q.push($);return TA(q,R?4:3)}function g(b){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=b+1,P=[],I=0,F=R;I<F;I++)for(var k=I/(F-1),q=0;q<T;q++)P.push(k);return C&&P.reverse(),TA(P,1)}}}),R4=window.THREE?window.THREE:{Euler:Io,Mesh:zi,MeshLambertMaterial:Pd,SphereGeometry:Ah},xde=il({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new R4.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new R4.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=Kt(e.tileLat),n=Kt(e.tileLng),r=Kt(e.tileAltitude),s=Kt(e.tileWidth),o=Kt(e.tileHeight),a=Kt(e.tileUseGlobeProjection),l=Kt(e.tileMaterial),c=Kt(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(u,f){u.material=l(f);var h=a(f),p=c(f),m=function(C){var R=u.__currentTargetD=C,P=R.lat,I=R.lng,F=R.alt,k=R.width,q=R.height,H=Q_(I),O=Q_(-P);u.geometry&&u.geometry.dispose(),u.geometry=new R4.SphereGeometry(zs*(1+F),Math.ceil(k/(p||-1)),Math.ceil(q/(p||-1)),Q_(90-k/2)+(h?H:0),Q_(k),Q_(90-q/2)+(h?O:0),Q_(q)),h||u.setRotationFromEuler(new R4.Euler(O,H,0,"YXZ"))},g={lat:+t(f),lng:+n(f),alt:+r(f),width:+s(f),height:+o(f)},b=u.__currentTargetD||Object.assign({},g,{width:0,height:0});Object.keys(g).some(function(T){return b[T]!==g[T]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?m(g):e.tweenGroup.add(new wc(b).to(g,e.tilesTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(m).start()))}).digest(e.tilesData)}}),Q_=function(e){return e*Math.PI/180},ow=window.THREE?window.THREE:{BufferGeometry:qn,Color:Qt,Points:vP,PointsMaterial:tT},bde=il({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){_s(e),t.scene=e,t.dataMapper=new vf(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new ow.Points(new ow.BufferGeometry,new ow.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,r){var s=Kt(t.particlesList),o=Kt(t.particleLat),a=Kt(t.particleLng),l=Kt(t.particleAltitude);n.geometry.setAttribute("position",TA(s(r).map(function(c){return Object.values(Ed(o(c),a(c),l(c)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(a){return t.hasOwnProperty(a)})&&e.dataMapper.digest(e.particlesData);var n=Kt(e.particlesColor),r=Kt(e.particlesSize),s=Kt(e.particlesSizeAttenuation),o=Kt(e.particlesTexture);e.dataMapper.entries().forEach(function(a){var l=Fo(a,2),c=l[0],u=l[1];if(u.material.size=r(c),u.material.sizeAttenuation=s(c),e.particlesTexture)u.material.color=new ow.Color(16777215),u.material.transparent=!1,u.material.alphaTest=.5,u.material.map=o(c);else{var f=n(c),h=Dp(f);u.material.color=new ow.Color(SA(f)),u.material.transparent=h<1,u.material.opacity=h,u.material.alphaTest=0}})}}),RXe=window.THREE?window.THREE:{BufferGeometry:qn},DXe=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;MN(this,e),t=wN(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],o=0;o<=r;o++){var a=(o/r-.25)*Math.PI*2;s.push({x:Math.cos(a)*n,y:Math.sin(a)*n,z:0})}return t.setFromPoints(s),t}return RN(e,i),CN(e)}(RXe.BufferGeometry),Z_=window.THREE?window.THREE:{Color:Qt,Group:da,Line:oh,LineBasicMaterial:xa,Vector3:he},LXe=PS.default||PS,_de=il({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new Z_.Group;return s.__globeObjType="ring",s}),t.ticker=new LXe,t.ticker.onTick.add(function(s){if(t.ringsData.length){var o=Kt(t.ringColor),a=Kt(t.ringAltitude),l=Kt(t.ringMaxRadius),c=Kt(t.ringPropagationSpeed),u=Kt(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(f){var h=Fo(f,2),p=h[1];return p}).forEach(function(f){var h=Fo(f,2),p=h[0],m=h[1];if((m.__nextRingTime||0)<=s){var g=u(p)/1e3;m.__nextRingTime=s+(g<=0?1/0:g);var b=new Z_.Line(new DXe(1,t.ringResolution),new Z_.LineBasicMaterial),T=o(p),C=T instanceof Array||T instanceof Function,R;C?T instanceof Array?(R=og().domain(T.map(function($,ee){return ee/(T.length-1)})).range(T),b.material.transparent=T.some(function($){return Dp($)<1})):(R=T,b.material.transparent=!0):(b.material.color=new Z_.Color(SA(T)),AXe(b.material,Dp(T)));var P=zs*(1+a(p)),I=l(p),F=I*Math.PI/180,k=c(p),q=k<=0,H=function(ee){var Y=ee.t,oe=(q?1-Y:Y)*F;if(b.scale.x=b.scale.y=P*Math.sin(oe),b.position.z=P*(1-Math.cos(oe)),C){var re=R(Y);b.material.color=new Z_.Color(SA(re)),b.material.transparent&&(b.material.opacity=Dp(re))}};if(k===0)H({t:0}),m.add(b);else{var O=Math.abs(I/k)*1e3;t.tweenGroup.add(new wc({t:0}).to({t:1},O).onUpdate(H).onStart(function(){return m.add(b)}).onComplete(function(){m.remove(b),RH(b)}).start())}}})}})},update:function(e){var t=Kt(e.ringLat),n=Kt(e.ringLng),r=Kt(e.ringAltitude),s=e.scene.localToWorld(new Z_.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(o,a){var l=t(a),c=n(a),u=r(a);Object.assign(o.position,Ed(l,c,u)),o.lookAt(s)}).digest(e.ringsData)}}),PXe={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"":{x_min:0,x_max:0,ha:853},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},NXe="normal",BXe=1189,IXe=-100,OXe="normal",FXe={yMin:-334,xMin:-111,yMax:1189,xMax:1672},UXe=1e3,kXe={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) agenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"agenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"agenta ltd",font_sub_family_name:"Regular"},GXe=-334,zXe="Helvetiker",HXe=1522,VXe=50,qXe={glyphs:PXe,cssFontWeight:NXe,ascender:BXe,underlinePosition:IXe,cssFontStyle:OXe,boundingBox:FXe,resolution:UXe,original_font_information:kXe,descender:GXe,familyName:zXe,lineHeight:HXe,underlineThickness:VXe},xp=ss(ss({},window.THREE?window.THREE:{BoxGeometry:MA,CircleGeometry:nT,DoubleSide:Do,Group:da,Mesh:zi,MeshLambertMaterial:Pd,TextGeometry:uJ,Vector3:he}),{},{Font:jYe,TextGeometry:uJ}),Sde=il({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:0},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:qXe,onChange:function(e,t){t.font=new xp.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r;var s=new xp.CircleGeometry(1,32);t.dataMapper=new vf(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var o=new xp.MeshLambertMaterial;o.side=Do;var a=new xp.Group;a.add(new xp.Mesh(s,o));var l=new xp.Mesh(void 0,o);a.add(l);var c=new xp.Mesh;return c.visible=!1,l.add(c),a.__globeObjType="label",a})},update:function(e){var t=Kt(e.labelLat),n=Kt(e.labelLng),r=Kt(e.labelAltitude),s=Kt(e.labelText),o=Kt(e.labelSize),a=Kt(e.labelRotation),l=Kt(e.labelColor),c=Kt(e.labelIncludeDot),u=Kt(e.labelDotRadius),f=Kt(e.labelDotOrientation),h=new Set(["right","top","bottom"]),p=2*Math.PI*zs/360;e.dataMapper.onUpdateObj(function(m,g){var b=Fo(m.children,2),T=b[0],C=b[1],R=Fo(C.children,1),P=R[0],I=l(g),F=Dp(I);C.material.color.set(SA(I)),C.material.transparent=F<1,C.material.opacity=F;var k=c(g),q=f(g);!k||!h.has(q)&&(q="bottom");var H=k?+u(g)*p:1e-12;T.scale.x=T.scale.y=H;var O=+o(g)*p;if(C.geometry&&C.geometry.dispose(),C.geometry=new xp.TextGeometry(s(g),{font:e.font,size:O,depth:0,height:0,curveSegments:e.labelResolution}),P.geometry&&P.geometry.dispose(),C.geometry.computeBoundingBox(),P.geometry=MH(xp.BoxGeometry,ds(new xp.Vector3().subVectors(C.geometry.boundingBox.max,C.geometry.boundingBox.min).toArray())),q!=="right"&&C.geometry.center(),k){var $=H+O/2;q==="right"&&(C.position.x=$),C.position.y={right:-O/2,top:$+O/2,bottom:-$-O/2}[q]}var ee=function(Q){var se=m.__currentTargetD=Q,le=se.lat,de=se.lng,ie=se.alt,ge=se.rot,Ce=se.scale;Object.assign(m.position,Ed(le,de,ie)),m.lookAt(e.scene.localToWorld(new xp.Vector3(0,0,0))),m.rotateY(Math.PI),m.rotateZ(-ge*Math.PI/180),m.scale.x=m.scale.y=m.scale.z=Ce},Y={lat:+t(g),lng:+n(g),alt:+r(g),rot:+a(g),scale:1},oe=m.__currentTargetD||Object.assign({},Y,{scale:1e-12});Object.keys(Y).some(function(re){return oe[re]!==Y[re]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?ee(Y):e.tweenGroup.add(new wc(oe).to(Y,e.labelsTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(ee).start()))}).digest(e.labelsData)}}),$Xe=ss(ss({},window.THREE?window.THREE:{}),{},{CSS2DObject:q6e}),Tde=il({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(r){var s=Fo(r,2),o=s[1];return o}).filter(function(r){return r});n.forEach(function(r){return r.visible=!e.isBehindGlobe||!e.isBehindGlobe(r.position)})}}},init:function(e,t,n){var r=n.tweenGroup;_s(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new vf(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var o=Kt(t.htmlElement)(s),a=new $Xe.CSS2DObject(o);return a.__globeObjType="html",a})},update:function(e,t){var n=this,r=Kt(e.htmlLat),s=Kt(e.htmlLng),o=Kt(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(a,l){var c=function(h){var p=a.__currentTargetD=h,m=p.alt,g=p.lat,b=p.lng;Object.assign(a.position,Ed(g,b,m)),n.updateObjVisibility(a)},u={lat:+r(l),lng:+s(l),alt:+o(l)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!a.__currentTargetD?c(u):e.tweenGroup.add(new wc(a.__currentTargetD).to(u,e.htmlTransitionDuration).easing(ka.Quadratic.InOut).onUpdate(c).start())}).digest(e.htmlElementsData)}}),D4=window.THREE?window.THREE:{Group:da,Mesh:zi,MeshLambertMaterial:Pd,SphereGeometry:Ah},Ede=il({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new D4.Mesh(new D4.SphereGeometry(1,16,8),new D4.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){_s(e),t.scene=e,t.dataMapper=new vf(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var r=Kt(t.objectThreeObject)(n);t.objectThreeObject===r&&(r=r.clone());var s=new D4.Group;return s.add(r),s.__globeObjType="object",s})},update:function(e,t){var n=Kt(e.objectLat),r=Kt(e.objectLng),s=Kt(e.objectAltitude),o=Kt(e.objectFacesSurface),a=Kt(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(l,c){var u=+n(c),f=+r(c),h=+s(c);Object.assign(l.position,Ed(u,f,h)),o(c)?l.setRotationFromEuler(new Io(Fv(-u),Fv(f),0,"YXZ")):l.rotation.set(0,0,0);var p=l.children[0],m=a(c);m&&p.setRotationFromEuler(new Io(Fv(m.x||0),Fv(m.y||0),Fv(m.z||0)))}).digest(e.objectsData)}}),wde=il({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){_s(e),t.scene=e,t.dataMapper=new vf(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var r=Kt(t.customThreeObject)(n,zs);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||_s(e.scene);var n=Kt(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(r,s){return n(r,s,zs)}).digest(e.customLayerData)}}),L4=window.THREE?window.THREE:{Camera:ib,Group:da,Vector2:at,Vector3:he},jXe=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],Mde=gu("globeLayer",fde),WXe=Object.assign.apply(Object,ds(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return Cl({},i,Mde.linkProp(i))}))),KXe=Object.assign.apply(Object,ds(["globeMaterial"].map(function(i){return Cl({},i,Mde.linkMethod(i))}))),YXe=gu("pointsLayer",hde),XXe=Object.assign.apply(Object,ds(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return Cl({},i,YXe.linkProp(i))}))),QXe=gu("arcsLayer",pde),ZXe=Object.assign.apply(Object,ds(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return Cl({},i,QXe.linkProp(i))}))),JXe=gu("hexBinLayer",Ade),eQe=Object.assign.apply(Object,ds(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return Cl({},i,JXe.linkProp(i))}))),tQe=gu("heatmapsLayer",mde),nQe=Object.assign.apply(Object,ds(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return Cl({},i,tQe.linkProp(i))}))),iQe=gu("hexedPolygonsLayer",yde),rQe=Object.assign.apply(Object,ds(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return Cl({},i,iQe.linkProp(i))}))),sQe=gu("polygonsLayer",gde),oQe=Object.assign.apply(Object,ds(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return Cl({},i,sQe.linkProp(i))}))),aQe=gu("pathsLayer",vde),lQe=Object.assign.apply(Object,ds(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return Cl({},i,aQe.linkProp(i))}))),cQe=gu("tilesLayer",xde),uQe=Object.assign.apply(Object,ds(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return Cl({},i,cQe.linkProp(i))}))),fQe=gu("particlesLayer",bde),hQe=Object.assign.apply(Object,ds(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(i){return Cl({},i,fQe.linkProp(i))}))),dQe=gu("ringsLayer",_de),pQe=Object.assign.apply(Object,ds(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return Cl({},i,dQe.linkProp(i))}))),AQe=gu("labelsLayer",Sde),mQe=Object.assign.apply(Object,ds(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return Cl({},i,AQe.linkProp(i))}))),gQe=gu("htmlElementsLayer",Tde),yQe=Object.assign.apply(Object,ds(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration"].map(function(i){return Cl({},i,gQe.linkProp(i))}))),vQe=gu("objectsLayer",Ede),xQe=Object.assign.apply(Object,ds(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return Cl({},i,vQe.linkProp(i))}))),bQe=gu("customLayer",wde),_Qe=Object.assign.apply(Object,ds(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Cl({},i,bQe.linkProp(i))}))),SQe=il({props:ss(ss(ss(ss(ss(ss(ss(ss(ss(ss(ss(ss(ss(ss(ss({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new L4.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},WXe),XXe),ZXe),eQe),nQe),oQe),rQe),lQe),uQe),hQe),pQe),mQe),yQe),xQe),_Qe),methods:ss({getGlobeRadius:dJ,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ed.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ude.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof L4.Camera?t.position:t,r=dJ(),s=void 0;if(e.scene&&n){var o,a,l,c;s=function(f){o===void 0&&(o=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),a===void 0&&(a=o.length()),l===void 0&&(l=Math.sqrt(Math.pow(a,2)-Math.pow(r,2))),c===void 0&&(c=Math.acos(l/a));var h=o.distanceTo(f);if(h<l)return!1;var p=f.length(),m=Math.acos((Math.pow(a,2)+Math.pow(h,2)-Math.pow(p,2))/(2*a*h));return m<c}}e.layersThatNeedUpdatePov.forEach(function(u){return u.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(u){return u.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},KXe),stateInit:function(){var e=new QP,t={tweenGroup:e},n={globeLayer:fde(t),pointsLayer:hde(t),arcsLayer:pde(t),hexBinLayer:Ade(t),heatmapsLayer:mde(t),polygonsLayer:gde(t),hexedPolygonsLayer:yde(t),pathsLayer:vde(t),tilesLayer:xde(t),particlesLayer:bde(t),ringsLayer:_de(t),labelsLayer:Sde(t),htmlElementsLayer:Tde(t),objectsLayer:Ede(t),customLayer:wde(t)};return ss(ss({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(r){return r.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,o=n.waitForGlobeReady,a=o===void 0?!0:o;_s(e),t.scene=e,t.scene.visible=!1,jXe.forEach(function(c){var u=new L4.Group;t.scene.add(u),t[c](u)});var l=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new wc({k:1e-6}).to({k:1},600).easing(ka.Quadratic.Out).onUpdate(function(f){var h=f.k;return t.scene.scale.set(h,h,h)}).start());var u=new L4.Vector3(0,1,0);t.tweenGroup.add(new wc({rot:Math.PI*2}).to({rot:0},1200).easing(ka.Quintic.Out).onUpdate(function(f){var h=f.rot;return t.scene.setRotationFromAxisAngle(u,h)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};a?t.globeLayer.onReady(l):l(),this._animationCycle()},update:function(e){}});function TQe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=function(r){function s(){var o;MN(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=wN(this,s,[].concat(l)),o.__kapsuleInstance=MH(i,[].concat(ds(t?[o]:[]),l)),o}return RN(s,r),CN(s)}(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,o=(s=this.__kapsuleInstance)[r].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),n}var EQe=window.THREE?window.THREE:{Group:da},Cde=TQe(SQe,EQe.Group,!0);const iF={type:"change"},LH={type:"start"},PH={type:"end"},_J=1e-6,Wr={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},P4=new at,_y=new at,wQe=new he,N4=new he,rF=new he,J_=new Br,SJ=new he,B4=new he,sF=new he,I4=new he;class MQe extends NP{constructor(e,t=null){super(e,t),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Qa.ROTATE,MIDDLE:Qa.DOLLY,RIGHT:Qa.PAN},this.state=Wr.NONE,this.keyState=Wr.NONE,this.target=new he,this._lastPosition=new he,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new he,this._movePrev=new at,this._moveCurr=new at,this._lastAxis=new he,this._zoomStart=new at,this._zoomEnd=new at,this._panStart=new at,this._panEnd=new at,this._pointers=[],this._pointerPositions={},this._onPointerMove=RQe.bind(this),this._onPointerDown=CQe.bind(this),this._onPointerUp=DQe.bind(this),this._onPointerCancel=LQe.bind(this),this._onContextMenu=UQe.bind(this),this._onMouseWheel=FQe.bind(this),this._onKeyDown=NQe.bind(this),this._onKeyUp=PQe.bind(this),this._onTouchStart=kQe.bind(this),this._onTouchMove=GQe.bind(this),this._onTouchEnd=zQe.bind(this),this._onMouseDown=BQe.bind(this),this._onMouseMove=IQe.bind(this),this._onMouseUp=OQe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>_J&&(this.dispatchEvent(iF),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>_J||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(iF),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Wr.NONE,this.keyState=Wr.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(iF),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(_y.copy(this._panEnd).sub(this._panStart),_y.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;_y.x*=e,_y.y*=t}_y.multiplyScalar(this._eye.length()*this.panSpeed),N4.copy(this._eye).cross(this.object.up).setLength(_y.x),N4.add(wQe.copy(this.object.up).setLength(_y.y)),this.object.position.add(N4),this.target.add(N4),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(_y.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){I4.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=I4.length();e?(this._eye.copy(this.object.position).sub(this.target),SJ.copy(this._eye).normalize(),B4.copy(this.object.up).normalize(),sF.crossVectors(B4,SJ).normalize(),B4.setLength(this._moveCurr.y-this._movePrev.y),sF.setLength(this._moveCurr.x-this._movePrev.x),I4.copy(B4.add(sF)),rF.crossVectors(I4,this._eye).normalize(),e*=this.rotateSpeed,J_.setFromAxisAngle(rF,e),this._eye.applyQuaternion(J_),this.object.up.applyQuaternion(J_),this._lastAxis.copy(rF),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),J_.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(J_),this.object.up.applyQuaternion(J_)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Wr.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=_l.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=_l.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return P4.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),P4}_getMouseOnCircle(e,t){return P4.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),P4}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new at,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function CQe(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i))}function RQe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function DQe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchEnd(i):this._onMouseUp(),this._removePointer(i),this._pointers.length===0&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function LQe(i){this._removePointer(i)}function PQe(){this.enabled!==!1&&(this.keyState=Wr.NONE,window.addEventListener("keydown",this._onKeyDown))}function NQe(i){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Wr.NONE&&(i.code===this.keys[Wr.ROTATE]&&!this.noRotate?this.keyState=Wr.ROTATE:i.code===this.keys[Wr.ZOOM]&&!this.noZoom?this.keyState=Wr.ZOOM:i.code===this.keys[Wr.PAN]&&!this.noPan&&(this.keyState=Wr.PAN)))}function BQe(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Qa.DOLLY:this.state=Wr.ZOOM;break;case Qa.ROTATE:this.state=Wr.ROTATE;break;case Qa.PAN:this.state=Wr.PAN;break;default:this.state=Wr.NONE}const t=this.keyState!==Wr.NONE?this.keyState:this.state;t===Wr.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr)):t===Wr.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._zoomEnd.copy(this._zoomStart)):t===Wr.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(i.pageX,i.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(LH)}function IQe(i){const e=this.keyState!==Wr.NONE?this.keyState:this.state;e===Wr.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY))):e===Wr.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY)):e===Wr.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(i.pageX,i.pageY))}function OQe(){this.state=Wr.NONE,this.dispatchEvent(PH)}function FQe(i){if(this.enabled!==!1&&this.noZoom!==!0){switch(i.preventDefault(),i.deltaMode){case 2:this._zoomStart.y-=i.deltaY*.025;break;case 1:this._zoomStart.y-=i.deltaY*.01;break;default:this._zoomStart.y-=i.deltaY*25e-5;break}this.dispatchEvent(LH),this.dispatchEvent(PH)}}function UQe(i){this.enabled!==!1&&i.preventDefault()}function kQe(i){switch(this._trackPointer(i),this._pointers.length){case 1:this.state=Wr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Wr.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const n=(this._pointers[0].pageX+this._pointers[1].pageX)/2,r=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(n,r)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(LH)}function GQe(i){switch(this._trackPointer(i),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY));break;default:const e=this._getSecondPointerPosition(i),t=i.pageX-e.x,n=i.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);const r=(i.pageX+e.x)/2,s=(i.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(r,s));break}}function zQe(i){switch(this._pointers.length){case 0:this.state=Wr.NONE;break;case 1:this.state=Wr.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(i.pageX,i.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Wr.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==i.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(PH)}const TJ={type:"change"},NH={type:"start"},Rde={type:"end"},O4=new c1,EJ=new rd,HQe=Math.cos(70*_l.DEG2RAD),Wa=new he,Gu=2*Math.PI,bs={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},oF=1e-6;class VQe extends NP{constructor(e,t=null){super(e,t),this.state=bs.NONE,this.enabled=!0,this.target=new he,this.cursor=new he,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qa.ROTATE,MIDDLE:Qa.DOLLY,RIGHT:Qa.PAN},this.touches={ONE:Yf.ROTATE,TWO:Yf.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new he,this._lastQuaternion=new Br,this._lastTargetPosition=new he,this._quat=new Br().setFromUnitVectors(e.up,new he(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new pS,this._sphericalDelta=new pS,this._scale=1,this._panOffset=new he,this._rotateStart=new at,this._rotateEnd=new at,this._rotateDelta=new at,this._panStart=new at,this._panEnd=new at,this._panDelta=new at,this._dollyStart=new at,this._dollyEnd=new at,this._dollyDelta=new at,this._dollyDirection=new he,this._mouse=new at,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=$Qe.bind(this),this._onPointerDown=qQe.bind(this),this._onPointerUp=jQe.bind(this),this._onContextMenu=JQe.bind(this),this._onMouseWheel=YQe.bind(this),this._onKeyDown=XQe.bind(this),this._onTouchStart=QQe.bind(this),this._onTouchMove=ZQe.bind(this),this._onMouseDown=WQe.bind(this),this._onMouseMove=KQe.bind(this),this._interceptControlDown=eZe.bind(this),this._interceptControlUp=tZe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(TJ),this.update(),this.state=bs.NONE}update(e=null){const t=this.object.position;Wa.copy(t).sub(this.target),Wa.applyQuaternion(this._quat),this._spherical.setFromVector3(Wa),this.autoRotate&&this.state===bs.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=Gu:n>Math.PI&&(n-=Gu),r<-Math.PI?r+=Gu:r>Math.PI&&(r-=Gu),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Wa.setFromSpherical(this._spherical),Wa.applyQuaternion(this._quatInverse),t.copy(this.target).add(Wa),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=Wa.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new he(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new he(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=Wa.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(O4.origin.copy(this.object.position),O4.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(O4.direction))<HQe?this.object.lookAt(this.target):(EJ.setFromNormalAndCoplanarPoint(this.object.up,this.target),O4.intersectPlane(EJ,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>oF||8*(1-this._lastQuaternion.dot(this.object.quaternion))>oF||this._lastTargetPosition.distanceToSquared(this.target)>oF?(this.dispatchEvent(TJ),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Gu/60*this.autoRotateSpeed*e:Gu/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Wa.setFromMatrixColumn(t,0),Wa.multiplyScalar(-e),this._panOffset.add(Wa)}_panUp(e,t){this.screenSpacePanning===!0?Wa.setFromMatrixColumn(t,1):(Wa.setFromMatrixColumn(t,0),Wa.crossVectors(this.object.up,Wa)),Wa.multiplyScalar(e),this._panOffset.add(Wa)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Wa.copy(r).sub(this.target);let s=Wa.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),r=e-n.left,s=t-n.top,o=n.width,a=n.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Gu*this._rotateDelta.x/t.clientHeight),this._rotateUp(Gu*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Gu*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Gu*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Gu*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Gu*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Gu*this._rotateDelta.x/t.clientHeight),this._rotateUp(Gu*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new at,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function qQe(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function $Qe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function jQe(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Rde),this.state=bs.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function WQe(i){let e;switch(i.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Qa.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=bs.DOLLY;break;case Qa.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=bs.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=bs.ROTATE}break;case Qa.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=bs.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=bs.PAN}break;default:this.state=bs.NONE}this.state!==bs.NONE&&this.dispatchEvent(NH)}function KQe(i){switch(this.state){case bs.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case bs.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case bs.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function YQe(i){this.enabled===!1||this.enableZoom===!1||this.state!==bs.NONE||(i.preventDefault(),this.dispatchEvent(NH),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(Rde))}function XQe(i){this.enabled!==!1&&this._handleKeyDown(i)}function QQe(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case Yf.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=bs.TOUCH_ROTATE;break;case Yf.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=bs.TOUCH_PAN;break;default:this.state=bs.NONE}break;case 2:switch(this.touches.TWO){case Yf.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=bs.TOUCH_DOLLY_PAN;break;case Yf.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=bs.TOUCH_DOLLY_ROTATE;break;default:this.state=bs.NONE}break;default:this.state=bs.NONE}this.state!==bs.NONE&&this.dispatchEvent(NH)}function ZQe(i){switch(this._trackPointer(i),this.state){case bs.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case bs.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case bs.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case bs.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=bs.NONE}}function JQe(i){this.enabled!==!1&&i.preventDefault()}function eZe(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function tZe(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const nZe={type:"change"},wJ=1e-6,MJ=new Br;class iZe extends NP{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new he(0,0,0),this._rotationVector=new he(0,0,0),this._lastQuaternion=new Br,this._lastPosition=new he,this._status=0,this._onKeyDown=rZe.bind(this),this._onKeyUp=sZe.bind(this),this._onPointerMove=aZe.bind(this),this._onPointerDown=oZe.bind(this),this._onPointerUp=lZe.bind(this),this._onPointerCancel=cZe.bind(this),this._onContextMenu=uZe.bind(this),t!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,n=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*n),t.translateY(this._moveVector.y*n),t.translateZ(this._moveVector.z*n),MJ.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(MJ),(this._lastPosition.distanceToSquared(t.position)>wJ||8*(1-this._lastQuaternion.dot(t.quaternion))>wJ)&&(this.dispatchEvent(nZe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function rZe(i){if(!(i.altKey||this.enabled===!1)){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function sZe(i){if(this.enabled!==!1){switch(i.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function oZe(i){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(i.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function aZe(i){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,n=e.size[1]/2;this._moveState.yawLeft=-(i.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(i.pageY-e.offset[1]-n)/n,this._updateRotationVector()}}function lZe(i){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(i.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function cZe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function uZe(i){this.enabled!==!1&&i.preventDefault()}const fZe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class DN{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const hZe=new du(-1,1,1,-1,0,1);class dZe extends qn{constructor(){super(),this.setAttribute("position",new Cn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Cn([0,2,0,0,2,0],2))}}const pZe=new dZe;class AZe{constructor(e){this._mesh=new zi(pZe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,hZe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class mZe extends DN{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof jl?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=g3.clone(e.uniforms),this.material=new jl({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new AZe(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class CJ extends DN{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class gZe extends DN{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class yZe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new at);this._width=n.width,this._height=n.height,t=new xd(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Fa}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new mZe(fZe),this.copyPass.material.blending=uu,this.clock=new S3}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}CJ!==void 0&&(o instanceof CJ?n=!0:o instanceof gZe&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new at);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class vZe extends DN{constructor(e,t,n=null,r=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Qt}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=r}}function Dde(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function e3(i,e){return e3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},e3(i,e)}function BH(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,e3(i,e)}function s7(i){return s7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s7(i)}function xZe(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}function Lde(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lde=function(){return!!i})()}function bZe(i,e,t){if(Lde())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&e3(r,t.prototype),r}function o7(i){var e=typeof Map=="function"?new Map:void 0;return o7=function(n){if(n===null||!xZe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return bZe(n,arguments,s7(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e3(r,n)},o7(i)}var K0=function(i){BH(e,i);function e(t){var n;return n=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,Dde(n)}return e}(o7(Error));function aF(i){return Math.round(i*255)}function _Ze(i,e,t){return aF(i)+","+aF(e)+","+aF(t)}function b8(i,e,t,n){if(n===void 0&&(n=_Ze),e===0)return n(t,t,t);var r=(i%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,o=s*(1-Math.abs(r%2-1)),a=0,l=0,c=0;r>=0&&r<1?(a=s,l=o):r>=1&&r<2?(a=o,l=s):r>=2&&r<3?(l=s,c=o):r>=3&&r<4?(l=o,c=s):r>=4&&r<5?(a=o,c=s):r>=5&&r<6&&(a=s,c=o);var u=t-s/2,f=a+u,h=l+u,p=c+u;return n(f,h,p)}var RJ={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function SZe(i){if(typeof i!="string")return i;var e=i.toLowerCase();return RJ[e]?"#"+RJ[e]:i}var TZe=/^#[a-fA-F0-9]{6}$/,EZe=/^#[a-fA-F0-9]{8}$/,wZe=/^#[a-fA-F0-9]{3}$/,MZe=/^#[a-fA-F0-9]{4}$/,lF=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,CZe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,RZe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,DZe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function GS(i){if(typeof i!="string")throw new K0(3);var e=SZe(i);if(e.match(TZe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(EZe)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(wZe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(MZe)){var n=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:n}}var r=lF.exec(e);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var s=CZe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var o=RZe.exec(e);if(o){var a=parseInt(""+o[1],10),l=parseInt(""+o[2],10)/100,c=parseInt(""+o[3],10)/100,u="rgb("+b8(a,l,c)+")",f=lF.exec(u);if(!f)throw new K0(4,e,u);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var h=DZe.exec(e.substring(0,50));if(h){var p=parseInt(""+h[1],10),m=parseInt(""+h[2],10)/100,g=parseInt(""+h[3],10)/100,b="rgb("+b8(p,m,g)+")",T=lF.exec(b);if(!T)throw new K0(4,e,b);return{red:parseInt(""+T[1],10),green:parseInt(""+T[2],10),blue:parseInt(""+T[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new K0(5)}function LZe(i){var e=i.red/255,t=i.green/255,n=i.blue/255,r=Math.max(e,t,n),s=Math.min(e,t,n),o=(r+s)/2;if(r===s)return i.alpha!==void 0?{hue:0,saturation:0,lightness:o,alpha:i.alpha}:{hue:0,saturation:0,lightness:o};var a,l=r-s,c=o>.5?l/(2-r-s):l/(r+s);switch(r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;default:a=(e-t)/l+4;break}return a*=60,i.alpha!==void 0?{hue:a,saturation:c,lightness:o,alpha:i.alpha}:{hue:a,saturation:c,lightness:o}}function m1(i){return LZe(GS(i))}var PZe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},a7=PZe;function Lv(i){var e=i.toString(16);return e.length===1?"0"+e:e}function cF(i){return Lv(Math.round(i*255))}function NZe(i,e,t){return a7("#"+cF(i)+cF(e)+cF(t))}function Pde(i,e,t){return b8(i,e,t,NZe)}function BZe(i,e,t){if(typeof i=="object"&&e===void 0&&t===void 0)return Pde(i.hue,i.saturation,i.lightness);throw new K0(1)}function IZe(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?Pde(i.hue,i.saturation,i.lightness):"rgba("+b8(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new K0(2)}function Nde(i,e,t){if(typeof i=="number"&&typeof e=="number"&&typeof t=="number")return a7("#"+Lv(i)+Lv(e)+Lv(t));if(typeof i=="object"&&e===void 0&&t===void 0)return a7("#"+Lv(i.red)+Lv(i.green)+Lv(i.blue));throw new K0(6)}function LN(i,e,t,n){if(typeof i=="object"&&e===void 0&&t===void 0&&n===void 0)return i.alpha>=1?Nde(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")";throw new K0(7)}var OZe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},FZe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},UZe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},kZe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function g1(i){if(typeof i!="object")throw new K0(8);if(FZe(i))return LN(i);if(OZe(i))return Nde(i);if(kZe(i))return IZe(i);if(UZe(i))return BZe(i);throw new K0(8)}function Bde(i,e,t){return function(){var r=t.concat(Array.prototype.slice.call(arguments));return r.length>=e?i.apply(this,r):Bde(i,e,r)}}function gh(i){return Bde(i,i.length,[])}function GZe(i,e){if(e==="transparent")return e;var t=m1(e);return g1(ar({},t,{hue:t.hue+parseFloat(i)}))}gh(GZe);function vT(i,e,t){return Math.max(i,Math.min(e,t))}function zZe(i,e){if(e==="transparent")return e;var t=m1(e);return g1(ar({},t,{lightness:vT(0,1,t.lightness-parseFloat(i))}))}gh(zZe);function HZe(i,e){if(e==="transparent")return e;var t=m1(e);return g1(ar({},t,{saturation:vT(0,1,t.saturation-parseFloat(i))}))}gh(HZe);function VZe(i,e){if(e==="transparent")return e;var t=m1(e);return g1(ar({},t,{lightness:vT(0,1,t.lightness+parseFloat(i))}))}gh(VZe);function qZe(i,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(i===0)return t;var n=GS(e),r=ar({},n,{alpha:typeof n.alpha=="number"?n.alpha:1}),s=GS(t),o=ar({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),a=r.alpha-o.alpha,l=parseFloat(i)*2-1,c=l*a===-1?l:l+a,u=1+l*a,f=(c/u+1)/2,h=1-f,p={red:Math.floor(r.red*f+o.red*h),green:Math.floor(r.green*f+o.green*h),blue:Math.floor(r.blue*f+o.blue*h),alpha:r.alpha*parseFloat(i)+o.alpha*(1-parseFloat(i))};return LN(p)}var $Ze=gh(qZe),Ide=$Ze;function jZe(i,e){if(e==="transparent")return e;var t=GS(e),n=typeof t.alpha=="number"?t.alpha:1,r=ar({},t,{alpha:vT(0,1,(n*100+parseFloat(i)*100)/100)});return LN(r)}var WZe=gh(jZe),KZe=WZe;function YZe(i,e){if(e==="transparent")return e;var t=m1(e);return g1(ar({},t,{saturation:vT(0,1,t.saturation+parseFloat(i))}))}gh(YZe);function XZe(i,e){return e==="transparent"?e:g1(ar({},m1(e),{hue:parseFloat(i)}))}gh(XZe);function QZe(i,e){return e==="transparent"?e:g1(ar({},m1(e),{lightness:parseFloat(i)}))}gh(QZe);function ZZe(i,e){return e==="transparent"?e:g1(ar({},m1(e),{saturation:parseFloat(i)}))}gh(ZZe);function JZe(i,e){return e==="transparent"?e:Ide(parseFloat(i),"rgb(0, 0, 0)",e)}gh(JZe);function eJe(i,e){return e==="transparent"?e:Ide(parseFloat(i),"rgb(255, 255, 255)",e)}gh(eJe);function tJe(i,e){if(e==="transparent")return e;var t=GS(e),n=typeof t.alpha=="number"?t.alpha:1,r=ar({},t,{alpha:vT(0,1,+(n*100-parseFloat(i)*100).toFixed(2)/100)});return LN(r)}gh(tJe);var l7="http://www.w3.org/1999/xhtml";const DJ={svg:"http://www.w3.org/2000/svg",xhtml:l7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ode(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),DJ.hasOwnProperty(e)?{space:DJ[e],local:i}:i}function nJe(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===l7&&e.documentElement.namespaceURI===l7?e.createElement(i):e.createElementNS(t,i)}}function iJe(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function Fde(i){var e=Ode(i);return(e.local?iJe:nJe)(e)}function rJe(){}function Ude(i){return i==null?rJe:function(){return this.querySelector(i)}}function sJe(i){typeof i!="function"&&(i=Ude(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=n[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=i.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new wd(n,this._parents)}function oJe(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function aJe(){return[]}function lJe(i){return i==null?aJe:function(){return this.querySelectorAll(i)}}function cJe(i){return function(){return oJe(i.apply(this,arguments))}}function uJe(i){typeof i=="function"?i=cJe(i):i=lJe(i);for(var e=this._groups,t=e.length,n=[],r=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(n.push(i.call(l,l.__data__,c,o)),r.push(l));return new wd(n,r)}function fJe(i){return function(){return this.matches(i)}}function kde(i){return function(e){return e.matches(i)}}var hJe=Array.prototype.find;function dJe(i){return function(){return hJe.call(this.children,i)}}function pJe(){return this.firstElementChild}function AJe(i){return this.select(i==null?pJe:dJe(typeof i=="function"?i:kde(i)))}var mJe=Array.prototype.filter;function gJe(){return Array.from(this.children)}function yJe(i){return function(){return mJe.call(this.children,i)}}function vJe(i){return this.selectAll(i==null?gJe:yJe(typeof i=="function"?i:kde(i)))}function xJe(i){typeof i!="function"&&(i=fJe(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=n[r]=[],l,c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new wd(n,this._parents)}function Gde(i){return new Array(i.length)}function bJe(){return new wd(this._enter||this._groups.map(Gde),this._parents)}function _8(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}_8.prototype={constructor:_8,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function _Je(i){return function(){return i}}function SJe(i,e,t,n,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],n[o]=a):t[o]=new _8(i,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function TJe(i,e,t,n,r,s,o){var a,l,c=new Map,u=e.length,f=s.length,h=new Array(u),p;for(a=0;a<u;++a)(l=e[a])&&(h[a]=p=o.call(l,l.__data__,a,e)+"",c.has(p)?r[a]=l:c.set(p,l));for(a=0;a<f;++a)p=o.call(i,s[a],a,s)+"",(l=c.get(p))?(n[a]=l,l.__data__=s[a],c.delete(p)):t[a]=new _8(i,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(r[a]=l)}function EJe(i){return i.__data__}function wJe(i,e){if(!arguments.length)return Array.from(this,EJe);var t=e?TJe:SJe,n=this._parents,r=this._groups;typeof i!="function"&&(i=_Je(i));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=n[c],f=r[c],h=f.length,p=MJe(i.call(u,u&&u.__data__,c,n)),m=p.length,g=a[c]=new Array(m),b=o[c]=new Array(m),T=l[c]=new Array(h);t(u,f,g,b,T,p,e);for(var C=0,R=0,P,I;C<m;++C)if(P=g[C]){for(C>=R&&(R=C+1);!(I=b[R])&&++R<m;);P._next=I||null}}return o=new wd(o,n),o._enter=a,o._exit=l,o}function MJe(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function CJe(){return new wd(this._exit||this._groups.map(Gde),this._parents)}function RJe(i,e,t){var n=this.enter(),r=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),n&&r?n.merge(r).order():r}function DJe(i){for(var e=i.selection?i.selection():i,t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=t[l],u=n[l],f=c.length,h=a[l]=new Array(f),p,m=0;m<f;++m)(p=c[m]||u[m])&&(h[m]=p);for(;l<r;++l)a[l]=t[l];return new wd(a,this._parents)}function LJe(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var n=i[e],r=n.length-1,s=n[r],o;--r>=0;)(o=n[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function PJe(i){i||(i=NJe);function e(f,h){return f&&h?i(f.__data__,h.__data__):!f-!h}for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s){for(var o=t[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new wd(r,this._parents).order()}function NJe(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function BJe(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function IJe(){return Array.from(this)}function OJe(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null}function FJe(){let i=0;for(const e of this)++i;return i}function UJe(){return!this.node()}function kJe(i){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,a;s<o;++s)(a=r[s])&&i.call(a,a.__data__,s,r);return this}function GJe(i){return function(){this.removeAttribute(i)}}function zJe(i){return function(){this.removeAttributeNS(i.space,i.local)}}function HJe(i,e){return function(){this.setAttribute(i,e)}}function VJe(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function qJe(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function $Je(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function jJe(i,e){var t=Ode(i);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?zJe:GJe:typeof e=="function"?t.local?$Je:qJe:t.local?VJe:HJe)(t,e))}function zde(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function WJe(i){return function(){this.style.removeProperty(i)}}function KJe(i,e,t){return function(){this.style.setProperty(i,e,t)}}function YJe(i,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,t)}}function XJe(i,e,t){return arguments.length>1?this.each((e==null?WJe:typeof e=="function"?YJe:KJe)(i,e,t??"")):QJe(this.node(),i)}function QJe(i,e){return i.style.getPropertyValue(e)||zde(i).getComputedStyle(i,null).getPropertyValue(e)}function ZJe(i){return function(){delete this[i]}}function JJe(i,e){return function(){this[i]=e}}function eet(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function tet(i,e){return arguments.length>1?this.each((e==null?ZJe:typeof e=="function"?eet:JJe)(i,e)):this.node()[i]}function Hde(i){return i.trim().split(/^|\s+/)}function IH(i){return i.classList||new Vde(i)}function Vde(i){this._node=i,this._names=Hde(i.getAttribute("class")||"")}Vde.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function qde(i,e){for(var t=IH(i),n=-1,r=e.length;++n<r;)t.add(e[n])}function $de(i,e){for(var t=IH(i),n=-1,r=e.length;++n<r;)t.remove(e[n])}function net(i){return function(){qde(this,i)}}function iet(i){return function(){$de(this,i)}}function ret(i,e){return function(){(e.apply(this,arguments)?qde:$de)(this,i)}}function set(i,e){var t=Hde(i+"");if(arguments.length<2){for(var n=IH(this.node()),r=-1,s=t.length;++r<s;)if(!n.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?ret:e?net:iet)(t,e))}function oet(){this.textContent=""}function aet(i){return function(){this.textContent=i}}function cet(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function uet(i){return arguments.length?this.each(i==null?oet:(typeof i=="function"?cet:aet)(i)):this.node().textContent}function fet(){this.innerHTML=""}function het(i){return function(){this.innerHTML=i}}function det(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function pet(i){return arguments.length?this.each(i==null?fet:(typeof i=="function"?det:het)(i)):this.node().innerHTML}function Aet(){this.nextSibling&&this.parentNode.appendChild(this)}function met(){return this.each(Aet)}function get(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yet(){return this.each(get)}function vet(i){var e=typeof i=="function"?i:Fde(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xet(){return null}function bet(i,e){var t=typeof i=="function"?i:Fde(i),n=e==null?xet:typeof e=="function"?e:Ude(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function _et(){var i=this.parentNode;i&&i.removeChild(this)}function Tet(){return this.each(_et)}function Eet(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function wet(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function Met(i){return this.select(i?wet:Eet)}function Cet(i){return arguments.length?this.property("__data__",i):this.node().__data__}function Ret(i){return function(e){i.call(this,e,this.__data__)}}function Det(i){return i.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Let(i){return function(){var e=this.__on;if(e){for(var t=0,n=-1,r=e.length,s;t<r;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function Pet(i,e,t){return function(){var n=this.__on,r,s=Ret(e);if(n){for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===i.type&&r.name===i.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(i.type,s,t),r={type:i.type,name:i.name,value:e,listener:s,options:t},n?n.push(r):this.__on=[r]}}function Net(i,e,t){var n=Det(i+""),r,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=n[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?Pet:Let,r=0;r<s;++r)this.each(a(n[r],e,t));return this}function jde(i,e,t){var n=zde(i),r=n.CustomEvent;typeof r=="function"?r=new r(e,t):(r=n.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),i.dispatchEvent(r)}function Bet(i,e){return function(){return jde(this,i,e)}}function Iet(i,e){return function(){return jde(this,i,e.apply(this,arguments))}}function Oet(i,e){return this.each((typeof e=="function"?Iet:Bet)(i,e))}function*Fet(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length,o;r<s;++r)(o=n[r])&&(yield o)}var Uet=[null];function wd(i,e){this._groups=i,this._parents=e}function ket(){return this}wd.prototype={constructor:wd,select:sJe,selectAll:uJe,selectChild:AJe,selectChildren:vJe,filter:xJe,data:wJe,enter:bJe,exit:CJe,join:RJe,merge:DJe,selection:ket,order:LJe,sort:PJe,call:BJe,nodes:IJe,node:OJe,size:FJe,empty:UJe,each:kJe,attr:jJe,style:XJe,property:tet,classed:set,text:uet,html:pet,raise:met,lower:yet,append:vet,insert:bet,remove:Tet,clone:Met,datum:Cet,on:Net,dispatch:Oet,[Symbol.iterator]:Fet};function Get(i){return typeof i=="string"?new wd([[document.querySelector(i)]],[document.documentElement]):new wd([[i]],Uet)}function zet(i){let e;for(;e=i.sourceEvent;)i=e;return i}function Het(i,e){if(i=zet(i),e===void 0&&(e=i.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=i.clientX,n.y=i.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop]}}return[i.pageX,i.pageY]}var sC,po,Wde,Kde,Uv,LJ,Yde,Xde,Qde,OH,c7,u7,t3={},Zde=[],Vet=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,FH=Array.isArray;function Fm(i,e){for(var t in e)i[t]=e[t];return i}function UH(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function qet(i,e,t){var n,r,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?sC.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)o[s]===void 0&&(o[s]=i.defaultProps[s]);return iM(i,o,n,r,null)}function iM(i,e,t,n,r){var s={type:i,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Wde,__i:-1,__u:0};return r==null&&po.vnode!=null&&po.vnode(s),s}function PN(i){return i.children}function wD(i,e){this.props=i,this.context=e}function zS(i,e){if(e==null)return i.__?zS(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?zS(i):null}function Jde(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return Jde(i)}}function PJ(i){(!i.__d&&(i.__d=!0)&&Uv.push(i)&&!S8.__r++||LJ!==po.debounceRendering)&&((LJ=po.debounceRendering)||Yde)(S8)}function S8(){for(var i,e,t,n,r,s,o,a=1;Uv.length;)Uv.length>a&&Uv.sort(Xde),i=Uv.shift(),a=Uv.length,i.__d&&(t=void 0,r=(n=(e=i).__v).__e,s=[],o=[],e.__P&&((t=Fm({},n)).__v=n.__v+1,po.vnode&&po.vnode(t),kH(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??zS(n),!!(32&n.__u),o),t.__v=n.__v,t.__.__k[t.__i]=t,npe(s,t,o),t.__e!=r&&Jde(t)));S8.__r=0}function epe(i,e,t,n,r,s,o,a,l,c,u){var f,h,p,m,g,b,T=n&&n.__k||Zde,C=e.length;for(l=$et(t,e,T,l,C),f=0;f<C;f++)(p=t.__k[f])!=null&&(h=p.__i===-1?t3:T[p.__i]||t3,p.__i=f,b=kH(i,p,h,r,s,o,a,l,c,u),m=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&GH(h.ref,null,p),u.push(p.ref,p.__c||m,p)),g==null&&m!=null&&(g=m),4&p.__u||h.__k===p.__k?l=tpe(p,l,i):typeof p.type=="function"&&b!==void 0?l=b:m&&(l=m.nextSibling),p.__u&=-7);return t.__e=g,l}function $et(i,e,t,n,r){var s,o,a,l,c,u=t.length,f=u,h=0;for(i.__k=new Array(r),s=0;s<r;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+h,(o=i.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?iM(null,o,null,null,null):FH(o)?iM(PN,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?iM(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=i,o.__b=i.__b+1,a=null,(c=o.__i=jet(o,t,l,f))!==-1&&(f--,(a=t[c])&&(a.__u|=2)),a==null||a.__v===null?(c==-1&&h--,typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,o.__u|=4))):i.__k[s]=null;if(f)for(s=0;s<u;s++)(a=t[s])!=null&&!(2&a.__u)&&(a.__e==n&&(n=zS(a)),ipe(a,a));return n}function tpe(i,e,t){var n,r;if(typeof i.type=="function"){for(n=i.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=i,e=tpe(n[r],e,t));return e}i.__e!=e&&(e&&i.type&&!t.contains(e)&&(e=zS(i)),t.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function jet(i,e,t,n){var r,s,o=i.key,a=i.type,l=e[t];if(l===null||l&&o==l.key&&a===l.type&&!(2&l.__u))return t;if(n>(l!=null&&!(2&l.__u)?1:0))for(r=t-1,s=t+1;r>=0||s<e.length;){if(r>=0){if((l=e[r])&&!(2&l.__u)&&o==l.key&&a===l.type)return r;r--}if(s<e.length){if((l=e[s])&&!(2&l.__u)&&o==l.key&&a===l.type)return s;s++}}return-1}function NJ(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Vet.test(e)?t:t+"px"}function F4(i,e,t,n,r){var s;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof n=="string"&&(i.style.cssText=n=""),n)for(e in n)t&&e in t||NJ(i.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||NJ(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Qde,"$1")),e=e.toLowerCase()in i||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+s]=t,t?n?t.u=n.u:(t.u=OH,i.addEventListener(e,s?u7:c7,s)):i.removeEventListener(e,s?u7:c7,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function BJ(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=OH++;else if(e.t<t.u)return;return t(po.event?po.event(e):e)}}}function kH(i,e,t,n,r,s,o,a,l,c){var u,f,h,p,m,g,b,T,C,R,P,I,F,k,q,H,O,$,ee=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(u=po.__b)&&u(e);e:if(typeof ee=="function")try{if(T=e.props,C="prototype"in ee&&ee.prototype.render,R=(u=ee.contextType)&&n[u.__c],P=u?R?R.props.value:u.__:n,t.__c?b=(f=e.__c=t.__c).__=f.__E:(C?e.__c=f=new ee(T,P):(e.__c=f=new wD(T,P),f.constructor=ee,f.render=Ket),R&&R.sub(f),f.props=T,f.state||(f.state={}),f.context=P,f.__n=n,h=f.__d=!0,f.__h=[],f._sb=[]),C&&f.__s==null&&(f.__s=f.state),C&&ee.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Fm({},f.__s)),Fm(f.__s,ee.getDerivedStateFromProps(T,f.__s))),p=f.props,m=f.state,f.__v=e,h)C&&ee.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),C&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(C&&ee.getDerivedStateFromProps==null&&T!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(T,P),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(T,f.__s,P)===!1||e.__v==t.__v)){for(e.__v!=t.__v&&(f.props=T,f.state=f.__s,f.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Y){Y&&(Y.__=e)}),I=0;I<f._sb.length;I++)f.__h.push(f._sb[I]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(T,f.__s,P),C&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,m,g)})}if(f.context=P,f.props=T,f.__P=i,f.__e=!1,F=po.__r,k=0,C){for(f.state=f.__s,f.__d=!1,F&&F(e),u=f.render(f.props,f.state,f.context),q=0;q<f._sb.length;q++)f.__h.push(f._sb[q]);f._sb=[]}else do f.__d=!1,F&&F(e),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++k<25);f.state=f.__s,f.getChildContext!=null&&(n=Fm(Fm({},n),f.getChildContext())),C&&!h&&f.getSnapshotBeforeUpdate!=null&&(g=f.getSnapshotBeforeUpdate(p,m)),O=(H=u!=null&&u.type===PN&&u.key==null)?u.props.children:u,H&&(u.props.children=null),a=epe(i,FH(O)?O:[O],e,t,n,r,s,o,a,l,c),f.base=e.__e,e.__u&=-161,f.__h.length&&o.push(f),b&&(f.__E=f.__=null)}catch(Y){if(e.__v=null,l||s!=null)if(Y.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for($=s.length;$--;)UH(s[$]);else e.__e=t.__e,e.__k=t.__k;po.__e(Y,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=Wet(t.__e,e,t,n,r,s,o,l,c);return(u=po.diffed)&&u(e),128&e.__u?void 0:a}function npe(i,e,t){for(var n=0;n<t.length;n++)GH(t[n],t[++n],t[++n]);po.__c&&po.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(s){s.call(r)})}catch(s){po.__e(s,r.__v)}})}function Wet(i,e,t,n,r,s,o,a,l){var c,u,f,h,p,m,g,b=t.props,T=e.props,C=e.type;if(C=="svg"?r="http://www.w3.org/2000/svg":C=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((p=s[c])&&"setAttribute"in p==!!C&&(C?p.localName==C:p.nodeType==3)){i=p,s[c]=null;break}}if(i==null){if(C==null)return document.createTextNode(T);i=document.createElementNS(r,C,T.is&&T),a&&(po.__m&&po.__m(e,s),a=!1),s=null}if(C===null)b===T||a&&i.data===T||(i.data=T);else{if(s=s&&sC.call(i.childNodes),b=t.props||t3,!a&&s!=null)for(b={},c=0;c<i.attributes.length;c++)b[(p=i.attributes[c]).name]=p.value;for(c in b)if(p=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")f=p;else if(!(c in T)){if(c=="value"&&"defaultValue"in T||c=="checked"&&"defaultChecked"in T)continue;F4(i,c,null,p,r)}}for(c in T)p=T[c],c=="children"?h=p:c=="dangerouslySetInnerHTML"?u=p:c=="value"?m=p:c=="checked"?g=p:a&&typeof p!="function"||b[c]===p||F4(i,c,p,b[c],r);if(u)a||f&&(u.__html===f.__html||u.__html===i.innerHTML)||(i.innerHTML=u.__html),e.__k=[];else if(f&&(i.innerHTML=""),epe(e.type==="template"?i.content:i,FH(h)?h:[h],e,t,n,C=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:t.__k&&zS(t,0),a,l),s!=null)for(c=s.length;c--;)UH(s[c]);a||(c="value",C=="progress"&&m==null?i.removeAttribute("value"):m!==void 0&&(m!==i[c]||C=="progress"&&!m||C=="option"&&m!==b[c])&&F4(i,c,m,b[c],r),c="checked",g!==void 0&&g!==i[c]&&F4(i,c,g,b[c],r))}return i}function GH(i,e,t){try{if(typeof i=="function"){var n=typeof i.__u=="function";n&&i.__u(),n&&e==null||(i.__u=i(e))}else i.current=e}catch(r){po.__e(r,t)}}function ipe(i,e,t){var n,r;if(po.unmount&&po.unmount(i),(n=i.ref)&&(n.current&&n.current!==i.__e||GH(n,null,e)),(n=i.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){po.__e(s,e)}n.base=n.__P=null}if(n=i.__k)for(r=0;r<n.length;r++)n[r]&&ipe(n[r],e,t||typeof i.type!="function");t||UH(i.__e),i.__c=i.__=i.__e=void 0}function Ket(i,e,t){return this.constructor(i,t)}function Yet(i,e,t){var n,r,s,o;e==document&&(e=document.documentElement),po.__&&po.__(i,e),r=(n=!1)?null:e.__k,s=[],o=[],kH(e,i=e.__k=qet(PN,null,[i]),r||t3,t3,e.namespaceURI,r?null:e.firstChild?sC.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,o),npe(s,i,o)}function rpe(i,e,t){var n,r,s,o,a=Fm({},i.props);for(s in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)s=="key"?n=e[s]:s=="ref"?r=e[s]:a[s]=e[s]===void 0&&o!==void 0?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?sC.call(arguments,2):t),iM(i.type,a,n||i.key,r||i.ref,null)}sC=Zde.slice,po={__e:function(i,e,t,n){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(i)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,n||{}),o=r.__d),o)return r.__E=r}catch(a){i=a}throw i}},Wde=0,Kde=function(i){return i!=null&&i.constructor==null},wD.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Fm({},this.state),typeof i=="function"&&(i=i(Fm({},t),this.props)),i&&Fm(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),PJ(this))},wD.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),PJ(this))},wD.prototype.render=PN,Uv=[],Yde=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xde=function(i,e){return i.__v.__b-e.__v.__b},S8.__r=0,Qde=/(PointerCapture)$|Capture$/i,OH=0,c7=BJ(!1),u7=BJ(!0);function IJ(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Xet(i){if(Array.isArray(i))return i}function Qet(i,e,t){return(e=itt(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Zet(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function Jet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function ett(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OJ(Object(t),!0).forEach(function(n){Qet(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):OJ(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function ttt(i,e){return Xet(i)||Zet(i,e)||rtt(i,e)||Jet()}function ntt(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function itt(i){var e=ntt(i,"string");return typeof e=="symbol"?e:e+""}function T8(i){"@babel/helpers - typeof";return T8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T8(i)}function rtt(i,e){if(i){if(typeof i=="string")return IJ(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?IJ(i,e):void 0}}var f7=function(e){if(T8(e)!=="object")return e;var t=rpe(e);if(t.props){var n;t.props=ett({},t.props),t!=null&&(n=t.props)!==null&&n!==void 0&&n.children&&(t.props.children=Array.isArray(t.props.children)?t.props.children.map(f7):f7(t.props.children))}return t},stt=function(e){return Kde(rpe(e))},ott=function(e,t){delete t.__k,Yet(f7(e),t)};function att(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var ltt=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;att(ltt);var ctt=il({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.style,s=r===void 0?{}:r,o=!!e&&T8(e)==="object"&&!!e.node&&typeof e.node=="function",a=Get(o?e.node():e);a.style("position")==="static"&&a.style("position","relative"),t.tooltipEl=a.append("div").attr("class","float-tooltip-kap"),Object.entries(s).forEach(function(c){var u=ttt(c,2),f=u[0],h=u[1];return t.tooltipEl.style(f,h)}),t.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));t.mouseInside=!1,a.on("mousemove.".concat(l),function(c){t.mouseInside=!0;var u=Het(c),f=a.node(),h=f.offsetWidth,p=f.offsetHeight,m=[t.offsetX===null||t.offsetX===void 0?"-".concat(u[0]/h*100,"%"):typeof t.offsetX=="number"?"calc(-50% + ".concat(t.offsetX,"px)"):t.offsetX,t.offsetY===null||t.offsetY===void 0?p>130&&p-u[1]<100?"calc(-100% - 6px)":"21px":typeof t.offsetY=="number"?t.offsetY<0?"calc(-100% - ".concat(Math.abs(t.offsetY),"px)"):"".concat(t.offsetY,"px"):t.offsetY];t.tooltipEl.style("left",u[0]+"px").style("top",u[1]+"px").style("transform","translate(".concat(m.join(","),")")),t.content&&t.tooltipEl.style("display","inline")}),a.on("mouseover.".concat(l),function(){t.mouseInside=!0,t.content&&t.tooltipEl.style("display","inline")}),a.on("mouseout.".concat(l),function(){t.mouseInside=!1,t.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):stt(e.content)?(e.tooltipEl.text(""),ott(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function utt(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var ftt=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;utt(ftt);function h7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function htt(i){if(Array.isArray(i))return i}function dtt(i){if(Array.isArray(i))return h7(i)}function ptt(i,e,t){return(e=btt(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Att(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mtt(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function gtt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ytt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vtt(i,e){return htt(i)||mtt(i,e)||spe(i,e)||gtt()}function _v(i){return dtt(i)||Att(i)||spe(i)||ytt()}function xtt(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function btt(i){var e=xtt(i,"string");return typeof e=="symbol"?e:e+""}function spe(i,e){if(i){if(typeof i=="string")return h7(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h7(i,e):void 0}}var oo=window.THREE?window.THREE:{WebGLRenderer:O9,Scene:sb,PerspectiveCamera:ls,Raycaster:B9,SRGBColorSpace:kn,TextureLoader:mg,Vector2:at,Vector3:he,Box3:ma,Color:Qt,Mesh:zi,SphereGeometry:Ah,MeshBasicMaterial:Tl,BackSide:Bs,Clock:S3},ope=il({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.tooltip&&t.tooltip.content(null)},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&n.sort(function(s,o){return e.hoverOrderComparator(s.object,o.object)});var r=n.find(function(s){return e.hoverFilter(s.object)})||null;t=r?r.object:null,e.intersection=r||null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj,e.intersection),e.tooltip.content(t&&Kt(e.tooltipContent)(t,e.intersection)||null),e.hoverObj=t)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,n=t.x,r=t.y;return{x:n,y:r}},cameraPosition:function(e,t,n,r){var s=e.camera;if(t&&e.initialised){var o=t,a=n||{x:0,y:0,z:0};if(!r)u(o),f(a);else{var l=Object.assign({},s.position),c=h();e.tweenGroup.add(new wc(l).to(o,r).easing(ka.Quadratic.Out).onUpdate(u).start()),e.tweenGroup.add(new wc(c).to(a,r/3).easing(ka.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},s.position,{lookAt:h()});function u(p){var m=p.x,g=p.y,b=p.z;m!==void 0&&(s.position.x=m),g!==void 0&&(s.position.y=g),b!==void 0&&(s.position.z=b)}function f(p){var m=new oo.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=m:s.lookAt(m)}function h(){return Object.assign(new oo.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length,s=new Array(r>3?r-3:0),o=3;o<r;o++)s[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,s),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var o=new oo.Vector3(0,0,0),a=Math.max.apply(Math,_v(Object.entries(t).map(function(p){var m=vtt(p,2),g=m[0],b=m[1];return Math.max.apply(Math,_v(b.map(function(T){return Math.abs(o[g]-T)})))})))*2,l=(1-r*2/e.height)*s.fov,c=a/Math.atan(l*Math.PI/180),u=c/s.aspect,f=Math.max(c,u);if(f>0){var h=o.clone().sub(s.position).normalize().multiplyScalar(-f);this.cameraPosition(h,o,n)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},n=new oo.Box3(new oo.Vector3(0,0,0),new oo.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach(function(s){return n.expandByObject(s)}),Object.assign.apply(Object,_v(["x","y","z"].map(function(s){return ptt({},s,[n.min[s],n.max[s]])})))):null},getScreenCoords:function(e,t,n,r){var s=new oo.Vector3(t,n,r);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new oo.Vector2(t/e.width*2-1,-(n/e.height)*2+1),o=new oo.Raycaster;return o.setFromCamera(s,e.camera),Object.assign({},o.ray.at(r,new oo.Vector3))},intersectingObjects:function(e,t,n){var r=new oo.Vector2(t/e.width*2-1,-(n/e.height)*2+1),s=new oo.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.params.Points.threshold=e.pointsHoverPrecision,s.setFromCamera(r,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new oo.Scene,camera:new oo.PerspectiveCamera,clock:new oo.Clock,tweenGroup:new QP}},init:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.controlType,s=r===void 0?"trackball":r,o=n.useWebGPU,a=o===void 0?!1:o,l=n.rendererConfig,c=l===void 0?{}:l,u=n.extraRenderers,f=u===void 0?[]:u,h=n.waitForLoadComplete,p=h===void 0?!0:h;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.tooltip=new ctt(t.container),t.pointerPos=new oo.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(m){return t.container.addEventListener(m,function(g){if(m==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&g.type==="pointermove"&&(g.pressure>0||t.isPointerPressed)&&(g.pointerType!=="touch"||g.movementX===void 0||[g.movementX,g.movementY].some(function(C){return Math.abs(C)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var b=T(t.container);t.pointerPos.x=g.pageX-b.left,t.pointerPos.y=g.pageY-b.top}function T(C){var R=C.getBoundingClientRect(),P=window.pageXOffset||document.documentElement.scrollLeft,I=window.pageYOffset||document.documentElement.scrollTop;return{top:R.top+I,left:R.left+P}}},{passive:!0})}),t.container.addEventListener("pointerup",function(m){t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){m.button===0&&t.onClick(t.hoverObj||null,m,t.intersection),m.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,m,t.intersection)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(m){t.onRightClick&&m.preventDefault()}),t.renderer=new(a?ide:oo.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=f,t.extraRenderers.forEach(function(m){m.domElement.style.position="absolute",m.domElement.style.top="0px",m.domElement.style.pointerEvents="none",t.container.appendChild(m.domElement)}),t.postProcessingComposer=new yZe(t.renderer),t.postProcessingComposer.addPass(new vZe(t.scene,t.camera)),t.controls=new{trackball:MQe,orbit:VQe,fly:iZe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(_v(t.extraRenderers)).forEach(function(m){return m.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new oo.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!p,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))){var n,r=e.width,s=e.height;e.container.style.width="".concat(r,"px"),e.container.style.height="".concat(s,"px"),[e.renderer,e.postProcessingComposer].concat(_v(e.extraRenderers)).forEach(function(p){return p.setSize(r,s)}),e.camera.aspect=r/s;var o=e.viewOffset.slice(0,2);o.some(function(p){return p})&&(n=e.camera).setViewOffset.apply(n,[r,s].concat(_v(o),[r,s])),e.camera.updateProjectionMatrix()}if(t.hasOwnProperty("viewOffset")){var a,l=e.width,c=e.height,u=e.viewOffset.slice(0,2);u.some(function(p){return p})?(a=e.camera).setViewOffset.apply(a,[l,c].concat(_v(u),[l,c])):e.camera.clearViewOffset()}if(t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new oo.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var f=GS(e.backgroundColor).alpha;f===void 0&&(f=1),e.renderer.setClearColor(new oo.Color(KZe(1,e.backgroundColor)),f)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new oo.TextureLoader().load(e.backgroundImageUrl,function(p){p.colorSpace=oo.SRGBColorSpace,e.skysphere.material=new oo.MeshBasicMaterial({map:p,side:oo.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&h()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&h())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(p){return e.scene.remove(p)}),e.lights.forEach(function(p){return e.scene.add(p)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(p){return e.scene.remove(p)}),e.objects.forEach(function(p){return e.scene.add(p)}));function h(){e.loadComplete=e.scene.visible=!0}}});function _tt(i,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var Stt=`.scene-container .clickable {
  cursor: pointer;
}`;_tt(Stt);function d7(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Ttt(i){if(Array.isArray(i))return d7(i)}function oC(i,e,t){return(e=Dtt(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ett(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function wtt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJ(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function kv(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?FJ(Object(t),!0).forEach(function(n){oC(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):FJ(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Mtt(i,e){if(i==null)return{};var t,n,r=Ctt(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Ctt(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function NN(i){return Ttt(i)||Ett(i)||Ltt(i)||wtt()}function Rtt(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Dtt(i){var e=Rtt(i,"string");return typeof e=="symbol"?e:e+""}function Ltt(i,e){if(i){if(typeof i=="string")return d7(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d7(i,e):void 0}}function ape(i,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[i][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[i],a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];var u=o[r].apply(o,l);return u===o?this:u}}}}var Ptt=["rendererConfig","waitForGlobeReady"],aw=kv(kv({},window.THREE?window.THREE:{AmbientLight:_3,DirectionalLight:aT,Vector2:at,REVISION:a1}),{},{CSS2DRenderer:$6e}),lpe=ape("globe",Cde),Ntt=Object.assign.apply(Object,NN(["globeImageUrl","bumpImageUrl","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude","onGlobeReady","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration","tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration","particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture","ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration","objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject","customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return oC({},i,lpe.linkProp(i))}))),Btt=Object.assign.apply(Object,NN(["globeMaterial","getGlobeRadius","getCoords","toGeoCoords"].map(function(i){return oC({},i,lpe.linkMethod(i))}))),cpe=ape("renderObjs",ope),Itt=Object.assign.apply(Object,NN(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map(function(i){return oC({},i,cpe.linkProp(i))}))),Ott=Object.assign.apply(Object,NN(["lights","postProcessingComposer"].map(function(i){return oC({},i,cpe.linkMethod(i))}))),Ftt=il({props:kv(kv({onZoom:{triggerUpdate:!1},onGlobeClick:{triggerUpdate:!1},onGlobeRightClick:{triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{triggerUpdate:!1},onPointRightClick:{triggerUpdate:!1},onPointHover:{triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{triggerUpdate:!1},onArcRightClick:{triggerUpdate:!1},onArcHover:{triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{triggerUpdate:!1},onPolygonRightClick:{triggerUpdate:!1},onPolygonHover:{triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{triggerUpdate:!1},onPathRightClick:{triggerUpdate:!1},onPathHover:{triggerUpdate:!1},onHeatmapClick:{triggerUpdate:!1},onHeatmapRightClick:{triggerUpdate:!1},onHeatmapHover:{triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{triggerUpdate:!1},onHexRightClick:{triggerUpdate:!1},onHexHover:{triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{triggerUpdate:!1},onHexPolygonRightClick:{triggerUpdate:!1},onHexPolygonHover:{triggerUpdate:!1},tileLabel:{default:"name",triggerUpdate:!1},onTileClick:{triggerUpdate:!1},onTileRightClick:{triggerUpdate:!1},onTileHover:{triggerUpdate:!1},particleLabel:{default:"name",triggerUpdate:!1},onParticleClick:{triggerUpdate:!1},onParticleRightClick:{triggerUpdate:!1},onParticleHover:{triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{triggerUpdate:!1},onLabelRightClick:{triggerUpdate:!1},onLabelHover:{triggerUpdate:!1},objectLabel:{default:"name",triggerUpdate:!1},onObjectClick:{triggerUpdate:!1},onObjectRightClick:{triggerUpdate:!1},onObjectHover:{triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{triggerUpdate:!1},onCustomLayerRightClick:{triggerUpdate:!1},onCustomLayerHover:{triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1},lineHoverPrecision:{default:.2,triggerUpdate:!1,onChange:function(e,t){t.renderObjs.lineHoverPrecision(e),t.renderObjs.pointsHoverPrecision(e)}},globeOffset:{default:[0,0],triggerUpdate:!1,onChange:function(e,t){return Array.isArray(e)&&e.length===2&&t.renderObjs.viewOffset(e.map(function(n){return-n}))}}},Ntt),Itt),methods:kv(kv({pauseAnimation:function(e){var t;return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),(t=e.globe)===null||t===void 0||t.pauseAnimation(),this},resumeAnimation:function(e){var t;return e.animationFrameRequestId===null&&this._animationCycle(),(t=e.globe)===null||t===void 0||t.resumeAnimation(),this},_animationCycle:function(e){e.renderObjs.tick(),e.tweenGroup.update(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=o();if(t.lat===void 0&&t.lng===void 0&&t.altitude===void 0)return r;var s=Object.assign({},r,t);if(["lat","lng","altitude"].forEach(function(l){return s[l]=+s[l]}),!n)a(s);else{for(;r.lng-s.lng>180;)r.lng-=360;for(;r.lng-s.lng<-180;)r.lng+=360;e.tweenGroup.add(new wc(r).to(s,n).easing(ka.Cubic.InOut).onUpdate(a).start())}return this;function o(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function a(l){var c=l.lat,u=l.lng,f=l.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(c,u,f)),e.globe.setPointOfView(e.renderObjs.camera())}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var o=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(o.x,o.y,o.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find(function(l){return l.object.__globeObjType==="globe"});if(!r)return null;var s=e.globe.toGeoCoords(r.point),o=s.lat,a=s.lng;return{lat:o,lng:a}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(e){e.globe._destructor(),this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.heatmapsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.tilesData([]),this.particlesData([]),this.labelsData([]),this.htmlElementsData([]),this.objectsData([]),this.customLayerData([])}},Btt),Ott),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=n===void 0?!0:n,s=Mtt(e,Ptt),o=new Cde(kv({waitForGlobeReady:r},s));return{globe:o,renderObjs:ope({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r,extraRenderers:[new aw.CSS2DRenderer]}).skyRadius(o.getGlobeRadius()*500).showNavInfo(!1).objects([o]).lights([new aw.AmbientLight(13421772,Math.PI),new aw.DirectionalLight(16777215,.6*Math.PI)]),tweenGroup:new QP}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new aw.Vector2)),this.pointOfView({altitude:2.5});var s=t.globe.getGlobeRadius(),o=t.renderObjs.controls();t.renderObjs.camera().near=.05,o.minDistance=s+Math.max(.001,t.renderObjs.camera().near*1.1),o.maxDistance=s*100,o.enablePan=!1,o.enableDamping=!0,o.dampingFactor=.1,o.rotateSpeed=.3,o.zoomSpeed=.3,o.zoomToCursor=!0,o.addEventListener("change",function(){o.target.setScalar(0);var c=n.pointOfView();o.rotateSpeed=c.altitude*.3,o.zoomSpeed=Math.sqrt(c.altitude)*.5,t.globe.setPointOfView(t.renderObjs.camera()),t.onZoom&&t.onZoom(c)});var a=function(u){for(var f=u;f&&!f.hasOwnProperty("__globeObjType");)f=f.parent;return f},l={point:function(u){return u},arc:function(u){return u},polygon:function(u){return u.data},path:function(u){return u},heatmap:function(u){return u},hexbin:function(u){return u},hexPolygon:function(u){return u},tile:function(u){return u},particles:function(u,f){return!f||!f.hasOwnProperty("index")||u.length<=f.index?u:u[f.index]},label:function(u){return u},object:function(u){return u},custom:function(u){return u}};aw.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverFilter(function(c){var u=a(c);if(!u)return!1;var f=u.__globeObjType;if(f!=="globe"&&!l.hasOwnProperty(f))return!1;var h=l.hasOwnProperty(f)&&u.__data?l[f](u.__data):null;return["points","hexBinPoints"].some(function(p){return p===f})&&Array.isArray(h)?!1:t.pointerEventsFilter(u,h)}).tooltipContent(function(c,u){var f={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,tile:t.tileLabel,particles:t.particleLabel,label:t.labelLabel,object:t.objectLabel,custom:t.customLayerLabel},h=a(c),p=h&&h.__globeObjType;return h&&p&&f.hasOwnProperty(p)&&l.hasOwnProperty(p)&&Kt(f[p])(l[p](h.__data,u))||""}).onHover(function(c,u,f){var h={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,heatmap:t.onHeatmapHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,tile:t.onTileHover,particles:t.onParticleHover,label:t.onLabelHover,object:t.onObjectHover,custom:t.onCustomLayerHover},p={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},m=a(c);if(m&&!h.hasOwnProperty(m.__globeObjType)&&(m=null),m!==t.hoverObj){var g=t.hoverObj?t.hoverObj.__globeObjType:null,b=t.hoverData,T=m?m.__globeObjType:null,C=m?l[T](m.__data,f):null;g&&g!==T&&h[g]&&h[g](null,b||null),T&&h[T]&&h[T](C,g===T?b:null),t.renderObjs.renderer().domElement.classList[T&&p[T]?"add":"remove"]("clickable"),t.hoverObj=m,t.hoverData=C}}).onClick(function(c,u,f){if(c){var h={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,particles:t.onParticleClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},p=a(c),m=p.__globeObjType;if(p&&h.hasOwnProperty(m)&&h[m]){var g=[u],b=f!=null&&f.isVector3?f:f==null?void 0:f.point;if(m==="globe"){var T=n.toGeoCoords(b),C=T.lat,R=T.lng;g.unshift({lat:C,lng:R})}else g.push(n.toGeoCoords(b));l.hasOwnProperty(m)&&g.unshift(l[m](p.__data,f)),h[m].apply(h,g)}}}).onRightClick(function(c,u,f){if(c){var h={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,heatmap:t.onHeatmapRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,tile:t.onTileRightClick,particles:t.onParticleRightClick,label:t.onLabelRightClick,object:t.onObjectRightClick,custom:t.onCustomLayerRightClick},p=a(c),m=p.__globeObjType;if(p&&h.hasOwnProperty(m)&&h[m]){var g=[u],b=f!=null&&f.isVector3?f:f==null?void 0:f.point;if(m==="globe"){var T=n.toGeoCoords(b),C=T.lat,R=T.lng;g.unshift({lat:C,lng:R})}else g.push(n.toGeoCoords(b));l.hasOwnProperty(m)&&g.unshift(l[m](p.__data,f)),h[m].apply(h,g)}}}),this._animationCycle()}}),Utt={width:Z.number,height:Z.number,globeOffset:Z.arrayOf(Z.number),backgroundColor:Z.string,backgroundImageUrl:Z.string,globeImageUrl:Z.string,bumpImageUrl:Z.string,globeTileEngineUrl:Z.func,showGlobe:Z.bool,showGraticules:Z.bool,showAtmosphere:Z.bool,atmosphereColor:Z.string,atmosphereAltitude:Z.number,globeMaterial:Z.object,onGlobeReady:Z.func,onGlobeClick:Z.func,onGlobeRightClick:Z.func,pointsData:Z.arrayOf(Z.object),pointLat:Z.oneOfType([Z.number,Z.string,Z.func]),pointLng:Z.oneOfType([Z.number,Z.string,Z.func]),pointColor:Z.oneOfType([Z.string,Z.func]),pointAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),pointRadius:Z.oneOfType([Z.number,Z.string,Z.func]),pointResolution:Z.number,pointsMerge:Z.bool,pointsTransitionDuration:Z.number,pointLabel:Z.oneOfType([Z.string,Z.func]),onPointClick:Z.func,onPointRightClick:Z.func,onPointHover:Z.func,arcsData:Z.arrayOf(Z.object),arcStartLat:Z.oneOfType([Z.number,Z.string,Z.func]),arcStartLng:Z.oneOfType([Z.number,Z.string,Z.func]),arcEndLat:Z.oneOfType([Z.number,Z.string,Z.func]),arcEndLng:Z.oneOfType([Z.number,Z.string,Z.func]),arcColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),arcAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),arcAltitudeAutoScale:Z.oneOfType([Z.number,Z.string,Z.func]),arcStroke:Z.oneOfType([Z.number,Z.string,Z.func]),arcCurveResolution:Z.number,arcCircularResolution:Z.number,arcDashLength:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashGap:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashInitialGap:Z.oneOfType([Z.number,Z.string,Z.func]),arcDashAnimateTime:Z.oneOfType([Z.number,Z.string,Z.func]),arcsTransitionDuration:Z.number,arcLabel:Z.oneOfType([Z.string,Z.func]),onArcClick:Z.func,onArcRightClick:Z.func,onArcHover:Z.func,polygonsData:Z.arrayOf(Z.object),polygonGeoJsonGeometry:Z.oneOfType([Z.string,Z.func]),polygonCapColor:Z.oneOfType([Z.string,Z.func]),polygonCapMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),polygonSideColor:Z.oneOfType([Z.string,Z.func]),polygonSideMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),polygonStrokeColor:Z.oneOfType([Z.string,Z.func]),polygonAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),polygonCapCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),polygonsTransitionDuration:Z.number,polygonLabel:Z.oneOfType([Z.string,Z.func]),onPolygonClick:Z.func,onPolygonRightClick:Z.func,onPolygonHover:Z.func,pathsData:Z.array,pathPoints:Z.oneOfType([Z.array,Z.string,Z.func]),pathPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),pathPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),pathPointAlt:Z.oneOfType([Z.number,Z.string,Z.func]),pathResolution:Z.number,pathColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),pathStroke:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashLength:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashGap:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashInitialGap:Z.oneOfType([Z.number,Z.string,Z.func]),pathDashAnimateTime:Z.oneOfType([Z.number,Z.string,Z.func]),pathTransitionDuration:Z.number,pathLabel:Z.oneOfType([Z.string,Z.func]),onPathClick:Z.func,onPathRightClick:Z.func,onPathHover:Z.func,heatmapsData:Z.array,heatmapPoints:Z.oneOfType([Z.array,Z.string,Z.func]),heatmapPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapPointWeight:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapBandwidth:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapColorFn:Z.oneOfType([Z.string,Z.func]),heatmapColorSaturation:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapBaseAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapTopAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),heatmapsTransitionDuration:Z.number,onHeatmapClick:Z.func,onHeatmapRightClick:Z.func,onHeatmapHover:Z.func,hexBinPointsData:Z.arrayOf(Z.object),hexBinPointLat:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinPointLng:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinPointWeight:Z.oneOfType([Z.number,Z.string,Z.func]),hexBinResolution:Z.number,hexMargin:Z.oneOfType([Z.number,Z.func]),hexTopColor:Z.func,hexSideColor:Z.func,hexAltitude:Z.oneOfType([Z.number,Z.func]),hexTopCurvatureResolution:Z.number,hexBinMerge:Z.bool,hexTransitionDuration:Z.number,hexLabel:Z.oneOfType([Z.string,Z.func]),onHexClick:Z.func,onHexRightClick:Z.func,onHexHover:Z.func,hexPolygonsData:Z.arrayOf(Z.object),hexPolygonGeoJsonGeometry:Z.oneOfType([Z.string,Z.func]),hexPolygonColor:Z.oneOfType([Z.string,Z.func]),hexPolygonAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonMargin:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonUseDots:Z.oneOfType([Z.bool,Z.string,Z.func]),hexPolygonCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonDotResolution:Z.oneOfType([Z.number,Z.string,Z.func]),hexPolygonsTransitionDuration:Z.number,hexPolygonLabel:Z.oneOfType([Z.string,Z.func]),onHexPolygonClick:Z.func,onHexPolygonRightClick:Z.func,onHexPolygonHover:Z.func,tilesData:Z.arrayOf(Z.object),tileLat:Z.oneOfType([Z.number,Z.string,Z.func]),tileLng:Z.oneOfType([Z.number,Z.string,Z.func]),tileAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),tileWidth:Z.oneOfType([Z.number,Z.string,Z.func]),tileHeight:Z.oneOfType([Z.number,Z.string,Z.func]),tileUseGlobeProjection:Z.oneOfType([Z.bool,Z.string,Z.func]),tileMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),tileCurvatureResolution:Z.oneOfType([Z.number,Z.string,Z.func]),tilesTransitionDuration:Z.number,tileLabel:Z.oneOfType([Z.string,Z.func]),onTileClick:Z.func,onTileRightClick:Z.func,onTileHover:Z.func,particlesData:Z.arrayOf(Z.object),particlesList:Z.oneOfType([Z.string,Z.func]),particleLat:Z.oneOfType([Z.number,Z.string,Z.func]),particleLng:Z.oneOfType([Z.number,Z.string,Z.func]),particleAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),particlesSize:Z.oneOfType([Z.number,Z.string,Z.func]),particlesSizeAttenuation:Z.oneOfType([Z.bool,Z.string,Z.func]),particlesColor:Z.oneOfType([Z.string,Z.func]),particlesTexture:Z.oneOfType([Z.string,Z.func]),particleLabel:Z.oneOfType([Z.string,Z.func]),onParticleClick:Z.func,onParticleRightClick:Z.func,onParticleHover:Z.func,ringsData:Z.arrayOf(Z.object),ringLat:Z.oneOfType([Z.number,Z.string,Z.func]),ringLng:Z.oneOfType([Z.number,Z.string,Z.func]),ringAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),ringColor:Z.oneOfType([Z.string,Z.arrayOf(Z.string),Z.func]),ringResolution:Z.number,ringMaxRadius:Z.oneOfType([Z.number,Z.string,Z.func]),ringPropagationSpeed:Z.oneOfType([Z.number,Z.string,Z.func]),ringRepeatPeriod:Z.oneOfType([Z.number,Z.string,Z.func]),labelsData:Z.arrayOf(Z.object),labelLat:Z.oneOfType([Z.number,Z.string,Z.func]),labelLng:Z.oneOfType([Z.number,Z.string,Z.func]),labelAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),labelRotation:Z.oneOfType([Z.number,Z.string,Z.func]),labelText:Z.oneOfType([Z.string,Z.func]),labelSize:Z.oneOfType([Z.number,Z.string,Z.func]),labelTypeFace:Z.object,labelColor:Z.oneOfType([Z.string,Z.func]),labelResolution:Z.number,labelIncludeDot:Z.oneOfType([Z.bool,Z.string,Z.func]),labelDotRadius:Z.oneOfType([Z.number,Z.string,Z.func]),labelDotOrientation:Z.oneOfType([Z.string,Z.func]),labelsTransitionDuration:Z.number,labelLabel:Z.oneOfType([Z.string,Z.func]),onLabelClick:Z.func,onLabelRightClick:Z.func,onLabelHover:Z.func,htmlElementsData:Z.arrayOf(Z.object),htmlLat:Z.oneOfType([Z.number,Z.string,Z.func]),htmlLng:Z.oneOfType([Z.number,Z.string,Z.func]),htmlAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),htmlElement:Z.oneOfType([Z.string,Z.func]),htmlTransitionDuration:Z.number,objectsData:Z.arrayOf(Z.object),objectLat:Z.oneOfType([Z.number,Z.string,Z.func]),objectLng:Z.oneOfType([Z.number,Z.string,Z.func]),objectAltitude:Z.oneOfType([Z.number,Z.string,Z.func]),objectRotation:Z.oneOfType([Z.shape({x:Z.number,y:Z.number,z:Z.number}),Z.string,Z.func]),objectFacesSurface:Z.oneOfType([Z.bool,Z.string,Z.func]),objectThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),objectLabel:Z.oneOfType([Z.string,Z.func]),onObjectClick:Z.func,onObjectRightClick:Z.func,onObjectHover:Z.func,customLayerData:Z.arrayOf(Z.object),customThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),customThreeObjectUpdate:Z.oneOfType([Z.string,Z.func]),customLayerLabel:Z.oneOfType([Z.string,Z.func]),onCustomLayerClick:Z.func,onCustomLayerRightClick:Z.func,onCustomLayerHover:Z.func,enablePointerInteraction:Z.bool,pointerEventsFilter:Z.func,lineHoverPrecision:Z.number,onZoom:Z.func},zH=V6e(Ftt,{methodNames:["pauseAnimation","resumeAnimation","pointOfView","lights","scene","camera","renderer","postProcessingComposer","controls","getGlobeRadius","getCoords","getScreenCoords","toGeoCoords","toGlobeCoords"],initPropNames:["animateIn","waitForGlobeReady","rendererConfig"]});zH.displayName="Globe";zH.propTypes=Utt;function ktt(){const[i,e]=X.useState(!1),t=()=>{navigator.clipboard.writeText("nimanthairesh9@gmail.com"),e(!0),setTimeout(()=>{e(!0)},2e3)};return ce.jsxs("section",{className:"my-20 px-4",id:"about",children:[ce.jsx("p",{className:"relative text-headtext",children:"About Me"}),ce.jsxs("div",{className:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5 h-full",children:[ce.jsx("div",{className:"col-span-1 xl:row-span-3 flex flex-col items-center justify-center",children:ce.jsxs("div",{className:"w-full",children:[ce.jsx("img",{src:"src/public/assets/grid1.png",alt:"mypic",className:"w-full sm:h-[276px] h-auto object-cover rounded-lg shadow-lg"}),ce.jsxs("div",{className:"mt-4",children:[ce.jsx("p",{className:"text-xl font-semibold  text-neutral-500",children:"Hi, I'm Iresh Nimantha"}),ce.jsx("p",{className:"grid-subtext",children:"Hi, Im Svetoslav! Im a passionate web developer, specializing in building interactive and responsive websites with modern technologies like WordPress, React.js, and Python. With over 10 years of experience, Ive honed my skills in both web development and digital marketing, and I thrive on creating impactful solutions that help businesses succeed online."})]})]})}),ce.jsx("div",{className:"col-span-1 xl:row-span-3",children:ce.jsxs("div",{className:"grid-container",children:[ce.jsx("img",{src:"src/public/assets/grid2.png",alt:"myskils",className:"w-full sm:h-[276px] h-fit object-contain "}),ce.jsxs("div",{children:[ce.jsx("p",{className:"grid-headtext",children:"Teck Stack"}),ce.jsx("p",{className:"grid-subtext",children:"I specialized in js/ts with focus on react and Next.js ecosystem"})]})]})}),ce.jsx("div",{className:"col-span-1 xl:row-span-4",children:ce.jsxs("div",{className:"grid-container",children:[ce.jsx("div",{className:"rounded-3xl w-full sm:h-[326px] h-hit flex justify-center",children:ce.jsx(zH,{height:326,width:326,backgroundColor:"rgba(0, 0, 0, 0)",backgroundImageOpacity:.5,showAtmosphere:!0,showGraticules:!0,globeImageUrl:"https://unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"https://unpkg.com/three-globe/example/img/earth-topology.png",labelsData:[{lat:7.8731,lng:80.7718,text:"I'm here!",color:"black",size:500}]})}),ce.jsxs("div",{children:[ce.jsx("p",{className:"grid-headtext",children:"I work remortly accross time zone."}),ce.jsx("p",{className:"grid-subtext",children:"Based in sri lanka, with remote work avilable."}),ce.jsx("a",{href:"#contact",children:ce.jsx(iae,{name:"Contact me",isBeam:!0,continerClass:"w-full mt-10"})})]})]})}),ce.jsx("div",{className:"xl:col-span-2 xl:row-span-3",children:ce.jsxs("div",{className:"grid-container",children:[ce.jsx("img",{src:"src/public/assets/grid3.png",alt:"",className:"w-full sm:h-[266px] h-fit object-contain"}),ce.jsxs("div",{children:[ce.jsx("p",{className:"grid-headtext",children:"My Passion for coding"}),ce.jsx("p",{className:"grid-subtext",children:"My Passion for coding, I specialized in js/ts with focus on react and Next.js ecosystem"})]})]})}),ce.jsx("div",{className:"xl:col-span-1 xl:row-span-2",children:ce.jsxs("div",{className:"grid-container",children:[ce.jsx("img",{src:"src/public/assets/grid4.png",alt:"grid4",className:"w-full md:h-[126px] sm:h-[266px] h-fit object-cover sm:object-top"}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsx("p",{className:"grid-subtext text-center",children:"Contact me"}),ce.jsxs("div",{className:"copy-container",onClick:t,children:[ce.jsx("img",{src:i?"src/public/assets/tick.svg":"src/public/assets/copy.svg",alt:"copy"}),ce.jsx("p",{className:"lg:text-1xl md:text-xl font-medium text-gray_gradient text-white",children:"nimanthairesh9@gmail.com"})]})]})]})})]})]})}const Gtt=i=>{const e=X.useRef(),{nodes:t,materials:n,animations:r}=Up("src/public/models/computer.glb"),{actions:s}=_re(r,e),o=RRe(i.texture?i.texture:"src/public/textures/project/project1.mp4");return $G(()=>{qG.from(e.current.rotation,{y:Math.PI/2,duration:1,ease:"power3.out"})}),X.useEffect(()=>{o&&(o.flipY=!1)},[o]),ce.jsx("group",{ref:e,...i,dispose:null,children:ce.jsxs("group",{name:"Scene",children:[ce.jsx("mesh",{name:"monitor-screen",castShadow:!0,receiveShadow:!0,geometry:t["monitor-screen"].geometry,material:t["monitor-screen"].material,position:[.127,1.831,.511],rotation:[1.571,-.005,.031],scale:[.661,.608,.401],children:ce.jsx("meshBasicMaterial",{map:o})}),ce.jsxs("group",{name:"RootNode",position:[0,1.093,0],rotation:[-Math.PI/2,0,-.033],scale:.045,children:[ce.jsx("group",{name:"Screen001",position:[5.658,1.643,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen002",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen003",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen004",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen005",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen006",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen007",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen008",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen009",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen010",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen011",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen012",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen013",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen014",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen015",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen016",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen017",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen018",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen019",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen020",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen021",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen022",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen023",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen024",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen025",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen026",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen027",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen028",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen029",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen030",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen031",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen032",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen033",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen034",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen035",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen036",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen037",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen038",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen039",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen040",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen041",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen042",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen043",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen044",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen045",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen046",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen047",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen048",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen049",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen050",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen051",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen052",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen053",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen054",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen055",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen056",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen057",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen058",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen059",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen060",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen061",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen062",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen063",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen064",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen065",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen066",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen067",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen068",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen069",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen070",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen071",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen072",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen073",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen074",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen075",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen076",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen077",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen078",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen079",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen080",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen081",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen082",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen083",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen084",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen085",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen086",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen087",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen088",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen089",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen090",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen091",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen092",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen093",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen094",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen095",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen096",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen097",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen098",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen099",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen100",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen101",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen102",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen103",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen104",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen105",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen106",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen107",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen108",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen109",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen110",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen111",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen112",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen113",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen114",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen115",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen116",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen117",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen118",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen119",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen120",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen121",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen122",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen123",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen124",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen125",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen126",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen127",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen128",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen129",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen130",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen131",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen132",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen133",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen134",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen135",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen136",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen137",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen138",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen139",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen140",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen141",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen142",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen143",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen144",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen145",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen146",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen147",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Screen148",position:[5.658,1.644,.812],rotation:[Math.PI/2,0,0],scale:[.923,.855,.855]}),ce.jsx("group",{name:"Tower-light-007",position:[16.089,-3.47,-14.495],rotation:[Math.PI/2,0,0],scale:.963}),ce.jsx("group",{name:"Tower-light-008",position:[15.155,-3.47,-14.495],rotation:[Math.PI/2,0,0],scale:.963})]}),ce.jsxs("group",{name:"Monitor-B-_computer_0",position:[.266,1.132,.051],rotation:[0,-.033,0],scale:[.042,.045,.045],children:[ce.jsx("mesh",{name:"Monitor-B-_computer_0_1",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_1"].geometry,material:n.computer}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_2",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_2"].geometry,material:n.base__0}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_3",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_3"].geometry,material:n.Material_36}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_4",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_4"].geometry,material:n.Material_35}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_5",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_5"].geometry,material:n.Material_34}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_6",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_6"].geometry,material:n.keys}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_7",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_7"].geometry,material:n.keys2}),ce.jsx("mesh",{name:"Monitor-B-_computer_0_8",castShadow:!0,receiveShadow:!0,geometry:t["Monitor-B-_computer_0_8"].geometry,material:n.Material_37})]})]})})};Up.preload("src/public/models/computer.glb");const UJ=qee.length;function ztt(){const[i,e]=X.useState(0),t=qee[i],n=r=>{e(s=>r==="previous"?s===0?UJ-1:s-1:s===UJ-1?0:s+1)};return ce.jsxs("section",{className:"c-space my-20",id:"work",children:[ce.jsx("p",{className:"head-text",children:"My Selected Work"}),ce.jsxs("div",{className:"grid lg:grid-cols-2 grid-cols-1 mt-12 gap-5 w-full",children:[ce.jsxs("div",{className:"flex flex-col gap-5 relative sm:p-10 py-10 px-5 shadow-2xl shadow-black-200",children:[ce.jsx("div",{className:"absolute top-0 right-0",children:ce.jsx("img",{src:t.spotlight,alt:"spotlight",className:"w-full h-96 object-cover rounded-xl"})}),ce.jsx("div",{className:"p-3 backdrop-filter backdrop-blur-3xl w-fit rounded-lg",style:t.logoStyle,children:ce.jsx("img",{className:"w-10 h-10 shadow-sm",src:t.logo,alt:"logo"})}),ce.jsxs("div",{className:"flex flex-col gap-5 text-white-600 my-5",children:[ce.jsx("p",{className:"text-white text-2xl font-semibold animatedText",children:t.title}),ce.jsx("p",{className:"animatedText",children:t.desc}),ce.jsx("p",{className:"animatedText",children:t.subdesc})]}),ce.jsx("div",{className:"flex items-center justify-between flex-wrap gap-5",children:ce.jsx("div",{className:"flex items-center gap-3",children:t.tags.map((r,s)=>ce.jsx("div",{className:"tech-logo",children:ce.jsx("img",{src:r.path,alt:r.name})},s))})}),ce.jsxs("div",{className:"flex justify-between items-center mt-7",children:[ce.jsx("button",{className:"arrow-btn",onClick:()=>n("previous"),children:ce.jsx("img",{src:"src/public/assets/left-arrow.png",alt:"left-arrow",className:"w-3 h-3"})}),ce.jsx("button",{className:"arrow-btn",onClick:()=>n("next"),children:ce.jsx("img",{src:"src/public/assets/right-arrow.png",alt:"right-arrow",className:"w-3 h-3"})})]})]}),ce.jsx("div",{className:"border border-black-300 bg-black-200 rounded-lg h-96 md:h-full",children:ce.jsxs(G9,{children:[ce.jsx("ambientLight",{intensity:Math.PI}),ce.jsx("directionalLight",{position:[10,10,5]}),ce.jsx(LRe,{children:ce.jsx(X.Suspense,{fallback:ce.jsx(aG,{}),children:ce.jsx("group",{scale:2,position:[0,-3,0],rotation:[0,-.1,0],children:ce.jsx(Gtt,{texture:t.texture})})})}),ce.jsx(tie,{enableZoom:!1,maxPolarAngle:Math.PI/2})]})})]})]})}function Htt(){return ce.jsxs("section",{className:"c-space my-20",id:"work",children:[ce.jsx("p",{className:"head-text",children:"Here from My Clients"}),ce.jsx("div",{className:"client-container",children:cme.map(({id:i,name:e,position:t,img:n,review:r})=>ce.jsxs("div",{className:"client-review",children:[ce.jsx("div",{className:"",children:ce.jsx("p",{className:"text-white font-light",children:r})}),ce.jsxs("div",{className:"client-content",children:[ce.jsxs("div",{className:"flex gap-3",children:[ce.jsx("img",{src:n,alt:e,className:" w-12 h-12 rounded-full"}),ce.jsxs("div",{className:"flex flex-col",children:[ce.jsx("p",{className:"font-semibold text-white-800",children:e}),ce.jsx("p",{className:"text-white-500 md:text-base text-sm font-light",children:t})]})]}),ce.jsx("div",{className:"flex self-end items-center gap-2",children:Array.from({length:5}).map((s,o)=>ce.jsx("img",{src:"src/public/assets/star.png",className:"w-5 h-5 "},o))})]})]},i))})]})}class aC{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Vtt=()=>{if(!(typeof localStorage>"u"))return{get:i=>Promise.resolve(localStorage.getItem(i)),set:(i,e)=>Promise.resolve(localStorage.setItem(i,e)),remove:i=>Promise.resolve(localStorage.removeItem(i))}},Vl={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Vtt()},HH=i=>i?typeof i=="string"?{publicKey:i}:i.toString()==="[object Object]"?i:{}:{},qtt=(i,e="https://api.emailjs.com")=>{if(!i)return;const t=HH(i);Vl.publicKey=t.publicKey,Vl.blockHeadless=t.blockHeadless,Vl.storageProvider=t.storageProvider,Vl.blockList=t.blockList,Vl.limitRate=t.limitRate,Vl.origin=t.origin||e},upe=async(i,e,t={})=>{const n=await fetch(Vl.origin+i,{method:"POST",headers:t,body:e}),r=await n.text(),s=new aC(n.status,r);if(n.ok)return s;throw s},fpe=(i,e,t)=>{if(!i||typeof i!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$tt=i=>{if(i&&i.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},hpe=i=>i.webdriver||!i.languages||i.languages.length===0,dpe=()=>new aC(451,"Unavailable For Headless Browser"),jtt=(i,e)=>{if(!Array.isArray(i))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Wtt=i=>{var e;return!((e=i.list)!=null&&e.length)||!i.watchVariable},Ktt=(i,e)=>i instanceof FormData?i.get(e):i[e],ppe=(i,e)=>{if(Wtt(i))return!1;jtt(i.list,i.watchVariable);const t=Ktt(e,i.watchVariable);return typeof t!="string"?!1:i.list.includes(t)},Ape=()=>new aC(403,"Forbidden"),Ytt=(i,e)=>{if(typeof i!="number"||i<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Xtt=async(i,e,t)=>{const n=Number(await t.get(i)||0);return e-Date.now()+n},mpe=async(i,e,t)=>{if(!e.throttle||!t)return!1;Ytt(e.throttle,e.id);const n=e.id||i;return await Xtt(n,e.throttle,t)>0?!0:(await t.set(n,Date.now().toString()),!1)},gpe=()=>new aC(429,"Too Many Requests"),Qtt=async(i,e,t,n)=>{const r=HH(n),s=r.publicKey||Vl.publicKey,o=r.blockHeadless||Vl.blockHeadless,a=r.storageProvider||Vl.storageProvider,l={...Vl.blockList,...r.blockList},c={...Vl.limitRate,...r.limitRate};return o&&hpe(navigator)?Promise.reject(dpe()):(fpe(s,i,e),$tt(t),t&&ppe(l,t)?Promise.reject(Ape()):await mpe(location.pathname,c,a)?Promise.reject(gpe()):upe("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Ztt=i=>{if(!i||i.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Jtt=i=>typeof i=="string"?document.querySelector(i):i,ent=async(i,e,t,n)=>{const r=HH(n),s=r.publicKey||Vl.publicKey,o=r.blockHeadless||Vl.blockHeadless,a=Vl.storageProvider||r.storageProvider,l={...Vl.blockList,...r.blockList},c={...Vl.limitRate,...r.limitRate};if(o&&hpe(navigator))return Promise.reject(dpe());const u=Jtt(t);fpe(s,i,e),Ztt(u);const f=new FormData(u);return ppe(l,f)?Promise.reject(Ape()):await mpe(location.pathname,c,a)?Promise.reject(gpe()):(f.append("lib_version","4.4.1"),f.append("service_id",i),f.append("template_id",e),f.append("user_id",s),upe("/api/v1.0/email/send-form",f))},tnt={init:qtt,send:Qtt,sendForm:ent,EmailJSResponseStatus:aC};/*!
* sweetalert2 v11.17.2
* Released under the MIT License.
*/function ype(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function nnt(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kJ(i,e){return i.get(ype(i,e))}function int(i,e,t){nnt(i,e),e.set(i,t)}function rnt(i,e,t){return i.set(ype(i,e),t),t}const snt=100,pi={},ont=()=>{pi.previousActiveElement instanceof HTMLElement?(pi.previousActiveElement.focus(),pi.previousActiveElement=null):document.body&&document.body.focus()},ant=i=>new Promise(e=>{if(!i)return e();const t=window.scrollX,n=window.scrollY;pi.restoreFocusTimeout=setTimeout(()=>{ont(),e()},snt),window.scrollTo(t,n)}),vpe="swal2-",lnt=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],wt=lnt.reduce((i,e)=>(i[e]=vpe+e,i),{}),cnt=["success","warning","info","question","error"],E8=cnt.reduce((i,e)=>(i[e]=vpe+e,i),{}),xpe="SweetAlert2:",VH=i=>i.charAt(0).toUpperCase()+i.slice(1),Au=i=>{console.warn(`${xpe} ${typeof i=="object"?i.join(" "):i}`)},vb=i=>{console.error(`${xpe} ${i}`)},GJ=[],unt=i=>{GJ.includes(i)||(GJ.push(i),Au(i))},bpe=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;unt(`"${i}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},BN=i=>typeof i=="function"?i():i,qH=i=>i&&typeof i.toPromise=="function",lC=i=>qH(i)?i.toPromise():Promise.resolve(i),$H=i=>i&&Promise.resolve(i)===i,yu=()=>document.body.querySelector(`.${wt.container}`),cC=i=>{const e=yu();return e?e.querySelector(i):null},yh=i=>cC(`.${i}`),kr=()=>yh(wt.popup),xT=()=>yh(wt.icon),fnt=()=>yh(wt["icon-content"]),_pe=()=>yh(wt.title),jH=()=>yh(wt["html-container"]),Spe=()=>yh(wt.image),WH=()=>yh(wt["progress-steps"]),IN=()=>yh(wt["validation-message"]),EA=()=>cC(`.${wt.actions} .${wt.confirm}`),bT=()=>cC(`.${wt.actions} .${wt.cancel}`),xb=()=>cC(`.${wt.actions} .${wt.deny}`),hnt=()=>yh(wt["input-label"]),_T=()=>cC(`.${wt.loader}`),uC=()=>yh(wt.actions),Tpe=()=>yh(wt.footer),ON=()=>yh(wt["timer-progress-bar"]),KH=()=>yh(wt.close),dnt=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,YH=()=>{const i=kr();if(!i)return[];const e=i.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((s,o)=>{const a=parseInt(s.getAttribute("tabindex")||"0"),l=parseInt(o.getAttribute("tabindex")||"0");return a>l?1:a<l?-1:0}),n=i.querySelectorAll(dnt),r=Array.from(n).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(r))].filter(s=>af(s))},XH=()=>Zm(document.body,wt.shown)&&!Zm(document.body,wt["toast-shown"])&&!Zm(document.body,wt["no-backdrop"]),FN=()=>{const i=kr();return i?Zm(i,wt.toast):!1},pnt=()=>{const i=kr();return i?i.hasAttribute("data-loading"):!1},vh=(i,e)=>{if(i.textContent="",e){const n=new DOMParser().parseFromString(e,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach(o=>{i.appendChild(o)});const s=n.querySelector("body");s&&Array.from(s.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?i.appendChild(o.cloneNode(!0)):i.appendChild(o)})}},Zm=(i,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let n=0;n<t.length;n++)if(!i.classList.contains(t[n]))return!1;return!0},Ant=(i,e)=>{Array.from(i.classList).forEach(t=>{!Object.values(wt).includes(t)&&!Object.values(E8).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&i.classList.remove(t)})},uh=(i,e,t)=>{if(Ant(i,e),!e.customClass)return;const n=e.customClass[t];if(n){if(typeof n!="string"&&!n.forEach){Au(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof n}"`);return}Dr(i,n)}},UN=(i,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return i.querySelector(`.${wt.popup} > .${wt[e]}`);case"checkbox":return i.querySelector(`.${wt.popup} > .${wt.checkbox} input`);case"radio":return i.querySelector(`.${wt.popup} > .${wt.radio} input:checked`)||i.querySelector(`.${wt.popup} > .${wt.radio} input:first-child`);case"range":return i.querySelector(`.${wt.popup} > .${wt.range} input`);default:return i.querySelector(`.${wt.popup} > .${wt.input}`)}},Epe=i=>{if(i.focus(),i.type!=="file"){const e=i.value;i.value="",i.value=e}},wpe=(i,e,t)=>{!i||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(n=>{Array.isArray(i)?i.forEach(r=>{t?r.classList.add(n):r.classList.remove(n)}):t?i.classList.add(n):i.classList.remove(n)}))},Dr=(i,e)=>{wpe(i,e,!0)},Md=(i,e)=>{wpe(i,e,!1)},ky=(i,e)=>{const t=Array.from(i.children);for(let n=0;n<t.length;n++){const r=t[n];if(r instanceof HTMLElement&&Zm(r,e))return r}},yx=(i,e,t)=>{t===`${parseInt(t)}`&&(t=parseInt(t)),t||parseInt(t)===0?i.style.setProperty(e,typeof t=="number"?`${t}px`:t):i.style.removeProperty(e)},Ml=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";i&&(i.style.display=e)},Cc=i=>{i&&(i.style.display="none")},QH=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";i&&new MutationObserver(()=>{fC(i,i.innerHTML,e)}).observe(i,{childList:!0,subtree:!0})},zJ=(i,e,t,n)=>{const r=i.querySelector(e);r&&r.style.setProperty(t,n)},fC=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?Ml(i,t):Cc(i)},af=i=>!!(i&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)),mnt=()=>!af(EA())&&!af(xb())&&!af(bT()),HJ=i=>i.scrollHeight>i.clientHeight,Mpe=i=>{const e=window.getComputedStyle(i),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),n=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||n>0},ZH=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const t=ON();t&&af(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${i/1e3}s linear`,t.style.width="0%"},10))},gnt=()=>{const i=ON();if(!i)return;const e=parseInt(window.getComputedStyle(i).width);i.style.removeProperty("transition"),i.style.width="100%";const t=parseInt(window.getComputedStyle(i).width),n=e/t*100;i.style.width=`${n}%`},ynt=()=>typeof window>"u"||typeof document>"u",vnt=`
 <div aria-labelledby="${wt.title}" aria-describedby="${wt["html-container"]}" class="${wt.popup}" tabindex="-1">
   <button type="button" class="${wt.close}"></button>
   <ul class="${wt["progress-steps"]}"></ul>
   <div class="${wt.icon}"></div>
   <img class="${wt.image}" />
   <h2 class="${wt.title}" id="${wt.title}"></h2>
   <div class="${wt["html-container"]}" id="${wt["html-container"]}"></div>
   <input class="${wt.input}" id="${wt.input}" />
   <input type="file" class="${wt.file}" />
   <div class="${wt.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${wt.select}" id="${wt.select}"></select>
   <div class="${wt.radio}"></div>
   <label class="${wt.checkbox}">
     <input type="checkbox" id="${wt.checkbox}" />
     <span class="${wt.label}"></span>
   </label>
   <textarea class="${wt.textarea}" id="${wt.textarea}"></textarea>
   <div class="${wt["validation-message"]}" id="${wt["validation-message"]}"></div>
   <div class="${wt.actions}">
     <div class="${wt.loader}"></div>
     <button type="button" class="${wt.confirm}"></button>
     <button type="button" class="${wt.deny}"></button>
     <button type="button" class="${wt.cancel}"></button>
   </div>
   <div class="${wt.footer}"></div>
   <div class="${wt["timer-progress-bar-container"]}">
     <div class="${wt["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),xnt=()=>{const i=yu();return i?(i.remove(),Md([document.documentElement,document.body],[wt["no-backdrop"],wt["toast-shown"],wt["has-column"]]),!0):!1},Sv=()=>{pi.currentInstance.resetValidationMessage()},bnt=()=>{const i=kr(),e=ky(i,wt.input),t=ky(i,wt.file),n=i.querySelector(`.${wt.range} input`),r=i.querySelector(`.${wt.range} output`),s=ky(i,wt.select),o=i.querySelector(`.${wt.checkbox} input`),a=ky(i,wt.textarea);e.oninput=Sv,t.onchange=Sv,s.onchange=Sv,o.onchange=Sv,a.oninput=Sv,n.oninput=()=>{Sv(),r.value=n.value},n.onchange=()=>{Sv(),r.value=n.value}},_nt=i=>typeof i=="string"?document.querySelector(i):i,Snt=i=>{const e=kr();e.setAttribute("role",i.toast?"alert":"dialog"),e.setAttribute("aria-live",i.toast?"polite":"assertive"),i.toast||e.setAttribute("aria-modal","true")},Tnt=i=>{window.getComputedStyle(i).direction==="rtl"&&Dr(yu(),wt.rtl)},Ent=i=>{const e=xnt();if(ynt()){vb("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=wt.container,e&&Dr(t,wt["no-transition"]),vh(t,vnt),t.dataset.swal2Theme=i.theme;const n=_nt(i.target);n.appendChild(t),Snt(i),Tnt(n),bnt()},JH=(i,e)=>{i instanceof HTMLElement?e.appendChild(i):typeof i=="object"?wnt(i,e):i&&vh(e,i)},wnt=(i,e)=>{i.jquery?Mnt(e,i):vh(e,i.toString())},Mnt=(i,e)=>{if(i.textContent="",0 in e)for(let t=0;t in e;t++)i.appendChild(e[t].cloneNode(!0));else i.appendChild(e.cloneNode(!0))},Cnt=(i,e)=>{const t=uC(),n=_T();!t||!n||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Cc(t):Ml(t),uh(t,e,"actions"),Rnt(t,n,e),vh(n,e.loaderHtml||""),uh(n,e,"loader"))};function Rnt(i,e,t){const n=EA(),r=xb(),s=bT();!n||!r||!s||(uF(n,"confirm",t),uF(r,"deny",t),uF(s,"cancel",t),Dnt(n,r,s,t),t.reverseButtons&&(t.toast?(i.insertBefore(s,n),i.insertBefore(r,n)):(i.insertBefore(s,e),i.insertBefore(r,e),i.insertBefore(n,e))))}function Dnt(i,e,t,n){if(!n.buttonsStyling){Md([i,e,t],wt.styled);return}Dr([i,e,t],wt.styled),n.confirmButtonColor&&(i.style.backgroundColor=n.confirmButtonColor,Dr(i,wt["default-outline"])),n.denyButtonColor&&(e.style.backgroundColor=n.denyButtonColor,Dr(e,wt["default-outline"])),n.cancelButtonColor&&(t.style.backgroundColor=n.cancelButtonColor,Dr(t,wt["default-outline"]))}function uF(i,e,t){const n=VH(e);fC(i,t[`show${n}Button`],"inline-block"),vh(i,t[`${e}ButtonText`]||""),i.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),i.className=wt[e],uh(i,t,`${e}Button`)}const Lnt=(i,e)=>{const t=KH();t&&(vh(t,e.closeButtonHtml||""),uh(t,e,"closeButton"),fC(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Pnt=(i,e)=>{const t=yu();t&&(Nnt(t,e.backdrop),Bnt(t,e.position),Int(t,e.grow),uh(t,e,"container"))};function Nnt(i,e){typeof e=="string"?i.style.background=e:e||Dr([document.documentElement,document.body],wt["no-backdrop"])}function Bnt(i,e){e&&(e in wt?Dr(i,wt[e]):(Au('The "position" parameter is not valid, defaulting to "center"'),Dr(i,wt.center)))}function Int(i,e){e&&Dr(i,wt[`grow-${e}`])}var Vs={innerParams:new WeakMap,domCache:new WeakMap};const Ont=["input","file","range","select","radio","checkbox","textarea"],Fnt=(i,e)=>{const t=kr();if(!t)return;const n=Vs.innerParams.get(i),r=!n||e.input!==n.input;Ont.forEach(s=>{const o=ky(t,wt[s]);o&&(Gnt(s,e.inputAttributes),o.className=wt[s],r&&Cc(o))}),e.input&&(r&&Unt(e),znt(e))},Unt=i=>{if(!i.input)return;if(!fa[i.input]){vb(`Unexpected type of input! Expected ${Object.keys(fa).join(" | ")}, got "${i.input}"`);return}const e=Cpe(i.input);if(!e)return;const t=fa[i.input](e,i);Ml(e),i.inputAutoFocus&&setTimeout(()=>{Epe(t)})},knt=i=>{for(let e=0;e<i.attributes.length;e++){const t=i.attributes[e].name;["id","type","value","style"].includes(t)||i.removeAttribute(t)}},Gnt=(i,e)=>{const t=kr();if(!t)return;const n=UN(t,i);if(n){knt(n);for(const r in e)n.setAttribute(r,e[r])}},znt=i=>{if(!i.input)return;const e=Cpe(i.input);e&&uh(e,i,"input")},eV=(i,e)=>{!i.placeholder&&e.inputPlaceholder&&(i.placeholder=e.inputPlaceholder)},hC=(i,e,t)=>{if(t.inputLabel){const n=document.createElement("label"),r=wt["input-label"];n.setAttribute("for",i.id),n.className=r,typeof t.customClass=="object"&&Dr(n,t.customClass.inputLabel),n.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",n)}},Cpe=i=>{const e=kr();if(e)return ky(e,wt[i]||wt.input)},w8=(i,e)=>{["string","number"].includes(typeof e)?i.value=`${e}`:$H(e)||Au(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},fa={};fa.text=fa.email=fa.password=fa.number=fa.tel=fa.url=fa.search=fa.date=fa["datetime-local"]=fa.time=fa.week=fa.month=(i,e)=>(w8(i,e.inputValue),hC(i,i,e),eV(i,e),i.type=e.input,i);fa.file=(i,e)=>(hC(i,i,e),eV(i,e),i);fa.range=(i,e)=>{const t=i.querySelector("input"),n=i.querySelector("output");return w8(t,e.inputValue),t.type=e.input,w8(n,e.inputValue),hC(t,i,e),i};fa.select=(i,e)=>{if(i.textContent="",e.inputPlaceholder){const t=document.createElement("option");vh(t,e.inputPlaceholder),t.value="",t.disabled=!0,t.selected=!0,i.appendChild(t)}return hC(i,i,e),i};fa.radio=i=>(i.textContent="",i);fa.checkbox=(i,e)=>{const t=UN(kr(),"checkbox");t.value="1",t.checked=!!e.inputValue;const n=i.querySelector("span");return vh(n,e.inputPlaceholder||e.inputLabel),t};fa.textarea=(i,e)=>{w8(i,e.inputValue),eV(i,e),hC(i,i,e);const t=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(kr()).width),r=()=>{if(!document.body.contains(i))return;const s=i.offsetWidth+t(i);s>n?kr().style.width=`${s}px`:yx(kr(),"width",e.width)};new MutationObserver(r).observe(i,{attributes:!0,attributeFilter:["style"]})}}),i};const Hnt=(i,e)=>{const t=jH();t&&(QH(t),uh(t,e,"htmlContainer"),e.html?(JH(e.html,t),Ml(t,"block")):e.text?(t.textContent=e.text,Ml(t,"block")):Cc(t),Fnt(i,e))},Vnt=(i,e)=>{const t=Tpe();t&&(QH(t),fC(t,e.footer,"block"),e.footer&&JH(e.footer,t),uh(t,e,"footer"))},qnt=(i,e)=>{const t=Vs.innerParams.get(i),n=xT();if(!n)return;if(t&&e.icon===t.icon){qJ(n,e),VJ(n,e);return}if(!e.icon&&!e.iconHtml){Cc(n);return}if(e.icon&&Object.keys(E8).indexOf(e.icon)===-1){vb(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Cc(n);return}Ml(n),qJ(n,e),VJ(n,e),Dr(n,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Rpe)},VJ=(i,e)=>{for(const[t,n]of Object.entries(E8))e.icon!==t&&Md(i,n);Dr(i,e.icon&&E8[e.icon]),Wnt(i,e),Rpe(),uh(i,e,"icon")},Rpe=()=>{const i=kr();if(!i)return;const e=window.getComputedStyle(i).getPropertyValue("background-color"),t=i.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<t.length;n++)t[n].style.backgroundColor=e},$nt=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,jnt=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,qJ=(i,e)=>{if(!e.icon&&!e.iconHtml)return;let t=i.innerHTML,n="";e.iconHtml?n=$J(e.iconHtml):e.icon==="success"?(n=$nt,t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?n=jnt:e.icon&&(n=$J({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==n.trim()&&vh(i,n)},Wnt=(i,e)=>{if(e.iconColor){i.style.color=e.iconColor,i.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])zJ(i,t,"background-color",e.iconColor);zJ(i,".swal2-success-ring","border-color",e.iconColor)}},$J=i=>`<div class="${wt["icon-content"]}">${i}</div>`,Knt=(i,e)=>{const t=Spe();if(t){if(!e.imageUrl){Cc(t);return}Ml(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),yx(t,"width",e.imageWidth),yx(t,"height",e.imageHeight),t.className=wt.image,uh(t,e,"image")}};let tV=!1,Dpe=0,Lpe=0,Ppe=0,Npe=0;const Ynt=i=>{i.addEventListener("mousedown",M8),document.body.addEventListener("mousemove",C8),i.addEventListener("mouseup",R8),i.addEventListener("touchstart",M8),document.body.addEventListener("touchmove",C8),i.addEventListener("touchend",R8)},Xnt=i=>{i.removeEventListener("mousedown",M8),document.body.removeEventListener("mousemove",C8),i.removeEventListener("mouseup",R8),i.removeEventListener("touchstart",M8),document.body.removeEventListener("touchmove",C8),i.removeEventListener("touchend",R8)},M8=i=>{const e=kr();if(i.target===e||xT().contains(i.target)){tV=!0;const t=Bpe(i);Dpe=t.clientX,Lpe=t.clientY,Ppe=parseInt(e.style.insetInlineStart)||0,Npe=parseInt(e.style.insetBlockStart)||0,Dr(e,"swal2-dragging")}},C8=i=>{const e=kr();if(tV){let{clientX:t,clientY:n}=Bpe(i);e.style.insetInlineStart=`${Ppe+(t-Dpe)}px`,e.style.insetBlockStart=`${Npe+(n-Lpe)}px`}},R8=()=>{const i=kr();tV=!1,Md(i,"swal2-dragging")},Bpe=i=>{let e=0,t=0;return i.type.startsWith("mouse")?(e=i.clientX,t=i.clientY):i.type.startsWith("touch")&&(e=i.touches[0].clientX,t=i.touches[0].clientY),{clientX:e,clientY:t}},Qnt=(i,e)=>{const t=yu(),n=kr();if(!(!t||!n)){if(e.toast){yx(t,"width",e.width),n.style.width="100%";const r=_T();r&&n.insertBefore(r,xT())}else yx(n,"width",e.width);yx(n,"padding",e.padding),e.color&&(n.style.color=e.color),e.background&&(n.style.background=e.background),Cc(IN()),Znt(n,e),e.draggable&&!e.toast?(Dr(n,wt.draggable),Ynt(n)):(Md(n,wt.draggable),Xnt(n))}},Znt=(i,e)=>{const t=e.showClass||{};i.className=`${wt.popup} ${af(i)?t.popup:""}`,e.toast?(Dr([document.documentElement,document.body],wt["toast-shown"]),Dr(i,wt.toast)):Dr(i,wt.modal),uh(i,e,"popup"),typeof e.customClass=="string"&&Dr(i,e.customClass),e.icon&&Dr(i,wt[`icon-${e.icon}`])},Jnt=(i,e)=>{const t=WH();if(!t)return;const{progressSteps:n,currentProgressStep:r}=e;if(!n||n.length===0||r===void 0){Cc(t);return}Ml(t),t.textContent="",r>=n.length&&Au("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((s,o)=>{const a=eit(s);if(t.appendChild(a),o===r&&Dr(a,wt["active-progress-step"]),o!==n.length-1){const l=tit(e);t.appendChild(l)}})},eit=i=>{const e=document.createElement("li");return Dr(e,wt["progress-step"]),vh(e,i),e},tit=i=>{const e=document.createElement("li");return Dr(e,wt["progress-step-line"]),i.progressStepsDistance&&yx(e,"width",i.progressStepsDistance),e},nit=(i,e)=>{const t=_pe();t&&(QH(t),fC(t,e.title||e.titleText,"block"),e.title&&JH(e.title,t),e.titleText&&(t.innerText=e.titleText),uh(t,e,"title"))},Ipe=(i,e)=>{Qnt(i,e),Pnt(i,e),Jnt(i,e),qnt(i,e),Knt(i,e),nit(i,e),Lnt(i,e),Hnt(i,e),Cnt(i,e),Vnt(i,e);const t=kr();typeof e.didRender=="function"&&t&&e.didRender(t),pi.eventEmitter.emit("didRender",t)},iit=()=>af(kr()),Ope=()=>{var i;return(i=EA())===null||i===void 0?void 0:i.click()},rit=()=>{var i;return(i=xb())===null||i===void 0?void 0:i.click()},sit=()=>{var i;return(i=bT())===null||i===void 0?void 0:i.click()},ST=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Fpe=i=>{i.keydownTarget&&i.keydownHandlerAdded&&(i.keydownTarget.removeEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!1)},oit=(i,e,t)=>{Fpe(i),e.toast||(i.keydownHandler=n=>lit(e,n,t),i.keydownTarget=e.keydownListenerCapture?window:kr(),i.keydownListenerCapture=e.keydownListenerCapture,i.keydownTarget.addEventListener("keydown",i.keydownHandler,{capture:i.keydownListenerCapture}),i.keydownHandlerAdded=!0)},p7=(i,e)=>{var t;const n=YH();if(n.length){i=i+e,i===n.length?i=0:i===-1&&(i=n.length-1),n[i].focus();return}(t=kr())===null||t===void 0||t.focus()},Upe=["ArrowRight","ArrowDown"],ait=["ArrowLeft","ArrowUp"],lit=(i,e,t)=>{i&&(e.isComposing||e.keyCode===229||(i.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?cit(e,i):e.key==="Tab"?uit(e):[...Upe,...ait].includes(e.key)?fit(e.key):e.key==="Escape"&&hit(e,i,t)))},cit=(i,e)=>{if(!BN(e.allowEnterKey))return;const t=UN(kr(),e.input);if(i.target&&t&&i.target instanceof HTMLElement&&i.target.outerHTML===t.outerHTML){if(["textarea","file"].includes(e.input))return;Ope(),i.preventDefault()}},uit=i=>{const e=i.target,t=YH();let n=-1;for(let r=0;r<t.length;r++)if(e===t[r]){n=r;break}i.shiftKey?p7(n,-1):p7(n,1),i.stopPropagation(),i.preventDefault()},fit=i=>{const e=uC(),t=EA(),n=xb(),r=bT();if(!e||!t||!n||!r)return;const s=[t,n,r];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=Upe.includes(i)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let l=0;l<e.children.length;l++){if(a=a[o],!a)return;if(a instanceof HTMLButtonElement&&af(a))break}a instanceof HTMLButtonElement&&a.focus()}},hit=(i,e,t)=>{BN(e.allowEscapeKey)&&(i.preventDefault(),t(ST.esc))};var HS={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const dit=()=>{const i=yu();Array.from(document.body.children).forEach(t=>{t.contains(i)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},kpe=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Gpe=typeof window<"u"&&!!window.GestureEvent,pit=()=>{if(Gpe&&!Zm(document.body,wt.iosfix)){const i=document.body.scrollTop;document.body.style.top=`${i*-1}px`,Dr(document.body,wt.iosfix),Ait()}},Ait=()=>{const i=yu();if(!i)return;let e;i.ontouchstart=t=>{e=mit(t)},i.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},mit=i=>{const e=i.target,t=yu(),n=jH();return!t||!n||git(i)||yit(i)?!1:e===t||!HJ(t)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(HJ(n)&&n.contains(e))},git=i=>i.touches&&i.touches.length&&i.touches[0].touchType==="stylus",yit=i=>i.touches&&i.touches.length>1,vit=()=>{if(Zm(document.body,wt.iosfix)){const i=parseInt(document.body.style.top,10);Md(document.body,wt.iosfix),document.body.style.top="",document.body.scrollTop=i*-1}},xit=()=>{const i=document.createElement("div");i.className=wt["scrollbar-measure"],document.body.appendChild(i);const e=i.getBoundingClientRect().width-i.clientWidth;return document.body.removeChild(i),e};let U2=null;const bit=i=>{U2===null&&(document.body.scrollHeight>window.innerHeight||i==="scroll")&&(U2=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${U2+xit()}px`)},_it=()=>{U2!==null&&(document.body.style.paddingRight=`${U2}px`,U2=null)};function zpe(i,e,t,n){FN()?jJ(i,n):(ant(t).then(()=>jJ(i,n)),Fpe(pi)),Gpe?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),XH()&&(_it(),vit(),kpe()),Sit()}function Sit(){Md([document.documentElement,document.body],[wt.shown,wt["height-auto"],wt["no-backdrop"],wt["toast-shown"]])}function Gy(i){i=Eit(i);const e=HS.swalPromiseResolve.get(this),t=Tit(this);this.isAwaitingPromise?i.isDismissed||(dC(this),e(i)):t&&e(i)}const Tit=i=>{const e=kr();if(!e)return!1;const t=Vs.innerParams.get(i);if(!t||Zm(e,t.hideClass.popup))return!1;Md(e,t.showClass.popup),Dr(e,t.hideClass.popup);const n=yu();return Md(n,t.showClass.backdrop),Dr(n,t.hideClass.backdrop),wit(i,e,t),!0};function Hpe(i){const e=HS.swalPromiseReject.get(this);dC(this),e&&e(i)}const dC=i=>{i.isAwaitingPromise&&(delete i.isAwaitingPromise,Vs.innerParams.get(i)||i._destroy())},Eit=i=>typeof i>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},i),wit=(i,e,t)=>{var n;const r=yu(),s=Mpe(e);typeof t.willClose=="function"&&t.willClose(e),(n=pi.eventEmitter)===null||n===void 0||n.emit("willClose",e),s?Mit(i,e,r,t.returnFocus,t.didClose):zpe(i,r,t.returnFocus,t.didClose)},Mit=(i,e,t,n,r)=>{pi.swalCloseEventFinishedCallback=zpe.bind(null,i,t,n,r);const s=function(o){if(o.target===e){var a;(a=pi.swalCloseEventFinishedCallback)===null||a===void 0||a.call(pi),delete pi.swalCloseEventFinishedCallback,e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s)}};e.addEventListener("animationend",s),e.addEventListener("transitionend",s)},jJ=(i,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(i.params)(),(t=pi.eventEmitter)===null||t===void 0||t.emit("didClose"),i._destroy&&i._destroy()})},VS=i=>{let e=kr();if(e||new B8,e=kr(),!e)return;const t=_T();FN()?Cc(xT()):Cit(e,i),Ml(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Cit=(i,e)=>{const t=uC(),n=_T();!t||!n||(!e&&af(EA())&&(e=EA()),Ml(t),e&&(Cc(e),n.setAttribute("data-button-to-replace",e.className),t.insertBefore(n,e)),Dr([i,t],wt.loading))},Rit=(i,e)=>{e.input==="select"||e.input==="radio"?Bit(i,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(qH(e.inputValue)||$H(e.inputValue))&&(VS(EA()),Iit(i,e))},Dit=(i,e)=>{const t=i.getInput();if(!t)return null;switch(e.input){case"checkbox":return Lit(t);case"radio":return Pit(t);case"file":return Nit(t);default:return e.inputAutoTrim?t.value.trim():t.value}},Lit=i=>i.checked?1:0,Pit=i=>i.checked?i.value:null,Nit=i=>i.files&&i.files.length?i.getAttribute("multiple")!==null?i.files:i.files[0]:null,Bit=(i,e)=>{const t=kr();if(!t)return;const n=r=>{e.input==="select"?Oit(t,D8(r),e):e.input==="radio"&&Fit(t,D8(r),e)};qH(e.inputOptions)||$H(e.inputOptions)?(VS(EA()),lC(e.inputOptions).then(r=>{i.hideLoading(),n(r)})):typeof e.inputOptions=="object"?n(e.inputOptions):vb(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},Iit=(i,e)=>{const t=i.getInput();t&&(Cc(t),lC(e.inputValue).then(n=>{t.value=e.input==="number"?`${parseFloat(n)||0}`:`${n}`,Ml(t),t.focus(),i.hideLoading()}).catch(n=>{vb(`Error in inputValue promise: ${n}`),t.value="",Ml(t),t.focus(),i.hideLoading()}))};function Oit(i,e,t){const n=ky(i,wt.select);if(!n)return;const r=(s,o,a)=>{const l=document.createElement("option");l.value=a,vh(l,o),l.selected=Vpe(a,t.inputValue),s.appendChild(l)};e.forEach(s=>{const o=s[0],a=s[1];if(Array.isArray(a)){const l=document.createElement("optgroup");l.label=o,l.disabled=!1,n.appendChild(l),a.forEach(c=>r(l,c[1],c[0]))}else r(n,a,o)}),n.focus()}function Fit(i,e,t){const n=ky(i,wt.radio);if(!n)return;e.forEach(s=>{const o=s[0],a=s[1],l=document.createElement("input"),c=document.createElement("label");l.type="radio",l.name=wt.radio,l.value=o,Vpe(o,t.inputValue)&&(l.checked=!0);const u=document.createElement("span");vh(u,a),u.className=wt.label,c.appendChild(l),c.appendChild(u),n.appendChild(c)});const r=n.querySelectorAll("input");r.length&&r[0].focus()}const D8=i=>{const e=[];return i instanceof Map?i.forEach((t,n)=>{let r=t;typeof r=="object"&&(r=D8(r)),e.push([n,r])}):Object.keys(i).forEach(t=>{let n=i[t];typeof n=="object"&&(n=D8(n)),e.push([t,n])}),e},Vpe=(i,e)=>!!e&&e.toString()===i.toString(),Uit=i=>{const e=Vs.innerParams.get(i);i.disableButtons(),e.input?qpe(i,"confirm"):iV(i,!0)},kit=i=>{const e=Vs.innerParams.get(i);i.disableButtons(),e.returnInputValueOnDeny?qpe(i,"deny"):nV(i,!1)},Git=(i,e)=>{i.disableButtons(),e(ST.cancel)},qpe=(i,e)=>{const t=Vs.innerParams.get(i);if(!t.input){vb(`The "input" parameter is needed to be set when using returnInputValueOn${VH(e)}`);return}const n=i.getInput(),r=Dit(i,t);t.inputValidator?zit(i,r,e):n&&!n.checkValidity()?(i.enableButtons(),i.showValidationMessage(t.validationMessage||n.validationMessage)):e==="deny"?nV(i,r):iV(i,r)},zit=(i,e,t)=>{const n=Vs.innerParams.get(i);i.disableInput(),Promise.resolve().then(()=>lC(n.inputValidator(e,n.validationMessage))).then(s=>{i.enableButtons(),i.enableInput(),s?i.showValidationMessage(s):t==="deny"?nV(i,e):iV(i,e)})},nV=(i,e)=>{const t=Vs.innerParams.get(i||void 0);t.showLoaderOnDeny&&VS(xb()),t.preDeny?(i.isAwaitingPromise=!0,Promise.resolve().then(()=>lC(t.preDeny(e,t.validationMessage))).then(r=>{r===!1?(i.hideLoading(),dC(i)):i.close({isDenied:!0,value:typeof r>"u"?e:r})}).catch(r=>$pe(i||void 0,r))):i.close({isDenied:!0,value:e})},WJ=(i,e)=>{i.close({isConfirmed:!0,value:e})},$pe=(i,e)=>{i.rejectPromise(e)},iV=(i,e)=>{const t=Vs.innerParams.get(i||void 0);t.showLoaderOnConfirm&&VS(),t.preConfirm?(i.resetValidationMessage(),i.isAwaitingPromise=!0,Promise.resolve().then(()=>lC(t.preConfirm(e,t.validationMessage))).then(r=>{af(IN())||r===!1?(i.hideLoading(),dC(i)):WJ(i,typeof r>"u"?e:r)}).catch(r=>$pe(i||void 0,r))):WJ(i,e)};function L8(){const i=Vs.innerParams.get(this);if(!i)return;const e=Vs.domCache.get(this);Cc(e.loader),FN()?i.icon&&Ml(xT()):Hit(e),Md([e.popup,e.actions],wt.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Hit=i=>{const e=i.popup.getElementsByClassName(i.loader.getAttribute("data-button-to-replace"));e.length?Ml(e[0],"inline-block"):mnt()&&Cc(i.actions)};function jpe(){const i=Vs.innerParams.get(this),e=Vs.domCache.get(this);return e?UN(e.popup,i.input):null}function Wpe(i,e,t){const n=Vs.domCache.get(i);e.forEach(r=>{n[r].disabled=t})}function Kpe(i,e){const t=kr();if(!(!t||!i))if(i.type==="radio"){const n=t.querySelectorAll(`[name="${wt.radio}"]`);for(let r=0;r<n.length;r++)n[r].disabled=e}else i.disabled=e}function Ype(){Wpe(this,["confirmButton","denyButton","cancelButton"],!1)}function Xpe(){Wpe(this,["confirmButton","denyButton","cancelButton"],!0)}function Qpe(){Kpe(this.getInput(),!1)}function Zpe(){Kpe(this.getInput(),!0)}function Jpe(i){const e=Vs.domCache.get(this),t=Vs.innerParams.get(this);vh(e.validationMessage,i),e.validationMessage.className=wt["validation-message"],t.customClass&&t.customClass.validationMessage&&Dr(e.validationMessage,t.customClass.validationMessage),Ml(e.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",wt["validation-message"]),Epe(n),Dr(n,wt.inputerror))}function e0e(){const i=Vs.domCache.get(this);i.validationMessage&&Cc(i.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Md(e,wt.inputerror))}const k2={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Vit=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],qit={allowEnterKey:void 0},$it=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],t0e=i=>Object.prototype.hasOwnProperty.call(k2,i),n0e=i=>Vit.indexOf(i)!==-1,i0e=i=>qit[i],jit=i=>{t0e(i)||Au(`Unknown parameter "${i}"`)},Wit=i=>{$it.includes(i)&&Au(`The parameter "${i}" is incompatible with toasts`)},Kit=i=>{const e=i0e(i);e&&bpe(i,e)},r0e=i=>{i.backdrop===!1&&i.allowOutsideClick&&Au('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),i.theme&&!["light","dark","auto","borderless"].includes(i.theme)&&Au(`Invalid theme "${i.theme}". Expected "light", "dark", "auto", or "borderless"`);for(const e in i)jit(e),i.toast&&Wit(e),Kit(e)};function s0e(i){const e=yu(),t=kr(),n=Vs.innerParams.get(this);if(!t||Zm(t,n.hideClass.popup)){Au("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=Yit(i),s=Object.assign({},n,r);r0e(s),e.dataset.swal2Theme=s.theme,Ipe(this,s),Vs.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,i),writable:!1,enumerable:!0}})}const Yit=i=>{const e={};return Object.keys(i).forEach(t=>{n0e(t)?e[t]=i[t]:Au(`Invalid parameter to update: ${t}`)}),e};function o0e(){const i=Vs.domCache.get(this),e=Vs.innerParams.get(this);if(!e){a0e(this);return}i.popup&&pi.swalCloseEventFinishedCallback&&(pi.swalCloseEventFinishedCallback(),delete pi.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),pi.eventEmitter.emit("didDestroy"),Xit(this)}const Xit=i=>{a0e(i),delete i.params,delete pi.keydownHandler,delete pi.keydownTarget,delete pi.currentInstance},a0e=i=>{i.isAwaitingPromise?(fF(Vs,i),i.isAwaitingPromise=!0):(fF(HS,i),fF(Vs,i),delete i.isAwaitingPromise,delete i.disableButtons,delete i.enableButtons,delete i.getInput,delete i.disableInput,delete i.enableInput,delete i.hideLoading,delete i.disableLoading,delete i.showValidationMessage,delete i.resetValidationMessage,delete i.close,delete i.closePopup,delete i.closeModal,delete i.closeToast,delete i.rejectPromise,delete i.update,delete i._destroy)},fF=(i,e)=>{for(const t in i)i[t].delete(e)};var Qit=Object.freeze({__proto__:null,_destroy:o0e,close:Gy,closeModal:Gy,closePopup:Gy,closeToast:Gy,disableButtons:Xpe,disableInput:Zpe,disableLoading:L8,enableButtons:Ype,enableInput:Qpe,getInput:jpe,handleAwaitingPromise:dC,hideLoading:L8,rejectPromise:Hpe,resetValidationMessage:e0e,showValidationMessage:Jpe,update:s0e});const Zit=(i,e,t)=>{i.toast?Jit(i,e,t):(trt(e),nrt(e),irt(i,e,t))},Jit=(i,e,t)=>{e.popup.onclick=()=>{i&&(ert(i)||i.timer||i.input)||t(ST.close)}},ert=i=>!!(i.showConfirmButton||i.showDenyButton||i.showCancelButton||i.showCloseButton);let P8=!1;const trt=i=>{i.popup.onmousedown=()=>{i.container.onmouseup=function(e){i.container.onmouseup=()=>{},e.target===i.container&&(P8=!0)}}},nrt=i=>{i.container.onmousedown=e=>{e.target===i.container&&e.preventDefault(),i.popup.onmouseup=function(t){i.popup.onmouseup=()=>{},(t.target===i.popup||t.target instanceof HTMLElement&&i.popup.contains(t.target))&&(P8=!0)}}},irt=(i,e,t)=>{e.container.onclick=n=>{if(P8){P8=!1;return}n.target===e.container&&BN(i.allowOutsideClick)&&t(ST.backdrop)}},rrt=i=>typeof i=="object"&&i.jquery,KJ=i=>i instanceof Element||rrt(i),srt=i=>{const e={};return typeof i[0]=="object"&&!KJ(i[0])?Object.assign(e,i[0]):["title","html","icon"].forEach((t,n)=>{const r=i[n];typeof r=="string"||KJ(r)?e[t]=r:r!==void 0&&vb(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof r}`)}),e};function ort(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new this(...e)}function art(i){class e extends this{_main(n,r){return super._main(n,Object.assign({},i,r))}}return e}const lrt=()=>pi.timeout&&pi.timeout.getTimerLeft(),l0e=()=>{if(pi.timeout)return gnt(),pi.timeout.stop()},c0e=()=>{if(pi.timeout){const i=pi.timeout.start();return ZH(i),i}},crt=()=>{const i=pi.timeout;return i&&(i.running?l0e():c0e())},urt=i=>{if(pi.timeout){const e=pi.timeout.increase(i);return ZH(e,!0),e}},frt=()=>!!(pi.timeout&&pi.timeout.isRunning());let YJ=!1;const A7={};function hrt(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";A7[i]=this,YJ||(document.body.addEventListener("click",drt),YJ=!0)}const drt=i=>{for(let e=i.target;e&&e!==document;e=e.parentNode)for(const t in A7){const n=e.getAttribute(t);if(n){A7[t].fire({template:n});return}}};class prt{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];t.apply(n,o)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(o){console.error(o)}})}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}pi.eventEmitter=new prt;const Art=(i,e)=>{pi.eventEmitter.on(i,e)},mrt=(i,e)=>{pi.eventEmitter.once(i,e)},grt=(i,e)=>{if(!i){pi.eventEmitter.reset();return}e?pi.eventEmitter.removeListener(i,e):pi.eventEmitter.removeAllListeners(i)};var yrt=Object.freeze({__proto__:null,argsToParams:srt,bindClickHandler:hrt,clickCancel:sit,clickConfirm:Ope,clickDeny:rit,enableLoading:VS,fire:ort,getActions:uC,getCancelButton:bT,getCloseButton:KH,getConfirmButton:EA,getContainer:yu,getDenyButton:xb,getFocusableElements:YH,getFooter:Tpe,getHtmlContainer:jH,getIcon:xT,getIconContent:fnt,getImage:Spe,getInputLabel:hnt,getLoader:_T,getPopup:kr,getProgressSteps:WH,getTimerLeft:lrt,getTimerProgressBar:ON,getTitle:_pe,getValidationMessage:IN,increaseTimer:urt,isDeprecatedParameter:i0e,isLoading:pnt,isTimerRunning:frt,isUpdatableParameter:n0e,isValidParameter:t0e,isVisible:iit,mixin:art,off:grt,on:Art,once:mrt,resumeTimer:c0e,showLoading:VS,stopTimer:l0e,toggleTimer:crt});class vrt{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const u0e=["swal-title","swal-html","swal-footer"],xrt=i=>{const e=typeof i.template=="string"?document.querySelector(i.template):i.template;if(!e)return{};const t=e.content;return Crt(t),Object.assign(brt(t),_rt(t),Srt(t),Trt(t),Ert(t),wrt(t),Mrt(t,u0e))},brt=i=>{const e={};return Array.from(i.querySelectorAll("swal-param")).forEach(n=>{Xx(n,["name","value"]);const r=n.getAttribute("name"),s=n.getAttribute("value");!r||!s||(typeof k2[r]=="boolean"?e[r]=s!=="false":typeof k2[r]=="object"?e[r]=JSON.parse(s):e[r]=s)}),e},_rt=i=>{const e={};return Array.from(i.querySelectorAll("swal-function-param")).forEach(n=>{const r=n.getAttribute("name"),s=n.getAttribute("value");!r||!s||(e[r]=new Function(`return ${s}`)())}),e},Srt=i=>{const e={};return Array.from(i.querySelectorAll("swal-button")).forEach(n=>{Xx(n,["type","color","aria-label"]);const r=n.getAttribute("type");!r||!["confirm","cancel","deny"].includes(r)||(e[`${r}ButtonText`]=n.innerHTML,e[`show${VH(r)}Button`]=!0,n.hasAttribute("color")&&(e[`${r}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(e[`${r}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),e},Trt=i=>{const e={},t=i.querySelector("swal-image");return t&&(Xx(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},Ert=i=>{const e={},t=i.querySelector("swal-icon");return t&&(Xx(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},wrt=i=>{const e={},t=i.querySelector("swal-input");t&&(Xx(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const n=Array.from(i.querySelectorAll("swal-input-option"));return n.length&&(e.inputOptions={},n.forEach(r=>{Xx(r,["value"]);const s=r.getAttribute("value");if(!s)return;const o=r.innerHTML;e.inputOptions[s]=o})),e},Mrt=(i,e)=>{const t={};for(const n in e){const r=e[n],s=i.querySelector(r);s&&(Xx(s,[]),t[r.replace(/^swal-/,"")]=s.innerHTML.trim())}return t},Crt=i=>{const e=u0e.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(i.children).forEach(t=>{const n=t.tagName.toLowerCase();e.includes(n)||Au(`Unrecognized element <${n}>`)})},Xx=(i,e)=>{Array.from(i.attributes).forEach(t=>{e.indexOf(t.name)===-1&&Au([`Unrecognized attribute "${t.name}" on <${i.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},f0e=10,Rrt=i=>{const e=yu(),t=kr();typeof i.willOpen=="function"&&i.willOpen(t),pi.eventEmitter.emit("willOpen",t);const r=window.getComputedStyle(document.body).overflowY;Prt(e,t,i),setTimeout(()=>{Drt(e,t)},f0e),XH()&&(Lrt(e,i.scrollbarPadding,r),dit()),!FN()&&!pi.previousActiveElement&&(pi.previousActiveElement=document.activeElement),typeof i.didOpen=="function"&&setTimeout(()=>i.didOpen(t)),pi.eventEmitter.emit("didOpen",t),Md(e,wt["no-transition"])},N8=i=>{const e=kr();if(i.target!==e)return;const t=yu();e.removeEventListener("animationend",N8),e.removeEventListener("transitionend",N8),t.style.overflowY="auto"},Drt=(i,e)=>{Mpe(e)?(i.style.overflowY="hidden",e.addEventListener("animationend",N8),e.addEventListener("transitionend",N8)):i.style.overflowY="auto"},Lrt=(i,e,t)=>{pit(),e&&t!=="hidden"&&bit(t),setTimeout(()=>{i.scrollTop=0})},Prt=(i,e,t)=>{Dr(i,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),Ml(e,"grid"),setTimeout(()=>{Dr(e,t.showClass.popup),e.style.removeProperty("opacity")},f0e)):Ml(e,"grid"),Dr([document.documentElement,document.body],wt.shown),t.heightAuto&&t.backdrop&&!t.toast&&Dr([document.documentElement,document.body],wt["height-auto"])};var XJ={email:(i,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(i)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(i,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(i)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function Nrt(i){i.inputValidator||(i.input==="email"&&(i.inputValidator=XJ.email),i.input==="url"&&(i.inputValidator=XJ.url))}function Brt(i){(!i.target||typeof i.target=="string"&&!document.querySelector(i.target)||typeof i.target!="string"&&!i.target.appendChild)&&(Au('Target parameter is not valid, defaulting to "body"'),i.target="body")}function Irt(i){Nrt(i),i.showLoaderOnConfirm&&!i.preConfirm&&Au(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Brt(i),typeof i.title=="string"&&(i.title=i.title.split(`
`).join("<br />")),Ent(i)}let B0;var U4=new WeakMap;class ba{constructor(){if(int(this,U4,void 0),typeof window>"u")return;B0=this;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Object.freeze(this.constructor.argsToParams(t));this.params=r,this.isAwaitingPromise=!1,rnt(U4,this,this._main(B0.params))}_main(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r0e(Object.assign({},t,e)),pi.currentInstance){const s=HS.swalPromiseResolve.get(pi.currentInstance),{isAwaitingPromise:o}=pi.currentInstance;pi.currentInstance._destroy(),o||s({isDismissed:!0}),XH()&&kpe()}pi.currentInstance=B0;const n=Frt(e,t);Irt(n),Object.freeze(n),pi.timeout&&(pi.timeout.stop(),delete pi.timeout),clearTimeout(pi.restoreFocusTimeout);const r=Urt(B0);return Ipe(B0,n),Vs.innerParams.set(B0,n),Ort(B0,r,n)}then(e){return kJ(U4,this).then(e)}finally(e){return kJ(U4,this).finally(e)}}const Ort=(i,e,t)=>new Promise((n,r)=>{const s=o=>{i.close({isDismissed:!0,dismiss:o})};HS.swalPromiseResolve.set(i,n),HS.swalPromiseReject.set(i,r),e.confirmButton.onclick=()=>{Uit(i)},e.denyButton.onclick=()=>{kit(i)},e.cancelButton.onclick=()=>{Git(i,s)},e.closeButton.onclick=()=>{s(ST.close)},Zit(t,e,s),oit(pi,t,s),Rit(i,t),Rrt(t),krt(pi,t,s),Grt(e,t),setTimeout(()=>{e.container.scrollTop=0})}),Frt=(i,e)=>{const t=xrt(i),n=Object.assign({},k2,e,t,i);return n.showClass=Object.assign({},k2.showClass,n.showClass),n.hideClass=Object.assign({},k2.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},Urt=i=>{const e={popup:kr(),container:yu(),actions:uC(),confirmButton:EA(),denyButton:xb(),cancelButton:bT(),loader:_T(),closeButton:KH(),validationMessage:IN(),progressSteps:WH()};return Vs.domCache.set(i,e),e},krt=(i,e,t)=>{const n=ON();Cc(n),e.timer&&(i.timeout=new vrt(()=>{t("timer"),delete i.timeout},e.timer),e.timerProgressBar&&(Ml(n),uh(n,e,"timerProgressBar"),setTimeout(()=>{i.timeout&&i.timeout.running&&ZH(e.timer)})))},Grt=(i,e)=>{if(!e.toast){if(!BN(e.allowEnterKey)){bpe("allowEnterKey"),Vrt();return}zrt(i)||Hrt(i,e)||p7(-1,1)}},zrt=i=>{const e=Array.from(i.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&af(t))return t.focus(),!0;return!1},Hrt=(i,e)=>e.focusDeny&&af(i.denyButton)?(i.denyButton.focus(),!0):e.focusCancel&&af(i.cancelButton)?(i.cancelButton.focus(),!0):e.focusConfirm&&af(i.confirmButton)?(i.confirmButton.focus(),!0):!1,Vrt=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const i=new Date,e=localStorage.getItem("swal-initiation");e?(i.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const t=document.createElement("audio");t.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",t.loop=!0,document.body.appendChild(t),setTimeout(()=>{t.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${i}`)}ba.prototype.disableButtons=Xpe;ba.prototype.enableButtons=Ype;ba.prototype.getInput=jpe;ba.prototype.disableInput=Zpe;ba.prototype.enableInput=Qpe;ba.prototype.hideLoading=L8;ba.prototype.disableLoading=L8;ba.prototype.showValidationMessage=Jpe;ba.prototype.resetValidationMessage=e0e;ba.prototype.close=Gy;ba.prototype.closePopup=Gy;ba.prototype.closeModal=Gy;ba.prototype.closeToast=Gy;ba.prototype.rejectPromise=Hpe;ba.prototype.update=s0e;ba.prototype._destroy=o0e;Object.assign(ba,yrt);Object.keys(Qit).forEach(i=>{ba[i]=function(){return B0&&B0[i]?B0[i](...arguments):null}});ba.DismissReason=ST;ba.version="11.17.2";const B8=ba;B8.default=B8;typeof document<"u"&&function(i,e){var t=i.createElement("style");if(i.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const QJ=[{key:"title",getter:i=>i.getTitle()},{key:"html",getter:i=>i.getHtmlContainer()},{key:"confirmButtonText",getter:i=>i.getConfirmButton()},{key:"denyButtonText",getter:i=>i.getDenyButton()},{key:"cancelButtonText",getter:i=>i.getCancelButton()},{key:"footer",getter:i=>i.getFooter()},{key:"closeButtonHtml",getter:i=>i.getCloseButton()},{key:"iconHtml",getter:i=>i.getIconContent()},{key:"loaderHtml",getter:i=>i.getLoader()}],hF=()=>{};function qrt(i){function e(r){const s={},o={},a=QJ.map(l=>l.key);return Object.entries(r).forEach(l=>{let[c,u]=l;a.includes(c)&&Ne.isValidElement(u)?(s[c]=u,o[c]=" "):o[c]=u}),[s,o]}function t(r,s){Object.entries(s).forEach(o=>{let[a,l]=o;const u=QJ.find(h=>h.key===a).getter(i),f=N7.createRoot(u);f.render(l),r.__roots.push(f)})}function n(r){r.__roots.forEach(s=>{s.unmount()}),r.__roots=[]}return class extends i{static argsToParams(r){if(Ne.isValidElement(r[0])||Ne.isValidElement(r[1])){const s={};return["title","html","icon"].forEach((o,a)=>{r[a]!==void 0&&(s[o]=r[a])}),s}else return i.argsToParams(r)}_main(r,s){this.__roots=[],this.__params=Object.assign({},s,r);const[o,a]=e(this.__params),l=a.willOpen||hF,c=a.didOpen||hF,u=a.didDestroy||hF;return super._main(Object.assign({},a,{willOpen:f=>{t(this,o),l(f)},didOpen:f=>{setTimeout(()=>{c(f)})},didDestroy:f=>{u(f),n(this)}}))}update(r){Object.assign(this.__params,r),n(this);const[s,o]=e(this.__params);super.update(o),t(this,s)}}}const ZJ=qrt(B8);function $rt(){const i=X.useRef(),[e,t]=X.useState(!1),[n,r]=X.useState({name:"",email:"",message:""}),s=({target:{name:a,value:l}})=>{r({...n,[a]:l})},o=a=>{a.preventDefault(),t(!0),tnt.sendForm("service_fsue47a","template_uab6fvw",i.current,"0FnHRP6EW5pTVPjBx").then(()=>{t(!1),ZJ.fire({title:"Success!",text:"Your message has been sent.",icon:"success",background:"#2f2f2f",color:"#fff",confirmButtonColor:"#3085d6"}),r({name:"",email:"",message:""})},l=>{t(!1),ZJ.fire({title:"Oops...",text:"Something went wrong. Please try again.",icon:"error",background:"#2f2f2f",color:"#fff",confirmButtonColor:"#d33"}),console.error(l)})};return ce.jsx("section",{className:"c-space my-20",id:"contact",children:ce.jsxs("div",{className:"relative min-h-screen h-full flex items-center justify-center flex-col",children:[ce.jsx("img",{src:"src/public/assets/terminal.png",alt:"terminal",className:"absolute inset-0 min-h-full"}),ce.jsxs("div",{className:"contact-container py-12 mt-12",children:[ce.jsx("h3",{className:"head-text",children:"Contact me"}),ce.jsx("p",{className:"text-lg text-white-600 mt-3",children:"I cant say enough good things about Adrian. He was able to take our complex project requirements and turn them into a seamless, functional website. His problem-solving abilities are outstanding."}),ce.jsxs("form",{ref:i,onSubmit:o,className:"mt-16 flex flex-col space-y-7",children:[ce.jsxs("label",{className:"space-y-3",children:[ce.jsx("span",{className:"field-label",children:"Full Name"}),ce.jsx("input",{type:"text",name:"name",value:n.name,onChange:s,required:!0,className:"field-input",placeholder:"John Doe"})]}),ce.jsxs("label",{className:"space-y-3",children:[ce.jsx("span",{className:"field-label",children:"Email"}),ce.jsx("input",{type:"email",name:"email",value:n.email,onChange:s,required:!0,className:"field-input",placeholder:"John@gmail.com"})]}),ce.jsxs("label",{className:"space-y-3",children:[ce.jsx("span",{className:"field-label",children:"Your message"}),ce.jsx("textarea",{name:"message",value:n.message,onChange:s,required:!0,rows:5,className:"field-input",placeholder:"Share your thoughts or inquiries..."})]}),ce.jsxs("button",{className:"field-btn",type:"submit",disabled:e,children:[e?"Sending...":"Send Message",ce.jsx("img",{src:"src/public/assets/arrow-up.png",alt:"arrow-up",className:"field-btn_arrow"})]})]})]})]})})}function jrt(){return ce.jsxs("section",{className:"c-space pt-7 pb-3 border-t flex flex-row items-center justify-between",children:[ce.jsx("p",{className:"text-white-500",children:"Privacy Policy"}),ce.jsxs("div",{className:"flex gap-3",children:[ce.jsx("div",{className:"social-icon",children:ce.jsx("img",{src:"src/public/assets/github.svg",alt:"github",className:"w-6 h-6"})}),ce.jsx("div",{className:"social-icon",children:ce.jsx("img",{src:"src/public/assets/twitter.svg",alt:"twitter",className:"w-6 h-6"})}),ce.jsx("div",{className:"social-icon",children:ce.jsx("img",{src:"src/public/assets/instagram.svg",alt:"instagram",className:"w-6 h-6"})})]}),ce.jsx("p",{className:"text-white-500",children:" 2025 Iresh. All rights reserved."})]})}const Wrt=({animationName:i="victory",...e})=>{const t=X.useRef(),{scene:n}=Up("src/public/models/character/character.glb"),r=Ne.useMemo(()=>iEe.clone(n),[n]),{nodes:s,materials:o}=L2e(r),{animations:a}=d2("src/public/models/character/idle.fbx"),{animations:l}=d2("src/public/models/character/salute.fbx"),{animations:c}=d2("src/public/models/character/clapping.fbx"),{animations:u}=d2("src/public/models/character/victory.fbx");a[0].name="idle",l[0].name="salute",c[0].name="clapping",u[0].name="victory";const{actions:f}=_re([a[0],l[0],c[0],u[0]],t);return X.useEffect(()=>{if(f&&f[i])return f[i].reset().fadeIn(.5).play(),()=>{f&&f[i]&&f[i].fadeOut(.5)}},[i,f]),ce.jsxs("group",{ref:t,...e,dispose:null,children:[ce.jsx("primitive",{object:s.Hips}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Hair.geometry,material:o.Wolf3D_Hair,skeleton:s.Wolf3D_Hair.skeleton}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Glasses.geometry,material:o.Wolf3D_Glasses,skeleton:s.Wolf3D_Glasses.skeleton}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Body.geometry,material:o.Wolf3D_Body,skeleton:s.Wolf3D_Body.skeleton}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Outfit_Bottom.geometry,material:o.Wolf3D_Outfit_Bottom,skeleton:s.Wolf3D_Outfit_Bottom.skeleton}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Outfit_Footwear.geometry,material:o.Wolf3D_Outfit_Footwear,skeleton:s.Wolf3D_Outfit_Footwear.skeleton}),ce.jsx("skinnedMesh",{geometry:s.Wolf3D_Outfit_Top.geometry,material:o.Wolf3D_Outfit_Top,skeleton:s.Wolf3D_Outfit_Top.skeleton}),ce.jsx("skinnedMesh",{name:"EyeLeft",geometry:s.EyeLeft.geometry,material:o.Wolf3D_Eye,skeleton:s.EyeLeft.skeleton,morphTargetDictionary:s.EyeLeft.morphTargetDictionary,morphTargetInfluences:s.EyeLeft.morphTargetInfluences}),ce.jsx("skinnedMesh",{name:"EyeRight",geometry:s.EyeRight.geometry,material:o.Wolf3D_Eye,skeleton:s.EyeRight.skeleton,morphTargetDictionary:s.EyeRight.morphTargetDictionary,morphTargetInfluences:s.EyeRight.morphTargetInfluences}),ce.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:s.Wolf3D_Head.geometry,material:o.Wolf3D_Skin,skeleton:s.Wolf3D_Head.skeleton,morphTargetDictionary:s.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:s.Wolf3D_Head.morphTargetInfluences}),ce.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:s.Wolf3D_Teeth.geometry,material:o.Wolf3D_Teeth,skeleton:s.Wolf3D_Teeth.skeleton,morphTargetDictionary:s.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:s.Wolf3D_Teeth.morphTargetInfluences})]})};Up.preload("src/public/models/character/character.glb");function Krt(){return ce.jsx("section",{className:"c-space my-20",children:ce.jsxs("div",{className:"w-full text-white-600",children:[ce.jsx("h3",{className:"head-text",children:"My Experiance"}),ce.jsxs("div",{className:"work-container",children:[ce.jsx("div",{className:"work-canvas",children:ce.jsxs(G9,{children:[ce.jsx("ambientLight",{intensity:7}),ce.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1}),ce.jsx("directionalLight",{position:[10,10,10],intensity:1}),ce.jsx(tie,{enableZoom:!1,maxPolarAngle:Math.PI/2}),ce.jsx(X.Suspense,{fallback:ce.jsx(aG,{}),children:ce.jsx(Wrt,{"position-y":-3,scale:3})})]})}),ce.jsx("div",{className:"work-content",children:ce.jsx("div",{className:"sm:py-10 py-5 sm:px-5 px-2.5",children:ume.map(({id:i,name:e,pos:t,duration:n,title:r,icon:s,animation:o})=>ce.jsxs("div",{className:"work-content_container group",children:[ce.jsxs("div",{className:"flex flex-col h-full justify-start items-center py-2",children:[ce.jsx("div",{className:"work-content_logo",children:ce.jsx("img",{src:s,alt:"logo",className:"w-full h-full"})}),ce.jsx("div",{className:"work-content_bar"})]}),ce.jsxs("div",{className:"sm:p-5 px-2.5 py-5",children:[ce.jsx("p",{className:"font-bold text-white-800",children:e}),ce.jsxs("p",{className:"text-sm mb-5",children:[t,"--",n]}),ce.jsx("p",{className:"group-hover:text-white transition ease-in-out duration-500",children:r})]})]},i))})})]})]})})}function Qx(i,...e){const t=new URL(`https://mui.com/production-error/?code=${i}`);return e.forEach(n=>t.searchParams.append("args[]",n)),`Minified MUI error #${i}; visit ${t} for the full message.`}function Yrt(i){if(i.sheet)return i.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===i)return document.styleSheets[e]}function Xrt(i){var e=document.createElement("style");return e.setAttribute("data-emotion",i.key),i.nonce!==void 0&&e.setAttribute("nonce",i.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Qrt=function(){function i(t){var n=this;this._insertTag=function(r){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(r,s),n.tags.push(r)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=i.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Xrt(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Yrt(r);try{s.insertRule(n,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var r;return(r=n.parentNode)==null?void 0:r.removeChild(n)}),this.tags=[],this.ctr=0},i}(),hc="-ms-",I8="-moz-",Vr="-webkit-",h0e="comm",rV="rule",sV="decl",Zrt="@import",d0e="@keyframes",Jrt="@layer",est=Math.abs,kN=String.fromCharCode,tst=Object.assign;function nst(i,e){return Hl(i,0)^45?(((e<<2^Hl(i,0))<<2^Hl(i,1))<<2^Hl(i,2))<<2^Hl(i,3):0}function p0e(i){return i.trim()}function ist(i,e){return(i=e.exec(i))?i[0]:i}function qr(i,e,t){return i.replace(e,t)}function m7(i,e){return i.indexOf(e)}function Hl(i,e){return i.charCodeAt(e)|0}function n3(i,e,t){return i.slice(e,t)}function U0(i){return i.length}function oV(i){return i.length}function k4(i,e){return e.push(i),i}function rst(i,e){return i.map(e).join("")}var GN=1,qS=1,A0e=0,gf=0,Oa=0,TT="";function zN(i,e,t,n,r,s,o){return{value:i,root:e,parent:t,type:n,props:r,children:s,line:GN,column:qS,length:o,return:""}}function lw(i,e){return tst(zN("",null,null,"",null,null,0),i,{length:-i.length},e)}function sst(){return Oa}function ost(){return Oa=gf>0?Hl(TT,--gf):0,qS--,Oa===10&&(qS=1,GN--),Oa}function ih(){return Oa=gf<A0e?Hl(TT,gf++):0,qS++,Oa===10&&(qS=1,GN++),Oa}function sA(){return Hl(TT,gf)}function MD(){return gf}function pC(i,e){return n3(TT,i,e)}function i3(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function m0e(i){return GN=qS=1,A0e=U0(TT=i),gf=0,[]}function g0e(i){return TT="",i}function CD(i){return p0e(pC(gf-1,g7(i===91?i+2:i===40?i+1:i)))}function ast(i){for(;(Oa=sA())&&Oa<33;)ih();return i3(i)>2||i3(Oa)>3?"":" "}function lst(i,e){for(;--e&&ih()&&!(Oa<48||Oa>102||Oa>57&&Oa<65||Oa>70&&Oa<97););return pC(i,MD()+(e<6&&sA()==32&&ih()==32))}function g7(i){for(;ih();)switch(Oa){case i:return gf;case 34:case 39:i!==34&&i!==39&&g7(Oa);break;case 40:i===41&&g7(i);break;case 92:ih();break}return gf}function cst(i,e){for(;ih()&&i+Oa!==57;)if(i+Oa===84&&sA()===47)break;return"/*"+pC(e,gf-1)+"*"+kN(i===47?i:ih())}function ust(i){for(;!i3(sA());)ih();return pC(i,gf)}function fst(i){return g0e(RD("",null,null,null,[""],i=m0e(i),0,[0],i))}function RD(i,e,t,n,r,s,o,a,l){for(var c=0,u=0,f=o,h=0,p=0,m=0,g=1,b=1,T=1,C=0,R="",P=r,I=s,F=n,k=R;b;)switch(m=C,C=ih()){case 40:if(m!=108&&Hl(k,f-1)==58){m7(k+=qr(CD(C),"&","&\f"),"&\f")!=-1&&(T=-1);break}case 34:case 39:case 91:k+=CD(C);break;case 9:case 10:case 13:case 32:k+=ast(m);break;case 92:k+=lst(MD()-1,7);continue;case 47:switch(sA()){case 42:case 47:k4(hst(cst(ih(),MD()),e,t),l);break;default:k+="/"}break;case 123*g:a[c++]=U0(k)*T;case 125*g:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:T==-1&&(k=qr(k,/\f/g,"")),p>0&&U0(k)-f&&k4(p>32?eee(k+";",n,t,f-1):eee(qr(k," ","")+";",n,t,f-2),l);break;case 59:k+=";";default:if(k4(F=JJ(k,e,t,c,u,r,a,R,P=[],I=[],f),s),C===123)if(u===0)RD(k,e,F,F,P,s,f,a,I);else switch(h===99&&Hl(k,3)===110?100:h){case 100:case 108:case 109:case 115:RD(i,F,F,n&&k4(JJ(i,F,F,0,0,r,a,R,r,P=[],f),I),r,I,f,a,n?P:I);break;default:RD(k,F,F,F,[""],I,0,a,I)}}c=u=p=0,g=T=1,R=k="",f=o;break;case 58:f=1+U0(k),p=m;default:if(g<1){if(C==123)--g;else if(C==125&&g++==0&&ost()==125)continue}switch(k+=kN(C),C*g){case 38:T=u>0?1:(k+="\f",-1);break;case 44:a[c++]=(U0(k)-1)*T,T=1;break;case 64:sA()===45&&(k+=CD(ih())),h=sA(),u=f=U0(R=k+=ust(MD())),C++;break;case 45:m===45&&U0(k)==2&&(g=0)}}return s}function JJ(i,e,t,n,r,s,o,a,l,c,u){for(var f=r-1,h=r===0?s:[""],p=oV(h),m=0,g=0,b=0;m<n;++m)for(var T=0,C=n3(i,f+1,f=est(g=o[m])),R=i;T<p;++T)(R=p0e(g>0?h[T]+" "+C:qr(C,/&\f/g,h[T])))&&(l[b++]=R);return zN(i,e,t,r===0?rV:a,l,c,u)}function hst(i,e,t){return zN(i,e,t,h0e,kN(sst()),n3(i,2,-2),0)}function eee(i,e,t,n){return zN(i,e,t,sV,n3(i,0,n),n3(i,n+1,-1),n)}function G2(i,e){for(var t="",n=oV(i),r=0;r<n;r++)t+=e(i[r],r,i,e)||"";return t}function dst(i,e,t,n){switch(i.type){case Jrt:if(i.children.length)break;case Zrt:case sV:return i.return=i.return||i.value;case h0e:return"";case d0e:return i.return=i.value+"{"+G2(i.children,n)+"}";case rV:i.value=i.props.join(",")}return U0(t=G2(i.children,n))?i.return=i.value+"{"+t+"}":""}function pst(i){var e=oV(i);return function(t,n,r,s){for(var o="",a=0;a<e;a++)o+=i[a](t,n,r,s)||"";return o}}function Ast(i){return function(e){e.root||(e=e.return)&&i(e)}}function y0e(i){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=i(t)),e[t]}}var mst=function(e,t,n){for(var r=0,s=0;r=s,s=sA(),r===38&&s===12&&(t[n]=1),!i3(s);)ih();return pC(e,gf)},gst=function(e,t){var n=-1,r=44;do switch(i3(r)){case 0:r===38&&sA()===12&&(t[n]=1),e[n]+=mst(gf-1,t,n);break;case 2:e[n]+=CD(r);break;case 4:if(r===44){e[++n]=sA()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=kN(r)}while(r=ih());return e},yst=function(e,t){return g0e(gst(m0e(e),t))},tee=new WeakMap,vst=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!tee.get(n))&&!r){tee.set(e,!0);for(var s=[],o=yst(t,s),a=n.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},xst=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function v0e(i,e){switch(nst(i,e)){case 5103:return Vr+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vr+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Vr+i+I8+i+hc+i+i;case 6828:case 4268:return Vr+i+hc+i+i;case 6165:return Vr+i+hc+"flex-"+i+i;case 5187:return Vr+i+qr(i,/(\w+).+(:[^]+)/,Vr+"box-$1$2"+hc+"flex-$1$2")+i;case 5443:return Vr+i+hc+"flex-item-"+qr(i,/flex-|-self/,"")+i;case 4675:return Vr+i+hc+"flex-line-pack"+qr(i,/align-content|flex-|-self/,"")+i;case 5548:return Vr+i+hc+qr(i,"shrink","negative")+i;case 5292:return Vr+i+hc+qr(i,"basis","preferred-size")+i;case 6060:return Vr+"box-"+qr(i,"-grow","")+Vr+i+hc+qr(i,"grow","positive")+i;case 4554:return Vr+qr(i,/([^-])(transform)/g,"$1"+Vr+"$2")+i;case 6187:return qr(qr(qr(i,/(zoom-|grab)/,Vr+"$1"),/(image-set)/,Vr+"$1"),i,"")+i;case 5495:case 3959:return qr(i,/(image-set\([^]*)/,Vr+"$1$`$1");case 4968:return qr(qr(i,/(.+:)(flex-)?(.*)/,Vr+"box-pack:$3"+hc+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vr+i+i;case 4095:case 3583:case 4068:case 2532:return qr(i,/(.+)-inline(.+)/,Vr+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(U0(i)-1-e>6)switch(Hl(i,e+1)){case 109:if(Hl(i,e+4)!==45)break;case 102:return qr(i,/(.+:)(.+)-([^]+)/,"$1"+Vr+"$2-$3$1"+I8+(Hl(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~m7(i,"stretch")?v0e(qr(i,"stretch","fill-available"),e)+i:i}break;case 4949:if(Hl(i,e+1)!==115)break;case 6444:switch(Hl(i,U0(i)-3-(~m7(i,"!important")&&10))){case 107:return qr(i,":",":"+Vr)+i;case 101:return qr(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vr+(Hl(i,14)===45?"inline-":"")+"box$3$1"+Vr+"$2$3$1"+hc+"$2box$3")+i}break;case 5936:switch(Hl(i,e+11)){case 114:return Vr+i+hc+qr(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Vr+i+hc+qr(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Vr+i+hc+qr(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return Vr+i+hc+i+i}return i}var bst=function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case sV:e.return=v0e(e.value,e.length);break;case d0e:return G2([lw(e,{value:qr(e.value,"@","@"+Vr)})],r);case rV:if(e.length)return rst(e.props,function(s){switch(ist(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return G2([lw(e,{props:[qr(s,/:(read-\w+)/,":"+I8+"$1")]})],r);case"::placeholder":return G2([lw(e,{props:[qr(s,/:(plac\w+)/,":"+Vr+"input-$1")]}),lw(e,{props:[qr(s,/:(plac\w+)/,":"+I8+"$1")]}),lw(e,{props:[qr(s,/:(plac\w+)/,hc+"input-$1")]})],r)}return""})}},_st=[bst],Sst=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var r=e.stylisPlugins||_st,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),T=1;T<b.length;T++)s[b[T]]=!0;a.push(g)});var l,c=[vst,xst];{var u,f=[dst,Ast(function(g){u.insert(g)})],h=pst(c.concat(r,f)),p=function(b){return G2(fst(b),h)};l=function(b,T,C,R){u=C,p(b?b+"{"+T.styles+"}":T.styles),R&&(m.inserted[T.name]=!0)}}var m={key:t,sheet:new Qrt({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(a),m},dF={exports:{}},rs={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nee;function Tst(){if(nee)return rs;nee=1;var i=typeof Symbol=="function"&&Symbol.for,e=i?Symbol.for("react.element"):60103,t=i?Symbol.for("react.portal"):60106,n=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,s=i?Symbol.for("react.profiler"):60114,o=i?Symbol.for("react.provider"):60109,a=i?Symbol.for("react.context"):60110,l=i?Symbol.for("react.async_mode"):60111,c=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.suspense_list"):60120,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,T=i?Symbol.for("react.responder"):60118,C=i?Symbol.for("react.scope"):60119;function R(I){if(typeof I=="object"&&I!==null){var F=I.$$typeof;switch(F){case e:switch(I=I.type,I){case l:case c:case n:case s:case r:case f:return I;default:switch(I=I&&I.$$typeof,I){case a:case u:case m:case p:case o:return I;default:return F}}case t:return F}}}function P(I){return R(I)===c}return rs.AsyncMode=l,rs.ConcurrentMode=c,rs.ContextConsumer=a,rs.ContextProvider=o,rs.Element=e,rs.ForwardRef=u,rs.Fragment=n,rs.Lazy=m,rs.Memo=p,rs.Portal=t,rs.Profiler=s,rs.StrictMode=r,rs.Suspense=f,rs.isAsyncMode=function(I){return P(I)||R(I)===l},rs.isConcurrentMode=P,rs.isContextConsumer=function(I){return R(I)===a},rs.isContextProvider=function(I){return R(I)===o},rs.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},rs.isForwardRef=function(I){return R(I)===u},rs.isFragment=function(I){return R(I)===n},rs.isLazy=function(I){return R(I)===m},rs.isMemo=function(I){return R(I)===p},rs.isPortal=function(I){return R(I)===t},rs.isProfiler=function(I){return R(I)===s},rs.isStrictMode=function(I){return R(I)===r},rs.isSuspense=function(I){return R(I)===f},rs.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===n||I===c||I===s||I===r||I===f||I===h||typeof I=="object"&&I!==null&&(I.$$typeof===m||I.$$typeof===p||I.$$typeof===o||I.$$typeof===a||I.$$typeof===u||I.$$typeof===b||I.$$typeof===T||I.$$typeof===C||I.$$typeof===g)},rs.typeOf=R,rs}var iee;function Est(){return iee||(iee=1,dF.exports=Tst()),dF.exports}var pF,ree;function wst(){if(ree)return pF;ree=1;var i=Est(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[i.ForwardRef]=n,s[i.Memo]=r;function o(m){return i.isMemo(m)?r:s[m.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function p(m,g,b){if(typeof g!="string"){if(h){var T=f(g);T&&T!==h&&p(m,T,b)}var C=l(g);c&&(C=C.concat(c(g)));for(var R=o(m),P=o(g),I=0;I<C.length;++I){var F=C[I];if(!t[F]&&!(b&&b[F])&&!(P&&P[F])&&!(R&&R[F])){var k=u(g,F);try{a(m,F,k)}catch{}}}}return m}return pF=p,pF}wst();var Mst=!0;function x0e(i,e,t){var n="";return t.split(" ").forEach(function(r){i[r]!==void 0?e.push(i[r]+";"):r&&(n+=r+" ")}),n}var aV=function(e,t,n){var r=e.key+"-"+t.name;(n===!1||Mst===!1)&&e.registered[r]===void 0&&(e.registered[r]=t.styles)},b0e=function(e,t,n){aV(e,t,n);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Cst(i){for(var e=0,t,n=0,r=i.length;r>=4;++n,r-=4)t=i.charCodeAt(n)&255|(i.charCodeAt(++n)&255)<<8|(i.charCodeAt(++n)&255)<<16|(i.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(i.charCodeAt(n+2)&255)<<16;case 2:e^=(i.charCodeAt(n+1)&255)<<8;case 1:e^=i.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Rst={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dst=/[A-Z]|^ms/g,Lst=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_0e=function(e){return e.charCodeAt(1)===45},see=function(e){return e!=null&&typeof e!="boolean"},AF=y0e(function(i){return _0e(i)?i:i.replace(Dst,"-$&").toLowerCase()}),oee=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Lst,function(n,r,s){return k0={name:r,styles:s,next:k0},r})}return Rst[e]!==1&&!_0e(e)&&typeof t=="number"&&t!==0?t+"px":t};function r3(i,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var r=t;if(r.anim===1)return k0={name:r.name,styles:r.styles,next:k0},r.name;var s=t;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)k0={name:o.name,styles:o.styles,next:k0},o=o.next;var a=s.styles+";";return a}return Pst(i,e,t)}case"function":{if(i!==void 0){var l=k0,c=t(i);return k0=l,r3(i,e,c)}break}}var u=t;if(e==null)return u;var f=e[u];return f!==void 0?f:u}function Pst(i,e,t){var n="";if(Array.isArray(t))for(var r=0;r<t.length;r++)n+=r3(i,e,t[r])+";";else for(var s in t){var o=t[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?n+=s+"{"+e[a]+"}":see(a)&&(n+=AF(s)+":"+oee(s,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)see(o[l])&&(n+=AF(s)+":"+oee(s,o[l])+";");else{var c=r3(i,e,o);switch(s){case"animation":case"animationName":{n+=AF(s)+":"+c+";";break}default:n+=s+"{"+c+"}"}}}return n}var aee=/label:\s*([^\s;{]+)\s*(;|$)/g,k0;function HN(i,e,t){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var n=!0,r="";k0=void 0;var s=i[0];if(s==null||s.raw===void 0)n=!1,r+=r3(t,e,s);else{var o=s;r+=o[0]}for(var a=1;a<i.length;a++)if(r+=r3(t,e,i[a]),n){var l=s;r+=l[a]}aee.lastIndex=0;for(var c="",u;(u=aee.exec(r))!==null;)c+="-"+u[1];var f=Cst(r)+c;return{name:f,styles:r,next:k0}}var Nst=function(e){return e()},Bst=PD.useInsertionEffect?PD.useInsertionEffect:!1,S0e=Bst||Nst,T0e=X.createContext(typeof HTMLElement<"u"?Sst({key:"css"}):null);T0e.Provider;var E0e=function(e){return X.forwardRef(function(t,n){var r=X.useContext(T0e);return e(t,r,n)})},lV=X.createContext({}),cV={}.hasOwnProperty,y7="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ist=function(e,t){var n={};for(var r in t)cV.call(t,r)&&(n[r]=t[r]);return n[y7]=e,n},Ost=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return aV(t,n,r),S0e(function(){return b0e(t,n,r)}),null},Fst=E0e(function(i,e,t){var n=i.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var r=i[y7],s=[n],o="";typeof i.className=="string"?o=x0e(e.registered,s,i.className):i.className!=null&&(o=i.className+" ");var a=HN(s,void 0,X.useContext(lV));o+=e.key+"-"+a.name;var l={};for(var c in i)cV.call(i,c)&&c!=="css"&&c!==y7&&(l[c]=i[c]);return l.className=o,t&&(l.ref=t),X.createElement(X.Fragment,null,X.createElement(Ost,{cache:e,serialized:a,isStringTag:typeof r=="string"}),X.createElement(r,l))}),Ust=Fst,lee=function(e,t){var n=arguments;if(t==null||!cV.call(t,"css"))return X.createElement.apply(void 0,n);var r=n.length,s=new Array(r);s[0]=Ust,s[1]=Ist(e,t);for(var o=2;o<r;o++)s[o]=n[o];return X.createElement.apply(null,s)};(function(i){var e;e||(e=i.JSX||(i.JSX={}))})(lee||(lee={}));function kst(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return HN(e)}function uV(){var i=kst.apply(void 0,arguments),e="animation-"+i.name;return{name:e,styles:"@keyframes "+e+"{"+i.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Gst=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,zst=y0e(function(i){return Gst.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),Hst=zst,Vst=function(e){return e!=="theme"},cee=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Hst:Vst},uee=function(e,t,n){var r;if(t){var s=t.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof r!="function"&&n&&(r=e.__emotion_forwardProp),r},qst=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return aV(t,n,r),S0e(function(){return b0e(t,n,r)}),null},$st=function i(e,t){var n=e.__emotion_real===e,r=n&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var a=uee(e,t,n),l=a||cee(r),c=!l("as");return function(){var u=arguments,f=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var h=u[0];f.push(h[0]);for(var p=u.length,m=1;m<p;m++)f.push(u[m],h[m])}var g=E0e(function(b,T,C){var R=c&&b.as||r,P="",I=[],F=b;if(b.theme==null){F={};for(var k in b)F[k]=b[k];F.theme=X.useContext(lV)}typeof b.className=="string"?P=x0e(T.registered,I,b.className):b.className!=null&&(P=b.className+" ");var q=HN(f.concat(I),T.registered,F);P+=T.key+"-"+q.name,o!==void 0&&(P+=" "+o);var H=c&&a===void 0?cee(R):l,O={};for(var $ in b)c&&$==="as"||H($)&&(O[$]=b[$]);return O.className=P,C&&(O.ref=C),X.createElement(X.Fragment,null,X.createElement(qst,{cache:T,serialized:q,isStringTag:typeof R=="string"}),X.createElement(R,O))});return g.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=r,g.__emotion_styles=f,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(b,T){var C=i(b,ar({},t,T,{shouldForwardProp:uee(g,T,!0)}));return C.apply(void 0,f)},g}},jst=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],v7=$st.bind(null);jst.forEach(function(i){v7[i]=v7(i)});/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function w0e(i,e){return v7(i,e)}function Wst(i,e){Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=e(i.__emotion_styles))}const fee=[];function hee(i){return fee[0]=i,HN(fee)}var mF={exports:{}},xs={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dee;function Kst(){if(dee)return xs;dee=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),p=Symbol.for("react.client.reference");function m(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case i:switch(g=g.type,g){case t:case r:case n:case l:case c:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case f:case u:return g;case s:return g;default:return b}}case e:return b}}}return xs.ContextConsumer=s,xs.ContextProvider=o,xs.Element=i,xs.ForwardRef=a,xs.Fragment=t,xs.Lazy=f,xs.Memo=u,xs.Portal=e,xs.Profiler=r,xs.StrictMode=n,xs.Suspense=l,xs.SuspenseList=c,xs.isContextConsumer=function(g){return m(g)===s},xs.isContextProvider=function(g){return m(g)===o},xs.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===i},xs.isForwardRef=function(g){return m(g)===a},xs.isFragment=function(g){return m(g)===t},xs.isLazy=function(g){return m(g)===f},xs.isMemo=function(g){return m(g)===u},xs.isPortal=function(g){return m(g)===e},xs.isProfiler=function(g){return m(g)===r},xs.isStrictMode=function(g){return m(g)===n},xs.isSuspense=function(g){return m(g)===l},xs.isSuspenseList=function(g){return m(g)===c},xs.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===t||g===r||g===n||g===l||g===c||g===h||typeof g=="object"&&g!==null&&(g.$$typeof===f||g.$$typeof===u||g.$$typeof===o||g.$$typeof===s||g.$$typeof===a||g.$$typeof===p||g.getModuleId!==void 0)},xs.typeOf=m,xs}var pee;function Yst(){return pee||(pee=1,mF.exports=Kst()),mF.exports}var M0e=Yst();function V0(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function C0e(i){if(X.isValidElement(i)||M0e.isValidElementType(i)||!V0(i))return i;const e={};return Object.keys(i).forEach(t=>{e[t]=C0e(i[t])}),e}function rh(i,e,t={clone:!0}){const n=t.clone?{...i}:i;return V0(i)&&V0(e)&&Object.keys(e).forEach(r=>{X.isValidElement(e[r])||M0e.isValidElementType(e[r])?n[r]=e[r]:V0(e[r])&&Object.prototype.hasOwnProperty.call(i,r)&&V0(i[r])?n[r]=rh(i[r],e[r],t):t.clone?n[r]=V0(e[r])?C0e(e[r]):e[r]:n[r]=e[r]}),n}const Xst=i=>{const e=Object.keys(i).map(t=>({key:t,val:i[t]}))||[];return e.sort((t,n)=>t.val-n.val),e.reduce((t,n)=>({...t,[n.key]:n.val}),{})};function Qst(i){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:n=5,...r}=i,s=Xst(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${t})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-n/100}${t})`}function c(h,p){const m=o.indexOf(p);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${t}) and (max-width:${(m!==-1&&typeof e[o[m]]=="number"?e[o[m]]:p)-n/100}${t})`}function u(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function f(h){const p=o.indexOf(h);return p===0?a(o[1]):p===o.length-1?l(o[p]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:c,only:u,not:f,unit:t,...r}}function Zst(i,e){if(!i.containerQueries)return e;const t=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,r)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=n.match(s))==null?void 0:o[1])||0)-+(((a=r.match(s))==null?void 0:a[1])||0)});return t.length?t.reduce((n,r)=>{const s=e[r];return delete n[r],n[r]=s,n},{...e}):e}function Jst(i,e){return e==="@"||e.startsWith("@")&&(i.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function eot(i,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,n,r]=t,s=Number.isNaN(+n)?n||0:+n;return i.containerQueries(r).up(s)}function tot(i){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function t(s,o){s.up=(...a)=>e(i.breakpoints.up(...a),o),s.down=(...a)=>e(i.breakpoints.down(...a),o),s.between=(...a)=>e(i.breakpoints.between(...a),o),s.only=(...a)=>e(i.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(i.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const n={},r=s=>(t(n,s),n);return t(r),{...i,containerQueries:r}}const not={borderRadius:4};function rM(i,e){return e?rh(i,e,{clone:!1}):i}const VN={xs:0,sm:600,md:900,lg:1200,xl:1536},Aee={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${VN[i]}px)`},iot={containerQueries:i=>({up:e=>{let t=typeof e=="number"?e:VN[e]||e;return typeof t=="number"&&(t=`${t}px`),i?`@container ${i} (min-width:${t})`:`@container (min-width:${t})`}})};function dg(i,e,t){const n=i.theme||{};if(Array.isArray(e)){const s=n.breakpoints||Aee;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const s=n.breakpoints||Aee;return Object.keys(e).reduce((o,a)=>{if(Jst(s.keys,a)){const l=eot(n.containerQueries?n:iot,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(s.values||VN).includes(a)){const l=s.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function rot(i={}){var t;return((t=i.keys)==null?void 0:t.reduce((n,r)=>{const s=i.up(r);return n[s]={},n},{}))||{}}function sot(i,e){return i.reduce((t,n)=>{const r=t[n];return(!r||Object.keys(r).length===0)&&delete t[n],t},e)}function mu(i){if(typeof i!="string")throw new Error(Qx(7));return i.charAt(0).toUpperCase()+i.slice(1)}function qN(i,e,t=!0){if(!e||typeof e!="string")return null;if(i&&i.vars&&t){const n=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,i);if(n!=null)return n}return e.split(".").reduce((n,r)=>n&&n[r]!=null?n[r]:null,i)}function O8(i,e,t,n=t){let r;return typeof i=="function"?r=i(t):Array.isArray(i)?r=i[t]||n:r=qN(i,t)||n,e&&(r=e(r,n,i)),r}function _a(i){const{prop:e,cssProperty:t=i.prop,themeKey:n,transform:r}=i,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=qN(l,n)||{};return dg(o,a,f=>{let h=O8(c,r,f);return f===h&&typeof f=="string"&&(h=O8(c,r,`${e}${f==="default"?"":mu(f)}`,f)),t===!1?h:{[t]:h}})};return s.propTypes={},s.filterProps=[e],s}function oot(i){const e={};return t=>(e[t]===void 0&&(e[t]=i(t)),e[t])}const aot={m:"margin",p:"padding"},lot={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},mee={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cot=oot(i=>{if(i.length>2)if(mee[i])i=mee[i];else return[i];const[e,t]=i.split(""),n=aot[e],r=lot[t]||"";return Array.isArray(r)?r.map(s=>n+s):[n+r]}),fV=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],hV=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...fV,...hV];function AC(i,e,t,n){const r=qN(i,e,!0)??t;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=r[o];return s>=0?a:typeof a=="number"?-a:`-${a}`}:typeof r=="function"?r:()=>{}}function dV(i){return AC(i,"spacing",8)}function mC(i,e){return typeof e=="string"||e==null?e:i(e)}function uot(i,e){return t=>i.reduce((n,r)=>(n[r]=mC(e,t),n),{})}function fot(i,e,t,n){if(!e.includes(t))return null;const r=cot(t),s=uot(r,n),o=i[t];return dg(i,o,s)}function R0e(i,e){const t=dV(i.theme);return Object.keys(i).map(n=>fot(i,e,n,t)).reduce(rM,{})}function Wo(i){return R0e(i,fV)}Wo.propTypes={};Wo.filterProps=fV;function Ko(i){return R0e(i,hV)}Ko.propTypes={};Ko.filterProps=hV;function D0e(i=8,e=dV({spacing:i})){if(i.mui)return i;const t=(...n)=>(n.length===0?[1]:n).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function $N(...i){const e=i.reduce((n,r)=>(r.filterProps.forEach(s=>{n[s]=r}),n),{}),t=n=>Object.keys(n).reduce((r,s)=>e[s]?rM(r,e[s](n)):r,{});return t.propTypes={},t.filterProps=i.reduce((n,r)=>n.concat(r.filterProps),[]),t}function ad(i){return typeof i!="number"?i:`${i}px solid`}function Bd(i,e){return _a({prop:i,themeKey:"borders",transform:e})}const hot=Bd("border",ad),dot=Bd("borderTop",ad),pot=Bd("borderRight",ad),Aot=Bd("borderBottom",ad),mot=Bd("borderLeft",ad),got=Bd("borderColor"),yot=Bd("borderTopColor"),vot=Bd("borderRightColor"),xot=Bd("borderBottomColor"),bot=Bd("borderLeftColor"),_ot=Bd("outline",ad),Sot=Bd("outlineColor"),jN=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const e=AC(i.theme,"shape.borderRadius",4),t=n=>({borderRadius:mC(e,n)});return dg(i,i.borderRadius,t)}return null};jN.propTypes={};jN.filterProps=["borderRadius"];$N(hot,dot,pot,Aot,mot,got,yot,vot,xot,bot,jN,_ot,Sot);const WN=i=>{if(i.gap!==void 0&&i.gap!==null){const e=AC(i.theme,"spacing",8),t=n=>({gap:mC(e,n)});return dg(i,i.gap,t)}return null};WN.propTypes={};WN.filterProps=["gap"];const KN=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const e=AC(i.theme,"spacing",8),t=n=>({columnGap:mC(e,n)});return dg(i,i.columnGap,t)}return null};KN.propTypes={};KN.filterProps=["columnGap"];const YN=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const e=AC(i.theme,"spacing",8),t=n=>({rowGap:mC(e,n)});return dg(i,i.rowGap,t)}return null};YN.propTypes={};YN.filterProps=["rowGap"];const Tot=_a({prop:"gridColumn"}),Eot=_a({prop:"gridRow"}),wot=_a({prop:"gridAutoFlow"}),Mot=_a({prop:"gridAutoColumns"}),Cot=_a({prop:"gridAutoRows"}),Rot=_a({prop:"gridTemplateColumns"}),Dot=_a({prop:"gridTemplateRows"}),Lot=_a({prop:"gridTemplateAreas"}),Pot=_a({prop:"gridArea"});$N(WN,KN,YN,Tot,Eot,wot,Mot,Cot,Rot,Dot,Lot,Pot);function z2(i,e){return e==="grey"?e:i}const Not=_a({prop:"color",themeKey:"palette",transform:z2}),Bot=_a({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:z2}),Iot=_a({prop:"backgroundColor",themeKey:"palette",transform:z2});$N(Not,Bot,Iot);function Jf(i){return i<=1&&i!==0?`${i*100}%`:i}const Oot=_a({prop:"width",transform:Jf}),pV=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const e=t=>{var r,s,o,a,l;const n=((o=(s=(r=i.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:o[t])||VN[t];return n?((l=(a=i.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${n}${i.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Jf(t)}};return dg(i,i.maxWidth,e)}return null};pV.filterProps=["maxWidth"];const Fot=_a({prop:"minWidth",transform:Jf}),Uot=_a({prop:"height",transform:Jf}),kot=_a({prop:"maxHeight",transform:Jf}),Got=_a({prop:"minHeight",transform:Jf});_a({prop:"size",cssProperty:"width",transform:Jf});_a({prop:"size",cssProperty:"height",transform:Jf});const zot=_a({prop:"boxSizing"});$N(Oot,pV,Fot,Uot,kot,Got,zot);const gC={border:{themeKey:"borders",transform:ad},borderTop:{themeKey:"borders",transform:ad},borderRight:{themeKey:"borders",transform:ad},borderBottom:{themeKey:"borders",transform:ad},borderLeft:{themeKey:"borders",transform:ad},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ad},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:jN},color:{themeKey:"palette",transform:z2},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:z2},backgroundColor:{themeKey:"palette",transform:z2},p:{style:Ko},pt:{style:Ko},pr:{style:Ko},pb:{style:Ko},pl:{style:Ko},px:{style:Ko},py:{style:Ko},padding:{style:Ko},paddingTop:{style:Ko},paddingRight:{style:Ko},paddingBottom:{style:Ko},paddingLeft:{style:Ko},paddingX:{style:Ko},paddingY:{style:Ko},paddingInline:{style:Ko},paddingInlineStart:{style:Ko},paddingInlineEnd:{style:Ko},paddingBlock:{style:Ko},paddingBlockStart:{style:Ko},paddingBlockEnd:{style:Ko},m:{style:Wo},mt:{style:Wo},mr:{style:Wo},mb:{style:Wo},ml:{style:Wo},mx:{style:Wo},my:{style:Wo},margin:{style:Wo},marginTop:{style:Wo},marginRight:{style:Wo},marginBottom:{style:Wo},marginLeft:{style:Wo},marginX:{style:Wo},marginY:{style:Wo},marginInline:{style:Wo},marginInlineStart:{style:Wo},marginInlineEnd:{style:Wo},marginBlock:{style:Wo},marginBlockStart:{style:Wo},marginBlockEnd:{style:Wo},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:WN},rowGap:{style:YN},columnGap:{style:KN},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Jf},maxWidth:{style:pV},minWidth:{transform:Jf},height:{transform:Jf},maxHeight:{transform:Jf},minHeight:{transform:Jf},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Hot(...i){const e=i.reduce((n,r)=>n.concat(Object.keys(r)),[]),t=new Set(e);return i.every(n=>t.size===Object.keys(n).length)}function Vot(i,e){return typeof i=="function"?i(e):i}function qot(){function i(t,n,r,s){const o={[t]:n,theme:r},a=s[t];if(!a)return{[t]:n};const{cssProperty:l=t,themeKey:c,transform:u,style:f}=a;if(n==null)return null;if(c==="typography"&&n==="inherit")return{[t]:n};const h=qN(r,c)||{};return f?f(o):dg(o,n,m=>{let g=O8(h,u,m);return m===g&&typeof m=="string"&&(g=O8(h,u,`${t}${m==="default"?"":mu(m)}`,m)),l===!1?g:{[l]:g}})}function e(t){const{sx:n,theme:r={}}=t||{};if(!n)return null;const s=r.unstable_sxConfig??gC;function o(a){let l=a;if(typeof a=="function")l=a(r);else if(typeof a!="object")return a;if(!l)return null;const c=rot(r.breakpoints),u=Object.keys(c);let f=c;return Object.keys(l).forEach(h=>{const p=Vot(l[h],r);if(p!=null)if(typeof p=="object")if(s[h])f=rM(f,i(h,p,r,s));else{const m=dg({theme:r},p,g=>({[h]:g}));Hot(m,p)?f[h]=e({sx:p,theme:r}):f=rM(f,m)}else f=rM(f,i(h,p,r,s))}),Zst(r,sot(u,f))}return Array.isArray(n)?n.map(o):o(n)}return e}const Zx=qot();Zx.filterProps=["sx"];function $ot(i,e){var n;const t=this;if(t.vars){if(!((n=t.colorSchemes)!=null&&n[i])||typeof t.getColorSchemeSelector!="function")return{};let r=t.getColorSchemeSelector(i);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return t.palette.mode===i?e:{}}function AV(i={},...e){const{breakpoints:t={},palette:n={},spacing:r,shape:s={},...o}=i,a=Qst(t),l=D0e(r);let c=rh({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:l,shape:{...not,...s}},o);return c=tot(c),c.applyStyles=$ot,c=e.reduce((u,f)=>rh(u,f),c),c.unstable_sxConfig={...gC,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(f){return Zx({sx:f,theme:this})},c}function jot(i){return Object.keys(i).length===0}function Wot(i=null){const e=X.useContext(lV);return!e||jot(e)?i:e}const Kot=AV();function L0e(i=Kot){return Wot(i)}const Yot=i=>{var n;const e={systemProps:{},otherProps:{}},t=((n=i==null?void 0:i.theme)==null?void 0:n.unstable_sxConfig)??gC;return Object.keys(i).forEach(r=>{t[r]?e.systemProps[r]=i[r]:e.otherProps[r]=i[r]}),e};function Xot(i){const{sx:e,...t}=i,{systemProps:n,otherProps:r}=Yot(t);let s;return Array.isArray(e)?s=[n,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return V0(a)?{...n,...a}:n}:s={...n,...e},{...r,sx:s}}const gee=i=>i,Qot=()=>{let i=gee;return{configure(e){i=e},generate(e){return i(e)},reset(){i=gee}}},P0e=Qot();function N0e(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=N0e(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function Ro(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=N0e(i))&&(n&&(n+=" "),n+=e);return n}function Zot(i={}){const{themeId:e,defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:r}=i,s=w0e("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Zx);return X.forwardRef(function(l,c){const u=L0e(t),{className:f,component:h="div",...p}=Xot(l);return ce.jsx(s,{as:h,ref:c,className:Ro(f,r?r(n):n),theme:e&&u[e]||u,...p})})}const Jot={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xg(i,e,t="Mui"){const n=Jot[e];return n?`${t}-${n}`:`${P0e.generate(i)}-${e}`}function DA(i,e,t="Mui"){const n={};return e.forEach(r=>{n[r]=xg(i,r,t)}),n}function B0e(i){const{variants:e,...t}=i,n={variants:e,style:hee(t),isProcessed:!0};return n.style===t||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=hee(r.style))}),n}const eat=AV();function gF(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}function tat(i){return i?(e,t)=>t[i]:null}function nat(i,e,t){i.theme=sat(i.theme)?t:i.theme[e]||i.theme}function DD(i,e){const t=typeof e=="function"?e(i):e;if(Array.isArray(t))return t.flatMap(n=>DD(i,n));if(Array.isArray(t==null?void 0:t.variants)){let n;if(t.isProcessed)n=t.style;else{const{variants:r,...s}=t;n=s}return I0e(i,t.variants,[n])}return t!=null&&t.isProcessed?t.style:t}function I0e(i,e,t=[]){var r;let n;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(n??(n={...i,...i.ownerState,ownerState:i.ownerState}),!o.props(n))continue}else for(const a in o.props)if(i[a]!==o.props[a]&&((r=i.ownerState)==null?void 0:r[a])!==o.props[a])continue e;typeof o.style=="function"?(n??(n={...i,...i.ownerState,ownerState:i.ownerState}),t.push(o.style(n))):t.push(o.style)}return t}function iat(i={}){const{themeId:e,defaultTheme:t=eat,rootShouldForwardProp:n=gF,slotShouldForwardProp:r=gF}=i;function s(a){nat(a,e,t)}return(a,l={})=>{Wst(a,I=>I.filter(F=>F!==Zx));const{name:c,slot:u,skipVariantsResolver:f,skipSx:h,overridesResolver:p=tat(aat(u)),...m}=l,g=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,b=h||!1;let T=gF;u==="Root"||u==="root"?T=n:u?T=r:oat(a)&&(T=void 0);const C=w0e(a,{shouldForwardProp:T,label:rat(),...m}),R=I=>{if(typeof I=="function"&&I.__emotion_real!==I)return function(k){return DD(k,I)};if(V0(I)){const F=B0e(I);return F.variants?function(q){return DD(q,F)}:F.style}return I},P=(...I)=>{const F=[],k=I.map(R),q=[];if(F.push(s),c&&p&&q.push(function(ee){var Q,se;const oe=(se=(Q=ee.theme.components)==null?void 0:Q[c])==null?void 0:se.styleOverrides;if(!oe)return null;const re={};for(const le in oe)re[le]=DD(ee,oe[le]);return p(ee,re)}),c&&!g&&q.push(function(ee){var re,Q;const Y=ee.theme,oe=(Q=(re=Y==null?void 0:Y.components)==null?void 0:re[c])==null?void 0:Q.variants;return oe?I0e(ee,oe):null}),b||q.push(Zx),Array.isArray(k[0])){const $=k.shift(),ee=new Array(F.length).fill(""),Y=new Array(q.length).fill("");let oe;oe=[...ee,...$,...Y],oe.raw=[...ee,...$.raw,...Y],F.unshift(oe)}const H=[...F,...k,...q],O=C(...H);return a.muiName&&(O.muiName=a.muiName),O};return C.withConfig&&(P.withConfig=C.withConfig),P}}function rat(i,e){return void 0}function sat(i){for(const e in i)return!1;return!0}function oat(i){return typeof i=="string"&&i.charCodeAt(0)>96}function aat(i){return i&&i.charAt(0).toLowerCase()+i.slice(1)}function x7(i,e){const t={...e};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const r=n;if(r==="components"||r==="slots")t[r]={...i[r],...t[r]};else if(r==="componentsProps"||r==="slotProps"){const s=i[r],o=e[r];if(!o)t[r]=s||{};else if(!s)t[r]=o;else{t[r]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const l=a;t[r][l]=x7(s[l],o[l])}}}else t[r]===void 0&&(t[r]=i[r])}return t}const s3=typeof window<"u"?X.useLayoutEffect:X.useEffect;function O0e(i,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(i,t))}function mV(i,e=0,t=1){return O0e(i,e,t)}function lat(i){i=i.slice(1);const e=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let t=i.match(e);return t&&t[0].length===1&&(t=t.map(n=>n+n)),t?`rgb${t.length===4?"a":""}(${t.map((n,r)=>r<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function o1(i){if(i.type)return i;if(i.charAt(0)==="#")return o1(lat(i));const e=i.indexOf("("),t=i.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Qx(9,i));let n=i.substring(e+1,i.length-1),r;if(t==="color"){if(n=n.split(" "),r=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Qx(10,r))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:t,values:n,colorSpace:r}}const cat=i=>{const e=o1(i);return e.values.slice(0,3).map((t,n)=>e.type.includes("hsl")&&n!==0?`${t}%`:t).join(" ")},ww=(i,e)=>{try{return cat(i)}catch{return i}};function XN(i){const{type:e,colorSpace:t}=i;let{values:n}=i;return e.includes("rgb")?n=n.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${t} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function F0e(i){i=o1(i);const{values:e}=i,t=e[0],n=e[1]/100,r=e[2]/100,s=n*Math.min(r,1-r),o=(c,u=(c+t/30)%12)=>r-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return i.type==="hsla"&&(a+="a",l.push(e[3])),XN({type:a,values:l})}function b7(i){i=o1(i);let e=i.type==="hsl"||i.type==="hsla"?o1(F0e(i)).values:i.values;return e=e.map(t=>(i.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function uat(i,e){const t=b7(i),n=b7(e);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function gV(i,e){return i=o1(i),e=mV(e),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${e}`:i.values[3]=e,XN(i)}function G4(i,e,t){try{return gV(i,e)}catch{return i}}function yV(i,e){if(i=o1(i),e=mV(e),i.type.includes("hsl"))i.values[2]*=1-e;else if(i.type.includes("rgb")||i.type.includes("color"))for(let t=0;t<3;t+=1)i.values[t]*=1-e;return XN(i)}function Ms(i,e,t){try{return yV(i,e)}catch{return i}}function vV(i,e){if(i=o1(i),e=mV(e),i.type.includes("hsl"))i.values[2]+=(100-i.values[2])*e;else if(i.type.includes("rgb"))for(let t=0;t<3;t+=1)i.values[t]+=(255-i.values[t])*e;else if(i.type.includes("color"))for(let t=0;t<3;t+=1)i.values[t]+=(1-i.values[t])*e;return XN(i)}function Cs(i,e,t){try{return vV(i,e)}catch{return i}}function U0e(i,e=.15){return b7(i)>.5?yV(i,e):vV(i,e)}function z4(i,e,t){try{return U0e(i,e)}catch{return i}}function fat(i,e){var t,n,r;return X.isValidElement(i)&&e.indexOf(i.type.muiName??((r=(n=(t=i.type)==null?void 0:t._payload)==null?void 0:n.value)==null?void 0:r.muiName))!==-1}function yee(i){return i&&i.ownerDocument||document}function _7(i,e){typeof i=="function"?i(e):i&&(i.current=e)}let vee=0;function hat(i){const[e,t]=X.useState(i),n=i||e;return X.useEffect(()=>{e==null&&(vee+=1,t(`mui-${vee}`))},[e]),n}const dat={...PD},xee=dat.useId;function pat(i){if(xee!==void 0){const e=xee();return i??e}return hat(i)}function k0e({controlled:i,default:e,name:t,state:n="value"}){const{current:r}=X.useRef(i!==void 0),[s,o]=X.useState(e),a=r?i:s,l=X.useCallback(c=>{r||o(c)},[]);return[a,l]}function H2(i){const e=X.useRef(i);return s3(()=>{e.current=i}),X.useRef((...t)=>(0,e.current)(...t)).current}function Ip(...i){return X.useMemo(()=>i.every(e=>e==null)?null:e=>{i.forEach(t=>{_7(t,e)})},i)}const bee={};function G0e(i,e){const t=X.useRef(bee);return t.current===bee&&(t.current=i(e)),t}const Aat=[];function mat(i){X.useEffect(i,Aat)}class QN{constructor(){uE(this,"currentId",null);uE(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});uE(this,"disposeEffect",()=>this.clear)}static create(){return new QN}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Jv(){const i=G0e(QN.create).current;return mat(i.disposeEffect),i}function F8(i){try{return i.matches(":focus-visible")}catch{}return!1}function y1(i,e,t=void 0){const n={};for(const r in i){const s=i[r];let o="",a=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}n[r]=o}return n}function gat(i){return typeof i=="string"}function z0e(i,e,t){return i===void 0||gat(i)?e:{...e,ownerState:{...e.ownerState,...t}}}function yat(i,e=[]){if(i===void 0)return{};const t={};return Object.keys(i).filter(n=>n.match(/^on[A-Z]/)&&typeof i[n]=="function"&&!e.includes(n)).forEach(n=>{t[n]=i[n]}),t}function _ee(i){if(i===void 0)return{};const e={};return Object.keys(i).filter(t=>!(t.match(/^on[A-Z]/)&&typeof i[t]=="function")).forEach(t=>{e[t]=i[t]}),e}function H0e(i){const{getSlotProps:e,additionalProps:t,externalSlotProps:n,externalForwardedProps:r,className:s}=i;if(!e){const p=Ro(t==null?void 0:t.className,s,r==null?void 0:r.className,n==null?void 0:n.className),m={...t==null?void 0:t.style,...r==null?void 0:r.style,...n==null?void 0:n.style},g={...t,...r,...n};return p.length>0&&(g.className=p),Object.keys(m).length>0&&(g.style=m),{props:g,internalRef:void 0}}const o=yat({...r,...n}),a=_ee(n),l=_ee(r),c=e(o),u=Ro(c==null?void 0:c.className,t==null?void 0:t.className,s,r==null?void 0:r.className,n==null?void 0:n.className),f={...c==null?void 0:c.style,...t==null?void 0:t.style,...r==null?void 0:r.style,...n==null?void 0:n.style},h={...c,...t,...l,...a};return u.length>0&&(h.className=u),Object.keys(f).length>0&&(h.style=f),{props:h,internalRef:c.ref}}function V0e(i,e,t){return typeof i=="function"?i(e,t):i}function vat(i){var f;const{elementType:e,externalSlotProps:t,ownerState:n,skipResolvingSlotProps:r=!1,...s}=i,o=r?{}:V0e(t,n),{props:a,internalRef:l}=H0e({...s,externalSlotProps:o}),c=Ip(l,o==null?void 0:o.ref,(f=i.additionalProps)==null?void 0:f.ref);return z0e(e,{...a,ref:c},n)}function ZN(i){var e;return parseInt(X.version,10)>=19?((e=i==null?void 0:i.props)==null?void 0:e.ref)||null:(i==null?void 0:i.ref)||null}const xat=X.createContext(),q0e=()=>X.useContext(xat)??!1,bat=X.createContext(void 0);function _at(i){const{theme:e,name:t,props:n}=i;if(!e||!e.components||!e.components[t])return n;const r=e.components[t];return r.defaultProps?x7(r.defaultProps,n):!r.styleOverrides&&!r.variants?x7(r,n):n}function Sat({props:i,name:e}){const t=X.useContext(bat);return _at({props:i,name:e,theme:{components:t}})}const See={theme:void 0};function Tat(i){let e,t;return function(r){let s=e;return(s===void 0||r.theme!==t)&&(See.theme=r.theme,s=B0e(i(See)),e=s,t=r.theme),s}}function Eat(i=""){function e(...n){if(!n.length)return"";const r=n[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${i?`${i}-`:""}${r}${e(...n.slice(1))})`:`, ${r}`}return(n,...r)=>`var(--${i?`${i}-`:""}${n}${e(...r)})`}const Tee=(i,e,t,n=[])=>{let r=i;e.forEach((s,o)=>{o===e.length-1?Array.isArray(r)?r[Number(s)]=t:r&&typeof r=="object"&&(r[s]=t):r&&typeof r=="object"&&(r[s]||(r[s]=n.includes(s)?[]:{}),r=r[s])})},wat=(i,e,t)=>{function n(r,s=[],o=[]){Object.entries(r).forEach(([a,l])=>{(!t||t&&!t([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?n(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}n(i)},Mat=(i,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>i.includes(n))||i[i.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function yF(i,e){const{prefix:t,shouldSkipGeneratingVar:n}=e||{},r={},s={},o={};return wat(i,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!n||!n(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,f=Mat(a,l);Object.assign(r,{[u]:f}),Tee(s,a,`var(${u})`,c),Tee(o,a,`var(${u}, ${f})`,c)}},a=>a[0]==="vars"),{css:r,vars:s,varsWithDefaults:o}}function Cat(i,e={}){const{getSelector:t=b,disableCssColorScheme:n,colorSchemeSelector:r}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=i,{vars:c,css:u,varsWithDefaults:f}=yF(l,e);let h=f;const p={},{[a]:m,...g}=s;if(Object.entries(g||{}).forEach(([R,P])=>{const{vars:I,css:F,varsWithDefaults:k}=yF(P,e);h=rh(h,k),p[R]={css:F,vars:I}}),m){const{css:R,vars:P,varsWithDefaults:I}=yF(m,e);h=rh(h,I),p[a]={css:R,vars:P}}function b(R,P){var F,k;let I=r;if(r==="class"&&(I=".%s"),r==="data"&&(I="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(I=`[${r}="%s"]`),R){if(I==="media")return i.defaultColorScheme===R?":root":{[`@media (prefers-color-scheme: ${((k=(F=s[R])==null?void 0:F.palette)==null?void 0:k.mode)||R})`]:{":root":P}};if(I)return i.defaultColorScheme===R?`:root, ${I.replace("%s",String(R))}`:I.replace("%s",String(R))}return":root"}return{vars:h,generateThemeVars:()=>{let R={...c};return Object.entries(p).forEach(([,{vars:P}])=>{R=rh(R,P)}),R},generateStyleSheets:()=>{var q,H;const R=[],P=i.defaultColorScheme||"light";function I(O,$){Object.keys($).length&&R.push(typeof O=="string"?{[O]:{...$}}:O)}I(t(void 0,{...u}),u);const{[P]:F,...k}=p;if(F){const{css:O}=F,$=(H=(q=s[P])==null?void 0:q.palette)==null?void 0:H.mode,ee=!n&&$?{colorScheme:$,...O}:{...O};I(t(P,{...ee}),ee)}return Object.entries(k).forEach(([O,{css:$}])=>{var oe,re;const ee=(re=(oe=s[O])==null?void 0:oe.palette)==null?void 0:re.mode,Y=!n&&ee?{colorScheme:ee,...$}:{...$};I(t(O,{...Y}),Y)}),R}}}function Rat(i){return function(t){return i==="media"?`@media (prefers-color-scheme: ${t})`:i?i.startsWith("data-")&&!i.includes("%s")?`[${i}="${t}"] &`:i==="class"?`.${t} &`:i==="data"?`[data-${t}] &`:`${i.replace("%s",t)} &`:"&"}}const xV="$$material",o3={black:"#000",white:"#fff"},Dat={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},e2={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},t2={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},cw={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},n2={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},i2={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},r2={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function $0e(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:o3.white,default:o3.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Lat=$0e();function j0e(){return{text:{primary:o3.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:o3.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Eee=j0e();function wee(i,e,t,n){const r=n.light||n,s=n.dark||n*1.5;i[e]||(i.hasOwnProperty(t)?i[e]=i[t]:e==="light"?i.light=vV(i.main,r):e==="dark"&&(i.dark=yV(i.main,s)))}function Pat(i="light"){return i==="dark"?{main:n2[200],light:n2[50],dark:n2[400]}:{main:n2[700],light:n2[400],dark:n2[800]}}function Nat(i="light"){return i==="dark"?{main:e2[200],light:e2[50],dark:e2[400]}:{main:e2[500],light:e2[300],dark:e2[700]}}function Bat(i="light"){return i==="dark"?{main:t2[500],light:t2[300],dark:t2[700]}:{main:t2[700],light:t2[400],dark:t2[800]}}function Iat(i="light"){return i==="dark"?{main:i2[400],light:i2[300],dark:i2[700]}:{main:i2[700],light:i2[500],dark:i2[900]}}function Oat(i="light"){return i==="dark"?{main:r2[400],light:r2[300],dark:r2[700]}:{main:r2[800],light:r2[500],dark:r2[900]}}function Fat(i="light"){return i==="dark"?{main:cw[400],light:cw[300],dark:cw[700]}:{main:"#ed6c02",light:cw[500],dark:cw[900]}}function bV(i){const{mode:e="light",contrastThreshold:t=3,tonalOffset:n=.2,...r}=i,s=i.primary||Pat(e),o=i.secondary||Nat(e),a=i.error||Bat(e),l=i.info||Iat(e),c=i.success||Oat(e),u=i.warning||Fat(e);function f(g){return uat(g,Eee.text.primary)>=t?Eee.text.primary:Lat.text.primary}const h=({color:g,name:b,mainShade:T=500,lightShade:C=300,darkShade:R=700})=>{if(g={...g},!g.main&&g[T]&&(g.main=g[T]),!g.hasOwnProperty("main"))throw new Error(Qx(11,b?` (${b})`:"",T));if(typeof g.main!="string")throw new Error(Qx(12,b?` (${b})`:"",JSON.stringify(g.main)));return wee(g,"light",C,n),wee(g,"dark",R,n),g.contrastText||(g.contrastText=f(g.main)),g};let p;return e==="light"?p=$0e():e==="dark"&&(p=j0e()),rh({common:{...o3},mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:Dat,contrastThreshold:t,getContrastText:f,augmentColor:h,tonalOffset:n,...p},r)}function Uat(i){const e={};return Object.entries(i).forEach(n=>{const[r,s]=n;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function kat(i,e){return{toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}},...e}}function Gat(i){return Math.round(i*1e5)/1e5}const Mee={textTransform:"uppercase"},Cee='"Roboto", "Helvetica", "Arial", sans-serif';function zat(i,e){const{fontFamily:t=Cee,fontSize:n=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...f}=typeof e=="function"?e(i):e,h=n/14,p=u||(b=>`${b/l*h}rem`),m=(b,T,C,R,P)=>({fontFamily:t,fontWeight:b,fontSize:p(T),lineHeight:C,...t===Cee?{letterSpacing:`${Gat(R/T)}em`}:{},...P,...c}),g={h1:m(r,96,1.167,-1.5),h2:m(r,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(o,14,1.75,.4,Mee),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,Mee),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return rh({htmlFontSize:l,pxToRem:p,fontFamily:t,fontSize:n,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...g},f,{clone:!1})}const Hat=.2,Vat=.14,qat=.12;function ao(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${Hat})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${Vat})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${qat})`].join(",")}const $at=["none",ao(0,2,1,-1,0,1,1,0,0,1,3,0),ao(0,3,1,-2,0,2,2,0,0,1,5,0),ao(0,3,3,-2,0,3,4,0,0,1,8,0),ao(0,2,4,-1,0,4,5,0,0,1,10,0),ao(0,3,5,-1,0,5,8,0,0,1,14,0),ao(0,3,5,-1,0,6,10,0,0,1,18,0),ao(0,4,5,-2,0,7,10,1,0,2,16,1),ao(0,5,5,-3,0,8,10,1,0,3,14,2),ao(0,5,6,-3,0,9,12,1,0,3,16,2),ao(0,6,6,-3,0,10,14,1,0,4,18,3),ao(0,6,7,-4,0,11,15,1,0,4,20,3),ao(0,7,8,-4,0,12,17,2,0,5,22,4),ao(0,7,8,-4,0,13,19,2,0,5,24,4),ao(0,7,9,-4,0,14,21,2,0,5,26,4),ao(0,8,9,-5,0,15,22,2,0,6,28,5),ao(0,8,10,-5,0,16,24,2,0,6,30,5),ao(0,8,11,-5,0,17,26,2,0,6,32,5),ao(0,9,11,-5,0,18,28,2,0,7,34,6),ao(0,9,12,-6,0,19,29,2,0,7,36,6),ao(0,10,13,-6,0,20,31,3,0,8,38,7),ao(0,10,13,-6,0,21,33,3,0,8,40,7),ao(0,10,14,-6,0,22,35,3,0,8,42,7),ao(0,11,14,-7,0,23,36,3,0,9,44,8),ao(0,11,15,-7,0,24,38,3,0,9,46,8)],jat={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Wat={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ree(i){return`${Math.round(i)}ms`}function Kat(i){if(!i)return 0;const e=i/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Yat(i){const e={...jat,...i.easing},t={...Wat,...i.duration};return{getAutoHeightDuration:Kat,create:(r=["all"],s={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:Ree(o)} ${a} ${typeof l=="string"?l:Ree(l)}`).join(",")},...i,easing:e,duration:t}}const Xat={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Qat(i){return V0(i)||typeof i>"u"||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||Array.isArray(i)}function W0e(i={}){const e={...i};function t(n){const r=Object.entries(n);for(let s=0;s<r.length;s++){const[o,a]=r[s];!Qat(a)||o.startsWith("unstable_")?delete n[o]:V0(a)&&(n[o]={...a},t(n[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function S7(i={},...e){const{breakpoints:t,mixins:n={},spacing:r,palette:s={},transitions:o={},typography:a={},shape:l,...c}=i;if(i.vars)throw new Error(Qx(20));const u=bV(s),f=AV(i);let h=rh(f,{mixins:kat(f.breakpoints,n),palette:u,shadows:$at.slice(),typography:zat(u,a),transitions:Yat(o),zIndex:{...Xat}});return h=rh(h,c),h=e.reduce((p,m)=>rh(p,m),h),h.unstable_sxConfig={...gC,...c==null?void 0:c.unstable_sxConfig},h.unstable_sx=function(m){return Zx({sx:m,theme:this})},h.toRuntimeSource=W0e,h}function Zat(i){let e;return i<1?e=5.11916*i**2:e=4.5*Math.log(i+1)+2,Math.round(e*10)/1e3}const Jat=[...Array(25)].map((i,e)=>{if(e===0)return"none";const t=Zat(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function K0e(i){return{inputPlaceholder:i==="dark"?.5:.42,inputUnderline:i==="dark"?.7:.42,switchTrackDisabled:i==="dark"?.2:.12,switchTrack:i==="dark"?.3:.38}}function Y0e(i){return i==="dark"?Jat:[]}function elt(i){const{palette:e={mode:"light"},opacity:t,overlays:n,...r}=i,s=bV(e);return{palette:s,opacity:{...K0e(s.mode),...t},overlays:n||Y0e(s.mode),...r}}function tlt(i){var e;return!!i[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!i[0].match(/sxConfig$/)||i[0]==="palette"&&!!((e=i[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const nlt=i=>[...[...Array(25)].map((e,t)=>`--${i?`${i}-`:""}overlays-${t}`),`--${i?`${i}-`:""}palette-AppBar-darkBg`,`--${i?`${i}-`:""}palette-AppBar-darkColor`],ilt=i=>(e,t)=>{const n=i.rootSelector||":root",r=i.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),i.defaultColorScheme===e){if(e==="dark"){const o={};return nlt(i.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),s==="media"?{[n]:t,"@media (prefers-color-scheme: dark)":{[n]:o}}:s?{[s.replace("%s",e)]:o,[`${n}, ${s.replace("%s",e)}`]:t}:{[n]:{...t,...o}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:t}};if(s)return s.replace("%s",String(e))}return n};function rlt(i,e){e.forEach(t=>{i[t]||(i[t]={})})}function Nt(i,e,t){!i[e]&&t&&(i[e]=t)}function Mw(i){return typeof i!="string"||!i.startsWith("hsl")?i:F0e(i)}function _m(i,e){`${e}Channel`in i||(i[`${e}Channel`]=ww(Mw(i[e])))}function slt(i){return typeof i=="number"?`${i}px`:typeof i=="string"||typeof i=="function"||Array.isArray(i)?i:"8px"}const R0=i=>{try{return i()}catch{}},olt=(i="mui")=>Eat(i);function vF(i,e,t,n){if(!e)return;e=e===!0?{}:e;const r=n==="dark"?"dark":"light";if(!t){i[n]=elt({...e,palette:{mode:r,...e==null?void 0:e.palette}});return}const{palette:s,...o}=S7({...t,palette:{mode:r,...e==null?void 0:e.palette}});return i[n]={...e,palette:s,opacity:{...K0e(r),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Y0e(r)},o}function alt(i={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=tlt,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=i,u=Object.keys(t)[0],f=n||(t.light&&u!=="light"?"light":u),h=olt(s),{[f]:p,light:m,dark:g,...b}=t,T={...b};let C=p;if((f==="dark"&&!("dark"in t)||f==="light"&&!("light"in t))&&(C=!0),!C)throw new Error(Qx(21,f));const R=vF(T,C,c,f);m&&!T.light&&vF(T,m,void 0,"light"),g&&!T.dark&&vF(T,g,void 0,"dark");let P={defaultColorScheme:f,...R,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:l,getCssVar:h,colorSchemes:T,font:{...Uat(R.typography),...R.font},spacing:slt(c.spacing)};Object.keys(P.colorSchemes).forEach(H=>{const O=P.colorSchemes[H].palette,$=ee=>{const Y=ee.split("-"),oe=Y[1],re=Y[2];return h(ee,O[oe][re])};if(O.mode==="light"&&(Nt(O.common,"background","#fff"),Nt(O.common,"onBackground","#000")),O.mode==="dark"&&(Nt(O.common,"background","#000"),Nt(O.common,"onBackground","#fff")),rlt(O,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),O.mode==="light"){Nt(O.Alert,"errorColor",Ms(O.error.light,.6)),Nt(O.Alert,"infoColor",Ms(O.info.light,.6)),Nt(O.Alert,"successColor",Ms(O.success.light,.6)),Nt(O.Alert,"warningColor",Ms(O.warning.light,.6)),Nt(O.Alert,"errorFilledBg",$("palette-error-main")),Nt(O.Alert,"infoFilledBg",$("palette-info-main")),Nt(O.Alert,"successFilledBg",$("palette-success-main")),Nt(O.Alert,"warningFilledBg",$("palette-warning-main")),Nt(O.Alert,"errorFilledColor",R0(()=>O.getContrastText(O.error.main))),Nt(O.Alert,"infoFilledColor",R0(()=>O.getContrastText(O.info.main))),Nt(O.Alert,"successFilledColor",R0(()=>O.getContrastText(O.success.main))),Nt(O.Alert,"warningFilledColor",R0(()=>O.getContrastText(O.warning.main))),Nt(O.Alert,"errorStandardBg",Cs(O.error.light,.9)),Nt(O.Alert,"infoStandardBg",Cs(O.info.light,.9)),Nt(O.Alert,"successStandardBg",Cs(O.success.light,.9)),Nt(O.Alert,"warningStandardBg",Cs(O.warning.light,.9)),Nt(O.Alert,"errorIconColor",$("palette-error-main")),Nt(O.Alert,"infoIconColor",$("palette-info-main")),Nt(O.Alert,"successIconColor",$("palette-success-main")),Nt(O.Alert,"warningIconColor",$("palette-warning-main")),Nt(O.AppBar,"defaultBg",$("palette-grey-100")),Nt(O.Avatar,"defaultBg",$("palette-grey-400")),Nt(O.Button,"inheritContainedBg",$("palette-grey-300")),Nt(O.Button,"inheritContainedHoverBg",$("palette-grey-A100")),Nt(O.Chip,"defaultBorder",$("palette-grey-400")),Nt(O.Chip,"defaultAvatarColor",$("palette-grey-700")),Nt(O.Chip,"defaultIconColor",$("palette-grey-700")),Nt(O.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Nt(O.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Nt(O.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Nt(O.LinearProgress,"primaryBg",Cs(O.primary.main,.62)),Nt(O.LinearProgress,"secondaryBg",Cs(O.secondary.main,.62)),Nt(O.LinearProgress,"errorBg",Cs(O.error.main,.62)),Nt(O.LinearProgress,"infoBg",Cs(O.info.main,.62)),Nt(O.LinearProgress,"successBg",Cs(O.success.main,.62)),Nt(O.LinearProgress,"warningBg",Cs(O.warning.main,.62)),Nt(O.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),Nt(O.Slider,"primaryTrack",Cs(O.primary.main,.62)),Nt(O.Slider,"secondaryTrack",Cs(O.secondary.main,.62)),Nt(O.Slider,"errorTrack",Cs(O.error.main,.62)),Nt(O.Slider,"infoTrack",Cs(O.info.main,.62)),Nt(O.Slider,"successTrack",Cs(O.success.main,.62)),Nt(O.Slider,"warningTrack",Cs(O.warning.main,.62));const ee=z4(O.background.default,.8);Nt(O.SnackbarContent,"bg",ee),Nt(O.SnackbarContent,"color",R0(()=>O.getContrastText(ee))),Nt(O.SpeedDialAction,"fabHoverBg",z4(O.background.paper,.15)),Nt(O.StepConnector,"border",$("palette-grey-400")),Nt(O.StepContent,"border",$("palette-grey-400")),Nt(O.Switch,"defaultColor",$("palette-common-white")),Nt(O.Switch,"defaultDisabledColor",$("palette-grey-100")),Nt(O.Switch,"primaryDisabledColor",Cs(O.primary.main,.62)),Nt(O.Switch,"secondaryDisabledColor",Cs(O.secondary.main,.62)),Nt(O.Switch,"errorDisabledColor",Cs(O.error.main,.62)),Nt(O.Switch,"infoDisabledColor",Cs(O.info.main,.62)),Nt(O.Switch,"successDisabledColor",Cs(O.success.main,.62)),Nt(O.Switch,"warningDisabledColor",Cs(O.warning.main,.62)),Nt(O.TableCell,"border",Cs(G4(O.divider,1),.88)),Nt(O.Tooltip,"bg",G4(O.grey[700],.92))}if(O.mode==="dark"){Nt(O.Alert,"errorColor",Cs(O.error.light,.6)),Nt(O.Alert,"infoColor",Cs(O.info.light,.6)),Nt(O.Alert,"successColor",Cs(O.success.light,.6)),Nt(O.Alert,"warningColor",Cs(O.warning.light,.6)),Nt(O.Alert,"errorFilledBg",$("palette-error-dark")),Nt(O.Alert,"infoFilledBg",$("palette-info-dark")),Nt(O.Alert,"successFilledBg",$("palette-success-dark")),Nt(O.Alert,"warningFilledBg",$("palette-warning-dark")),Nt(O.Alert,"errorFilledColor",R0(()=>O.getContrastText(O.error.dark))),Nt(O.Alert,"infoFilledColor",R0(()=>O.getContrastText(O.info.dark))),Nt(O.Alert,"successFilledColor",R0(()=>O.getContrastText(O.success.dark))),Nt(O.Alert,"warningFilledColor",R0(()=>O.getContrastText(O.warning.dark))),Nt(O.Alert,"errorStandardBg",Ms(O.error.light,.9)),Nt(O.Alert,"infoStandardBg",Ms(O.info.light,.9)),Nt(O.Alert,"successStandardBg",Ms(O.success.light,.9)),Nt(O.Alert,"warningStandardBg",Ms(O.warning.light,.9)),Nt(O.Alert,"errorIconColor",$("palette-error-main")),Nt(O.Alert,"infoIconColor",$("palette-info-main")),Nt(O.Alert,"successIconColor",$("palette-success-main")),Nt(O.Alert,"warningIconColor",$("palette-warning-main")),Nt(O.AppBar,"defaultBg",$("palette-grey-900")),Nt(O.AppBar,"darkBg",$("palette-background-paper")),Nt(O.AppBar,"darkColor",$("palette-text-primary")),Nt(O.Avatar,"defaultBg",$("palette-grey-600")),Nt(O.Button,"inheritContainedBg",$("palette-grey-800")),Nt(O.Button,"inheritContainedHoverBg",$("palette-grey-700")),Nt(O.Chip,"defaultBorder",$("palette-grey-700")),Nt(O.Chip,"defaultAvatarColor",$("palette-grey-300")),Nt(O.Chip,"defaultIconColor",$("palette-grey-300")),Nt(O.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Nt(O.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Nt(O.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Nt(O.LinearProgress,"primaryBg",Ms(O.primary.main,.5)),Nt(O.LinearProgress,"secondaryBg",Ms(O.secondary.main,.5)),Nt(O.LinearProgress,"errorBg",Ms(O.error.main,.5)),Nt(O.LinearProgress,"infoBg",Ms(O.info.main,.5)),Nt(O.LinearProgress,"successBg",Ms(O.success.main,.5)),Nt(O.LinearProgress,"warningBg",Ms(O.warning.main,.5)),Nt(O.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),Nt(O.Slider,"primaryTrack",Ms(O.primary.main,.5)),Nt(O.Slider,"secondaryTrack",Ms(O.secondary.main,.5)),Nt(O.Slider,"errorTrack",Ms(O.error.main,.5)),Nt(O.Slider,"infoTrack",Ms(O.info.main,.5)),Nt(O.Slider,"successTrack",Ms(O.success.main,.5)),Nt(O.Slider,"warningTrack",Ms(O.warning.main,.5));const ee=z4(O.background.default,.98);Nt(O.SnackbarContent,"bg",ee),Nt(O.SnackbarContent,"color",R0(()=>O.getContrastText(ee))),Nt(O.SpeedDialAction,"fabHoverBg",z4(O.background.paper,.15)),Nt(O.StepConnector,"border",$("palette-grey-600")),Nt(O.StepContent,"border",$("palette-grey-600")),Nt(O.Switch,"defaultColor",$("palette-grey-300")),Nt(O.Switch,"defaultDisabledColor",$("palette-grey-600")),Nt(O.Switch,"primaryDisabledColor",Ms(O.primary.main,.55)),Nt(O.Switch,"secondaryDisabledColor",Ms(O.secondary.main,.55)),Nt(O.Switch,"errorDisabledColor",Ms(O.error.main,.55)),Nt(O.Switch,"infoDisabledColor",Ms(O.info.main,.55)),Nt(O.Switch,"successDisabledColor",Ms(O.success.main,.55)),Nt(O.Switch,"warningDisabledColor",Ms(O.warning.main,.55)),Nt(O.TableCell,"border",Ms(G4(O.divider,1),.68)),Nt(O.Tooltip,"bg",G4(O.grey[700],.92))}_m(O.background,"default"),_m(O.background,"paper"),_m(O.common,"background"),_m(O.common,"onBackground"),_m(O,"divider"),Object.keys(O).forEach(ee=>{const Y=O[ee];ee!=="tonalOffset"&&Y&&typeof Y=="object"&&(Y.main&&Nt(O[ee],"mainChannel",ww(Mw(Y.main))),Y.light&&Nt(O[ee],"lightChannel",ww(Mw(Y.light))),Y.dark&&Nt(O[ee],"darkChannel",ww(Mw(Y.dark))),Y.contrastText&&Nt(O[ee],"contrastTextChannel",ww(Mw(Y.contrastText))),ee==="text"&&(_m(O[ee],"primary"),_m(O[ee],"secondary")),ee==="action"&&(Y.active&&_m(O[ee],"active"),Y.selected&&_m(O[ee],"selected")))})}),P=e.reduce((H,O)=>rh(H,O),P);const I={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:ilt(P)},{vars:F,generateThemeVars:k,generateStyleSheets:q}=Cat(P,I);return P.vars=F,Object.entries(P.colorSchemes[P.defaultColorScheme]).forEach(([H,O])=>{P[H]=O}),P.generateThemeVars=k,P.generateStyleSheets=q,P.generateSpacing=function(){return D0e(c.spacing,dV(this))},P.getColorSchemeSelector=Rat(a),P.spacing=P.generateSpacing(),P.shouldSkipGeneratingVar=o,P.unstable_sxConfig={...gC,...c==null?void 0:c.unstable_sxConfig},P.unstable_sx=function(O){return Zx({sx:O,theme:this})},P.toRuntimeSource=W0e,P}function Dee(i,e,t){i.colorSchemes&&t&&(i.colorSchemes[e]={...t!==!0&&t,palette:bV({...t===!0?{}:t.palette,mode:e})})}function X0e(i={},...e){const{palette:t,cssVariables:n=!1,colorSchemes:r=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...o}=i,a=s||"light",l=r==null?void 0:r[a],c={...r,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(n===!1){if(!("colorSchemes"in i))return S7(i,...e);let u=t;"palette"in i||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const f=S7({...i,palette:u},...e);return f.defaultColorScheme=a,f.colorSchemes=c,f.palette.mode==="light"&&(f.colorSchemes.light={...c.light!==!0&&c.light,palette:f.palette},Dee(f,"dark",c.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:f.palette},Dee(f,"light",c.light)),f}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),alt({...o,colorSchemes:c,defaultColorScheme:a,...typeof n!="boolean"&&n},...e)}const Q0e=X0e();function JN(){const i=L0e(Q0e);return i[xV]||i}function llt(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const Z0e=i=>llt(i)&&i!=="classes",Lc=iat({themeId:xV,defaultTheme:Q0e,rootShouldForwardProp:Z0e}),clt=DA("MuiBox",["root"]),ult=X0e(),flt=Zot({themeId:xV,defaultTheme:ult,defaultClassName:clt.root,generateClassName:P0e.generate}),md=Tat;function bg(i){return Sat(i)}function J0e(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}const Lee={disabled:!1},U8=Ne.createContext(null);var hlt=function(e){return e.scrollTop},Cw="unmounted",Pv="exited",Nv="entering",l2="entered",T7="exiting",LA=function(i){BH(e,i);function e(n,r){var s;s=i.call(this,n,r)||this;var o=r,a=o&&!o.isMounting?n.enter:n.appear,l;return s.appearStatus=null,n.in?a?(l=Pv,s.appearStatus=Nv):l=l2:n.unmountOnExit||n.mountOnEnter?l=Cw:l=Pv,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===Cw?{status:Pv}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Nv&&o!==l2&&(s=Nv):(o===Nv||o===l2)&&(s=T7)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===Nv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Aw.findDOMNode(this);o&&hlt(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pv&&this.setState({status:Cw})},t.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,l=this.props.nodeRef?[a]:[Aw.findDOMNode(this),a],c=l[0],u=l[1],f=this.getTimeouts(),h=a?f.appear:f.enter;if(!r&&!o||Lee.disabled){this.safeSetState({status:l2},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Nv},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:l2},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Aw.findDOMNode(this);if(!s||Lee.disabled){this.safeSetState({status:Pv},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:T7},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Pv},function(){r.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},t.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Aw.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},t.render=function(){var r=this.state.status;if(r===Cw)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=J0e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ne.createElement(U8.Provider,{value:null},typeof o=="function"?o(r,a):Ne.cloneElement(Ne.Children.only(o),a))},e}(Ne.Component);LA.contextType=U8;LA.propTypes={};function s2(){}LA.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:s2,onEntering:s2,onEntered:s2,onExit:s2,onExiting:s2,onExited:s2};LA.UNMOUNTED=Cw;LA.EXITED=Pv;LA.ENTERING=Nv;LA.ENTERED=l2;LA.EXITING=T7;function _V(i,e){var t=function(s){return e&&X.isValidElement(s)?e(s):s},n=Object.create(null);return i&&X.Children.map(i,function(r){return r}).forEach(function(r){n[r.key]=t(r)}),n}function dlt(i,e){i=i||{},e=e||{};function t(u){return u in e?e[u]:i[u]}var n=Object.create(null),r=[];for(var s in i)s in e?r.length&&(n[s]=r,r=[]):r.push(s);var o,a={};for(var l in e){if(n[l])for(o=0;o<n[l].length;o++){var c=n[l][o];a[n[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<r.length;o++)a[r[o]]=t(r[o]);return a}function ex(i,e,t){return t[e]!=null?t[e]:i.props[e]}function plt(i,e){return _V(i.children,function(t){return X.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:ex(t,"appear",i),enter:ex(t,"enter",i),exit:ex(t,"exit",i)})})}function Alt(i,e,t){var n=_V(i.children),r=dlt(e,n);return Object.keys(r).forEach(function(s){var o=r[s];if(X.isValidElement(o)){var a=s in e,l=s in n,c=e[s],u=X.isValidElement(c)&&!c.props.in;l&&(!a||u)?r[s]=X.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:ex(o,"exit",i),enter:ex(o,"enter",i)}):!l&&a&&!u?r[s]=X.cloneElement(o,{in:!1}):l&&a&&X.isValidElement(c)&&(r[s]=X.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:ex(o,"exit",i),enter:ex(o,"enter",i)}))}}),r}var mlt=Object.values||function(i){return Object.keys(i).map(function(e){return i[e]})},glt={component:"div",childFactory:function(e){return e}},SV=function(i){BH(e,i);function e(n,r){var s;s=i.call(this,n,r)||this;var o=s.handleExited.bind(Dde(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?plt(r,a):Alt(r,o,a),firstRender:!1}},t.handleExited=function(r,s){var o=_V(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(a){var l=ar({},a.children);return delete l[r.key],{children:l}}))},t.render=function(){var r=this.props,s=r.component,o=r.childFactory,a=J0e(r,["component","childFactory"]),l=this.state.contextValue,c=mlt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Ne.createElement(U8.Provider,{value:l},c):Ne.createElement(U8.Provider,{value:l},Ne.createElement(s,a,c))},e}(Ne.Component);SV.propTypes={};SV.defaultProps=glt;const eAe=i=>i.scrollTop;function k8(i,e){const{timeout:t,easing:n,style:r={}}=i;return{duration:r.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:r.transitionTimingFunction??(typeof n=="object"?n[e.mode]:n),delay:r.transitionDelay}}const ylt={entering:{transform:"none"},entered:{transform:"none"}},vlt=X.forwardRef(function(e,t){const n=JN(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:f,onEntering:h,onExit:p,onExited:m,onExiting:g,style:b,timeout:T=r,TransitionComponent:C=LA,...R}=e,P=X.useRef(null),I=Ip(P,ZN(a),t),F=oe=>re=>{if(oe){const Q=P.current;re===void 0?oe(Q):oe(Q,re)}},k=F(h),q=F((oe,re)=>{eAe(oe);const Q=k8({style:b,timeout:T,easing:l},{mode:"enter"});oe.style.webkitTransition=n.transitions.create("transform",Q),oe.style.transition=n.transitions.create("transform",Q),u&&u(oe,re)}),H=F(f),O=F(g),$=F(oe=>{const re=k8({style:b,timeout:T,easing:l},{mode:"exit"});oe.style.webkitTransition=n.transitions.create("transform",re),oe.style.transition=n.transitions.create("transform",re),p&&p(oe)}),ee=F(m),Y=oe=>{s&&s(P.current,oe)};return ce.jsx(C,{appear:o,in:c,nodeRef:P,onEnter:q,onEntered:H,onEntering:k,onExit:$,onExited:ee,onExiting:O,addEndListener:Y,timeout:T,...R,children:(oe,{ownerState:re,...Q})=>X.cloneElement(a,{style:{transform:"scale(0)",visibility:oe==="exited"&&!c?"hidden":void 0,...ylt[oe],...b,...a.props.style},ref:I,...Q})})});class G8{constructor(){uE(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new G8}static use(){const e=G0e(G8.create).current,[t,n]=X.useState(!1);return e.shouldMount=t,e.setShouldMount=n,X.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=blt(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function xlt(){return G8.use()}function blt(){let i,e;const t=new Promise((n,r)=>{i=n,e=r});return t.resolve=i,t.reject=e,t}function _lt(i){const{className:e,classes:t,pulsate:n=!1,rippleX:r,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=i,[u,f]=X.useState(!1),h=Ro(e,t.ripple,t.rippleVisible,n&&t.ripplePulsate),p={width:o,height:o,top:-(o/2)+s,left:-(o/2)+r},m=Ro(t.child,u&&t.childLeaving,n&&t.childPulsate);return!a&&!u&&f(!0),X.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),ce.jsx("span",{className:h,style:p,children:ce.jsx("span",{className:m})})}const id=DA("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),E7=550,Slt=80,Tlt=uV`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Elt=uV`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,wlt=uV`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Mlt=Lc("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Clt=Lc(_lt,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${id.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Tlt};
    animation-duration: ${E7}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  &.${id.ripplePulsate} {
    animation-duration: ${({theme:i})=>i.transitions.duration.shorter}ms;
  }

  & .${id.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${id.childLeaving} {
    opacity: 0;
    animation-name: ${Elt};
    animation-duration: ${E7}ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
  }

  & .${id.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${wlt};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:i})=>i.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Rlt=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o,...a}=n,[l,c]=X.useState([]),u=X.useRef(0),f=X.useRef(null);X.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const h=X.useRef(!1),p=Jv(),m=X.useRef(null),g=X.useRef(null),b=X.useCallback(P=>{const{pulsate:I,rippleX:F,rippleY:k,rippleSize:q,cb:H}=P;c(O=>[...O,ce.jsx(Clt,{classes:{ripple:Ro(s.ripple,id.ripple),rippleVisible:Ro(s.rippleVisible,id.rippleVisible),ripplePulsate:Ro(s.ripplePulsate,id.ripplePulsate),child:Ro(s.child,id.child),childLeaving:Ro(s.childLeaving,id.childLeaving),childPulsate:Ro(s.childPulsate,id.childPulsate)},timeout:E7,pulsate:I,rippleX:F,rippleY:k,rippleSize:q},u.current)]),u.current+=1,f.current=H},[s]),T=X.useCallback((P={},I={},F=()=>{})=>{const{pulsate:k=!1,center:q=r||I.pulsate,fakeElement:H=!1}=I;if((P==null?void 0:P.type)==="mousedown"&&h.current){h.current=!1;return}(P==null?void 0:P.type)==="touchstart"&&(h.current=!0);const O=H?null:g.current,$=O?O.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ee,Y,oe;if(q||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)ee=Math.round($.width/2),Y=Math.round($.height/2);else{const{clientX:re,clientY:Q}=P.touches&&P.touches.length>0?P.touches[0]:P;ee=Math.round(re-$.left),Y=Math.round(Q-$.top)}if(q)oe=Math.sqrt((2*$.width**2+$.height**2)/3),oe%2===0&&(oe+=1);else{const re=Math.max(Math.abs((O?O.clientWidth:0)-ee),ee)*2+2,Q=Math.max(Math.abs((O?O.clientHeight:0)-Y),Y)*2+2;oe=Math.sqrt(re**2+Q**2)}P!=null&&P.touches?m.current===null&&(m.current=()=>{b({pulsate:k,rippleX:ee,rippleY:Y,rippleSize:oe,cb:F})},p.start(Slt,()=>{m.current&&(m.current(),m.current=null)})):b({pulsate:k,rippleX:ee,rippleY:Y,rippleSize:oe,cb:F})},[r,b,p]),C=X.useCallback(()=>{T({},{pulsate:!0})},[T]),R=X.useCallback((P,I)=>{if(p.clear(),(P==null?void 0:P.type)==="touchend"&&m.current){m.current(),m.current=null,p.start(0,()=>{R(P,I)});return}m.current=null,c(F=>F.length>0?F.slice(1):F),f.current=I},[p]);return X.useImperativeHandle(t,()=>({pulsate:C,start:T,stop:R}),[C,T,R]),ce.jsx(Mlt,{className:Ro(id.root,s.root,o),ref:g,...a,children:ce.jsx(SV,{component:null,exit:!0,children:l})})});function Dlt(i){return xg("MuiButtonBase",i)}const Llt=DA("MuiButtonBase",["root","disabled","focusVisible"]),Plt=i=>{const{disabled:e,focusVisible:t,focusVisibleClassName:n,classes:r}=i,o=y1({root:["root",e&&"disabled",t&&"focusVisible"]},Dlt,r);return t&&n&&(o.root+=` ${n}`),o},Nlt=Lc("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(i,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Llt.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Blt=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:h=!1,focusVisibleClassName:p,LinkComponent:m="a",onBlur:g,onClick:b,onContextMenu:T,onDragLeave:C,onFocus:R,onFocusVisible:P,onKeyDown:I,onKeyUp:F,onMouseDown:k,onMouseLeave:q,onMouseUp:H,onTouchEnd:O,onTouchMove:$,onTouchStart:ee,tabIndex:Y=0,TouchRippleProps:oe,touchRippleRef:re,type:Q,...se}=n,le=X.useRef(null),de=xlt(),ie=Ip(de.ref,re),[ge,Ce]=X.useState(!1);c&&ge&&Ce(!1),X.useImperativeHandle(r,()=>({focusVisible:()=>{Ce(!0),le.current.focus()}}),[]);const Ie=de.shouldMount&&!u&&!c;X.useEffect(()=>{ge&&h&&!u&&de.pulsate()},[u,h,ge,de]);const Ee=Sm(de,"start",k,f),Be=Sm(de,"stop",T,f),qe=Sm(de,"stop",C,f),it=Sm(de,"stop",H,f),et=Sm(de,"stop",fe=>{ge&&fe.preventDefault(),q&&q(fe)},f),Ht=Sm(de,"start",ee,f),_t=Sm(de,"stop",O,f),$t=Sm(de,"stop",$,f),mt=Sm(de,"stop",fe=>{F8(fe.target)||Ce(!1),g&&g(fe)},!1),ut=H2(fe=>{le.current||(le.current=fe.currentTarget),F8(fe.target)&&(Ce(!0),P&&P(fe)),R&&R(fe)}),we=()=>{const fe=le.current;return l&&l!=="button"&&!(fe.tagName==="A"&&fe.href)},Jt=H2(fe=>{h&&!fe.repeat&&ge&&fe.key===" "&&de.stop(fe,()=>{de.start(fe)}),fe.target===fe.currentTarget&&we()&&fe.key===" "&&fe.preventDefault(),I&&I(fe),fe.target===fe.currentTarget&&we()&&fe.key==="Enter"&&!c&&(fe.preventDefault(),b&&b(fe))}),ft=H2(fe=>{h&&fe.key===" "&&ge&&!fe.defaultPrevented&&de.stop(fe,()=>{de.pulsate(fe)}),F&&F(fe),b&&fe.target===fe.currentTarget&&we()&&fe.key===" "&&!fe.defaultPrevented&&b(fe)});let Dt=l;Dt==="button"&&(se.href||se.to)&&(Dt=m);const Rt={};Dt==="button"?(Rt.type=Q===void 0?"button":Q,Rt.disabled=c):(!se.href&&!se.to&&(Rt.role="button"),c&&(Rt["aria-disabled"]=c));const yn=Ip(t,le),Gt={...n,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:h,tabIndex:Y,focusVisible:ge},Se=Plt(Gt);return ce.jsxs(Nlt,{as:Dt,className:Ro(Se.root,a),ownerState:Gt,onBlur:mt,onClick:b,onContextMenu:Be,onFocus:ut,onKeyDown:Jt,onKeyUp:ft,onMouseDown:Ee,onMouseLeave:et,onMouseUp:it,onDragLeave:qe,onTouchEnd:_t,onTouchMove:$t,onTouchStart:Ht,ref:yn,tabIndex:c?-1:Y,type:Q,...Rt,...se,children:[o,Ie?ce.jsx(Rlt,{ref:ie,center:s,...oe}):null]})});function Sm(i,e,t,n=!1){return H2(r=>(t&&t(r),n||i[e](r),!0))}function Ilt(i){return xg("MuiFab",i)}const Pee=DA("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);function Olt(i){return typeof i.main=="string"}function Flt(i,e=[]){if(!Olt(i))return!1;for(const t of e)if(!i.hasOwnProperty(t)||typeof i[t]!="string")return!1;return!0}function Ult(i=[]){return([,e])=>e&&Flt(e,i)}const klt=i=>{const{color:e,variant:t,classes:n,size:r}=i,s={root:["root",t,`size${mu(r)}`,e==="inherit"?"colorInherit":e]},o=y1(s,Ilt,n);return{...n,...o}},Glt=Lc(Blt,{name:"MuiFab",slot:"Root",shouldForwardProp:i=>Z0e(i)||i==="classes",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.variant],e[`size${mu(t.size)}`],t.color==="inherit"&&e.colorInherit,e[mu(t.size)],e[t.color]]}})(md(({theme:i})=>{var e,t;return{...i.typography.button,minHeight:36,transition:i.transitions.create(["background-color","box-shadow","border-color"],{duration:i.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(i.vars||i).zIndex.fab,boxShadow:(i.vars||i).shadows[6],"&:active":{boxShadow:(i.vars||i).shadows[12]},color:i.vars?i.vars.palette.text.primary:(t=(e=i.palette).getContrastText)==null?void 0:t.call(e,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],"&:hover":{backgroundColor:(i.vars||i).palette.grey.A100,"@media (hover: none)":{backgroundColor:(i.vars||i).palette.grey[300]},textDecoration:"none"},[`&.${Pee.focusVisible}`]:{boxShadow:(i.vars||i).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),md(({theme:i})=>({variants:[...Object.entries(i.palette).filter(Ult(["dark","contrastText"])).map(([e])=>({props:{color:e},style:{color:(i.vars||i).palette[e].contrastText,backgroundColor:(i.vars||i).palette[e].main,"&:hover":{backgroundColor:(i.vars||i).palette[e].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[e].main}}}}))]})),md(({theme:i})=>({[`&.${Pee.disabled}`]:{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground}}))),tAe=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiFab"}),{children:r,className:s,color:o="default",component:a="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:f="large",variant:h="circular",...p}=n,m={...n,color:o,component:a,disabled:l,disableFocusRipple:c,size:f,variant:h},g=klt(m);return ce.jsx(Glt,{className:Ro(g.root,s),component:a,disabled:l,focusRipple:!c,focusVisibleClassName:Ro(g.focusVisible,u),ownerState:m,ref:t,...p,classes:g,children:r})});function zlt(i){return xg("MuiSpeedDial",i)}const H4=DA("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]);function Rw(i,e){const{className:t,elementType:n,ownerState:r,externalForwardedProps:s,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:u={[i]:void 0},slotProps:f={[i]:void 0},...h}=s,p=u[i]||n,m=V0e(f[i],r),{props:{component:g,...b},internalRef:T}=H0e({className:t,...l,externalForwardedProps:i==="root"?h:void 0,externalSlotProps:m}),C=Ip(T,m==null?void 0:m.ref,e.ref),R=i==="root"?g||c:g,P=z0e(p,{...i==="root"&&!c&&!u[i]&&o,...i!=="root"&&!u[i]&&o,...b,...R&&!a&&{as:R},...R&&a&&{component:R},ref:C},r);return[p,P]}const Hlt=i=>{const{classes:e,open:t,direction:n}=i,r={root:["root",`direction${mu(n)}`],fab:["fab"],actions:["actions",!t&&"actionsClosed"]};return y1(r,zlt,e)};function uw(i){if(i==="up"||i==="down")return"vertical";if(i==="right"||i==="left")return"horizontal"}const V4=32,q4=16,Vlt=Lc("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[`direction${mu(t.direction)}`]]}})(md(({theme:i})=>({zIndex:(i.vars||i).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${H4.actions}`]:{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:q4+V4}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${H4.actions}`]:{flexDirection:"column",marginTop:-32,paddingTop:q4+V4}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${H4.actions}`]:{flexDirection:"row-reverse",marginRight:-32,paddingRight:q4+V4}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${H4.actions}`]:{flexDirection:"row",marginLeft:-32,paddingLeft:q4+V4}}}]}))),qlt=Lc(tAe,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(i,e)=>e.fab})({pointerEvents:"auto"}),$lt=Lc("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.actions,!t.open&&e.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:i})=>!i.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),jlt=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiSpeedDial"}),r=JN(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{ariaLabel:o,FabProps:{ref:a,...l}={},children:c,className:u,direction:f="up",hidden:h=!1,icon:p,onBlur:m,onClose:g,onFocus:b,onKeyDown:T,onMouseEnter:C,onMouseLeave:R,onOpen:P,open:I,openIcon:F,slots:k={},slotProps:q={},TransitionComponent:H,TransitionProps:O,transitionDuration:$=s,...ee}=n,[Y,oe]=k0e({controlled:I,default:!1,name:"SpeedDial",state:"open"}),re={...n,open:Y,direction:f},Q=Hlt(re),se=Jv(),le=X.useRef(0),de=X.useRef(),ie=X.useRef([]);ie.current=[ie.current[0]];const ge=X.useCallback(ft=>{ie.current[0]=ft},[]),Ce=Ip(a,ge),Ie=(ft,Dt)=>Rt=>{ie.current[ft+1]=Rt,Dt&&Dt(Rt)},Ee=ft=>{T&&T(ft);const Dt=ft.key.replace("Arrow","").toLowerCase(),{current:Rt=Dt}=de;if(ft.key==="Escape"){oe(!1),ie.current[0].focus(),g&&g(ft,"escapeKeyDown");return}if(uw(Dt)===uw(Rt)&&uw(Dt)!==void 0){ft.preventDefault();const yn=Dt===Rt?1:-1,Gt=O0e(le.current+yn,0,ie.current.length-1);ie.current[Gt].focus(),le.current=Gt,de.current=Rt}};X.useEffect(()=>{Y||(le.current=0,de.current=void 0)},[Y]);const Be=ft=>{ft.type==="mouseleave"&&R&&R(ft),ft.type==="blur"&&m&&m(ft),se.clear(),ft.type==="blur"?se.start(0,()=>{oe(!1),g&&g(ft,"blur")}):(oe(!1),g&&g(ft,"mouseLeave"))},qe=ft=>{l.onClick&&l.onClick(ft),se.clear(),Y?(oe(!1),g&&g(ft,"toggle")):(oe(!0),P&&P(ft,"toggle"))},it=ft=>{ft.type==="mouseenter"&&C&&C(ft),ft.type==="focus"&&b&&b(ft),se.clear(),Y||se.start(0,()=>{oe(!0),P&&P(ft,{focus:"focus",mouseenter:"mouseEnter"}[ft.type])})},et=o.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Ht=X.Children.toArray(c).filter(ft=>X.isValidElement(ft)),_t=Ht.map((ft,Dt)=>{const{FabProps:{ref:Rt,...yn}={},tooltipPlacement:Gt}=ft.props,Se=Gt||(uw(f)==="vertical"?"left":"top");return X.cloneElement(ft,{FabProps:{...yn,ref:Ie(Dt,Rt)},delay:30*(Y?Dt:Ht.length-Dt),open:Y,tooltipPlacement:Se,id:`${et}-action-${Dt}`})}),$t={transition:H,...k},mt={transition:O,...q},ut={slots:$t,slotProps:mt},[we,Jt]=Rw("transition",{elementType:vlt,externalForwardedProps:ut,ownerState:re});return ce.jsxs(Vlt,{className:Ro(Q.root,u),ref:t,role:"presentation",onKeyDown:Ee,onBlur:Be,onFocus:it,onMouseEnter:it,onMouseLeave:Be,ownerState:re,...ee,children:[ce.jsx(we,{in:!h,timeout:$,unmountOnExit:!0,...Jt,children:ce.jsx(qlt,{color:"primary","aria-label":o,"aria-haspopup":"true","aria-expanded":Y,"aria-controls":`${et}-actions`,...l,onClick:qe,className:Ro(Q.fab,l.className),ref:Ce,ownerState:re,children:X.isValidElement(p)&&fat(p,["SpeedDialIcon"])?X.cloneElement(p,{open:Y}):p})}),ce.jsx($lt,{id:`${et}-actions`,role:"menu","aria-orientation":uw(f),className:Ro(Q.actions,!Y&&Q.actionsClosed),ownerState:re,children:_t})]})});function Wlt(i){return xg("MuiSvgIcon",i)}DA("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Klt=i=>{const{color:e,fontSize:t,classes:n}=i,r={root:["root",e!=="inherit"&&`color${mu(e)}`,`fontSize${mu(t)}`]};return y1(r,Wlt,n)},Ylt=Lc("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,t.color!=="inherit"&&e[`color${mu(t.color)}`],e[`fontSize${mu(t.fontSize)}`]]}})(md(({theme:i})=>{var e,t,n,r,s,o,a,l,c,u,f,h,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(e=i.transitions)==null?void 0:e.create)==null?void 0:r.call(e,"fill",{duration:(n=(t=(i.vars??i).transitions)==null?void 0:t.duration)==null?void 0:n.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=i.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=i.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=i.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((i.vars??i).palette).filter(([,g])=>g&&g.main).map(([g])=>{var b,T;return{props:{color:g},style:{color:(T=(b=(i.vars??i).palette)==null?void 0:b[g])==null?void 0:T.main}}}),{props:{color:"action"},style:{color:(h=(f=(i.vars??i).palette)==null?void 0:f.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(m=(p=(i.vars??i).palette)==null?void 0:p.action)==null?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),w7=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:h="0 0 24 24",...p}=n,m=X.isValidElement(r)&&r.type==="svg",g={...n,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:m},b={};u||(b.viewBox=h);const T=Klt(g);return ce.jsxs(Ylt,{as:a,className:Ro(T.root,s),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:t,...b,...p,...m&&r.props,ownerState:g,children:[m?r.props.children:r,f?ce.jsx("title",{children:f}):null]})});w7.muiName="SvgIcon";function eB(i,e){function t(n,r){return ce.jsx(w7,{"data-testid":`${e}Icon`,ref:r,...n,children:i})}return t.muiName=w7.muiName,X.memo(X.forwardRef(t))}const Xlt=eB(ce.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function Qlt(i){return xg("MuiSpeedDialIcon",i)}const D0=DA("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),Zlt=i=>{const{classes:e,open:t,openIcon:n}=i;return y1({root:["root"],icon:["icon",t&&"iconOpen",n&&t&&"iconWithOpenIconOpen"],openIcon:["openIcon",t&&"openIconOpen"]},Qlt,e)},Jlt=Lc("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`& .${D0.icon}`]:e.icon},{[`& .${D0.icon}`]:t.open&&e.iconOpen},{[`& .${D0.icon}`]:t.open&&t.openIcon&&e.iconWithOpenIconOpen},{[`& .${D0.openIcon}`]:e.openIcon},{[`& .${D0.openIcon}`]:t.open&&e.openIconOpen},e.root]}})(md(({theme:i})=>({height:24,[`& .${D0.icon}`]:{transition:i.transitions.create(["transform","opacity"],{duration:i.transitions.duration.short})},[`& .${D0.openIcon}`]:{position:"absolute",transition:i.transitions.create(["transform","opacity"],{duration:i.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},variants:[{props:({ownerState:e})=>e.open,style:{[`& .${D0.icon}`]:{transform:"rotate(45deg)"}}},{props:({ownerState:e})=>e.open&&e.openIcon,style:{[`& .${D0.icon}`]:{opacity:0}}},{props:({ownerState:e})=>e.open,style:{[`& .${D0.openIcon}`]:{transform:"rotate(0deg)",opacity:1}}}]}))),nAe=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiSpeedDialIcon"}),{className:r,icon:s,open:o,openIcon:a,...l}=n,c=n,u=Zlt(c);function f(h,p){return X.isValidElement(h)?X.cloneElement(h,{className:p}):h}return ce.jsxs(Jlt,{className:Ro(u.root,r),ref:t,ownerState:c,...l,children:[a?f(a,u.openIcon):null,s?f(s,u.icon):ce.jsx(Xlt,{className:u.icon})]})});nAe.muiName="SpeedDialIcon";function M7(i){return`scale(${i}, ${i**2})`}const ect={entering:{opacity:1,transform:M7(1)},entered:{opacity:1,transform:"none"}},xF=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),C7=X.forwardRef(function(e,t){const{addEndListener:n,appear:r=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:f,onExited:h,onExiting:p,style:m,timeout:g="auto",TransitionComponent:b=LA,...T}=e,C=Jv(),R=X.useRef(),P=JN(),I=X.useRef(null),F=Ip(I,ZN(s),t),k=re=>Q=>{if(re){const se=I.current;Q===void 0?re(se):re(se,Q)}},q=k(u),H=k((re,Q)=>{eAe(re);const{duration:se,delay:le,easing:de}=k8({style:m,timeout:g,easing:o},{mode:"enter"});let ie;g==="auto"?(ie=P.transitions.getAutoHeightDuration(re.clientHeight),R.current=ie):ie=se,re.style.transition=[P.transitions.create("opacity",{duration:ie,delay:le}),P.transitions.create("transform",{duration:xF?ie:ie*.666,delay:le,easing:de})].join(","),l&&l(re,Q)}),O=k(c),$=k(p),ee=k(re=>{const{duration:Q,delay:se,easing:le}=k8({style:m,timeout:g,easing:o},{mode:"exit"});let de;g==="auto"?(de=P.transitions.getAutoHeightDuration(re.clientHeight),R.current=de):de=Q,re.style.transition=[P.transitions.create("opacity",{duration:de,delay:se}),P.transitions.create("transform",{duration:xF?de:de*.666,delay:xF?se:se||de*.333,easing:le})].join(","),re.style.opacity=0,re.style.transform=M7(.75),f&&f(re)}),Y=k(h),oe=re=>{g==="auto"&&C.start(R.current||0,re),n&&n(I.current,re)};return ce.jsx(b,{appear:r,in:a,nodeRef:I,onEnter:H,onEntered:O,onEntering:q,onExit:ee,onExited:Y,onExiting:$,addEndListener:oe,timeout:g==="auto"?null:g,...T,children:(re,{ownerState:Q,...se})=>X.cloneElement(s,{style:{opacity:0,transform:M7(.75),visibility:re==="exited"&&!a?"hidden":void 0,...ect[re],...m,...s.props.style},ref:F,...se})})});C7&&(C7.muiSupportAuto=!0);var lf="top",Cd="bottom",Rd="right",cf="left",TV="auto",yC=[lf,Cd,Rd,cf],$S="start",a3="end",tct="clippingParents",iAe="viewport",fw="popper",nct="reference",Nee=yC.reduce(function(i,e){return i.concat([e+"-"+$S,e+"-"+a3])},[]),rAe=[].concat(yC,[TV]).reduce(function(i,e){return i.concat([e,e+"-"+$S,e+"-"+a3])},[]),ict="beforeRead",rct="read",sct="afterRead",oct="beforeMain",act="main",lct="afterMain",cct="beforeWrite",uct="write",fct="afterWrite",hct=[ict,rct,sct,oct,act,lct,cct,uct,fct];function wA(i){return i?(i.nodeName||"").toLowerCase():null}function fh(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function Jx(i){var e=fh(i).Element;return i instanceof e||i instanceof Element}function gd(i){var e=fh(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function EV(i){if(typeof ShadowRoot>"u")return!1;var e=fh(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function dct(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!gd(s)||!wA(s)||(Object.assign(s.style,n),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function pct(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],s=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!gd(r)||!wA(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const Act={name:"applyStyles",enabled:!0,phase:"write",fn:dct,effect:pct,requires:["computeStyles"]};function oA(i){return i.split("-")[0]}var vx=Math.max,z8=Math.min,jS=Math.round;function R7(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function sAe(){return!/^((?!chrome|android).)*safari/i.test(R7())}function WS(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=i.getBoundingClientRect(),r=1,s=1;e&&gd(i)&&(r=i.offsetWidth>0&&jS(n.width)/i.offsetWidth||1,s=i.offsetHeight>0&&jS(n.height)/i.offsetHeight||1);var o=Jx(i)?fh(i):window,a=o.visualViewport,l=!sAe()&&t,c=(n.left+(l&&a?a.offsetLeft:0))/r,u=(n.top+(l&&a?a.offsetTop:0))/s,f=n.width/r,h=n.height/s;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function wV(i){var e=WS(i),t=i.offsetWidth,n=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:n}}function oAe(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&EV(t)){var n=e;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function pg(i){return fh(i).getComputedStyle(i)}function mct(i){return["table","td","th"].indexOf(wA(i))>=0}function v1(i){return((Jx(i)?i.ownerDocument:i.document)||window.document).documentElement}function tB(i){return wA(i)==="html"?i:i.assignedSlot||i.parentNode||(EV(i)?i.host:null)||v1(i)}function Bee(i){return!gd(i)||pg(i).position==="fixed"?null:i.offsetParent}function gct(i){var e=/firefox/i.test(R7()),t=/Trident/i.test(R7());if(t&&gd(i)){var n=pg(i);if(n.position==="fixed")return null}var r=tB(i);for(EV(r)&&(r=r.host);gd(r)&&["html","body"].indexOf(wA(r))<0;){var s=pg(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function vC(i){for(var e=fh(i),t=Bee(i);t&&mct(t)&&pg(t).position==="static";)t=Bee(t);return t&&(wA(t)==="html"||wA(t)==="body"&&pg(t).position==="static")?e:t||gct(i)||e}function MV(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function sM(i,e,t){return vx(i,z8(e,t))}function yct(i,e,t){var n=sM(i,e,t);return n>t?t:n}function aAe(){return{top:0,right:0,bottom:0,left:0}}function lAe(i){return Object.assign({},aAe(),i)}function cAe(i,e){return e.reduce(function(t,n){return t[n]=i,t},{})}var vct=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,lAe(typeof e!="number"?e:cAe(e,yC))};function xct(i){var e,t=i.state,n=i.name,r=i.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=oA(t.placement),l=MV(a),c=[cf,Rd].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=vct(r.padding,t),h=wV(s),p=l==="y"?lf:cf,m=l==="y"?Cd:Rd,g=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],b=o[l]-t.rects.reference[l],T=vC(s),C=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,R=g/2-b/2,P=f[p],I=C-h[u]-f[m],F=C/2-h[u]/2+R,k=sM(P,F,I),q=l;t.modifiersData[n]=(e={},e[q]=k,e.centerOffset=k-F,e)}}function bct(i){var e=i.state,t=i.options,n=t.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||oAe(e.elements.popper,r)&&(e.elements.arrow=r))}const _ct={name:"arrow",enabled:!0,phase:"main",fn:xct,effect:bct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function KS(i){return i.split("-")[1]}var Sct={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Tct(i,e){var t=i.x,n=i.y,r=e.devicePixelRatio||1;return{x:jS(t*r)/r||0,y:jS(n*r)/r||0}}function Iee(i){var e,t=i.popper,n=i.popperRect,r=i.placement,s=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,c=i.adaptive,u=i.roundOffsets,f=i.isFixed,h=o.x,p=h===void 0?0:h,m=o.y,g=m===void 0?0:m,b=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=b.x,g=b.y;var T=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),R=cf,P=lf,I=window;if(c){var F=vC(t),k="clientHeight",q="clientWidth";if(F===fh(t)&&(F=v1(t),pg(F).position!=="static"&&a==="absolute"&&(k="scrollHeight",q="scrollWidth")),F=F,r===lf||(r===cf||r===Rd)&&s===a3){P=Cd;var H=f&&F===I&&I.visualViewport?I.visualViewport.height:F[k];g-=H-n.height,g*=l?1:-1}if(r===cf||(r===lf||r===Cd)&&s===a3){R=Rd;var O=f&&F===I&&I.visualViewport?I.visualViewport.width:F[q];p-=O-n.width,p*=l?1:-1}}var $=Object.assign({position:a},c&&Sct),ee=u===!0?Tct({x:p,y:g},fh(t)):{x:p,y:g};if(p=ee.x,g=ee.y,l){var Y;return Object.assign({},$,(Y={},Y[P]=C?"0":"",Y[R]=T?"0":"",Y.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",Y))}return Object.assign({},$,(e={},e[P]=C?g+"px":"",e[R]=T?p+"px":"",e.transform="",e))}function Ect(i){var e=i.state,t=i.options,n=t.gpuAcceleration,r=n===void 0?!0:n,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:oA(e.placement),variation:KS(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Iee(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Iee(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const wct={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ect,data:{}};var $4={passive:!0};function Mct(i){var e=i.state,t=i.instance,n=i.options,r=n.scroll,s=r===void 0?!0:r,o=n.resize,a=o===void 0?!0:o,l=fh(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,$4)}),a&&l.addEventListener("resize",t.update,$4),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,$4)}),a&&l.removeEventListener("resize",t.update,$4)}}const Cct={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Mct,data:{}};var Rct={left:"right",right:"left",bottom:"top",top:"bottom"};function LD(i){return i.replace(/left|right|bottom|top/g,function(e){return Rct[e]})}var Dct={start:"end",end:"start"};function Oee(i){return i.replace(/start|end/g,function(e){return Dct[e]})}function CV(i){var e=fh(i),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function RV(i){return WS(v1(i)).left+CV(i).scrollLeft}function Lct(i,e){var t=fh(i),n=v1(i),r=t.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=sAe();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+RV(i),y:l}}function Pct(i){var e,t=v1(i),n=CV(i),r=(e=i.ownerDocument)==null?void 0:e.body,s=vx(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=vx(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+RV(i),l=-n.scrollTop;return pg(r||t).direction==="rtl"&&(a+=vx(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function DV(i){var e=pg(i),t=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+n)}function uAe(i){return["html","body","#document"].indexOf(wA(i))>=0?i.ownerDocument.body:gd(i)&&DV(i)?i:uAe(tB(i))}function oM(i,e){var t;e===void 0&&(e=[]);var n=uAe(i),r=n===((t=i.ownerDocument)==null?void 0:t.body),s=fh(n),o=r?[s].concat(s.visualViewport||[],DV(n)?n:[]):n,a=e.concat(o);return r?a:a.concat(oM(tB(o)))}function D7(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Nct(i,e){var t=WS(i,!1,e==="fixed");return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function Fee(i,e,t){return e===iAe?D7(Lct(i,t)):Jx(e)?Nct(e,t):D7(Pct(v1(i)))}function Bct(i){var e=oM(tB(i)),t=["absolute","fixed"].indexOf(pg(i).position)>=0,n=t&&gd(i)?vC(i):i;return Jx(n)?e.filter(function(r){return Jx(r)&&oAe(r,n)&&wA(r)!=="body"}):[]}function Ict(i,e,t,n){var r=e==="clippingParents"?Bct(i):[].concat(e),s=[].concat(r,[t]),o=s[0],a=s.reduce(function(l,c){var u=Fee(i,c,n);return l.top=vx(u.top,l.top),l.right=z8(u.right,l.right),l.bottom=z8(u.bottom,l.bottom),l.left=vx(u.left,l.left),l},Fee(i,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function fAe(i){var e=i.reference,t=i.element,n=i.placement,r=n?oA(n):null,s=n?KS(n):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(r){case lf:l={x:o,y:e.y-t.height};break;case Cd:l={x:o,y:e.y+e.height};break;case Rd:l={x:e.x+e.width,y:a};break;case cf:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?MV(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case $S:l[c]=l[c]-(e[u]/2-t[u]/2);break;case a3:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function l3(i,e){e===void 0&&(e={});var t=e,n=t.placement,r=n===void 0?i.placement:n,s=t.strategy,o=s===void 0?i.strategy:s,a=t.boundary,l=a===void 0?tct:a,c=t.rootBoundary,u=c===void 0?iAe:c,f=t.elementContext,h=f===void 0?fw:f,p=t.altBoundary,m=p===void 0?!1:p,g=t.padding,b=g===void 0?0:g,T=lAe(typeof b!="number"?b:cAe(b,yC)),C=h===fw?nct:fw,R=i.rects.popper,P=i.elements[m?C:h],I=Ict(Jx(P)?P:P.contextElement||v1(i.elements.popper),l,u,o),F=WS(i.elements.reference),k=fAe({reference:F,element:R,placement:r}),q=D7(Object.assign({},R,k)),H=h===fw?q:F,O={top:I.top-H.top+T.top,bottom:H.bottom-I.bottom+T.bottom,left:I.left-H.left+T.left,right:H.right-I.right+T.right},$=i.modifiersData.offset;if(h===fw&&$){var ee=$[r];Object.keys(O).forEach(function(Y){var oe=[Rd,Cd].indexOf(Y)>=0?1:-1,re=[lf,Cd].indexOf(Y)>=0?"y":"x";O[Y]+=ee[re]*oe})}return O}function Oct(i,e){e===void 0&&(e={});var t=e,n=t.placement,r=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?rAe:l,u=KS(n),f=u?a?Nee:Nee.filter(function(m){return KS(m)===u}):yC,h=f.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=f);var p=h.reduce(function(m,g){return m[g]=l3(i,{placement:g,boundary:r,rootBoundary:s,padding:o})[oA(g)],m},{});return Object.keys(p).sort(function(m,g){return p[m]-p[g]})}function Fct(i){if(oA(i)===TV)return[];var e=LD(i);return[Oee(i),e,Oee(e)]}function Uct(i){var e=i.state,t=i.options,n=i.name;if(!e.modifiersData[n]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,m=p===void 0?!0:p,g=t.allowedAutoPlacements,b=e.options.placement,T=oA(b),C=T===b,R=l||(C||!m?[LD(b)]:Fct(b)),P=[b].concat(R).reduce(function(Ee,Be){return Ee.concat(oA(Be)===TV?Oct(e,{placement:Be,boundary:u,rootBoundary:f,padding:c,flipVariations:m,allowedAutoPlacements:g}):Be)},[]),I=e.rects.reference,F=e.rects.popper,k=new Map,q=!0,H=P[0],O=0;O<P.length;O++){var $=P[O],ee=oA($),Y=KS($)===$S,oe=[lf,Cd].indexOf(ee)>=0,re=oe?"width":"height",Q=l3(e,{placement:$,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),se=oe?Y?Rd:cf:Y?Cd:lf;I[re]>F[re]&&(se=LD(se));var le=LD(se),de=[];if(s&&de.push(Q[ee]<=0),a&&de.push(Q[se]<=0,Q[le]<=0),de.every(function(Ee){return Ee})){H=$,q=!1;break}k.set($,de)}if(q)for(var ie=m?3:1,ge=function(Be){var qe=P.find(function(it){var et=k.get(it);if(et)return et.slice(0,Be).every(function(Ht){return Ht})});if(qe)return H=qe,"break"},Ce=ie;Ce>0;Ce--){var Ie=ge(Ce);if(Ie==="break")break}e.placement!==H&&(e.modifiersData[n]._skip=!0,e.placement=H,e.reset=!0)}}const kct={name:"flip",enabled:!0,phase:"main",fn:Uct,requiresIfExists:["offset"],data:{_skip:!1}};function Uee(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function kee(i){return[lf,Rd,Cd,cf].some(function(e){return i[e]>=0})}function Gct(i){var e=i.state,t=i.name,n=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=l3(e,{elementContext:"reference"}),a=l3(e,{altBoundary:!0}),l=Uee(o,n),c=Uee(a,r,s),u=kee(l),f=kee(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const zct={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Gct};function Hct(i,e,t){var n=oA(i),r=[cf,lf].indexOf(n)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:i})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[cf,Rd].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function Vct(i){var e=i.state,t=i.options,n=i.name,r=t.offset,s=r===void 0?[0,0]:r,o=rAe.reduce(function(u,f){return u[f]=Hct(f,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=o}const qct={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Vct};function $ct(i){var e=i.state,t=i.name;e.modifiersData[t]=fAe({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const jct={name:"popperOffsets",enabled:!0,phase:"read",fn:$ct,data:{}};function Wct(i){return i==="x"?"y":"x"}function Kct(i){var e=i.state,t=i.options,n=i.name,r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,f=t.padding,h=t.tether,p=h===void 0?!0:h,m=t.tetherOffset,g=m===void 0?0:m,b=l3(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),T=oA(e.placement),C=KS(e.placement),R=!C,P=MV(T),I=Wct(P),F=e.modifiersData.popperOffsets,k=e.rects.reference,q=e.rects.popper,H=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,O=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ee={x:0,y:0};if(F){if(s){var Y,oe=P==="y"?lf:cf,re=P==="y"?Cd:Rd,Q=P==="y"?"height":"width",se=F[P],le=se+b[oe],de=se-b[re],ie=p?-q[Q]/2:0,ge=C===$S?k[Q]:q[Q],Ce=C===$S?-q[Q]:-k[Q],Ie=e.elements.arrow,Ee=p&&Ie?wV(Ie):{width:0,height:0},Be=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:aAe(),qe=Be[oe],it=Be[re],et=sM(0,k[Q],Ee[Q]),Ht=R?k[Q]/2-ie-et-qe-O.mainAxis:ge-et-qe-O.mainAxis,_t=R?-k[Q]/2+ie+et+it+O.mainAxis:Ce+et+it+O.mainAxis,$t=e.elements.arrow&&vC(e.elements.arrow),mt=$t?P==="y"?$t.clientTop||0:$t.clientLeft||0:0,ut=(Y=$==null?void 0:$[P])!=null?Y:0,we=se+Ht-ut-mt,Jt=se+_t-ut,ft=sM(p?z8(le,we):le,se,p?vx(de,Jt):de);F[P]=ft,ee[P]=ft-se}if(a){var Dt,Rt=P==="x"?lf:cf,yn=P==="x"?Cd:Rd,Gt=F[I],Se=I==="y"?"height":"width",fe=Gt+b[Rt],Pe=Gt-b[yn],Ve=[lf,cf].indexOf(T)!==-1,Tt=(Dt=$==null?void 0:$[I])!=null?Dt:0,bt=Ve?fe:Gt-k[Se]-q[Se]-Tt+O.altAxis,sn=Ve?Gt+k[Se]+q[Se]-Tt-O.altAxis:Pe,on=p&&Ve?yct(bt,Gt,sn):sM(p?bt:fe,Gt,p?sn:Pe);F[I]=on,ee[I]=on-Gt}e.modifiersData[n]=ee}}const Yct={name:"preventOverflow",enabled:!0,phase:"main",fn:Kct,requiresIfExists:["offset"]};function Xct(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function Qct(i){return i===fh(i)||!gd(i)?CV(i):Xct(i)}function Zct(i){var e=i.getBoundingClientRect(),t=jS(e.width)/i.offsetWidth||1,n=jS(e.height)/i.offsetHeight||1;return t!==1||n!==1}function Jct(i,e,t){t===void 0&&(t=!1);var n=gd(e),r=gd(e)&&Zct(e),s=v1(e),o=WS(i,r,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&((wA(e)!=="body"||DV(s))&&(a=Qct(e)),gd(e)?(l=WS(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=RV(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function eut(i){var e=new Map,t=new Set,n=[];i.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),n.push(s)}return i.forEach(function(s){t.has(s.name)||r(s)}),n}function tut(i){var e=eut(i);return hct.reduce(function(t,n){return t.concat(e.filter(function(r){return r.phase===n}))},[])}function nut(i){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(i())})})),e}}function iut(i){var e=i.reduce(function(t,n){var r=t[n.name];return t[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var Gee={placement:"bottom",modifiers:[],strategy:"absolute"};function zee(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function rut(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,n=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?Gee:r;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Gee,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],h=!1,p={state:u,setOptions:function(T){var C=typeof T=="function"?T(u.options):T;g(),u.options=Object.assign({},s,u.options,C),u.scrollParents={reference:Jx(a)?oM(a):a.contextElement?oM(a.contextElement):[],popper:oM(l)};var R=tut(iut([].concat(n,u.options.modifiers)));return u.orderedModifiers=R.filter(function(P){return P.enabled}),m(),p.update()},forceUpdate:function(){if(!h){var T=u.elements,C=T.reference,R=T.popper;if(zee(C,R)){u.rects={reference:Jct(C,vC(R),u.options.strategy==="fixed"),popper:wV(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var P=0;P<u.orderedModifiers.length;P++){if(u.reset===!0){u.reset=!1,P=-1;continue}var I=u.orderedModifiers[P],F=I.fn,k=I.options,q=k===void 0?{}:k,H=I.name;typeof F=="function"&&(u=F({state:u,options:q,name:H,instance:p})||u)}}}},update:nut(function(){return new Promise(function(b){p.forceUpdate(),b(u)})}),destroy:function(){g(),h=!0}};if(!zee(a,l))return p;p.setOptions(c).then(function(b){!h&&c.onFirstUpdate&&c.onFirstUpdate(b)});function m(){u.orderedModifiers.forEach(function(b){var T=b.name,C=b.options,R=C===void 0?{}:C,P=b.effect;if(typeof P=="function"){var I=P({state:u,name:T,instance:p,options:R}),F=function(){};f.push(I||F)}})}function g(){f.forEach(function(b){return b()}),f=[]}return p}}var sut=[Cct,jct,wct,Act,qct,kct,Yct,_ct,zct],out=rut({defaultModifiers:sut});function aut(i){return typeof i=="function"?i():i}const lut=X.forwardRef(function(e,t){const{children:n,container:r,disablePortal:s=!1}=e,[o,a]=X.useState(null),l=Ip(X.isValidElement(n)?ZN(n):null,t);if(s3(()=>{s||a(aut(r)||document.body)},[r,s]),s3(()=>{if(o&&!s)return _7(t,o),()=>{_7(t,null)}},[t,o,s]),s){if(X.isValidElement(n)){const c={ref:l};return X.cloneElement(n,c)}return n}return o&&P3.createPortal(n,o)});function cut(i){return xg("MuiPopper",i)}DA("MuiPopper",["root"]);function uut(i,e){if(e==="ltr")return i;switch(i){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return i}}function L7(i){return typeof i=="function"?i():i}function fut(i){return i.nodeType!==void 0}const hut=i=>{const{classes:e}=i;return y1({root:["root"]},cut,e)},dut={},put=X.forwardRef(function(e,t){const{anchorEl:n,children:r,direction:s,disablePortal:o,modifiers:a,open:l,placement:c,popperOptions:u,popperRef:f,slotProps:h={},slots:p={},TransitionProps:m,ownerState:g,...b}=e,T=X.useRef(null),C=Ip(T,t),R=X.useRef(null),P=Ip(R,f),I=X.useRef(P);s3(()=>{I.current=P},[P]),X.useImperativeHandle(f,()=>R.current,[]);const F=uut(c,s),[k,q]=X.useState(F),[H,O]=X.useState(L7(n));X.useEffect(()=>{R.current&&R.current.forceUpdate()}),X.useEffect(()=>{n&&O(L7(n))},[n]),s3(()=>{if(!H||!l)return;const re=le=>{q(le.placement)};let Q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:le})=>{re(le)}}];a!=null&&(Q=Q.concat(a)),u&&u.modifiers!=null&&(Q=Q.concat(u.modifiers));const se=out(H,T.current,{placement:F,...u,modifiers:Q});return I.current(se),()=>{se.destroy(),I.current(null)}},[H,o,a,l,u,F]);const $={placement:k};m!==null&&($.TransitionProps=m);const ee=hut(e),Y=p.root??"div",oe=vat({elementType:Y,externalSlotProps:h.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:C},ownerState:e,className:ee.root});return ce.jsx(Y,{...oe,children:typeof r=="function"?r($):r})}),Aut=X.forwardRef(function(e,t){const{anchorEl:n,children:r,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:f="bottom",popperOptions:h=dut,popperRef:p,style:m,transition:g=!1,slotProps:b={},slots:T={},...C}=e,[R,P]=X.useState(!0),I=()=>{P(!1)},F=()=>{P(!0)};if(!l&&!u&&(!g||R))return null;let k;if(s)k=s;else if(n){const O=L7(n);k=O&&fut(O)?yee(O).body:yee(null).body}const q=!u&&l&&(!g||R)?"none":void 0,H=g?{in:u,onEnter:I,onExited:F}:void 0;return ce.jsx(lut,{disablePortal:a,container:k,children:ce.jsx(put,{anchorEl:n,direction:o,disablePortal:a,modifiers:c,ref:t,open:g?!R:u,placement:f,popperOptions:h,popperRef:p,slotProps:b,slots:T,...C,style:{position:"fixed",top:0,left:0,display:q,...m},TransitionProps:H,children:r})})}),mut=Lc(Aut,{name:"MuiPopper",slot:"Root",overridesResolver:(i,e)=>e.root})({}),hAe=X.forwardRef(function(e,t){const n=q0e(),r=bg({props:e,name:"MuiPopper"}),{anchorEl:s,component:o,components:a,componentsProps:l,container:c,disablePortal:u,keepMounted:f,modifiers:h,open:p,placement:m,popperOptions:g,popperRef:b,transition:T,slots:C,slotProps:R,...P}=r,I=(C==null?void 0:C.root)??(a==null?void 0:a.Root),F={anchorEl:s,container:c,disablePortal:u,keepMounted:f,modifiers:h,open:p,placement:m,popperOptions:g,popperRef:b,transition:T,...P};return ce.jsx(mut,{as:o,direction:n?"rtl":"ltr",slots:{root:I},slotProps:R??l,...F,ref:t})});function gut(i){return xg("MuiTooltip",i)}const Yo=DA("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function yut(i){return Math.round(i*1e5)/1e5}const vut=i=>{const{classes:e,disableInteractive:t,arrow:n,touch:r,placement:s}=i,o={popper:["popper",!t&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",r&&"touch",`tooltipPlacement${mu(s.split("-")[0])}`],arrow:["arrow"]};return y1(o,gut,e)},xut=Lc(hAe,{name:"MuiTooltip",slot:"Popper",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.popper,!t.disableInteractive&&e.popperInteractive,t.arrow&&e.popperArrow,!t.open&&e.popperClose]}})(md(({theme:i})=>({zIndex:(i.vars||i).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${Yo.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Yo.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Yo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Yo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Yo.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Yo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Yo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Yo.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),but=Lc("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.tooltip,t.touch&&e.touch,t.arrow&&e.tooltipArrow,e[`tooltipPlacement${mu(t.placement.split("-")[0])}`]]}})(md(({theme:i})=>({backgroundColor:i.vars?i.vars.palette.Tooltip.bg:gV(i.palette.grey[700],.92),borderRadius:(i.vars||i).shape.borderRadius,color:(i.vars||i).palette.common.white,fontFamily:i.typography.fontFamily,padding:"4px 8px",fontSize:i.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:i.typography.fontWeightMedium,[`.${Yo.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Yo.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Yo.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Yo.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:i.typography.pxToRem(14),lineHeight:`${yut(16/14)}em`,fontWeight:i.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${Yo.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Yo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${Yo.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Yo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${Yo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Yo.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${Yo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Yo.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Yo.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Yo.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),_ut=Lc("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(i,e)=>e.arrow})(md(({theme:i})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:i.vars?i.vars.palette.Tooltip.bg:gV(i.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let j4=!1;const Hee=new QN;let hw={x:0,y:0};function W4(i,e){return(t,...n)=>{e&&e(t,...n),i(t,...n)}}const Sut=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiTooltip"}),{arrow:r=!1,children:s,classes:o,components:a={},componentsProps:l={},describeChild:c=!1,disableFocusListener:u=!1,disableHoverListener:f=!1,disableInteractive:h=!1,disableTouchListener:p=!1,enterDelay:m=100,enterNextDelay:g=0,enterTouchDelay:b=700,followCursor:T=!1,id:C,leaveDelay:R=0,leaveTouchDelay:P=1500,onClose:I,onOpen:F,open:k,placement:q="bottom",PopperComponent:H,PopperProps:O={},slotProps:$={},slots:ee={},title:Y,TransitionComponent:oe,TransitionProps:re,...Q}=n,se=X.isValidElement(s)?s:ce.jsx("span",{children:s}),le=JN(),de=q0e(),[ie,ge]=X.useState(),[Ce,Ie]=X.useState(null),Ee=X.useRef(!1),Be=h||T,qe=Jv(),it=Jv(),et=Jv(),Ht=Jv(),[_t,$t]=k0e({controlled:k,default:!1,name:"Tooltip",state:"open"});let mt=_t;const ut=pat(C),we=X.useRef(),Jt=H2(()=>{we.current!==void 0&&(document.body.style.WebkitUserSelect=we.current,we.current=void 0),Ht.clear()});X.useEffect(()=>Jt,[Jt]);const ft=Dn=>{Hee.clear(),j4=!0,$t(!0),F&&!mt&&F(Dn)},Dt=H2(Dn=>{Hee.start(800+R,()=>{j4=!1}),$t(!1),I&&mt&&I(Dn),qe.start(le.transitions.duration.shortest,()=>{Ee.current=!1})}),Rt=Dn=>{Ee.current&&Dn.type!=="touchstart"||(ie&&ie.removeAttribute("title"),it.clear(),et.clear(),m||j4&&g?it.start(j4?g:m,()=>{ft(Dn)}):ft(Dn))},yn=Dn=>{it.clear(),et.start(R,()=>{Dt(Dn)})},[,Gt]=X.useState(!1),Se=Dn=>{F8(Dn.target)||(Gt(!1),yn(Dn))},fe=Dn=>{ie||ge(Dn.currentTarget),F8(Dn.target)&&(Gt(!0),Rt(Dn))},Pe=Dn=>{Ee.current=!0;const Gn=se.props;Gn.onTouchStart&&Gn.onTouchStart(Dn)},Ve=Dn=>{Pe(Dn),et.clear(),qe.clear(),Jt(),we.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ht.start(b,()=>{document.body.style.WebkitUserSelect=we.current,Rt(Dn)})},Tt=Dn=>{se.props.onTouchEnd&&se.props.onTouchEnd(Dn),Jt(),et.start(P,()=>{Dt(Dn)})};X.useEffect(()=>{if(!mt)return;function Dn(Gn){Gn.key==="Escape"&&Dt(Gn)}return document.addEventListener("keydown",Dn),()=>{document.removeEventListener("keydown",Dn)}},[Dt,mt]);const bt=Ip(ZN(se),ge,t);!Y&&Y!==0&&(mt=!1);const sn=X.useRef(),on=Dn=>{const Gn=se.props;Gn.onMouseMove&&Gn.onMouseMove(Dn),hw={x:Dn.clientX,y:Dn.clientY},sn.current&&sn.current.update()},mn={},ai=typeof Y=="string";c?(mn.title=!mt&&ai&&!f?Y:null,mn["aria-describedby"]=mt?ut:null):(mn["aria-label"]=ai?Y:null,mn["aria-labelledby"]=mt&&!ai?ut:null);const Vt={...mn,...Q,...se.props,className:Ro(Q.className,se.props.className),onTouchStart:Pe,ref:bt,...T?{onMouseMove:on}:{}},_n={};p||(Vt.onTouchStart=Ve,Vt.onTouchEnd=Tt),f||(Vt.onMouseOver=W4(Rt,Vt.onMouseOver),Vt.onMouseLeave=W4(yn,Vt.onMouseLeave),Be||(_n.onMouseOver=Rt,_n.onMouseLeave=yn)),u||(Vt.onFocus=W4(fe,Vt.onFocus),Vt.onBlur=W4(Se,Vt.onBlur),Be||(_n.onFocus=fe,_n.onBlur=Se));const En={...n,isRtl:de,arrow:r,disableInteractive:Be,placement:q,PopperComponentProp:H,touch:Ee.current},pn=typeof $.popper=="function"?$.popper(En):$.popper,Sn=X.useMemo(()=>{var Gn,Gr;let Dn=[{name:"arrow",enabled:!!Ce,options:{element:Ce,padding:4}}];return(Gn=O.popperOptions)!=null&&Gn.modifiers&&(Dn=Dn.concat(O.popperOptions.modifiers)),(Gr=pn==null?void 0:pn.popperOptions)!=null&&Gr.modifiers&&(Dn=Dn.concat(pn.popperOptions.modifiers)),{...O.popperOptions,...pn==null?void 0:pn.popperOptions,modifiers:Dn}},[Ce,O.popperOptions,pn==null?void 0:pn.popperOptions]),Fe=vut(En),xt=typeof $.transition=="function"?$.transition(En):$.transition,dn={slots:{popper:a.Popper,transition:a.Transition??oe,tooltip:a.Tooltip,arrow:a.Arrow,...ee},slotProps:{arrow:$.arrow??l.arrow,popper:{...O,...pn??l.popper},tooltip:$.tooltip??l.tooltip,transition:{...re,...xt??l.transition}}},[Te,tn]=Rw("popper",{elementType:xut,externalForwardedProps:dn,ownerState:En,className:Ro(Fe.popper,O==null?void 0:O.className)}),[At,Lt]=Rw("transition",{elementType:C7,externalForwardedProps:dn,ownerState:En}),[vn,xn]=Rw("tooltip",{elementType:but,className:Fe.tooltip,externalForwardedProps:dn,ownerState:En}),[Nn,Fi]=Rw("arrow",{elementType:_ut,className:Fe.arrow,externalForwardedProps:dn,ownerState:En,ref:Ie});return ce.jsxs(X.Fragment,{children:[X.cloneElement(se,Vt),ce.jsx(Te,{as:H??hAe,placement:q,anchorEl:T?{getBoundingClientRect:()=>({top:hw.y,left:hw.x,right:hw.x,bottom:hw.y,width:0,height:0})}:ie,popperRef:sn,open:ie?mt:!1,id:ut,transition:!0,..._n,...tn,popperOptions:Sn,children:({TransitionProps:Dn})=>ce.jsx(At,{timeout:le.transitions.duration.shorter,...Dn,...Lt,children:ce.jsxs(vn,{...xn,children:[Y,r?ce.jsx(Nn,{...Fi}):null]})})})]})});function Tut(i){return xg("MuiSpeedDialAction",i)}const K4=DA("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),Eut=i=>{const{open:e,tooltipPlacement:t,classes:n}=i,r={fab:["fab",!e&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${mu(t)}`,!e&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return y1(r,Tut,n)},wut=Lc(tAe,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.fab,!t.open&&e.fabClosed]}})(md(({theme:i})=>({margin:8,color:(i.vars||i).palette.text.secondary,backgroundColor:(i.vars||i).palette.background.paper,"&:hover":{backgroundColor:i.vars?i.vars.palette.SpeedDialAction.fabHoverBg:U0e(i.palette.background.paper,.15)},transition:`${i.transitions.create("transform",{duration:i.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:e})=>!e.open,style:{opacity:0,transform:"scale(0)"}}]}))),Mut=Lc("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.staticTooltip,!t.open&&e.staticTooltipClosed,e[`tooltipPlacement${mu(t.tooltipPlacement)}`]]}})(md(({theme:i})=>({position:"relative",display:"flex",alignItems:"center",[`& .${K4.staticTooltipLabel}`]:{transition:i.transitions.create(["transform","opacity"],{duration:i.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:e})=>!e.open,style:{[`& .${K4.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${K4.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${K4.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),Cut=Lc("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(i,e)=>e.staticTooltipLabel})(md(({theme:i})=>({position:"absolute",...i.typography.body1,backgroundColor:(i.vars||i).palette.background.paper,borderRadius:(i.vars||i).shape.borderRadius,boxShadow:(i.vars||i).shadows[1],color:(i.vars||i).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),Rut=X.forwardRef(function(e,t){const n=bg({props:e,name:"MuiSpeedDialAction"}),{className:r,delay:s=0,FabProps:o={},icon:a,id:l,open:c,TooltipClasses:u,tooltipOpen:f=!1,tooltipPlacement:h="left",tooltipTitle:p,...m}=n,g={...n,tooltipPlacement:h},b=Eut(g),[T,C]=X.useState(f),R=()=>{C(!1)},P=()=>{C(!0)},I={transitionDelay:`${s}ms`},F=ce.jsx(wut,{size:"small",className:Ro(b.fab,r),tabIndex:-1,role:"menuitem",ownerState:g,...o,style:{...I,...o.style},children:a});return f?ce.jsxs(Mut,{id:l,ref:t,className:b.staticTooltip,ownerState:g,...m,children:[ce.jsx(Cut,{style:I,id:`${l}-label`,className:b.staticTooltipLabel,ownerState:g,children:p}),X.cloneElement(F,{"aria-labelledby":`${l}-label`})]}):(!c&&T&&C(!1),ce.jsx(Sut,{id:l,ref:t,title:p,placement:h,onClose:R,onOpen:P,open:c&&T,classes:u,...m,children:F}))}),Dut=eB(ce.jsx("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook"),Lut=eB(ce.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),Put=eB(ce.jsx("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),Nut=[{icon:ce.jsx(Dut,{}),name:"Facebook",link:"https://www.facebook.com/djsin.djsin"},{icon:ce.jsx(Lut,{}),name:"LinkedIn",link:"https://www.linkedin.com/in/ireshnimantha/"},{icon:ce.jsx(Put,{}),name:"GitHub",link:"https://github.com/Iresh-Nimantha"}];function But(){return ce.jsx(flt,{sx:{position:"fixed",bottom:16,right:16,zIndex:1e3,"@media (max-width: 600px)":{bottom:8,right:8}},children:ce.jsx(jlt,{ariaLabel:"Social Media Links",icon:ce.jsx(nAe,{sx:{color:"white",bgcolor:"darkblue"}}),FabProps:{sx:{bgcolor:"darkblue","&:hover":{bgcolor:"#000066"}}},children:Nut.map(i=>ce.jsx(Rut,{icon:i.icon,tooltipTitle:i.name,onClick:()=>window.open(i.link,"_blank")},i.name))})})}function Iut(){return ce.jsxs("main",{className:"max-w-7xl mx-auto",children:[ce.jsx(fme,{}),ce.jsx(T6e,{}),ce.jsx(ktt,{}),ce.jsx(ztt,{}),ce.jsx(Htt,{}),ce.jsx(Krt,{}),ce.jsx(But,{}),ce.jsx($rt,{}),ce.jsx(jrt,{})]})}N7.createRoot(document.getElementById("root")).render(ce.jsx(X.StrictMode,{children:ce.jsx(Iut,{})}));
